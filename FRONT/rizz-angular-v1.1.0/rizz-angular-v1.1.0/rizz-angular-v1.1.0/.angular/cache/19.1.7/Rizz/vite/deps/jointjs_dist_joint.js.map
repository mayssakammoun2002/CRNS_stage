{
  "version": 3,
  "sources": ["../../../../../../node_modules/jointjs/dist/joint.js"],
  "sourcesContent": ["/*! JointJS v3.7.7 (2023-11-07) - JavaScript diagramming library\n\n\nThis Source Code Form is subject to the terms of the Mozilla Public\nLicense, v. 2.0. If a copy of the MPL was not distributed with this\nfile, You can obtain one at http://mozilla.org/MPL/2.0/.\n*/\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('backbone'), require('jquery')) : typeof define === 'function' && define.amd ? define(['exports', 'backbone', 'jquery'], factory) : (global = global || self, factory(global.joint = {}, global.Backbone, global.$));\n})(this, function (exports, Backbone, $) {\n  'use strict';\n\n  Backbone = Backbone && Backbone.hasOwnProperty('default') ? Backbone['default'] : Backbone;\n  $ = $ && $.hasOwnProperty('default') ? $['default'] : $;\n  var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n  function commonjsRequire() {\n    throw new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');\n  }\n  function unwrapExports(x) {\n    return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x.default : x;\n  }\n  function createCommonjsModule(fn, module) {\n    return module = {\n      exports: {}\n    }, fn(module, module.exports), module.exports;\n  }\n  function getCjsExportFromNamespace(n) {\n    return n && n.default || n;\n  }\n  var check = function (it) {\n    return it && it.Math == Math && it;\n  };\n\n  // https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n  var global_1 =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) || check(typeof window == 'object' && window) || check(typeof self == 'object' && self) || check(typeof commonjsGlobal == 'object' && commonjsGlobal) ||\n  // eslint-disable-next-line no-new-func\n  function () {\n    return this;\n  }() || Function('return this')();\n  var fails = function (exec) {\n    try {\n      return !!exec();\n    } catch (error) {\n      return true;\n    }\n  };\n\n  // Detect IE8's incomplete defineProperty implementation\n  var descriptors = !fails(function () {\n    return Object.defineProperty({}, 1, {\n      get: function () {\n        return 7;\n      }\n    })[1] != 7;\n  });\n  'use strict';\n  var nativePropertyIsEnumerable = {}.propertyIsEnumerable;\n  var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n  // Nashorn ~ JDK8 bug\n  var NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({\n    1: 2\n  }, 1);\n\n  // `Object.prototype.propertyIsEnumerable` method implementation\n  // https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\n  var f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n    var descriptor = getOwnPropertyDescriptor(this, V);\n    return !!descriptor && descriptor.enumerable;\n  } : nativePropertyIsEnumerable;\n  var objectPropertyIsEnumerable = {\n    f: f\n  };\n  var createPropertyDescriptor = function (bitmap, value) {\n    return {\n      enumerable: !(bitmap & 1),\n      configurable: !(bitmap & 2),\n      writable: !(bitmap & 4),\n      value: value\n    };\n  };\n  var toString = {}.toString;\n  var classofRaw = function (it) {\n    return toString.call(it).slice(8, -1);\n  };\n  var split = ''.split;\n\n  // fallback for non-array-like ES3 and non-enumerable old V8 strings\n  var indexedObject = fails(function () {\n    // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n    // eslint-disable-next-line no-prototype-builtins\n    return !Object('z').propertyIsEnumerable(0);\n  }) ? function (it) {\n    return classofRaw(it) == 'String' ? split.call(it, '') : Object(it);\n  } : Object;\n\n  // `RequireObjectCoercible` abstract operation\n  // https://tc39.es/ecma262/#sec-requireobjectcoercible\n  var requireObjectCoercible = function (it) {\n    if (it == undefined) {\n      throw TypeError(\"Can't call method on \" + it);\n    }\n    return it;\n  };\n\n  // toObject with fallback for non-array-like ES3 strings\n\n  var toIndexedObject = function (it) {\n    return indexedObject(requireObjectCoercible(it));\n  };\n  var isObject = function (it) {\n    return typeof it === 'object' ? it !== null : typeof it === 'function';\n  };\n\n  // `ToPrimitive` abstract operation\n  // https://tc39.es/ecma262/#sec-toprimitive\n  // instead of the ES6 spec version, we didn't implement @@toPrimitive case\n  // and the second argument - flag - preferred type is a string\n  var toPrimitive = function (input, PREFERRED_STRING) {\n    if (!isObject(input)) {\n      return input;\n    }\n    var fn, val;\n    if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) {\n      return val;\n    }\n    if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) {\n      return val;\n    }\n    if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) {\n      return val;\n    }\n    throw TypeError(\"Can't convert object to primitive value\");\n  };\n  var hasOwnProperty$1 = {}.hasOwnProperty;\n  var has = function (it, key) {\n    return hasOwnProperty$1.call(it, key);\n  };\n  var document$1 = global_1.document;\n  // typeof document.createElement is 'object' in old IE\n  var EXISTS = isObject(document$1) && isObject(document$1.createElement);\n  var documentCreateElement = function (it) {\n    return EXISTS ? document$1.createElement(it) : {};\n  };\n\n  // Thank's IE8 for his funny defineProperty\n  var ie8DomDefine = !descriptors && !fails(function () {\n    return Object.defineProperty(documentCreateElement('div'), 'a', {\n      get: function () {\n        return 7;\n      }\n    }).a != 7;\n  });\n  var nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n  var f$1 = descriptors ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n    O = toIndexedObject(O);\n    P = toPrimitive(P, true);\n    if (ie8DomDefine) {\n      try {\n        return nativeGetOwnPropertyDescriptor(O, P);\n      } catch (error) {/* empty */}\n    }\n    if (has(O, P)) {\n      return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(O, P), O[P]);\n    }\n  };\n  var objectGetOwnPropertyDescriptor = {\n    f: f$1\n  };\n  var anObject = function (it) {\n    if (!isObject(it)) {\n      throw TypeError(String(it) + ' is not an object');\n    }\n    return it;\n  };\n  var nativeDefineProperty = Object.defineProperty;\n\n  // `Object.defineProperty` method\n  // https://tc39.es/ecma262/#sec-object.defineproperty\n  var f$2 = descriptors ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n    anObject(O);\n    P = toPrimitive(P, true);\n    anObject(Attributes);\n    if (ie8DomDefine) {\n      try {\n        return nativeDefineProperty(O, P, Attributes);\n      } catch (error) {/* empty */}\n    }\n    if ('get' in Attributes || 'set' in Attributes) {\n      throw TypeError('Accessors not supported');\n    }\n    if ('value' in Attributes) {\n      O[P] = Attributes.value;\n    }\n    return O;\n  };\n  var objectDefineProperty = {\n    f: f$2\n  };\n  var createNonEnumerableProperty = descriptors ? function (object, key, value) {\n    return objectDefineProperty.f(object, key, createPropertyDescriptor(1, value));\n  } : function (object, key, value) {\n    object[key] = value;\n    return object;\n  };\n  var setGlobal = function (key, value) {\n    try {\n      createNonEnumerableProperty(global_1, key, value);\n    } catch (error) {\n      global_1[key] = value;\n    }\n    return value;\n  };\n  var SHARED = '__core-js_shared__';\n  var store = global_1[SHARED] || setGlobal(SHARED, {});\n  var sharedStore = store;\n  var functionToString = Function.toString;\n\n  // this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\n  if (typeof sharedStore.inspectSource != 'function') {\n    sharedStore.inspectSource = function (it) {\n      return functionToString.call(it);\n    };\n  }\n  var inspectSource = sharedStore.inspectSource;\n  var WeakMap = global_1.WeakMap;\n  var nativeWeakMap = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n  var isPure = false;\n  var shared = createCommonjsModule(function (module) {\n    (module.exports = function (key, value) {\n      return sharedStore[key] || (sharedStore[key] = value !== undefined ? value : {});\n    })('versions', []).push({\n      version: '3.8.3',\n      mode: isPure ? 'pure' : 'global',\n      copyright: 'Â© 2021 Denis Pushkarev (zloirock.ru)'\n    });\n  });\n  var id = 0;\n  var postfix = Math.random();\n  var uid = function (key) {\n    return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n  };\n  var keys = shared('keys');\n  var sharedKey = function (key) {\n    return keys[key] || (keys[key] = uid(key));\n  };\n  var hiddenKeys = {};\n  var WeakMap$1 = global_1.WeakMap;\n  var set, get, has$1;\n  var enforce = function (it) {\n    return has$1(it) ? get(it) : set(it, {});\n  };\n  var getterFor = function (TYPE) {\n    return function (it) {\n      var state;\n      if (!isObject(it) || (state = get(it)).type !== TYPE) {\n        throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n      }\n      return state;\n    };\n  };\n  if (nativeWeakMap) {\n    var store$1 = sharedStore.state || (sharedStore.state = new WeakMap$1());\n    var wmget = store$1.get;\n    var wmhas = store$1.has;\n    var wmset = store$1.set;\n    set = function (it, metadata) {\n      metadata.facade = it;\n      wmset.call(store$1, it, metadata);\n      return metadata;\n    };\n    get = function (it) {\n      return wmget.call(store$1, it) || {};\n    };\n    has$1 = function (it) {\n      return wmhas.call(store$1, it);\n    };\n  } else {\n    var STATE = sharedKey('state');\n    hiddenKeys[STATE] = true;\n    set = function (it, metadata) {\n      metadata.facade = it;\n      createNonEnumerableProperty(it, STATE, metadata);\n      return metadata;\n    };\n    get = function (it) {\n      return has(it, STATE) ? it[STATE] : {};\n    };\n    has$1 = function (it) {\n      return has(it, STATE);\n    };\n  }\n  var internalState = {\n    set: set,\n    get: get,\n    has: has$1,\n    enforce: enforce,\n    getterFor: getterFor\n  };\n  var internalState_1 = internalState.set;\n  var internalState_2 = internalState.get;\n  var internalState_3 = internalState.has;\n  var internalState_4 = internalState.enforce;\n  var internalState_5 = internalState.getterFor;\n  var redefine = createCommonjsModule(function (module) {\n    var getInternalState = internalState.get;\n    var enforceInternalState = internalState.enforce;\n    var TEMPLATE = String(String).split('String');\n    (module.exports = function (O, key, value, options) {\n      var unsafe = options ? !!options.unsafe : false;\n      var simple = options ? !!options.enumerable : false;\n      var noTargetGet = options ? !!options.noTargetGet : false;\n      var state;\n      if (typeof value == 'function') {\n        if (typeof key == 'string' && !has(value, 'name')) {\n          createNonEnumerableProperty(value, 'name', key);\n        }\n        state = enforceInternalState(value);\n        if (!state.source) {\n          state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n        }\n      }\n      if (O === global_1) {\n        if (simple) {\n          O[key] = value;\n        } else {\n          setGlobal(key, value);\n        }\n        return;\n      } else if (!unsafe) {\n        delete O[key];\n      } else if (!noTargetGet && O[key]) {\n        simple = true;\n      }\n      if (simple) {\n        O[key] = value;\n      } else {\n        createNonEnumerableProperty(O, key, value);\n      }\n      // add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n    })(Function.prototype, 'toString', function toString() {\n      return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n    });\n  });\n  var path = global_1;\n  var aFunction = function (variable) {\n    return typeof variable == 'function' ? variable : undefined;\n  };\n  var getBuiltIn = function (namespace, method) {\n    return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global_1[namespace]) : path[namespace] && path[namespace][method] || global_1[namespace] && global_1[namespace][method];\n  };\n  var ceil = Math.ceil;\n  var floor = Math.floor;\n\n  // `ToInteger` abstract operation\n  // https://tc39.es/ecma262/#sec-tointeger\n  var toInteger = function (argument) {\n    return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n  };\n  var min = Math.min;\n\n  // `ToLength` abstract operation\n  // https://tc39.es/ecma262/#sec-tolength\n  var toLength = function (argument) {\n    return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n  };\n  var max = Math.max;\n  var min$1 = Math.min;\n\n  // Helper for a popular repeating case of the spec:\n  // Let integer be ? ToInteger(index).\n  // If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\n  var toAbsoluteIndex = function (index, length) {\n    var integer = toInteger(index);\n    return integer < 0 ? max(integer + length, 0) : min$1(integer, length);\n  };\n\n  // `Array.prototype.{ indexOf, includes }` methods implementation\n  var createMethod = function (IS_INCLUDES) {\n    return function ($this, el, fromIndex) {\n      var O = toIndexedObject($this);\n      var length = toLength(O.length);\n      var index = toAbsoluteIndex(fromIndex, length);\n      var value;\n      // Array#includes uses SameValueZero equality algorithm\n      // eslint-disable-next-line no-self-compare\n      if (IS_INCLUDES && el != el) {\n        while (length > index) {\n          value = O[index++];\n          // eslint-disable-next-line no-self-compare\n          if (value != value) {\n            return true;\n          }\n          // Array#indexOf ignores holes, Array#includes - not\n        }\n      } else {\n        for (; length > index; index++) {\n          if ((IS_INCLUDES || index in O) && O[index] === el) {\n            return IS_INCLUDES || index || 0;\n          }\n        }\n      }\n      return !IS_INCLUDES && -1;\n    };\n  };\n  var arrayIncludes = {\n    // `Array.prototype.includes` method\n    // https://tc39.es/ecma262/#sec-array.prototype.includes\n    includes: createMethod(true),\n    // `Array.prototype.indexOf` method\n    // https://tc39.es/ecma262/#sec-array.prototype.indexof\n    indexOf: createMethod(false)\n  };\n  var arrayIncludes_1 = arrayIncludes.includes;\n  var arrayIncludes_2 = arrayIncludes.indexOf;\n  var indexOf = arrayIncludes.indexOf;\n  var objectKeysInternal = function (object, names) {\n    var O = toIndexedObject(object);\n    var i = 0;\n    var result = [];\n    var key;\n    for (key in O) {\n      !has(hiddenKeys, key) && has(O, key) && result.push(key);\n    }\n    // Don't enum bug & hidden keys\n    while (names.length > i) {\n      if (has(O, key = names[i++])) {\n        ~indexOf(result, key) || result.push(key);\n      }\n    }\n    return result;\n  };\n\n  // IE8- don't enum bug keys\n  var enumBugKeys = ['constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'toLocaleString', 'toString', 'valueOf'];\n  var hiddenKeys$1 = enumBugKeys.concat('length', 'prototype');\n\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertynames\n  var f$3 = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n    return objectKeysInternal(O, hiddenKeys$1);\n  };\n  var objectGetOwnPropertyNames = {\n    f: f$3\n  };\n  var f$4 = Object.getOwnPropertySymbols;\n  var objectGetOwnPropertySymbols = {\n    f: f$4\n  };\n\n  // all object keys, includes non-enumerable and symbols\n  var ownKeys = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n    var keys = objectGetOwnPropertyNames.f(anObject(it));\n    var getOwnPropertySymbols = objectGetOwnPropertySymbols.f;\n    return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n  };\n  var copyConstructorProperties = function (target, source) {\n    var keys = ownKeys(source);\n    var defineProperty = objectDefineProperty.f;\n    var getOwnPropertyDescriptor = objectGetOwnPropertyDescriptor.f;\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if (!has(target, key)) {\n        defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n      }\n    }\n  };\n  var replacement = /#|\\.prototype\\./;\n  var isForced = function (feature, detection) {\n    var value = data[normalize(feature)];\n    return value == POLYFILL ? true : value == NATIVE ? false : typeof detection == 'function' ? fails(detection) : !!detection;\n  };\n  var normalize = isForced.normalize = function (string) {\n    return String(string).replace(replacement, '.').toLowerCase();\n  };\n  var data = isForced.data = {};\n  var NATIVE = isForced.NATIVE = 'N';\n  var POLYFILL = isForced.POLYFILL = 'P';\n  var isForced_1 = isForced;\n  var getOwnPropertyDescriptor$1 = objectGetOwnPropertyDescriptor.f;\n\n  /*\n    options.target      - name of the target object\n    options.global      - target is the global object\n    options.stat        - export as static methods of target\n    options.proto       - export as prototype methods of target\n    options.real        - real prototype method for the `pure` version\n    options.forced      - export even if the native feature is available\n    options.bind        - bind methods to the target, required for the `pure` version\n    options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n    options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n    options.sham        - add a flag to not completely full polyfills\n    options.enumerable  - export as enumerable property\n    options.noTargetGet - prevent calling a getter on target\n  */\n  var _export = function (options, source) {\n    var TARGET = options.target;\n    var GLOBAL = options.global;\n    var STATIC = options.stat;\n    var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n    if (GLOBAL) {\n      target = global_1;\n    } else if (STATIC) {\n      target = global_1[TARGET] || setGlobal(TARGET, {});\n    } else {\n      target = (global_1[TARGET] || {}).prototype;\n    }\n    if (target) {\n      for (key in source) {\n        sourceProperty = source[key];\n        if (options.noTargetGet) {\n          descriptor = getOwnPropertyDescriptor$1(target, key);\n          targetProperty = descriptor && descriptor.value;\n        } else {\n          targetProperty = target[key];\n        }\n        FORCED = isForced_1(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n        // contained in target\n        if (!FORCED && targetProperty !== undefined) {\n          if (typeof sourceProperty === typeof targetProperty) {\n            continue;\n          }\n          copyConstructorProperties(sourceProperty, targetProperty);\n        }\n        // add a flag to not completely full polyfills\n        if (options.sham || targetProperty && targetProperty.sham) {\n          createNonEnumerableProperty(sourceProperty, 'sham', true);\n        }\n        // extend global\n        redefine(target, key, sourceProperty, options);\n      }\n    }\n  };\n  var nativeSymbol = !!Object.getOwnPropertySymbols && !fails(function () {\n    // Chrome 38 Symbol has incorrect toString conversion\n    // eslint-disable-next-line no-undef\n    return !String(Symbol());\n  });\n  var useSymbolAsUid = nativeSymbol\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n  var WellKnownSymbolsStore = shared('wks');\n  var Symbol$1 = global_1.Symbol;\n  var createWellKnownSymbol = useSymbolAsUid ? Symbol$1 : Symbol$1 && Symbol$1.withoutSetter || uid;\n  var wellKnownSymbol = function (name) {\n    if (!has(WellKnownSymbolsStore, name)) {\n      if (nativeSymbol && has(Symbol$1, name)) {\n        WellKnownSymbolsStore[name] = Symbol$1[name];\n      } else {\n        WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n      }\n    }\n    return WellKnownSymbolsStore[name];\n  };\n\n  // `Object.keys` method\n  // https://tc39.es/ecma262/#sec-object.keys\n  var objectKeys = Object.keys || function keys(O) {\n    return objectKeysInternal(O, enumBugKeys);\n  };\n\n  // `Object.defineProperties` method\n  // https://tc39.es/ecma262/#sec-object.defineproperties\n  var objectDefineProperties = descriptors ? Object.defineProperties : function defineProperties(O, Properties) {\n    anObject(O);\n    var keys = objectKeys(Properties);\n    var length = keys.length;\n    var index = 0;\n    var key;\n    while (length > index) {\n      objectDefineProperty.f(O, key = keys[index++], Properties[key]);\n    }\n    return O;\n  };\n  var html = getBuiltIn('document', 'documentElement');\n  var GT = '>';\n  var LT = '<';\n  var PROTOTYPE = 'prototype';\n  var SCRIPT = 'script';\n  var IE_PROTO = sharedKey('IE_PROTO');\n  var EmptyConstructor = function () {/* empty */};\n  var scriptTag = function (content) {\n    return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n  };\n\n  // Create object with fake `null` prototype: use ActiveX Object with cleared prototype\n  var NullProtoObjectViaActiveX = function (activeXDocument) {\n    activeXDocument.write(scriptTag(''));\n    activeXDocument.close();\n    var temp = activeXDocument.parentWindow.Object;\n    activeXDocument = null; // avoid memory leak\n    return temp;\n  };\n\n  // Create object with fake `null` prototype: use iframe Object with cleared prototype\n  var NullProtoObjectViaIFrame = function () {\n    // Thrash, waste and sodomy: IE GC bug\n    var iframe = documentCreateElement('iframe');\n    var JS = 'java' + SCRIPT + ':';\n    var iframeDocument;\n    iframe.style.display = 'none';\n    html.appendChild(iframe);\n    // https://github.com/zloirock/core-js/issues/475\n    iframe.src = String(JS);\n    iframeDocument = iframe.contentWindow.document;\n    iframeDocument.open();\n    iframeDocument.write(scriptTag('document.F=Object'));\n    iframeDocument.close();\n    return iframeDocument.F;\n  };\n\n  // Check for document.domain and active x support\n  // No need to use active x approach when document.domain is not set\n  // see https://github.com/es-shims/es5-shim/issues/150\n  // variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n  // avoid IE GC bug\n  var activeXDocument;\n  var NullProtoObject = function () {\n    try {\n      /* global ActiveXObject */\n      activeXDocument = document.domain && new ActiveXObject('htmlfile');\n    } catch (error) {/* ignore */}\n    NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n    var length = enumBugKeys.length;\n    while (length--) {\n      delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n    }\n    return NullProtoObject();\n  };\n  hiddenKeys[IE_PROTO] = true;\n\n  // `Object.create` method\n  // https://tc39.es/ecma262/#sec-object.create\n  var objectCreate = Object.create || function create(O, Properties) {\n    var result;\n    if (O !== null) {\n      EmptyConstructor[PROTOTYPE] = anObject(O);\n      result = new EmptyConstructor();\n      EmptyConstructor[PROTOTYPE] = null;\n      // add \"__proto__\" for Object.getPrototypeOf polyfill\n      result[IE_PROTO] = O;\n    } else {\n      result = NullProtoObject();\n    }\n    return Properties === undefined ? result : objectDefineProperties(result, Properties);\n  };\n  var UNSCOPABLES = wellKnownSymbol('unscopables');\n  var ArrayPrototype = Array.prototype;\n\n  // Array.prototype[@@unscopables]\n  // https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\n  if (ArrayPrototype[UNSCOPABLES] == undefined) {\n    objectDefineProperty.f(ArrayPrototype, UNSCOPABLES, {\n      configurable: true,\n      value: objectCreate(null)\n    });\n  }\n\n  // add a key to Array.prototype[@@unscopables]\n  var addToUnscopables = function (key) {\n    ArrayPrototype[UNSCOPABLES][key] = true;\n  };\n  var defineProperty = Object.defineProperty;\n  var cache = {};\n  var thrower = function (it) {\n    throw it;\n  };\n  var arrayMethodUsesToLength = function (METHOD_NAME, options) {\n    if (has(cache, METHOD_NAME)) {\n      return cache[METHOD_NAME];\n    }\n    if (!options) {\n      options = {};\n    }\n    var method = [][METHOD_NAME];\n    var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n    var argument0 = has(options, 0) ? options[0] : thrower;\n    var argument1 = has(options, 1) ? options[1] : undefined;\n    return cache[METHOD_NAME] = !!method && !fails(function () {\n      if (ACCESSORS && !descriptors) {\n        return true;\n      }\n      var O = {\n        length: -1\n      };\n      if (ACCESSORS) {\n        defineProperty(O, 1, {\n          enumerable: true,\n          get: thrower\n        });\n      } else {\n        O[1] = 1;\n      }\n      method.call(O, argument0, argument1);\n    });\n  };\n  'use strict';\n  var $includes = arrayIncludes.includes;\n  var USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', {\n    ACCESSORS: true,\n    1: 0\n  });\n\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  _export({\n    target: 'Array',\n    proto: true,\n    forced: !USES_TO_LENGTH\n  }, {\n    includes: function includes(el /* , fromIndex = 0 */) {\n      return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n    }\n  });\n\n  // https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\n  addToUnscopables('includes');\n  var es_array_includes = {};\n  var aFunction$1 = function (it) {\n    if (typeof it != 'function') {\n      throw TypeError(String(it) + ' is not a function');\n    }\n    return it;\n  };\n\n  // optional / simple context binding\n  var functionBindContext = function (fn, that, length) {\n    aFunction$1(fn);\n    if (that === undefined) {\n      return fn;\n    }\n    switch (length) {\n      case 0:\n        return function () {\n          return fn.call(that);\n        };\n      case 1:\n        return function (a) {\n          return fn.call(that, a);\n        };\n      case 2:\n        return function (a, b) {\n          return fn.call(that, a, b);\n        };\n      case 3:\n        return function (a, b, c) {\n          return fn.call(that, a, b, c);\n        };\n    }\n    return function /* ...args */\n    () {\n      return fn.apply(that, arguments);\n    };\n  };\n  var call = Function.call;\n  var entryUnbind = function (CONSTRUCTOR, METHOD, length) {\n    return functionBindContext(call, global_1[CONSTRUCTOR].prototype[METHOD], length);\n  };\n  var includes = entryUnbind('Array', 'includes');\n  var includes$1 = includes;\n\n  // `ToObject` abstract operation\n  // https://tc39.es/ecma262/#sec-toobject\n  var toObject = function (argument) {\n    return Object(requireObjectCoercible(argument));\n  };\n\n  // `IsArray` abstract operation\n  // https://tc39.es/ecma262/#sec-isarray\n  var isArray = Array.isArray || function isArray(arg) {\n    return classofRaw(arg) == 'Array';\n  };\n  var SPECIES = wellKnownSymbol('species');\n\n  // `ArraySpeciesCreate` abstract operation\n  // https://tc39.es/ecma262/#sec-arrayspeciescreate\n  var arraySpeciesCreate = function (originalArray, length) {\n    var C;\n    if (isArray(originalArray)) {\n      C = originalArray.constructor;\n      // cross-realm fallback\n      if (typeof C == 'function' && (C === Array || isArray(C.prototype))) {\n        C = undefined;\n      } else if (isObject(C)) {\n        C = C[SPECIES];\n        if (C === null) {\n          C = undefined;\n        }\n      }\n    }\n    return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n  };\n  var push = [].push;\n\n  // `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation\n  var createMethod$1 = function (TYPE) {\n    var IS_MAP = TYPE == 1;\n    var IS_FILTER = TYPE == 2;\n    var IS_SOME = TYPE == 3;\n    var IS_EVERY = TYPE == 4;\n    var IS_FIND_INDEX = TYPE == 6;\n    var IS_FILTER_OUT = TYPE == 7;\n    var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n    return function ($this, callbackfn, that, specificCreate) {\n      var O = toObject($this);\n      var self = indexedObject(O);\n      var boundFunction = functionBindContext(callbackfn, that, 3);\n      var length = toLength(self.length);\n      var index = 0;\n      var create = specificCreate || arraySpeciesCreate;\n      var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;\n      var value, result;\n      for (; length > index; index++) {\n        if (NO_HOLES || index in self) {\n          value = self[index];\n          result = boundFunction(value, index, O);\n          if (TYPE) {\n            if (IS_MAP) {\n              target[index] = result;\n            } // map\n            else if (result) {\n              switch (TYPE) {\n                case 3:\n                  return true;\n                // some\n                case 5:\n                  return value;\n                // find\n                case 6:\n                  return index;\n                // findIndex\n                case 2:\n                  push.call(target, value);\n                // filter\n              }\n            } else {\n              switch (TYPE) {\n                case 4:\n                  return false;\n                // every\n                case 7:\n                  push.call(target, value);\n                // filterOut\n              }\n            }\n          }\n        }\n      }\n      return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n    };\n  };\n  var arrayIteration = {\n    // `Array.prototype.forEach` method\n    // https://tc39.es/ecma262/#sec-array.prototype.foreach\n    forEach: createMethod$1(0),\n    // `Array.prototype.map` method\n    // https://tc39.es/ecma262/#sec-array.prototype.map\n    map: createMethod$1(1),\n    // `Array.prototype.filter` method\n    // https://tc39.es/ecma262/#sec-array.prototype.filter\n    filter: createMethod$1(2),\n    // `Array.prototype.some` method\n    // https://tc39.es/ecma262/#sec-array.prototype.some\n    some: createMethod$1(3),\n    // `Array.prototype.every` method\n    // https://tc39.es/ecma262/#sec-array.prototype.every\n    every: createMethod$1(4),\n    // `Array.prototype.find` method\n    // https://tc39.es/ecma262/#sec-array.prototype.find\n    find: createMethod$1(5),\n    // `Array.prototype.findIndex` method\n    // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n    findIndex: createMethod$1(6),\n    // `Array.prototype.filterOut` method\n    // https://github.com/tc39/proposal-array-filtering\n    filterOut: createMethod$1(7)\n  };\n  var arrayIteration_1 = arrayIteration.forEach;\n  var arrayIteration_2 = arrayIteration.map;\n  var arrayIteration_3 = arrayIteration.filter;\n  var arrayIteration_4 = arrayIteration.some;\n  var arrayIteration_5 = arrayIteration.every;\n  var arrayIteration_6 = arrayIteration.find;\n  var arrayIteration_7 = arrayIteration.findIndex;\n  var arrayIteration_8 = arrayIteration.filterOut;\n  'use strict';\n  var $find = arrayIteration.find;\n  var FIND = 'find';\n  var SKIPS_HOLES = true;\n  var USES_TO_LENGTH$1 = arrayMethodUsesToLength(FIND);\n\n  // Shouldn't skip holes\n  if (FIND in []) {\n    Array(1)[FIND](function () {\n      SKIPS_HOLES = false;\n    });\n  }\n\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  _export({\n    target: 'Array',\n    proto: true,\n    forced: SKIPS_HOLES || !USES_TO_LENGTH$1\n  }, {\n    find: function find(callbackfn /* , that = undefined */) {\n      return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    }\n  });\n\n  // https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\n  addToUnscopables(FIND);\n  var es_array_find = {};\n  var find = entryUnbind('Array', 'find');\n  var find$1 = find;\n\n  // `String.prototype.{ codePointAt, at }` methods implementation\n  var createMethod$2 = function (CONVERT_TO_STRING) {\n    return function ($this, pos) {\n      var S = String(requireObjectCoercible($this));\n      var position = toInteger(pos);\n      var size = S.length;\n      var first, second;\n      if (position < 0 || position >= size) {\n        return CONVERT_TO_STRING ? '' : undefined;\n      }\n      first = S.charCodeAt(position);\n      return first < 0xD800 || first > 0xDBFF || position + 1 === size || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF ? CONVERT_TO_STRING ? S.charAt(position) : first : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n    };\n  };\n  var stringMultibyte = {\n    // `String.prototype.codePointAt` method\n    // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n    codeAt: createMethod$2(false),\n    // `String.prototype.at` method\n    // https://github.com/mathiasbynens/String.prototype.at\n    charAt: createMethod$2(true)\n  };\n  var stringMultibyte_1 = stringMultibyte.codeAt;\n  var stringMultibyte_2 = stringMultibyte.charAt;\n  var correctPrototypeGetter = !fails(function () {\n    function F() {/* empty */}\n    F.prototype.constructor = null;\n    return Object.getPrototypeOf(new F()) !== F.prototype;\n  });\n  var IE_PROTO$1 = sharedKey('IE_PROTO');\n  var ObjectPrototype = Object.prototype;\n\n  // `Object.getPrototypeOf` method\n  // https://tc39.es/ecma262/#sec-object.getprototypeof\n  var objectGetPrototypeOf = correctPrototypeGetter ? Object.getPrototypeOf : function (O) {\n    O = toObject(O);\n    if (has(O, IE_PROTO$1)) {\n      return O[IE_PROTO$1];\n    }\n    if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n      return O.constructor.prototype;\n    }\n    return O instanceof Object ? ObjectPrototype : null;\n  };\n  'use strict';\n  var ITERATOR = wellKnownSymbol('iterator');\n  var BUGGY_SAFARI_ITERATORS = false;\n  var returnThis = function () {\n    return this;\n  };\n\n  // `%IteratorPrototype%` object\n  // https://tc39.es/ecma262/#sec-%iteratorprototype%-object\n  var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n  if ([].keys) {\n    arrayIterator = [].keys();\n    // Safari 8 has buggy iterators w/o `next`\n    if (!('next' in arrayIterator)) {\n      BUGGY_SAFARI_ITERATORS = true;\n    } else {\n      PrototypeOfArrayIteratorPrototype = objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator));\n      if (PrototypeOfArrayIteratorPrototype !== Object.prototype) {\n        IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n      }\n    }\n  }\n  var NEW_ITERATOR_PROTOTYPE = IteratorPrototype == undefined || fails(function () {\n    var test = {};\n    // FF44- legacy iterators case\n    return IteratorPrototype[ITERATOR].call(test) !== test;\n  });\n  if (NEW_ITERATOR_PROTOTYPE) {\n    IteratorPrototype = {};\n  }\n\n  // 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n  if ((!isPure || NEW_ITERATOR_PROTOTYPE) && !has(IteratorPrototype, ITERATOR)) {\n    createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n  }\n  var iteratorsCore = {\n    IteratorPrototype: IteratorPrototype,\n    BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n  };\n  var iteratorsCore_1 = iteratorsCore.IteratorPrototype;\n  var iteratorsCore_2 = iteratorsCore.BUGGY_SAFARI_ITERATORS;\n  var defineProperty$1 = objectDefineProperty.f;\n  var TO_STRING_TAG = wellKnownSymbol('toStringTag');\n  var setToStringTag = function (it, TAG, STATIC) {\n    if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n      defineProperty$1(it, TO_STRING_TAG, {\n        configurable: true,\n        value: TAG\n      });\n    }\n  };\n  var iterators = {};\n  'use strict';\n  var IteratorPrototype$1 = iteratorsCore.IteratorPrototype;\n  var returnThis$1 = function () {\n    return this;\n  };\n  var createIteratorConstructor = function (IteratorConstructor, NAME, next) {\n    var TO_STRING_TAG = NAME + ' Iterator';\n    IteratorConstructor.prototype = objectCreate(IteratorPrototype$1, {\n      next: createPropertyDescriptor(1, next)\n    });\n    setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n    iterators[TO_STRING_TAG] = returnThis$1;\n    return IteratorConstructor;\n  };\n  var aPossiblePrototype = function (it) {\n    if (!isObject(it) && it !== null) {\n      throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n    }\n    return it;\n  };\n\n  // `Object.setPrototypeOf` method\n  // https://tc39.es/ecma262/#sec-object.setprototypeof\n  // Works with __proto__ only. Old v8 can't work with null proto objects.\n  /* eslint-disable no-proto */\n  var objectSetPrototypeOf = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n    var CORRECT_SETTER = false;\n    var test = {};\n    var setter;\n    try {\n      setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n      setter.call(test, []);\n      CORRECT_SETTER = test instanceof Array;\n    } catch (error) {/* empty */}\n    return function setPrototypeOf(O, proto) {\n      anObject(O);\n      aPossiblePrototype(proto);\n      if (CORRECT_SETTER) {\n        setter.call(O, proto);\n      } else {\n        O.__proto__ = proto;\n      }\n      return O;\n    };\n  }() : undefined);\n  'use strict';\n  var IteratorPrototype$2 = iteratorsCore.IteratorPrototype;\n  var BUGGY_SAFARI_ITERATORS$1 = iteratorsCore.BUGGY_SAFARI_ITERATORS;\n  var ITERATOR$1 = wellKnownSymbol('iterator');\n  var KEYS = 'keys';\n  var VALUES = 'values';\n  var ENTRIES = 'entries';\n  var returnThis$2 = function () {\n    return this;\n  };\n  var defineIterator = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n    createIteratorConstructor(IteratorConstructor, NAME, next);\n    var getIterationMethod = function (KIND) {\n      if (KIND === DEFAULT && defaultIterator) {\n        return defaultIterator;\n      }\n      if (!BUGGY_SAFARI_ITERATORS$1 && KIND in IterablePrototype) {\n        return IterablePrototype[KIND];\n      }\n      switch (KIND) {\n        case KEYS:\n          return function keys() {\n            return new IteratorConstructor(this, KIND);\n          };\n        case VALUES:\n          return function values() {\n            return new IteratorConstructor(this, KIND);\n          };\n        case ENTRIES:\n          return function entries() {\n            return new IteratorConstructor(this, KIND);\n          };\n      }\n      return function () {\n        return new IteratorConstructor(this);\n      };\n    };\n    var TO_STRING_TAG = NAME + ' Iterator';\n    var INCORRECT_VALUES_NAME = false;\n    var IterablePrototype = Iterable.prototype;\n    var nativeIterator = IterablePrototype[ITERATOR$1] || IterablePrototype['@@iterator'] || DEFAULT && IterablePrototype[DEFAULT];\n    var defaultIterator = !BUGGY_SAFARI_ITERATORS$1 && nativeIterator || getIterationMethod(DEFAULT);\n    var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n    var CurrentIteratorPrototype, methods, KEY;\n\n    // fix native\n    if (anyNativeIterator) {\n      CurrentIteratorPrototype = objectGetPrototypeOf(anyNativeIterator.call(new Iterable()));\n      if (IteratorPrototype$2 !== Object.prototype && CurrentIteratorPrototype.next) {\n        if (!isPure && objectGetPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype$2) {\n          if (objectSetPrototypeOf) {\n            objectSetPrototypeOf(CurrentIteratorPrototype, IteratorPrototype$2);\n          } else if (typeof CurrentIteratorPrototype[ITERATOR$1] != 'function') {\n            createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR$1, returnThis$2);\n          }\n        }\n        // Set @@toStringTag to native iterators\n        setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n        if (isPure) {\n          iterators[TO_STRING_TAG] = returnThis$2;\n        }\n      }\n    }\n\n    // fix Array#{values, @@iterator}.name in V8 / FF\n    if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n      INCORRECT_VALUES_NAME = true;\n      defaultIterator = function values() {\n        return nativeIterator.call(this);\n      };\n    }\n\n    // define iterator\n    if ((!isPure || FORCED) && IterablePrototype[ITERATOR$1] !== defaultIterator) {\n      createNonEnumerableProperty(IterablePrototype, ITERATOR$1, defaultIterator);\n    }\n    iterators[NAME] = defaultIterator;\n\n    // export additional methods\n    if (DEFAULT) {\n      methods = {\n        values: getIterationMethod(VALUES),\n        keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n        entries: getIterationMethod(ENTRIES)\n      };\n      if (FORCED) {\n        for (KEY in methods) {\n          if (BUGGY_SAFARI_ITERATORS$1 || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n            redefine(IterablePrototype, KEY, methods[KEY]);\n          }\n        }\n      } else {\n        _export({\n          target: NAME,\n          proto: true,\n          forced: BUGGY_SAFARI_ITERATORS$1 || INCORRECT_VALUES_NAME\n        }, methods);\n      }\n    }\n    return methods;\n  };\n  'use strict';\n  var charAt = stringMultibyte.charAt;\n  var STRING_ITERATOR = 'String Iterator';\n  var setInternalState = internalState.set;\n  var getInternalState = internalState.getterFor(STRING_ITERATOR);\n\n  // `String.prototype[@@iterator]` method\n  // https://tc39.es/ecma262/#sec-string.prototype-@@iterator\n  defineIterator(String, 'String', function (iterated) {\n    setInternalState(this, {\n      type: STRING_ITERATOR,\n      string: String(iterated),\n      index: 0\n    });\n    // `%StringIteratorPrototype%.next` method\n    // https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n  }, function next() {\n    var state = getInternalState(this);\n    var string = state.string;\n    var index = state.index;\n    var point;\n    if (index >= string.length) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    point = charAt(string, index);\n    state.index += point.length;\n    return {\n      value: point,\n      done: false\n    };\n  });\n  var es_string_iterator = {};\n  var iteratorClose = function (iterator) {\n    var returnMethod = iterator['return'];\n    if (returnMethod !== undefined) {\n      return anObject(returnMethod.call(iterator)).value;\n    }\n  };\n\n  // call something on iterator step with safe closing on error\n  var callWithSafeIterationClosing = function (iterator, fn, value, ENTRIES) {\n    try {\n      return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n      // 7.4.6 IteratorClose(iterator, completion)\n    } catch (error) {\n      iteratorClose(iterator);\n      throw error;\n    }\n  };\n  var ITERATOR$2 = wellKnownSymbol('iterator');\n  var ArrayPrototype$1 = Array.prototype;\n\n  // check on default Array iterator\n  var isArrayIteratorMethod = function (it) {\n    return it !== undefined && (iterators.Array === it || ArrayPrototype$1[ITERATOR$2] === it);\n  };\n  'use strict';\n  var createProperty = function (object, key, value) {\n    var propertyKey = toPrimitive(key);\n    if (propertyKey in object) {\n      objectDefineProperty.f(object, propertyKey, createPropertyDescriptor(0, value));\n    } else {\n      object[propertyKey] = value;\n    }\n  };\n  var TO_STRING_TAG$1 = wellKnownSymbol('toStringTag');\n  var test = {};\n  test[TO_STRING_TAG$1] = 'z';\n  var toStringTagSupport = String(test) === '[object z]';\n  var TO_STRING_TAG$2 = wellKnownSymbol('toStringTag');\n  // ES3 wrong here\n  var CORRECT_ARGUMENTS = classofRaw(function () {\n    return arguments;\n  }()) == 'Arguments';\n\n  // fallback for IE11 Script Access Denied error\n  var tryGet = function (it, key) {\n    try {\n      return it[key];\n    } catch (error) {/* empty */}\n  };\n\n  // getting tag from ES6+ `Object.prototype.toString`\n  var classof = toStringTagSupport ? classofRaw : function (it) {\n    var O, tag, result;\n    return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG$2)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n  };\n  var ITERATOR$3 = wellKnownSymbol('iterator');\n  var getIteratorMethod = function (it) {\n    if (it != undefined) {\n      return it[ITERATOR$3] || it['@@iterator'] || iterators[classof(it)];\n    }\n  };\n  'use strict';\n\n  // `Array.from` method implementation\n  // https://tc39.es/ecma262/#sec-array.from\n  var arrayFrom = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var argumentsLength = arguments.length;\n    var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var iteratorMethod = getIteratorMethod(O);\n    var index = 0;\n    var length, result, step, iterator, next, value;\n    if (mapping) {\n      mapfn = functionBindContext(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n    }\n    // if the target is not iterable or it's an array with the default iterator - use a simple case\n    if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n      iterator = iteratorMethod.call(O);\n      next = iterator.next;\n      result = new C();\n      for (; !(step = next.call(iterator)).done; index++) {\n        value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n        createProperty(result, index, value);\n      }\n    } else {\n      length = toLength(O.length);\n      result = new C(length);\n      for (; length > index; index++) {\n        value = mapping ? mapfn(O[index], index) : O[index];\n        createProperty(result, index, value);\n      }\n    }\n    result.length = index;\n    return result;\n  };\n  var ITERATOR$4 = wellKnownSymbol('iterator');\n  var SAFE_CLOSING = false;\n  try {\n    var called = 0;\n    var iteratorWithReturn = {\n      next: function () {\n        return {\n          done: !!called++\n        };\n      },\n      'return': function () {\n        SAFE_CLOSING = true;\n      }\n    };\n    iteratorWithReturn[ITERATOR$4] = function () {\n      return this;\n    };\n    // eslint-disable-next-line no-throw-literal\n    Array.from(iteratorWithReturn, function () {\n      throw 2;\n    });\n  } catch (error) {/* empty */}\n  var checkCorrectnessOfIteration = function (exec, SKIP_CLOSING) {\n    if (!SKIP_CLOSING && !SAFE_CLOSING) {\n      return false;\n    }\n    var ITERATION_SUPPORT = false;\n    try {\n      var object = {};\n      object[ITERATOR$4] = function () {\n        return {\n          next: function () {\n            return {\n              done: ITERATION_SUPPORT = true\n            };\n          }\n        };\n      };\n      exec(object);\n    } catch (error) {/* empty */}\n    return ITERATION_SUPPORT;\n  };\n  var INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n    Array.from(iterable);\n  });\n\n  // `Array.from` method\n  // https://tc39.es/ecma262/#sec-array.from\n  _export({\n    target: 'Array',\n    stat: true,\n    forced: INCORRECT_ITERATION\n  }, {\n    from: arrayFrom\n  });\n  var es_array_from = {};\n  var from_1 = path.Array.from;\n  var from_1$1 = from_1;\n  'use strict';\n  var $findIndex = arrayIteration.findIndex;\n  var FIND_INDEX = 'findIndex';\n  var SKIPS_HOLES$1 = true;\n  var USES_TO_LENGTH$2 = arrayMethodUsesToLength(FIND_INDEX);\n\n  // Shouldn't skip holes\n  if (FIND_INDEX in []) {\n    Array(1)[FIND_INDEX](function () {\n      SKIPS_HOLES$1 = false;\n    });\n  }\n\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findindex\n  _export({\n    target: 'Array',\n    proto: true,\n    forced: SKIPS_HOLES$1 || !USES_TO_LENGTH$2\n  }, {\n    findIndex: function findIndex(callbackfn /* , that = undefined */) {\n      return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    }\n  });\n\n  // https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\n  addToUnscopables(FIND_INDEX);\n  var es_array_findIndex = {};\n  var findIndex = entryUnbind('Array', 'findIndex');\n  var findIndex$1 = findIndex;\n  var base64 = createCommonjsModule(function (module, exports) {\n    (function () {\n      /**\n       * version: 0.3.0\n       * git://github.com/davidchambers/Base64.js.git\n       */\n\n      var object = 'object' != 'undefined' ? exports : this; // #8: web workers\n      var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n      function InvalidCharacterError(message) {\n        this.message = message;\n      }\n      InvalidCharacterError.prototype = new Error();\n      InvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n      // encoder\n      // [https://gist.github.com/999166] by [https://github.com/nignag]\n      object.btoa || (object.btoa = function (input) {\n        var str = String(input);\n        for (\n        // initialize result and counter\n        var block, charCode, idx = 0, map = chars, output = '';\n        // if the next str index does not exist:\n        //   change the mapping table to \"=\"\n        //   check if d has no fractional digits\n        str.charAt(idx | 0) || (map = '=', idx % 1);\n        // \"8 - idx % 1 * 8\" generates the sequence 2, 4, 6, 8\n        output += map.charAt(63 & block >> 8 - idx % 1 * 8)) {\n          charCode = str.charCodeAt(idx += 3 / 4);\n          if (charCode > 0xFF) {\n            throw new InvalidCharacterError('\\'btoa\\' failed: The string to be encoded contains characters outside of the Latin1 range.');\n          }\n          block = block << 8 | charCode;\n        }\n        return output;\n      });\n\n      // decoder\n      // [https://gist.github.com/1020396] by [https://github.com/atk]\n      object.atob || (object.atob = function (input) {\n        var str = String(input).replace(/=+$/, '');\n        if (str.length % 4 == 1) {\n          throw new InvalidCharacterError('\\'atob\\' failed: The string to be decoded is not correctly encoded.');\n        }\n        for (\n        // initialize result and counters\n        var bc = 0, bs, buffer, idx = 0, output = '';\n        // get next character\n        // eslint-disable-next-line no-cond-assign\n        buffer = str.charAt(idx++);\n        // character found in table? initialize bit storage and add its ascii value;\n        ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n        // and if not first of each 4 characters,\n        // convert the first 8 bits to one ascii character\n        bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0) {\n          // try to find character in table (0-63, not found => -1)\n          buffer = chars.indexOf(buffer);\n        }\n        return output;\n      });\n    })();\n  });\n\n  // `Number.isNaN` method\n  // https://tc39.es/ecma262/#sec-number.isnan\n  _export({\n    target: 'Number',\n    stat: true\n  }, {\n    isNaN: function isNaN(number) {\n      // eslint-disable-next-line no-self-compare\n      return number != number;\n    }\n  });\n  var es_number_isNan = {};\n  var isNan = path.Number.isNaN;\n  var isNan$1 = isNan;\n  var globalIsFinite = global_1.isFinite;\n\n  // `Number.isFinite` method\n  // https://tc39.es/ecma262/#sec-number.isfinite\n  var numberIsFinite = Number.isFinite || function isFinite(it) {\n    return typeof it == 'number' && globalIsFinite(it);\n  };\n\n  // `Number.isFinite` method\n  // https://tc39.es/ecma262/#sec-number.isfinite\n  _export({\n    target: 'Number',\n    stat: true\n  }, {\n    isFinite: numberIsFinite\n  });\n  var es_number_isFinite = {};\n  var _isFinite = path.Number.isFinite;\n  var _isFinite$1 = _isFinite;\n  var MATCH = wellKnownSymbol('match');\n\n  // `IsRegExp` abstract operation\n  // https://tc39.es/ecma262/#sec-isregexp\n  var isRegexp = function (it) {\n    var isRegExp;\n    return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classofRaw(it) == 'RegExp');\n  };\n  var notARegexp = function (it) {\n    if (isRegexp(it)) {\n      throw TypeError(\"The method doesn't accept regular expressions\");\n    }\n    return it;\n  };\n  var MATCH$1 = wellKnownSymbol('match');\n  var correctIsRegexpLogic = function (METHOD_NAME) {\n    var regexp = /./;\n    try {\n      '/./'[METHOD_NAME](regexp);\n    } catch (error1) {\n      try {\n        regexp[MATCH$1] = false;\n        return '/./'[METHOD_NAME](regexp);\n      } catch (error2) {/* empty */}\n    }\n    return false;\n  };\n  'use strict';\n\n  // `String.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-string.prototype.includes\n  _export({\n    target: 'String',\n    proto: true,\n    forced: !correctIsRegexpLogic('includes')\n  }, {\n    includes: function includes(searchString /* , position = 0 */) {\n      return !!~String(requireObjectCoercible(this)).indexOf(notARegexp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n    }\n  });\n  var es_string_includes = {};\n  var includes$2 = entryUnbind('String', 'includes');\n  var includes$3 = includes$2;\n  'use strict';\n  var getOwnPropertyDescriptor$2 = objectGetOwnPropertyDescriptor.f;\n  var nativeStartsWith = ''.startsWith;\n  var min$2 = Math.min;\n  var CORRECT_IS_REGEXP_LOGIC = correctIsRegexpLogic('startsWith');\n  // https://github.com/zloirock/core-js/pull/702\n  var MDN_POLYFILL_BUG = !isPure && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n    var descriptor = getOwnPropertyDescriptor$2(String.prototype, 'startsWith');\n    return descriptor && !descriptor.writable;\n  }();\n\n  // `String.prototype.startsWith` method\n  // https://tc39.es/ecma262/#sec-string.prototype.startswith\n  _export({\n    target: 'String',\n    proto: true,\n    forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC\n  }, {\n    startsWith: function startsWith(searchString /* , position = 0 */) {\n      var that = String(requireObjectCoercible(this));\n      notARegexp(searchString);\n      var index = toLength(min$2(arguments.length > 1 ? arguments[1] : undefined, that.length));\n      var search = String(searchString);\n      return nativeStartsWith ? nativeStartsWith.call(that, search, index) : that.slice(index, index + search.length) === search;\n    }\n  });\n  var es_string_startsWith = {};\n  var startsWith = entryUnbind('String', 'startsWith');\n  var startsWith$1 = startsWith;\n  (function () {\n    if (typeof Uint8Array !== 'undefined' || typeof window === 'undefined') {\n      return;\n    }\n    function subarray(start, end) {\n      return this.slice(start, end);\n    }\n    function set_(array, offset) {\n      if (arguments.length < 2) {\n        offset = 0;\n      }\n      for (var i = 0, n = array.length; i < n; ++i, ++offset) {\n        this[offset] = array[i] & 0xFF;\n      }\n    }\n\n    // we need typed arrays\n    function TypedArray(arg1) {\n      var result;\n      if (typeof arg1 === 'number') {\n        result = new Array(arg1);\n        for (var i = 0; i < arg1; ++i) {\n          result[i] = 0;\n        }\n      } else {\n        result = arg1.slice(0);\n      }\n      result.subarray = subarray;\n      result.buffer = result;\n      result.byteLength = result.length;\n      result.set = set_;\n      if (typeof arg1 === 'object' && arg1.buffer) {\n        result.buffer = arg1.buffer;\n      }\n      return result;\n    }\n    window.Uint8Array = TypedArray;\n    window.Uint32Array = TypedArray;\n    window.Int32Array = TypedArray;\n  })();\n  var props = {\n    x: 'x',\n    y: 'y',\n    width: 'w',\n    height: 'h',\n    minimum: 's',\n    maximum: 'l',\n    diagonal: 'd'\n  };\n  var propsList = Object.keys(props).map(function (key) {\n    return props[key];\n  }).join('');\n  var numberPattern = '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?';\n  var findSpacesRegex = /\\s/g;\n  var parseExpressionRegExp = new RegExp(\"^(\" + numberPattern + \"\\\\*)?([\" + propsList + \"])(/\" + numberPattern + \")?([-+]{1,2}\" + numberPattern + \")?$\", 'g');\n  function throwInvalid(expression) {\n    throw new Error(\"Invalid calc() expression: \" + expression);\n  }\n  function evalCalcExpression(expression, bbox) {\n    var match = parseExpressionRegExp.exec(expression.replace(findSpacesRegex, ''));\n    if (!match) {\n      throwInvalid(expression);\n    }\n    parseExpressionRegExp.lastIndex = 0; // reset regex results for the next run\n    var multiply = match[1];\n    var property = match[2];\n    var divide = match[3];\n    var add = match[4];\n    var x = bbox.x;\n    var y = bbox.y;\n    var width = bbox.width;\n    var height = bbox.height;\n    var value = 0;\n    switch (property) {\n      case props.width:\n        {\n          value = width;\n          break;\n        }\n      case props.height:\n        {\n          value = height;\n          break;\n        }\n      case props.x:\n        {\n          value = x;\n          break;\n        }\n      case props.y:\n        {\n          value = y;\n          break;\n        }\n      case props.minimum:\n        {\n          value = Math.min(height, width);\n          break;\n        }\n      case props.maximum:\n        {\n          value = Math.max(height, width);\n          break;\n        }\n      case props.diagonal:\n        {\n          value = Math.sqrt(height * height + width * width);\n          break;\n        }\n    }\n    if (multiply) {\n      // e.g \"2*\"\n      value *= parseFloat(multiply);\n    }\n    if (divide) {\n      // e.g \"/2\"\n      value /= parseFloat(divide.slice(1));\n    }\n    if (add) {\n      value += evalAddExpression(add);\n    }\n    return value;\n  }\n  function evalAddExpression(addExpression) {\n    if (!addExpression) {\n      return 0;\n    }\n    var sign = addExpression[0];\n    switch (sign) {\n      case '+':\n        {\n          return parseFloat(addExpression.substr(1));\n        }\n      case '-':\n        {\n          return -parseFloat(addExpression.substr(1));\n        }\n    }\n    return parseFloat(addExpression);\n  }\n  function isCalcAttribute(value) {\n    return typeof value === 'string' && value.includes('calc');\n  }\n  var calcStart = 'calc(';\n  var calcStartOffset = calcStart.length;\n  function evalCalcAttribute(attributeValue, refBBox) {\n    var value = attributeValue;\n    var startSearchIndex = 0;\n    do {\n      var calcIndex = value.indexOf(calcStart, startSearchIndex);\n      if (calcIndex === -1) {\n        return value;\n      }\n      var calcEndIndex = calcIndex + calcStartOffset;\n      var brackets = 1;\n      findClosingBracket: do {\n        switch (value[calcEndIndex]) {\n          case '(':\n            {\n              brackets++;\n              break;\n            }\n          case ')':\n            {\n              brackets--;\n              if (brackets === 0) {\n                break findClosingBracket;\n              }\n              break;\n            }\n          case undefined:\n            {\n              // Could not find the closing bracket.\n              throwInvalid(value);\n            }\n        }\n        calcEndIndex++;\n      } while (true);\n      // Get the calc() expression without nested calcs (recursion)\n      var expression = value.slice(calcIndex + calcStartOffset, calcEndIndex);\n      if (isCalcAttribute(expression)) {\n        expression = evalCalcAttribute(expression, refBBox);\n      }\n      // Eval the calc() expression without nested calcs.\n      var calcValue = String(evalCalcExpression(expression, refBBox));\n      // Replace the calc() expression and continue search\n      value = value.slice(0, calcIndex) + calcValue + value.slice(calcEndIndex + 1);\n      startSearchIndex = calcIndex + calcValue.length;\n    } while (true);\n  }\n\n  // Declare shorthands to the most used math functions.\n  var round = Math.round;\n  var floor$1 = Math.floor;\n  var PI = Math.PI;\n  var scale = {\n    // Return the `value` from the `domain` interval scaled to the `range` interval.\n    linear: function (domain, range, value) {\n      var domainSpan = domain[1] - domain[0];\n      var rangeSpan = range[1] - range[0];\n      return (value - domain[0]) / domainSpan * rangeSpan + range[0] || 0;\n    }\n  };\n  var normalizeAngle = function (angle) {\n    return angle % 360 + (angle < 0 ? 360 : 0);\n  };\n  var snapToGrid = function (value, gridSize) {\n    return gridSize * round(value / gridSize);\n  };\n  var toDeg = function (rad) {\n    return 180 * rad / PI % 360;\n  };\n  var toRad = function (deg, over360) {\n    over360 = over360 || false;\n    deg = over360 ? deg : deg % 360;\n    return deg * PI / 180;\n  };\n\n  // Return a random integer from the interval [min,max], inclusive.\n  var random = function (min, max) {\n    if (max === undefined) {\n      // use first argument as max, min is 0\n      max = min === undefined ? 1 : min;\n      min = 0;\n    } else if (max < min) {\n      // switch max and min\n      var temp = min;\n      min = max;\n      max = temp;\n    }\n    return floor$1(Math.random() * (max - min + 1) + min);\n  };\n\n  // @return the bearing (cardinal direction) of the line. For example N, W, or SE.\n\n  var cos = Math.cos;\n  var sin = Math.sin;\n  var atan2 = Math.atan2;\n  var bearing = function (p, q) {\n    var lat1 = toRad(p.y);\n    var lat2 = toRad(q.y);\n    var lon1 = p.x;\n    var lon2 = q.x;\n    var dLon = toRad(lon2 - lon1);\n    var y = sin(dLon) * cos(lat2);\n    var x = cos(lat1) * sin(lat2) - sin(lat1) * cos(lat2) * cos(dLon);\n    var brng = toDeg(atan2(y, x));\n    var bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n    var index = brng - 22.5;\n    if (index < 0) {\n      index += 360;\n    }\n    index = parseInt(index / 45);\n    return bearings[index];\n  };\n\n  // @return {integer} length without sqrt\n  // @note for applications where the exact length is not necessary (e.g. compare only)\n  var squaredLength = function (start, end) {\n    var x0 = start.x;\n    var y0 = start.y;\n    var x1 = end.x;\n    var y1 = end.y;\n    return (x0 -= x1) * x0 + (y0 -= y1) * y0;\n  };\n  var length = function (start, end) {\n    return Math.sqrt(squaredLength(start, end));\n  };\n  var types = {\n    Point: 1,\n    Line: 2,\n    Ellipse: 3,\n    Rect: 4,\n    Polyline: 5,\n    Polygon: 6,\n    Curve: 7,\n    Path: 8\n  };\n\n  /*\n      Point is the most basic object consisting of x/y coordinate.\n  \t    Possible instantiations are:\n      * `Point(10, 20)`\n      * `new Point(10, 20)`\n      * `Point('10 20')`\n      * `Point(Point(10, 20))`\n  */\n\n  var abs = Math.abs;\n  var cos$1 = Math.cos;\n  var sin$1 = Math.sin;\n  var sqrt = Math.sqrt;\n  var min$3 = Math.min;\n  var max$1 = Math.max;\n  var atan2$1 = Math.atan2;\n  var round$1 = Math.round;\n  var pow = Math.pow;\n  var PI$1 = Math.PI;\n  var Point = function (x, y) {\n    if (!(this instanceof Point)) {\n      return new Point(x, y);\n    }\n    if (typeof x === 'string') {\n      var xy = x.split(x.indexOf('@') === -1 ? ' ' : '@');\n      x = parseFloat(xy[0]);\n      y = parseFloat(xy[1]);\n    } else if (Object(x) === x) {\n      y = x.y;\n      x = x.x;\n    }\n    this.x = x === undefined ? 0 : x;\n    this.y = y === undefined ? 0 : y;\n  };\n\n  // Alternative constructor, from polar coordinates.\n  // @param {number} Distance.\n  // @param {number} Angle in radians.\n  // @param {point} [optional] Origin.\n  Point.fromPolar = function (distance, angle, origin) {\n    origin = new Point(origin);\n    var x = abs(distance * cos$1(angle));\n    var y = abs(distance * sin$1(angle));\n    var deg = normalizeAngle(toDeg(angle));\n    if (deg < 90) {\n      y = -y;\n    } else if (deg < 180) {\n      x = -x;\n      y = -y;\n    } else if (deg < 270) {\n      x = -x;\n    }\n    return new Point(origin.x + x, origin.y + y);\n  };\n\n  // Create a point with random coordinates that fall into the range `[x1, x2]` and `[y1, y2]`.\n  Point.random = function (x1, x2, y1, y2) {\n    return new Point(random(x1, x2), random(y1, y2));\n  };\n  Point.prototype = {\n    type: types.Point,\n    chooseClosest: function (points) {\n      var n = points.length;\n      if (n === 1) {\n        return new Point(points[0]);\n      }\n      var closest = null;\n      var minSqrDistance = Infinity;\n      for (var i = 0; i < n; i++) {\n        var p = new Point(points[i]);\n        var sqrDistance = this.squaredDistance(p);\n        if (sqrDistance < minSqrDistance) {\n          closest = p;\n          minSqrDistance = sqrDistance;\n        }\n      }\n      return closest;\n    },\n    // If point lies outside rectangle `r`, return the nearest point on the boundary of rect `r`,\n    // otherwise return point itself.\n    // (see Squeak Smalltalk, Point>>adhereTo:)\n    adhereToRect: function (r) {\n      if (r.containsPoint(this)) {\n        return this;\n      }\n      this.x = min$3(max$1(this.x, r.x), r.x + r.width);\n      this.y = min$3(max$1(this.y, r.y), r.y + r.height);\n      return this;\n    },\n    // Compute the angle between vector from me to p1 and the vector from me to p2.\n    // ordering of points p1 and p2 is important!\n    // theta function's angle convention:\n    // returns angles between 0 and 180 when the angle is counterclockwise\n    // returns angles between 180 and 360 to convert clockwise angles into counterclockwise ones\n    // returns NaN if any of the points p1, p2 is coincident with this point\n    angleBetween: function (p1, p2) {\n      var angleBetween = this.equals(p1) || this.equals(p2) ? NaN : this.theta(p2) - this.theta(p1);\n      if (angleBetween < 0) {\n        angleBetween += 360; // correction to keep angleBetween between 0 and 360\n      }\n      return angleBetween;\n    },\n    // Return the bearing between me and the given point.\n    bearing: function (point) {\n      return bearing(this, point);\n    },\n    // Returns change in angle from my previous position (-dx, -dy) to my new position\n    // relative to ref point.\n    changeInAngle: function (dx, dy, ref) {\n      // Revert the translation and measure the change in angle around x-axis.\n      return this.clone().offset(-dx, -dy).theta(ref) - this.theta(ref);\n    },\n    clone: function () {\n      return new Point(this);\n    },\n    // Returns the cross product of this point relative to two other points\n    // this point is the common point\n    // point p1 lies on the first vector, point p2 lies on the second vector\n    // watch out for the ordering of points p1 and p2!\n    // positive result indicates a clockwise (\"right\") turn from first to second vector\n    // negative result indicates a counterclockwise (\"left\") turn from first to second vector\n    // zero indicates that the first and second vector are collinear\n    // note that the above directions are reversed from the usual answer on the Internet\n    // that is because we are in a left-handed coord system (because the y-axis points downward)\n    cross: function (p1, p2) {\n      return p1 && p2 ? (p2.x - this.x) * (p1.y - this.y) - (p2.y - this.y) * (p1.x - this.x) : NaN;\n    },\n    difference: function (dx, dy) {\n      if (Object(dx) === dx) {\n        dy = dx.y;\n        dx = dx.x;\n      }\n      return new Point(this.x - (dx || 0), this.y - (dy || 0));\n    },\n    // Returns distance between me and point `p`.\n    distance: function (p) {\n      return length(this, p);\n    },\n    // Returns the dot product of this point with given other point\n    dot: function (p) {\n      return p ? this.x * p.x + this.y * p.y : NaN;\n    },\n    equals: function (p) {\n      return !!p && this.x === p.x && this.y === p.y;\n    },\n    // Linear interpolation\n    lerp: function (p, t) {\n      var x = this.x;\n      var y = this.y;\n      return new Point((1 - t) * x + t * p.x, (1 - t) * y + t * p.y);\n    },\n    magnitude: function () {\n      return sqrt(this.x * this.x + this.y * this.y) || 0.01;\n    },\n    // Returns a manhattan (taxi-cab) distance between me and point `p`.\n    manhattanDistance: function (p) {\n      return abs(p.x - this.x) + abs(p.y - this.y);\n    },\n    // Move point on line starting from ref ending at me by\n    // distance distance.\n    move: function (ref, distance) {\n      var theta = toRad(new Point(ref).theta(this));\n      var offset = this.offset(cos$1(theta) * distance, -sin$1(theta) * distance);\n      return offset;\n    },\n    // Scales x and y such that the distance between the point and the origin (0,0) is equal to the given length.\n    normalize: function (length) {\n      var scale = (length || 1) / this.magnitude();\n      return this.scale(scale, scale);\n    },\n    // Offset me by the specified amount.\n    offset: function (dx, dy) {\n      if (Object(dx) === dx) {\n        dy = dx.y;\n        dx = dx.x;\n      }\n      this.x += dx || 0;\n      this.y += dy || 0;\n      return this;\n    },\n    // Returns a point that is the reflection of me with\n    // the center of inversion in ref point.\n    reflection: function (ref) {\n      return new Point(ref).move(this, this.distance(ref));\n    },\n    // Rotate point by angle around origin.\n    // Angle is flipped because this is a left-handed coord system (y-axis points downward).\n    rotate: function (origin, angle) {\n      if (angle === 0) {\n        return this;\n      }\n      origin = origin || new Point(0, 0);\n      angle = toRad(normalizeAngle(-angle));\n      var cosAngle = cos$1(angle);\n      var sinAngle = sin$1(angle);\n      var x = cosAngle * (this.x - origin.x) - sinAngle * (this.y - origin.y) + origin.x;\n      var y = sinAngle * (this.x - origin.x) + cosAngle * (this.y - origin.y) + origin.y;\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n    round: function (precision) {\n      var f = 1; // case 0\n      if (precision) {\n        switch (precision) {\n          case 1:\n            f = 10;\n            break;\n          case 2:\n            f = 100;\n            break;\n          case 3:\n            f = 1000;\n            break;\n          default:\n            f = pow(10, precision);\n            break;\n        }\n      }\n      this.x = round$1(this.x * f) / f;\n      this.y = round$1(this.y * f) / f;\n      return this;\n    },\n    // Scale point with origin.\n    scale: function (sx, sy, origin) {\n      origin = origin && new Point(origin) || new Point(0, 0);\n      this.x = origin.x + sx * (this.x - origin.x);\n      this.y = origin.y + sy * (this.y - origin.y);\n      return this;\n    },\n    snapToGrid: function (gx, gy) {\n      this.x = snapToGrid(this.x, gx);\n      this.y = snapToGrid(this.y, gy || gx);\n      return this;\n    },\n    squaredDistance: function (p) {\n      return squaredLength(this, p);\n    },\n    // Compute the angle between me and `p` and the x axis.\n    // (cartesian-to-polar coordinates conversion)\n    // Return theta angle in degrees.\n    theta: function (p) {\n      p = new Point(p);\n\n      // Invert the y-axis.\n      var y = -(p.y - this.y);\n      var x = p.x - this.x;\n      var rad = atan2$1(y, x); // defined for all 0 corner cases\n\n      // Correction for III. and IV. quadrant.\n      if (rad < 0) {\n        rad = 2 * PI$1 + rad;\n      }\n      return 180 * rad / PI$1;\n    },\n    toJSON: function () {\n      return {\n        x: this.x,\n        y: this.y\n      };\n    },\n    // Converts rectangular to polar coordinates.\n    // An origin can be specified, otherwise it's 0@0.\n    toPolar: function (o) {\n      o = o && new Point(o) || new Point(0, 0);\n      var x = this.x;\n      var y = this.y;\n      this.x = sqrt((x - o.x) * (x - o.x) + (y - o.y) * (y - o.y)); // r\n      this.y = toRad(o.theta(new Point(x, y)));\n      return this;\n    },\n    toString: function () {\n      return this.x + '@' + this.y;\n    },\n    serialize: function () {\n      return this.x + ',' + this.y;\n    },\n    update: function (x, y) {\n      if (Object(x) === x) {\n        y = x.y;\n        x = x.x;\n      }\n      this.x = x || 0;\n      this.y = y || 0;\n      return this;\n    },\n    // Compute the angle between the vector from 0,0 to me and the vector from 0,0 to p.\n    // Returns NaN if p is at 0,0.\n    vectorAngle: function (p) {\n      var zero = new Point(0, 0);\n      return zero.angleBetween(this, p);\n    }\n  };\n  Point.prototype.translate = Point.prototype.offset;\n\n  // For backwards compatibility:\n  var point = Point;\n  var max$2 = Math.max;\n  var min$4 = Math.min;\n  var Line = function (p1, p2) {\n    if (!(this instanceof Line)) {\n      return new Line(p1, p2);\n    }\n    if (p1 instanceof Line) {\n      return new Line(p1.start, p1.end);\n    }\n    this.start = new Point(p1);\n    this.end = new Point(p2);\n  };\n  Line.prototype = {\n    type: types.Line,\n    // @returns the angle of incline of the line.\n    angle: function () {\n      var horizontalPoint = new Point(this.start.x + 1, this.start.y);\n      return this.start.angleBetween(this.end, horizontalPoint);\n    },\n    bbox: function () {\n      var left = min$4(this.start.x, this.end.x);\n      var top = min$4(this.start.y, this.end.y);\n      var right = max$2(this.start.x, this.end.x);\n      var bottom = max$2(this.start.y, this.end.y);\n      return new Rect(left, top, right - left, bottom - top);\n    },\n    // @return the bearing (cardinal direction) of the line. For example N, W, or SE.\n    // @returns {String} One of the following bearings : NE, E, SE, S, SW, W, NW, N.\n    bearing: function () {\n      return bearing(this.start, this.end);\n    },\n    clone: function () {\n      return new Line(this.start, this.end);\n    },\n    // @return {point} the closest point on the line to point `p`\n    closestPoint: function (p) {\n      return this.pointAt(this.closestPointNormalizedLength(p));\n    },\n    closestPointLength: function (p) {\n      return this.closestPointNormalizedLength(p) * this.length();\n    },\n    // @return {number} the normalized length of the closest point on the line to point `p`\n    closestPointNormalizedLength: function (p) {\n      var product = this.vector().dot(new Line(this.start, p).vector());\n      var cpNormalizedLength = min$4(1, max$2(0, product / this.squaredLength()));\n\n      // cpNormalizedLength returns `NaN` if this line has zero length\n      // we can work with that - if `NaN`, return 0\n      if (cpNormalizedLength !== cpNormalizedLength) {\n        return 0;\n      } // condition evaluates to `true` if and only if cpNormalizedLength is `NaN`\n      // (`NaN` is the only value that is not equal to itself)\n\n      return cpNormalizedLength;\n    },\n    closestPointTangent: function (p) {\n      return this.tangentAt(this.closestPointNormalizedLength(p));\n    },\n    // Returns `true` if the point lies on the line.\n    containsPoint: function (p) {\n      var start = this.start;\n      var end = this.end;\n      if (start.cross(p, end) !== 0) {\n        return false;\n      }\n      // else: cross product of 0 indicates that this line and the vector to `p` are collinear\n\n      var length = this.length();\n      if (new Line(start, p).length() > length) {\n        return false;\n      }\n      if (new Line(p, end).length() > length) {\n        return false;\n      }\n      // else: `p` lies between start and end of the line\n\n      return true;\n    },\n    // Divides the line into two at requested `ratio` between 0 and 1.\n    divideAt: function (ratio) {\n      var dividerPoint = this.pointAt(ratio);\n\n      // return array with two lines\n      return [new Line(this.start, dividerPoint), new Line(dividerPoint, this.end)];\n    },\n    // Divides the line into two at requested `length`.\n    divideAtLength: function (length) {\n      var dividerPoint = this.pointAtLength(length);\n\n      // return array with two new lines\n      return [new Line(this.start, dividerPoint), new Line(dividerPoint, this.end)];\n    },\n    equals: function (l) {\n      return !!l && this.start.x === l.start.x && this.start.y === l.start.y && this.end.x === l.end.x && this.end.y === l.end.y;\n    },\n    // @return {point} Point where I'm intersecting a line.\n    // @return [point] Points where I'm intersecting a rectangle.\n    // @see Squeak Smalltalk, LineSegment>>intersectionWith:\n    intersect: function (shape, opt) {\n      if (shape && shape.intersectionWithLine) {\n        var intersection = shape.intersectionWithLine(this, opt);\n\n        // Backwards compatibility\n        if (intersection && shape instanceof Line) {\n          intersection = intersection[0];\n        }\n        return intersection;\n      }\n      return null;\n    },\n    intersectionWithLine: function (line) {\n      var pt1Dir = new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n      var pt2Dir = new Point(line.end.x - line.start.x, line.end.y - line.start.y);\n      var det = pt1Dir.x * pt2Dir.y - pt1Dir.y * pt2Dir.x;\n      var deltaPt = new Point(line.start.x - this.start.x, line.start.y - this.start.y);\n      var alpha = deltaPt.x * pt2Dir.y - deltaPt.y * pt2Dir.x;\n      var beta = deltaPt.x * pt1Dir.y - deltaPt.y * pt1Dir.x;\n      if (det === 0 || alpha * det < 0 || beta * det < 0) {\n        // No intersection found.\n        return null;\n      }\n      if (det > 0) {\n        if (alpha > det || beta > det) {\n          return null;\n        }\n      } else {\n        if (alpha < det || beta < det) {\n          return null;\n        }\n      }\n      return [new Point(this.start.x + alpha * pt1Dir.x / det, this.start.y + alpha * pt1Dir.y / det)];\n    },\n    isDifferentiable: function () {\n      return !this.start.equals(this.end);\n    },\n    // @return {double} length of the line\n    length: function () {\n      return length(this.start, this.end);\n    },\n    // @return {point} my midpoint\n    midpoint: function () {\n      return new Point((this.start.x + this.end.x) / 2, (this.start.y + this.end.y) / 2);\n    },\n    parallel: function (distance) {\n      var l = this.clone();\n      if (!this.isDifferentiable()) {\n        return l;\n      }\n      var start = l.start;\n      var end = l.end;\n      var eRef = start.clone().rotate(end, 270);\n      var sRef = end.clone().rotate(start, 90);\n      start.move(sRef, distance);\n      end.move(eRef, distance);\n      return l;\n    },\n    // @return {point} my point at 't' <0,1>\n    pointAt: function (t) {\n      var start = this.start;\n      var end = this.end;\n      if (t <= 0) {\n        return start.clone();\n      }\n      if (t >= 1) {\n        return end.clone();\n      }\n      return start.lerp(end, t);\n    },\n    pointAtLength: function (length) {\n      var start = this.start;\n      var end = this.end;\n      var fromStart = true;\n      if (length < 0) {\n        fromStart = false; // negative lengths mean start calculation from end point\n        length = -length; // absolute value\n      }\n      var lineLength = this.length();\n      if (length >= lineLength) {\n        return fromStart ? end.clone() : start.clone();\n      }\n      return this.pointAt((fromStart ? length : lineLength - length) / lineLength);\n    },\n    // @return {number} the offset of the point `p` from the line. + if the point `p` is on the right side of the line, - if on the left and 0 if on the line.\n    pointOffset: function (p) {\n      // Find the sign of the determinant of vectors (start,end), where p is the query point.\n      p = new Point(p);\n      var start = this.start;\n      var end = this.end;\n      var determinant = (end.x - start.x) * (p.y - start.y) - (end.y - start.y) * (p.x - start.x);\n      return determinant / this.length();\n    },\n    rotate: function (origin, angle) {\n      this.start.rotate(origin, angle);\n      this.end.rotate(origin, angle);\n      return this;\n    },\n    round: function (precision) {\n      this.start.round(precision);\n      this.end.round(precision);\n      return this;\n    },\n    scale: function (sx, sy, origin) {\n      this.start.scale(sx, sy, origin);\n      this.end.scale(sx, sy, origin);\n      return this;\n    },\n    // @return {number} scale the line so that it has the requested length\n    setLength: function (length) {\n      var currentLength = this.length();\n      if (!currentLength) {\n        return this;\n      }\n      var scaleFactor = length / currentLength;\n      return this.scale(scaleFactor, scaleFactor, this.start);\n    },\n    // @return {integer} length without sqrt\n    // @note for applications where the exact length is not necessary (e.g. compare only)\n    squaredLength: function () {\n      return squaredLength(this.start, this.end);\n    },\n    tangentAt: function (t) {\n      if (!this.isDifferentiable()) {\n        return null;\n      }\n      var start = this.start;\n      var end = this.end;\n      var tangentStart = this.pointAt(t); // constrains `t` between 0 and 1\n\n      var tangentLine = new Line(start, end);\n      tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y); // move so that tangent line starts at the point requested\n\n      return tangentLine;\n    },\n    tangentAtLength: function (length) {\n      if (!this.isDifferentiable()) {\n        return null;\n      }\n      var start = this.start;\n      var end = this.end;\n      var tangentStart = this.pointAtLength(length);\n      var tangentLine = new Line(start, end);\n      tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y); // move so that tangent line starts at the point requested\n\n      return tangentLine;\n    },\n    toString: function () {\n      return this.start.toString() + ' ' + this.end.toString();\n    },\n    serialize: function () {\n      return this.start.serialize() + ' ' + this.end.serialize();\n    },\n    translate: function (tx, ty) {\n      this.start.translate(tx, ty);\n      this.end.translate(tx, ty);\n      return this;\n    },\n    // @return vector {point} of the line\n    vector: function () {\n      return new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n    }\n  };\n\n  // For backwards compatibility:\n  Line.prototype.intersection = Line.prototype.intersect;\n\n  // For backwards compatibility:\n  var line = Line;\n  var sqrt$1 = Math.sqrt;\n  var round$2 = Math.round;\n  var pow$1 = Math.pow;\n  var Ellipse = function (c, a, b) {\n    if (!(this instanceof Ellipse)) {\n      return new Ellipse(c, a, b);\n    }\n    if (c instanceof Ellipse) {\n      return new Ellipse(new Point(c.x, c.y), c.a, c.b);\n    }\n    c = new Point(c);\n    this.x = c.x;\n    this.y = c.y;\n    this.a = a;\n    this.b = b;\n  };\n  Ellipse.fromRect = function (rect) {\n    rect = new Rect(rect);\n    return new Ellipse(rect.center(), rect.width / 2, rect.height / 2);\n  };\n  Ellipse.prototype = {\n    type: types.Ellipse,\n    bbox: function () {\n      return new Rect(this.x - this.a, this.y - this.b, 2 * this.a, 2 * this.b);\n    },\n    /**\n     * @returns {g.Point}\n     */\n    center: function () {\n      return new Point(this.x, this.y);\n    },\n    clone: function () {\n      return new Ellipse(this);\n    },\n    /**\n     * @param {g.Point} p\n     * @returns {boolean}\n     */\n    containsPoint: function (p) {\n      return this.normalizedDistance(p) <= 1;\n    },\n    equals: function (ellipse) {\n      return !!ellipse && ellipse.x === this.x && ellipse.y === this.y && ellipse.a === this.a && ellipse.b === this.b;\n    },\n    // inflate by dx and dy\n    // @param dx {delta_x} representing additional size to x\n    // @param dy {delta_y} representing additional size to y -\n    // dy param is not required -> in that case y is sized by dx\n    inflate: function (dx, dy) {\n      if (dx === undefined) {\n        dx = 0;\n      }\n      if (dy === undefined) {\n        dy = dx;\n      }\n      this.a += 2 * dx;\n      this.b += 2 * dy;\n      return this;\n    },\n    intersectionWithLine: function (line) {\n      var intersections = [];\n      var a1 = line.start;\n      var a2 = line.end;\n      var rx = this.a;\n      var ry = this.b;\n      var dir = line.vector();\n      var diff = a1.difference(new Point(this));\n      var mDir = new Point(dir.x / (rx * rx), dir.y / (ry * ry));\n      var mDiff = new Point(diff.x / (rx * rx), diff.y / (ry * ry));\n      var a = dir.dot(mDir);\n      var b = dir.dot(mDiff);\n      var c = diff.dot(mDiff) - 1.0;\n      var d = b * b - a * c;\n      if (d < 0) {\n        return null;\n      } else if (d > 0) {\n        var root = sqrt$1(d);\n        var ta = (-b - root) / a;\n        var tb = (-b + root) / a;\n        if ((ta < 0 || 1 < ta) && (tb < 0 || 1 < tb)) {\n          // if ((ta < 0 && tb < 0) || (ta > 1 && tb > 1)) outside else inside\n          return null;\n        } else {\n          if (0 <= ta && ta <= 1) {\n            intersections.push(a1.lerp(a2, ta));\n          }\n          if (0 <= tb && tb <= 1) {\n            intersections.push(a1.lerp(a2, tb));\n          }\n        }\n      } else {\n        var t = -b / a;\n        if (0 <= t && t <= 1) {\n          intersections.push(a1.lerp(a2, t));\n        } else {\n          // outside\n          return null;\n        }\n      }\n      return intersections;\n    },\n    // Find point on me where line from my center to\n    // point p intersects my boundary.\n    // @param {number} angle If angle is specified, intersection with rotated ellipse is computed.\n    intersectionWithLineFromCenterToPoint: function (p, angle) {\n      p = new Point(p);\n      if (angle) {\n        p.rotate(new Point(this.x, this.y), angle);\n      }\n      var dx = p.x - this.x;\n      var dy = p.y - this.y;\n      var result;\n      if (dx === 0) {\n        result = this.bbox().pointNearestToPoint(p);\n        if (angle) {\n          return result.rotate(new Point(this.x, this.y), -angle);\n        }\n        return result;\n      }\n      var m = dy / dx;\n      var mSquared = m * m;\n      var aSquared = this.a * this.a;\n      var bSquared = this.b * this.b;\n      var x = sqrt$1(1 / (1 / aSquared + mSquared / bSquared));\n      x = dx < 0 ? -x : x;\n      var y = m * x;\n      result = new Point(this.x + x, this.y + y);\n      if (angle) {\n        return result.rotate(new Point(this.x, this.y), -angle);\n      }\n      return result;\n    },\n    /**\n     * @param {g.Point} point\n     * @returns {number} result < 1 - inside ellipse, result == 1 - on ellipse boundary, result > 1 - outside\n     */\n    normalizedDistance: function (point) {\n      var x0 = point.x;\n      var y0 = point.y;\n      var a = this.a;\n      var b = this.b;\n      var x = this.x;\n      var y = this.y;\n      return (x0 - x) * (x0 - x) / (a * a) + (y0 - y) * (y0 - y) / (b * b);\n    },\n    round: function (precision) {\n      var f = 1; // case 0\n      if (precision) {\n        switch (precision) {\n          case 1:\n            f = 10;\n            break;\n          case 2:\n            f = 100;\n            break;\n          case 3:\n            f = 1000;\n            break;\n          default:\n            f = pow$1(10, precision);\n            break;\n        }\n      }\n      this.x = round$2(this.x * f) / f;\n      this.y = round$2(this.y * f) / f;\n      this.a = round$2(this.a * f) / f;\n      this.b = round$2(this.b * f) / f;\n      return this;\n    },\n    /** Compute angle between tangent and x axis\n     * @param {g.Point} p Point of tangency, it has to be on ellipse boundaries.\n     * @returns {number} angle between tangent and x axis\n     */\n    tangentTheta: function (p) {\n      var refPointDelta = 30;\n      var x0 = p.x;\n      var y0 = p.y;\n      var a = this.a;\n      var b = this.b;\n      var center = this.bbox().center();\n      var m = center.x;\n      var n = center.y;\n      var q1 = x0 > center.x + a / 2;\n      var q3 = x0 < center.x - a / 2;\n      var y, x;\n      if (q1 || q3) {\n        y = x0 > center.x ? y0 - refPointDelta : y0 + refPointDelta;\n        x = a * a / (x0 - m) - a * a * (y0 - n) * (y - n) / (b * b * (x0 - m)) + m;\n      } else {\n        x = y0 > center.y ? x0 + refPointDelta : x0 - refPointDelta;\n        y = b * b / (y0 - n) - b * b * (x0 - m) * (x - m) / (a * a * (y0 - n)) + n;\n      }\n      return new Point(x, y).theta(p);\n    },\n    toString: function () {\n      return new Point(this.x, this.y).toString() + ' ' + this.a + ' ' + this.b;\n    }\n  };\n\n  // For backwards compatibility:\n  var ellipse = Ellipse;\n  var abs$1 = Math.abs;\n  var cos$2 = Math.cos;\n  var sin$2 = Math.sin;\n  var min$5 = Math.min;\n  var max$3 = Math.max;\n  var round$3 = Math.round;\n  var pow$2 = Math.pow;\n  var Rect = function (x, y, w, h) {\n    if (!(this instanceof Rect)) {\n      return new Rect(x, y, w, h);\n    }\n    if (Object(x) === x) {\n      y = x.y;\n      w = x.width;\n      h = x.height;\n      x = x.x;\n    }\n    this.x = x === undefined ? 0 : x;\n    this.y = y === undefined ? 0 : y;\n    this.width = w === undefined ? 0 : w;\n    this.height = h === undefined ? 0 : h;\n  };\n  Rect.fromEllipse = function (e) {\n    e = new Ellipse(e);\n    return new Rect(e.x - e.a, e.y - e.b, 2 * e.a, 2 * e.b);\n  };\n  Rect.fromPointUnion = function () {\n    var points = [],\n      len = arguments.length;\n    while (len--) points[len] = arguments[len];\n    if (points.length === 0) {\n      return null;\n    }\n    var p = new Point();\n    var minX, minY, maxX, maxY;\n    minX = minY = Infinity;\n    maxX = maxY = -Infinity;\n    for (var i = 0; i < points.length; i++) {\n      p.update(points[i]);\n      var x = p.x;\n      var y = p.y;\n      if (x < minX) {\n        minX = x;\n      }\n      if (x > maxX) {\n        maxX = x;\n      }\n      if (y < minY) {\n        minY = y;\n      }\n      if (y > maxY) {\n        maxY = y;\n      }\n    }\n    return new Rect(minX, minY, maxX - minX, maxY - minY);\n  };\n  Rect.fromRectUnion = function () {\n    var rects = [],\n      len = arguments.length;\n    while (len--) rects[len] = arguments[len];\n    if (rects.length === 0) {\n      return null;\n    }\n    var r = new Rect();\n    var minX, minY, maxX, maxY;\n    minX = minY = Infinity;\n    maxX = maxY = -Infinity;\n    for (var i = 0; i < rects.length; i++) {\n      r.update(rects[i]);\n      var x = r.x;\n      var y = r.y;\n      var mX = x + r.width;\n      var mY = y + r.height;\n      if (x < minX) {\n        minX = x;\n      }\n      if (mX > maxX) {\n        maxX = mX;\n      }\n      if (y < minY) {\n        minY = y;\n      }\n      if (mY > maxY) {\n        maxY = mY;\n      }\n    }\n    return new Rect(minX, minY, maxX - minX, maxY - minY);\n  };\n  Rect.prototype = {\n    type: types.Rect,\n    // Find my bounding box when I'm rotated with the center of rotation in the center of me.\n    // @return r {rectangle} representing a bounding box\n    bbox: function (angle) {\n      return this.clone().rotateAroundCenter(angle);\n    },\n    rotateAroundCenter: function (angle) {\n      if (!angle) {\n        return this;\n      }\n      var ref = this;\n      var width = ref.width;\n      var height = ref.height;\n      var theta = toRad(angle);\n      var st = abs$1(sin$2(theta));\n      var ct = abs$1(cos$2(theta));\n      var w = width * ct + height * st;\n      var h = width * st + height * ct;\n      this.x += (width - w) / 2;\n      this.y += (height - h) / 2;\n      this.width = w;\n      this.height = h;\n      return this;\n    },\n    bottomLeft: function () {\n      return new Point(this.x, this.y + this.height);\n    },\n    bottomLine: function () {\n      return new Line(this.bottomLeft(), this.bottomRight());\n    },\n    bottomMiddle: function () {\n      return new Point(this.x + this.width / 2, this.y + this.height);\n    },\n    center: function () {\n      return new Point(this.x + this.width / 2, this.y + this.height / 2);\n    },\n    clone: function () {\n      return new Rect(this);\n    },\n    // @return {bool} true if point p is inside me.\n    containsPoint: function (p) {\n      if (!(p instanceof Point)) {\n        p = new Point(p);\n      }\n      return p.x >= this.x && p.x <= this.x + this.width && p.y >= this.y && p.y <= this.y + this.height;\n    },\n    // @return {bool} true if rectangle `r` is inside me.\n    containsRect: function (r) {\n      var r0 = new Rect(this).normalize();\n      var r1 = new Rect(r).normalize();\n      var w0 = r0.width;\n      var h0 = r0.height;\n      var w1 = r1.width;\n      var h1 = r1.height;\n      if (!w0 || !h0 || !w1 || !h1) {\n        // At least one of the dimensions is 0\n        return false;\n      }\n      var x0 = r0.x;\n      var y0 = r0.y;\n      var x1 = r1.x;\n      var y1 = r1.y;\n      w1 += x1;\n      w0 += x0;\n      h1 += y1;\n      h0 += y0;\n      return x0 <= x1 && w1 <= w0 && y0 <= y1 && h1 <= h0;\n    },\n    corner: function () {\n      return new Point(this.x + this.width, this.y + this.height);\n    },\n    // @return {boolean} true if rectangles are equal.\n    equals: function (r) {\n      var mr = new Rect(this).normalize();\n      var nr = new Rect(r).normalize();\n      return mr.x === nr.x && mr.y === nr.y && mr.width === nr.width && mr.height === nr.height;\n    },\n    // inflate by dx and dy, recompute origin [x, y]\n    // @param dx {delta_x} representing additional size to x\n    // @param dy {delta_y} representing additional size to y -\n    // dy param is not required -> in that case y is sized by dx\n    inflate: function (dx, dy) {\n      if (dx === undefined) {\n        dx = 0;\n      }\n      if (dy === undefined) {\n        dy = dx;\n      }\n      this.x -= dx;\n      this.y -= dy;\n      this.width += 2 * dx;\n      this.height += 2 * dy;\n      return this;\n    },\n    // @return {rect} if rectangles intersect, {null} if not.\n    intersect: function (r) {\n      var myOrigin = this.origin();\n      var myCorner = this.corner();\n      var rOrigin = r.origin();\n      var rCorner = r.corner();\n\n      // No intersection found\n      if (rCorner.x <= myOrigin.x || rCorner.y <= myOrigin.y || rOrigin.x >= myCorner.x || rOrigin.y >= myCorner.y) {\n        return null;\n      }\n      var x = max$3(myOrigin.x, rOrigin.x);\n      var y = max$3(myOrigin.y, rOrigin.y);\n      return new Rect(x, y, min$5(myCorner.x, rCorner.x) - x, min$5(myCorner.y, rCorner.y) - y);\n    },\n    intersectionWithLine: function (line) {\n      var r = this;\n      var rectLines = [r.topLine(), r.rightLine(), r.bottomLine(), r.leftLine()];\n      var points = [];\n      var dedupeArr = [];\n      var pt, i;\n      var n = rectLines.length;\n      for (i = 0; i < n; i++) {\n        pt = line.intersect(rectLines[i]);\n        if (pt !== null && dedupeArr.indexOf(pt.toString()) < 0) {\n          points.push(pt);\n          dedupeArr.push(pt.toString());\n        }\n      }\n      return points.length > 0 ? points : null;\n    },\n    // Find point on my boundary where line starting\n    // from my center ending in point p intersects me.\n    // @param {number} angle If angle is specified, intersection with rotated rectangle is computed.\n    intersectionWithLineFromCenterToPoint: function (p, angle) {\n      p = new Point(p);\n      var center = new Point(this.x + this.width / 2, this.y + this.height / 2);\n      var result;\n      if (angle) {\n        p.rotate(center, angle);\n      }\n\n      // (clockwise, starting from the top side)\n      var sides = [this.topLine(), this.rightLine(), this.bottomLine(), this.leftLine()];\n      var connector = new Line(center, p);\n      for (var i = sides.length - 1; i >= 0; --i) {\n        var intersection = sides[i].intersection(connector);\n        if (intersection !== null) {\n          result = intersection;\n          break;\n        }\n      }\n      if (result && angle) {\n        result.rotate(center, -angle);\n      }\n      return result;\n    },\n    leftLine: function () {\n      return new Line(this.topLeft(), this.bottomLeft());\n    },\n    leftMiddle: function () {\n      return new Point(this.x, this.y + this.height / 2);\n    },\n    maxRectScaleToFit: function (rect, origin) {\n      rect = new Rect(rect);\n      origin || (origin = rect.center());\n      var sx1, sx2, sx3, sx4, sy1, sy2, sy3, sy4;\n      var ox = origin.x;\n      var oy = origin.y;\n\n      // Here we find the maximal possible scale for all corner points (for x and y axis) of the rectangle,\n      // so when the scale is applied the point is still inside the rectangle.\n\n      sx1 = sx2 = sx3 = sx4 = sy1 = sy2 = sy3 = sy4 = Infinity;\n\n      // Top Left\n      var p1 = rect.topLeft();\n      if (p1.x < ox) {\n        sx1 = (this.x - ox) / (p1.x - ox);\n      }\n      if (p1.y < oy) {\n        sy1 = (this.y - oy) / (p1.y - oy);\n      }\n      // Bottom Right\n      var p2 = rect.bottomRight();\n      if (p2.x > ox) {\n        sx2 = (this.x + this.width - ox) / (p2.x - ox);\n      }\n      if (p2.y > oy) {\n        sy2 = (this.y + this.height - oy) / (p2.y - oy);\n      }\n      // Top Right\n      var p3 = rect.topRight();\n      if (p3.x > ox) {\n        sx3 = (this.x + this.width - ox) / (p3.x - ox);\n      }\n      if (p3.y < oy) {\n        sy3 = (this.y - oy) / (p3.y - oy);\n      }\n      // Bottom Left\n      var p4 = rect.bottomLeft();\n      if (p4.x < ox) {\n        sx4 = (this.x - ox) / (p4.x - ox);\n      }\n      if (p4.y > oy) {\n        sy4 = (this.y + this.height - oy) / (p4.y - oy);\n      }\n      return {\n        sx: min$5(sx1, sx2, sx3, sx4),\n        sy: min$5(sy1, sy2, sy3, sy4)\n      };\n    },\n    maxRectUniformScaleToFit: function (rect, origin) {\n      var scale = this.maxRectScaleToFit(rect, origin);\n      return min$5(scale.sx, scale.sy);\n    },\n    // Move and expand me.\n    // @param r {rectangle} representing deltas\n    moveAndExpand: function (r) {\n      this.x += r.x || 0;\n      this.y += r.y || 0;\n      this.width += r.width || 0;\n      this.height += r.height || 0;\n      return this;\n    },\n    // Normalize the rectangle; i.e., make it so that it has a non-negative width and height.\n    // If width < 0 the function swaps the left and right corners,\n    // and it swaps the top and bottom corners if height < 0\n    // like in http://qt-project.org/doc/qt-4.8/qrectf.html#normalized\n    normalize: function () {\n      var newx = this.x;\n      var newy = this.y;\n      var newwidth = this.width;\n      var newheight = this.height;\n      if (this.width < 0) {\n        newx = this.x + this.width;\n        newwidth = -this.width;\n      }\n      if (this.height < 0) {\n        newy = this.y + this.height;\n        newheight = -this.height;\n      }\n      this.x = newx;\n      this.y = newy;\n      this.width = newwidth;\n      this.height = newheight;\n      return this;\n    },\n    // Offset me by the specified amount.\n    offset: function (dx, dy) {\n      // pretend that this is a point and call offset()\n      // rewrites x and y according to dx and dy\n      return Point.prototype.offset.call(this, dx, dy);\n    },\n    origin: function () {\n      return new Point(this.x, this.y);\n    },\n    // @return {point} a point on my boundary nearest to the given point.\n    // @see Squeak Smalltalk, Rectangle>>pointNearestTo:\n    pointNearestToPoint: function (point) {\n      point = new Point(point);\n      if (this.containsPoint(point)) {\n        var side = this.sideNearestToPoint(point);\n        switch (side) {\n          case 'right':\n            return new Point(this.x + this.width, point.y);\n          case 'left':\n            return new Point(this.x, point.y);\n          case 'bottom':\n            return new Point(point.x, this.y + this.height);\n          case 'top':\n            return new Point(point.x, this.y);\n        }\n      }\n      return point.adhereToRect(this);\n    },\n    rightLine: function () {\n      return new Line(this.topRight(), this.bottomRight());\n    },\n    rightMiddle: function () {\n      return new Point(this.x + this.width, this.y + this.height / 2);\n    },\n    round: function (precision) {\n      var f = 1; // case 0\n      if (precision) {\n        switch (precision) {\n          case 1:\n            f = 10;\n            break;\n          case 2:\n            f = 100;\n            break;\n          case 3:\n            f = 1000;\n            break;\n          default:\n            f = pow$2(10, precision);\n            break;\n        }\n      }\n      this.x = round$3(this.x * f) / f;\n      this.y = round$3(this.y * f) / f;\n      this.width = round$3(this.width * f) / f;\n      this.height = round$3(this.height * f) / f;\n      return this;\n    },\n    // Scale rectangle with origin.\n    scale: function (sx, sy, origin) {\n      origin = this.origin().scale(sx, sy, origin);\n      this.x = origin.x;\n      this.y = origin.y;\n      this.width *= sx;\n      this.height *= sy;\n      return this;\n    },\n    // @return {string} (left|right|top|bottom) side which is nearest to point\n    // @see Squeak Smalltalk, Rectangle>>sideNearestTo:\n    sideNearestToPoint: function (point) {\n      point = new Point(point);\n      var distToLeft = point.x - this.x;\n      var distToRight = this.x + this.width - point.x;\n      var distToTop = point.y - this.y;\n      var distToBottom = this.y + this.height - point.y;\n      var closest = distToLeft;\n      var side = 'left';\n      if (distToRight < closest) {\n        closest = distToRight;\n        side = 'right';\n      }\n      if (distToTop < closest) {\n        closest = distToTop;\n        side = 'top';\n      }\n      if (distToBottom < closest) {\n        // closest = distToBottom;\n        side = 'bottom';\n      }\n      return side;\n    },\n    snapToGrid: function (gx, gy) {\n      var origin = this.origin().snapToGrid(gx, gy);\n      var corner = this.corner().snapToGrid(gx, gy);\n      this.x = origin.x;\n      this.y = origin.y;\n      this.width = corner.x - origin.x;\n      this.height = corner.y - origin.y;\n      return this;\n    },\n    toJSON: function () {\n      return {\n        x: this.x,\n        y: this.y,\n        width: this.width,\n        height: this.height\n      };\n    },\n    topLine: function () {\n      return new Line(this.topLeft(), this.topRight());\n    },\n    topMiddle: function () {\n      return new Point(this.x + this.width / 2, this.y);\n    },\n    topRight: function () {\n      return new Point(this.x + this.width, this.y);\n    },\n    toString: function () {\n      return this.origin().toString() + ' ' + this.corner().toString();\n    },\n    // @return {rect} representing the union of both rectangles.\n    union: function (rect) {\n      return Rect.fromRectUnion(this, rect);\n    },\n    update: function (x, y, w, h) {\n      if (Object(x) === x) {\n        y = x.y;\n        w = x.width;\n        h = x.height;\n        x = x.x;\n      }\n      this.x = x || 0;\n      this.y = y || 0;\n      this.width = w || 0;\n      this.height = h || 0;\n      return this;\n    }\n  };\n  Rect.prototype.bottomRight = Rect.prototype.corner;\n  Rect.prototype.topLeft = Rect.prototype.origin;\n  Rect.prototype.translate = Rect.prototype.offset;\n\n  // For backwards compatibility:\n  var rect = Rect;\n  function parsePoints(svgString) {\n    // Step 1: Discard surrounding spaces\n    var trimmedString = svgString.trim();\n    if (trimmedString === '') {\n      return [];\n    }\n    var points = [];\n\n    // Step 2: Split at commas (+ their surrounding spaces) or at multiple spaces\n    // ReDoS mitigation: Have an anchor at the beginning of each alternation\n    // Note: This doesn't simplify double (or more) commas - causes empty coords\n    // This regex is used by `split()`, so it doesn't need to use /g\n    var coords = trimmedString.split(/\\b\\s*,\\s*|,\\s*|\\s+/);\n    var numCoords = coords.length;\n    for (var i = 0; i < numCoords; i += 2) {\n      // Step 3: Convert each coord to number\n      // Note: If the coord cannot be converted to a number, it will be `NaN`\n      // Note: If the coord is empty (\"\", e.g. from \",,\" input), it will be `0`\n      // Note: If we end up with an odd number of coords, the last point's second coord will be `NaN`\n      points.push({\n        x: +coords[i],\n        y: +coords[i + 1]\n      });\n    }\n    return points;\n  }\n  function clonePoints(points) {\n    var numPoints = points.length;\n    if (numPoints === 0) {\n      return [];\n    }\n    var newPoints = [];\n    for (var i = 0; i < numPoints; i++) {\n      var point = points[i].clone();\n      newPoints.push(point);\n    }\n    return newPoints;\n  }\n\n  // Returns a convex-hull polyline from this polyline.\n  // Implements the Graham scan (https://en.wikipedia.org/wiki/Graham_scan).\n  // Output polyline starts at the first element of the original polyline that is on the hull, then continues clockwise.\n  // Minimal polyline is found (only vertices of the hull are reported, no collinear points).\n  function convexHull(points) {\n    var abs = Math.abs;\n    var i;\n    var n;\n    var numPoints = points.length;\n    if (numPoints === 0) {\n      return [];\n    } // if points array is empty\n\n    // step 1: find the starting point - point with the lowest y (if equality, highest x)\n    var startPoint;\n    for (i = 0; i < numPoints; i++) {\n      if (startPoint === undefined) {\n        // if this is the first point we see, set it as start point\n        startPoint = points[i];\n      } else if (points[i].y < startPoint.y) {\n        // start point should have lowest y from all points\n        startPoint = points[i];\n      } else if (points[i].y === startPoint.y && points[i].x > startPoint.x) {\n        // if two points have the lowest y, choose the one that has highest x\n        // there are no points to the right of startPoint - no ambiguity about theta 0\n        // if there are several coincident start point candidates, first one is reported\n        startPoint = points[i];\n      }\n    }\n\n    // step 2: sort the list of points\n    // sorting by angle between line from startPoint to point and the x-axis (theta)\n\n    // step 2a: create the point records = [point, originalIndex, angle]\n    var sortedPointRecords = [];\n    for (i = 0; i < numPoints; i++) {\n      var angle = startPoint.theta(points[i]);\n      if (angle === 0) {\n        angle = 360; // give highest angle to start point\n        // the start point will end up at end of sorted list\n        // the start point will end up at beginning of hull points list\n      }\n      var entry = [points[i], i, angle];\n      sortedPointRecords.push(entry);\n    }\n\n    // step 2b: sort the list in place\n    sortedPointRecords.sort(function (record1, record2) {\n      // returning a negative number here sorts record1 before record2\n      // if first angle is smaller than second, first angle should come before second\n\n      var sortOutput = record1[2] - record2[2]; // negative if first angle smaller\n      if (sortOutput === 0) {\n        // if the two angles are equal, sort by originalIndex\n        sortOutput = record2[1] - record1[1]; // negative if first index larger\n        // coincident points will be sorted in reverse-numerical order\n        // so the coincident points with lower original index will be considered first\n      }\n      return sortOutput;\n    });\n\n    // step 2c: duplicate start record from the top of the stack to the bottom of the stack\n    if (sortedPointRecords.length > 2) {\n      var startPointRecord = sortedPointRecords[sortedPointRecords.length - 1];\n      sortedPointRecords.unshift(startPointRecord);\n    }\n\n    // step 3a: go through sorted points in order and find those with right turns\n    // we want to get our results in clockwise order\n    var insidePoints = {}; // dictionary of points with left turns - cannot be on the hull\n    var hullPointRecords = []; // stack of records with right turns - hull point candidates\n\n    var currentPointRecord;\n    var currentPoint;\n    var lastHullPointRecord;\n    var lastHullPoint;\n    var secondLastHullPointRecord;\n    var secondLastHullPoint;\n    while (sortedPointRecords.length !== 0) {\n      currentPointRecord = sortedPointRecords.pop();\n      currentPoint = currentPointRecord[0];\n\n      // check if point has already been discarded\n      // keys for insidePoints are stored in the form 'point.x@point.y@@originalIndex'\n      if (insidePoints.hasOwnProperty(currentPointRecord[0] + '@@' + currentPointRecord[1])) {\n        // this point had an incorrect turn at some previous iteration of this loop\n        // this disqualifies it from possibly being on the hull\n        continue;\n      }\n      var correctTurnFound = false;\n      while (!correctTurnFound) {\n        if (hullPointRecords.length < 2) {\n          // not enough points for comparison, just add current point\n          hullPointRecords.push(currentPointRecord);\n          correctTurnFound = true;\n        } else {\n          lastHullPointRecord = hullPointRecords.pop();\n          lastHullPoint = lastHullPointRecord[0];\n          secondLastHullPointRecord = hullPointRecords.pop();\n          secondLastHullPoint = secondLastHullPointRecord[0];\n          var crossProduct = secondLastHullPoint.cross(lastHullPoint, currentPoint);\n          if (crossProduct < 0) {\n            // found a right turn\n            hullPointRecords.push(secondLastHullPointRecord);\n            hullPointRecords.push(lastHullPointRecord);\n            hullPointRecords.push(currentPointRecord);\n            correctTurnFound = true;\n          } else if (crossProduct === 0) {\n            // the three points are collinear\n            // three options:\n            // there may be a 180 or 0 degree angle at lastHullPoint\n            // or two of the three points are coincident\n            var THRESHOLD = 1e-10; // we have to take rounding errors into account\n            var angleBetween = lastHullPoint.angleBetween(secondLastHullPoint, currentPoint);\n            if (abs(angleBetween - 180) < THRESHOLD) {\n              // rounding around 180 to 180\n              // if the cross product is 0 because the angle is 180 degrees\n              // discard last hull point (add to insidePoints)\n              //insidePoints.unshift(lastHullPoint);\n              insidePoints[lastHullPointRecord[0] + '@@' + lastHullPointRecord[1]] = lastHullPoint;\n              // reenter second-to-last hull point (will be last at next iter)\n              hullPointRecords.push(secondLastHullPointRecord);\n              // do not do anything with current point\n              // correct turn not found\n            } else if (lastHullPoint.equals(currentPoint) || secondLastHullPoint.equals(lastHullPoint)) {\n              // if the cross product is 0 because two points are the same\n              // discard last hull point (add to insidePoints)\n              //insidePoints.unshift(lastHullPoint);\n              insidePoints[lastHullPointRecord[0] + '@@' + lastHullPointRecord[1]] = lastHullPoint;\n              // reenter second-to-last hull point (will be last at next iter)\n              hullPointRecords.push(secondLastHullPointRecord);\n              // do not do anything with current point\n              // correct turn not found\n            } else if (abs((angleBetween + 1) % 360 - 1) < THRESHOLD) {\n              // rounding around 0 and 360 to 0\n              // if the cross product is 0 because the angle is 0 degrees\n              // remove last hull point from hull BUT do not discard it\n              // reenter second-to-last hull point (will be last at next iter)\n              hullPointRecords.push(secondLastHullPointRecord);\n              // put last hull point back into the sorted point records list\n              sortedPointRecords.push(lastHullPointRecord);\n              // we are switching the order of the 0deg and 180deg points\n              // correct turn not found\n            }\n          } else {\n            // found a left turn\n            // discard last hull point (add to insidePoints)\n            //insidePoints.unshift(lastHullPoint);\n            insidePoints[lastHullPointRecord[0] + '@@' + lastHullPointRecord[1]] = lastHullPoint;\n            // reenter second-to-last hull point (will be last at next iter of loop)\n            hullPointRecords.push(secondLastHullPointRecord);\n            // do not do anything with current point\n            // correct turn not found\n          }\n        }\n      }\n    }\n    // at this point, hullPointRecords contains the output points in clockwise order\n    // the points start with lowest-y,highest-x startPoint, and end at the same point\n\n    // step 3b: remove duplicated startPointRecord from the end of the array\n    if (hullPointRecords.length > 2) {\n      hullPointRecords.pop();\n    }\n\n    // step 4: find the lowest originalIndex record and put it at the beginning of hull\n    var lowestHullIndex; // the lowest originalIndex on the hull\n    var indexOfLowestHullIndexRecord = -1; // the index of the record with lowestHullIndex\n    n = hullPointRecords.length;\n    for (i = 0; i < n; i++) {\n      var currentHullIndex = hullPointRecords[i][1];\n      if (lowestHullIndex === undefined || currentHullIndex < lowestHullIndex) {\n        lowestHullIndex = currentHullIndex;\n        indexOfLowestHullIndexRecord = i;\n      }\n    }\n    var hullPointRecordsReordered = [];\n    if (indexOfLowestHullIndexRecord > 0) {\n      var newFirstChunk = hullPointRecords.slice(indexOfLowestHullIndexRecord);\n      var newSecondChunk = hullPointRecords.slice(0, indexOfLowestHullIndexRecord);\n      hullPointRecordsReordered = newFirstChunk.concat(newSecondChunk);\n    } else {\n      hullPointRecordsReordered = hullPointRecords;\n    }\n    var hullPoints = [];\n    n = hullPointRecordsReordered.length;\n    for (i = 0; i < n; i++) {\n      hullPoints.push(hullPointRecordsReordered[i][0]);\n    }\n    return hullPoints;\n  }\n  var Polyline = function (points) {\n    if (!(this instanceof Polyline)) {\n      return new Polyline(points);\n    }\n    if (typeof points === 'string') {\n      return new Polyline.parse(points);\n    }\n    this.points = Array.isArray(points) ? points.map(Point) : [];\n  };\n  Polyline.parse = function (svgString) {\n    return new Polyline(parsePoints(svgString));\n  };\n  Polyline.fromRect = function (rect) {\n    return new Polyline([rect.topLeft(), rect.topRight(), rect.bottomRight(), rect.bottomLeft(), rect.topLeft()]);\n  };\n  Polyline.prototype = {\n    type: types.Polyline,\n    bbox: function () {\n      var x1 = Infinity;\n      var x2 = -Infinity;\n      var y1 = Infinity;\n      var y2 = -Infinity;\n      var points = this.points;\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return null;\n      } // if points array is empty\n\n      for (var i = 0; i < numPoints; i++) {\n        var point = points[i];\n        var x = point.x;\n        var y = point.y;\n        if (x < x1) {\n          x1 = x;\n        }\n        if (x > x2) {\n          x2 = x;\n        }\n        if (y < y1) {\n          y1 = y;\n        }\n        if (y > y2) {\n          y2 = y;\n        }\n      }\n      return new Rect(x1, y1, x2 - x1, y2 - y1);\n    },\n    clone: function () {\n      return new Polyline(clonePoints(this.points));\n    },\n    closestPoint: function (p) {\n      var cpLength = this.closestPointLength(p);\n      return this.pointAtLength(cpLength);\n    },\n    closestPointLength: function (p) {\n      var points = this.lengthPoints();\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return 0;\n      } // if points array is empty\n      if (numPoints === 1) {\n        return 0;\n      } // if there is only one point\n\n      var cpLength;\n      var minSqrDistance = Infinity;\n      var length = 0;\n      var n = numPoints - 1;\n      for (var i = 0; i < n; i++) {\n        var line = new Line(points[i], points[i + 1]);\n        var lineLength = line.length();\n        var cpNormalizedLength = line.closestPointNormalizedLength(p);\n        var cp = line.pointAt(cpNormalizedLength);\n        var sqrDistance = cp.squaredDistance(p);\n        if (sqrDistance < minSqrDistance) {\n          minSqrDistance = sqrDistance;\n          cpLength = length + cpNormalizedLength * lineLength;\n        }\n        length += lineLength;\n      }\n      return cpLength;\n    },\n    closestPointNormalizedLength: function (p) {\n      var cpLength = this.closestPointLength(p);\n      if (cpLength === 0) {\n        return 0;\n      } // shortcut\n\n      var length = this.length();\n      if (length === 0) {\n        return 0;\n      } // prevents division by zero\n\n      return cpLength / length;\n    },\n    closestPointTangent: function (p) {\n      var cpLength = this.closestPointLength(p);\n      return this.tangentAtLength(cpLength);\n    },\n    // Returns `true` if the area surrounded by the polyline contains the point `p`.\n    // Implements the even-odd SVG algorithm (self-intersections are \"outside\").\n    // (Uses horizontal rays to the right of `p` to look for intersections.)\n    // Closes open polylines (always imagines a final closing segment).\n    containsPoint: function (p) {\n      var points = this.points;\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return false;\n      } // shortcut (this polyline has no points)\n\n      var x = p.x;\n      var y = p.y;\n\n      // initialize a final closing segment by creating one from last-first points on polyline\n      var startIndex = numPoints - 1; // start of current polyline segment\n      var endIndex = 0; // end of current polyline segment\n      var numIntersections = 0;\n      var segment = new Line();\n      var ray = new Line();\n      var rayEnd = new Point();\n      for (; endIndex < numPoints; endIndex++) {\n        var start = points[startIndex];\n        var end = points[endIndex];\n        if (p.equals(start)) {\n          return true;\n        } // shortcut (`p` is a point on polyline)\n        // current polyline segment\n        segment.start = start;\n        segment.end = end;\n        if (segment.containsPoint(p)) {\n          return true;\n        } // shortcut (`p` lies on a polyline segment)\n\n        // do we have an intersection?\n        if (y <= start.y && y > end.y || y > start.y && y <= end.y) {\n          // this conditional branch IS NOT entered when `segment` is collinear/coincident with `ray`\n          // (when `y === start.y === end.y`)\n          // this conditional branch IS entered when `segment` touches `ray` at only one point\n          // (e.g. when `y === start.y !== end.y`)\n          // since this branch is entered again for the following segment, the two touches cancel out\n\n          var xDifference = start.x - x > end.x - x ? start.x - x : end.x - x;\n          if (xDifference >= 0) {\n            // segment lies at least partially to the right of `p`\n            rayEnd.x = x + xDifference;\n            rayEnd.y = y; // right\n            ray.start = p;\n            ray.end = rayEnd;\n            if (segment.intersect(ray)) {\n              // an intersection was detected to the right of `p`\n              numIntersections++;\n            }\n          } // else: `segment` lies completely to the left of `p` (i.e. no intersection to the right)\n        }\n\n        // move to check the next polyline segment\n        startIndex = endIndex;\n      }\n\n      // returns `true` for odd numbers of intersections (even-odd algorithm)\n      return numIntersections % 2 === 1;\n    },\n    close: function () {\n      var ref = this;\n      var start = ref.start;\n      var end = ref.end;\n      var points = ref.points;\n      if (start && end && !start.equals(end)) {\n        points.push(start.clone());\n      }\n      return this;\n    },\n    lengthPoints: function () {\n      return this.points;\n    },\n    convexHull: function () {\n      return new Polyline(convexHull(this.points));\n    },\n    // Checks whether two polylines are exactly the same.\n    // If `p` is undefined or null, returns false.\n    equals: function (p) {\n      if (!p) {\n        return false;\n      }\n      var points = this.points;\n      var otherPoints = p.points;\n      var numPoints = points.length;\n      if (otherPoints.length !== numPoints) {\n        return false;\n      } // if the two polylines have different number of points, they cannot be equal\n\n      for (var i = 0; i < numPoints; i++) {\n        var point = points[i];\n        var otherPoint = p.points[i];\n\n        // as soon as an inequality is found in points, return false\n        if (!point.equals(otherPoint)) {\n          return false;\n        }\n      }\n\n      // if no inequality found in points, return true\n      return true;\n    },\n    intersectionWithLine: function (l) {\n      var line = new Line(l);\n      var intersections = [];\n      var points = this.lengthPoints();\n      var l2 = new Line();\n      for (var i = 0, n = points.length - 1; i < n; i++) {\n        l2.start = points[i];\n        l2.end = points[i + 1];\n        var int = line.intersectionWithLine(l2);\n        if (int) {\n          intersections.push(int[0]);\n        }\n      }\n      return intersections.length > 0 ? intersections : null;\n    },\n    isDifferentiable: function () {\n      var points = this.points;\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return false;\n      }\n      var line = new Line();\n      var n = numPoints - 1;\n      for (var i = 0; i < n; i++) {\n        line.start = points[i];\n        line.end = points[i + 1];\n        // as soon as a differentiable line is found between two points, return true\n        if (line.isDifferentiable()) {\n          return true;\n        }\n      }\n\n      // if no differentiable line is found between pairs of points, return false\n      return false;\n    },\n    length: function () {\n      var points = this.lengthPoints();\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return 0;\n      } // if points array is empty\n\n      var length = 0;\n      var n = numPoints - 1;\n      for (var i = 0; i < n; i++) {\n        length += points[i].distance(points[i + 1]);\n      }\n      return length;\n    },\n    pointAt: function (ratio) {\n      var points = this.lengthPoints();\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return null;\n      } // if points array is empty\n      if (numPoints === 1) {\n        return points[0].clone();\n      } // if there is only one point\n\n      if (ratio <= 0) {\n        return points[0].clone();\n      }\n      if (ratio >= 1) {\n        return points[numPoints - 1].clone();\n      }\n      var polylineLength = this.length();\n      var length = polylineLength * ratio;\n      return this.pointAtLength(length);\n    },\n    pointAtLength: function (length) {\n      var points = this.lengthPoints();\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return null;\n      } // if points array is empty\n      if (numPoints === 1) {\n        return points[0].clone();\n      } // if there is only one point\n\n      var fromStart = true;\n      if (length < 0) {\n        fromStart = false; // negative lengths mean start calculation from end point\n        length = -length; // absolute value\n      }\n      var l = 0;\n      var n = numPoints - 1;\n      for (var i = 0; i < n; i++) {\n        var index = fromStart ? i : n - 1 - i;\n        var a = points[index];\n        var b = points[index + 1];\n        var line = new Line(a, b);\n        var d = a.distance(b);\n        if (length <= l + d) {\n          return line.pointAtLength((fromStart ? 1 : -1) * (length - l));\n        }\n        l += d;\n      }\n\n      // if length requested is higher than the length of the polyline, return last endpoint\n      var lastPoint = fromStart ? points[numPoints - 1] : points[0];\n      return lastPoint.clone();\n    },\n    round: function (precision) {\n      var points = this.points;\n      var numPoints = points.length;\n      for (var i = 0; i < numPoints; i++) {\n        points[i].round(precision);\n      }\n      return this;\n    },\n    scale: function (sx, sy, origin) {\n      var points = this.points;\n      var numPoints = points.length;\n      for (var i = 0; i < numPoints; i++) {\n        points[i].scale(sx, sy, origin);\n      }\n      return this;\n    },\n    simplify: function (opt) {\n      if (opt === void 0) opt = {};\n      var points = this.points;\n      if (points.length < 3) {\n        return this;\n      } // we need at least 3 points\n\n      // TODO: we may also accept startIndex and endIndex to specify where to start and end simplification\n\n      // Due to the nature of the algorithm, we do not use 0 as the default value for `threshold`\n      // because of the rounding errors that can occur when comparing distances.\n      var threshold = opt.threshold || 1e-10; // = max distance of middle point from chord to be simplified\n\n      // start at the beginning of the polyline and go forward\n      var currentIndex = 0;\n      // we need at least one intermediate point (3 points) in every iteration\n      // as soon as that stops being true, we know we reached the end of the polyline\n      while (points[currentIndex + 2]) {\n        var firstIndex = currentIndex;\n        var middleIndex = currentIndex + 1;\n        var lastIndex = currentIndex + 2;\n        var firstPoint = points[firstIndex];\n        var middlePoint = points[middleIndex];\n        var lastPoint = points[lastIndex];\n        var chord = new Line(firstPoint, lastPoint); // = connection between first and last point\n        var closestPoint = chord.closestPoint(middlePoint); // = closest point on chord from middle point\n        var closestPointDistance = closestPoint.distance(middlePoint);\n        if (closestPointDistance <= threshold) {\n          // middle point is close enough to the chord = simplify\n          // 1) remove middle point:\n          points.splice(middleIndex, 1);\n          // 2) in next iteration, investigate the newly-created triplet of points\n          //    - do not change `currentIndex`\n          //    = (first point stays, point after removed point becomes middle point)\n        } else {\n          // middle point is far from the chord\n          // 1) preserve middle point\n          // 2) in next iteration, move `currentIndex` by one step:\n          currentIndex += 1;\n          //    = (point after first point becomes first point)\n        }\n      }\n\n      // `points` array was modified in-place\n      return this;\n    },\n    tangentAt: function (ratio) {\n      var points = this.lengthPoints();\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return null;\n      } // if points array is empty\n      if (numPoints === 1) {\n        return null;\n      } // if there is only one point\n\n      if (ratio < 0) {\n        ratio = 0;\n      }\n      if (ratio > 1) {\n        ratio = 1;\n      }\n      var polylineLength = this.length();\n      var length = polylineLength * ratio;\n      return this.tangentAtLength(length);\n    },\n    tangentAtLength: function (length) {\n      var points = this.lengthPoints();\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return null;\n      } // if points array is empty\n      if (numPoints === 1) {\n        return null;\n      } // if there is only one point\n\n      var fromStart = true;\n      if (length < 0) {\n        fromStart = false; // negative lengths mean start calculation from end point\n        length = -length; // absolute value\n      }\n      var lastValidLine; // differentiable (with a tangent)\n      var l = 0; // length so far\n      var n = numPoints - 1;\n      for (var i = 0; i < n; i++) {\n        var index = fromStart ? i : n - 1 - i;\n        var a = points[index];\n        var b = points[index + 1];\n        var line = new Line(a, b);\n        var d = a.distance(b);\n        if (line.isDifferentiable()) {\n          // has a tangent line (line length is not 0)\n          if (length <= l + d) {\n            return line.tangentAtLength((fromStart ? 1 : -1) * (length - l));\n          }\n          lastValidLine = line;\n        }\n        l += d;\n      }\n\n      // if length requested is higher than the length of the polyline, return last valid endpoint\n      if (lastValidLine) {\n        var ratio = fromStart ? 1 : 0;\n        return lastValidLine.tangentAt(ratio);\n      }\n\n      // if no valid line, return null\n      return null;\n    },\n    toString: function () {\n      return this.points + '';\n    },\n    translate: function (tx, ty) {\n      var points = this.points;\n      var numPoints = points.length;\n      for (var i = 0; i < numPoints; i++) {\n        points[i].translate(tx, ty);\n      }\n      return this;\n    },\n    // Return svgString that can be used to recreate this line.\n    serialize: function () {\n      var points = this.points;\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return '';\n      } // if points array is empty\n\n      var output = '';\n      for (var i = 0; i < numPoints; i++) {\n        var point = points[i];\n        output += point.x + ',' + point.y + ' ';\n      }\n      return output.trim();\n    }\n  };\n  Object.defineProperty(Polyline.prototype, 'start', {\n    // Getter for the first point of the polyline.\n\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      var points = this.points;\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return null;\n      } // if points array is empty\n\n      return this.points[0];\n    }\n  });\n  Object.defineProperty(Polyline.prototype, 'end', {\n    // Getter for the last point of the polyline.\n\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      var points = this.points;\n      var numPoints = points.length;\n      if (numPoints === 0) {\n        return null;\n      } // if points array is empty\n\n      return this.points[numPoints - 1];\n    }\n  });\n  var abs$2 = Math.abs;\n  var sqrt$2 = Math.sqrt;\n  var min$6 = Math.min;\n  var max$4 = Math.max;\n  var pow$3 = Math.pow;\n  var Curve = function (p1, p2, p3, p4) {\n    if (!(this instanceof Curve)) {\n      return new Curve(p1, p2, p3, p4);\n    }\n    if (p1 instanceof Curve) {\n      return new Curve(p1.start, p1.controlPoint1, p1.controlPoint2, p1.end);\n    }\n    this.start = new Point(p1);\n    this.controlPoint1 = new Point(p2);\n    this.controlPoint2 = new Point(p3);\n    this.end = new Point(p4);\n  };\n\n  // Curve passing through points.\n  // Ported from C# implementation by Oleg V. Polikarpotchkin and Peter Lee (http://www.codeproject.com/KB/graphics/BezierSpline.aspx).\n  // @param {array} points Array of points through which the smooth line will go.\n  // @return {array} curves.\n  Curve.throughPoints = function () {\n    // Get open-ended Bezier Spline Control Points.\n    // @param knots Input Knot Bezier spline points (At least two points!).\n    // @param firstControlPoints Output First Control points. Array of knots.length - 1 length.\n    // @param secondControlPoints Output Second Control points. Array of knots.length - 1 length.\n    function getCurveControlPoints(knots) {\n      var firstControlPoints = [];\n      var secondControlPoints = [];\n      var n = knots.length - 1;\n      var i;\n\n      // Special case: Bezier curve should be a straight line.\n      if (n == 1) {\n        // 3P1 = 2P0 + P3\n        firstControlPoints[0] = new Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n\n        // P2 = 2P1 â P0\n        secondControlPoints[0] = new Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n        return [firstControlPoints, secondControlPoints];\n      }\n\n      // Calculate first Bezier control points.\n      // Right hand side vector.\n      var rhs = [];\n\n      // Set right hand side X values.\n      for (i = 1; i < n - 1; i++) {\n        rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n      }\n      rhs[0] = knots[0].x + 2 * knots[1].x;\n      rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n\n      // Get first control points X-values.\n      var x = getFirstControlPoints(rhs);\n\n      // Set right hand side Y values.\n      for (i = 1; i < n - 1; ++i) {\n        rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n      }\n      rhs[0] = knots[0].y + 2 * knots[1].y;\n      rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n\n      // Get first control points Y-values.\n      var y = getFirstControlPoints(rhs);\n\n      // Fill output arrays.\n      for (i = 0; i < n; i++) {\n        // First control point.\n        firstControlPoints.push(new Point(x[i], y[i]));\n\n        // Second control point.\n        if (i < n - 1) {\n          secondControlPoints.push(new Point(2 * knots[i + 1].x - x[i + 1], 2 * knots[i + 1].y - y[i + 1]));\n        } else {\n          secondControlPoints.push(new Point((knots[n].x + x[n - 1]) / 2, (knots[n].y + y[n - 1]) / 2));\n        }\n      }\n      return [firstControlPoints, secondControlPoints];\n    }\n\n    // Solves a tridiagonal system for one of coordinates (x or y) of first Bezier control points.\n    // @param rhs Right hand side vector.\n    // @return Solution vector.\n    function getFirstControlPoints(rhs) {\n      var n = rhs.length;\n      // `x` is a solution vector.\n      var x = [];\n      var tmp = [];\n      var b = 2.0;\n      x[0] = rhs[0] / b;\n\n      // Decomposition and forward substitution.\n      for (var i = 1; i < n; i++) {\n        tmp[i] = 1 / b;\n        b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n        x[i] = (rhs[i] - x[i - 1]) / b;\n      }\n      for (i = 1; i < n; i++) {\n        // Backsubstitution.\n        x[n - i - 1] -= tmp[n - i] * x[n - i];\n      }\n      return x;\n    }\n    return function (points) {\n      if (!points || Array.isArray(points) && points.length < 2) {\n        throw new Error('At least 2 points are required');\n      }\n      var controlPoints = getCurveControlPoints(points);\n      var curves = [];\n      var n = controlPoints[0].length;\n      for (var i = 0; i < n; i++) {\n        var controlPoint1 = new Point(controlPoints[0][i].x, controlPoints[0][i].y);\n        var controlPoint2 = new Point(controlPoints[1][i].x, controlPoints[1][i].y);\n        curves.push(new Curve(points[i], controlPoint1, controlPoint2, points[i + 1]));\n      }\n      return curves;\n    };\n  }();\n  Curve.prototype = {\n    type: types.Curve,\n    // Returns a bbox that tightly envelops the curve.\n    bbox: function () {\n      var start = this.start;\n      var controlPoint1 = this.controlPoint1;\n      var controlPoint2 = this.controlPoint2;\n      var end = this.end;\n      var x0 = start.x;\n      var y0 = start.y;\n      var x1 = controlPoint1.x;\n      var y1 = controlPoint1.y;\n      var x2 = controlPoint2.x;\n      var y2 = controlPoint2.y;\n      var x3 = end.x;\n      var y3 = end.y;\n      var points = new Array(); // local extremes\n      var tvalues = new Array(); // t values of local extremes\n      var bounds = [new Array(), new Array()];\n      var a, b, c, t;\n      var t1, t2;\n      var b2ac, sqrtb2ac;\n      for (var i = 0; i < 2; ++i) {\n        if (i === 0) {\n          b = 6 * x0 - 12 * x1 + 6 * x2;\n          a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n          c = 3 * x1 - 3 * x0;\n        } else {\n          b = 6 * y0 - 12 * y1 + 6 * y2;\n          a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n          c = 3 * y1 - 3 * y0;\n        }\n        if (abs$2(a) < 1e-12) {\n          // Numerical robustness\n          if (abs$2(b) < 1e-12) {\n            // Numerical robustness\n            continue;\n          }\n          t = -c / b;\n          if (0 < t && t < 1) {\n            tvalues.push(t);\n          }\n          continue;\n        }\n        b2ac = b * b - 4 * c * a;\n        sqrtb2ac = sqrt$2(b2ac);\n        if (b2ac < 0) {\n          continue;\n        }\n        t1 = (-b + sqrtb2ac) / (2 * a);\n        if (0 < t1 && t1 < 1) {\n          tvalues.push(t1);\n        }\n        t2 = (-b - sqrtb2ac) / (2 * a);\n        if (0 < t2 && t2 < 1) {\n          tvalues.push(t2);\n        }\n      }\n      var j = tvalues.length;\n      var jlen = j;\n      var mt;\n      var x, y;\n      while (j--) {\n        t = tvalues[j];\n        mt = 1 - t;\n        x = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;\n        bounds[0][j] = x;\n        y = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;\n        bounds[1][j] = y;\n        points[j] = {\n          X: x,\n          Y: y\n        };\n      }\n      tvalues[jlen] = 0;\n      tvalues[jlen + 1] = 1;\n      points[jlen] = {\n        X: x0,\n        Y: y0\n      };\n      points[jlen + 1] = {\n        X: x3,\n        Y: y3\n      };\n      bounds[0][jlen] = x0;\n      bounds[1][jlen] = y0;\n      bounds[0][jlen + 1] = x3;\n      bounds[1][jlen + 1] = y3;\n      tvalues.length = jlen + 2;\n      bounds[0].length = jlen + 2;\n      bounds[1].length = jlen + 2;\n      points.length = jlen + 2;\n      var left = min$6.apply(null, bounds[0]);\n      var top = min$6.apply(null, bounds[1]);\n      var right = max$4.apply(null, bounds[0]);\n      var bottom = max$4.apply(null, bounds[1]);\n      return new Rect(left, top, right - left, bottom - top);\n    },\n    clone: function () {\n      return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    },\n    // Returns the point on the curve closest to point `p`\n    closestPoint: function (p, opt) {\n      return this.pointAtT(this.closestPointT(p, opt));\n    },\n    closestPointLength: function (p, opt) {\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n        precision: precision\n      }) : opt.subdivisions;\n      var localOpt = {\n        precision: precision,\n        subdivisions: subdivisions\n      };\n      return this.lengthAtT(this.closestPointT(p, localOpt), localOpt);\n    },\n    closestPointNormalizedLength: function (p, opt) {\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n        precision: precision\n      }) : opt.subdivisions;\n      var localOpt = {\n        precision: precision,\n        subdivisions: subdivisions\n      };\n      var cpLength = this.closestPointLength(p, localOpt);\n      if (!cpLength) {\n        return 0;\n      }\n      var length = this.length(localOpt);\n      if (length === 0) {\n        return 0;\n      }\n      return cpLength / length;\n    },\n    // Returns `t` of the point on the curve closest to point `p`\n    closestPointT: function (p, opt) {\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n        precision: precision\n      }) : opt.subdivisions;\n      // does not use localOpt\n\n      // identify the subdivision that contains the point:\n      var investigatedSubdivision;\n      var investigatedSubdivisionStartT; // assume that subdivisions are evenly spaced\n      var investigatedSubdivisionEndT;\n      var distFromStart; // distance of point from start of baseline\n      var distFromEnd; // distance of point from end of baseline\n      var chordLength; // distance between start and end of the subdivision\n      var minSumDist; // lowest observed sum of the two distances\n      var n = subdivisions.length;\n      var subdivisionSize = n ? 1 / n : 0;\n      for (var i = 0; i < n; i++) {\n        var currentSubdivision = subdivisions[i];\n        var startDist = currentSubdivision.start.distance(p);\n        var endDist = currentSubdivision.end.distance(p);\n        var sumDist = startDist + endDist;\n\n        // check that the point is closest to current subdivision and not any other\n        if (!minSumDist || sumDist < minSumDist) {\n          investigatedSubdivision = currentSubdivision;\n          investigatedSubdivisionStartT = i * subdivisionSize;\n          investigatedSubdivisionEndT = (i + 1) * subdivisionSize;\n          distFromStart = startDist;\n          distFromEnd = endDist;\n          chordLength = currentSubdivision.start.distance(currentSubdivision.end);\n          minSumDist = sumDist;\n        }\n      }\n      var precisionRatio = pow$3(10, -precision);\n\n      // recursively divide investigated subdivision:\n      // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n      // then return the closest endpoint of that final subdivision\n      while (true) {\n        // check if we have reached at least one required observed precision\n        // - calculated as: the difference in distances from point to start and end divided by the distance\n        // - note that this function is not monotonic = it doesn't converge stably but has \"teeth\"\n        // - the function decreases while one of the endpoints is fixed but \"jumps\" whenever we switch\n        // - this criterion works well for points lying far away from the curve\n        var startPrecisionRatio = distFromStart ? abs$2(distFromStart - distFromEnd) / distFromStart : 0;\n        var endPrecisionRatio = distFromEnd ? abs$2(distFromStart - distFromEnd) / distFromEnd : 0;\n        var hasRequiredPrecision = startPrecisionRatio < precisionRatio || endPrecisionRatio < precisionRatio;\n\n        // check if we have reached at least one required minimal distance\n        // - calculated as: the subdivision chord length multiplied by precisionRatio\n        // - calculation is relative so it will work for arbitrarily large/small curves and their subdivisions\n        // - this is a backup criterion that works well for points lying \"almost at\" the curve\n        var hasMinimalStartDistance = distFromStart ? distFromStart < chordLength * precisionRatio : true;\n        var hasMinimalEndDistance = distFromEnd ? distFromEnd < chordLength * precisionRatio : true;\n        var hasMinimalDistance = hasMinimalStartDistance || hasMinimalEndDistance;\n\n        // do we stop now?\n        if (hasRequiredPrecision || hasMinimalDistance) {\n          return distFromStart <= distFromEnd ? investigatedSubdivisionStartT : investigatedSubdivisionEndT;\n        }\n\n        // otherwise, set up for next iteration\n        var divided = investigatedSubdivision.divide(0.5);\n        subdivisionSize /= 2;\n        var startDist1 = divided[0].start.distance(p);\n        var endDist1 = divided[0].end.distance(p);\n        var sumDist1 = startDist1 + endDist1;\n        var startDist2 = divided[1].start.distance(p);\n        var endDist2 = divided[1].end.distance(p);\n        var sumDist2 = startDist2 + endDist2;\n        if (sumDist1 <= sumDist2) {\n          investigatedSubdivision = divided[0];\n          investigatedSubdivisionEndT -= subdivisionSize; // subdivisionSize was already halved\n\n          distFromStart = startDist1;\n          distFromEnd = endDist1;\n        } else {\n          investigatedSubdivision = divided[1];\n          investigatedSubdivisionStartT += subdivisionSize; // subdivisionSize was already halved\n\n          distFromStart = startDist2;\n          distFromEnd = endDist2;\n        }\n      }\n    },\n    closestPointTangent: function (p, opt) {\n      return this.tangentAtT(this.closestPointT(p, opt));\n    },\n    // Returns `true` if the area surrounded by the curve contains the point `p`.\n    // Implements the even-odd algorithm (self-intersections are \"outside\").\n    // Closes open curves (always imagines a closing segment).\n    // Precision may be adjusted by passing an `opt` object.\n    containsPoint: function (p, opt) {\n      var polyline = this.toPolyline(opt);\n      return polyline.containsPoint(p);\n    },\n    // Divides the curve into two at requested `ratio` between 0 and 1 with precision better than `opt.precision`; optionally using `opt.subdivisions` provided.\n    // For a function that uses `t`, use Curve.divideAtT().\n    divideAt: function (ratio, opt) {\n      if (ratio <= 0) {\n        return this.divideAtT(0);\n      }\n      if (ratio >= 1) {\n        return this.divideAtT(1);\n      }\n      var t = this.tAt(ratio, opt);\n      return this.divideAtT(t);\n    },\n    // Divides the curve into two at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    divideAtLength: function (length, opt) {\n      var t = this.tAtLength(length, opt);\n      return this.divideAtT(t);\n    },\n    // Divides the curve into two at point defined by `t` between 0 and 1.\n    // Using de Casteljau's algorithm (http://math.stackexchange.com/a/317867).\n    // Additional resource: https://pomax.github.io/bezierinfo/#decasteljau\n    divideAtT: function (t) {\n      var start = this.start;\n      var controlPoint1 = this.controlPoint1;\n      var controlPoint2 = this.controlPoint2;\n      var end = this.end;\n\n      // shortcuts for `t` values that are out of range\n      if (t <= 0) {\n        return [new Curve(start, start, start, start), new Curve(start, controlPoint1, controlPoint2, end)];\n      }\n      if (t >= 1) {\n        return [new Curve(start, controlPoint1, controlPoint2, end), new Curve(end, end, end, end)];\n      }\n      var dividerPoints = this.getSkeletonPoints(t);\n      var startControl1 = dividerPoints.startControlPoint1;\n      var startControl2 = dividerPoints.startControlPoint2;\n      var divider = dividerPoints.divider;\n      var dividerControl1 = dividerPoints.dividerControlPoint1;\n      var dividerControl2 = dividerPoints.dividerControlPoint2;\n\n      // return array with two new curves\n      return [new Curve(start, startControl1, startControl2, divider), new Curve(divider, dividerControl1, dividerControl2, end)];\n    },\n    // Returns the distance between the curve's start and end points.\n    endpointDistance: function () {\n      return this.start.distance(this.end);\n    },\n    // Checks whether two curves are exactly the same.\n    equals: function (c) {\n      return !!c && this.start.x === c.start.x && this.start.y === c.start.y && this.controlPoint1.x === c.controlPoint1.x && this.controlPoint1.y === c.controlPoint1.y && this.controlPoint2.x === c.controlPoint2.x && this.controlPoint2.y === c.controlPoint2.y && this.end.x === c.end.x && this.end.y === c.end.y;\n    },\n    // Returns five helper points necessary for curve division.\n    getSkeletonPoints: function (t) {\n      var start = this.start;\n      var control1 = this.controlPoint1;\n      var control2 = this.controlPoint2;\n      var end = this.end;\n\n      // shortcuts for `t` values that are out of range\n      if (t <= 0) {\n        return {\n          startControlPoint1: start.clone(),\n          startControlPoint2: start.clone(),\n          divider: start.clone(),\n          dividerControlPoint1: control1.clone(),\n          dividerControlPoint2: control2.clone()\n        };\n      }\n      if (t >= 1) {\n        return {\n          startControlPoint1: control1.clone(),\n          startControlPoint2: control2.clone(),\n          divider: end.clone(),\n          dividerControlPoint1: end.clone(),\n          dividerControlPoint2: end.clone()\n        };\n      }\n      var midpoint1 = new Line(start, control1).pointAt(t);\n      var midpoint2 = new Line(control1, control2).pointAt(t);\n      var midpoint3 = new Line(control2, end).pointAt(t);\n      var subControl1 = new Line(midpoint1, midpoint2).pointAt(t);\n      var subControl2 = new Line(midpoint2, midpoint3).pointAt(t);\n      var divider = new Line(subControl1, subControl2).pointAt(t);\n      var output = {\n        startControlPoint1: midpoint1,\n        startControlPoint2: subControl1,\n        divider: divider,\n        dividerControlPoint1: subControl2,\n        dividerControlPoint2: midpoint3\n      };\n      return output;\n    },\n    // Returns a list of curves whose flattened length is better than `opt.precision`.\n    // That is, observed difference in length between recursions is less than 10^(-3) = 0.001 = 0.1%\n    // (Observed difference is not real precision, but close enough as long as special cases are covered)\n    // As a rule of thumb, increasing `precision` by 1 requires 2 more iterations (= levels of division operations)\n    // - Precision 0 (endpointDistance) - 0 iterations => total of 2^0 - 1 = 0 operations (1 subdivision)\n    // - Precision 1 (<10% error) - 2 iterations => total of 2^2 - 1 = 3 operations (4 subdivisions)\n    // - Precision 2 (<1% error) - 4 iterations => total of 2^4 - 1 = 15 operations requires 4 division operations on all elements (15 operations total) (16 subdivisions)\n    // - Precision 3 (<0.1% error) - 6 iterations => total of 2^6 - 1 = 63 operations - acceptable when drawing (64 subdivisions)\n    // - Precision 4 (<0.01% error) - 8 iterations => total of 2^8 - 1 = 255 operations - high resolution, can be used to interpolate `t` (256 subdivisions)\n    // (Variation of 1 recursion worse or better is possible depending on the curve, doubling/halving the number of operations accordingly)\n    getSubdivisions: function (opt) {\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      // not using opt.subdivisions\n      // not using localOpt\n\n      var start = this.start;\n      var control1 = this.controlPoint1;\n      var control2 = this.controlPoint2;\n      var end = this.end;\n      var subdivisions = [new Curve(start, control1, control2, end)];\n      if (precision === 0) {\n        return subdivisions;\n      }\n\n      // special case #1: point-like curves\n      // - no need to calculate subdivisions, they would all be identical\n      var isPoint = !this.isDifferentiable();\n      if (isPoint) {\n        return subdivisions;\n      }\n      var previousLength = this.endpointDistance();\n      var precisionRatio = pow$3(10, -precision);\n\n      // special case #2: sine-like curves may have the same observed length in iteration 0 and 1 - skip iteration 1\n      // - not a problem for further iterations because cubic curves cannot have more than two local extrema\n      // - (i.e. cubic curves cannot intersect the baseline more than once)\n      // - therefore starting from iteration = 2 ensures that subsequent iterations do not produce sampling with equal length\n      // - (unless it's a straight-line curve, see below)\n      var minIterations = 2; // = 2*1\n\n      // special case #3: straight-line curves have the same observed length in all iterations\n      // - this causes observed precision ratio to always be 0 (= lower than `precisionRatio`, which is our exit condition)\n      // - we enforce the expected number of iterations = 2 * precision\n      var isLine = control1.cross(start, end) === 0 && control2.cross(start, end) === 0;\n      if (isLine) {\n        minIterations = 2 * precision;\n      }\n\n      // recursively divide curve at `t = 0.5`\n      // until we reach `minIterations`\n      // and until the difference between observed length at subsequent iterations is lower than `precision`\n      var iteration = 0;\n      while (true) {\n        iteration += 1;\n\n        // divide all subdivisions\n        var newSubdivisions = [];\n        var numSubdivisions = subdivisions.length;\n        for (var i = 0; i < numSubdivisions; i++) {\n          var currentSubdivision = subdivisions[i];\n          var divided = currentSubdivision.divide(0.5); // dividing at t = 0.5 (not at middle length!)\n          newSubdivisions.push(divided[0], divided[1]);\n        }\n\n        // measure new length\n        var length = 0;\n        var numNewSubdivisions = newSubdivisions.length;\n        for (var j = 0; j < numNewSubdivisions; j++) {\n          var currentNewSubdivision = newSubdivisions[j];\n          length += currentNewSubdivision.endpointDistance();\n        }\n\n        // check if we have reached minimum number of iterations\n        if (iteration >= minIterations) {\n          // check if we have reached required observed precision\n          var observedPrecisionRatio = length !== 0 ? (length - previousLength) / length : 0;\n          if (observedPrecisionRatio < precisionRatio) {\n            return newSubdivisions;\n          }\n        }\n\n        // otherwise, set up for next iteration\n        subdivisions = newSubdivisions;\n        previousLength = length;\n      }\n    },\n    isDifferentiable: function () {\n      var start = this.start;\n      var control1 = this.controlPoint1;\n      var control2 = this.controlPoint2;\n      var end = this.end;\n      return !(start.equals(control1) && control1.equals(control2) && control2.equals(end));\n    },\n    // Returns flattened length of the curve with precision better than `opt.precision`; or using `opt.subdivisions` provided.\n    length: function (opt) {\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision; // opt.precision only used in getSubdivisions() call\n      var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n        precision: precision\n      }) : opt.subdivisions;\n      // not using localOpt\n\n      var length = 0;\n      var n = subdivisions.length;\n      for (var i = 0; i < n; i++) {\n        var currentSubdivision = subdivisions[i];\n        length += currentSubdivision.endpointDistance();\n      }\n      return length;\n    },\n    // Returns distance along the curve up to `t` with precision better than requested `opt.precision`. (Not using `opt.subdivisions`.)\n    lengthAtT: function (t, opt) {\n      if (t <= 0) {\n        return 0;\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      // not using opt.subdivisions\n      // not using localOpt\n\n      var subCurve = this.divide(t)[0];\n      var subCurveLength = subCurve.length({\n        precision: precision\n      });\n      return subCurveLength;\n    },\n    // Returns point at requested `ratio` between 0 and 1 with precision better than `opt.precision`; optionally using `opt.subdivisions` provided.\n    // Mirrors Line.pointAt() function.\n    // For a function that tracks `t`, use Curve.pointAtT().\n    pointAt: function (ratio, opt) {\n      if (ratio <= 0) {\n        return this.start.clone();\n      }\n      if (ratio >= 1) {\n        return this.end.clone();\n      }\n      var t = this.tAt(ratio, opt);\n      return this.pointAtT(t);\n    },\n    // Returns point at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    pointAtLength: function (length, opt) {\n      var t = this.tAtLength(length, opt);\n      return this.pointAtT(t);\n    },\n    // Returns the point at provided `t` between 0 and 1.\n    // `t` does not track distance along curve as it does in Line objects.\n    // Non-linear relationship, speeds up and slows down as curve warps!\n    // For linear length-based solution, use Curve.pointAt().\n    pointAtT: function (t) {\n      if (t <= 0) {\n        return this.start.clone();\n      }\n      if (t >= 1) {\n        return this.end.clone();\n      }\n      return this.getSkeletonPoints(t).divider;\n    },\n    // Default precision\n    PRECISION: 3,\n    round: function (precision) {\n      this.start.round(precision);\n      this.controlPoint1.round(precision);\n      this.controlPoint2.round(precision);\n      this.end.round(precision);\n      return this;\n    },\n    scale: function (sx, sy, origin) {\n      this.start.scale(sx, sy, origin);\n      this.controlPoint1.scale(sx, sy, origin);\n      this.controlPoint2.scale(sx, sy, origin);\n      this.end.scale(sx, sy, origin);\n      return this;\n    },\n    // Returns a tangent line at requested `ratio` with precision better than requested `opt.precision`; or using `opt.subdivisions` provided.\n    tangentAt: function (ratio, opt) {\n      if (!this.isDifferentiable()) {\n        return null;\n      }\n      if (ratio < 0) {\n        ratio = 0;\n      } else if (ratio > 1) {\n        ratio = 1;\n      }\n      var t = this.tAt(ratio, opt);\n      return this.tangentAtT(t);\n    },\n    // Returns a tangent line at requested `length` with precision better than requested `opt.precision`; or using `opt.subdivisions` provided.\n    tangentAtLength: function (length, opt) {\n      if (!this.isDifferentiable()) {\n        return null;\n      }\n      var t = this.tAtLength(length, opt);\n      return this.tangentAtT(t);\n    },\n    // Returns a tangent line at requested `t`.\n    tangentAtT: function (t) {\n      if (!this.isDifferentiable()) {\n        return null;\n      }\n      if (t < 0) {\n        t = 0;\n      } else if (t > 1) {\n        t = 1;\n      }\n      var skeletonPoints = this.getSkeletonPoints(t);\n      var p1 = skeletonPoints.startControlPoint2;\n      var p2 = skeletonPoints.dividerControlPoint1;\n      var tangentStart = skeletonPoints.divider;\n      var tangentLine = new Line(p1, p2);\n      tangentLine.translate(tangentStart.x - p1.x, tangentStart.y - p1.y); // move so that tangent line starts at the point requested\n\n      return tangentLine;\n    },\n    // Returns `t` at requested `ratio` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    tAt: function (ratio, opt) {\n      if (ratio <= 0) {\n        return 0;\n      }\n      if (ratio >= 1) {\n        return 1;\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n        precision: precision\n      }) : opt.subdivisions;\n      var localOpt = {\n        precision: precision,\n        subdivisions: subdivisions\n      };\n      var curveLength = this.length(localOpt);\n      var length = curveLength * ratio;\n      return this.tAtLength(length, localOpt);\n    },\n    // Returns `t` at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    // Uses `precision` to approximate length within `precision` (always underestimates)\n    // Then uses a binary search to find the `t` of a subdivision endpoint that is close (within `precision`) to the `length`, if the curve was as long as approximated\n    // As a rule of thumb, increasing `precision` by 1 causes the algorithm to go 2^(precision - 1) deeper\n    // - Precision 0 (chooses one of the two endpoints) - 0 levels\n    // - Precision 1 (chooses one of 5 points, <10% error) - 1 level\n    // - Precision 2 (<1% error) - 3 levels\n    // - Precision 3 (<0.1% error) - 7 levels\n    // - Precision 4 (<0.01% error) - 15 levels\n    tAtLength: function (length, opt) {\n      var fromStart = true;\n      if (length < 0) {\n        fromStart = false; // negative lengths mean start calculation from end point\n        length = -length; // absolute value\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n        precision: precision\n      }) : opt.subdivisions;\n      var localOpt = {\n        precision: precision,\n        subdivisions: subdivisions\n      };\n\n      // identify the subdivision that contains the point at requested `length`:\n      var investigatedSubdivision;\n      var investigatedSubdivisionStartT; // assume that subdivisions are evenly spaced\n      var investigatedSubdivisionEndT;\n      //var baseline; // straightened version of subdivision to investigate\n      //var baselinePoint; // point on the baseline that is the requested distance away from start\n      var baselinePointDistFromStart; // distance of baselinePoint from start of baseline\n      var baselinePointDistFromEnd; // distance of baselinePoint from end of baseline\n      var l = 0; // length so far\n      var n = subdivisions.length;\n      var subdivisionSize = 1 / n;\n      for (var i = 0; i < n; i++) {\n        var index = fromStart ? i : n - 1 - i;\n        var currentSubdivision = subdivisions[i];\n        var d = currentSubdivision.endpointDistance(); // length of current subdivision\n\n        if (length <= l + d) {\n          investigatedSubdivision = currentSubdivision;\n          investigatedSubdivisionStartT = index * subdivisionSize;\n          investigatedSubdivisionEndT = (index + 1) * subdivisionSize;\n          baselinePointDistFromStart = fromStart ? length - l : d + l - length;\n          baselinePointDistFromEnd = fromStart ? d + l - length : length - l;\n          break;\n        }\n        l += d;\n      }\n      if (!investigatedSubdivision) {\n        return fromStart ? 1 : 0;\n      } // length requested is out of range - return maximum t\n      // note that precision affects what length is recorded\n      // (imprecise measurements underestimate length by up to 10^(-precision) of the precise length)\n      // e.g. at precision 1, the length may be underestimated by up to 10% and cause this function to return 1\n\n      var curveLength = this.length(localOpt);\n      var precisionRatio = pow$3(10, -precision);\n\n      // recursively divide investigated subdivision:\n      // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n      // then return the closest endpoint of that final subdivision\n      while (true) {\n        // check if we have reached required observed precision\n        var observedPrecisionRatio;\n        observedPrecisionRatio = curveLength !== 0 ? baselinePointDistFromStart / curveLength : 0;\n        if (observedPrecisionRatio < precisionRatio) {\n          return investigatedSubdivisionStartT;\n        }\n        observedPrecisionRatio = curveLength !== 0 ? baselinePointDistFromEnd / curveLength : 0;\n        if (observedPrecisionRatio < precisionRatio) {\n          return investigatedSubdivisionEndT;\n        }\n\n        // otherwise, set up for next iteration\n        var newBaselinePointDistFromStart;\n        var newBaselinePointDistFromEnd;\n        var divided = investigatedSubdivision.divide(0.5);\n        subdivisionSize /= 2;\n        var baseline1Length = divided[0].endpointDistance();\n        var baseline2Length = divided[1].endpointDistance();\n        if (baselinePointDistFromStart <= baseline1Length) {\n          // point at requested length is inside divided[0]\n          investigatedSubdivision = divided[0];\n          investigatedSubdivisionEndT -= subdivisionSize; // sudivisionSize was already halved\n\n          newBaselinePointDistFromStart = baselinePointDistFromStart;\n          newBaselinePointDistFromEnd = baseline1Length - newBaselinePointDistFromStart;\n        } else {\n          // point at requested length is inside divided[1]\n          investigatedSubdivision = divided[1];\n          investigatedSubdivisionStartT += subdivisionSize; // subdivisionSize was already halved\n\n          newBaselinePointDistFromStart = baselinePointDistFromStart - baseline1Length;\n          newBaselinePointDistFromEnd = baseline2Length - newBaselinePointDistFromStart;\n        }\n        baselinePointDistFromStart = newBaselinePointDistFromStart;\n        baselinePointDistFromEnd = newBaselinePointDistFromEnd;\n      }\n    },\n    // Returns an array of points that represents the curve when flattened, up to `opt.precision`; or using `opt.subdivisions` provided.\n    // Flattened length is no more than 10^(-precision) away from real curve length.\n    toPoints: function (opt) {\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision; // opt.precision only used in getSubdivisions() call\n      var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n        precision: precision\n      }) : opt.subdivisions;\n      // not using localOpt\n\n      var points = [subdivisions[0].start.clone()];\n      var n = subdivisions.length;\n      for (var i = 0; i < n; i++) {\n        var currentSubdivision = subdivisions[i];\n        points.push(currentSubdivision.end.clone());\n      }\n      return points;\n    },\n    // Returns a polyline that represents the curve when flattened, up to `opt.precision`; or using `opt.subdivisions` provided.\n    // Flattened length is no more than 10^(-precision) away from real curve length.\n    toPolyline: function (opt) {\n      return new Polyline(this.toPoints(opt));\n    },\n    toString: function () {\n      return this.start + ' ' + this.controlPoint1 + ' ' + this.controlPoint2 + ' ' + this.end;\n    },\n    translate: function (tx, ty) {\n      this.start.translate(tx, ty);\n      this.controlPoint1.translate(tx, ty);\n      this.controlPoint2.translate(tx, ty);\n      this.end.translate(tx, ty);\n      return this;\n    }\n  };\n  Curve.prototype.divide = Curve.prototype.divideAtT;\n\n  // Local helper function.\n  // Add properties from arguments on top of properties from `obj`.\n  // This allows for rudimentary inheritance.\n  // - The `obj` argument acts as parent.\n  // - This function creates a new object that inherits all `obj` properties and adds/replaces those that are present in arguments.\n  // - A high-level example: calling `extend(Vehicle, Car)` would be akin to declaring `class Car extends Vehicle`.\n  function extend(obj) {\n    var arguments$1 = arguments;\n\n    // In JavaScript, the combination of a constructor function (e.g. `g.Line = function(...) {...}`) and prototype (e.g. `g.Line.prototype = {...}) is akin to a C++ class.\n    // - When inheritance is not necessary, we can leave it at that. (This would be akin to calling extend with only `obj`.)\n    // - But, what if we wanted the `g.Line` quasiclass to inherit from another quasiclass (let's call it `g.GeometryObject`) in JavaScript?\n    // - First, realize that both of those quasiclasses would still have their own separate constructor function.\n    // - So what we are actually saying is that we want the `g.Line` prototype to inherit from `g.GeometryObject` prototype.\n    // - This method provides a way to do exactly that.\n    // - It copies parent prototype's properties, then adds extra ones from child prototype/overrides parent prototype properties with child prototype properties.\n    // - Therefore, to continue with the example above:\n    //   - `g.Line.prototype = extend(g.GeometryObject.prototype, linePrototype)`\n    //   - Where `linePrototype` is a properties object that looks just like `g.Line.prototype` does right now.\n    //   - Then, `g.Line` would allow the programmer to access to all methods currently in `g.Line.Prototype`, plus any non-overridden methods from `g.GeometryObject.prototype`.\n    //   - In that aspect, `g.GeometryObject` would then act like the parent of `g.Line`.\n    // - Multiple inheritance is also possible, if multiple arguments are provided.\n    // - What if we wanted to add another level of abstraction between `g.GeometryObject` and `g.Line` (let's call it `g.LinearObject`)?\n    //   - `g.Line.prototype = extend(g.GeometryObject.prototype, g.LinearObject.prototype, linePrototype)`\n    //   - The ancestors are applied in order of appearance.\n    //   - That means that `g.Line` would have inherited from `g.LinearObject` that would have inherited from `g.GeometryObject`.\n    //   - Any number of ancestors may be provided.\n    // - Note that neither `obj` nor any of the arguments need to actually be prototypes of any JavaScript quasiclass, that was just a simplified explanation.\n    // - We can create a new object composed from the properties of any number of other objects (since they do not have a constructor, we can think of those as interfaces).\n    //   - `extend({ a: 1, b: 2 }, { b: 10, c: 20 }, { c: 100, d: 200 })` gives `{ a: 1, b: 10, c: 100, d: 200 }`.\n    //   - Basically, with this function, we can emulate the `extends` keyword as well as the `implements` keyword.\n    // - Therefore, both of the following are valid:\n    //   - `Lineto.prototype = extend(Line.prototype, segmentPrototype, linetoPrototype)`\n    //   - `Moveto.prototype = extend(segmentPrototype, movetoPrototype)`\n\n    var i;\n    var n;\n    var args = [];\n    n = arguments.length;\n    for (i = 1; i < n; i++) {\n      // skip over obj\n      args.push(arguments$1[i]);\n    }\n    if (!obj) {\n      throw new Error('Missing a parent object.');\n    }\n    var child = Object.create(obj);\n    n = args.length;\n    for (i = 0; i < n; i++) {\n      var src = args[i];\n      var inheritedProperty;\n      var key;\n      for (key in src) {\n        if (src.hasOwnProperty(key)) {\n          delete child[key]; // delete property inherited from parent\n          inheritedProperty = Object.getOwnPropertyDescriptor(src, key); // get new definition of property from src\n          Object.defineProperty(child, key, inheritedProperty); // re-add property with new definition (includes getter/setter methods)\n        }\n      }\n    }\n    return child;\n  }\n\n  // Accepts path data string, array of segments, array of Curves and/or Lines, or a Polyline.\n  var Path = function (arg) {\n    if (!(this instanceof Path)) {\n      return new Path(arg);\n    }\n    if (typeof arg === 'string') {\n      // create from a path data string\n      return new Path.parse(arg);\n    }\n    this.segments = [];\n    var i;\n    var n;\n    if (!arg) {\n      // don't do anything\n    } else if (Array.isArray(arg) && arg.length !== 0) {\n      // if arg is a non-empty array\n      // flatten one level deep\n      // so we can chain arbitrary Path.createSegment results\n      arg = arg.reduce(function (acc, val) {\n        return acc.concat(val);\n      }, []);\n      n = arg.length;\n      if (arg[0].isSegment) {\n        // create from an array of segments\n        for (i = 0; i < n; i++) {\n          var segment = arg[i];\n          this.appendSegment(segment);\n        }\n      } else {\n        // create from an array of Curves and/or Lines\n        var previousObj = null;\n        for (i = 0; i < n; i++) {\n          var obj = arg[i];\n          if (!(obj instanceof Line || obj instanceof Curve)) {\n            throw new Error('Cannot construct a path segment from the provided object.');\n          }\n          if (i === 0) {\n            this.appendSegment(Path.createSegment('M', obj.start));\n          }\n\n          // if objects do not link up, moveto segments are inserted to cover the gaps\n          if (previousObj && !previousObj.end.equals(obj.start)) {\n            this.appendSegment(Path.createSegment('M', obj.start));\n          }\n          if (obj instanceof Line) {\n            this.appendSegment(Path.createSegment('L', obj.end));\n          } else if (obj instanceof Curve) {\n            this.appendSegment(Path.createSegment('C', obj.controlPoint1, obj.controlPoint2, obj.end));\n          }\n          previousObj = obj;\n        }\n      }\n    } else if (arg.isSegment) {\n      // create from a single segment\n      this.appendSegment(arg);\n    } else if (arg instanceof Line) {\n      // create from a single Line\n      this.appendSegment(Path.createSegment('M', arg.start));\n      this.appendSegment(Path.createSegment('L', arg.end));\n    } else if (arg instanceof Curve) {\n      // create from a single Curve\n      this.appendSegment(Path.createSegment('M', arg.start));\n      this.appendSegment(Path.createSegment('C', arg.controlPoint1, arg.controlPoint2, arg.end));\n    } else if (arg instanceof Polyline) {\n      // create from a Polyline\n      if (!(arg.points && arg.points.length !== 0)) {\n        return;\n      } // if Polyline has no points, leave Path empty\n\n      n = arg.points.length;\n      for (i = 0; i < n; i++) {\n        var point = arg.points[i];\n        if (i === 0) {\n          this.appendSegment(Path.createSegment('M', point));\n        } else {\n          this.appendSegment(Path.createSegment('L', point));\n        }\n      }\n    } else {\n      // unknown object\n      throw new Error('Cannot construct a path from the provided object.');\n    }\n  };\n\n  // More permissive than V.normalizePathData and Path.prototype.serialize.\n  // Allows path data strings that do not start with a Moveto command (unlike SVG specification).\n  // Does not require spaces between elements; commas are allowed, separators may be omitted when unambiguous (e.g. 'ZM10,10', 'L1.6.8', 'M100-200').\n  // Allows for command argument chaining.\n  // Throws an error if wrong number of arguments is provided with a command.\n  // Throws an error if an unrecognized path command is provided (according to Path.segmentTypes). Only a subset of SVG commands is currently supported (L, C, M, Z).\n  Path.parse = function (pathData) {\n    if (!pathData) {\n      return new Path();\n    }\n    var path = new Path();\n    var commandRe = /(?:[a-zA-Z] *)(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)? *,? *)|(?:-?\\.\\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\\d|-|\\.)/g;\n    var commands = pathData.match(commandRe);\n    var numCommands = commands.length;\n    for (var i = 0; i < numCommands; i++) {\n      var command = commands[i];\n      var argRe = /(?:[a-zA-Z])|(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))|(?:(?:-?\\.\\d+))/g;\n      var args = command.match(argRe);\n      var segment = Path.createSegment.apply(this, args); // args = [type, coordinate1, coordinate2...]\n      path.appendSegment(segment);\n    }\n    return path;\n  };\n\n  // Create a segment or an array of segments.\n  // Accepts unlimited points/coords arguments after `type`.\n  Path.createSegment = function (type) {\n    var arguments$1 = arguments;\n    if (!type) {\n      throw new Error('Type must be provided.');\n    }\n    var segmentConstructor = Path.segmentTypes[type];\n    if (!segmentConstructor) {\n      throw new Error(type + ' is not a recognized path segment type.');\n    }\n    var args = [];\n    var n = arguments.length;\n    for (var i = 1; i < n; i++) {\n      // do not add first element (`type`) to args array\n      args.push(arguments$1[i]);\n    }\n    return applyToNew(segmentConstructor, args);\n  };\n  Path.prototype = {\n    type: types.Path,\n    // Accepts one segment or an array of segments as argument.\n    // Throws an error if argument is not a segment or an array of segments.\n    appendSegment: function (arg) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      // works even if path has no segments\n\n      var currentSegment;\n      var previousSegment = numSegments !== 0 ? segments[numSegments - 1] : null; // if we are appending to an empty path, previousSegment is null\n      var nextSegment = null;\n      if (!Array.isArray(arg)) {\n        // arg is a segment\n        if (!arg || !arg.isSegment) {\n          throw new Error('Segment required.');\n        }\n        currentSegment = this.prepareSegment(arg, previousSegment, nextSegment);\n        segments.push(currentSegment);\n      } else {\n        // arg is an array of segments\n        // flatten one level deep\n        // so we can chain arbitrary Path.createSegment results\n        arg = arg.reduce(function (acc, val) {\n          return acc.concat(val);\n        }, []);\n        if (!arg[0].isSegment) {\n          throw new Error('Segments required.');\n        }\n        var n = arg.length;\n        for (var i = 0; i < n; i++) {\n          var currentArg = arg[i];\n          currentSegment = this.prepareSegment(currentArg, previousSegment, nextSegment);\n          segments.push(currentSegment);\n          previousSegment = currentSegment;\n        }\n      }\n    },\n    // Returns the bbox of the path.\n    // If path has no segments, returns null.\n    // If path has only invisible segments, returns bbox of the end point of last segment.\n    bbox: function () {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      var bbox;\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        if (segment.isVisible) {\n          var segmentBBox = segment.bbox();\n          bbox = bbox ? bbox.union(segmentBBox) : segmentBBox;\n        }\n      }\n      if (bbox) {\n        return bbox;\n      }\n\n      // if the path has only invisible elements, return end point of last segment\n      var lastSegment = segments[numSegments - 1];\n      return new Rect(lastSegment.end.x, lastSegment.end.y, 0, 0);\n    },\n    // Returns a new path that is a clone of this path.\n    clone: function () {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      // works even if path has no segments\n\n      var path = new Path();\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i].clone();\n        path.appendSegment(segment);\n      }\n      return path;\n    },\n    closestPoint: function (p, opt) {\n      var t = this.closestPointT(p, opt);\n      if (!t) {\n        return null;\n      }\n      return this.pointAtT(t);\n    },\n    closestPointLength: function (p, opt) {\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      var localOpt = {\n        precision: precision,\n        segmentSubdivisions: segmentSubdivisions\n      };\n      var t = this.closestPointT(p, localOpt);\n      if (!t) {\n        return 0;\n      }\n      return this.lengthAtT(t, localOpt);\n    },\n    closestPointNormalizedLength: function (p, opt) {\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      var localOpt = {\n        precision: precision,\n        segmentSubdivisions: segmentSubdivisions\n      };\n      var cpLength = this.closestPointLength(p, localOpt);\n      if (cpLength === 0) {\n        return 0;\n      } // shortcut\n\n      var length = this.length(localOpt);\n      if (length === 0) {\n        return 0;\n      } // prevents division by zero\n\n      return cpLength / length;\n    },\n    // Private function.\n    closestPointT: function (p, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      // not using localOpt\n\n      var closestPointT;\n      var minSquaredDistance = Infinity;\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        var subdivisions = segmentSubdivisions[i];\n        if (segment.isVisible) {\n          var segmentClosestPointT = segment.closestPointT(p, {\n            precision: precision,\n            subdivisions: subdivisions\n          });\n          var segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n          var squaredDistance = new Line(segmentClosestPoint, p).squaredLength();\n          if (squaredDistance < minSquaredDistance) {\n            closestPointT = {\n              segmentIndex: i,\n              value: segmentClosestPointT\n            };\n            minSquaredDistance = squaredDistance;\n          }\n        }\n      }\n      if (closestPointT) {\n        return closestPointT;\n      }\n\n      // if no visible segment, return end of last segment\n      return {\n        segmentIndex: numSegments - 1,\n        value: 1\n      };\n    },\n    closestPointTangent: function (p, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      // not using localOpt\n\n      var closestPointTangent;\n      var minSquaredDistance = Infinity;\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        var subdivisions = segmentSubdivisions[i];\n        if (segment.isDifferentiable()) {\n          var segmentClosestPointT = segment.closestPointT(p, {\n            precision: precision,\n            subdivisions: subdivisions\n          });\n          var segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n          var squaredDistance = new Line(segmentClosestPoint, p).squaredLength();\n          if (squaredDistance < minSquaredDistance) {\n            closestPointTangent = segment.tangentAtT(segmentClosestPointT);\n            minSquaredDistance = squaredDistance;\n          }\n        }\n      }\n      if (closestPointTangent) {\n        return closestPointTangent;\n      }\n\n      // if no valid segment, return null\n      return null;\n    },\n    // Returns `true` if the area surrounded by the path contains the point `p`.\n    // Implements the even-odd algorithm (self-intersections are \"outside\").\n    // Closes open paths (always imagines a final closing segment).\n    // Precision may be adjusted by passing an `opt` object.\n    containsPoint: function (p, opt) {\n      var polylines = this.toPolylines(opt);\n      if (!polylines) {\n        return false;\n      } // shortcut (this path has no polylines)\n\n      var numPolylines = polylines.length;\n\n      // how many component polylines does `p` lie within?\n      var numIntersections = 0;\n      for (var i = 0; i < numPolylines; i++) {\n        var polyline = polylines[i];\n        if (polyline.containsPoint(p)) {\n          // `p` lies within this polyline\n          numIntersections++;\n        }\n      }\n\n      // returns `true` for odd numbers of intersections (even-odd algorithm)\n      return numIntersections % 2 === 1;\n    },\n    // Divides the path into two at requested `ratio` between 0 and 1 with precision better than `opt.precision`; optionally using `opt.subdivisions` provided.\n    divideAt: function (ratio, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      if (ratio < 0) {\n        ratio = 0;\n      }\n      if (ratio > 1) {\n        ratio = 1;\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      var localOpt = {\n        precision: precision,\n        segmentSubdivisions: segmentSubdivisions\n      };\n      var pathLength = this.length(localOpt);\n      var length = pathLength * ratio;\n      return this.divideAtLength(length, localOpt);\n    },\n    // Divides the path into two at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    divideAtLength: function (length, opt) {\n      var numSegments = this.segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      var fromStart = true;\n      if (length < 0) {\n        fromStart = false; // negative lengths mean start calculation from end point\n        length = -length; // absolute value\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      // not using localOpt\n\n      var i;\n      var segment;\n\n      // identify the segment to divide:\n\n      var l = 0; // length so far\n      var divided;\n      var dividedSegmentIndex;\n      var lastValidSegment; // visible AND differentiable\n      var lastValidSegmentIndex;\n      var t;\n      for (i = 0; i < numSegments; i++) {\n        var index = fromStart ? i : numSegments - 1 - i;\n        segment = this.getSegment(index);\n        var subdivisions = segmentSubdivisions[index];\n        var d = segment.length({\n          precision: precision,\n          subdivisions: subdivisions\n        });\n        if (segment.isDifferentiable()) {\n          // segment is not just a point\n          lastValidSegment = segment;\n          lastValidSegmentIndex = index;\n          if (length <= l + d) {\n            dividedSegmentIndex = index;\n            divided = segment.divideAtLength((fromStart ? 1 : -1) * (length - l), {\n              precision: precision,\n              subdivisions: subdivisions\n            });\n            break;\n          }\n        }\n        l += d;\n      }\n      if (!lastValidSegment) {\n        // no valid segment found\n        return null;\n      }\n\n      // else: the path contains at least one valid segment\n\n      if (!divided) {\n        // the desired length is greater than the length of the path\n        dividedSegmentIndex = lastValidSegmentIndex;\n        t = fromStart ? 1 : 0;\n        divided = lastValidSegment.divideAtT(t);\n      }\n\n      // create a copy of this path and replace the identified segment with its two divided parts:\n\n      var pathCopy = this.clone();\n      pathCopy.replaceSegment(dividedSegmentIndex, divided);\n      var divisionStartIndex = dividedSegmentIndex;\n      var divisionMidIndex = dividedSegmentIndex + 1;\n      var divisionEndIndex = dividedSegmentIndex + 2;\n\n      // do not insert the part if it looks like a point\n      if (!divided[0].isDifferentiable()) {\n        pathCopy.removeSegment(divisionStartIndex);\n        divisionMidIndex -= 1;\n        divisionEndIndex -= 1;\n      }\n\n      // insert a Moveto segment to ensure secondPath will be valid:\n      var movetoEnd = pathCopy.getSegment(divisionMidIndex).start;\n      pathCopy.insertSegment(divisionMidIndex, Path.createSegment('M', movetoEnd));\n      divisionEndIndex += 1;\n\n      // do not insert the part if it looks like a point\n      if (!divided[1].isDifferentiable()) {\n        pathCopy.removeSegment(divisionEndIndex - 1);\n        divisionEndIndex -= 1;\n      }\n\n      // ensure that Closepath segments in secondPath will be assigned correct subpathStartSegment:\n\n      var secondPathSegmentIndexConversion = divisionEndIndex - divisionStartIndex - 1;\n      for (i = divisionEndIndex; i < pathCopy.segments.length; i++) {\n        var originalSegment = this.getSegment(i - secondPathSegmentIndexConversion);\n        segment = pathCopy.getSegment(i);\n        if (segment.type === 'Z' && !originalSegment.subpathStartSegment.end.equals(segment.subpathStartSegment.end)) {\n          // pathCopy segment's subpathStartSegment is different from original segment's one\n          // convert this Closepath segment to a Lineto and replace it in pathCopy\n          var convertedSegment = Path.createSegment('L', originalSegment.end);\n          pathCopy.replaceSegment(i, convertedSegment);\n        }\n      }\n\n      // distribute pathCopy segments into two paths and return those:\n\n      var firstPath = new Path(pathCopy.segments.slice(0, divisionMidIndex));\n      var secondPath = new Path(pathCopy.segments.slice(divisionMidIndex));\n      return [firstPath, secondPath];\n    },\n    // Checks whether two paths are exactly the same.\n    // If `p` is undefined or null, returns false.\n    equals: function (p) {\n      if (!p) {\n        return false;\n      }\n      var segments = this.segments;\n      var otherSegments = p.segments;\n      var numSegments = segments.length;\n      if (otherSegments.length !== numSegments) {\n        return false;\n      } // if the two paths have different number of segments, they cannot be equal\n\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        var otherSegment = otherSegments[i];\n\n        // as soon as an inequality is found in segments, return false\n        if (segment.type !== otherSegment.type || !segment.equals(otherSegment)) {\n          return false;\n        }\n      }\n\n      // if no inequality found in segments, return true\n      return true;\n    },\n    // Accepts negative indices.\n    // Throws an error if path has no segments.\n    // Throws an error if index is out of range.\n    getSegment: function (index) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        throw new Error('Path has no segments.');\n      }\n      if (index < 0) {\n        index = numSegments + index;\n      } // convert negative indices to positive\n      if (index >= numSegments || index < 0) {\n        throw new Error('Index out of range.');\n      }\n      return segments[index];\n    },\n    // Returns an array of segment subdivisions, with precision better than requested `opt.precision`.\n    getSegmentSubdivisions: function (opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      // works even if path has no segments\n\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      // not using opt.segmentSubdivisions\n      // not using localOpt\n\n      var segmentSubdivisions = [];\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        var subdivisions = segment.getSubdivisions({\n          precision: precision\n        });\n        segmentSubdivisions.push(subdivisions);\n      }\n      return segmentSubdivisions;\n    },\n    // Returns an array of subpaths of this path.\n    // Invalid paths are validated first.\n    // Returns `[]` if path has no segments.\n    getSubpaths: function () {\n      var validatedPath = this.clone().validate();\n      var segments = validatedPath.segments;\n      var numSegments = segments.length;\n      var subpaths = [];\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        if (segment.isSubpathStart) {\n          // we encountered a subpath start segment\n          // create a new path for segment, and push it to list of subpaths\n          subpaths.push(new Path(segment));\n        } else {\n          // append current segment to the last subpath\n          subpaths[subpaths.length - 1].appendSegment(segment);\n        }\n      }\n      return subpaths;\n    },\n    // Insert `arg` at given `index`.\n    // `index = 0` means insert at the beginning.\n    // `index = segments.length` means insert at the end.\n    // Accepts negative indices, from `-1` to `-(segments.length + 1)`.\n    // Accepts one segment or an array of segments as argument.\n    // Throws an error if index is out of range.\n    // Throws an error if argument is not a segment or an array of segments.\n    insertSegment: function (index, arg) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      // works even if path has no segments\n\n      // note that these are incremented compared to getSegments()\n      // we can insert after last element (note that this changes the meaning of index -1)\n      if (index < 0) {\n        index = numSegments + index + 1;\n      } // convert negative indices to positive\n      if (index > numSegments || index < 0) {\n        throw new Error('Index out of range.');\n      }\n      var currentSegment;\n      var previousSegment = null;\n      var nextSegment = null;\n      if (numSegments !== 0) {\n        if (index >= 1) {\n          previousSegment = segments[index - 1];\n          nextSegment = previousSegment.nextSegment; // if we are inserting at end, nextSegment is null\n        } else {\n          // if index === 0\n          // previousSegment is null\n          nextSegment = segments[0];\n        }\n      }\n      if (!Array.isArray(arg)) {\n        if (!arg || !arg.isSegment) {\n          throw new Error('Segment required.');\n        }\n        currentSegment = this.prepareSegment(arg, previousSegment, nextSegment);\n        segments.splice(index, 0, currentSegment);\n      } else {\n        // flatten one level deep\n        // so we can chain arbitrary Path.createSegment results\n        arg = arg.reduce(function (acc, val) {\n          return acc.concat(val);\n        }, []);\n        if (!arg[0].isSegment) {\n          throw new Error('Segments required.');\n        }\n        var n = arg.length;\n        for (var i = 0; i < n; i++) {\n          var currentArg = arg[i];\n          currentSegment = this.prepareSegment(currentArg, previousSegment, nextSegment);\n          segments.splice(index + i, 0, currentSegment); // incrementing index to insert subsequent segments after inserted segments\n          previousSegment = currentSegment;\n        }\n      }\n    },\n    intersectionWithLine: function (line, opt) {\n      var intersection = null;\n      var polylines = this.toPolylines(opt);\n      if (!polylines) {\n        return null;\n      }\n      for (var i = 0, n = polylines.length; i < n; i++) {\n        var polyline = polylines[i];\n        var polylineIntersection = line.intersect(polyline);\n        if (polylineIntersection) {\n          intersection || (intersection = []);\n          if (Array.isArray(polylineIntersection)) {\n            Array.prototype.push.apply(intersection, polylineIntersection);\n          } else {\n            intersection.push(polylineIntersection);\n          }\n        }\n      }\n      return intersection;\n    },\n    isDifferentiable: function () {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        // as soon as a differentiable segment is found in segments, return true\n        if (segment.isDifferentiable()) {\n          return true;\n        }\n      }\n\n      // if no differentiable segment is found in segments, return false\n      return false;\n    },\n    // Checks whether current path segments are valid.\n    // Note that d is allowed to be empty - should disable rendering of the path.\n    isValid: function () {\n      var segments = this.segments;\n      var isValid = segments.length === 0 || segments[0].type === 'M'; // either empty or first segment is a Moveto\n      return isValid;\n    },\n    // Returns length of the path, with precision better than requested `opt.precision`; or using `opt.segmentSubdivisions` provided.\n    // If path has no segments, returns 0.\n    length: function (opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return 0;\n      } // if segments is an empty array\n\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision; // opt.precision only used in getSegmentSubdivisions() call\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      // not using localOpt\n\n      var length = 0;\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        var subdivisions = segmentSubdivisions[i];\n        length += segment.length({\n          subdivisions: subdivisions\n        });\n      }\n      return length;\n    },\n    // Private function.\n    lengthAtT: function (t, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return 0;\n      } // if segments is an empty array\n\n      var segmentIndex = t.segmentIndex;\n      if (segmentIndex < 0) {\n        return 0;\n      } // regardless of t.value\n\n      var tValue = t.value;\n      if (segmentIndex >= numSegments) {\n        segmentIndex = numSegments - 1;\n        tValue = 1;\n      } else if (tValue < 0) {\n        tValue = 0;\n      } else if (tValue > 1) {\n        tValue = 1;\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      // not using localOpt\n\n      var subdivisions;\n      var length = 0;\n      for (var i = 0; i < segmentIndex; i++) {\n        var segment = segments[i];\n        subdivisions = segmentSubdivisions[i];\n        length += segment.length({\n          precisison: precision,\n          subdivisions: subdivisions\n        });\n      }\n      segment = segments[segmentIndex];\n      subdivisions = segmentSubdivisions[segmentIndex];\n      length += segment.lengthAtT(tValue, {\n        precisison: precision,\n        subdivisions: subdivisions\n      });\n      return length;\n    },\n    // Returns point at requested `ratio` between 0 and 1, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n    pointAt: function (ratio, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      if (ratio <= 0) {\n        return this.start.clone();\n      }\n      if (ratio >= 1) {\n        return this.end.clone();\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      var localOpt = {\n        precision: precision,\n        segmentSubdivisions: segmentSubdivisions\n      };\n      var pathLength = this.length(localOpt);\n      var length = pathLength * ratio;\n      return this.pointAtLength(length, localOpt);\n    },\n    // Returns point at requested `length`, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n    // Accepts negative length.\n    pointAtLength: function (length, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      if (length === 0) {\n        return this.start.clone();\n      }\n      var fromStart = true;\n      if (length < 0) {\n        fromStart = false; // negative lengths mean start calculation from end point\n        length = -length; // absolute value\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      // not using localOpt\n\n      var lastVisibleSegment;\n      var l = 0; // length so far\n      for (var i = 0; i < numSegments; i++) {\n        var index = fromStart ? i : numSegments - 1 - i;\n        var segment = segments[index];\n        var subdivisions = segmentSubdivisions[index];\n        var d = segment.length({\n          precision: precision,\n          subdivisions: subdivisions\n        });\n        if (segment.isVisible) {\n          if (length <= l + d) {\n            return segment.pointAtLength((fromStart ? 1 : -1) * (length - l), {\n              precision: precision,\n              subdivisions: subdivisions\n            });\n          }\n          lastVisibleSegment = segment;\n        }\n        l += d;\n      }\n\n      // if length requested is higher than the length of the path, return last visible segment endpoint\n      if (lastVisibleSegment) {\n        return fromStart ? lastVisibleSegment.end : lastVisibleSegment.start;\n      }\n\n      // if no visible segment, return last segment end point (no matter if fromStart or no)\n      var lastSegment = segments[numSegments - 1];\n      return lastSegment.end.clone();\n    },\n    // Private function.\n    pointAtT: function (t) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      var segmentIndex = t.segmentIndex;\n      if (segmentIndex < 0) {\n        return segments[0].pointAtT(0);\n      }\n      if (segmentIndex >= numSegments) {\n        return segments[numSegments - 1].pointAtT(1);\n      }\n      var tValue = t.value;\n      if (tValue < 0) {\n        tValue = 0;\n      } else if (tValue > 1) {\n        tValue = 1;\n      }\n      return segments[segmentIndex].pointAtT(tValue);\n    },\n    // Default precision\n    PRECISION: 3,\n    // Helper method for adding segments.\n    prepareSegment: function (segment, previousSegment, nextSegment) {\n      // insert after previous segment and before previous segment's next segment\n      segment.previousSegment = previousSegment;\n      segment.nextSegment = nextSegment;\n      if (previousSegment) {\n        previousSegment.nextSegment = segment;\n      }\n      if (nextSegment) {\n        nextSegment.previousSegment = segment;\n      }\n      var updateSubpathStart = segment;\n      if (segment.isSubpathStart) {\n        segment.subpathStartSegment = segment; // assign self as subpath start segment\n        updateSubpathStart = nextSegment; // start updating from next segment\n      }\n\n      // assign previous segment's subpath start (or self if it is a subpath start) to subsequent segments\n      if (updateSubpathStart) {\n        this.updateSubpathStartSegment(updateSubpathStart);\n      }\n      return segment;\n    },\n    // Remove the segment at `index`.\n    // Accepts negative indices, from `-1` to `-segments.length`.\n    // Throws an error if path has no segments.\n    // Throws an error if index is out of range.\n    removeSegment: function (index) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        throw new Error('Path has no segments.');\n      }\n      if (index < 0) {\n        index = numSegments + index;\n      } // convert negative indices to positive\n      if (index >= numSegments || index < 0) {\n        throw new Error('Index out of range.');\n      }\n      var removedSegment = segments.splice(index, 1)[0];\n      var previousSegment = removedSegment.previousSegment;\n      var nextSegment = removedSegment.nextSegment;\n\n      // link the previous and next segments together (if present)\n      if (previousSegment) {\n        previousSegment.nextSegment = nextSegment;\n      } // may be null\n      if (nextSegment) {\n        nextSegment.previousSegment = previousSegment;\n      } // may be null\n\n      // if removed segment used to start a subpath, update all subsequent segments until another subpath start segment is reached\n      if (removedSegment.isSubpathStart && nextSegment) {\n        this.updateSubpathStartSegment(nextSegment);\n      }\n    },\n    // Replace the segment at `index` with `arg`.\n    // Accepts negative indices, from `-1` to `-segments.length`.\n    // Accepts one segment or an array of segments as argument.\n    // Throws an error if path has no segments.\n    // Throws an error if index is out of range.\n    // Throws an error if argument is not a segment or an array of segments.\n    replaceSegment: function (index, arg) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        throw new Error('Path has no segments.');\n      }\n      if (index < 0) {\n        index = numSegments + index;\n      } // convert negative indices to positive\n      if (index >= numSegments || index < 0) {\n        throw new Error('Index out of range.');\n      }\n      var currentSegment;\n      var replacedSegment = segments[index];\n      var previousSegment = replacedSegment.previousSegment;\n      var nextSegment = replacedSegment.nextSegment;\n      var updateSubpathStart = replacedSegment.isSubpathStart; // boolean: is an update of subpath starts necessary?\n\n      if (!Array.isArray(arg)) {\n        if (!arg || !arg.isSegment) {\n          throw new Error('Segment required.');\n        }\n        currentSegment = this.prepareSegment(arg, previousSegment, nextSegment);\n        segments.splice(index, 1, currentSegment); // directly replace\n\n        if (updateSubpathStart && currentSegment.isSubpathStart) {\n          updateSubpathStart = false;\n        } // already updated by `prepareSegment`\n      } else {\n        // flatten one level deep\n        // so we can chain arbitrary Path.createSegment results\n        arg = arg.reduce(function (acc, val) {\n          return acc.concat(val);\n        }, []);\n        if (!arg[0].isSegment) {\n          throw new Error('Segments required.');\n        }\n        segments.splice(index, 1);\n        var n = arg.length;\n        for (var i = 0; i < n; i++) {\n          var currentArg = arg[i];\n          currentSegment = this.prepareSegment(currentArg, previousSegment, nextSegment);\n          segments.splice(index + i, 0, currentSegment); // incrementing index to insert subsequent segments after inserted segments\n          previousSegment = currentSegment;\n          if (updateSubpathStart && currentSegment.isSubpathStart) {\n            updateSubpathStart = false;\n          } // already updated by `prepareSegment`\n        }\n      }\n\n      // if replaced segment used to start a subpath and no new subpath start was added, update all subsequent segments until another subpath start segment is reached\n      if (updateSubpathStart && nextSegment) {\n        this.updateSubpathStartSegment(nextSegment);\n      }\n    },\n    round: function (precision) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        segment.round(precision);\n      }\n      return this;\n    },\n    scale: function (sx, sy, origin) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        segment.scale(sx, sy, origin);\n      }\n      return this;\n    },\n    segmentAt: function (ratio, opt) {\n      var index = this.segmentIndexAt(ratio, opt);\n      if (!index) {\n        return null;\n      }\n      return this.getSegment(index);\n    },\n    // Accepts negative length.\n    segmentAtLength: function (length, opt) {\n      var index = this.segmentIndexAtLength(length, opt);\n      if (!index) {\n        return null;\n      }\n      return this.getSegment(index);\n    },\n    segmentIndexAt: function (ratio, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      if (ratio < 0) {\n        ratio = 0;\n      }\n      if (ratio > 1) {\n        ratio = 1;\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      var localOpt = {\n        precision: precision,\n        segmentSubdivisions: segmentSubdivisions\n      };\n      var pathLength = this.length(localOpt);\n      var length = pathLength * ratio;\n      return this.segmentIndexAtLength(length, localOpt);\n    },\n    // Accepts negative length.\n    segmentIndexAtLength: function (length, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      var fromStart = true;\n      if (length < 0) {\n        fromStart = false; // negative lengths mean start calculation from end point\n        length = -length; // absolute value\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      // not using localOpt\n\n      var lastVisibleSegmentIndex = null;\n      var l = 0; // length so far\n      for (var i = 0; i < numSegments; i++) {\n        var index = fromStart ? i : numSegments - 1 - i;\n        var segment = segments[index];\n        var subdivisions = segmentSubdivisions[index];\n        var d = segment.length({\n          precision: precision,\n          subdivisions: subdivisions\n        });\n        if (segment.isVisible) {\n          if (length <= l + d) {\n            return index;\n          }\n          lastVisibleSegmentIndex = index;\n        }\n        l += d;\n      }\n\n      // if length requested is higher than the length of the path, return last visible segment index\n      // if no visible segment, return null\n      return lastVisibleSegmentIndex;\n    },\n    // Returns a string that can be used to reconstruct the path.\n    // Additional error checking compared to toString (must start with M segment).\n    serialize: function () {\n      if (!this.isValid()) {\n        throw new Error('Invalid path segments.');\n      }\n      return this.toString();\n    },\n    // Returns tangent line at requested `ratio` between 0 and 1, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n    tangentAt: function (ratio, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      if (ratio < 0) {\n        ratio = 0;\n      }\n      if (ratio > 1) {\n        ratio = 1;\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      var localOpt = {\n        precision: precision,\n        segmentSubdivisions: segmentSubdivisions\n      };\n      var pathLength = this.length(localOpt);\n      var length = pathLength * ratio;\n      return this.tangentAtLength(length, localOpt);\n    },\n    // Returns tangent line at requested `length`, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n    // Accepts negative length.\n    tangentAtLength: function (length, opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      var fromStart = true;\n      if (length < 0) {\n        fromStart = false; // negative lengths mean start calculation from end point\n        length = -length; // absolute value\n      }\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      // not using localOpt\n\n      var lastValidSegment; // visible AND differentiable (with a tangent)\n      var l = 0; // length so far\n      for (var i = 0; i < numSegments; i++) {\n        var index = fromStart ? i : numSegments - 1 - i;\n        var segment = segments[index];\n        var subdivisions = segmentSubdivisions[index];\n        var d = segment.length({\n          precision: precision,\n          subdivisions: subdivisions\n        });\n        if (segment.isDifferentiable()) {\n          if (length <= l + d) {\n            return segment.tangentAtLength((fromStart ? 1 : -1) * (length - l), {\n              precision: precision,\n              subdivisions: subdivisions\n            });\n          }\n          lastValidSegment = segment;\n        }\n        l += d;\n      }\n\n      // if length requested is higher than the length of the path, return tangent of endpoint of last valid segment\n      if (lastValidSegment) {\n        var t = fromStart ? 1 : 0;\n        return lastValidSegment.tangentAtT(t);\n      }\n\n      // if no valid segment, return null\n      return null;\n    },\n    // Private function.\n    tangentAtT: function (t) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      var segmentIndex = t.segmentIndex;\n      if (segmentIndex < 0) {\n        return segments[0].tangentAtT(0);\n      }\n      if (segmentIndex >= numSegments) {\n        return segments[numSegments - 1].tangentAtT(1);\n      }\n      var tValue = t.value;\n      if (tValue < 0) {\n        tValue = 0;\n      } else if (tValue > 1) {\n        tValue = 1;\n      }\n      return segments[segmentIndex].tangentAtT(tValue);\n    },\n    toPoints: function (opt) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      } // if segments is an empty array\n\n      opt = opt || {};\n      var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n      var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n        precision: precision\n      }) : opt.segmentSubdivisions;\n      var points = [];\n      var partialPoints = [];\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        if (segment.isVisible) {\n          var currentSegmentSubdivisions = segmentSubdivisions[i];\n          if (currentSegmentSubdivisions.length > 0) {\n            var subdivisionPoints = currentSegmentSubdivisions.map(function (curve) {\n              return curve.start;\n            });\n            Array.prototype.push.apply(partialPoints, subdivisionPoints);\n          } else {\n            partialPoints.push(segment.start);\n          }\n        } else if (partialPoints.length > 0) {\n          partialPoints.push(segments[i - 1].end);\n          points.push(partialPoints);\n          partialPoints = [];\n        }\n      }\n      if (partialPoints.length > 0) {\n        partialPoints.push(this.end);\n        points.push(partialPoints);\n      }\n      return points;\n    },\n    toPolylines: function (opt) {\n      var polylines = [];\n      var points = this.toPoints(opt);\n      if (!points) {\n        return null;\n      }\n      for (var i = 0, n = points.length; i < n; i++) {\n        polylines.push(new Polyline(points[i]));\n      }\n      return polylines;\n    },\n    toString: function () {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      var pathData = '';\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        pathData += segment.serialize() + ' ';\n      }\n      return pathData.trim();\n    },\n    translate: function (tx, ty) {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        segment.translate(tx, ty);\n      }\n      return this;\n    },\n    // Helper method for updating subpath start of segments, starting with the one provided.\n    updateSubpathStartSegment: function (segment) {\n      var previousSegment = segment.previousSegment; // may be null\n      while (segment && !segment.isSubpathStart) {\n        // assign previous segment's subpath start segment to this segment\n        if (previousSegment) {\n          segment.subpathStartSegment = previousSegment.subpathStartSegment;\n        } // may be null\n        else {\n          segment.subpathStartSegment = null;\n        } // if segment had no previous segment, assign null - creates an invalid path!\n\n        previousSegment = segment;\n        segment = segment.nextSegment; // move on to the segment after etc.\n      }\n    },\n    // If the path is not valid, insert M 0 0 at the beginning.\n    // Path with no segments is considered valid, so nothing is inserted.\n    validate: function () {\n      if (!this.isValid()) {\n        this.insertSegment(0, Path.createSegment('M', 0, 0));\n      }\n      return this;\n    }\n  };\n  Object.defineProperty(Path.prototype, 'start', {\n    // Getter for the first visible endpoint of the path.\n\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      }\n      for (var i = 0; i < numSegments; i++) {\n        var segment = segments[i];\n        if (segment.isVisible) {\n          return segment.start;\n        }\n      }\n\n      // if no visible segment, return last segment end point\n      return segments[numSegments - 1].end;\n    }\n  });\n  Object.defineProperty(Path.prototype, 'end', {\n    // Getter for the last visible endpoint of the path.\n\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      var segments = this.segments;\n      var numSegments = segments.length;\n      if (numSegments === 0) {\n        return null;\n      }\n      for (var i = numSegments - 1; i >= 0; i--) {\n        var segment = segments[i];\n        if (segment.isVisible) {\n          return segment.end;\n        }\n      }\n\n      // if no visible segment, return last segment end point\n      return segments[numSegments - 1].end;\n    }\n  });\n\n  // Local helper function.\n  // Use an array of arguments to call a constructor (function called with `new`).\n  // Adapted from https://stackoverflow.com/a/8843181/2263595\n  // It is not necessary to use this function if the arguments can be passed separately (i.e. if the number of arguments is limited).\n  // - If that is the case, use `new constructor(arg1, arg2)`, for example.\n  // It is not necessary to use this function if the function that needs an array of arguments is not supposed to be used as a constructor.\n  // - If that is the case, use `f.apply(thisArg, [arg1, arg2...])`, for example.\n  function applyToNew(constructor, argsArray) {\n    // The `new` keyword can only be applied to functions that take a limited number of arguments.\n    // - We can fake that with .bind().\n    // - It calls a function (`constructor`, here) with the arguments that were provided to it - effectively transforming an unlimited number of arguments into limited.\n    // - So `new (constructor.bind(thisArg, arg1, arg2...))`\n    // - `thisArg` can be anything (e.g. null) because `new` keyword resets context to the constructor object.\n    // We need to pass in a variable number of arguments to the bind() call.\n    // - We can use .apply().\n    // - So `new (constructor.bind.apply(constructor, [thisArg, arg1, arg2...]))`\n    // - `thisArg` can still be anything because `new` overwrites it.\n    // Finally, to make sure that constructor.bind overwriting is not a problem, we switch to `Function.prototype.bind`.\n    // - So, the final version is `new (Function.prototype.bind.apply(constructor, [thisArg, arg1, arg2...]))`\n\n    // The function expects `argsArray[0]` to be `thisArg`.\n    // - This means that whatever is sent as the first element will be ignored.\n    // - The constructor will only see arguments starting from argsArray[1].\n    // - So, a new dummy element is inserted at the start of the array.\n    argsArray.unshift(null);\n    return new (Function.prototype.bind.apply(constructor, argsArray))();\n  }\n\n  // Path segment interface:\n  var segmentPrototype = {\n    // virtual\n    bbox: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    clone: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    closestPoint: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    closestPointLength: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    closestPointNormalizedLength: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // Redirect calls to closestPointNormalizedLength() function if closestPointT() is not defined for segment.\n    closestPointT: function (p) {\n      if (this.closestPointNormalizedLength) {\n        return this.closestPointNormalizedLength(p);\n      }\n      throw new Error('Neither closestPointT() nor closestPointNormalizedLength() function is implemented.');\n    },\n    // virtual\n    closestPointTangent: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    divideAt: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    divideAtLength: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // Redirect calls to divideAt() function if divideAtT() is not defined for segment.\n    divideAtT: function (t) {\n      if (this.divideAt) {\n        return this.divideAt(t);\n      }\n      throw new Error('Neither divideAtT() nor divideAt() function is implemented.');\n    },\n    // virtual\n    equals: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    getSubdivisions: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    isDifferentiable: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    isSegment: true,\n    isSubpathStart: false,\n    // true for Moveto segments\n\n    isVisible: true,\n    // false for Moveto segments\n\n    // virtual\n    length: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // Return a fraction of result of length() function if lengthAtT() is not defined for segment.\n    lengthAtT: function (t) {\n      if (t <= 0) {\n        return 0;\n      }\n      var length = this.length();\n      if (t >= 1) {\n        return length;\n      }\n      return length * t;\n    },\n    nextSegment: null,\n    // needed for subpath start segment updating\n\n    // virtual\n    pointAt: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    pointAtLength: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // Redirect calls to pointAt() function if pointAtT() is not defined for segment.\n    pointAtT: function (t) {\n      if (this.pointAt) {\n        return this.pointAt(t);\n      }\n      throw new Error('Neither pointAtT() nor pointAt() function is implemented.');\n    },\n    previousSegment: null,\n    // needed to get segment start property\n\n    // virtual\n    round: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    subpathStartSegment: null,\n    // needed to get Closepath segment end property\n\n    // virtual\n    scale: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    serialize: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    tangentAt: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    tangentAtLength: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // Redirect calls to tangentAt() function if tangentAtT() is not defined for segment.\n    tangentAtT: function (t) {\n      if (this.tangentAt) {\n        return this.tangentAt(t);\n      }\n      throw new Error('Neither tangentAtT() nor tangentAt() function is implemented.');\n    },\n    // virtual\n    toString: function () {\n      throw new Error('Declaration missing for virtual function.');\n    },\n    // virtual\n    translate: function () {\n      throw new Error('Declaration missing for virtual function.');\n    }\n  };\n\n  // usually directly assigned\n  // getter for Closepath\n  Object.defineProperty(segmentPrototype, 'end', {\n    configurable: true,\n    enumerable: true,\n    writable: true\n  });\n\n  // always a getter\n  // always throws error for Moveto\n  Object.defineProperty(segmentPrototype, 'start', {\n    // get a reference to the end point of previous segment\n\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      if (!this.previousSegment) {\n        throw new Error('Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)');\n      }\n      return this.previousSegment.end;\n    }\n  });\n\n  // virtual\n  Object.defineProperty(segmentPrototype, 'type', {\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      throw new Error('Bad segment declaration. No type specified.');\n    }\n  });\n\n  // Path segment implementations:\n  var Lineto = function () {\n    var arguments$1 = arguments;\n    var args = [];\n    var n = arguments.length;\n    for (var i = 0; i < n; i++) {\n      args.push(arguments$1[i]);\n    }\n    if (!(this instanceof Lineto)) {\n      // switching context of `this` to Lineto when called without `new`\n      return applyToNew(Lineto, args);\n    }\n    if (n === 0) {\n      throw new Error('Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).');\n    }\n    var outputArray;\n    if (args[0] instanceof Line) {\n      // lines provided\n      if (n === 1) {\n        this.end = args[0].end.clone();\n        return this;\n      } else {\n        throw new Error('Lineto constructor expects a line, 1 point, or 2 coordinates (' + n + ' lines provided).');\n      }\n    } else if (typeof args[0] === 'string' || typeof args[0] === 'number') {\n      // coordinates provided\n      if (n === 2) {\n        this.end = new Point(+args[0], +args[1]);\n        return this;\n      } else if (n < 2) {\n        throw new Error('Lineto constructor expects a line, 1 point, or 2 coordinates (' + n + ' coordinates provided).');\n      } else {\n        // this is a poly-line segment\n        var segmentCoords;\n        outputArray = [];\n        for (i = 0; i < n; i += 2) {\n          // coords come in groups of two\n\n          segmentCoords = args.slice(i, i + 2); // will send one coord if args.length not divisible by 2\n          outputArray.push(applyToNew(Lineto, segmentCoords));\n        }\n        return outputArray;\n      }\n    } else {\n      // points provided (needs to be last to also cover plain objects with x and y)\n      if (n === 1) {\n        this.end = new Point(args[0]);\n        return this;\n      } else {\n        // this is a poly-line segment\n        var segmentPoint;\n        outputArray = [];\n        for (i = 0; i < n; i += 1) {\n          segmentPoint = args[i];\n          outputArray.push(new Lineto(segmentPoint));\n        }\n        return outputArray;\n      }\n    }\n  };\n  var linetoPrototype = {\n    clone: function () {\n      return new Lineto(this.end);\n    },\n    divideAt: function (ratio) {\n      var line = new Line(this.start, this.end);\n      var divided = line.divideAt(ratio);\n      return [new Lineto(divided[0]), new Lineto(divided[1])];\n    },\n    divideAtLength: function (length) {\n      var line = new Line(this.start, this.end);\n      var divided = line.divideAtLength(length);\n      return [new Lineto(divided[0]), new Lineto(divided[1])];\n    },\n    getSubdivisions: function () {\n      return [];\n    },\n    isDifferentiable: function () {\n      if (!this.previousSegment) {\n        return false;\n      }\n      return !this.start.equals(this.end);\n    },\n    round: function (precision) {\n      this.end.round(precision);\n      return this;\n    },\n    scale: function (sx, sy, origin) {\n      this.end.scale(sx, sy, origin);\n      return this;\n    },\n    serialize: function () {\n      var end = this.end;\n      return this.type + ' ' + end.x + ' ' + end.y;\n    },\n    toString: function () {\n      return this.type + ' ' + this.start + ' ' + this.end;\n    },\n    translate: function (tx, ty) {\n      this.end.translate(tx, ty);\n      return this;\n    }\n  };\n  Object.defineProperty(linetoPrototype, 'type', {\n    configurable: true,\n    enumerable: true,\n    value: 'L'\n  });\n  Lineto.prototype = extend(segmentPrototype, Line.prototype, linetoPrototype);\n  var Curveto = function () {\n    var arguments$1 = arguments;\n    var args = [];\n    var n = arguments.length;\n    for (var i = 0; i < n; i++) {\n      args.push(arguments$1[i]);\n    }\n    if (!(this instanceof Curveto)) {\n      // switching context of `this` to Curveto when called without `new`\n      return applyToNew(Curveto, args);\n    }\n    if (n === 0) {\n      throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).');\n    }\n    var outputArray;\n    if (args[0] instanceof Curve) {\n      // curves provided\n      if (n === 1) {\n        this.controlPoint1 = args[0].controlPoint1.clone();\n        this.controlPoint2 = args[0].controlPoint2.clone();\n        this.end = args[0].end.clone();\n        return this;\n      } else {\n        throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (' + n + ' curves provided).');\n      }\n    } else if (typeof args[0] === 'string' || typeof args[0] === 'number') {\n      // coordinates provided\n      if (n === 6) {\n        this.controlPoint1 = new Point(+args[0], +args[1]);\n        this.controlPoint2 = new Point(+args[2], +args[3]);\n        this.end = new Point(+args[4], +args[5]);\n        return this;\n      } else if (n < 6) {\n        throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (' + n + ' coordinates provided).');\n      } else {\n        // this is a poly-bezier segment\n        var segmentCoords;\n        outputArray = [];\n        for (i = 0; i < n; i += 6) {\n          // coords come in groups of six\n\n          segmentCoords = args.slice(i, i + 6); // will send fewer than six coords if args.length not divisible by 6\n          outputArray.push(applyToNew(Curveto, segmentCoords));\n        }\n        return outputArray;\n      }\n    } else {\n      // points provided (needs to be last to also cover plain objects with x and y)\n      if (n === 3) {\n        this.controlPoint1 = new Point(args[0]);\n        this.controlPoint2 = new Point(args[1]);\n        this.end = new Point(args[2]);\n        return this;\n      } else if (n < 3) {\n        throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (' + n + ' points provided).');\n      } else {\n        // this is a poly-bezier segment\n        var segmentPoints;\n        outputArray = [];\n        for (i = 0; i < n; i += 3) {\n          // points come in groups of three\n\n          segmentPoints = args.slice(i, i + 3); // will send fewer than three points if args.length is not divisible by 3\n          outputArray.push(applyToNew(Curveto, segmentPoints));\n        }\n        return outputArray;\n      }\n    }\n  };\n  var curvetoPrototype = {\n    clone: function () {\n      return new Curveto(this.controlPoint1, this.controlPoint2, this.end);\n    },\n    divideAt: function (ratio, opt) {\n      var curve = new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n      var divided = curve.divideAt(ratio, opt);\n      return [new Curveto(divided[0]), new Curveto(divided[1])];\n    },\n    divideAtLength: function (length, opt) {\n      var curve = new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n      var divided = curve.divideAtLength(length, opt);\n      return [new Curveto(divided[0]), new Curveto(divided[1])];\n    },\n    divideAtT: function (t) {\n      var curve = new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n      var divided = curve.divideAtT(t);\n      return [new Curveto(divided[0]), new Curveto(divided[1])];\n    },\n    isDifferentiable: function () {\n      if (!this.previousSegment) {\n        return false;\n      }\n      var start = this.start;\n      var control1 = this.controlPoint1;\n      var control2 = this.controlPoint2;\n      var end = this.end;\n      return !(start.equals(control1) && control1.equals(control2) && control2.equals(end));\n    },\n    round: function (precision) {\n      this.controlPoint1.round(precision);\n      this.controlPoint2.round(precision);\n      this.end.round(precision);\n      return this;\n    },\n    scale: function (sx, sy, origin) {\n      this.controlPoint1.scale(sx, sy, origin);\n      this.controlPoint2.scale(sx, sy, origin);\n      this.end.scale(sx, sy, origin);\n      return this;\n    },\n    serialize: function () {\n      var c1 = this.controlPoint1;\n      var c2 = this.controlPoint2;\n      var end = this.end;\n      return this.type + ' ' + c1.x + ' ' + c1.y + ' ' + c2.x + ' ' + c2.y + ' ' + end.x + ' ' + end.y;\n    },\n    toString: function () {\n      return this.type + ' ' + this.start + ' ' + this.controlPoint1 + ' ' + this.controlPoint2 + ' ' + this.end;\n    },\n    translate: function (tx, ty) {\n      this.controlPoint1.translate(tx, ty);\n      this.controlPoint2.translate(tx, ty);\n      this.end.translate(tx, ty);\n      return this;\n    }\n  };\n  Object.defineProperty(curvetoPrototype, 'type', {\n    configurable: true,\n    enumerable: true,\n    value: 'C'\n  });\n  Curveto.prototype = extend(segmentPrototype, Curve.prototype, curvetoPrototype);\n  var Moveto = function () {\n    var arguments$1 = arguments;\n    var args = [];\n    var n = arguments.length;\n    for (var i = 0; i < n; i++) {\n      args.push(arguments$1[i]);\n    }\n    if (!(this instanceof Moveto)) {\n      // switching context of `this` to Moveto when called without `new`\n      return applyToNew(Moveto, args);\n    }\n    if (n === 0) {\n      throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).');\n    }\n    var outputArray;\n    if (args[0] instanceof Line) {\n      // lines provided\n      if (n === 1) {\n        this.end = args[0].end.clone();\n        return this;\n      } else {\n        throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (' + n + ' lines provided).');\n      }\n    } else if (args[0] instanceof Curve) {\n      // curves provided\n      if (n === 1) {\n        this.end = args[0].end.clone();\n        return this;\n      } else {\n        throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (' + n + ' curves provided).');\n      }\n    } else if (typeof args[0] === 'string' || typeof args[0] === 'number') {\n      // coordinates provided\n      if (n === 2) {\n        this.end = new Point(+args[0], +args[1]);\n        return this;\n      } else if (n < 2) {\n        throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (' + n + ' coordinates provided).');\n      } else {\n        // this is a moveto-with-subsequent-poly-line segment\n        var segmentCoords;\n        outputArray = [];\n        for (i = 0; i < n; i += 2) {\n          // coords come in groups of two\n\n          segmentCoords = args.slice(i, i + 2); // will send one coord if args.length not divisible by 2\n          if (i === 0) {\n            outputArray.push(applyToNew(Moveto, segmentCoords));\n          } else {\n            outputArray.push(applyToNew(Lineto, segmentCoords));\n          }\n        }\n        return outputArray;\n      }\n    } else {\n      // points provided (needs to be last to also cover plain objects with x and y)\n      if (n === 1) {\n        this.end = new Point(args[0]);\n        return this;\n      } else {\n        // this is a moveto-with-subsequent-poly-line segment\n        var segmentPoint;\n        outputArray = [];\n        for (i = 0; i < n; i += 1) {\n          // points come one by one\n\n          segmentPoint = args[i];\n          if (i === 0) {\n            outputArray.push(new Moveto(segmentPoint));\n          } else {\n            outputArray.push(new Lineto(segmentPoint));\n          }\n        }\n        return outputArray;\n      }\n    }\n  };\n  var movetoPrototype = {\n    bbox: function () {\n      return null;\n    },\n    clone: function () {\n      return new Moveto(this.end);\n    },\n    closestPoint: function () {\n      return this.end.clone();\n    },\n    closestPointNormalizedLength: function () {\n      return 0;\n    },\n    closestPointLength: function () {\n      return 0;\n    },\n    closestPointT: function () {\n      return 1;\n    },\n    closestPointTangent: function () {\n      return null;\n    },\n    divideAt: function () {\n      return [this.clone(), this.clone()];\n    },\n    divideAtLength: function () {\n      return [this.clone(), this.clone()];\n    },\n    equals: function (m) {\n      return this.end.equals(m.end);\n    },\n    getSubdivisions: function () {\n      return [];\n    },\n    isDifferentiable: function () {\n      return false;\n    },\n    isSubpathStart: true,\n    isVisible: false,\n    length: function () {\n      return 0;\n    },\n    lengthAtT: function () {\n      return 0;\n    },\n    pointAt: function () {\n      return this.end.clone();\n    },\n    pointAtLength: function () {\n      return this.end.clone();\n    },\n    pointAtT: function () {\n      return this.end.clone();\n    },\n    round: function (precision) {\n      this.end.round(precision);\n      return this;\n    },\n    scale: function (sx, sy, origin) {\n      this.end.scale(sx, sy, origin);\n      return this;\n    },\n    serialize: function () {\n      var end = this.end;\n      return this.type + ' ' + end.x + ' ' + end.y;\n    },\n    tangentAt: function () {\n      return null;\n    },\n    tangentAtLength: function () {\n      return null;\n    },\n    tangentAtT: function () {\n      return null;\n    },\n    toString: function () {\n      return this.type + ' ' + this.end;\n    },\n    translate: function (tx, ty) {\n      this.end.translate(tx, ty);\n      return this;\n    }\n  };\n  Object.defineProperty(movetoPrototype, 'start', {\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      throw new Error('Illegal access. Moveto segments should not need a start property.');\n    }\n  });\n  Object.defineProperty(movetoPrototype, 'type', {\n    configurable: true,\n    enumerable: true,\n    value: 'M'\n  });\n  Moveto.prototype = extend(segmentPrototype, movetoPrototype); // does not inherit from any other geometry object\n\n  var Closepath = function () {\n    var arguments$1 = arguments;\n    var args = [];\n    var n = arguments.length;\n    for (var i = 0; i < n; i++) {\n      args.push(arguments$1[i]);\n    }\n    if (!(this instanceof Closepath)) {\n      // switching context of `this` to Closepath when called without `new`\n      return applyToNew(Closepath, args);\n    }\n    if (n > 0) {\n      throw new Error('Closepath constructor expects no arguments.');\n    }\n    return this;\n  };\n  var closepathPrototype = {\n    clone: function () {\n      return new Closepath();\n    },\n    divideAt: function (ratio) {\n      var line = new Line(this.start, this.end);\n      var divided = line.divideAt(ratio);\n      return [\n      // if we didn't actually cut into the segment, first divided part can stay as Z\n      divided[1].isDifferentiable() ? new Lineto(divided[0]) : this.clone(), new Lineto(divided[1])];\n    },\n    divideAtLength: function (length) {\n      var line = new Line(this.start, this.end);\n      var divided = line.divideAtLength(length);\n      return [\n      // if we didn't actually cut into the segment, first divided part can stay as Z\n      divided[1].isDifferentiable() ? new Lineto(divided[0]) : this.clone(), new Lineto(divided[1])];\n    },\n    getSubdivisions: function () {\n      return [];\n    },\n    isDifferentiable: function () {\n      if (!this.previousSegment || !this.subpathStartSegment) {\n        return false;\n      }\n      return !this.start.equals(this.end);\n    },\n    round: function () {\n      return this;\n    },\n    scale: function () {\n      return this;\n    },\n    serialize: function () {\n      return this.type;\n    },\n    toString: function () {\n      return this.type + ' ' + this.start + ' ' + this.end;\n    },\n    translate: function () {\n      return this;\n    }\n  };\n  Object.defineProperty(closepathPrototype, 'end', {\n    // get a reference to the end point of subpath start segment\n\n    configurable: true,\n    enumerable: true,\n    get: function () {\n      if (!this.subpathStartSegment) {\n        throw new Error('Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)');\n      }\n      return this.subpathStartSegment.end;\n    }\n  });\n  Object.defineProperty(closepathPrototype, 'type', {\n    configurable: true,\n    enumerable: true,\n    value: 'Z'\n  });\n  Closepath.prototype = extend(segmentPrototype, Line.prototype, closepathPrototype);\n  var segmentTypes = Path.segmentTypes = {\n    L: Lineto,\n    C: Curveto,\n    M: Moveto,\n    Z: Closepath,\n    z: Closepath\n  };\n  Path.regexSupportedData = new RegExp('^[\\\\s\\\\d' + Object.keys(segmentTypes).join('') + ',.]*$');\n  Path.isDataSupported = function (data) {\n    if (typeof data !== 'string') {\n      return false;\n    }\n    return this.regexSupportedData.test(data);\n  };\n  var bezier = {\n    // Cubic Bezier curve path through points.\n    // @deprecated\n    // @param {array} points Array of points through which the smooth line will go.\n    // @return {array} SVG Path commands as an array\n    curveThroughPoints: function (points) {\n      console.warn('deprecated');\n      return new Path(Curve.throughPoints(points)).serialize();\n    },\n    // Get open-ended Bezier Spline Control Points.\n    // @deprecated\n    // @param knots Input Knot Bezier spline points (At least two points!).\n    // @param firstControlPoints Output First Control points. Array of knots.length - 1 length.\n    // @param secondControlPoints Output Second Control points. Array of knots.length - 1 length.\n    getCurveControlPoints: function (knots) {\n      console.warn('deprecated');\n      var firstControlPoints = [];\n      var secondControlPoints = [];\n      var n = knots.length - 1;\n      var i;\n\n      // Special case: Bezier curve should be a straight line.\n      if (n == 1) {\n        // 3P1 = 2P0 + P3\n        firstControlPoints[0] = new Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n\n        // P2 = 2P1 â P0\n        secondControlPoints[0] = new Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n        return [firstControlPoints, secondControlPoints];\n      }\n\n      // Calculate first Bezier control points.\n      // Right hand side vector.\n      var rhs = [];\n\n      // Set right hand side X values.\n      for (i = 1; i < n - 1; i++) {\n        rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n      }\n      rhs[0] = knots[0].x + 2 * knots[1].x;\n      rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n\n      // Get first control points X-values.\n      var x = this.getFirstControlPoints(rhs);\n\n      // Set right hand side Y values.\n      for (i = 1; i < n - 1; ++i) {\n        rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n      }\n      rhs[0] = knots[0].y + 2 * knots[1].y;\n      rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n\n      // Get first control points Y-values.\n      var y = this.getFirstControlPoints(rhs);\n\n      // Fill output arrays.\n      for (i = 0; i < n; i++) {\n        // First control point.\n        firstControlPoints.push(new Point(x[i], y[i]));\n\n        // Second control point.\n        if (i < n - 1) {\n          secondControlPoints.push(new Point(2 * knots[i + 1].x - x[i + 1], 2 * knots[i + 1].y - y[i + 1]));\n        } else {\n          secondControlPoints.push(new Point((knots[n].x + x[n - 1]) / 2, (knots[n].y + y[n - 1]) / 2));\n        }\n      }\n      return [firstControlPoints, secondControlPoints];\n    },\n    // Divide a Bezier curve into two at point defined by value 't' <0,1>.\n    // Using deCasteljau algorithm. http://math.stackexchange.com/a/317867\n    // @deprecated\n    // @param control points (start, control start, control end, end)\n    // @return a function that accepts t and returns 2 curves.\n    getCurveDivider: function (p0, p1, p2, p3) {\n      console.warn('deprecated');\n      var curve = new Curve(p0, p1, p2, p3);\n      return function divideCurve(t) {\n        var divided = curve.divide(t);\n        return [{\n          p0: divided[0].start,\n          p1: divided[0].controlPoint1,\n          p2: divided[0].controlPoint2,\n          p3: divided[0].end\n        }, {\n          p0: divided[1].start,\n          p1: divided[1].controlPoint1,\n          p2: divided[1].controlPoint2,\n          p3: divided[1].end\n        }];\n      };\n    },\n    // Solves a tridiagonal system for one of coordinates (x or y) of first Bezier control points.\n    // @deprecated\n    // @param rhs Right hand side vector.\n    // @return Solution vector.\n    getFirstControlPoints: function (rhs) {\n      console.warn('deprecated');\n      var n = rhs.length;\n      // `x` is a solution vector.\n      var x = [];\n      var tmp = [];\n      var b = 2.0;\n      x[0] = rhs[0] / b;\n\n      // Decomposition and forward substitution.\n      for (var i = 1; i < n; i++) {\n        tmp[i] = 1 / b;\n        b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n        x[i] = (rhs[i] - x[i - 1]) / b;\n      }\n      for (i = 1; i < n; i++) {\n        // Backsubstitution.\n        x[n - i - 1] -= tmp[n - i] * x[n - i];\n      }\n      return x;\n    },\n    // Solves an inversion problem -- Given the (x, y) coordinates of a point which lies on\n    // a parametric curve x = x(t)/w(t), y = y(t)/w(t), ï¬nd the parameter value t\n    // which corresponds to that point.\n    // @deprecated\n    // @param control points (start, control start, control end, end)\n    // @return a function that accepts a point and returns t.\n    getInversionSolver: function (p0, p1, p2, p3) {\n      console.warn('deprecated');\n      var curve = new Curve(p0, p1, p2, p3);\n      return function solveInversion(p) {\n        return curve.closestPointT(p);\n      };\n    }\n  };\n  var Polygon = function (points) {\n    if (!(this instanceof Polygon)) {\n      return new Polygon(points);\n    }\n    if (typeof points === 'string') {\n      return new Polygon.parse(points);\n    }\n    this.points = Array.isArray(points) ? points.map(Point) : [];\n  };\n  Polygon.parse = function (svgString) {\n    return new Polygon(parsePoints(svgString));\n  };\n  Polygon.fromRect = function (rect) {\n    return new Polygon([rect.topLeft(), rect.topRight(), rect.bottomRight(), rect.bottomLeft()]);\n  };\n  Polygon.prototype = extend(Polyline.prototype, {\n    type: types.Polygon,\n    clone: function () {\n      return new Polygon(clonePoints(this.points));\n    },\n    convexHull: function () {\n      return new Polygon(convexHull(this.points));\n    },\n    lengthPoints: function () {\n      var ref = this;\n      var start = ref.start;\n      var end = ref.end;\n      var points = ref.points;\n      if (points.length <= 1 || start.equals(end)) {\n        return points;\n      }\n      return points.concat([start.clone()]);\n    }\n  });\n  function exists(shape1, shape2, shape1opt, shape2opt) {\n    switch (shape1.type) {\n      case types.Line:\n        {\n          switch (shape2.type) {\n            case types.Line:\n              {\n                return lineWithLine(shape1, shape2);\n              }\n          }\n          break;\n        }\n      case types.Ellipse:\n        {\n          switch (shape2.type) {\n            case types.Line:\n              {\n                return ellipseWithLine(shape1, shape2);\n              }\n            case types.Ellipse:\n              {\n                return ellipseWithEllipse(shape1, shape2);\n              }\n          }\n          break;\n        }\n      case types.Rect:\n        {\n          switch (shape2.type) {\n            case types.Line:\n              {\n                return rectWithLine(shape1, shape2);\n              }\n            case types.Ellipse:\n              {\n                return rectWithEllipse(shape1, shape2);\n              }\n            case types.Rect:\n              {\n                return rectWithRect(shape1, shape2);\n              }\n          }\n          break;\n        }\n      case types.Polyline:\n        {\n          switch (shape2.type) {\n            case types.Line:\n              {\n                return polylineWithLine(shape1, shape2);\n              }\n            case types.Ellipse:\n              {\n                return polylineWithEllipse(shape1, shape2);\n              }\n            case types.Rect:\n              {\n                return polylineWithRect(shape1, shape2);\n              }\n            case types.Polyline:\n              {\n                return polylineWithPolyline(shape1, shape2);\n              }\n          }\n          break;\n        }\n      case types.Polygon:\n        {\n          switch (shape2.type) {\n            case types.Line:\n              {\n                return polygonWithLine(shape1, shape2);\n              }\n            case types.Ellipse:\n              {\n                return polygonWithEllipse(shape1, shape2);\n              }\n            case types.Rect:\n              {\n                return polygonWithRect(shape1, shape2);\n              }\n            case types.Polyline:\n              {\n                return polygonWithPolyline(shape1, shape2);\n              }\n            case types.Polygon:\n              {\n                return polygonWithPolygon(shape1, shape2);\n              }\n          }\n          break;\n        }\n      case types.Path:\n        {\n          switch (shape2.type) {\n            case types.Line:\n              {\n                return pathWithLine(shape1, shape2, shape1opt);\n              }\n            case types.Ellipse:\n              {\n                return pathWithEllipse(shape1, shape2, shape1opt);\n              }\n            case types.Rect:\n              {\n                return pathWithRect(shape1, shape2, shape1opt);\n              }\n            case types.Polyline:\n              {\n                return pathWithPolyline(shape1, shape2, shape1opt);\n              }\n            case types.Polygon:\n              {\n                return pathWithPolygon(shape1, shape2, shape1opt);\n              }\n            case types.Path:\n              {\n                return pathWithPath(shape1, shape2, shape1opt, shape2opt);\n              }\n          }\n          break;\n        }\n    }\n    // None of the cases above\n    switch (shape2.type) {\n      case types.Ellipse:\n      case types.Rect:\n      case types.Polyline:\n      case types.Polygon:\n      case types.Path:\n        {\n          return exists(shape2, shape1, shape2opt, shape1opt);\n        }\n      default:\n        {\n          throw Error(\"The intersection for \" + shape1 + \" and \" + shape2 + \" could not be found.\");\n        }\n    }\n  }\n\n  /* Line */\n\n  function lineWithLine(line1, line2) {\n    var x1 = line1.start.x;\n    var y1 = line1.start.y;\n    var x2 = line1.end.x;\n    var y2 = line1.end.y;\n    var x3 = line2.start.x;\n    var y3 = line2.start.y;\n    var x4 = line2.end.x;\n    var y4 = line2.end.y;\n    var s1x = x2 - x1;\n    var s1y = y2 - y1;\n    var s2x = x4 - x3;\n    var s2y = y4 - y3;\n    var s3x = x1 - x3;\n    var s3y = y1 - y3;\n    var p = s1x * s2y - s2x * s1y;\n    var s = (s1x * s3y - s1y * s3x) / p;\n    var t = (s2x * s3y - s2y * s3x) / p;\n    return s >= 0 && s <= 1 && t >= 0 && t <= 1;\n  }\n\n  /* Ellipse */\n\n  function ellipseWithLine(ellipse, line) {\n    var rex = ellipse.a;\n    var rey = ellipse.b;\n    var xe = ellipse.x;\n    var ye = ellipse.y;\n    var x1 = line.start.x - xe;\n    var x2 = line.end.x - xe;\n    var y1 = line.start.y - ye;\n    var y2 = line.end.y - ye;\n    var rex_2 = rex * rex;\n    var rey_2 = rey * rey;\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var A = dx * dx / rex_2 + dy * dy / rey_2;\n    var B = 2 * x1 * dx / rex_2 + 2 * y1 * dy / rey_2;\n    var C = x1 * x1 / rex_2 + y1 * y1 / rey_2 - 1;\n    var D = B * B - 4 * A * C;\n    if (D === 0) {\n      var t = -B / 2 / A;\n      return t >= 0 && t <= 1;\n    } else if (D > 0) {\n      var sqrt = Math.sqrt(D);\n      var t1 = (-B + sqrt) / 2 / A;\n      var t2 = (-B - sqrt) / 2 / A;\n      return t1 >= 0 && t1 <= 1 || t2 >= 0 && t2 <= 1;\n    }\n    return false;\n  }\n  function ellipseWithEllipse(ellipse1, ellipse2) {\n    return _ellipsesIntersection(ellipse1, 0, ellipse2, 0);\n  }\n\n  /* Rect */\n\n  function rectWithLine(rect, line) {\n    var start = line.start;\n    var end = line.end;\n    var x = rect.x;\n    var y = rect.y;\n    var width = rect.width;\n    var height = rect.height;\n    if (start.x > x + width && end.x > x + width || start.x < x && end.x < x || start.y > y + height && end.y > y + height || start.y < y && end.y < y) {\n      return false;\n    }\n    if (rect.containsPoint(line.start) || rect.containsPoint(line.end)) {\n      return true;\n    }\n    return lineWithLine(rect.topLine(), line) || lineWithLine(rect.rightLine(), line) || lineWithLine(rect.bottomLine(), line) || lineWithLine(rect.leftLine(), line);\n  }\n  function rectWithEllipse(rect, ellipse) {\n    if (!rectWithRect(rect, Rect.fromEllipse(ellipse))) {\n      return false;\n    }\n    return polygonWithEllipse(Polygon.fromRect(rect), ellipse);\n  }\n  function rectWithRect(rect1, rect2) {\n    return rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.y + rect1.height > rect2.y;\n  }\n\n  /* Polyline */\n\n  function polylineWithLine(polyline, line) {\n    return _polylineWithLine(polyline, line, {\n      interior: false\n    });\n  }\n  function polylineWithEllipse(polyline, ellipse) {\n    return _polylineWithEllipse(polyline, ellipse, {\n      interior: false\n    });\n  }\n  function polylineWithRect(polyline, rect) {\n    return _polylineWithRect(polyline, rect, {\n      interior: false\n    });\n  }\n  function polylineWithPolyline(polyline1, polyline2) {\n    return _polylineWithPolyline(polyline1, polyline2, {\n      interior: false\n    });\n  }\n\n  /* Polygon */\n\n  function polygonWithLine(polygon, line) {\n    return _polylineWithLine(polygon, line, {\n      interior: true\n    });\n  }\n  function polygonWithEllipse(polygon, ellipse) {\n    return _polylineWithEllipse(polygon, ellipse, {\n      interior: true\n    });\n  }\n  function polygonWithRect(polygon, rect) {\n    return _polylineWithRect(polygon, rect, {\n      interior: true\n    });\n  }\n  function polygonWithPolyline(polygon, polyline) {\n    return _polylineWithPolyline(polygon, polyline, {\n      interior: true\n    });\n  }\n  function polygonWithPolygon(polygon1, polygon2) {\n    return _polylineWithPolygon(polygon1, polygon2, {\n      interior: true\n    });\n  }\n\n  /* Path */\n\n  function pathWithLine(path, line, pathOpt) {\n    return path.getSubpaths().some(function (subpath) {\n      var ref = subpath.toPolylines(pathOpt);\n      var polyline = ref[0];\n      var ref$1 = subpath.getSegment(-1);\n      var type = ref$1.type;\n      if (type === 'Z') {\n        return polygonWithLine(polyline, line);\n      } else {\n        return polylineWithLine(polyline, line);\n      }\n    });\n  }\n  function pathWithEllipse(path, ellipse, pathOpt) {\n    return path.getSubpaths().some(function (subpath) {\n      var ref = subpath.toPolylines(pathOpt);\n      var polyline = ref[0];\n      var ref$1 = subpath.getSegment(-1);\n      var type = ref$1.type;\n      if (type === 'Z') {\n        return polygonWithEllipse(polyline, ellipse);\n      } else {\n        return polylineWithEllipse(polyline, ellipse);\n      }\n    });\n  }\n  function pathWithRect(path, rect, pathOpt) {\n    return pathWithPolygon(path, Polygon.fromRect(rect), pathOpt);\n  }\n  function pathWithPolyline(path, polyline, pathOpt) {\n    return _pathWithPolyline(path, polyline, pathOpt, {\n      interior: false\n    });\n  }\n  function pathWithPolygon(path, polygon, pathOpt) {\n    return _pathWithPolyline(path, polygon, pathOpt, {\n      interior: true\n    });\n  }\n  function pathWithPath(path1, path2, pathOpt1, pathOpt2) {\n    return path1.getSubpaths().some(function (subpath) {\n      var ref = subpath.toPolylines(pathOpt1);\n      var polyline1 = ref[0];\n      var ref$1 = subpath.getSegment(-1);\n      var type = ref$1.type;\n      if (type === 'Z') {\n        return pathWithPolygon(path2, polyline1, pathOpt2);\n      } else {\n        return pathWithPolyline(path2, polyline1, pathOpt2);\n      }\n    });\n  }\n  function _polylineWithLine(polyline, line, opt) {\n    if (opt === void 0) opt = {};\n    var interior = opt.interior;\n    if (interior === void 0) interior = false;\n    var thisPoints;\n    if (interior) {\n      if (polyline.containsPoint(line.start)) {\n        // If any point of the polyline lies inside this polygon (interior = true)\n        // there is an intersection (we've chosen the start point)\n        return true;\n      }\n      var start = polyline.start;\n      var end = polyline.end;\n      var points = polyline.points;\n      thisPoints = end.equals(start) ? points : points.concat([start]);\n    } else {\n      thisPoints = polyline.points;\n    }\n    var length = thisPoints.length;\n    var segment = new Line();\n    for (var i = 0; i < length - 1; i++) {\n      segment.start = thisPoints[i];\n      segment.end = thisPoints[i + 1];\n      if (lineWithLine(line, segment)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function _polylineWithEllipse(polyline, ellipse, opt) {\n    if (opt === void 0) opt = {};\n    var start = polyline.start;\n    var end = polyline.end;\n    var points = polyline.points;\n    if (ellipse.containsPoint(start)) {\n      return true;\n    }\n    var thisPoints;\n    var interior = opt.interior;\n    if (interior === void 0) interior = false;\n    if (interior) {\n      if (polyline.containsPoint(ellipse.center())) {\n        // If any point of the ellipse lies inside this polygon (interior = true)\n        // there is an intersection (we've chosen the center point)\n        return true;\n      }\n      thisPoints = end.equals(start) ? points : points.concat([start]);\n    } else {\n      thisPoints = points;\n    }\n    var length = thisPoints.length;\n    var segment = new Line();\n    for (var i = 0; i < length - 1; i++) {\n      segment.start = thisPoints[i];\n      segment.end = thisPoints[i + 1];\n      if (ellipseWithLine(ellipse, segment)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function _polylineWithRect(polyline, rect, opt) {\n    var polygon = Polygon.fromRect(rect);\n    return _polylineWithPolygon(polyline, polygon, opt);\n  }\n  function _pathWithPolyline(path, polyline1, pathOpt, opt) {\n    return path.getSubpaths().some(function (subpath) {\n      var ref = subpath.toPolylines(pathOpt);\n      var polyline2 = ref[0];\n      var ref$1 = subpath.getSegment(-1);\n      var type = ref$1.type;\n      if (type === 'Z') {\n        return _polylineWithPolygon(polyline1, polyline2, opt);\n      } else {\n        return _polylineWithPolyline(polyline1, polyline2, opt);\n      }\n    });\n  }\n  function _polylineWithPolyline(polyline1, polyline2, opt) {\n    if (opt === void 0) opt = {};\n    var interior = opt.interior;\n    if (interior === void 0) interior = false;\n    var thisPolyline;\n    if (interior) {\n      var start = polyline2.start;\n      if (polyline1.containsPoint(start)) {\n        // If any point of the polyline lies inside this polygon (interior = true)\n        // there is an intersection (we've chosen the start point)\n        return true;\n      }\n      thisPolyline = polyline1.clone().close();\n    } else {\n      thisPolyline = polyline1;\n    }\n    var otherPoints = polyline2.points;\n    var length = otherPoints.length;\n    var segment = new Line();\n    for (var i = 0; i < length - 1; i++) {\n      segment.start = otherPoints[i];\n      segment.end = otherPoints[i + 1];\n      if (polylineWithLine(thisPolyline, segment)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function _polylineWithPolygon(polyline, polygon, opt) {\n    return polygon.containsPoint(polyline.start) || _polylineWithPolyline(polyline, polygon.clone().close(), opt);\n  }\n  function _ellipsesIntersection(e1, w1, e2, w2) {\n    var cos = Math.cos;\n    var sin = Math.sin;\n    var sinW1 = sin(w1);\n    var cosW1 = cos(w1);\n    var sinW2 = sin(w2);\n    var cosW2 = cos(w2);\n    var sinW1s = sinW1 * sinW1;\n    var cosW1s = cosW1 * cosW1;\n    var sinCos1 = sinW1 * cosW1;\n    var sinW2s = sinW2 * sinW2;\n    var cosW2s = cosW2 * cosW2;\n    var sinCos2 = sinW2 * cosW2;\n    var a1s = e1.a * e1.a;\n    var b1s = e1.b * e1.b;\n    var a2s = e2.a * e2.a;\n    var b2s = e2.b * e2.b;\n    var A1 = a1s * sinW1s + b1s * cosW1s;\n    var A2 = a2s * sinW2s + b2s * cosW2s;\n    var B1 = a1s * cosW1s + b1s * sinW1s;\n    var B2 = a2s * cosW2s + b2s * sinW2s;\n    var C1 = 2 * (b1s - a1s) * sinCos1;\n    var C2 = 2 * (b2s - a2s) * sinCos2;\n    var D1 = -2 * A1 * e1.x - C1 * e1.y;\n    var D2 = -2 * A2 * e2.x - C2 * e2.y;\n    var E1 = -C1 * e1.x - 2 * B1 * e1.y;\n    var E2 = -C2 * e2.x - 2 * B2 * e2.y;\n    var F1 = A1 * e1.x * e1.x + B1 * e1.y * e1.y + C1 * e1.x * e1.y - a1s * b1s;\n    var F2 = A2 * e2.x * e2.x + B2 * e2.y * e2.y + C2 * e2.x * e2.y - a2s * b2s;\n    C1 = C1 / 2;\n    C2 = C2 / 2;\n    D1 = D1 / 2;\n    D2 = D2 / 2;\n    E1 = E1 / 2;\n    E2 = E2 / 2;\n    var l3 = det3([[A1, C1, D1], [C1, B1, E1], [D1, E1, F1]]);\n    var l0 = det3([[A2, C2, D2], [C2, B2, E2], [D2, E2, F2]]);\n    var l2 = 0.33333333 * (det3([[A2, C1, D1], [C2, B1, E1], [D2, E1, F1]]) + det3([[A1, C2, D1], [C1, B2, E1], [D1, E2, F1]]) + det3([[A1, C1, D2], [C1, B1, E2], [D1, E1, F2]]));\n    var l1 = 0.33333333 * (det3([[A1, C2, D2], [C1, B2, E2], [D1, E2, F2]]) + det3([[A2, C1, D2], [C2, B1, E2], [D2, E1, F2]]) + det3([[A2, C2, D1], [C2, B2, E1], [D2, E2, F1]]));\n    var delta1 = det2([[l3, l2], [l2, l1]]);\n    var delta2 = det2([[l3, l1], [l2, l0]]);\n    var delta3 = det2([[l2, l1], [l1, l0]]);\n    var dP = det2([[2 * delta1, delta2], [delta2, 2 * delta3]]);\n    if (dP > 0 && (l1 > 0 || l2 > 0)) {\n      return false;\n    }\n    return true;\n  }\n  function det2(m) {\n    return m[0][0] * m[1][1] - m[0][1] * m[1][0];\n  }\n  function det3(m) {\n    return m[0][0] * m[1][1] * m[2][2] - m[0][0] * m[1][2] * m[2][1] - m[0][1] * m[1][0] * m[2][2] + m[0][1] * m[1][2] * m[2][0] + m[0][2] * m[1][0] * m[2][1] - m[0][2] * m[1][1] * m[2][0];\n  }\n  var _intersection = {\n    exists: exists,\n    lineWithLine: lineWithLine,\n    ellipseWithLine: ellipseWithLine,\n    ellipseWithEllipse: ellipseWithEllipse,\n    rectWithLine: rectWithLine,\n    rectWithEllipse: rectWithEllipse,\n    rectWithRect: rectWithRect,\n    polylineWithLine: polylineWithLine,\n    polylineWithEllipse: polylineWithEllipse,\n    polylineWithRect: polylineWithRect,\n    polylineWithPolyline: polylineWithPolyline,\n    polygonWithLine: polygonWithLine,\n    polygonWithEllipse: polygonWithEllipse,\n    polygonWithRect: polygonWithRect,\n    polygonWithPolyline: polygonWithPolyline,\n    polygonWithPolygon: polygonWithPolygon,\n    pathWithLine: pathWithLine,\n    pathWithEllipse: pathWithEllipse,\n    pathWithRect: pathWithRect,\n    pathWithPolyline: pathWithPolyline,\n    pathWithPolygon: pathWithPolygon,\n    pathWithPath: pathWithPath\n  };\n\n  // Geometry library.\n  var intersection = _intersection;\n  var g = {\n    intersection: intersection,\n    scale: scale,\n    normalizeAngle: normalizeAngle,\n    snapToGrid: snapToGrid,\n    toDeg: toDeg,\n    toRad: toRad,\n    random: random,\n    bezier: bezier,\n    Curve: Curve,\n    Ellipse: Ellipse,\n    ellipse: ellipse,\n    Line: Line,\n    line: line,\n    Path: Path,\n    Point: Point,\n    point: point,\n    Polyline: Polyline,\n    Polygon: Polygon,\n    Rect: Rect,\n    rect: rect,\n    types: types\n  };\n\n  // Vectorizer.\n\n  var V = function () {\n    var hasSvg = typeof window === 'object' && !!window.SVGAngle;\n\n    // SVG support is required.\n    if (!hasSvg) {\n      // Return a function that throws an error when it is used.\n      return function () {\n        throw new Error('SVG is required to use Vectorizer.');\n      };\n    }\n\n    // XML namespaces.\n    var ns = {\n      svg: 'http://www.w3.org/2000/svg',\n      xmlns: 'http://www.w3.org/2000/xmlns/',\n      xml: 'http://www.w3.org/XML/1998/namespace',\n      xlink: 'http://www.w3.org/1999/xlink',\n      xhtml: 'http://www.w3.org/1999/xhtml'\n    };\n    var SVGVersion = '1.1';\n\n    // Declare shorthands to the most used math functions.\n    var math = Math;\n    var PI = math.PI;\n    var atan2 = math.atan2;\n    var sqrt = math.sqrt;\n    var min = math.min;\n    var max = math.max;\n    var cos = math.cos;\n    var sin = math.sin;\n    var V = function (el, attrs, children) {\n      // This allows using V() without the new keyword.\n      if (!(this instanceof V)) {\n        return V.apply(Object.create(V.prototype), arguments);\n      }\n      if (!el) {\n        return;\n      }\n      if (V.isV(el)) {\n        el = el.node;\n      }\n      attrs = attrs || {};\n      if (V.isString(el)) {\n        el = el.trim();\n        if (el.toLowerCase() === 'svg') {\n          // Create a new SVG canvas.\n          el = V.createSvgDocument();\n        } else if (el[0] === '<') {\n          // Create element from an SVG string.\n          // Allows constructs of type: `document.appendChild(V('<rect></rect>').node)`.\n\n          var svgDoc = V.createSvgDocument(el);\n\n          // Note that `V()` might also return an array should the SVG string passed as\n          // the first argument contain more than one root element.\n          if (svgDoc.childNodes.length > 1) {\n            // Map child nodes to `V`s.\n            var arrayOfVels = [];\n            var i, len;\n            for (i = 0, len = svgDoc.childNodes.length; i < len; i++) {\n              var childNode = svgDoc.childNodes[i];\n              arrayOfVels.push(new V(document.importNode(childNode, true)));\n            }\n            return arrayOfVels;\n          }\n          el = document.importNode(svgDoc.firstChild, true);\n        } else {\n          el = document.createElementNS(ns.svg, el);\n        }\n        V.ensureId(el);\n      }\n      this.node = el;\n      this.setAttributes(attrs);\n      if (children) {\n        this.append(children);\n      }\n      return this;\n    };\n    var VPrototype = V.prototype;\n    Object.defineProperty(VPrototype, 'id', {\n      enumerable: true,\n      get: function () {\n        return this.node.id;\n      },\n      set: function (id) {\n        this.node.id = id;\n      }\n    });\n\n    /**\n     * @param {SVGGElement} toElem\n     * @returns {SVGMatrix}\n     */\n    VPrototype.getTransformToElement = function (target) {\n      var node = this.node;\n      if (V.isSVGGraphicsElement(target) && V.isSVGGraphicsElement(node)) {\n        var targetCTM = V.toNode(target).getScreenCTM();\n        var nodeCTM = node.getScreenCTM();\n        if (targetCTM && nodeCTM) {\n          return targetCTM.inverse().multiply(nodeCTM);\n        }\n      }\n      // Could not get actual transformation matrix\n      return V.createSVGMatrix();\n    };\n\n    /**\n     * @param {SVGMatrix} matrix\n     * @param {Object=} opt\n     * @returns {Vectorizer|SVGMatrix} Setter / Getter\n     */\n    VPrototype.transform = function (matrix, opt) {\n      var node = this.node;\n      if (V.isUndefined(matrix)) {\n        return V.transformStringToMatrix(this.attr('transform'));\n      }\n      if (opt && opt.absolute) {\n        return this.attr('transform', V.matrixToTransformString(matrix));\n      }\n      var svgTransform = V.createSVGTransform(matrix);\n      node.transform.baseVal.appendItem(svgTransform);\n      return this;\n    };\n    VPrototype.translate = function (tx, ty, opt) {\n      opt = opt || {};\n      ty = ty || 0;\n      var transformAttr = this.attr('transform') || '';\n      var transform = V.parseTransformString(transformAttr);\n      transformAttr = transform.value;\n      // Is it a getter?\n      if (V.isUndefined(tx)) {\n        return transform.translate;\n      }\n      transformAttr = transformAttr.replace(/translate\\([^)]*\\)/g, '').trim();\n      var newTx = opt.absolute ? tx : transform.translate.tx + tx;\n      var newTy = opt.absolute ? ty : transform.translate.ty + ty;\n      var newTranslate = 'translate(' + newTx + ',' + newTy + ')';\n\n      // Note that `translate()` is always the first transformation. This is\n      // usually the desired case.\n      this.attr('transform', (newTranslate + ' ' + transformAttr).trim());\n      return this;\n    };\n    VPrototype.rotate = function (angle, cx, cy, opt) {\n      opt = opt || {};\n      var transformAttr = this.attr('transform') || '';\n      var transform = V.parseTransformString(transformAttr);\n      transformAttr = transform.value;\n\n      // Is it a getter?\n      if (V.isUndefined(angle)) {\n        return transform.rotate;\n      }\n      transformAttr = transformAttr.replace(/rotate\\([^)]*\\)/g, '').trim();\n      angle %= 360;\n      var newAngle = opt.absolute ? angle : transform.rotate.angle + angle;\n      var newOrigin = cx !== undefined && cy !== undefined ? ',' + cx + ',' + cy : '';\n      var newRotate = 'rotate(' + newAngle + newOrigin + ')';\n      this.attr('transform', (transformAttr + ' ' + newRotate).trim());\n      return this;\n    };\n\n    // Note that `scale` as the only transformation does not combine with previous values.\n    VPrototype.scale = function (sx, sy) {\n      sy = V.isUndefined(sy) ? sx : sy;\n      var transformAttr = this.attr('transform') || '';\n      var transform = V.parseTransformString(transformAttr);\n      transformAttr = transform.value;\n\n      // Is it a getter?\n      if (V.isUndefined(sx)) {\n        return transform.scale;\n      }\n      transformAttr = transformAttr.replace(/scale\\([^)]*\\)/g, '').trim();\n      var newScale = 'scale(' + sx + ',' + sy + ')';\n      this.attr('transform', (transformAttr + ' ' + newScale).trim());\n      return this;\n    };\n\n    // Get SVGRect that contains coordinates and dimension of the real bounding box,\n    // i.e. after transformations are applied.\n    // If `target` is specified, bounding box will be computed relatively to `target` element.\n    VPrototype.bbox = function (withoutTransformations, target) {\n      var box;\n      var node = this.node;\n      var ownerSVGElement = node.ownerSVGElement;\n\n      // If the element is not in the live DOM, it does not have a bounding box defined and\n      // so fall back to 'zero' dimension element.\n      if (!ownerSVGElement) {\n        return new Rect(0, 0, 0, 0);\n      }\n      try {\n        box = node.getBBox();\n      } catch (e) {\n        // Fallback for IE.\n        box = {\n          x: node.clientLeft,\n          y: node.clientTop,\n          width: node.clientWidth,\n          height: node.clientHeight\n        };\n      }\n      if (withoutTransformations) {\n        return new Rect(box);\n      }\n      var matrix = this.getTransformToElement(target || ownerSVGElement);\n      return V.transformRect(box, matrix);\n    };\n\n    // Returns an SVGRect that contains coordinates and dimensions of the real bounding box,\n    // i.e. after transformations are applied.\n    // Fixes a browser implementation bug that returns incorrect bounding boxes for groups of svg elements.\n    // Takes an (Object) `opt` argument (optional) with the following attributes:\n    // (Object) `target` (optional): if not undefined, transform bounding boxes relative to `target`; if undefined, transform relative to this\n    // (Boolean) `recursive` (optional): if true, recursively enter all groups and get a union of element bounding boxes (svg bbox fix); if false or undefined, return result of native function this.node.getBBox();\n    VPrototype.getBBox = function (opt) {\n      var options = {};\n      var outputBBox;\n      var node = this.node;\n      var ownerSVGElement = node.ownerSVGElement;\n\n      // If the element is not in the live DOM, it does not have a bounding box defined and\n      // so fall back to 'zero' dimension element.\n      // If the element is not an SVGGraphicsElement, we could not measure the bounding box either\n      if (!ownerSVGElement || !V.isSVGGraphicsElement(node)) {\n        return new Rect(0, 0, 0, 0);\n      }\n      if (opt) {\n        if (opt.target) {\n          // check if target exists\n          options.target = V.toNode(opt.target); // works for V objects, jquery objects, and node objects\n        }\n        if (opt.recursive) {\n          options.recursive = opt.recursive;\n        }\n      }\n      if (!options.recursive) {\n        try {\n          outputBBox = node.getBBox();\n        } catch (e) {\n          // Fallback for IE.\n          outputBBox = {\n            x: node.clientLeft,\n            y: node.clientTop,\n            width: node.clientWidth,\n            height: node.clientHeight\n          };\n        }\n        if (!options.target) {\n          // transform like this (that is, not at all)\n          return new Rect(outputBBox);\n        } else {\n          // transform like target\n          var matrix = this.getTransformToElement(options.target);\n          return V.transformRect(outputBBox, matrix);\n        }\n      } else {\n        // if we want to calculate the bbox recursively\n        // browsers report correct bbox around svg elements (one that envelops the path lines tightly)\n        // but some browsers fail to report the same bbox when the elements are in a group (returning a looser bbox that also includes control points, like node.getClientRect())\n        // this happens even if we wrap a single svg element into a group!\n        // this option setting makes the function recursively enter all the groups from this and deeper, get bboxes of the elements inside, then return a union of those bboxes\n\n        var children = this.children();\n        var n = children.length;\n        if (n === 0) {\n          return this.getBBox({\n            target: options.target,\n            recursive: false\n          });\n        }\n\n        // recursion's initial pass-through setting:\n        // recursive passes-through just keep the target as whatever was set up here during the initial pass-through\n        if (!options.target) {\n          // transform children/descendants like this (their parent/ancestor)\n          options.target = this;\n        } // else transform children/descendants like target\n\n        for (var i = 0; i < n; i++) {\n          var currentChild = children[i];\n          var childBBox;\n\n          // if currentChild is not a group element, get its bbox with a nonrecursive call\n          if (currentChild.children().length === 0) {\n            childBBox = currentChild.getBBox({\n              target: options.target,\n              recursive: false\n            });\n          } else {\n            // if currentChild is a group element (determined by checking the number of children), enter it with a recursive call\n            childBBox = currentChild.getBBox({\n              target: options.target,\n              recursive: true\n            });\n          }\n          if (!outputBBox) {\n            // if this is the first iteration\n            outputBBox = childBBox;\n          } else {\n            // make a new bounding box rectangle that contains this child's bounding box and previous bounding box\n            outputBBox = outputBBox.union(childBBox);\n          }\n        }\n        return outputBBox;\n      }\n    };\n\n    // Text() helpers\n\n    function createTextPathNode(attrs, vel) {\n      attrs || (attrs = {});\n      var textPathElement = V('textPath');\n      var d = attrs.d;\n      if (d && attrs['xlink:href'] === undefined) {\n        // If `opt.attrs` is a plain string, consider it to be directly the\n        // SVG path data for the text to go along (this is a shortcut).\n        // Otherwise if it is an object and contains the `d` property, then this is our path.\n        // Wrap the text in the SVG <textPath> element that points\n        // to a path defined by `opt.attrs` inside the `<defs>` element.\n        var linkedPath = V('path').attr('d', d).appendTo(vel.defs());\n        textPathElement.attr('xlink:href', '#' + linkedPath.id);\n      }\n      if (V.isObject(attrs)) {\n        // Set attributes on the `<textPath>`. The most important one\n        // is the `xlink:href` that points to our newly created `<path/>` element in `<defs/>`.\n        // Note that we also allow the following construct:\n        // `t.text('my text', { textPath: { 'xlink:href': '#my-other-path' } })`.\n        // In other words, one can completely skip the auto-creation of the path\n        // and use any other arbitrary path that is in the document.\n        textPathElement.attr(attrs);\n      }\n      return textPathElement.node;\n    }\n    function annotateTextLine(lineNode, lineAnnotations, opt) {\n      opt || (opt = {});\n      var includeAnnotationIndices = opt.includeAnnotationIndices;\n      var eol = opt.eol;\n      var lineHeight = opt.lineHeight;\n      var baseSize = opt.baseSize;\n      var maxFontSize = 0;\n      var fontMetrics = {};\n      var lastJ = lineAnnotations.length - 1;\n      for (var j = 0; j <= lastJ; j++) {\n        var annotation = lineAnnotations[j];\n        var fontSize = null;\n        if (V.isObject(annotation)) {\n          var annotationAttrs = annotation.attrs;\n          var vTSpan = V('tspan', annotationAttrs);\n          var tspanNode = vTSpan.node;\n          var t = annotation.t;\n          if (eol && j === lastJ) {\n            t += eol;\n          }\n          tspanNode.textContent = t;\n          // Per annotation className\n          var annotationClass = annotationAttrs['class'];\n          if (annotationClass) {\n            vTSpan.addClass(annotationClass);\n          }\n          // If `opt.includeAnnotationIndices` is `true`,\n          // set the list of indices of all the applied annotations\n          // in the `annotations` attribute. This list is a comma\n          // separated list of indices.\n          if (includeAnnotationIndices) {\n            vTSpan.attr('annotations', annotation.annotations);\n          }\n          // Check for max font size\n          fontSize = parseFloat(annotationAttrs['font-size']);\n          if (!isFinite(fontSize)) {\n            fontSize = baseSize;\n          }\n          if (fontSize && fontSize > maxFontSize) {\n            maxFontSize = fontSize;\n          }\n        } else {\n          if (eol && j === lastJ) {\n            annotation += eol;\n          }\n          tspanNode = document.createTextNode(annotation || ' ');\n          if (baseSize && baseSize > maxFontSize) {\n            maxFontSize = baseSize;\n          }\n        }\n        lineNode.appendChild(tspanNode);\n      }\n      if (maxFontSize) {\n        fontMetrics.maxFontSize = maxFontSize;\n      }\n      if (lineHeight) {\n        fontMetrics.lineHeight = lineHeight;\n      } else if (maxFontSize) {\n        fontMetrics.lineHeight = maxFontSize * 1.2;\n      }\n      return fontMetrics;\n    }\n    var emRegex = /em$/;\n    function convertEmToPx(em, fontSize) {\n      var numerical = parseFloat(em);\n      if (emRegex.test(em)) {\n        return numerical * fontSize;\n      }\n      return numerical;\n    }\n    function calculateDY(alignment, linesMetrics, baseSizePx, lineHeight) {\n      if (!Array.isArray(linesMetrics)) {\n        return 0;\n      }\n      var n = linesMetrics.length;\n      if (!n) {\n        return 0;\n      }\n      var lineMetrics = linesMetrics[0];\n      var flMaxFont = convertEmToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n      var rLineHeights = 0;\n      var lineHeightPx = convertEmToPx(lineHeight, baseSizePx);\n      for (var i = 1; i < n; i++) {\n        lineMetrics = linesMetrics[i];\n        var iLineHeight = convertEmToPx(lineMetrics.lineHeight, baseSizePx) || lineHeightPx;\n        rLineHeights += iLineHeight;\n      }\n      var llMaxFont = convertEmToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n      var dy;\n      switch (alignment) {\n        case 'middle':\n          dy = flMaxFont / 2 - 0.15 * llMaxFont - rLineHeights / 2;\n          break;\n        case 'bottom':\n          dy = -(0.25 * llMaxFont) - rLineHeights;\n          break;\n        default:\n        case 'top':\n          dy = 0.8 * flMaxFont;\n          break;\n      }\n      return dy;\n    }\n    VPrototype.text = function (content, opt) {\n      if (content && typeof content !== 'string') {\n        throw new Error('Vectorizer: text() expects the first argument to be a string.');\n      }\n\n      // Replace all spaces with the Unicode No-break space (http://www.fileformat.info/info/unicode/char/a0/index.htm).\n      // IE would otherwise collapse all spaces into one.\n      content = V.sanitizeText(content);\n      opt || (opt = {});\n      // Should we allow the text to be selected?\n      var displayEmpty = opt.displayEmpty;\n      // End of Line character\n      var eol = opt.eol;\n      // Text along path\n      var textPath = opt.textPath;\n      // Vertical shift\n      var verticalAnchor = opt.textVerticalAnchor;\n      var namedVerticalAnchor = verticalAnchor === 'middle' || verticalAnchor === 'bottom' || verticalAnchor === 'top';\n      // Horizontal shift applied to all the lines but the first.\n      var x = opt.x;\n      if (x === undefined) {\n        x = this.attr('x') || 0;\n      }\n      // Annotations\n      var iai = opt.includeAnnotationIndices;\n      var annotations = opt.annotations;\n      if (annotations && !V.isArray(annotations)) {\n        annotations = [annotations];\n      }\n      // Shift all the <tspan> but first by one line (`1em`)\n      var defaultLineHeight = opt.lineHeight;\n      var autoLineHeight = defaultLineHeight === 'auto';\n      var lineHeight = autoLineHeight ? '1.5em' : defaultLineHeight || '1em';\n      // Clearing the element\n      this.empty();\n      this.attr({\n        // Preserve spaces. In other words, we do not want consecutive spaces to get collapsed to one.\n        'xml:space': 'preserve',\n        // An empty text gets rendered into the DOM in webkit-based browsers.\n        // In order to unify this behaviour across all browsers\n        // we rather hide the text element when it's empty.\n        'display': content || displayEmpty ? null : 'none'\n      });\n\n      // Set default font-size if none\n      var fontSize = parseFloat(this.attr('font-size'));\n      if (!fontSize) {\n        fontSize = 16;\n        if (namedVerticalAnchor || annotations) {\n          this.attr('font-size', fontSize);\n        }\n      }\n      var doc = document;\n      var containerNode;\n      if (textPath) {\n        // Now all the `<tspan>`s will be inside the `<textPath>`.\n        if (typeof textPath === 'string') {\n          textPath = {\n            d: textPath\n          };\n        }\n        containerNode = createTextPathNode(textPath, this);\n      } else {\n        containerNode = doc.createDocumentFragment();\n      }\n      var offset = 0;\n      var lines = content.split('\\n');\n      var linesMetrics = [];\n      var annotatedY;\n      for (var i = 0, lastI = lines.length - 1; i <= lastI; i++) {\n        var dy = lineHeight;\n        var lineClassName = 'v-line';\n        var lineNode = doc.createElementNS(ns.svg, 'tspan');\n        var line = lines[i];\n        var lineMetrics;\n        if (line) {\n          if (annotations) {\n            // Find the *compacted* annotations for this line.\n            var lineAnnotations = V.annotateString(line, annotations, {\n              offset: -offset,\n              includeAnnotationIndices: iai\n            });\n            lineMetrics = annotateTextLine(lineNode, lineAnnotations, {\n              includeAnnotationIndices: iai,\n              eol: i !== lastI && eol,\n              lineHeight: autoLineHeight ? null : lineHeight,\n              baseSize: fontSize\n            });\n            // Get the line height based on the biggest font size in the annotations for this line.\n            var iLineHeight = lineMetrics.lineHeight;\n            if (iLineHeight && autoLineHeight && i !== 0) {\n              dy = iLineHeight;\n            }\n            if (i === 0) {\n              annotatedY = lineMetrics.maxFontSize * 0.8;\n            }\n          } else {\n            if (eol && i !== lastI) {\n              line += eol;\n            }\n            lineNode.textContent = line;\n          }\n        } else {\n          // Make sure the textContent is never empty. If it is, add a dummy\n          // character and make it invisible, making the following lines correctly\n          // relatively positioned. `dy=1em` won't work with empty lines otherwise.\n          lineNode.textContent = '-';\n          lineClassName += ' v-empty-line';\n          // 'opacity' needs to be specified with fill, stroke. Opacity without specification\n          // is not applied in Firefox\n          var lineNodeStyle = lineNode.style;\n          lineNodeStyle.fillOpacity = 0;\n          lineNodeStyle.strokeOpacity = 0;\n          if (annotations) {\n            // Empty line with annotations.\n            lineMetrics = {};\n            lineAnnotations = V.findAnnotationsAtIndex(annotations, offset);\n            var lineFontSize = fontSize;\n            // Check if any of the annotations overrides the font size.\n            for (var j = lineAnnotations.length; j > 0; j--) {\n              var attrs = lineAnnotations[j - 1].attrs;\n              if (!attrs || !('font-size' in attrs)) {\n                continue;\n              }\n              var fs = parseFloat(attrs['font-size']);\n              if (isFinite(fs)) {\n                lineFontSize = fs;\n                break;\n              }\n            }\n            if (autoLineHeight) {\n              if (i > 0) {\n                dy = lineFontSize * 1.2;\n              } else {\n                annotatedY = lineFontSize * 0.8;\n              }\n            }\n            // The font size is important for the native selection box height.\n            lineNode.setAttribute('font-size', lineFontSize);\n            lineMetrics.maxFontSize = lineFontSize;\n          }\n        }\n        if (lineMetrics) {\n          linesMetrics.push(lineMetrics);\n        }\n        if (i > 0) {\n          lineNode.setAttribute('dy', dy);\n        }\n        // Firefox requires 'x' to be set on the first line when inside a text path\n        if (i > 0 || textPath) {\n          lineNode.setAttribute('x', x);\n        }\n        lineNode.className.baseVal = lineClassName;\n        containerNode.appendChild(lineNode);\n        offset += line.length + 1; // + 1 = newline character.\n      }\n      // Y Alignment calculation\n      if (namedVerticalAnchor) {\n        if (annotations) {\n          dy = calculateDY(verticalAnchor, linesMetrics, fontSize, lineHeight);\n        } else if (verticalAnchor === 'top') {\n          // A shortcut for top alignment. It does not depend on font-size nor line-height\n          dy = '0.8em';\n        } else {\n          var rh; // remaining height\n          if (lastI > 0) {\n            rh = parseFloat(lineHeight) || 1;\n            rh *= lastI;\n            if (!emRegex.test(lineHeight)) {\n              rh /= fontSize;\n            }\n          } else {\n            // Single-line text\n            rh = 0;\n          }\n          switch (verticalAnchor) {\n            case 'middle':\n              dy = 0.3 - rh / 2 + 'em';\n              break;\n            case 'bottom':\n              dy = -rh - 0.3 + 'em';\n              break;\n          }\n        }\n      } else {\n        if (verticalAnchor === 0) {\n          dy = '0em';\n        } else if (verticalAnchor) {\n          dy = verticalAnchor;\n        } else {\n          // No vertical anchor is defined\n          dy = 0;\n          // Backwards compatibility - we change the `y` attribute instead of `dy`.\n          if (this.attr('y') === null) {\n            this.attr('y', annotatedY || '0.8em');\n          }\n        }\n      }\n      containerNode.firstChild.setAttribute('dy', dy);\n      // Appending lines to the element.\n      this.append(containerNode);\n      return this;\n    };\n\n    /**\n     * @public\n     * @param {string} name\n     * @returns {Vectorizer}\n     */\n    VPrototype.removeAttr = function (name) {\n      var trueName = attributeNames[name];\n      var ref = V.qualifyAttr(trueName);\n      var ns = ref.ns;\n      var local = ref.local;\n      var el = this.node;\n      if (ns) {\n        if (el.hasAttributeNS(ns, local)) {\n          el.removeAttributeNS(ns, local);\n        }\n      } else if (el.hasAttribute(trueName)) {\n        el.removeAttribute(trueName);\n      }\n      return this;\n    };\n    VPrototype.attr = function (name, value) {\n      if (V.isUndefined(name)) {\n        // Return all attributes.\n        var attributes = this.node.attributes;\n        var attrs = {};\n        for (var i = 0; i < attributes.length; i++) {\n          attrs[attributes[i].name] = attributes[i].value;\n        }\n        return attrs;\n      }\n      if (V.isString(name) && V.isUndefined(value)) {\n        return this.node.getAttribute(attributeNames[name]);\n      }\n      if (typeof name === 'object') {\n        for (var attrName in name) {\n          if (name.hasOwnProperty(attrName)) {\n            this.setAttribute(attrName, name[attrName]);\n          }\n        }\n      } else {\n        this.setAttribute(name, value);\n      }\n      return this;\n    };\n    VPrototype.normalizePath = function () {\n      var tagName = this.tagName();\n      if (tagName === 'PATH') {\n        this.attr('d', V.normalizePathData(this.attr('d')));\n      }\n      return this;\n    };\n    VPrototype.remove = function () {\n      if (this.node.parentNode) {\n        this.node.parentNode.removeChild(this.node);\n      }\n      return this;\n    };\n    VPrototype.empty = function () {\n      while (this.node.firstChild) {\n        this.node.removeChild(this.node.firstChild);\n      }\n      return this;\n    };\n\n    /**\n     * @private\n     * @param {object} attrs\n     * @returns {Vectorizer}\n     */\n    VPrototype.setAttributes = function (attrs) {\n      for (var key in attrs) {\n        if (attrs.hasOwnProperty(key)) {\n          this.setAttribute(key, attrs[key]);\n        }\n      }\n      return this;\n    };\n    VPrototype.append = function (els) {\n      if (!V.isArray(els)) {\n        els = [els];\n      }\n      for (var i = 0, len = els.length; i < len; i++) {\n        this.node.appendChild(V.toNode(els[i])); // lgtm [js/xss-through-dom]\n      }\n      return this;\n    };\n    VPrototype.prepend = function (els) {\n      var child = this.node.firstChild;\n      return child ? V(child).before(els) : this.append(els);\n    };\n    VPrototype.before = function (els) {\n      var node = this.node;\n      var parent = node.parentNode;\n      if (parent) {\n        if (!V.isArray(els)) {\n          els = [els];\n        }\n        for (var i = 0, len = els.length; i < len; i++) {\n          parent.insertBefore(V.toNode(els[i]), node);\n        }\n      }\n      return this;\n    };\n    VPrototype.appendTo = function (node) {\n      V.toNode(node).appendChild(this.node); // lgtm [js/xss-through-dom]\n      return this;\n    };\n    VPrototype.svg = function () {\n      return this.node instanceof window.SVGSVGElement ? this : V(this.node.ownerSVGElement);\n    };\n    VPrototype.tagName = function () {\n      return this.node.tagName.toUpperCase();\n    };\n    VPrototype.defs = function () {\n      var context = this.svg() || this;\n      var defsNode = context.node.getElementsByTagName('defs')[0];\n      if (defsNode) {\n        return V(defsNode);\n      }\n      return V('defs').appendTo(context);\n    };\n    VPrototype.clone = function () {\n      var clone = V(this.node.cloneNode(true /* deep */));\n      // Note that clone inherits also ID. Therefore, we need to change it here.\n      clone.node.id = V.uniqueId();\n      return clone;\n    };\n    VPrototype.findOne = function (selector) {\n      var found = this.node.querySelector(selector);\n      return found ? V(found) : undefined;\n    };\n    VPrototype.find = function (selector) {\n      var vels = [];\n      var nodes = this.node.querySelectorAll(selector);\n      if (nodes) {\n        // Map DOM elements to `V`s.\n        for (var i = 0; i < nodes.length; i++) {\n          vels.push(V(nodes[i]));\n        }\n      }\n      return vels;\n    };\n\n    // Returns an array of V elements made from children of this.node.\n    VPrototype.children = function () {\n      var children = this.node.childNodes;\n      var outputArray = [];\n      for (var i = 0; i < children.length; i++) {\n        var currentChild = children[i];\n        if (currentChild.nodeType === 1) {\n          outputArray.push(V(children[i]));\n        }\n      }\n      return outputArray;\n    };\n\n    // Returns the V element from parentNode of this.node.\n    VPrototype.parent = function () {\n      return V(this.node.parentNode) || null;\n    },\n    // Find an index of an element inside its container.\n    VPrototype.index = function () {\n      var index = 0;\n      var node = this.node.previousSibling;\n      while (node) {\n        // nodeType 1 for ELEMENT_NODE\n        if (node.nodeType === 1) {\n          index++;\n        }\n        node = node.previousSibling;\n      }\n      return index;\n    };\n    VPrototype.findParentByClass = function (className, terminator) {\n      var ownerSVGElement = this.node.ownerSVGElement;\n      var node = this.node.parentNode;\n      while (node && node !== terminator && node !== ownerSVGElement) {\n        var vel = V(node);\n        if (vel.hasClass(className)) {\n          return vel;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    // https://jsperf.com/get-common-parent\n    VPrototype.contains = function (el) {\n      var a = this.node;\n      var b = V.toNode(el);\n      var bup = b && b.parentNode;\n      return a === bup || !!(bup && bup.nodeType === 1 && a.compareDocumentPosition(bup) & 16);\n    };\n\n    // Convert global point into the coordinate space of this element.\n    VPrototype.toLocalPoint = function (x, y) {\n      var svg = this.svg().node;\n      var p = svg.createSVGPoint();\n      p.x = x;\n      p.y = y;\n      try {\n        var globalPoint = p.matrixTransform(svg.getScreenCTM().inverse());\n        var globalToLocalMatrix = this.getTransformToElement(svg).inverse();\n      } catch (e) {\n        // IE9 throws an exception in odd cases. (`Unexpected call to method or property access`)\n        // We have to make do with the original coordianates.\n        return p;\n      }\n      return globalPoint.matrixTransform(globalToLocalMatrix);\n    };\n    VPrototype.translateCenterToPoint = function (p) {\n      var bbox = this.getBBox({\n        target: this.svg()\n      });\n      var center = bbox.center();\n      this.translate(p.x - center.x, p.y - center.y);\n      return this;\n    };\n\n    // Efficiently auto-orient an element. This basically implements the orient=auto attribute\n    // of markers. The easiest way of understanding on what this does is to imagine the element is an\n    // arrowhead. Calling this method on the arrowhead makes it point to the `position` point while\n    // being auto-oriented (properly rotated) towards the `reference` point.\n    // `target` is the element relative to which the transformations are applied. Usually a viewport.\n    VPrototype.translateAndAutoOrient = function (position, reference, target) {\n      position = new Point(position);\n      reference = new Point(reference);\n      target || (target = this.svg());\n\n      // Clean-up previously set transformations except the scale. If we didn't clean up the\n      // previous transformations then they'd add up with the old ones. Scale is an exception as\n      // it doesn't add up, consider: `this.scale(2).scale(2).scale(2)`. The result is that the\n      // element is scaled by the factor 2, not 8.\n      var scale = this.scale();\n      this.attr('transform', '');\n      var bbox = this.getBBox({\n        target: target\n      }).scale(scale.sx, scale.sy);\n\n      // 1. Translate to origin.\n      var translateToOrigin = V.createSVGTransform();\n      translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n\n      // 2. Rotate around origin.\n      var rotateAroundOrigin = V.createSVGTransform();\n      var angle = position.angleBetween(reference, position.clone().offset(1, 0));\n      if (angle) {\n        rotateAroundOrigin.setRotate(angle, 0, 0);\n      }\n\n      // 3. Translate to the `position` + the offset (half my width) towards the `reference` point.\n      var translateFromOrigin = V.createSVGTransform();\n      var finalPosition = position.clone().move(reference, bbox.width / 2);\n      translateFromOrigin.setTranslate(2 * position.x - finalPosition.x, 2 * position.y - finalPosition.y);\n\n      // 4. Get the current transformation matrix of this node\n      var ctm = this.getTransformToElement(target);\n\n      // 5. Apply transformations and the scale\n      var transform = V.createSVGTransform();\n      transform.setMatrix(translateFromOrigin.matrix.multiply(rotateAroundOrigin.matrix.multiply(translateToOrigin.matrix.multiply(ctm.scale(scale.sx, scale.sy)))));\n      this.attr('transform', V.matrixToTransformString(transform.matrix));\n      return this;\n    };\n    VPrototype.animateAlongPath = function (attrs, path) {\n      path = V.toNode(path);\n      var id = V.ensureId(path);\n      var animateMotion = V('animateMotion', attrs);\n      var mpath = V('mpath', {\n        'xlink:href': '#' + id\n      });\n      animateMotion.append(mpath);\n      this.append(animateMotion);\n      try {\n        animateMotion.node.beginElement();\n      } catch (e) {\n        // Fallback for IE 9.\n        // Run the animation programmatically if FakeSmile (`http://leunen.me/fakesmile/`) present\n        if (document.documentElement.getAttribute('smiling') === 'fake') {\n          /* global getTargets:true, Animator:true, animators:true id2anim:true */\n          // Register the animation. (See `https://answers.launchpad.net/smil/+question/203333`)\n          var animation = animateMotion.node;\n          animation.animators = [];\n          var animationID = animation.getAttribute('id');\n          if (animationID) {\n            id2anim[animationID] = animation;\n          }\n          var targets = getTargets(animation);\n          for (var i = 0, len = targets.length; i < len; i++) {\n            var target = targets[i];\n            var animator = new Animator(animation, target, i);\n            animators.push(animator);\n            animation.animators[i] = animator;\n            animator.register();\n          }\n        }\n      }\n      return this;\n    };\n\n    // Split a string into an array of tokens.\n    // https://infra.spec.whatwg.org/#ascii-whitespace\n    var noHTMLWhitespaceRegex = /[^\\x20\\t\\r\\n\\f]+/g;\n    function getTokenList(str) {\n      if (!V.isString(str)) {\n        return [];\n      }\n      return str.trim().match(noHTMLWhitespaceRegex) || [];\n    }\n    VPrototype.hasClass = function (className) {\n      if (!V.isString(className)) {\n        return false;\n      }\n      return this.node.classList.contains(className.trim());\n    };\n    VPrototype.addClass = function (className) {\n      var ref;\n      (ref = this.node.classList).add.apply(ref, getTokenList(className));\n      return this;\n    };\n    VPrototype.removeClass = function (className) {\n      var ref;\n      (ref = this.node.classList).remove.apply(ref, getTokenList(className));\n      return this;\n    };\n    VPrototype.toggleClass = function (className, toAdd) {\n      var tokens = getTokenList(className);\n      for (var i = 0; i < tokens.length; i++) {\n        this.node.classList.toggle(tokens[i], toAdd);\n      }\n      return this;\n    };\n\n    // Interpolate path by discrete points. The precision of the sampling\n    // is controlled by `interval`. In other words, `sample()` will generate\n    // a point on the path starting at the beginning of the path going to the end\n    // every `interval` pixels.\n    // The sampler can be very useful for e.g. finding intersection between two\n    // paths (finding the two closest points from two samples).\n    VPrototype.sample = function (interval) {\n      interval = interval || 1;\n      var node = this.node;\n      var length = node.getTotalLength();\n      var samples = [];\n      var distance = 0;\n      var sample;\n      while (distance < length) {\n        sample = node.getPointAtLength(distance);\n        samples.push({\n          x: sample.x,\n          y: sample.y,\n          distance: distance\n        });\n        distance += interval;\n      }\n      return samples;\n    };\n    VPrototype.convertToPath = function () {\n      var path = V('path');\n      path.attr(this.attr());\n      var d = this.convertToPathData();\n      if (d) {\n        path.attr('d', d);\n      }\n      return path;\n    };\n    VPrototype.convertToPathData = function () {\n      var tagName = this.tagName();\n      switch (tagName) {\n        case 'PATH':\n          return this.attr('d');\n        case 'LINE':\n          return V.convertLineToPathData(this.node);\n        case 'POLYGON':\n          return V.convertPolygonToPathData(this.node);\n        case 'POLYLINE':\n          return V.convertPolylineToPathData(this.node);\n        case 'ELLIPSE':\n          return V.convertEllipseToPathData(this.node);\n        case 'CIRCLE':\n          return V.convertCircleToPathData(this.node);\n        case 'RECT':\n          return V.convertRectToPathData(this.node);\n      }\n      throw new Error(tagName + ' cannot be converted to PATH.');\n    };\n    V.prototype.toGeometryShape = function () {\n      var x, y, width, height, cx, cy, r, rx, ry, points, d, x1, x2, y1, y2;\n      switch (this.tagName()) {\n        case 'RECT':\n          x = parseFloat(this.attr('x')) || 0;\n          y = parseFloat(this.attr('y')) || 0;\n          width = parseFloat(this.attr('width')) || 0;\n          height = parseFloat(this.attr('height')) || 0;\n          return new Rect(x, y, width, height);\n        case 'CIRCLE':\n          cx = parseFloat(this.attr('cx')) || 0;\n          cy = parseFloat(this.attr('cy')) || 0;\n          r = parseFloat(this.attr('r')) || 0;\n          return new Ellipse({\n            x: cx,\n            y: cy\n          }, r, r);\n        case 'ELLIPSE':\n          cx = parseFloat(this.attr('cx')) || 0;\n          cy = parseFloat(this.attr('cy')) || 0;\n          rx = parseFloat(this.attr('rx')) || 0;\n          ry = parseFloat(this.attr('ry')) || 0;\n          return new Ellipse({\n            x: cx,\n            y: cy\n          }, rx, ry);\n        case 'POLYLINE':\n          points = V.getPointsFromSvgNode(this);\n          return new Polyline(points);\n        case 'POLYGON':\n          points = V.getPointsFromSvgNode(this);\n          if (points.length > 1) {\n            points.push(points[0]);\n          }\n          return new Polyline(points);\n        case 'PATH':\n          d = this.attr('d');\n          if (!Path.isDataSupported(d)) {\n            d = V.normalizePathData(d);\n          }\n          return new Path(d);\n        case 'LINE':\n          x1 = parseFloat(this.attr('x1')) || 0;\n          y1 = parseFloat(this.attr('y1')) || 0;\n          x2 = parseFloat(this.attr('x2')) || 0;\n          y2 = parseFloat(this.attr('y2')) || 0;\n          return new Line({\n            x: x1,\n            y: y1\n          }, {\n            x: x2,\n            y: y2\n          });\n      }\n\n      // Anything else is a rectangle\n      return this.getBBox();\n    };\n\n    // Find the intersection of a line starting in the center\n    // of the SVG `node` ending in the point `ref`.\n    // `target` is an SVG element to which `node`s transformations are relative to.\n    // Note that `ref` point must be in the coordinate system of the `target` for this function to work properly.\n    // Returns a point in the `target` coordinate system (the same system as `ref` is in) if\n    // an intersection is found. Returns `undefined` otherwise.\n    VPrototype.findIntersection = function (ref, target) {\n      var svg = this.svg().node;\n      target = target || svg;\n      var bbox = this.getBBox({\n        target: target\n      });\n      var center = bbox.center();\n      if (!bbox.intersectionWithLineFromCenterToPoint(ref)) {\n        return undefined;\n      }\n      var spot;\n      var tagName = this.tagName();\n\n      // Little speed up optimization for `<rect>` element. We do not do conversion\n      // to path element and sampling but directly calculate the intersection through\n      // a transformed geometrical rectangle.\n      if (tagName === 'RECT') {\n        var gRect = new Rect(parseFloat(this.attr('x') || 0), parseFloat(this.attr('y') || 0), parseFloat(this.attr('width')), parseFloat(this.attr('height')));\n        // Get the rect transformation matrix with regards to the SVG document.\n        var rectMatrix = this.getTransformToElement(target);\n        // Decompose the matrix to find the rotation angle.\n        var rectMatrixComponents = V.decomposeMatrix(rectMatrix);\n        // Now we want to rotate the rectangle back so that we\n        // can use `intersectionWithLineFromCenterToPoint()` passing the angle as the second argument.\n        var resetRotation = svg.createSVGTransform();\n        resetRotation.setRotate(-rectMatrixComponents.rotation, center.x, center.y);\n        var rect = V.transformRect(gRect, resetRotation.matrix.multiply(rectMatrix));\n        spot = new Rect(rect).intersectionWithLineFromCenterToPoint(ref, rectMatrixComponents.rotation);\n      } else if (tagName === 'PATH' || tagName === 'POLYGON' || tagName === 'POLYLINE' || tagName === 'CIRCLE' || tagName === 'ELLIPSE') {\n        var pathNode = tagName === 'PATH' ? this : this.convertToPath();\n        var samples = pathNode.sample();\n        var minDistance = Infinity;\n        var closestSamples = [];\n        var i, sample, gp, centerDistance, refDistance, distance;\n        for (i = 0; i < samples.length; i++) {\n          sample = samples[i];\n          // Convert the sample point in the local coordinate system to the global coordinate system.\n          gp = V.createSVGPoint(sample.x, sample.y);\n          gp = gp.matrixTransform(this.getTransformToElement(target));\n          sample = new Point(gp);\n          centerDistance = sample.distance(center);\n          // Penalize a higher distance to the reference point by 10%.\n          // This gives better results. This is due to\n          // inaccuracies introduced by rounding errors and getPointAtLength() returns.\n          refDistance = sample.distance(ref) * 1.1;\n          distance = centerDistance + refDistance;\n          if (distance < minDistance) {\n            minDistance = distance;\n            closestSamples = [{\n              sample: sample,\n              refDistance: refDistance\n            }];\n          } else if (distance < minDistance + 1) {\n            closestSamples.push({\n              sample: sample,\n              refDistance: refDistance\n            });\n          }\n        }\n        closestSamples.sort(function (a, b) {\n          return a.refDistance - b.refDistance;\n        });\n        if (closestSamples[0]) {\n          spot = closestSamples[0].sample;\n        }\n      }\n      return spot;\n    };\n\n    /**\n     * @private\n     * @param {string} name\n     * @param {string} value\n     * @returns {Vectorizer}\n     */\n    VPrototype.setAttribute = function (name, value) {\n      var el = this.node;\n      if (value === null) {\n        this.removeAttr(name);\n        return this;\n      }\n      var trueName = attributeNames[name];\n      var ref = V.qualifyAttr(trueName);\n      var ns = ref.ns;\n      if (ns) {\n        // Attribute names can be namespaced. E.g. `image` elements\n        // have a `xlink:href` attribute to set the source of the image.\n        el.setAttributeNS(ns, trueName, value);\n      } else if (trueName === 'id') {\n        el.id = value;\n      } else {\n        el.setAttribute(trueName, value);\n      }\n      return this;\n    };\n\n    // Create an SVG document element.\n    // If `content` is passed, it will be used as the SVG content of the `<svg>` root element.\n    V.createSvgDocument = function (content) {\n      if (content) {\n        var XMLString = \"<svg xmlns=\\\"\" + ns.svg + \"\\\" xmlns:xlink=\\\"\" + ns.xlink + \"\\\" version=\\\"\" + SVGVersion + \"\\\">\" + content + \"</svg>\";\n        var ref = V.parseXML(XMLString, {\n          async: false\n        });\n        var documentElement = ref.documentElement;\n        return documentElement;\n      }\n      var svg = document.createElementNS(ns.svg, 'svg');\n      svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);\n      svg.setAttribute('version', SVGVersion);\n      return svg;\n    };\n    V.createSVGStyle = function (stylesheet) {\n      var ref = V('style', {\n        type: 'text/css'\n      }, [V.createCDATASection(stylesheet)]);\n      var node = ref.node;\n      return node;\n    }, V.createCDATASection = function (data) {\n      if (data === void 0) data = '';\n      var xml = document.implementation.createDocument(null, 'xml', null);\n      return xml.createCDATASection(data);\n    };\n    V.idCounter = 0;\n\n    // A function returning a unique identifier for this client session with every call.\n    V.uniqueId = function () {\n      return 'v-' + ++V.idCounter;\n    };\n    V.toNode = function (el) {\n      return V.isV(el) ? el.node : el.nodeName && el || el[0];\n    };\n    V.ensureId = function (node) {\n      node = V.toNode(node);\n      return node.id || (node.id = V.uniqueId());\n    };\n\n    // Replace all spaces with the Unicode No-break space (http://www.fileformat.info/info/unicode/char/a0/index.htm).\n    // IE would otherwise collapse all spaces into one. This is used in the text() method but it is\n    // also exposed so that the programmer can use it in case he needs to. This is useful e.g. in tests\n    // when you want to compare the actual DOM text content without having to add the unicode character in\n    // the place of all spaces.\n    V.sanitizeText = function (text) {\n      return (text || '').replace(/ /g, '\\u00A0');\n    };\n    V.isUndefined = function (value) {\n      return typeof value === 'undefined';\n    };\n    V.isString = function (value) {\n      return typeof value === 'string';\n    };\n    V.isObject = function (value) {\n      return value && typeof value === 'object';\n    };\n    V.isArray = Array.isArray;\n    V.parseXML = function (data, opt) {\n      opt = opt || {};\n      var xml;\n      try {\n        var parser = new DOMParser();\n        if (!V.isUndefined(opt.async)) {\n          parser.async = opt.async;\n        }\n        xml = parser.parseFromString(data, 'text/xml');\n      } catch (error) {\n        xml = undefined;\n      }\n      if (!xml || xml.getElementsByTagName('parsererror').length) {\n        throw new Error('Invalid XML: ' + data);\n      }\n      return xml;\n    };\n\n    // Create an empty object which does not inherit any properties from `Object.prototype`.\n    // This is useful when we want to use an object as a dictionary without having to\n    // worry about inherited properties such as `toString`, `valueOf` etc.\n    var _attributeNames = Object.create(null);\n\n    // List of attributes for which not to split camel case words.\n    // It contains known SVG attribute names and may be extended with user-defined attribute names.\n    ['baseFrequency', 'baseProfile', 'clipPathUnits', 'contentScriptType', 'contentStyleType', 'diffuseConstant', 'edgeMode', 'externalResourcesRequired', 'filterRes',\n    // deprecated\n    'filterUnits', 'gradientTransform', 'gradientUnits', 'kernelMatrix', 'kernelUnitLength', 'keyPoints', 'lengthAdjust', 'limitingConeAngle', 'markerHeight', 'markerUnits', 'markerWidth', 'maskContentUnits', 'maskUnits', 'numOctaves', 'pathLength', 'patternContentUnits', 'patternTransform', 'patternUnits', 'pointsAtX', 'pointsAtY', 'pointsAtZ', 'preserveAlpha', 'preserveAspectRatio', 'primitiveUnits', 'refX', 'refY', 'requiredExtensions', 'requiredFeatures', 'specularConstant', 'specularExponent', 'spreadMethod', 'startOffset', 'stdDeviation', 'stitchTiles', 'surfaceScale', 'systemLanguage', 'tableValues', 'targetX', 'targetY', 'textLength', 'viewBox', 'viewTarget',\n    // deprecated\n    'xChannelSelector', 'yChannelSelector', 'zoomAndPan' // deprecated\n    ].forEach(function (name) {\n      return _attributeNames[name] = name;\n    });\n    var attributeNames = new Proxy(_attributeNames, {\n      get: function get(cache, name) {\n        // The cache is a dictionary of attribute names. See `_attributeNames` above.\n        // If the attribute name is not in the cache, it means that it is not\n        // a camel-case attribute name. In that case, we need to convert\n        // the attribute name to dash-separated words.\n        if (!V.supportCamelCaseAttributes) {\n          return name;\n        }\n        if (name in cache) {\n          return cache[name];\n        }\n        // Convert camel case to dash-separated words.\n        return cache[name] = name.replace(/[A-Z]/g, '-$&').toLowerCase();\n      }\n    });\n\n    // Note: The `attributeNames` and `supportCamelCaseAttributes` properties are not enumerable\n    // in this version to avoid breaking changes. They will be made enumerable in the next major version.\n\n    // Dictionary of attribute names\n    Object.defineProperty(V, 'attributeNames', {\n      value: attributeNames,\n      writable: false\n    });\n\n    // Should camel case attributes be supported?\n    Object.defineProperty(V, 'supportCamelCaseAttributes', {\n      value: false,\n      writable: true\n    });\n\n    /**\n     * @param {string} name\n     * @returns {{ns: string|null, local: string}} namespace and attribute name\n     */\n    V.qualifyAttr = function (name) {\n      if (name.indexOf(':') !== -1) {\n        var combinedKey = name.split(':');\n        return {\n          ns: ns[combinedKey[0]],\n          local: combinedKey[1]\n        };\n      }\n      return {\n        ns: null,\n        local: name\n      };\n    };\n\n    // Note: This regex allows multiple commas as separator which is incorrect in SVG\n    // This regex is used by `split()`, so it doesn't need to use /g\n    V.transformSeparatorRegex = /[ ,]+/;\n    // Note: All following regexes are more restrictive than SVG specification\n    // ReDoS mitigation: Use an anchor at the beginning of the match\n    // ReDoS mitigation: Avoid backtracking (uses `[^()]+` instead of `.*?`)\n    // ReDoS mitigation: Don't match initial `(` inside repeated part\n    // The following regex needs to use /g (= cannot use capturing groups)\n    V.transformRegex = /\\b\\w+\\([^()]+\\)/g;\n    // The following regexes need to use capturing groups (= cannot use /g)\n    V.transformFunctionRegex = /\\b(\\w+)\\(([^()]+)\\)/;\n    V.transformTranslateRegex = /\\btranslate\\(([^()]+)\\)/;\n    V.transformRotateRegex = /\\brotate\\(([^()]+)\\)/;\n    V.transformScaleRegex = /\\bscale\\(([^()]+)\\)/;\n    V.transformStringToMatrix = function (transform) {\n      // Initialize result matrix as identity matrix\n      var transformationMatrix = V.createSVGMatrix();\n\n      // Note: Multiple transform functions are allowed in `transform` string\n      // `match()` returns `null` if none found\n      var transformMatches = transform && transform.match(V.transformRegex);\n      if (!transformMatches) {\n        // Return identity matrix\n        return transformationMatrix;\n      }\n      var numMatches = transformMatches.length;\n      for (var i = 0; i < numMatches; i++) {\n        var transformMatch = transformMatches[i];\n        // Use same regex as above, but with capturing groups\n        // `match()` returns values of capturing groups as `[1]`, `[2]`\n        var transformFunctionMatch = transformMatch.match(V.transformFunctionRegex);\n        if (transformFunctionMatch) {\n          var sx = void 0,\n            sy = void 0,\n            tx = void 0,\n            ty = void 0,\n            angle = void 0;\n          var ctm = V.createSVGMatrix();\n          var transformFunction = transformFunctionMatch[1].toLowerCase();\n          var args = transformFunctionMatch[2].split(V.transformSeparatorRegex);\n          switch (transformFunction) {\n            case 'scale':\n              sx = parseFloat(args[0]);\n              sy = args[1] === undefined ? sx : parseFloat(args[1]);\n              ctm = ctm.scaleNonUniform(sx, sy);\n              break;\n            case 'translate':\n              tx = parseFloat(args[0]);\n              ty = parseFloat(args[1]);\n              ctm = ctm.translate(tx, ty);\n              break;\n            case 'rotate':\n              angle = parseFloat(args[0]);\n              tx = parseFloat(args[1]) || 0;\n              ty = parseFloat(args[2]) || 0;\n              if (tx !== 0 || ty !== 0) {\n                ctm = ctm.translate(tx, ty).rotate(angle).translate(-tx, -ty);\n              } else {\n                ctm = ctm.rotate(angle);\n              }\n              break;\n            case 'skewx':\n              angle = parseFloat(args[0]);\n              ctm = ctm.skewX(angle);\n              break;\n            case 'skewy':\n              angle = parseFloat(args[0]);\n              ctm = ctm.skewY(angle);\n              break;\n            case 'matrix':\n              ctm.a = parseFloat(args[0]);\n              ctm.b = parseFloat(args[1]);\n              ctm.c = parseFloat(args[2]);\n              ctm.d = parseFloat(args[3]);\n              ctm.e = parseFloat(args[4]);\n              ctm.f = parseFloat(args[5]);\n              break;\n            default:\n              continue;\n          }\n\n          // Multiply current transformation into result matrix\n          transformationMatrix = transformationMatrix.multiply(ctm);\n        }\n      }\n      return transformationMatrix;\n    };\n    V.matrixToTransformString = function (matrix) {\n      matrix || (matrix = true);\n      return 'matrix(' + (matrix.a !== undefined ? matrix.a : 1) + ',' + (matrix.b !== undefined ? matrix.b : 0) + ',' + (matrix.c !== undefined ? matrix.c : 0) + ',' + (matrix.d !== undefined ? matrix.d : 1) + ',' + (matrix.e !== undefined ? matrix.e : 0) + ',' + (matrix.f !== undefined ? matrix.f : 0) + ')';\n    };\n    V.parseTransformString = function (transform) {\n      var translate, rotate, scale;\n      if (transform) {\n        var separator = V.transformSeparatorRegex;\n\n        // Special handling for `transform` with one or more matrix functions\n        if (transform.trim().indexOf('matrix') >= 0) {\n          // Convert EVERYTHING in `transform` string to a matrix\n          // Will combine ALL matrixes * ALL translates * ALL scales * ALL rotates\n          // Note: In non-matrix case, we only take first one of each (if any)\n          var matrix = V.transformStringToMatrix(transform);\n          var decomposedMatrix = V.decomposeMatrix(matrix);\n\n          // Extract `translate`, `scale`, `rotate` from matrix\n          translate = [decomposedMatrix.translateX, decomposedMatrix.translateY];\n          scale = [decomposedMatrix.scaleX, decomposedMatrix.scaleY];\n          rotate = [decomposedMatrix.rotation];\n\n          // Rewrite `transform` string in `translate scale rotate` format\n          var transformations = [];\n          if (translate[0] !== 0 || translate[1] !== 0) {\n            transformations.push('translate(' + translate + ')');\n          }\n          if (scale[0] !== 1 || scale[1] !== 1) {\n            transformations.push('scale(' + scale + ')');\n          }\n          if (rotate[0] !== 0) {\n            transformations.push('rotate(' + rotate + ')');\n          }\n          transform = transformations.join(' ');\n        } else {\n          // Extract `translate`, `rotate`, `scale` functions from `transform` string\n          // Note: We only detect the first match of each (if any)\n          // `match()` returns value of capturing group as `[1]`\n          var translateMatch = transform.match(V.transformTranslateRegex);\n          if (translateMatch) {\n            translate = translateMatch[1].split(separator);\n          }\n          var rotateMatch = transform.match(V.transformRotateRegex);\n          if (rotateMatch) {\n            rotate = rotateMatch[1].split(separator);\n          }\n          var scaleMatch = transform.match(V.transformScaleRegex);\n          if (scaleMatch) {\n            scale = scaleMatch[1].split(separator);\n          }\n        }\n      }\n      var sx = scale && scale[0] ? parseFloat(scale[0]) : 1;\n      return {\n        value: transform,\n        translate: {\n          tx: translate && translate[0] ? parseInt(translate[0], 10) : 0,\n          ty: translate && translate[1] ? parseInt(translate[1], 10) : 0\n        },\n        rotate: {\n          angle: rotate && rotate[0] ? parseInt(rotate[0], 10) : 0,\n          cx: rotate && rotate[1] ? parseInt(rotate[1], 10) : undefined,\n          cy: rotate && rotate[2] ? parseInt(rotate[2], 10) : undefined\n        },\n        scale: {\n          sx: sx,\n          sy: scale && scale[1] ? parseFloat(scale[1]) : sx\n        }\n      };\n    };\n    V.deltaTransformPoint = function (matrix, point) {\n      var dx = point.x * matrix.a + point.y * matrix.c + 0;\n      var dy = point.x * matrix.b + point.y * matrix.d + 0;\n      return {\n        x: dx,\n        y: dy\n      };\n    };\n    V.decomposeMatrix = function (matrix) {\n      // @see https://gist.github.com/2052247\n\n      // calculate delta transform point\n      var px = V.deltaTransformPoint(matrix, {\n        x: 0,\n        y: 1\n      });\n      var py = V.deltaTransformPoint(matrix, {\n        x: 1,\n        y: 0\n      });\n\n      // calculate skew\n      var skewX = 180 / PI * atan2(px.y, px.x) - 90;\n      var skewY = 180 / PI * atan2(py.y, py.x);\n      return {\n        translateX: matrix.e,\n        translateY: matrix.f,\n        scaleX: sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n        scaleY: sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n        skewX: skewX,\n        skewY: skewY,\n        rotation: skewX // rotation is the same as skew x\n      };\n    };\n\n    // Return the `scale` transformation from the following equation:\n    // `translate(tx, ty) . rotate(angle) . scale(sx, sy) === matrix(a,b,c,d,e,f)`\n    V.matrixToScale = function (matrix) {\n      var a, b, c, d;\n      if (matrix) {\n        a = V.isUndefined(matrix.a) ? 1 : matrix.a;\n        d = V.isUndefined(matrix.d) ? 1 : matrix.d;\n        b = matrix.b;\n        c = matrix.c;\n      } else {\n        a = d = 1;\n      }\n      return {\n        sx: b ? sqrt(a * a + b * b) : a,\n        sy: c ? sqrt(c * c + d * d) : d\n      };\n    };\n\n    // Return the `rotate` transformation from the following equation:\n    // `translate(tx, ty) . rotate(angle) . scale(sx, sy) === matrix(a,b,c,d,e,f)`\n    V.matrixToRotate = function (matrix) {\n      var p = {\n        x: 0,\n        y: 1\n      };\n      if (matrix) {\n        p = V.deltaTransformPoint(matrix, p);\n      }\n      return {\n        angle: normalizeAngle(toDeg(atan2(p.y, p.x)) - 90)\n      };\n    };\n\n    // Return the `translate` transformation from the following equation:\n    // `translate(tx, ty) . rotate(angle) . scale(sx, sy) === matrix(a,b,c,d,e,f)`\n    V.matrixToTranslate = function (matrix) {\n      return {\n        tx: matrix && matrix.e || 0,\n        ty: matrix && matrix.f || 0\n      };\n    };\n    V.isV = function (object) {\n      return object instanceof V;\n    };\n\n    // For backwards compatibility:\n    V.isVElement = V.isV;\n\n    // Element implements `getBBox()`, `getCTM()` and `getScreenCTM()`\n    // https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement\n    V.isSVGGraphicsElement = function (node) {\n      if (!node) {\n        return false;\n      }\n      node = V.toNode(node);\n      // IE/Edge does not implement SVGGraphicsElement interface, thus check for `getScreenCTM` below\n      return node instanceof SVGElement && typeof node.getScreenCTM === 'function';\n    };\n    var svgDocument = V('svg').node;\n    V.createSVGMatrix = function (matrix) {\n      var svgMatrix = svgDocument.createSVGMatrix();\n      for (var component in matrix) {\n        svgMatrix[component] = matrix[component];\n      }\n      return svgMatrix;\n    };\n    V.createSVGTransform = function (matrix) {\n      if (!V.isUndefined(matrix)) {\n        if (!(matrix instanceof SVGMatrix)) {\n          matrix = V.createSVGMatrix(matrix);\n        }\n        return svgDocument.createSVGTransformFromMatrix(matrix);\n      }\n      return svgDocument.createSVGTransform();\n    };\n    V.createSVGPoint = function (x, y) {\n      var p = svgDocument.createSVGPoint();\n      p.x = x;\n      p.y = y;\n      return p;\n    };\n    V.transformRect = function (r, matrix) {\n      var p = svgDocument.createSVGPoint();\n      p.x = r.x;\n      p.y = r.y;\n      var corner1 = p.matrixTransform(matrix);\n      p.x = r.x + r.width;\n      p.y = r.y;\n      var corner2 = p.matrixTransform(matrix);\n      p.x = r.x + r.width;\n      p.y = r.y + r.height;\n      var corner3 = p.matrixTransform(matrix);\n      p.x = r.x;\n      p.y = r.y + r.height;\n      var corner4 = p.matrixTransform(matrix);\n      var minX = min(corner1.x, corner2.x, corner3.x, corner4.x);\n      var maxX = max(corner1.x, corner2.x, corner3.x, corner4.x);\n      var minY = min(corner1.y, corner2.y, corner3.y, corner4.y);\n      var maxY = max(corner1.y, corner2.y, corner3.y, corner4.y);\n      return new Rect(minX, minY, maxX - minX, maxY - minY);\n    };\n    V.transformPoint = function (p, matrix) {\n      return new Point(V.createSVGPoint(p.x, p.y).matrixTransform(matrix));\n    };\n    V.transformLine = function (l, matrix) {\n      return new Line(V.transformPoint(l.start, matrix), V.transformPoint(l.end, matrix));\n    };\n    V.transformPolyline = function (p, matrix) {\n      var inPoints = p instanceof Polyline ? p.points : p;\n      if (!V.isArray(inPoints)) {\n        inPoints = [];\n      }\n      var outPoints = [];\n      for (var i = 0, n = inPoints.length; i < n; i++) {\n        outPoints[i] = V.transformPoint(inPoints[i], matrix);\n      }\n      return new Polyline(outPoints);\n    };\n\n    // Convert a style represented as string (e.g. `'fill=\"blue\"; stroke=\"red\"'`) to\n    // an object (`{ fill: 'blue', stroke: 'red' }`).\n    V.styleToObject = function (styleString) {\n      var ret = {};\n      var styles = styleString.split(';');\n      for (var i = 0; i < styles.length; i++) {\n        var style = styles[i];\n        var pair = style.split('=');\n        ret[pair[0].trim()] = pair[1].trim();\n      }\n      return ret;\n    };\n\n    // Inspired by d3.js https://github.com/mbostock/d3/blob/master/src/svg/arc.js\n    V.createSlicePathData = function (innerRadius, outerRadius, startAngle, endAngle) {\n      var svgArcMax = 2 * PI - 1e-6;\n      var r0 = innerRadius;\n      var r1 = outerRadius;\n      var a0 = startAngle;\n      var a1 = endAngle;\n      var da = (a1 < a0 && (da = a0, a0 = a1, a1 = da), a1 - a0);\n      var df = da < PI ? '0' : '1';\n      var c0 = cos(a0);\n      var s0 = sin(a0);\n      var c1 = cos(a1);\n      var s1 = sin(a1);\n      return da >= svgArcMax ? r0 ? 'M0,' + r1 + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + -r1 + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + r1 + 'M0,' + r0 + 'A' + r0 + ',' + r0 + ' 0 1,0 0,' + -r0 + 'A' + r0 + ',' + r0 + ' 0 1,0 0,' + r0 + 'Z' : 'M0,' + r1 + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + -r1 + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + r1 + 'Z' : r0 ? 'M' + r1 * c0 + ',' + r1 * s0 + 'A' + r1 + ',' + r1 + ' 0 ' + df + ',1 ' + r1 * c1 + ',' + r1 * s1 + 'L' + r0 * c1 + ',' + r0 * s1 + 'A' + r0 + ',' + r0 + ' 0 ' + df + ',0 ' + r0 * c0 + ',' + r0 * s0 + 'Z' : 'M' + r1 * c0 + ',' + r1 * s0 + 'A' + r1 + ',' + r1 + ' 0 ' + df + ',1 ' + r1 * c1 + ',' + r1 * s1 + 'L0,0' + 'Z';\n    };\n\n    // Merge attributes from object `b` with attributes in object `a`.\n    // Note that this modifies the object `a`.\n    // Also important to note that attributes are merged but CSS classes are concatenated.\n    V.mergeAttrs = function (a, b) {\n      for (var attr in b) {\n        if (attr === 'class') {\n          // Concatenate classes.\n          a[attr] = a[attr] ? a[attr] + ' ' + b[attr] : b[attr];\n        } else if (attr === 'style') {\n          // `style` attribute can be an object.\n          if (V.isObject(a[attr]) && V.isObject(b[attr])) {\n            // `style` stored in `a` is an object.\n            a[attr] = V.mergeAttrs(a[attr], b[attr]);\n          } else if (V.isObject(a[attr])) {\n            // `style` in `a` is an object but it's a string in `b`.\n            // Convert the style represented as a string to an object in `b`.\n            a[attr] = V.mergeAttrs(a[attr], V.styleToObject(b[attr]));\n          } else if (V.isObject(b[attr])) {\n            // `style` in `a` is a string, in `b` it's an object.\n            a[attr] = V.mergeAttrs(V.styleToObject(a[attr]), b[attr]);\n          } else {\n            // Both styles are strings.\n            a[attr] = V.mergeAttrs(V.styleToObject(a[attr]), V.styleToObject(b[attr]));\n          }\n        } else {\n          a[attr] = b[attr];\n        }\n      }\n      return a;\n    };\n    V.annotateString = function (t, annotations, opt) {\n      annotations = annotations || [];\n      opt = opt || {};\n      var offset = opt.offset || 0;\n      var compacted = [];\n      var batch;\n      var ret = [];\n      var item;\n      var prev;\n      for (var i = 0; i < t.length; i++) {\n        item = ret[i] = t[i];\n        for (var j = 0; j < annotations.length; j++) {\n          var annotation = annotations[j];\n          var start = annotation.start + offset;\n          var end = annotation.end + offset;\n          if (i >= start && i < end) {\n            // Annotation applies.\n            if (V.isObject(item)) {\n              // There is more than one annotation to be applied => Merge attributes.\n              item.attrs = V.mergeAttrs(V.mergeAttrs({}, item.attrs), annotation.attrs);\n            } else {\n              item = ret[i] = {\n                t: t[i],\n                attrs: annotation.attrs\n              };\n            }\n            if (opt.includeAnnotationIndices) {\n              (item.annotations || (item.annotations = [])).push(j);\n            }\n          }\n        }\n        prev = ret[i - 1];\n        if (!prev) {\n          batch = item;\n        } else if (V.isObject(item) && V.isObject(prev)) {\n          // Both previous item and the current one are annotations. If the attributes\n          // didn't change, merge the text.\n          if (JSON.stringify(item.attrs) === JSON.stringify(prev.attrs)) {\n            batch.t += item.t;\n          } else {\n            compacted.push(batch);\n            batch = item;\n          }\n        } else if (V.isObject(item)) {\n          // Previous item was a string, current item is an annotation.\n          compacted.push(batch);\n          batch = item;\n        } else if (V.isObject(prev)) {\n          // Previous item was an annotation, current item is a string.\n          compacted.push(batch);\n          batch = item;\n        } else {\n          // Both previous and current item are strings.\n          batch = (batch || '') + item;\n        }\n      }\n      if (batch) {\n        compacted.push(batch);\n      }\n      return compacted;\n    };\n    V.findAnnotationsAtIndex = function (annotations, index) {\n      var found = [];\n      if (annotations) {\n        annotations.forEach(function (annotation) {\n          if (annotation.start < index && index <= annotation.end) {\n            found.push(annotation);\n          }\n        });\n      }\n      return found;\n    };\n    V.findAnnotationsBetweenIndexes = function (annotations, start, end) {\n      var found = [];\n      if (annotations) {\n        annotations.forEach(function (annotation) {\n          if (start >= annotation.start && start < annotation.end || end > annotation.start && end <= annotation.end || annotation.start >= start && annotation.end < end) {\n            found.push(annotation);\n          }\n        });\n      }\n      return found;\n    };\n\n    // Shift all the text annotations after character `index` by `offset` positions.\n    V.shiftAnnotations = function (annotations, index, offset) {\n      if (annotations) {\n        annotations.forEach(function (annotation) {\n          if (annotation.start < index && annotation.end >= index) {\n            annotation.end += offset;\n          } else if (annotation.start >= index) {\n            annotation.start += offset;\n            annotation.end += offset;\n          }\n        });\n      }\n      return annotations;\n    };\n    V.convertLineToPathData = function (line) {\n      line = V(line);\n      var d = ['M', line.attr('x1'), line.attr('y1'), 'L', line.attr('x2'), line.attr('y2')].join(' ');\n      return d;\n    };\n    V.convertPolygonToPathData = function (polygon) {\n      var points = V.getPointsFromSvgNode(polygon);\n      if (points.length === 0) {\n        return null;\n      }\n      return V.svgPointsToPath(points) + ' Z';\n    };\n    V.convertPolylineToPathData = function (polyline) {\n      var points = V.getPointsFromSvgNode(polyline);\n      if (points.length === 0) {\n        return null;\n      }\n      return V.svgPointsToPath(points);\n    };\n    V.svgPointsToPath = function (points) {\n      for (var i = 0, n = points.length; i < n; i++) {\n        points[i] = points[i].x + ' ' + points[i].y;\n      }\n      return 'M ' + points.join(' L');\n    };\n    V.getPointsFromSvgNode = function (node) {\n      node = V.toNode(node);\n      var points = [];\n      var nodePoints = node.points;\n      if (nodePoints) {\n        for (var i = 0, n = nodePoints.numberOfItems; i < n; i++) {\n          points.push(nodePoints.getItem(i));\n        }\n      }\n      return points;\n    };\n    V.KAPPA = 0.551784;\n    V.convertCircleToPathData = function (circle) {\n      circle = V(circle);\n      var cx = parseFloat(circle.attr('cx')) || 0;\n      var cy = parseFloat(circle.attr('cy')) || 0;\n      var r = parseFloat(circle.attr('r'));\n      var cd = r * V.KAPPA; // Control distance.\n\n      var d = ['M', cx, cy - r,\n      // Move to the first point.\n      'C', cx + cd, cy - r, cx + r, cy - cd, cx + r, cy,\n      // I. Quadrant.\n      'C', cx + r, cy + cd, cx + cd, cy + r, cx, cy + r,\n      // II. Quadrant.\n      'C', cx - cd, cy + r, cx - r, cy + cd, cx - r, cy,\n      // III. Quadrant.\n      'C', cx - r, cy - cd, cx - cd, cy - r, cx, cy - r,\n      // IV. Quadrant.\n      'Z'].join(' ');\n      return d;\n    };\n    V.convertEllipseToPathData = function (ellipse) {\n      ellipse = V(ellipse);\n      var cx = parseFloat(ellipse.attr('cx')) || 0;\n      var cy = parseFloat(ellipse.attr('cy')) || 0;\n      var rx = parseFloat(ellipse.attr('rx'));\n      var ry = parseFloat(ellipse.attr('ry')) || rx;\n      var cdx = rx * V.KAPPA; // Control distance x.\n      var cdy = ry * V.KAPPA; // Control distance y.\n\n      var d = ['M', cx, cy - ry,\n      // Move to the first point.\n      'C', cx + cdx, cy - ry, cx + rx, cy - cdy, cx + rx, cy,\n      // I. Quadrant.\n      'C', cx + rx, cy + cdy, cx + cdx, cy + ry, cx, cy + ry,\n      // II. Quadrant.\n      'C', cx - cdx, cy + ry, cx - rx, cy + cdy, cx - rx, cy,\n      // III. Quadrant.\n      'C', cx - rx, cy - cdy, cx - cdx, cy - ry, cx, cy - ry,\n      // IV. Quadrant.\n      'Z'].join(' ');\n      return d;\n    };\n    V.convertRectToPathData = function (rect) {\n      rect = V(rect);\n      return V.rectToPath({\n        x: parseFloat(rect.attr('x')) || 0,\n        y: parseFloat(rect.attr('y')) || 0,\n        width: parseFloat(rect.attr('width')) || 0,\n        height: parseFloat(rect.attr('height')) || 0,\n        rx: parseFloat(rect.attr('rx')) || 0,\n        ry: parseFloat(rect.attr('ry')) || 0\n      });\n    };\n\n    // Convert a rectangle to SVG path commands. `r` is an object of the form:\n    // `{ x: [number], y: [number], width: [number], height: [number], top-ry: [number], top-ry: [number], bottom-rx: [number], bottom-ry: [number] }`,\n    // where `x, y, width, height` are the usual rectangle attributes and [top-/bottom-]rx/ry allows for\n    // specifying radius of the rectangle for all its sides (as opposed to the built-in SVG rectangle\n    // that has only `rx` and `ry` attributes).\n    V.rectToPath = function (r) {\n      var d;\n      var x = r.x;\n      var y = r.y;\n      var width = r.width;\n      var height = r.height;\n      var topRx = min(r.rx || r['top-rx'] || 0, width / 2);\n      var bottomRx = min(r.rx || r['bottom-rx'] || 0, width / 2);\n      var topRy = min(r.ry || r['top-ry'] || 0, height / 2);\n      var bottomRy = min(r.ry || r['bottom-ry'] || 0, height / 2);\n      if (topRx || bottomRx || topRy || bottomRy) {\n        d = ['M', x, y + topRy, 'v', height - topRy - bottomRy, 'a', bottomRx, bottomRy, 0, 0, 0, bottomRx, bottomRy, 'h', width - 2 * bottomRx, 'a', bottomRx, bottomRy, 0, 0, 0, bottomRx, -bottomRy, 'v', -(height - bottomRy - topRy), 'a', topRx, topRy, 0, 0, 0, -topRx, -topRy, 'h', -(width - 2 * topRx), 'a', topRx, topRy, 0, 0, 0, -topRx, topRy, 'Z'];\n      } else {\n        d = ['M', x, y, 'H', x + width, 'V', y + height, 'H', x, 'V', y, 'Z'];\n      }\n      return d.join(' ');\n    };\n\n    // Take a path data string\n    // Return a normalized path data string\n    // If data cannot be parsed, return 'M 0 0'\n    // Adapted from Rappid normalizePath polyfill\n    // Highly inspired by Raphael Library (www.raphael.com)\n    V.normalizePathData = function () {\n      var spaces = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\n      var pathCommand = new RegExp('([a-z])[' + spaces + ',]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[' + spaces + ']*,?[' + spaces + ']*)+)', 'ig');\n      var pathValues = new RegExp('(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[' + spaces + ']*,?[' + spaces + ']*', 'ig');\n      var math = Math;\n      var PI = math.PI;\n      var sin = math.sin;\n      var cos = math.cos;\n      var tan = math.tan;\n      var asin = math.asin;\n      var sqrt = math.sqrt;\n      var abs = math.abs;\n      function q2c(x1, y1, ax, ay, x2, y2) {\n        var _13 = 1 / 3;\n        var _23 = 2 / 3;\n        return [_13 * x1 + _23 * ax, _13 * y1 + _23 * ay, _13 * x2 + _23 * ax, _13 * y2 + _23 * ay, x2, y2];\n      }\n      function rotate(x, y, rad) {\n        var X = x * cos(rad) - y * sin(rad);\n        var Y = x * sin(rad) + y * cos(rad);\n        return {\n          x: X,\n          y: Y\n        };\n      }\n      function a2c(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n        // for more information of where this math came from visit:\n        // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n        var _120 = PI * 120 / 180;\n        var rad = PI / 180 * (+angle || 0);\n        var res = [];\n        var xy;\n        if (!recursive) {\n          xy = rotate(x1, y1, -rad);\n          x1 = xy.x;\n          y1 = xy.y;\n          xy = rotate(x2, y2, -rad);\n          x2 = xy.x;\n          y2 = xy.y;\n          var x = (x1 - x2) / 2;\n          var y = (y1 - y2) / 2;\n          var h = x * x / (rx * rx) + y * y / (ry * ry);\n          if (h > 1) {\n            h = sqrt(h);\n            rx = h * rx;\n            ry = h * ry;\n          }\n          var rx2 = rx * rx;\n          var ry2 = ry * ry;\n          var k = (large_arc_flag == sweep_flag ? -1 : 1) * sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n          var cx = k * rx * y / ry + (x1 + x2) / 2;\n          var cy = k * -ry * x / rx + (y1 + y2) / 2;\n          var f1 = asin(((y1 - cy) / ry).toFixed(9));\n          var f2 = asin(((y2 - cy) / ry).toFixed(9));\n          f1 = x1 < cx ? PI - f1 : f1;\n          f2 = x2 < cx ? PI - f2 : f2;\n          if (f1 < 0) {\n            f1 = PI * 2 + f1;\n          }\n          if (f2 < 0) {\n            f2 = PI * 2 + f2;\n          }\n          if (sweep_flag && f1 > f2) {\n            f1 = f1 - PI * 2;\n          }\n          if (!sweep_flag && f2 > f1) {\n            f2 = f2 - PI * 2;\n          }\n        } else {\n          f1 = recursive[0];\n          f2 = recursive[1];\n          cx = recursive[2];\n          cy = recursive[3];\n        }\n        var df = f2 - f1;\n        if (abs(df) > _120) {\n          var f2old = f2;\n          var x2old = x2;\n          var y2old = y2;\n          f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n          x2 = cx + rx * cos(f2);\n          y2 = cy + ry * sin(f2);\n          res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n        }\n        df = f2 - f1;\n        var c1 = cos(f1);\n        var s1 = sin(f1);\n        var c2 = cos(f2);\n        var s2 = sin(f2);\n        var t = tan(df / 4);\n        var hx = 4 / 3 * (rx * t);\n        var hy = 4 / 3 * (ry * t);\n        var m1 = [x1, y1];\n        var m2 = [x1 + hx * s1, y1 - hy * c1];\n        var m3 = [x2 + hx * s2, y2 - hy * c2];\n        var m4 = [x2, y2];\n        m2[0] = 2 * m1[0] - m2[0];\n        m2[1] = 2 * m1[1] - m2[1];\n        if (recursive) {\n          return [m2, m3, m4].concat(res);\n        } else {\n          res = [m2, m3, m4].concat(res).join().split(',');\n          var newres = [];\n          var ii = res.length;\n          for (var i = 0; i < ii; i++) {\n            newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n          }\n          return newres;\n        }\n      }\n      function parsePathString(pathString) {\n        if (!pathString) {\n          return null;\n        }\n        var paramCounts = {\n          a: 7,\n          c: 6,\n          h: 1,\n          l: 2,\n          m: 2,\n          q: 4,\n          s: 4,\n          t: 2,\n          v: 1,\n          z: 0\n        };\n        var data = [];\n        String(pathString).replace(pathCommand, function (a, b, c) {\n          var params = [];\n          var name = b.toLowerCase();\n          c.replace(pathValues, function (a, b) {\n            if (b) {\n              params.push(+b);\n            }\n          });\n          if (name === 'm' && params.length > 2) {\n            data.push([b].concat(params.splice(0, 2)));\n            name = 'l';\n            b = b === 'm' ? 'l' : 'L';\n          }\n          while (params.length >= paramCounts[name]) {\n            data.push([b].concat(params.splice(0, paramCounts[name])));\n            if (!paramCounts[name]) {\n              break;\n            }\n          }\n        });\n        return data;\n      }\n      function pathToAbsolute(pathArray) {\n        if (!Array.isArray(pathArray) || !Array.isArray(pathArray && pathArray[0])) {\n          // rough assumption\n          pathArray = parsePathString(pathArray);\n        }\n\n        // if invalid string, return 'M 0 0'\n        if (!pathArray || !pathArray.length) {\n          return [['M', 0, 0]];\n        }\n        var res = [];\n        var x = 0;\n        var y = 0;\n        var mx = 0;\n        var my = 0;\n        var start = 0;\n        var pa0;\n        var ii = pathArray.length;\n        for (var i = start; i < ii; i++) {\n          var r = [];\n          res.push(r);\n          var pa = pathArray[i];\n          pa0 = pa[0];\n          if (pa0 != pa0.toUpperCase()) {\n            r[0] = pa0.toUpperCase();\n            var jj;\n            var j;\n            switch (r[0]) {\n              case 'A':\n                r[1] = pa[1];\n                r[2] = pa[2];\n                r[3] = pa[3];\n                r[4] = pa[4];\n                r[5] = pa[5];\n                r[6] = +pa[6] + x;\n                r[7] = +pa[7] + y;\n                break;\n              case 'V':\n                r[1] = +pa[1] + y;\n                break;\n              case 'H':\n                r[1] = +pa[1] + x;\n                break;\n              case 'M':\n                mx = +pa[1] + x;\n                my = +pa[2] + y;\n                jj = pa.length;\n                for (j = 1; j < jj; j++) {\n                  r[j] = +pa[j] + (j % 2 ? x : y);\n                }\n                break;\n              default:\n                jj = pa.length;\n                for (j = 1; j < jj; j++) {\n                  r[j] = +pa[j] + (j % 2 ? x : y);\n                }\n                break;\n            }\n          } else {\n            var kk = pa.length;\n            for (var k = 0; k < kk; k++) {\n              r[k] = pa[k];\n            }\n          }\n          switch (r[0]) {\n            case 'Z':\n              x = +mx;\n              y = +my;\n              break;\n            case 'H':\n              x = r[1];\n              break;\n            case 'V':\n              y = r[1];\n              break;\n            case 'M':\n              mx = r[r.length - 2];\n              my = r[r.length - 1];\n              x = r[r.length - 2];\n              y = r[r.length - 1];\n              break;\n            default:\n              x = r[r.length - 2];\n              y = r[r.length - 1];\n              break;\n          }\n        }\n        return res;\n      }\n      function normalize(path) {\n        var p = pathToAbsolute(path);\n        var attrs = {\n          x: 0,\n          y: 0,\n          bx: 0,\n          by: 0,\n          X: 0,\n          Y: 0,\n          qx: null,\n          qy: null\n        };\n        function processPath(path, d, pcom) {\n          var nx, ny;\n          if (!path) {\n            return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n          }\n          if (!(path[0] in {\n            T: 1,\n            Q: 1\n          })) {\n            d.qx = null;\n            d.qy = null;\n          }\n          switch (path[0]) {\n            case 'M':\n              d.X = path[1];\n              d.Y = path[2];\n              break;\n            case 'A':\n              if (parseFloat(path[1]) === 0 || parseFloat(path[2]) === 0) {\n                // https://www.w3.org/TR/SVG/paths.html#ArcOutOfRangeParameters\n                // \"If either rx or ry is 0, then this arc is treated as a\n                // straight line segment (a \"lineto\") joining the endpoints.\"\n                path = ['L', path[6], path[7]];\n              } else {\n                path = ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n              }\n              break;\n            case 'S':\n              if (pcom === 'C' || pcom === 'S') {\n                // In 'S' case we have to take into account, if the previous command is C/S.\n                nx = d.x * 2 - d.bx; // And reflect the previous\n                ny = d.y * 2 - d.by; // command's control point relative to the current point.\n              } else {\n                // or some else or nothing\n                nx = d.x;\n                ny = d.y;\n              }\n              path = ['C', nx, ny].concat(path.slice(1));\n              break;\n            case 'T':\n              if (pcom === 'Q' || pcom === 'T') {\n                // In 'T' case we have to take into account, if the previous command is Q/T.\n                d.qx = d.x * 2 - d.qx; // And make a reflection similar\n                d.qy = d.y * 2 - d.qy; // to case 'S'.\n              } else {\n                // or something else or nothing\n                d.qx = d.x;\n                d.qy = d.y;\n              }\n              path = ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n              break;\n            case 'Q':\n              d.qx = path[1];\n              d.qy = path[2];\n              path = ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n              break;\n            case 'H':\n              path = ['L'].concat(path[1], d.y);\n              break;\n            case 'V':\n              path = ['L'].concat(d.x, path[1]);\n              break;\n            case 'L':\n              break;\n            case 'Z':\n              break;\n          }\n          return path;\n        }\n        function fixArc(pp, i) {\n          if (pp[i].length > 7) {\n            pp[i].shift();\n            var pi = pp[i];\n            while (pi.length) {\n              pcoms[i] = 'A'; // if created multiple 'C's, their original seg is saved\n              pp.splice(i++, 0, ['C'].concat(pi.splice(0, 6)));\n            }\n            pp.splice(i, 1);\n            ii = p.length;\n          }\n        }\n        var pcoms = []; // path commands of original path p\n        var pfirst = ''; // temporary holder for original path command\n        var pcom = ''; // holder for previous path command of original path\n\n        var ii = p.length;\n        for (var i = 0; i < ii; i++) {\n          if (p[i]) {\n            pfirst = p[i][0];\n          } // save current path command\n\n          if (pfirst !== 'C') {\n            // C is not saved yet, because it may be result of conversion\n            pcoms[i] = pfirst; // Save current path command\n            if (i > 0) {\n              pcom = pcoms[i - 1];\n            } // Get previous path command pcom\n          }\n          p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\n\n          if (pcoms[i] !== 'A' && pfirst === 'C') {\n            pcoms[i] = 'C';\n          } // 'A' is the only command\n          // which may produce multiple 'C's\n          // so we have to make sure that 'C' is also 'C' in original path\n\n          fixArc(p, i); // fixArc adds also the right amount of 'A's to pcoms\n\n          var seg = p[i];\n          var seglen = seg.length;\n          attrs.x = seg[seglen - 2];\n          attrs.y = seg[seglen - 1];\n          attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n          attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n        }\n\n        // make sure normalized path data string starts with an M segment\n        if (!p[0][0] || p[0][0] !== 'M') {\n          p.unshift(['M', 0, 0]);\n        }\n        return p;\n      }\n      return function (pathData) {\n        return normalize(pathData).join(',').split(',').join(' ');\n      };\n    }();\n    V.namespace = ns;\n    V.g = g;\n    return V;\n  }();\n  var config = {\n    // When set to `true` the cell selectors could be defined as CSS selectors.\n    // If not, only JSON Markup selectors are taken into account.\n    // export let useCSSSelectors = true;\n    useCSSSelectors: true,\n    // The class name prefix config is for advanced use only.\n    // Be aware that if you change the prefix, the JointJS CSS will no longer function properly.\n    // export let classNamePrefix = 'joint-';\n    // export let defaultTheme = 'default';\n    classNamePrefix: 'joint-',\n    defaultTheme: 'default',\n    // The maximum delay required for two consecutive touchend events to be interpreted\n    // as a double-tap.\n    doubleTapInterval: 300\n  };\n\n  // code is inspired by https://github.com/lodash/lodash\n\n  /* eslint-disable no-case-declarations */\n  // -- helper constants\n  var argsTag = '[object Arguments]';\n  var arrayTag = '[object Array]';\n  var boolTag = '[object Boolean]';\n  var dateTag = '[object Date]';\n  var errorTag = '[object Error]';\n  var funcTag = '[object Function]';\n  var mapTag = '[object Map]';\n  var numberTag = '[object Number]';\n  var nullTag = '[object Null]';\n  var objectTag = '[object Object]';\n  var regexpTag = '[object RegExp]';\n  var setTag = '[object Set]';\n  var stringTag = '[object String]';\n  var symbolTag = '[object Symbol]';\n  var undefinedTag = '[object Undefined]';\n  var weakMapTag = '[object WeakMap]';\n  var arrayBufferTag = '[object ArrayBuffer]';\n  var dataViewTag = '[object DataView]';\n  var float32Tag = '[object Float32Array]';\n  var float64Tag = '[object Float64Array]';\n  var int8Tag = '[object Int8Array]';\n  var int16Tag = '[object Int16Array]';\n  var int32Tag = '[object Int32Array]';\n  var uint8Tag = '[object Uint8Array]';\n  var uint8ClampedTag = '[object Uint8ClampedArray]';\n  var uint16Tag = '[object Uint16Array]';\n  var uint32Tag = '[object Uint32Array]';\n  var CLONEABLE_TAGS = {};\n  CLONEABLE_TAGS[argsTag] = true;\n  CLONEABLE_TAGS[arrayTag] = true;\n  CLONEABLE_TAGS[arrayBufferTag] = true;\n  CLONEABLE_TAGS[dataViewTag] = true;\n  CLONEABLE_TAGS[boolTag] = true;\n  CLONEABLE_TAGS[dateTag] = true;\n  CLONEABLE_TAGS[float32Tag] = true;\n  CLONEABLE_TAGS[float64Tag] = true;\n  CLONEABLE_TAGS[int8Tag] = true;\n  CLONEABLE_TAGS[int16Tag] = true;\n  CLONEABLE_TAGS[int32Tag] = true;\n  CLONEABLE_TAGS[mapTag] = true;\n  CLONEABLE_TAGS[numberTag] = true;\n  CLONEABLE_TAGS[objectTag] = true;\n  CLONEABLE_TAGS[regexpTag] = true;\n  CLONEABLE_TAGS[setTag] = true;\n  CLONEABLE_TAGS[stringTag] = true;\n  CLONEABLE_TAGS[symbolTag] = true;\n  CLONEABLE_TAGS[uint8Tag] = true;\n  CLONEABLE_TAGS[uint8ClampedTag] = true;\n  CLONEABLE_TAGS[uint16Tag] = true;\n  CLONEABLE_TAGS[uint32Tag] = true;\n  CLONEABLE_TAGS[errorTag] = false;\n  CLONEABLE_TAGS[funcTag] = false;\n  CLONEABLE_TAGS[weakMapTag] = false;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff';\n  var rsComboMarksRange = '\\\\u0300-\\\\u036f';\n  var reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f';\n  var rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff';\n  var rsComboMarksExtendedRange = '\\\\u1ab0-\\\\u1aff';\n  var rsComboMarksSupplementRange = '\\\\u1dc0-\\\\u1dff';\n  var rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange + rsComboMarksExtendedRange + rsComboMarksSupplementRange;\n  var rsDingbatRange = '\\\\u2700-\\\\u27bf';\n  var rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff';\n  var rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7';\n  var rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf';\n  var rsPunctuationRange = '\\\\u2000-\\\\u206f';\n  var rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000';\n  var rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde';\n  var rsVarRange = '\\\\ufe0e\\\\ufe0f';\n  var rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = '[\\'\\u2019]';\n  var rsBreak = \"[\" + rsBreakRange + \"]\";\n  var rsCombo = \"[\" + rsComboRange + \"]\";\n  var rsDigit = '\\\\d';\n  var rsDingbat = \"[\" + rsDingbatRange + \"]\";\n  var rsLower = \"[\" + rsLowerRange + \"]\";\n  var rsMisc = \"[^\" + rsAstralRange + (rsBreakRange + rsDigit + rsDingbatRange + rsLowerRange + rsUpperRange) + \"]\";\n  var rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]';\n  var rsModifier = \"(?:\" + rsCombo + \"|\" + rsFitz + \")\";\n  var rsNonAstral = \"[^\" + rsAstralRange + \"]\";\n  var rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}';\n  var rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]';\n  var rsUpper = \"[\" + rsUpperRange + \"]\";\n  var rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = \"(?:\" + rsLower + \"|\" + rsMisc + \")\";\n  var rsMiscUpper = \"(?:\" + rsUpper + \"|\" + rsMisc + \")\";\n  var rsOptContrLower = \"(?:\" + rsApos + \"(?:d|ll|m|re|s|t|ve))?\";\n  var rsOptContrUpper = \"(?:\" + rsApos + \"(?:D|LL|M|RE|S|T|VE))?\";\n  var reOptMod = rsModifier + \"?\";\n  var rsOptVar = \"[\" + rsVarRange + \"]?\";\n  var rsOptJoin = \"(?:\" + rsZWJ + \"(?:\" + [rsNonAstral, rsRegional, rsSurrPair].join('|') + \")\" + (rsOptVar + reOptMod) + \")*\";\n  var rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])';\n  var rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])';\n  var rsSeq = rsOptVar + reOptMod + rsOptJoin;\n  var rsEmoji = \"(?:\" + [rsDingbat, rsRegional, rsSurrPair].join('|') + \")\" + rsSeq;\n  var reUnicodeWords = RegExp([rsUpper + \"?\" + rsLower + \"+\" + rsOptContrLower + \"(?=\" + [rsBreak, rsUpper, '$'].join('|') + \")\", rsMiscUpper + \"+\" + rsOptContrUpper + \"(?=\" + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + \")\", rsUpper + \"?\" + rsMiscLower + \"+\" + rsOptContrLower, rsUpper + \"+\" + rsOptContrUpper, rsOrdUpper, rsOrdLower, rsDigit + \"+\", rsEmoji].join('|'), 'g');\n  var LARGE_ARRAY_SIZE = 200;\n  var HASH_UNDEFINED = '__hash_undefined__';\n\n  // Used to match `toStringTag` values of typed arrays\n  var reTypedTag = /^\\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\\]$/;\n\n  // Used to compose unicode capture groups\n  var rsAstral = \"[\" + rsAstralRange + \"]\";\n\n  // Used to compose unicode regexes\n  var rsNonAstralCombo = \"\" + rsNonAstral + rsCombo + \"?\";\n  var rsSymbol = \"(?:\" + [rsNonAstralCombo, rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + \")\";\n\n  // Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode)\n  var reUnicode = RegExp(rsFitz + \"(?=\" + rsFitz + \")|\" + (rsSymbol + rsSeq), 'g');\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/;\n  var reIsPlainProp = /^\\w*$/;\n  var charCodeOfDot = '.'.charCodeAt(0);\n  var reEscapeChar = /\\\\(\\\\)?/g;\n  var rePropName = RegExp(\n  // Match anything that isn't a dot or bracket.\n  '[^.[\\\\]]+' + '|' +\n  // Or match property names within brackets.\n  '\\\\[(?:' +\n  // Match a non-string expression.\n  '([^\"\\'][^[]*)' + '|' +\n  // Or match strings (supports escaping characters).\n  '([\"\\'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2' + ')\\\\]' + '|' +\n  // Or match \"\" as the space between consecutive dots or empty brackets.\n  '(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))', 'g');\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n  var hasUnicodeWord = RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/);\n  var MAX_ARRAY_INDEX = 4294967295 - 1;\n\n  /** Used to match words composed of alphanumeric characters. */\n  // eslint-disable-next-line no-control-regex\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  // -- helper functions\n  var hasUnicode = function (string) {\n    return reUnicode.test(string);\n  };\n  var unicodeToArray = function (string) {\n    return string.match(reUnicode) || [];\n  };\n  var asciiToArray = function (string) {\n    return string.split('');\n  };\n  var stringToArray = function (string) {\n    return hasUnicode(string) ? unicodeToArray(string) : asciiToArray(string);\n  };\n  var values = function (object) {\n    if (object == null) {\n      return [];\n    }\n    return keys$1(object).map(function (key) {\n      return object[key];\n    });\n  };\n  var keys$1 = function (object) {\n    return isArrayLike(object) ? arrayLikeKeys(object) : Object.keys(Object(object));\n  };\n  var baseKeys = function (object) {\n    if (!isPrototype(object)) {\n      return Object.keys(object);\n    }\n    var result = [];\n    for (var key in Object(object)) {\n      if (hasOwnProperty.call(object, key) && key != 'constructor') {\n        result.push(key);\n      }\n    }\n    return result;\n  };\n  var arrayLikeKeys = function (value, inherited) {\n    var isArr = Array.isArray(value);\n    var isArg = !isArr && isObjectLike(value) && getTag(value) === argsTag;\n    var isType = !isArr && !isArg && isTypedArray(value);\n    var skipIndexes = isArr || isArg || isType;\n    var length = value.length;\n    var result = new Array(skipIndexes ? length : 0);\n    var index = skipIndexes ? -1 : length;\n    while (++index < length) {\n      result[index] = \"\" + index;\n    }\n    for (var key in value) {\n      if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && (\n      // Safari 9 has enumerable `arguments.length` in strict mode.\n      key === 'length' ||\n      // Skip index properties.\n      isIndex(key, length)))) {\n        result.push(key);\n      }\n    }\n    return result;\n  };\n  var assocIndexOf = function (array, key) {\n    var length = array.length;\n    while (length--) {\n      if (eq(array[length][0], key)) {\n        return length;\n      }\n    }\n    return -1;\n  };\n  var eq = function (value, other) {\n    return value === other || value !== value && other !== other;\n  };\n  var isObjectLike = function (value) {\n    return value != null && typeof value == 'object';\n  };\n  var isIterateeCall = function (value, index, object) {\n    if (!isObject$1(object)) {\n      return false;\n    }\n    var type = typeof index;\n    var isPossibleIteratee = type == 'number' ? isArrayLike(object) && index > -1 && index < object.length : type == 'string' && index in object;\n    if (isPossibleIteratee) {\n      return eq(object[index], value);\n    }\n    return false;\n  };\n  var isSet = function (value) {\n    return isObjectLike(value) && getTag(value) == setTag;\n  };\n  var isMap = function (value) {\n    return isObjectLike(value) && getTag(value) == mapTag;\n  };\n  var isPrototype = function (value) {\n    var Ctor = value && value.constructor;\n    var proto = typeof Ctor === 'function' && Ctor.prototype || Object.prototype;\n    return value === proto;\n  };\n  var assignValue = function (object, key, value) {\n    var objValue = object[key];\n    if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) || value === undefined && !(key in object)) {\n      object[key] = value;\n    }\n  };\n  var copyObject = function (source, props, object) {\n    var index = -1;\n    var length = props.length;\n    while (++index < length) {\n      var key = props[index];\n      assignValue(object, key, source[key]);\n    }\n    return object;\n  };\n  var isArrayLike = function (value) {\n    return value != null && typeof value !== 'function' && typeof value.length === 'number' && value.length > -1 && value.length % 1 === 0;\n  };\n  var isSymbol = function (value) {\n    return typeof value == 'symbol' || isObjectLike(value) && getTag(value) === symbolTag;\n  };\n  var initCloneArray = function (array) {\n    var length = array.length;\n    var result = new array.constructor(length);\n    if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n      result.index = array.index;\n      result.input = array.input;\n    }\n    return result;\n  };\n  var copyArray = function (source, array) {\n    var index = -1;\n    var length = source.length;\n    array || (array = new Array(length));\n    while (++index < length) {\n      array[index] = source[index];\n    }\n    return array;\n  };\n  var getTag = function (value) {\n    if (value == null) {\n      return value === undefined ? undefinedTag : nullTag;\n    }\n    return Object.prototype.toString.call(value);\n  };\n  var cloneArrayBuffer = function (arrayBuffer) {\n    var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n    new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n    return result;\n  };\n  var cloneTypedArray = function (typedArray, isDeep) {\n    var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n    return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n  };\n  var cloneRegExp = function (regexp) {\n    var result = new regexp.constructor(regexp.source, /\\w*$/.exec(regexp));\n    result.lastIndex = regexp.lastIndex;\n    return result;\n  };\n  var initCloneObject = function (object) {\n    return typeof object.constructor == 'function' && !isPrototype(object) ? Object.create(Object.getPrototypeOf(object)) : {};\n  };\n  var getSymbols = function (object) {\n    if (object == null) {\n      return [];\n    }\n    object = Object(object);\n    var symbols = Object.getOwnPropertySymbols(object);\n    return symbols.filter(function (symbol) {\n      return propertyIsEnumerable.call(object, symbol);\n    });\n  };\n  var copySymbols = function (source, object) {\n    return copyObject(source, getSymbols(source), object);\n  };\n  function cloneDataView(dataView, isDeep) {\n    var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n    return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n  }\n  var initCloneByTag = function (object, tag, isDeep) {\n    var Constructor = object.constructor;\n    switch (tag) {\n      case arrayBufferTag:\n        return cloneArrayBuffer(object, isDeep);\n      case boolTag:\n      case dateTag:\n        return new Constructor(+object);\n      case dataViewTag:\n        return cloneDataView(object, isDeep);\n      case float32Tag:\n      case float64Tag:\n      case int8Tag:\n      case int16Tag:\n      case int32Tag:\n      case uint8Tag:\n      case uint8ClampedTag:\n      case uint16Tag:\n      case uint32Tag:\n        return cloneTypedArray(object, isDeep);\n      case mapTag:\n        return new Constructor(object);\n      case numberTag:\n      case stringTag:\n        return new Constructor(object);\n      case regexpTag:\n        return cloneRegExp(object);\n      case setTag:\n        return new Constructor();\n      case symbolTag:\n        return Symbol.prototype.valueOf ? Object(Symbol.prototype.valueOf.call(object)) : {};\n    }\n  };\n  var isTypedArray = function (value) {\n    return isObjectLike(value) && reTypedTag.test(getTag(value));\n  };\n  var getAllKeys = function (object) {\n    var result = Object.keys(object);\n    if (!Array.isArray(object) && object != null) {\n      result.push.apply(result, getSymbols(Object(object)));\n    }\n    return result;\n  };\n  var getSymbolsIn = function (object) {\n    var result = [];\n    while (object) {\n      result.push.apply(result, getSymbols(object));\n      object = Object.getPrototypeOf(Object(object));\n    }\n    return result;\n  };\n  var getAllKeysIn = function (object) {\n    var result = [];\n    for (var key in object) {\n      result.push(key);\n    }\n    if (!Array.isArray(object)) {\n      result.push.apply(result, getSymbolsIn(object));\n    }\n    return result;\n  };\n  var getMapData = function (ref, key) {\n    var __data__ = ref.__data__;\n    var data = __data__;\n    return isKeyable(key) ? data[typeof key === 'string' ? 'string' : 'hash'] : data.map;\n  };\n  var equalObjects = function (object, other, equalFunc, stack) {\n    var objProps = getAllKeys(object);\n    var objLength = objProps.length;\n    var othProps = getAllKeys(other);\n    var othLength = othProps.length;\n    if (objLength != othLength) {\n      return false;\n    }\n    var key;\n    var index = objLength;\n    while (index--) {\n      key = objProps[index];\n      if (!hasOwnProperty.call(other, key)) {\n        return false;\n      }\n    }\n    var objStacked = stack.get(object);\n    var othStacked = stack.get(other);\n    if (objStacked && othStacked) {\n      return objStacked == other && othStacked == object;\n    }\n    var result = true;\n    stack.set(object, other);\n    stack.set(other, object);\n    var compared;\n    var skipCtor;\n    while (++index < objLength) {\n      key = objProps[index];\n      var objValue = object[key];\n      var othValue = other[key];\n      if (!(compared === undefined ? objValue === othValue || equalFunc(objValue, othValue, stack) : compared)) {\n        result = false;\n        break;\n      }\n      skipCtor || (skipCtor = key == 'constructor');\n    }\n    if (result && !skipCtor) {\n      var objCtor = object.constructor;\n      var othCtor = other.constructor;\n      if (objCtor != othCtor && 'constructor' in object && 'constructor' in other && !(typeof objCtor === 'function' && objCtor instanceof objCtor && typeof othCtor === 'function' && othCtor instanceof othCtor)) {\n        result = false;\n      }\n    }\n    stack['delete'](object);\n    stack['delete'](other);\n    return result;\n  };\n  var baseIsEqual = function (value, other, stack) {\n    if (value === other) {\n      return true;\n    }\n    if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {\n      return value !== value && other !== other;\n    }\n    return baseIsEqualDeep(value, other, baseIsEqual, stack);\n  };\n  var baseIsEqualDeep = function (object, other, equalFunc, stack) {\n    var objIsArr = Array.isArray(object);\n    var othIsArr = Array.isArray(other);\n    var objTag = objIsArr ? arrayTag : getTag(object);\n    var othTag = othIsArr ? arrayTag : getTag(other);\n    objTag = objTag == argsTag ? objectTag : objTag;\n    othTag = othTag == argsTag ? objectTag : othTag;\n    var objIsObj = objTag == objectTag;\n    var othIsObj = othTag == objectTag;\n    var isSameTag = objTag == othTag;\n    if (isSameTag && !objIsObj) {\n      stack || (stack = new Stack());\n      return objIsArr || isTypedArray(object) ? equalArrays(object, other, false, equalFunc, stack) : equalByTag(object, other, objTag, equalFunc, stack);\n    }\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__');\n    var othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object;\n      var othUnwrapped = othIsWrapped ? other.value() : other;\n      stack || (stack = new Stack());\n      return equalFunc(objUnwrapped, othUnwrapped, stack);\n    }\n    if (!isSameTag) {\n      return false;\n    }\n    stack || (stack = new Stack());\n    return equalObjects(object, other, equalFunc, stack);\n  };\n  var equalArrays = function (array, other, compareUnordered, equalFunc, stack) {\n    var isPartial = false;\n    var arrLength = array.length;\n    var othLength = other.length;\n    if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n      return false;\n    }\n    // Assume cyclic values are equal.\n    var arrStacked = stack.get(array);\n    var othStacked = stack.get(other);\n    if (arrStacked && othStacked) {\n      return arrStacked == other && othStacked == array;\n    }\n    var index = -1;\n    var result = true;\n    var seen = compareUnordered ? new SetCache() : undefined;\n    stack.set(array, other);\n    stack.set(other, array);\n    var loop = function () {\n      var compared = void 0;\n      var arrValue = array[index];\n      var othValue = other[index];\n      if (compared !== undefined) {\n        if (compared) {\n          return;\n        }\n        result = false;\n        return 'break';\n      }\n      if (seen) {\n        if (!some(other, function (othValue, othIndex) {\n          if (!cacheHas(seen, othIndex) && (arrValue === othValue || equalFunc(arrValue, othValue, stack))) {\n            return seen.push(othIndex);\n          }\n        })) {\n          result = false;\n          return 'break';\n        }\n      } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, stack))) {\n        result = false;\n        return 'break';\n      }\n    };\n    while (++index < arrLength) {\n      var returned = loop();\n      if (returned === 'break') break;\n    }\n    stack['delete'](array);\n    stack['delete'](other);\n    return result;\n  };\n  var some = function (array, predicate) {\n    var index = -1;\n    var length = array == null ? 0 : array.length;\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  };\n  var cacheHas = function (cache, key) {\n    return cache.has(key);\n  };\n  var compareArrayBufferTag = function (object, other, equalFunc, stack) {\n    if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array(object), new Uint8Array(other), stack)) {\n      return false;\n    }\n    return true;\n  };\n  var equalByTag = function (object, other, tag, equalFunc, stack) {\n    switch (tag) {\n      case dataViewTag:\n        if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {\n          return false;\n        }\n        object = object.buffer;\n        other = other.buffer;\n        return compareArrayBufferTag(object, other, equalFunc, stack);\n      case arrayBufferTag:\n        return compareArrayBufferTag(object, other, equalFunc, stack);\n      case boolTag:\n      case dateTag:\n      case numberTag:\n        return eq(+object, +other);\n      case errorTag:\n        return object.name == other.name && object.message == other.message;\n      case regexpTag:\n      case stringTag:\n        return object == \"\" + other;\n      case mapTag:\n        var convert = mapToArray;\n      // Intentional fallthrough\n      // eslint-disable-next-line no-fallthrough\n      case setTag:\n        convert || (convert = setToArray);\n        if (object.size != other.size) {\n          return false;\n        }\n        // Assume cyclic values are equal.\n        var stacked = stack.get(object);\n        if (stacked) {\n          return stacked == other;\n        }\n\n        // Recursively compare objects (susceptible to call stack limits).\n        stack.set(object, other);\n        var result = equalArrays(convert(object), convert(other), true, equalFunc, stack);\n        stack['delete'](object);\n        return result;\n      case symbolTag:\n        return Symbol.prototype.valueOf.call(object) == Symbol.prototype.valueOf.call(other);\n    }\n    return false;\n  };\n  var mapToArray = function (map) {\n    var index = -1;\n    var result = Array(map.size);\n    map.forEach(function (value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  };\n  var setToArray = function (set) {\n    var index = -1;\n    var result = new Array(set.size);\n    set.forEach(function (value) {\n      result[++index] = value;\n    });\n    return result;\n  };\n  var isKey = function (value, object) {\n    if (Array.isArray(value)) {\n      return false;\n    }\n    var type = typeof value;\n    if (type === 'number' || type === 'boolean' || value == null || isSymbol(value)) {\n      return true;\n    }\n    return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);\n  };\n  var stringToPath = function (string) {\n    var result = [];\n    if (string.charCodeAt(0) === charCodeOfDot) {\n      result.push('');\n    }\n    string.replace(rePropName, function (match, expression, quote, subString) {\n      var key = match;\n      if (quote) {\n        key = subString.replace(reEscapeChar, '$1');\n      } else if (expression) {\n        key = expression.trim();\n      }\n      result.push(key);\n    });\n    return result;\n  };\n  var castPath = function (path, object) {\n    if (Array.isArray(path)) {\n      return path;\n    }\n    return isKey(path, object) ? [path] : stringToPath(\"\" + path);\n  };\n  var get$1 = function (object, path) {\n    path = castPath(path, object);\n    var index = 0;\n    var length = path.length;\n    while (object != null && index < length) {\n      object = object[toKey(path[index])];\n      index++;\n    }\n    return index && index == length ? object : undefined;\n  };\n  function compareAscending(value, other) {\n    if (value !== other) {\n      var valIsDefined = value !== undefined;\n      var valIsNull = value === null;\n      var valIsReflexive = value === value;\n      var valIsSymbol = isSymbol(value);\n      var othIsDefined = other !== undefined;\n      var othIsNull = other === null;\n      var othIsReflexive = other === other;\n      var othIsSymbol = isSymbol(other);\n      if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {\n        return 1;\n      }\n      if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {\n        return -1;\n      }\n    }\n    return 0;\n  }\n  function compareMultiple(object, other, orders) {\n    var index = -1;\n    var objCriteria = object.criteria;\n    var othCriteria = other.criteria;\n    var length = objCriteria.length;\n    var ordersLength = orders.length;\n    while (++index < length) {\n      var order = index < ordersLength ? orders[index] : null;\n      var cmpFn = order && typeof order === 'function' ? order : compareAscending;\n      var result = cmpFn(objCriteria[index], othCriteria[index]);\n      if (result) {\n        if (order && typeof order !== 'function') {\n          return result * (order == 'desc' ? -1 : 1);\n        }\n        return result;\n      }\n    }\n    return object.index - other.index;\n  }\n  var diff = function (array, values) {\n    var includes = function (array, value) {\n      var length = array == null ? 0 : array.length;\n      return !!length && array.indexOf(value) > -1;\n    };\n    var isCommon = true;\n    var result = [];\n    var valuesLength = values.length;\n    if (!array.length) {\n      return result;\n    }\n    if (values.length >= LARGE_ARRAY_SIZE) {\n      includes = function (cache, key) {\n        return cache.has(key);\n      };\n      isCommon = false;\n      values = new SetCache(values);\n    }\n    outer: for (var key in array) {\n      var value = array[key];\n      var computed = value;\n      value = value !== 0 ? value : 0;\n      if (isCommon && computed === computed) {\n        var valuesIndex = valuesLength;\n        while (valuesIndex--) {\n          if (values[valuesIndex] === computed) {\n            continue outer;\n          }\n        }\n        result.push(value);\n      } else if (!includes(values, computed)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n  var intersect = function (arrays) {\n    var includes = function (array, value) {\n      var length = array == null ? 0 : array.length;\n      return !!length && array.indexOf(value) > -1;\n    };\n    var cacheHas = function (cache, key) {\n      return cache.has(key);\n    };\n    var length = arrays[0].length;\n    var othLength = arrays.length;\n    var caches = new Array(othLength);\n    var result = [];\n    var array;\n    var maxLength = Infinity;\n    var othIndex = othLength;\n    while (othIndex--) {\n      array = arrays[othIndex];\n      maxLength = Math.min(array.length, maxLength);\n      caches[othIndex] = length >= 120 && array.length >= 120 ? new SetCache(othIndex && array) : undefined;\n    }\n    array = arrays[0];\n    var index = -1;\n    var seen = caches[0];\n    outer: while (++index < length && result.length < maxLength) {\n      var value = array[index];\n      var computed = value;\n      value = value !== 0 ? value : 0;\n      if (!(seen ? cacheHas(seen, computed) : includes(result, computed))) {\n        othIndex = othLength;\n        while (--othIndex) {\n          var cache = caches[othIndex];\n          if (!(cache ? cacheHas(cache, computed) : includes(arrays[othIndex], computed))) {\n            continue outer;\n          }\n        }\n        if (seen) {\n          seen.push(computed);\n        }\n        result.push(value);\n      }\n    }\n    return result;\n  };\n  var toKey = function (value) {\n    if (typeof value === 'string' || isSymbol(value)) {\n      return value;\n    }\n    var result = \"\" + value;\n    return result == '0' && 1 / value == -Infinity ? '-0' : result;\n  };\n  var baseClone = function (value, isDeep, isFlat, isFull, customizer, key, object, stack) {\n    if (isDeep === void 0) isDeep = false;\n    if (isFlat === void 0) isFlat = false;\n    if (isFull === void 0) isFull = true;\n    var result;\n    if (customizer) {\n      result = object ? customizer(value, key, object, stack) : customizer(value);\n    }\n    if (result !== undefined) {\n      return result;\n    }\n    if (!isObject$1(value)) {\n      return value;\n    }\n    var isArr = Array.isArray(value);\n    var tag = getTag(value);\n    if (isArr) {\n      result = initCloneArray(value);\n      if (!isDeep) {\n        return copyArray(value, result);\n      }\n    } else {\n      var isFunc = typeof value === 'function';\n      if (tag === objectTag || tag === argsTag || isFunc && !object) {\n        result = isFlat || isFunc ? {} : initCloneObject(value);\n        if (!isDeep) {\n          return isFlat ? copySymbolsIn(value, copyObject(value, Object.keys(value), result)) : copySymbols(value, Object.assign(result, value));\n        }\n      } else {\n        if (isFunc || !CLONEABLE_TAGS[tag]) {\n          return object ? value : {};\n        }\n        result = initCloneByTag(value, tag, isDeep);\n      }\n    }\n    stack || (stack = new Stack());\n    var stacked = stack.get(value);\n    if (stacked) {\n      return stacked;\n    }\n    stack.set(value, result);\n    if (isMap(value)) {\n      value.forEach(function (subValue, key) {\n        result.set(key, baseClone(subValue, isDeep, isFlat, isFull, customizer, key, value, stack));\n      });\n      return result;\n    }\n    if (isSet(value)) {\n      value.forEach(function (subValue) {\n        result.add(baseClone(subValue, isDeep, isFlat, isFull, customizer, subValue, value, stack));\n      });\n      return result;\n    }\n    if (isTypedArray(value)) {\n      return result;\n    }\n    var keysFunc = isFull ? isFlat ? getAllKeysIn : getAllKeys : isFlat ? keysIn : keys$1;\n    var props = isArr ? undefined : keysFunc(value);\n    (props || value).forEach(function (subValue, key) {\n      if (props) {\n        key = subValue;\n        subValue = value[key];\n      }\n      assignValue(result, key, baseClone(subValue, isDeep, isFlat, isFull, customizer, key, value, stack));\n    });\n    return result;\n  };\n  var copySymbolsIn = function (source, object) {\n    return copyObject(source, getSymbolsIn(source), object);\n  };\n  var parent = function (object, path) {\n    return path.length < 2 ? object : get$1(object, path.slice(0, -1));\n  };\n  var set$1 = function (object, path, value) {\n    if (!isObject$1(object)) {\n      return object;\n    }\n    path = castPath(path, object);\n    var length = path.length;\n    var lastIndex = length - 1;\n    var index = -1;\n    var nested = object;\n    while (nested != null && ++index < length) {\n      var key = toKey(path[index]);\n      var newValue = value;\n      if (index != lastIndex) {\n        var objValue = nested[key];\n        newValue = undefined;\n        if (newValue === undefined) {\n          newValue = isObject$1(objValue) ? objValue : isIndex(path[index + 1]) ? [] : {};\n        }\n      }\n      assignValue(nested, key, newValue);\n      nested = nested[key];\n    }\n    return object;\n  };\n  var isIndex = function (value, length) {\n    var type = typeof value;\n    length = length == null ? Number.MAX_SAFE_INTEGER : length;\n    return !!length && (type === 'number' || type !== 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;\n  };\n  var unset = function (object, path) {\n    path = castPath(path, object);\n    object = parent(object, path);\n    var lastSegment = path[path.length - 1];\n    return object == null || delete object[toKey(lastSegment)];\n  };\n  var isKeyable = function (value) {\n    var type = typeof value;\n    return type === 'string' || type === 'number' || type === 'symbol' || type === 'boolean' ? value !== '__proto__' : value === null;\n  };\n  var keysIn = function (object) {\n    var result = [];\n    for (var key in object) {\n      result.push(key);\n    }\n    return result;\n  };\n  var toPlainObject = function (value) {\n    value = Object(value);\n    var result = {};\n    for (var key in value) {\n      result[key] = value[key];\n    }\n    return result;\n  };\n  var safeGet = function (object, key) {\n    if (key === 'constructor' && typeof object[key] === 'function') {\n      return;\n    }\n    if (key == '__proto__') {\n      return;\n    }\n    return object[key];\n  };\n  function createAssigner(assigner, isMerge) {\n    if (isMerge === void 0) isMerge = false;\n    return function (object) {\n      var sources = [],\n        len = arguments.length - 1;\n      while (len-- > 0) sources[len] = arguments[len + 1];\n      var index = -1;\n      var length = sources.length;\n      var customizer = length > 1 ? sources[length - 1] : undefined;\n      var guard = length > 2 ? sources[2] : undefined;\n      customizer = assigner.length > 3 && typeof customizer === 'function' ? (length--, customizer) : isMerge ? function (a, b) {\n        if (Array.isArray(a) && !Array.isArray(b)) {\n          return b;\n        }\n      } : undefined;\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        customizer = length < 3 ? undefined : customizer;\n        length = 1;\n      }\n      object = Object(object);\n      while (++index < length) {\n        var source = sources[index];\n        if (source) {\n          assigner(object, source, index, customizer);\n        }\n      }\n      return object;\n    };\n  }\n  var baseMerge = function (object, source, srcIndex, customizer, stack) {\n    if (object === source) {\n      return;\n    }\n    forIn(source, function (srcValue, key) {\n      if (isObject$1(srcValue)) {\n        stack || (stack = new Stack());\n        baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n      } else {\n        var newValue = customizer ? customizer(object[key], srcValue, \"\" + key, object, source, stack) : undefined;\n        if (newValue === undefined) {\n          newValue = srcValue;\n        }\n        assignMergeValue(object, key, newValue);\n      }\n    }, keysIn);\n  };\n  var baseMergeDeep = function (object, source, key, srcIndex, mergeFunc, customizer, stack) {\n    var objValue = safeGet(object, key);\n    var srcValue = safeGet(source, key);\n    var stacked = stack.get(srcValue);\n    if (stacked) {\n      assignMergeValue(object, key, stacked);\n      return;\n    }\n    var newValue = customizer ? customizer(objValue, srcValue, \"\" + key, object, source, stack) : undefined;\n    var isCommon = newValue === undefined;\n    if (isCommon) {\n      var isArr = Array.isArray(srcValue);\n      var isTyped = !isArr && isTypedArray(srcValue);\n      newValue = srcValue;\n      if (isArr || isTyped) {\n        if (Array.isArray(objValue)) {\n          newValue = objValue;\n        } else if (isObjectLike(objValue) && isArrayLike(objValue)) {\n          newValue = copyArray(objValue);\n        } else if (isTyped) {\n          isCommon = false;\n          newValue = cloneTypedArray(srcValue, true);\n        } else {\n          newValue = [];\n        }\n      } else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n        newValue = objValue;\n        if (isArguments(objValue)) {\n          newValue = toPlainObject(objValue);\n        } else if (typeof objValue === 'function' || !isObject$1(objValue)) {\n          newValue = initCloneObject(srcValue);\n        }\n      } else {\n        isCommon = false;\n      }\n    }\n    if (isCommon) {\n      // Recursively merge objects and arrays (susceptible to call stack limits).\n      stack.set(srcValue, newValue);\n      mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n      stack['delete'](srcValue);\n    }\n    assignMergeValue(object, key, newValue);\n  };\n  var assignMergeValue = function (object, key, value) {\n    if (value !== undefined && !eq(object[key], value) || value === undefined && !(key in object)) {\n      assignValue(object, key, value);\n    }\n  };\n  function baseFor(object, iteratee, keysFunc) {\n    var iterable = Object(object);\n    var props = keysFunc(object);\n    var length = props.length;\n    var index = -1;\n    while (length--) {\n      var key = props[++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  }\n  var baseForOwn = function (object, iteratee) {\n    return object && baseFor(object, iteratee, keys$1);\n  };\n  var baseEach = function (collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return baseForOwn(collection, iteratee);\n    }\n    var length = collection.length;\n    var iterable = Object(collection);\n    var index = -1;\n    while (++index < length) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n  function last(array) {\n    var length = array == null ? 0 : array.length;\n    return length ? array[length - 1] : undefined;\n  }\n  var createSet = Set && 1 / setToArray(new Set([undefined, -0]))[1] == 1 / 0 ? function (values) {\n    return new Set(values);\n  } : function () {};\n  function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n    if (isObject$1(objValue) && isObject$1(srcValue)) {\n      // Recursively merge objects and arrays (susceptible to call stack limits).\n      stack.set(srcValue, objValue);\n      baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n      stack['delete'](srcValue);\n    }\n    return objValue;\n  }\n  function baseOrderBy(collection, iteratees, orders) {\n    if (iteratees.length) {\n      iteratees = iteratees.map(function (iteratee) {\n        if (Array.isArray(iteratee)) {\n          return function (value) {\n            return get$1(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n          };\n        }\n        return iteratee;\n      });\n    } else {\n      iteratees = [function (value) {\n        return value;\n      }];\n    }\n    var criteriaIndex = -1;\n    var eachIndex = -1;\n    var result = isArrayLike(collection) ? new Array(collection.length) : [];\n    baseEach(collection, function (value) {\n      var criteria = iteratees.map(function (iteratee) {\n        return iteratee(value);\n      });\n      result[++eachIndex] = {\n        criteria: criteria,\n        index: ++criteriaIndex,\n        value: value\n      };\n    });\n    return baseSortBy(result, function (object, other) {\n      return compareMultiple(object, other, orders);\n    });\n  }\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n  function isStrictComparable(value) {\n    return value === value && !isObject$1(value);\n  }\n  function matchesStrictComparable(key, srcValue) {\n    return function (object) {\n      if (object == null) {\n        return false;\n      }\n      return object[key] === srcValue && (srcValue !== undefined || key in Object(object));\n    };\n  }\n  function hasIn(object, path) {\n    return object != null && hasPath(object, path, baseHasIn);\n  }\n  function baseMatchesProperty(path, srcValue) {\n    if (isKey(path) && isStrictComparable(srcValue)) {\n      return matchesStrictComparable(toKey(path), srcValue);\n    }\n    return function (object) {\n      var objValue = get$1(object, path);\n      return objValue === undefined && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue);\n    };\n  }\n  function baseMatches(source) {\n    var matchData = getMatchData(source);\n    if (matchData.length === 1 && matchData[0][2]) {\n      return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n    }\n    return function (object) {\n      return object === source || baseIsMatch(object, source, matchData);\n    };\n  }\n  function getMatchData(object) {\n    var result = keys$1(object);\n    var length = result.length;\n    while (length--) {\n      var key = result[length];\n      var value = object[key];\n      result[length] = [key, value, isStrictComparable(value)];\n    }\n    return result;\n  }\n  function baseIsMatch(object, source, matchData, customizer) {\n    var index = matchData.length;\n    var length = index;\n    var noCustomizer = !customizer;\n    if (object == null) {\n      return !length;\n    }\n    var data;\n    var result;\n    object = Object(object);\n    while (index--) {\n      data = matchData[index];\n      if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {\n        return false;\n      }\n    }\n    while (++index < length) {\n      data = matchData[index];\n      var key = data[0];\n      var objValue = object[key];\n      var srcValue = data[1];\n      if (noCustomizer && data[2]) {\n        if (objValue === undefined && !(key in object)) {\n          return false;\n        }\n      } else {\n        var stack = new Stack();\n        if (customizer) {\n          result = customizer(objValue, srcValue, key, object, source, stack);\n        }\n        if (!(result === undefined ? baseIsEqual(srcValue, objValue, stack) : result)) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n  function property(path) {\n    return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n  }\n  function baseProperty(key) {\n    return function (object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n  function basePropertyDeep(path) {\n    return function (object) {\n      return get$1(object, path);\n    };\n  }\n  function baseIteratee(value) {\n    if (typeof value == 'function') {\n      return value;\n    }\n    if (value == null) {\n      return function (val) {\n        return val;\n      };\n    }\n    if (typeof value == 'object') {\n      return Array.isArray(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);\n    }\n    return property(value);\n  }\n  function getIteratee() {\n    var result = baseIteratee;\n    return arguments.length ? result(arguments[0], arguments[1]) : result;\n  }\n  var arrayReduce = function (array, iteratee, accumulator, initAccum) {\n    var index = -1;\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  };\n  var baseReduce = function (collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function (value, index, collection) {\n      accumulator = initAccum ? (initAccum = false, value) : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  };\n  function reduce(collection, iteratee, accumulator) {\n    var func = Array.isArray(collection) ? arrayReduce : baseReduce;\n    var initAccum = arguments.length < 3;\n    return func(collection, iteratee, accumulator, initAccum, baseEach);\n  }\n  var isFlattenable = function (value) {\n    return Array.isArray(value) || isArguments(value) || !!(value && value[Symbol.isConcatSpreadable]);\n  };\n  function baseFlatten(array, depth, predicate, isStrict, result) {\n    var index = -1;\n    var length = array.length;\n    predicate || (predicate = isFlattenable);\n    result || (result = []);\n    while (++index < length) {\n      var value = array[index];\n      if (depth > 0 && predicate(value)) {\n        if (depth > 1) {\n          // Recursively flatten arrays (susceptible to call stack limits).\n          baseFlatten(value, depth - 1, predicate, isStrict, result);\n        } else {\n          result.push.apply(result, value);\n        }\n      } else if (!isStrict) {\n        result[result.length] = value;\n      }\n    }\n    return result;\n  }\n  var isArguments = function (value) {\n    return isObjectLike(value) && getTag(value) == '[object Arguments]';\n  };\n  var basePick = function (object, paths) {\n    return basePickBy(object, paths, function (value, path) {\n      return hasIn(object, path);\n    });\n  };\n  var basePickBy = function (object, paths, predicate) {\n    var index = -1;\n    var length = paths.length;\n    var result = {};\n    while (++index < length) {\n      var path = paths[index];\n      var value = get$1(object, path);\n      if (predicate(value, path)) {\n        set$1(result, castPath(path, object), value);\n      }\n    }\n    return result;\n  };\n  var isLength = function (value) {\n    return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= Number.MAX_SAFE_INTEGER;\n  };\n  var baseHasIn = function (object, key) {\n    return object != null && key in Object(object);\n  };\n  var hasPath = function (object, path, hasFunc) {\n    path = castPath(path, object);\n    var index = -1,\n      length = path.length,\n      result = false;\n    while (++index < length) {\n      var key = toKey(path[index]);\n      if (!(result = object != null && hasFunc(object, key))) {\n        break;\n      }\n      object = object[key];\n    }\n    if (result || ++index != length) {\n      return result;\n    }\n    length = object == null ? 0 : object.length;\n    return !!length && isLength(length) && isIndex(key, length) && (Array.isArray(object) || isArguments(object));\n  };\n  var asciiWords = function (string) {\n    return string.match(reAsciiWord);\n  };\n  var unicodeWords = function (string) {\n    return string.match(reUnicodeWords);\n  };\n  var words = function (string, pattern) {\n    if (pattern === undefined) {\n      var result = hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      return result || [];\n    }\n    return string.match(pattern) || [];\n  };\n  var castSlice = function (array, start, end) {\n    var length = array.length;\n    end = end === undefined ? length : end;\n    return !start && end >= length ? array : array.slice(start, end);\n  };\n  var upperFirst = createCaseFirst('toUpperCase');\n  function createCaseFirst(methodName) {\n    return function (string) {\n      if (!string) {\n        return '';\n      }\n      var strSymbols = hasUnicode(string) ? stringToArray(string) : undefined;\n      var chr = strSymbols ? strSymbols[0] : string[0];\n      var trailing = strSymbols ? castSlice(strSymbols, 1).join('') : string.slice(1);\n      return chr[methodName]() + trailing;\n    };\n  }\n\n  // -- helper classes\n  var Stack = function Stack(entries) {\n    var data = this.__data__ = new ListCache(entries);\n    this.size = data.size;\n  };\n  Stack.prototype.clear = function clear() {\n    this.__data__ = new ListCache();\n    this.size = 0;\n  };\n  Stack.prototype.delete = function delete$1(key) {\n    var data = this.__data__;\n    var result = data['delete'](key);\n    this.size = data.size;\n    return result;\n  };\n  Stack.prototype.get = function get(key) {\n    return this.__data__.get(key);\n  };\n  Stack.prototype.has = function has(key) {\n    return this.__data__.has(key);\n  };\n  Stack.prototype.set = function set(key, value) {\n    var data = this.__data__;\n    if (data instanceof ListCache) {\n      var pairs = data.__data__;\n      if (pairs.length < LARGE_ARRAY_SIZE - 1) {\n        pairs.push([key, value]);\n        this.size = ++data.size;\n        return this;\n      }\n      data = this.__data__ = new MapCache(pairs);\n    }\n    data.set(key, value);\n    this.size = data.size;\n    return this;\n  };\n  var ListCache = function ListCache(entries) {\n    var index = -1;\n    var length = entries == null ? 0 : entries.length;\n    this.clear();\n    while (++index < length) {\n      var entry = entries[index];\n      this.set(entry[0], entry[1]);\n    }\n  };\n  ListCache.prototype.clear = function clear() {\n    this.__data__ = [];\n    this.size = 0;\n  };\n  ListCache.prototype.delete = function delete$2(key) {\n    var data = this.__data__;\n    var index = assocIndexOf(data, key);\n    if (index < 0) {\n      return false;\n    }\n    var lastIndex = data.length - 1;\n    if (index == lastIndex) {\n      data.pop();\n    } else {\n      data.splice(index, 1);\n    }\n    --this.size;\n    return true;\n  };\n  ListCache.prototype.get = function get(key) {\n    var data = this.__data__;\n    var index = assocIndexOf(data, key);\n    return index < 0 ? undefined : data[index][1];\n  };\n  ListCache.prototype.has = function has(key) {\n    return assocIndexOf(this.__data__, key) > -1;\n  };\n  ListCache.prototype.set = function set(key, value) {\n    var data = this.__data__;\n    var index = assocIndexOf(data, key);\n    if (index < 0) {\n      ++this.size;\n      data.push([key, value]);\n    } else {\n      data[index][1] = value;\n    }\n    return this;\n  };\n  var MapCache = function MapCache(entries) {\n    var index = -1;\n    var length = entries == null ? 0 : entries.length;\n    this.clear();\n    while (++index < length) {\n      var entry = entries[index];\n      this.set(entry[0], entry[1]);\n    }\n  };\n  MapCache.prototype.clear = function clear() {\n    this.size = 0;\n    this.__data__ = {\n      'hash': new Hash(),\n      'map': new Map(),\n      'string': new Hash()\n    };\n  };\n  MapCache.prototype.delete = function delete$3(key) {\n    var result = getMapData(this, key)['delete'](key);\n    this.size -= result ? 1 : 0;\n    return result;\n  };\n  MapCache.prototype.get = function get(key) {\n    return getMapData(this, key).get(key);\n  };\n  MapCache.prototype.has = function has(key) {\n    return getMapData(this, key).has(key);\n  };\n  MapCache.prototype.set = function set(key, value) {\n    var data = getMapData(this, key);\n    var size = data.size;\n    data.set(key, value);\n    this.size += data.size == size ? 0 : 1;\n    return this;\n  };\n  var Hash = function Hash(entries) {\n    var index = -1;\n    var length = entries == null ? 0 : entries.length;\n    this.clear();\n    while (++index < length) {\n      var entry = entries[index];\n      this.set(entry[0], entry[1]);\n    }\n  };\n  Hash.prototype.clear = function clear() {\n    this.__data__ = Object.create(null);\n    this.size = 0;\n  };\n  Hash.prototype.delete = function delete$4(key) {\n    var result = this.has(key) && delete this.__data__[key];\n    this.size -= result ? 1 : 0;\n    return result;\n  };\n  Hash.prototype.get = function get(key) {\n    var data = this.__data__;\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  };\n  Hash.prototype.has = function has(key) {\n    var data = this.__data__;\n    return data[key] !== undefined;\n  };\n  Hash.prototype.set = function set(key, value) {\n    var data = this.__data__;\n    this.size += this.has(key) ? 0 : 1;\n    data[key] = value === undefined ? HASH_UNDEFINED : value;\n    return this;\n  };\n  var SetCache = function SetCache(values) {\n    var index = -1;\n    var length = values == null ? 0 : values.length;\n    this.__data__ = new MapCache();\n    while (++index < length) {\n      this.add(values[index]);\n    }\n  };\n  SetCache.prototype.add = function add(value) {\n    this.__data__.set(value, HASH_UNDEFINED);\n    return this;\n  };\n  SetCache.prototype.has = function has(value) {\n    return this.__data__.has(value);\n  };\n  SetCache.prototype.push = SetCache.prototype.add;\n\n  // -- top level functions\n\n  var isBoolean = function (value) {\n    var toString = Object.prototype.toString;\n    return value === true || value === false || !!value && typeof value === 'object' && toString.call(value) === boolTag;\n  };\n  var isObject$1 = function (value) {\n    return !!value && (typeof value === 'object' || typeof value === 'function');\n  };\n  var isNumber = function (value) {\n    var toString = Object.prototype.toString;\n    return typeof value === 'number' || !!value && typeof value === 'object' && toString.call(value) === numberTag;\n  };\n  var isString = function (value) {\n    var toString = Object.prototype.toString;\n    return typeof value === 'string' || !!value && typeof value === 'object' && toString.call(value) === stringTag;\n  };\n  var assign = createAssigner(function (object, source) {\n    if (isPrototype(source) || isArrayLike(source)) {\n      copyObject(source, keys$1(source), object);\n      return;\n    }\n    for (var key in source) {\n      if (hasOwnProperty.call(source, key)) {\n        assignValue(object, key, source[key]);\n      }\n    }\n  });\n  var mixin = assign;\n  var deepMixin = mixin;\n  var supplement = function (object) {\n    var sources = [],\n      len = arguments.length - 1;\n    while (len-- > 0) sources[len] = arguments[len + 1];\n    var index = -1;\n    var length = sources.length;\n    var guard = length > 2 ? sources[2] : undefined;\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      length = 1;\n    }\n    while (++index < length) {\n      var source = sources[index];\n      if (source == null) {\n        continue;\n      }\n      var props = Object.keys(source);\n      var propsLength = props.length;\n      var propsIndex = -1;\n      while (++propsIndex < propsLength) {\n        var key = props[propsIndex];\n        var value = object[key];\n        if (value === undefined || eq(value, Object.prototype[key]) && !hasOwnProperty.call(object, key)) {\n          object[key] = source[key];\n        }\n      }\n    }\n    return object;\n  };\n  var defaults = supplement;\n  var deepSupplement = function defaultsDeep() {\n    var args = [],\n      len = arguments.length;\n    while (len--) args[len] = arguments[len];\n    args.push(undefined, customDefaultsMerge);\n    return merge.apply(undefined, args);\n  };\n  var defaultsDeep = deepSupplement;\n\n  // _.invokeMap\n  var invoke = function (collection, path) {\n    var args = [],\n      len = arguments.length - 2;\n    while (len-- > 0) args[len] = arguments[len + 2];\n    var index = -1;\n    var isFunc = typeof path === 'function';\n    var result = isArrayLike(collection) ? new Array(collection.length) : [];\n    baseEach(collection, function (value) {\n      result[++index] = isFunc ? path.apply(value, args) : invokeProperty.apply(void 0, [value, path].concat(args));\n    });\n    return result;\n  };\n\n  // _.invoke\n  var invokeProperty = function (object, path) {\n    var args = [],\n      len = arguments.length - 2;\n    while (len-- > 0) args[len] = arguments[len + 2];\n    path = castPath(path, object);\n    object = parent(object, path);\n    var func = object == null ? object : object[toKey(last(path))];\n    return func == null ? undefined : func.apply(object, args);\n  };\n  var sortedIndex = function (array, value, iteratee) {\n    var low = 0;\n    var high = array == null ? 0 : array.length;\n    if (high == 0) {\n      return 0;\n    }\n    iteratee = getIteratee(iteratee, 2);\n    value = iteratee(value);\n    var valIsNaN = value !== value;\n    var valIsNull = value === null;\n    var valIsSymbol = isSymbol(value);\n    var valIsUndefined = value === undefined;\n    while (low < high) {\n      var setLow = void 0;\n      var mid = Math.floor((low + high) / 2);\n      var computed = iteratee(array[mid]);\n      var othIsDefined = computed !== undefined;\n      var othIsNull = computed === null;\n      var othIsReflexive = computed === computed;\n      var othIsSymbol = isSymbol(computed);\n      if (valIsNaN) {\n        setLow = othIsReflexive;\n      } else if (valIsUndefined) {\n        setLow = othIsReflexive && othIsDefined;\n      } else if (valIsNull) {\n        setLow = othIsReflexive && othIsDefined && !othIsNull;\n      } else if (valIsSymbol) {\n        setLow = othIsReflexive && othIsDefined && !othIsNull && !othIsSymbol;\n      } else if (othIsNull || othIsSymbol) {\n        setLow = false;\n      } else {\n        setLow = computed < value;\n      }\n      if (setLow) {\n        low = mid + 1;\n      } else {\n        high = mid;\n      }\n    }\n    return Math.min(high, MAX_ARRAY_INDEX);\n  };\n  var uniq = function (array, iteratee) {\n    var index = -1;\n    var includes = function (array, value) {\n      var length = array == null ? 0 : array.length;\n      return !!length && array.indexOf(value) > -1;\n    };\n    iteratee = getIteratee(iteratee, 2);\n    var isCommon = true;\n    var length = array.length;\n    var result = [];\n    var seen = result;\n    if (length >= LARGE_ARRAY_SIZE) {\n      var set = iteratee ? null : createSet(array);\n      if (set) {\n        return setToArray(set);\n      }\n      isCommon = false;\n      includes = function (cache, key) {\n        return cache.has(key);\n      };\n      seen = new SetCache();\n    } else {\n      seen = iteratee ? [] : result;\n    }\n    outer: while (++index < length) {\n      var value = array[index];\n      var computed = iteratee ? iteratee(value) : value;\n      value = value !== 0 ? value : 0;\n      if (isCommon && computed === computed) {\n        var seenIndex = seen.length;\n        while (seenIndex--) {\n          if (seen[seenIndex] === computed) {\n            continue outer;\n          }\n        }\n        if (iteratee) {\n          seen.push(computed);\n        }\n        result.push(value);\n      } else if (!includes(seen, computed)) {\n        if (seen !== result) {\n          seen.push(computed);\n        }\n        result.push(value);\n      }\n    }\n    return result;\n  };\n  var clone = function (value) {\n    return baseClone(value);\n  };\n  var cloneDeep = function (value) {\n    return baseClone(value, true);\n  };\n  var isEmpty = function (value) {\n    if (value == null) {\n      return true;\n    }\n    if (isArrayLike(value) && (Array.isArray(value) || typeof value === 'string' || typeof value.splice === 'function' || isTypedArray(value) || isArguments(value))) {\n      return !value.length;\n    }\n    var tag = getTag(value);\n    if (tag == '[object Map]' || tag == '[object Set]') {\n      return !value.size;\n    }\n    if (isPrototype(value)) {\n      return !baseKeys(value).length;\n    }\n    for (var key in value) {\n      if (hasOwnProperty.call(value, key)) {\n        return false;\n      }\n    }\n    return true;\n  };\n  var isEqual = function (object, other) {\n    return baseIsEqual(object, other);\n  };\n  var isFunction = function (value) {\n    return typeof value === 'function';\n  };\n  var isPlainObject = function (value) {\n    if (!isObjectLike(value) || getTag(value) != '[object Object]') {\n      return false;\n    }\n    if (Object.getPrototypeOf(value) === null) {\n      return true;\n    }\n    var proto = value;\n    while (Object.getPrototypeOf(proto) !== null) {\n      proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(value) === proto;\n  };\n  var toArray = function (value) {\n    if (!value) {\n      return [];\n    }\n    if (isArrayLike(value)) {\n      return isString(value) ? stringToArray(value) : copyArray(value);\n    }\n    if (Symbol.iterator && Symbol.iterator in Object(value)) {\n      var iterator = value[Symbol.iterator]();\n      var data;\n      var result = [];\n      while (!(data = iterator.next()).done) {\n        result.push(data.value);\n      }\n      return result;\n    }\n    var tag = getTag(value);\n    var func = tag == mapTag ? mapToArray : tag == setTag ? setToArray : values;\n    return func(value);\n  };\n  function debounce(func, wait, opt) {\n    if (typeof func !== 'function') {\n      throw new TypeError('Expected a function');\n    }\n    var lastArgs;\n    var lastThis;\n    var maxWait;\n    var result;\n    var timerId;\n    var lastCallTime;\n    var lastInvokeTime = 0;\n    var leading = false;\n    var maxing = false;\n    var trailing = true;\n    var useRaf = !wait && wait !== 0 && window && typeof window.requestAnimationFrame === 'function';\n    wait = +wait || 0;\n    if (isObject$1(opt)) {\n      leading = !!opt.leading;\n      maxing = 'maxWait' in opt;\n      maxWait = maxing ? Math.max(+opt.maxWait || 0, wait) : maxWait;\n      trailing = 'trailing' in opt ? !!opt.trailing : trailing;\n    }\n    function invokeFunc(time) {\n      var args = lastArgs;\n      var thisArg = lastThis;\n      lastArgs = lastThis = undefined;\n      lastInvokeTime = time;\n      result = func.apply(thisArg, args);\n      return result;\n    }\n    function startTimer(pendingFunc, wait) {\n      if (useRaf) {\n        window.cancelAnimationFrame(timerId);\n        return window.requestAnimationFrame(pendingFunc);\n      }\n      return setTimeout(pendingFunc, wait);\n    }\n    function cancelTimer(id) {\n      if (useRaf) {\n        return window.cancelAnimationFrame(id);\n      }\n      clearTimeout(id);\n    }\n    function leadingEdge(time) {\n      lastInvokeTime = time;\n      timerId = startTimer(timerExpired, wait);\n      return leading ? invokeFunc(time) : result;\n    }\n    function remainingWait(time) {\n      var timeSinceLastCall = time - lastCallTime;\n      var timeSinceLastInvoke = time - lastInvokeTime;\n      var timeWaiting = wait - timeSinceLastCall;\n      return maxing ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n    }\n    function shouldInvoke(time) {\n      var timeSinceLastCall = time - lastCallTime;\n      var timeSinceLastInvoke = time - lastInvokeTime;\n      return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n    }\n    function timerExpired() {\n      var time = Date.now();\n      if (shouldInvoke(time)) {\n        return trailingEdge(time);\n      }\n      timerId = startTimer(timerExpired, remainingWait(time));\n    }\n    function trailingEdge(time) {\n      timerId = undefined;\n      if (trailing && lastArgs) {\n        return invokeFunc(time);\n      }\n      lastArgs = lastThis = undefined;\n      return result;\n    }\n    function debounced() {\n      var args = [],\n        len = arguments.length;\n      while (len--) args[len] = arguments[len];\n      var time = Date.now();\n      var isInvoking = shouldInvoke(time);\n      lastArgs = args;\n      lastThis = this;\n      lastCallTime = time;\n      if (isInvoking) {\n        if (timerId === undefined) {\n          return leadingEdge(lastCallTime);\n        }\n        if (maxing) {\n          timerId = startTimer(timerExpired, wait);\n          return invokeFunc(lastCallTime);\n        }\n      }\n      if (timerId === undefined) {\n        timerId = startTimer(timerExpired, wait);\n      }\n      return result;\n    }\n    debounced.cancel = function () {\n      if (timerId !== undefined) {\n        cancelTimer(timerId);\n      }\n      lastInvokeTime = 0;\n      lastArgs = lastCallTime = lastThis = timerId = undefined;\n    };\n    debounced.flush = function () {\n      return timerId === undefined ? result : trailingEdge(Date.now());\n    };\n    debounced.pending = function () {\n      return timerId !== undefined;\n    };\n    return debounced;\n  }\n  var groupBy = function (collection, iteratee) {\n    iteratee = getIteratee(iteratee, 2);\n    return reduce(collection, function (result, value, key) {\n      key = iteratee(value);\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        assignValue(result, key, [value]);\n      }\n      return result;\n    }, {});\n  };\n  var sortBy = function (collection, iteratees) {\n    if (iteratees === void 0) iteratees = [];\n    if (collection == null) {\n      return [];\n    }\n    var length = iteratees.length;\n    if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n      iteratees = [];\n    } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n      iteratees = [iteratees[0]];\n    }\n    if (!Array.isArray(iteratees)) {\n      iteratees = [getIteratee(iteratees, 2)];\n    }\n    return baseOrderBy(collection, iteratees.flat(1), []);\n  };\n  var flattenDeep = function (array) {\n    var length = array == null ? 0 : array.length;\n    return length ? baseFlatten(array, Infinity) : [];\n  };\n  var without = function (array) {\n    var values = [],\n      len = arguments.length - 1;\n    while (len-- > 0) values[len] = arguments[len + 1];\n    return isArrayLike(array) ? diff(array, values) : [];\n  };\n  var difference = function (array) {\n    var values = [],\n      len = arguments.length - 1;\n    while (len-- > 0) values[len] = arguments[len + 1];\n    return isObjectLike(array) && isArrayLike(array) ? diff(array, values.flat(1)) : [];\n  };\n  var intersection$1 = function () {\n    var arrays = [],\n      len = arguments.length;\n    while (len--) arrays[len] = arguments[len];\n    var mapped = arrays.map(function (array) {\n      return isObjectLike(array) && isArrayLike(array) ? array : [];\n    });\n    return mapped.length && mapped[0] === arrays[0] ? intersect(mapped) : [];\n  };\n  var union = function () {\n    var arrays = [],\n      len = arguments.length;\n    while (len--) arrays[len] = arguments[len];\n    var array = arrays.flat(1);\n    return uniq(array);\n  };\n  var has$2 = function (object, key) {\n    if (object == null) {\n      return false;\n    }\n    if (typeof key === 'string') {\n      key = key.split('.');\n    }\n    var index = -1;\n    var value = object;\n    while (++index < key.length) {\n      if (!value || !hasOwnProperty.call(value, key[index])) {\n        return false;\n      }\n      value = value[key[index]];\n    }\n    return true;\n  };\n  var result = function (object, path, defaultValue) {\n    path = castPath(path, object);\n    var index = -1;\n    var length = path.length;\n    if (!length) {\n      length = 1;\n      object = undefined;\n    }\n    while (++index < length) {\n      var value = object == null ? undefined : object[toKey(path[index])];\n      if (value === undefined) {\n        index = length;\n        value = defaultValue;\n      }\n      object = typeof value === 'function' ? value.call(object) : value;\n    }\n    return object;\n  };\n  var omit = function (object) {\n    var paths = [],\n      len = arguments.length - 1;\n    while (len-- > 0) paths[len] = arguments[len + 1];\n    var result = {};\n    if (object == null) {\n      return result;\n    }\n    var isDeep = false;\n    paths = paths.flat(1).map(function (path) {\n      path = castPath(path, object);\n      isDeep || (isDeep = path.length > 1);\n      return path;\n    });\n    copyObject(object, getAllKeysIn(object), result);\n    if (isDeep) {\n      result = baseClone(result, true, true, true, function (value) {\n        return isPlainObject(value) ? undefined : value;\n      });\n    }\n    var length = paths.length;\n    while (length--) {\n      unset(result, paths[length]);\n    }\n    return result;\n  };\n  var pick = function (object) {\n    var paths = [],\n      len = arguments.length - 1;\n    while (len-- > 0) paths[len] = arguments[len + 1];\n    return object == null ? {} : basePick(object, paths.flat(Infinity));\n  };\n  var bindAll = function (object) {\n    var methodNames = [],\n      len = arguments.length - 1;\n    while (len-- > 0) methodNames[len] = arguments[len + 1];\n    methodNames.flat(1).forEach(function (key) {\n      key = toKey(key);\n      assignValue(object, key, object[key].bind(object));\n    });\n    return object;\n  };\n  var forIn = function (object, iteratee) {\n    if (iteratee === void 0) iteratee = function (value) {\n      return value;\n    };\n    var index = -1;\n    var iterable = Object(object);\n    var props = isArrayLike(object) ? arrayLikeKeys(object, true) : keysIn(object);\n    var length = props.length;\n    while (length--) {\n      var key = props[++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n  };\n  var camelCase = function (string) {\n    if (string === void 0) string = '';\n    return words((\"\" + string).replace(/['\\u2019]/g, '')).reduce(function (result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? upperFirst(word) : word);\n    }, '');\n  };\n  var idCounter = 0;\n  var uniqueId = function (prefix) {\n    if (prefix === void 0) prefix = '';\n    var id = ++idCounter;\n    return \"\" + prefix + id;\n  };\n  var merge = createAssigner(function (object, source, srcIndex, customizer) {\n    baseMerge(object, source, srcIndex, customizer);\n  }, true);\n  var addClassNamePrefix = function (className) {\n    if (!className) {\n      return className;\n    }\n    return className.toString().split(' ').map(function (_className) {\n      if (_className.substr(0, config.classNamePrefix.length) !== config.classNamePrefix) {\n        _className = config.classNamePrefix + _className;\n      }\n      return _className;\n    }).join(' ');\n  };\n  var removeClassNamePrefix = function (className) {\n    if (!className) {\n      return className;\n    }\n    return className.toString().split(' ').map(function (_className) {\n      if (_className.substr(0, config.classNamePrefix.length) === config.classNamePrefix) {\n        _className = _className.substr(config.classNamePrefix.length);\n      }\n      return _className;\n    }).join(' ');\n  };\n  var parseDOMJSON = function (json, namespace) {\n    var selectors = {};\n    var groupSelectors = {};\n    var svgNamespace = V.namespace.svg;\n    var ns = namespace || svgNamespace;\n    var fragment = document.createDocumentFragment();\n    var parseNode = function (siblingsDef, parentNode, ns) {\n      for (var i = 0; i < siblingsDef.length; i++) {\n        var nodeDef = siblingsDef[i];\n\n        // Text node\n        if (typeof nodeDef === 'string') {\n          var textNode = document.createTextNode(nodeDef);\n          parentNode.appendChild(textNode);\n          continue;\n        }\n\n        // TagName\n        if (!nodeDef.hasOwnProperty('tagName')) {\n          throw new Error('json-dom-parser: missing tagName');\n        }\n        var tagName = nodeDef.tagName;\n        var node = void 0;\n\n        // Namespace URI\n        if (nodeDef.hasOwnProperty('namespaceURI')) {\n          ns = nodeDef.namespaceURI;\n        }\n        node = document.createElementNS(ns, tagName);\n        var svg = ns === svgNamespace;\n        var wrapper = svg ? V : $;\n        // Attributes\n        var attributes = nodeDef.attributes;\n        if (attributes) {\n          wrapper(node).attr(attributes);\n        }\n        // Style\n        var style = nodeDef.style;\n        if (style) {\n          $(node).css(style);\n        }\n        // ClassName\n        if (nodeDef.hasOwnProperty('className')) {\n          var className = nodeDef.className;\n          if (svg) {\n            node.className.baseVal = className;\n          } else {\n            node.className = className;\n          }\n        }\n        // TextContent\n        if (nodeDef.hasOwnProperty('textContent')) {\n          node.textContent = nodeDef.textContent;\n        }\n        // Selector\n        if (nodeDef.hasOwnProperty('selector')) {\n          var nodeSelector = nodeDef.selector;\n          if (selectors[nodeSelector]) {\n            throw new Error('json-dom-parser: selector must be unique');\n          }\n          selectors[nodeSelector] = node;\n          wrapper(node).attr('joint-selector', nodeSelector);\n        }\n        // Groups\n        if (nodeDef.hasOwnProperty('groupSelector')) {\n          var nodeGroups = nodeDef.groupSelector;\n          if (!Array.isArray(nodeGroups)) {\n            nodeGroups = [nodeGroups];\n          }\n          for (var j = 0; j < nodeGroups.length; j++) {\n            var nodeGroup = nodeGroups[j];\n            var group = groupSelectors[nodeGroup];\n            if (!group) {\n              group = groupSelectors[nodeGroup] = [];\n            }\n            group.push(node);\n          }\n        }\n        parentNode.appendChild(node);\n\n        // Children\n        var childrenDef = nodeDef.children;\n        if (Array.isArray(childrenDef)) {\n          parseNode(childrenDef, node, ns);\n        }\n      }\n    };\n    parseNode(json, fragment, ns);\n    return {\n      fragment: fragment,\n      selectors: selectors,\n      groupSelectors: groupSelectors\n    };\n  };\n\n  // Return a simple hash code from a string. See http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/.\n  var hashCode = function (str) {\n    var hash = 0;\n    if (str.length === 0) {\n      return hash;\n    }\n    for (var i = 0; i < str.length; i++) {\n      var c = str.charCodeAt(i);\n      hash = (hash << 5) - hash + c;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n  };\n  var getByPath = function (obj, path, delimiter) {\n    var keys = Array.isArray(path) ? path : path.split(delimiter || '/');\n    var key;\n    var i = 0;\n    var length = keys.length;\n    while (i < length) {\n      key = keys[i++];\n      if (Object(obj) === obj && key in obj) {\n        obj = obj[key];\n      } else {\n        return undefined;\n      }\n    }\n    return obj;\n  };\n  var isGetSafe = function (obj, key) {\n    // Prevent prototype pollution\n    // https://snyk.io/vuln/SNYK-JS-JSON8MERGEPATCH-1038399\n    if (typeof key !== 'string' && typeof key !== 'number') {\n      key = String(key);\n    }\n    if (key === 'constructor' && typeof obj[key] === 'function') {\n      return false;\n    }\n    if (key === '__proto__') {\n      return false;\n    }\n    return true;\n  };\n  var setByPath = function (obj, path, value, delimiter) {\n    var keys = Array.isArray(path) ? path : path.split(delimiter || '/');\n    var last = keys.length - 1;\n    var diver = obj;\n    var i = 0;\n    for (; i < last; i++) {\n      var key = keys[i];\n      if (!isGetSafe(diver, key)) {\n        return obj;\n      }\n      var value$1 = diver[key];\n      // diver creates an empty object if there is no nested object under such a key.\n      // This means that one can populate an empty nested object with setByPath().\n      diver = value$1 || (diver[key] = {});\n    }\n    diver[keys[last]] = value;\n    return obj;\n  };\n  var unsetByPath = function (obj, path, delimiter) {\n    var keys = Array.isArray(path) ? path : path.split(delimiter || '/');\n    var last = keys.length - 1;\n    var diver = obj;\n    var i = 0;\n    for (; i < last; i++) {\n      var key = keys[i];\n      if (!isGetSafe(diver, key)) {\n        return obj;\n      }\n      var value = diver[key];\n      if (!value) {\n        return obj;\n      }\n      diver = value;\n    }\n    delete diver[keys[last]];\n    return obj;\n  };\n  var flattenObject = function (obj, delim, stop) {\n    delim = delim || '/';\n    var ret = {};\n    for (var key in obj) {\n      if (!obj.hasOwnProperty(key)) {\n        continue;\n      }\n      var shouldGoDeeper = typeof obj[key] === 'object';\n      if (shouldGoDeeper && stop && stop(obj[key])) {\n        shouldGoDeeper = false;\n      }\n      if (shouldGoDeeper) {\n        var flatObject = flattenObject(obj[key], delim, stop);\n        for (var flatKey in flatObject) {\n          if (!flatObject.hasOwnProperty(flatKey)) {\n            continue;\n          }\n          ret[key + delim + flatKey] = flatObject[flatKey];\n        }\n      } else {\n        ret[key] = obj[key];\n      }\n    }\n    return ret;\n  };\n  var uuid = function () {\n    // credit: http://stackoverflow.com/posts/2117523/revisions\n\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0;\n      var v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  };\n\n  // Generates global unique id and stores it as a property of the object, if provided.\n  var guid = function (obj) {\n    guid.id = guid.id || 1;\n    if (obj === undefined) {\n      return 'j_' + guid.id++;\n    }\n    obj.id = obj.id === undefined ? 'j_' + guid.id++ : obj.id;\n    return obj.id;\n  };\n  var toKebabCase = function (string) {\n    return string.replace(/[A-Z]/g, '-$&').toLowerCase();\n  };\n  var normalizeEvent = function (evt) {\n    if (evt.normalized) {\n      return evt;\n    }\n    var originalEvent = evt.originalEvent;\n    var target = evt.target;\n\n    // If the event is a touch event, normalize it to a mouse event.\n    var touch = originalEvent && originalEvent.changedTouches && originalEvent.changedTouches[0];\n    if (touch) {\n      for (var property in touch) {\n        // copy all the properties from the first touch that are not\n        // defined on TouchEvent (clientX, clientY, pageX, pageY, screenX, screenY, identifier, ...)\n        if (evt[property] === undefined) {\n          evt[property] = touch[property];\n        }\n      }\n    }\n    // IE: evt.target could be set to SVGElementInstance for SVGUseElement\n    if (target) {\n      var useElement = target.correspondingUseElement;\n      if (useElement) {\n        evt.target = useElement;\n      }\n    }\n    evt.normalized = true;\n    return evt;\n  };\n  var normalizeWheel = function (evt) {\n    // Sane values derived empirically\n    var PIXEL_STEP = 10;\n    var LINE_HEIGHT = 40;\n    var PAGE_HEIGHT = 800;\n    var sX = 0,\n      sY = 0,\n      pX = 0,\n      pY = 0;\n\n    // Legacy\n    if ('detail' in evt) {\n      sY = evt.detail;\n    }\n    if ('wheelDelta' in evt) {\n      sY = -evt.wheelDelta / 120;\n    }\n    if ('wheelDeltaY' in evt) {\n      sY = -evt.wheelDeltaY / 120;\n    }\n    if ('wheelDeltaX' in evt) {\n      sX = -evt.wheelDeltaX / 120;\n    }\n\n    // side scrolling on FF with DOMMouseScroll\n    if ('axis' in evt && evt.axis === evt.HORIZONTAL_AXIS) {\n      sX = sY;\n      sY = 0;\n    }\n    pX = 'deltaX' in evt ? evt.deltaX : sX * PIXEL_STEP;\n    pY = 'deltaY' in evt ? evt.deltaY : sY * PIXEL_STEP;\n    if ((pX || pY) && evt.deltaMode) {\n      if (evt.deltaMode == 1) {\n        pX *= LINE_HEIGHT;\n        pY *= LINE_HEIGHT;\n      } else {\n        pX *= PAGE_HEIGHT;\n        pY *= PAGE_HEIGHT;\n      }\n    }\n\n    // macOS switches deltaX and deltaY automatically when scrolling with shift key, so this is needed in other cases\n    if (evt.deltaX === 0 && evt.deltaY !== 0 && evt.shiftKey) {\n      pX = pY;\n      pY = 0;\n      sX = sY;\n      sY = 0;\n    }\n\n    // Fall-back if spin cannot be determined\n    if (pX && !sX) {\n      sX = pX < 1 ? -1 : 1;\n    }\n    if (pY && !sY) {\n      sY = pY < 1 ? -1 : 1;\n    }\n    return {\n      spinX: sX,\n      spinY: sY,\n      deltaX: pX,\n      deltaY: pY\n    };\n  };\n  var cap = function (val, max) {\n    return val > max ? max : val < -max ? -max : val;\n  };\n  var nextFrame = function () {\n    var raf;\n    if (typeof window !== 'undefined') {\n      raf = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n    }\n    if (!raf) {\n      var lastTime = 0;\n      raf = function (callback) {\n        var currTime = new Date().getTime();\n        var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n        var id = setTimeout(function () {\n          callback(currTime + timeToCall);\n        }, timeToCall);\n        lastTime = currTime + timeToCall;\n        return id;\n      };\n    }\n    return function (callback, context) {\n      var rest = [],\n        len = arguments.length - 2;\n      while (len-- > 0) rest[len] = arguments[len + 2];\n      return context !== undefined ? raf(callback.bind.apply(callback, [context].concat(rest))) : raf(callback);\n    };\n  }();\n  var cancelFrame = function () {\n    var caf;\n    var client = typeof window != 'undefined';\n    if (client) {\n      caf = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || window.msCancelAnimationFrame || window.msCancelRequestAnimationFrame || window.oCancelAnimationFrame || window.oCancelRequestAnimationFrame || window.mozCancelAnimationFrame || window.mozCancelRequestAnimationFrame;\n    }\n    caf = caf || clearTimeout;\n    return client ? caf.bind(window) : caf;\n  }();\n\n  /**\n   * @deprecated\n   */\n  var shapePerimeterConnectionPoint = function (linkView, view, magnet, reference) {\n    var bbox;\n    var spot;\n    if (!magnet) {\n      // There is no magnet, try to make the best guess what is the\n      // wrapping SVG element. This is because we want this \"smart\"\n      // connection points to work out of the box without the\n      // programmer to put magnet marks to any of the subelements.\n      // For example, we want the function to work on basic.Path elements\n      // without any special treatment of such elements.\n      // The code below guesses the wrapping element based on\n      // one simple assumption. The wrapping elemnet is the\n      // first child of the scalable group if such a group exists\n      // or the first child of the rotatable group if not.\n      // This makese sense because usually the wrapping element\n      // is below any other sub element in the shapes.\n      var scalable = view.$('.scalable')[0];\n      var rotatable = view.$('.rotatable')[0];\n      if (scalable && scalable.firstChild) {\n        magnet = scalable.firstChild;\n      } else if (rotatable && rotatable.firstChild) {\n        magnet = rotatable.firstChild;\n      }\n    }\n    if (magnet) {\n      spot = V(magnet).findIntersection(reference, linkView.paper.cells);\n      if (!spot) {\n        bbox = V(magnet).getBBox({\n          target: linkView.paper.cells\n        });\n      }\n    } else {\n      bbox = view.model.getBBox();\n      spot = bbox.intersectionWithLineFromCenterToPoint(reference);\n    }\n    return spot || bbox.center();\n  };\n  var isPercentage = function (val) {\n    return isString(val) && val.slice(-1) === '%';\n  };\n  var parseCssNumeric = function (val, restrictUnits) {\n    function getUnit(validUnitExp) {\n      // one or more numbers, followed by\n      // any number of (\n      //  `.`, followed by\n      //  one or more numbers\n      // ), followed by\n      // `validUnitExp`, followed by\n      // end of string\n      var matches = new RegExp('(?:\\\\d+(?:\\\\.\\\\d+)*)(' + validUnitExp + ')$').exec(val);\n      if (!matches) {\n        return null;\n      }\n      return matches[1];\n    }\n    var number = parseFloat(val);\n\n    // if `val` cannot be parsed as a number, return `null`\n    if (Number.isNaN(number)) {\n      return null;\n    }\n\n    // else: we know `output.value`\n    var output = {};\n    output.value = number;\n\n    // determine the unit\n    var validUnitExp;\n    if (restrictUnits == null) {\n      // no restriction\n      // accept any unit, as well as no unit\n      validUnitExp = '[A-Za-z]*';\n    } else if (Array.isArray(restrictUnits)) {\n      // if this is an empty array, top restriction - return `null`\n      if (restrictUnits.length === 0) {\n        return null;\n      }\n\n      // else: restriction - an array of valid unit strings\n      validUnitExp = restrictUnits.join('|');\n    } else if (isString(restrictUnits)) {\n      // restriction - a single valid unit string\n      validUnitExp = restrictUnits;\n    }\n    var unit = getUnit(validUnitExp);\n\n    // if we found no matches for `restrictUnits`, return `null`\n    if (unit === null) {\n      return null;\n    }\n\n    // else: we know the unit\n    output.unit = unit;\n    return output;\n  };\n  var NO_SPACE = 0;\n  function splitWordWithEOL(word, eol) {\n    var eolWords = word.split(eol);\n    var n = 1;\n    for (var j = 0, jl = eolWords.length - 1; j < jl; j++) {\n      var replacement = [];\n      if (j > 0 || eolWords[0] !== '') {\n        replacement.push(NO_SPACE);\n      }\n      replacement.push(eol);\n      if (j < jl - 1 || eolWords[jl] !== '') {\n        replacement.push(NO_SPACE);\n      }\n      eolWords.splice.apply(eolWords, [n, 0].concat(replacement));\n      n += replacement.length + 1;\n    }\n    return eolWords.filter(function (word) {\n      return word !== '';\n    });\n  }\n  function getLineHeight(heightValue, textElement) {\n    if (heightValue === null) {\n      // Default 1em lineHeight\n      return textElement.getBBox().height;\n    }\n    switch (heightValue.unit) {\n      case 'em':\n        return textElement.getBBox().height * heightValue.value;\n      case 'px':\n      case '':\n        return heightValue.value;\n    }\n  }\n  var breakText = function (text, size, styles, opt) {\n    if (styles === void 0) styles = {};\n    if (opt === void 0) opt = {};\n    var width = size.width;\n    var height = size.height;\n    var svgDocument = opt.svgDocument || V('svg').node;\n    var textSpan = V('tspan').node;\n    var textElement = V('text').attr(styles).append(textSpan).node;\n    var textNode = document.createTextNode('');\n\n    // Prevent flickering\n    textElement.style.opacity = 0;\n    // Prevent FF from throwing an uncaught exception when `getBBox()`\n    // called on element that is not in the render tree (is not measurable).\n    // <tspan>.getComputedTextLength() returns always 0 in this case.\n    // Note that the `textElement` resp. `textSpan` can become hidden\n    // when it's appended to the DOM and a `display: none` CSS stylesheet\n    // rule gets applied.\n    textElement.style.display = 'block';\n    textSpan.style.display = 'block';\n    textSpan.appendChild(textNode);\n    svgDocument.appendChild(textElement); // lgtm [js/xss-through-dom]\n\n    if (!opt.svgDocument) {\n      document.body.appendChild(svgDocument);\n    }\n    var preserveSpaces = opt.preserveSpaces;\n    var space = ' ';\n    var separator = opt.separator || opt.separator === '' ? opt.separator : space;\n    // If separator is a RegExp, we use the space character to join words together again (not ideal)\n    var separatorChar = typeof separator === 'string' ? separator : space;\n    var eol = opt.eol || '\\n';\n    var hyphen = opt.hyphen ? new RegExp(opt.hyphen) : /[^\\w\\d\\u00C0-\\u1FFF\\u2800-\\uFFFD]/;\n    var maxLineCount = opt.maxLineCount;\n    if (!isNumber(maxLineCount)) {\n      maxLineCount = Infinity;\n    }\n    var words = text.split(separator);\n    var full = [];\n    var lines = [];\n    var p, h;\n    var lineHeight;\n    if (preserveSpaces) {\n      V(textSpan).attr('xml:space', 'preserve');\n    }\n    for (var i = 0, l = 0, len = words.length; i < len; i++) {\n      var word = words[i];\n      if (!word && !preserveSpaces) {\n        continue;\n      }\n      if (typeof word !== 'string') {\n        continue;\n      }\n      var isEol = false;\n      if (eol && word.indexOf(eol) >= 0) {\n        // word contains end-of-line character\n        if (word.length > 1) {\n          // separate word and continue cycle\n          var eolWords = splitWordWithEOL(words[i], eol);\n          words.splice.apply(words, [i, 1].concat(eolWords));\n          i--;\n          len = words.length;\n          continue;\n        } else {\n          // creates a new line\n          if (preserveSpaces && typeof words[i - 1] === 'string') {\n            words.splice(i, NO_SPACE, '', NO_SPACE);\n            len += 2;\n            i--;\n            continue;\n          }\n          lines[++l] = !preserveSpaces || typeof words[i + 1] === 'string' ? '' : undefined;\n          isEol = true;\n        }\n      }\n      if (!isEol) {\n        var data = void 0;\n        if (preserveSpaces) {\n          data = lines[l] !== undefined ? lines[l] + separatorChar + word : word;\n        } else {\n          data = lines[l] ? lines[l] + separatorChar + word : word;\n        }\n        textNode.data = data;\n        if (textSpan.getComputedTextLength() <= width) {\n          // the current line fits\n          lines[l] = data;\n          if (p || h) {\n            // We were partitioning. Put rest of the word onto next line\n            full[l++] = true;\n\n            // cancel partitioning and splitting by hyphens\n            p = 0;\n            h = 0;\n          }\n        } else {\n          if (!lines[l] || p) {\n            var partition = !!p;\n            p = word.length - 1;\n            if (partition || !p) {\n              // word has only one character.\n              if (!p) {\n                if (!lines[l]) {\n                  // we won't fit this text within our rect\n                  lines = [];\n                  break;\n                }\n\n                // partitioning didn't help on the non-empty line\n                // try again, but this time start with a new line\n\n                // cancel partitions created\n                words.splice(i, 2, word + words[i + 1]);\n\n                // adjust word length\n                len--;\n                full[l++] = true;\n                i--;\n                continue;\n              }\n\n              // move last letter to the beginning of the next word\n              words[i] = word.substring(0, p);\n              var nextWord = words[i + 1];\n              words[i + 1] = word.substring(p) + (nextWord === undefined || nextWord === NO_SPACE ? '' : nextWord);\n            } else {\n              if (h) {\n                // cancel splitting and put the words together again\n                words.splice(i, 2, words[i] + words[i + 1]);\n                h = 0;\n              } else {\n                var hyphenIndex = word.search(hyphen);\n                if (hyphenIndex > -1 && hyphenIndex !== word.length - 1 && hyphenIndex !== 0) {\n                  h = hyphenIndex + 1;\n                  p = 0;\n                }\n\n                // We initiate partitioning or splitting\n                // split the long word into two words\n                words.splice(i, 1, word.substring(0, h || p), word.substring(h || p));\n                // adjust words length\n                len++;\n              }\n              if (l && !full[l - 1]) {\n                // if the previous line is not full, try to fit max part of\n                // the current word there\n                l--;\n              }\n            }\n            if (!preserveSpaces || lines[l] !== '') {\n              i--;\n            }\n            continue;\n          }\n          l++;\n          i--;\n        }\n      }\n      var lastL = null;\n      if (lines.length > maxLineCount) {\n        lastL = maxLineCount - 1;\n      } else if (height !== undefined) {\n        // if size.height is defined we have to check whether the height of the entire\n        // text exceeds the rect height\n\n        if (lineHeight === undefined && textNode.data !== '') {\n          // use the same defaults as in V.prototype.text\n          if (styles.lineHeight === 'auto') {\n            lineHeight = getLineHeight({\n              value: 1.5,\n              unit: 'em'\n            }, textElement);\n          } else {\n            var parsed = parseCssNumeric(styles.lineHeight, ['em', 'px', '']);\n            lineHeight = getLineHeight(parsed, textElement);\n          }\n        }\n        if (lineHeight * lines.length > height) {\n          // remove overflowing lines\n          lastL = Math.floor(height / lineHeight) - 1;\n        }\n      }\n      if (lastL !== null) {\n        lines.splice(lastL + 1);\n\n        // add ellipsis\n        var ellipsis = opt.ellipsis;\n        if (!ellipsis || lastL < 0) {\n          break;\n        }\n        if (typeof ellipsis !== 'string') {\n          ellipsis = '\\u2026';\n        }\n        var lastLine = lines[lastL];\n        if (!lastLine && !isEol) {\n          break;\n        }\n        var k = lastLine.length;\n        var lastLineWithOmission, lastChar;\n        do {\n          lastChar = lastLine[k];\n          lastLineWithOmission = lastLine.substring(0, k);\n          if (!lastChar) {\n            lastLineWithOmission += separatorChar;\n          } else if (lastChar.match(separator)) {\n            lastLineWithOmission += lastChar;\n          }\n          lastLineWithOmission += ellipsis;\n          textNode.data = lastLineWithOmission;\n          if (textSpan.getComputedTextLength() <= width) {\n            lines[lastL] = lastLineWithOmission;\n            break;\n          }\n          k--;\n        } while (k >= 0);\n        break;\n      }\n    }\n    if (opt.svgDocument) {\n      // svg document was provided, remove the text element only\n      svgDocument.removeChild(textElement);\n    } else {\n      // clean svg document\n      document.body.removeChild(svgDocument);\n    }\n    return lines.join(eol);\n  };\n\n  // Sanitize HTML\n  // Based on https://gist.github.com/ufologist/5a0da51b2b9ef1b861c30254172ac3c9\n  // Parses a string into an array of DOM nodes.\n  // Then outputs it back as a string.\n  var sanitizeHTML = function (html) {\n    // Ignores tags that are invalid inside a <div> tag (e.g. <body>, <head>)\n\n    // If documentContext (second parameter) is not specified or given as `null` or `undefined`, a new document is used.\n    // Inline events will not execute when the HTML is parsed; this includes, for example, sending GET requests for images.\n\n    // If keepScripts (last parameter) is `false`, scripts are not executed.\n    var output = $($.parseHTML('<div>' + html + '</div>', null, false));\n    output.find('*').each(function () {\n      // for all nodes\n      var currentNode = this;\n      $.each(currentNode.attributes, function () {\n        // for all attributes in each node\n        var currentAttribute = this;\n        var attrName = currentAttribute.name;\n        var attrValue = currentAttribute.value;\n\n        // Remove attribute names that start with \"on\" (e.g. onload, onerror...).\n        // Remove attribute values that start with \"javascript:\" pseudo protocol (e.g. `href=\"javascript:alert(1)\"`).\n        if (attrName.startsWith('on') || attrValue.startsWith('javascript:') || attrValue.startsWith('data:') || attrValue.startsWith('vbscript:')) {\n          $(currentNode).removeAttr(attrName);\n        }\n      });\n    });\n    return output.html();\n  };\n\n  // Download `blob` as file with `fileName`.\n  // Does not work in IE9.\n  var downloadBlob = function (blob, fileName) {\n    if (window.navigator.msSaveBlob) {\n      // requires IE 10+\n      // pulls up a save dialog\n      window.navigator.msSaveBlob(blob, fileName);\n    } else {\n      // other browsers\n      // downloads directly in Chrome and Safari\n\n      // presents a save/open dialog in Firefox\n      // Firefox bug: `from` field in save dialog always shows `from:blob:`\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=1053327\n\n      var url = window.URL.createObjectURL(blob);\n      var link = document.createElement('a');\n      link.href = url;\n      link.download = fileName;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url); // mark the url for garbage collection\n    }\n  };\n\n  // Download `dataUri` as file with `fileName`.\n  // Does not work in IE9.\n  var downloadDataUri = function (dataUri, fileName) {\n    var blob = dataUriToBlob(dataUri);\n    downloadBlob(blob, fileName);\n  };\n\n  // Convert an uri-encoded data component (possibly also base64-encoded) to a blob.\n  var dataUriToBlob = function (dataUri) {\n    // first, make sure there are no newlines in the data uri\n    dataUri = dataUri.replace(/\\s/g, '');\n    dataUri = decodeURIComponent(dataUri);\n    var firstCommaIndex = dataUri.indexOf(','); // split dataUri as `dataTypeString`,`data`\n\n    var dataTypeString = dataUri.slice(0, firstCommaIndex); // e.g. 'data:image/jpeg;base64'\n    var mimeString = dataTypeString.split(':')[1].split(';')[0]; // e.g. 'image/jpeg'\n\n    var data = dataUri.slice(firstCommaIndex + 1);\n    var decodedString;\n    if (dataTypeString.indexOf('base64') >= 0) {\n      // data may be encoded in base64\n      decodedString = atob(data); // decode data\n    } else {\n      // convert the decoded string to UTF-8\n      decodedString = unescape(encodeURIComponent(data));\n    }\n    // write the bytes of the string to a typed array\n    var ia = new Uint8Array(decodedString.length);\n    for (var i = 0; i < decodedString.length; i++) {\n      ia[i] = decodedString.charCodeAt(i);\n    }\n    return new Blob([ia], {\n      type: mimeString\n    }); // return the typed array as Blob\n  };\n\n  // Read an image at `url` and return it as base64-encoded data uri.\n  // The mime type of the image is inferred from the `url` file extension.\n  // If data uri is provided as `url`, it is returned back unchanged.\n  // `callback` is a method with `err` as first argument and `dataUri` as second argument.\n  // Works with IE9.\n  var imageToDataUri = function (url, callback) {\n    if (!url || url.substr(0, 'data:'.length) === 'data:') {\n      // No need to convert to data uri if it is already in data uri.\n\n      // This not only convenient but desired. For example,\n      // IE throws a security error if data:image/svg+xml is used to render\n      // an image to the canvas and an attempt is made to read out data uri.\n      // Now if our image is already in data uri, there is no need to render it to the canvas\n      // and so we can bypass this error.\n\n      // Keep the async nature of the function.\n      return setTimeout(function () {\n        callback(null, url);\n      }, 0);\n    }\n\n    // chrome, IE10+\n    var modernHandler = function (xhr, callback) {\n      if (xhr.status === 200) {\n        var reader = new FileReader();\n        reader.onload = function (evt) {\n          var dataUri = evt.target.result;\n          callback(null, dataUri);\n        };\n        reader.onerror = function () {\n          callback(new Error('Failed to load image ' + url));\n        };\n        reader.readAsDataURL(xhr.response);\n      } else {\n        callback(new Error('Failed to load image ' + url));\n      }\n    };\n    var legacyHandler = function (xhr, callback) {\n      var Uint8ToString = function (u8a) {\n        var CHUNK_SZ = 0x8000;\n        var c = [];\n        for (var i = 0; i < u8a.length; i += CHUNK_SZ) {\n          c.push(String.fromCharCode.apply(null, u8a.subarray(i, i + CHUNK_SZ)));\n        }\n        return c.join('');\n      };\n      if (xhr.status === 200) {\n        var bytes = new Uint8Array(xhr.response);\n        var suffix = url.split('.').pop() || 'png';\n        var map = {\n          'svg': 'svg+xml'\n        };\n        var meta = 'data:image/' + (map[suffix] || suffix) + ';base64,';\n        var b64encoded = meta + btoa(Uint8ToString(bytes));\n        callback(null, b64encoded);\n      } else {\n        callback(new Error('Failed to load image ' + url));\n      }\n    };\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.addEventListener('error', function () {\n      callback(new Error('Failed to load image ' + url));\n    });\n    xhr.responseType = window.FileReader ? 'blob' : 'arraybuffer';\n    xhr.addEventListener('load', function () {\n      if (window.FileReader) {\n        modernHandler(xhr, callback);\n      } else {\n        legacyHandler(xhr, callback);\n      }\n    });\n    xhr.send();\n  };\n  var getElementBBox = function (el) {\n    var $el = $(el);\n    if ($el.length === 0) {\n      throw new Error('Element not found');\n    }\n    var element = $el[0];\n    var doc = element.ownerDocument;\n    var clientBBox = element.getBoundingClientRect();\n    var strokeWidthX = 0;\n    var strokeWidthY = 0;\n\n    // Firefox correction\n    if (element.ownerSVGElement) {\n      var vel = V(element);\n      var bbox = vel.getBBox({\n        target: vel.svg()\n      });\n\n      // if FF getBoundingClientRect includes stroke-width, getBBox doesn't.\n      // To unify this across all browsers we need to adjust the final bBox with `stroke-width` value.\n      strokeWidthX = clientBBox.width - bbox.width;\n      strokeWidthY = clientBBox.height - bbox.height;\n    }\n    return {\n      x: clientBBox.left + window.pageXOffset - doc.documentElement.offsetLeft + strokeWidthX / 2,\n      y: clientBBox.top + window.pageYOffset - doc.documentElement.offsetTop + strokeWidthY / 2,\n      width: clientBBox.width - strokeWidthX,\n      height: clientBBox.height - strokeWidthY\n    };\n  };\n\n  // Highly inspired by the jquery.sortElements plugin by Padolsey.\n  // See http://james.padolsey.com/javascript/sorting-elements-with-jquery/.\n  var sortElements = function (elements, comparator) {\n    var $elements = $(elements);\n    var placements = $elements.map(function () {\n      var sortElement = this;\n      var parentNode = sortElement.parentNode;\n      // Since the element itself will change position, we have\n      // to have some way of storing it's original position in\n      // the DOM. The easiest way is to have a 'flag' node:\n      var nextSibling = parentNode.insertBefore(document.createTextNode(''), sortElement.nextSibling);\n      return function () {\n        if (parentNode === this) {\n          throw new Error('You can\\'t sort elements if any one is a descendant of another.');\n        }\n\n        // Insert before flag:\n        parentNode.insertBefore(this, nextSibling);\n        // Remove flag:\n        parentNode.removeChild(nextSibling);\n      };\n    });\n    return Array.prototype.sort.call($elements, comparator).each(function (i) {\n      placements[i].call(this);\n    });\n  };\n\n  // Sets attributes on the given element and its descendants based on the selector.\n  // `attrs` object: { [SELECTOR1]: { attrs1 }, [SELECTOR2]: { attrs2}, ... } e.g. { 'input': { color : 'red' }}\n  var setAttributesBySelector = function (element, attrs) {\n    var $element = $(element);\n    forIn(attrs, function (attrs, selector) {\n      var $elements = $element.find(selector).addBack().filter(selector);\n      // Make a special case for setting classes.\n      // We do not want to overwrite any existing class.\n      if (has$2(attrs, 'class')) {\n        $elements.addClass(attrs['class']);\n        attrs = omit(attrs, 'class');\n      }\n      $elements.attr(attrs);\n    });\n  };\n\n  // Return a new object with all four sides (top, right, bottom, left) in it.\n  // Value of each side is taken from the given argument (either number or object).\n  // Default value for a side is 0.\n  // Examples:\n  // normalizeSides(5) --> { top: 5, right: 5, bottom: 5, left: 5 }\n  // normalizeSides({ horizontal: 5 }) --> { top: 0, right: 5, bottom: 0, left: 5 }\n  // normalizeSides({ left: 5 }) --> { top: 0, right: 0, bottom: 0, left: 5 }\n  // normalizeSides({ horizontal: 10, left: 5 }) --> { top: 0, right: 10, bottom: 0, left: 5 }\n  // normalizeSides({ horizontal: 0, left: 5 }) --> { top: 0, right: 0, bottom: 0, left: 5 }\n  var normalizeSides = function (box) {\n    if (Object(box) !== box) {\n      // `box` is not an object\n      var val = 0; // `val` left as 0 if `box` cannot be understood as finite number\n      if (isFinite(box)) {\n        val = +box;\n      } // actually also accepts string numbers (e.g. '100')\n\n      return {\n        top: val,\n        right: val,\n        bottom: val,\n        left: val\n      };\n    }\n\n    // `box` is an object\n    var top, right, bottom, left;\n    top = right = bottom = left = 0;\n    if (isFinite(box.vertical)) {\n      top = bottom = +box.vertical;\n    }\n    if (isFinite(box.horizontal)) {\n      right = left = +box.horizontal;\n    }\n    if (isFinite(box.top)) {\n      top = +box.top;\n    } // overwrite vertical\n    if (isFinite(box.right)) {\n      right = +box.right;\n    } // overwrite horizontal\n    if (isFinite(box.bottom)) {\n      bottom = +box.bottom;\n    } // overwrite vertical\n    if (isFinite(box.left)) {\n      left = +box.left;\n    } // overwrite horizontal\n\n    return {\n      top: top,\n      right: right,\n      bottom: bottom,\n      left: left\n    };\n  };\n  var timing = {\n    linear: function (t) {\n      return t;\n    },\n    quad: function (t) {\n      return t * t;\n    },\n    cubic: function (t) {\n      return t * t * t;\n    },\n    inout: function (t) {\n      if (t <= 0) {\n        return 0;\n      }\n      if (t >= 1) {\n        return 1;\n      }\n      var t2 = t * t;\n      var t3 = t2 * t;\n      return 4 * (t < .5 ? t3 : 3 * (t - t2) + t3 - .75);\n    },\n    exponential: function (t) {\n      return Math.pow(2, 10 * (t - 1));\n    },\n    bounce: function (t) {\n      for (var a = 0, b = 1; 1; a += b, b /= 2) {\n        if (t >= (7 - 4 * a) / 11) {\n          var q = (11 - 6 * a - 11 * t) / 4;\n          return -q * q + b * b;\n        }\n      }\n    },\n    reverse: function (f) {\n      return function (t) {\n        return 1 - f(1 - t);\n      };\n    },\n    reflect: function (f) {\n      return function (t) {\n        return .5 * (t < .5 ? f(2 * t) : 2 - f(2 - 2 * t));\n      };\n    },\n    clamp: function (f, n, x) {\n      n = n || 0;\n      x = x || 1;\n      return function (t) {\n        var r = f(t);\n        return r < n ? n : r > x ? x : r;\n      };\n    },\n    back: function (s) {\n      if (!s) {\n        s = 1.70158;\n      }\n      return function (t) {\n        return t * t * ((s + 1) * t - s);\n      };\n    },\n    elastic: function (x) {\n      if (!x) {\n        x = 1.5;\n      }\n      return function (t) {\n        return Math.pow(2, 10 * (t - 1)) * Math.cos(20 * Math.PI * x / 3 * t);\n      };\n    }\n  };\n  var interpolate = {\n    number: function (a, b) {\n      var d = b - a;\n      return function (t) {\n        return a + d * t;\n      };\n    },\n    object: function (a, b) {\n      var s = Object.keys(a);\n      return function (t) {\n        var i, p;\n        var r = {};\n        for (i = s.length - 1; i != -1; i--) {\n          p = s[i];\n          r[p] = a[p] + (b[p] - a[p]) * t;\n        }\n        return r;\n      };\n    },\n    hexColor: function (a, b) {\n      var ca = parseInt(a.slice(1), 16);\n      var cb = parseInt(b.slice(1), 16);\n      var ra = ca & 0x0000ff;\n      var rd = (cb & 0x0000ff) - ra;\n      var ga = ca & 0x00ff00;\n      var gd = (cb & 0x00ff00) - ga;\n      var ba = ca & 0xff0000;\n      var bd = (cb & 0xff0000) - ba;\n      return function (t) {\n        var r = ra + rd * t & 0x000000ff;\n        var g = ga + gd * t & 0x0000ff00;\n        var b = ba + bd * t & 0x00ff0000;\n        return '#' + (1 << 24 | r | g | b).toString(16).slice(1);\n      };\n    },\n    unit: function (a, b) {\n      var r = /(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/;\n      var ma = r.exec(a);\n      var mb = r.exec(b);\n      var p = mb[1].indexOf('.');\n      var f = p > 0 ? mb[1].length - p - 1 : 0;\n      a = +ma[1];\n      var d = +mb[1] - a;\n      var u = ma[2];\n      return function (t) {\n        return (a + d * t).toFixed(f) + u;\n      };\n    }\n  };\n\n  // SVG filters.\n  // (values in parentheses are default values)\n  var filter = {\n    // `color` ... outline color ('blue')\n    // `width`... outline width (1)\n    // `opacity` ... outline opacity (1)\n    // `margin` ... gap between outline and the element (2)\n    outline: function (args) {\n      var tpl = '<filter><feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/><feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" /><feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" /><feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/><feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/><feMerge><feMergeNode in=\"outline\"/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n      var margin = Number.isFinite(args.margin) ? args.margin : 2;\n      var width = Number.isFinite(args.width) ? args.width : 1;\n      return template(tpl)({\n        color: args.color || 'blue',\n        opacity: Number.isFinite(args.opacity) ? args.opacity : 1,\n        outerRadius: margin + width,\n        innerRadius: margin\n      });\n    },\n    // `color` ... color ('red')\n    // `width`... width (1)\n    // `blur` ... blur (0)\n    // `opacity` ... opacity (1)\n    highlight: function (args) {\n      var tpl = '<filter><feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/><feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/><feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/><feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/><feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/></filter>';\n      return template(tpl)({\n        color: args.color || 'red',\n        width: Number.isFinite(args.width) ? args.width : 1,\n        blur: Number.isFinite(args.blur) ? args.blur : 0,\n        opacity: Number.isFinite(args.opacity) ? args.opacity : 1\n      });\n    },\n    // `x` ... horizontal blur (2)\n    // `y` ... vertical blur (optional)\n    blur: function (args) {\n      var x = Number.isFinite(args.x) ? args.x : 2;\n      return template('<filter><feGaussianBlur stdDeviation=\"${stdDeviation}\"/></filter>')({\n        stdDeviation: Number.isFinite(args.y) ? [x, args.y] : x\n      });\n    },\n    // `dx` ... horizontal shift (0)\n    // `dy` ... vertical shift (0)\n    // `blur` ... blur (4)\n    // `color` ... color ('black')\n    // `opacity` ... opacity (1)\n    dropShadow: function (args) {\n      var tpl = 'SVGFEDropShadowElement' in window ? '<filter><feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\"/></filter>' : '<filter><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\"/><feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\"/><feFlood flood-color=\"${color}\"/><feComposite in2=\"offsetblur\" operator=\"in\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"${opacity}\"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n      return template(tpl)({\n        dx: args.dx || 0,\n        dy: args.dy || 0,\n        opacity: Number.isFinite(args.opacity) ? args.opacity : 1,\n        color: args.color || 'black',\n        blur: Number.isFinite(args.blur) ? args.blur : 4\n      });\n    },\n    // `amount` ... the proportion of the conversion (1). A value of 1 (default) is completely grayscale. A value of 0 leaves the input unchanged.\n    grayscale: function (args) {\n      var amount = Number.isFinite(args.amount) ? args.amount : 1;\n      return template('<filter><feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/></filter>')({\n        a: 0.2126 + 0.7874 * (1 - amount),\n        b: 0.7152 - 0.7152 * (1 - amount),\n        c: 0.0722 - 0.0722 * (1 - amount),\n        d: 0.2126 - 0.2126 * (1 - amount),\n        e: 0.7152 + 0.2848 * (1 - amount),\n        f: 0.0722 - 0.0722 * (1 - amount),\n        g: 0.2126 - 0.2126 * (1 - amount),\n        h: 0.0722 + 0.9278 * (1 - amount)\n      });\n    },\n    // `amount` ... the proportion of the conversion (1). A value of 1 (default) is completely sepia. A value of 0 leaves the input unchanged.\n    sepia: function (args) {\n      var amount = Number.isFinite(args.amount) ? args.amount : 1;\n      return template('<filter><feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/></filter>')({\n        a: 0.393 + 0.607 * (1 - amount),\n        b: 0.769 - 0.769 * (1 - amount),\n        c: 0.189 - 0.189 * (1 - amount),\n        d: 0.349 - 0.349 * (1 - amount),\n        e: 0.686 + 0.314 * (1 - amount),\n        f: 0.168 - 0.168 * (1 - amount),\n        g: 0.272 - 0.272 * (1 - amount),\n        h: 0.534 - 0.534 * (1 - amount),\n        i: 0.131 + 0.869 * (1 - amount)\n      });\n    },\n    // `amount` ... the proportion of the conversion (1). A value of 0 is completely un-saturated. A value of 1 (default) leaves the input unchanged.\n    saturate: function (args) {\n      var amount = Number.isFinite(args.amount) ? args.amount : 1;\n      return template('<filter><feColorMatrix type=\"saturate\" values=\"${amount}\"/></filter>')({\n        amount: 1 - amount\n      });\n    },\n    // `angle` ...  the number of degrees around the color circle the input samples will be adjusted (0).\n    hueRotate: function (args) {\n      return template('<filter><feColorMatrix type=\"hueRotate\" values=\"${angle}\"/></filter>')({\n        angle: args.angle || 0\n      });\n    },\n    // `amount` ... the proportion of the conversion (1). A value of 1 (default) is completely inverted. A value of 0 leaves the input unchanged.\n    invert: function (args) {\n      var amount = Number.isFinite(args.amount) ? args.amount : 1;\n      return template('<filter><feComponentTransfer><feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/><feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/><feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/></feComponentTransfer></filter>')({\n        amount: amount,\n        amount2: 1 - amount\n      });\n    },\n    // `amount` ... proportion of the conversion (1). A value of 0 will create an image that is completely black. A value of 1 (default) leaves the input unchanged.\n    brightness: function (args) {\n      return template('<filter><feComponentTransfer><feFuncR type=\"linear\" slope=\"${amount}\"/><feFuncG type=\"linear\" slope=\"${amount}\"/><feFuncB type=\"linear\" slope=\"${amount}\"/></feComponentTransfer></filter>')({\n        amount: Number.isFinite(args.amount) ? args.amount : 1\n      });\n    },\n    // `amount` ... proportion of the conversion (1). A value of 0 will create an image that is completely black. A value of 1 (default) leaves the input unchanged.\n    contrast: function (args) {\n      var amount = Number.isFinite(args.amount) ? args.amount : 1;\n      return template('<filter><feComponentTransfer><feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/><feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/><feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/></feComponentTransfer></filter>')({\n        amount: amount,\n        amount2: .5 - amount / 2\n      });\n    }\n  };\n  var format = {\n    // Formatting numbers via the Python Format Specification Mini-language.\n    // See http://docs.python.org/release/3.1.3/library/string.html#format-specification-mini-language.\n    // Heavilly inspired by the D3.js library implementation.\n    number: function (specifier, value, locale) {\n      locale = locale || {\n        currency: ['$', ''],\n        decimal: '.',\n        thousands: ',',\n        grouping: [3]\n      };\n\n      // See Python format specification mini-language: http://docs.python.org/release/3.1.3/library/string.html#format-specification-mini-language.\n      // [[fill]align][sign][symbol][0][width][,][.precision][type]\n      var re = /(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i;\n      var match = re.exec(specifier);\n      var fill = match[1] || ' ';\n      var align = match[2] || '>';\n      var sign = match[3] || '';\n      var symbol = match[4] || '';\n      var zfill = match[5];\n      var width = +match[6];\n      var comma = match[7];\n      var precision = match[8];\n      var type = match[9];\n      var scale = 1;\n      var prefix = '';\n      var suffix = '';\n      var integer = false;\n      if (precision) {\n        precision = +precision.substring(1);\n      }\n      if (zfill || fill === '0' && align === '=') {\n        zfill = fill = '0';\n        align = '=';\n        if (comma) {\n          width -= Math.floor((width - 1) / 4);\n        }\n      }\n      switch (type) {\n        case 'n':\n          comma = true;\n          type = 'g';\n          break;\n        case '%':\n          scale = 100;\n          suffix = '%';\n          type = 'f';\n          break;\n        case 'p':\n          scale = 100;\n          suffix = '%';\n          type = 'r';\n          break;\n        case 'b':\n        case 'o':\n        case 'x':\n        case 'X':\n          if (symbol === '#') {\n            prefix = '0' + type.toLowerCase();\n          }\n          break;\n        case 'c':\n        case 'd':\n          integer = true;\n          precision = 0;\n          break;\n        case 's':\n          scale = -1;\n          type = 'r';\n          break;\n      }\n      if (symbol === '$') {\n        prefix = locale.currency[0];\n        suffix = locale.currency[1];\n      }\n\n      // If no precision is specified for `'r'`, fallback to general notation.\n      if (type == 'r' && !precision) {\n        type = 'g';\n      }\n\n      // Ensure that the requested precision is in the supported range.\n      if (precision != null) {\n        if (type == 'g') {\n          precision = Math.max(1, Math.min(21, precision));\n        } else if (type == 'e' || type == 'f') {\n          precision = Math.max(0, Math.min(20, precision));\n        }\n      }\n      var zcomma = zfill && comma;\n\n      // Return the empty string for floats formatted as ints.\n      if (integer && value % 1) {\n        return '';\n      }\n\n      // Convert negative to positive, and record the sign prefix.\n      var negative = value < 0 || value === 0 && 1 / value < 0 ? (value = -value, '-') : sign;\n      var fullSuffix = suffix;\n\n      // Apply the scale, computing it from the value's exponent for si format.\n      // Preserve the existing suffix, if any, such as the currency symbol.\n      if (scale < 0) {\n        var unit = this.prefix(value, precision);\n        value = unit.scale(value);\n        fullSuffix = unit.symbol + suffix;\n      } else {\n        value *= scale;\n      }\n\n      // Convert to the desired precision.\n      value = this.convert(type, value, precision);\n\n      // Break the value into the integer part (before) and decimal part (after).\n      var i = value.lastIndexOf('.');\n      var before = i < 0 ? value : value.substring(0, i);\n      var after = i < 0 ? '' : locale.decimal + value.substring(i + 1);\n      function formatGroup(value) {\n        var i = value.length;\n        var t = [];\n        var j = 0;\n        var g = locale.grouping[0];\n        while (i > 0 && g > 0) {\n          t.push(value.substring(i -= g, i + g));\n          g = locale.grouping[j = (j + 1) % locale.grouping.length];\n        }\n        return t.reverse().join(locale.thousands);\n      }\n\n      // If the fill character is not `'0'`, grouping is applied before padding.\n      if (!zfill && comma && locale.grouping) {\n        before = formatGroup(before);\n      }\n      var length = prefix.length + before.length + after.length + (zcomma ? 0 : negative.length);\n      var padding = length < width ? new Array(length = width - length + 1).join(fill) : '';\n\n      // If the fill character is `'0'`, grouping is applied after padding.\n      if (zcomma) {\n        before = formatGroup(padding + before);\n      }\n\n      // Apply prefix.\n      negative += prefix;\n\n      // Rejoin integer and decimal parts.\n      value = before + after;\n      return (align === '<' ? negative + value + padding : align === '>' ? padding + negative + value : align === '^' ? padding.substring(0, length >>= 1) + negative + value + padding.substring(length) : negative + (zcomma ? value : padding + value)) + fullSuffix;\n    },\n    // Formatting string via the Python Format string.\n    // See https://docs.python.org/2/library/string.html#format-string-syntax)\n    string: function (formatString, value) {\n      var fieldDelimiterIndex;\n      var fieldDelimiter = '{';\n      var endPlaceholder = false;\n      var formattedStringArray = [];\n      while ((fieldDelimiterIndex = formatString.indexOf(fieldDelimiter)) !== -1) {\n        var pieceFormattedString, formatSpec, fieldName;\n        pieceFormattedString = formatString.slice(0, fieldDelimiterIndex);\n        if (endPlaceholder) {\n          formatSpec = pieceFormattedString.split(':');\n          fieldName = formatSpec.shift().split('.');\n          pieceFormattedString = value;\n          for (var i = 0; i < fieldName.length; i++) {\n            pieceFormattedString = pieceFormattedString[fieldName[i]];\n          }\n          if (formatSpec.length) {\n            pieceFormattedString = this.number(formatSpec, pieceFormattedString);\n          }\n        }\n        formattedStringArray.push(pieceFormattedString);\n        formatString = formatString.slice(fieldDelimiterIndex + 1);\n        endPlaceholder = !endPlaceholder;\n        fieldDelimiter = endPlaceholder ? '}' : '{';\n      }\n      formattedStringArray.push(formatString);\n      return formattedStringArray.join('');\n    },\n    convert: function (type, value, precision) {\n      switch (type) {\n        case 'b':\n          return value.toString(2);\n        case 'c':\n          return String.fromCharCode(value);\n        case 'o':\n          return value.toString(8);\n        case 'x':\n          return value.toString(16);\n        case 'X':\n          return value.toString(16).toUpperCase();\n        case 'g':\n          return value.toPrecision(precision);\n        case 'e':\n          return value.toExponential(precision);\n        case 'f':\n          return value.toFixed(precision);\n        case 'r':\n          return (value = this.round(value, this.precision(value, precision))).toFixed(Math.max(0, Math.min(20, this.precision(value * (1 + 1e-15), precision))));\n        default:\n          return value + '';\n      }\n    },\n    round: function (value, precision) {\n      return precision ? Math.round(value * (precision = Math.pow(10, precision))) / precision : Math.round(value);\n    },\n    precision: function (value, precision) {\n      return precision - (value ? Math.ceil(Math.log(value) / Math.LN10) : 1);\n    },\n    prefix: function (value, precision) {\n      var prefixes = ['y', 'z', 'a', 'f', 'p', 'n', 'Âµ', 'm', '', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'].map(function (d, i) {\n        var k = Math.pow(10, Math.abs(8 - i) * 3);\n        return {\n          scale: i > 8 ? function (d) {\n            return d / k;\n          } : function (d) {\n            return d * k;\n          },\n          symbol: d\n        };\n      });\n      var i = 0;\n      if (value) {\n        if (value < 0) {\n          value *= -1;\n        }\n        if (precision) {\n          value = this.round(value, this.precision(value, precision));\n        }\n        i = 1 + Math.floor(1e-12 + Math.log(value) / Math.LN10);\n        i = Math.max(-24, Math.min(24, Math.floor((i <= 0 ? i + 1 : i - 1) / 3) * 3));\n      }\n      return prefixes[8 + i / 3];\n    }\n  };\n\n  /*\n      Pre-compile the HTML to be used as a template.\n  */\n  var template = function (html) {\n    /*\n        Must support the variation in templating syntax found here:\n        https://lodash.com/docs#template\n    */\n    var regex = /<%= ([^ ]+) %>|\\$\\{ ?([^{} ]+) ?\\}|\\{\\{([^{} ]+)\\}\\}/g;\n    return function (data) {\n      data = data || {};\n      return html.replace(regex, function (match) {\n        var args = Array.from(arguments);\n        var attr = args.slice(1, 4).find(function (_attr) {\n          return !!_attr;\n        });\n        var attrArray = attr.split('.');\n        var value = data[attrArray.shift()];\n        while (value !== undefined && attrArray.length) {\n          value = value[attrArray.shift()];\n        }\n        return value !== undefined ? value : '';\n      });\n    };\n  };\n\n  /**\n   * @param {Element} el Element, which content is intent to display in full-screen mode, 'window.top.document.body' is default.\n   */\n  var toggleFullScreen = function (el) {\n    var topDocument = window.top.document;\n    el = el || topDocument.body;\n    function prefixedResult(el, prop) {\n      var prefixes = ['webkit', 'moz', 'ms', 'o', ''];\n      for (var i = 0; i < prefixes.length; i++) {\n        var prefix = prefixes[i];\n        var propName = prefix ? prefix + prop : prop.substr(0, 1).toLowerCase() + prop.substr(1);\n        if (el[propName] !== undefined) {\n          return isFunction(el[propName]) ? el[propName]() : el[propName];\n        }\n      }\n    }\n    if (prefixedResult(topDocument, 'FullscreenElement') || prefixedResult(topDocument, 'FullScreenElement')) {\n      prefixedResult(topDocument, 'ExitFullscreen') ||\n      // Spec.\n      prefixedResult(topDocument, 'CancelFullScreen'); // Firefox\n    } else {\n      prefixedResult(el, 'RequestFullscreen') ||\n      // Spec.\n      prefixedResult(el, 'RequestFullScreen'); // Firefox\n    }\n  };\n  var noop = function () {};\n\n  // Clone `cells` returning an object that maps the original cell ID to the clone. The number\n  // of clones is exactly the same as the `cells.length`.\n  // This function simply clones all the `cells`. However, it also reconstructs\n  // all the `source/target` and `parent/embed` references within the `cells`.\n  // This is the main difference from the `cell.clone()` method. The\n  // `cell.clone()` method works on one single cell only.\n  // For example, for a graph: `A --- L ---> B`, `cloneCells([A, L, B])`\n  // returns `[A2, L2, B2]` resulting to a graph: `A2 --- L2 ---> B2`, i.e.\n  // the source and target of the link `L2` is changed to point to `A2` and `B2`.\n  function cloneCells(cells) {\n    cells = uniq(cells);\n\n    // A map of the form [original cell ID] -> [clone] helping\n    // us to reconstruct references for source/target and parent/embeds.\n    // This is also the returned value.\n    var cloneMap = toArray(cells).reduce(function (map, cell) {\n      map[cell.id] = cell.clone();\n      return map;\n    }, {});\n    toArray(cells).forEach(function (cell) {\n      var clone = cloneMap[cell.id];\n      // assert(clone exists)\n\n      if (clone.isLink()) {\n        var source = clone.source();\n        var target = clone.target();\n        if (source.id && cloneMap[source.id]) {\n          // Source points to an element and the element is among the clones.\n          // => Update the source of the cloned link.\n          clone.prop('source/id', cloneMap[source.id].id);\n        }\n        if (target.id && cloneMap[target.id]) {\n          // Target points to an element and the element is among the clones.\n          // => Update the target of the cloned link.\n          clone.prop('target/id', cloneMap[target.id].id);\n        }\n      }\n\n      // Find the parent of the original cell\n      var parent = cell.get('parent');\n      if (parent && cloneMap[parent]) {\n        clone.set('parent', cloneMap[parent].id);\n      }\n\n      // Find the embeds of the original cell\n      var embeds = toArray(cell.get('embeds')).reduce(function (newEmbeds, embed) {\n        // Embedded cells that are not being cloned can not be carried\n        // over with other embedded cells.\n        if (cloneMap[embed]) {\n          newEmbeds.push(cloneMap[embed].id);\n        }\n        return newEmbeds;\n      }, []);\n      if (!isEmpty(embeds)) {\n        clone.set('embeds', embeds);\n      }\n    });\n    return cloneMap;\n  }\n  var validPropertiesList = ['checked', 'selected', 'disabled', 'readOnly', 'contentEditable', 'value', 'indeterminate'];\n  var validProperties = validPropertiesList.reduce(function (acc, key) {\n    acc[key] = true;\n    return acc;\n  }, {});\n  var props$1 = {\n    qualify: function (properties) {\n      return isPlainObject(properties);\n    },\n    set: function (properties, _, node) {\n      Object.keys(properties).forEach(function (key) {\n        if (validProperties[key] && key in node) {\n          var value = properties[key];\n          if (node.tagName === 'SELECT' && Array.isArray(value)) {\n            Array.from(node.options).forEach(function (option, index) {\n              option.selected = value.includes(option.value);\n            });\n          } else {\n            node[key] = value;\n          }\n        }\n      });\n    }\n  };\n  function setWrapper(attrName, dimension) {\n    return function (value, refBBox) {\n      var isValuePercentage = isPercentage(value);\n      value = parseFloat(value);\n      if (isValuePercentage) {\n        value /= 100;\n      }\n      var attrs = {};\n      if (isFinite(value)) {\n        var attrValue = isValuePercentage || value >= 0 && value <= 1 ? value * refBBox[dimension] : Math.max(value + refBBox[dimension], 0);\n        attrs[attrName] = attrValue;\n      }\n      return attrs;\n    };\n  }\n  function positionWrapper(axis, dimension, origin) {\n    return function (value, refBBox) {\n      var valuePercentage = isPercentage(value);\n      value = parseFloat(value);\n      if (valuePercentage) {\n        value /= 100;\n      }\n      var delta;\n      if (isFinite(value)) {\n        var refOrigin = refBBox[origin]();\n        if (valuePercentage || value > 0 && value < 1) {\n          delta = refOrigin[axis] + refBBox[dimension] * value;\n        } else {\n          delta = refOrigin[axis] + value;\n        }\n      }\n      var point = Point();\n      point[axis] = delta || 0;\n      return point;\n    };\n  }\n  function offsetWrapper(axis, dimension, corner) {\n    return function (value, nodeBBox) {\n      var delta;\n      if (value === 'middle') {\n        delta = nodeBBox[dimension] / 2;\n      } else if (value === corner) {\n        delta = nodeBBox[dimension];\n      } else if (isFinite(value)) {\n        // TODO: or not to do a breaking change?\n        delta = value > -1 && value < 1 ? -nodeBBox[dimension] * value : -value;\n      } else if (isPercentage(value)) {\n        delta = nodeBBox[dimension] * parseFloat(value) / 100;\n      } else {\n        delta = 0;\n      }\n      var point = Point();\n      point[axis] = -(nodeBBox[axis] + delta);\n      return point;\n    };\n  }\n  function shapeWrapper(shapeConstructor, opt) {\n    var cacheName = 'joint-shape';\n    var resetOffset = opt && opt.resetOffset;\n    return function (value, refBBox, node) {\n      var $node = $(node);\n      var cache = $node.data(cacheName);\n      if (!cache || cache.value !== value) {\n        // only recalculate if value has changed\n        var cachedShape = shapeConstructor(value);\n        cache = {\n          value: value,\n          shape: cachedShape,\n          shapeBBox: cachedShape.bbox()\n        };\n        $node.data(cacheName, cache);\n      }\n      var shape = cache.shape.clone();\n      var shapeBBox = cache.shapeBBox.clone();\n      var shapeOrigin = shapeBBox.origin();\n      var refOrigin = refBBox.origin();\n      shapeBBox.x = refOrigin.x;\n      shapeBBox.y = refOrigin.y;\n      var fitScale = refBBox.maxRectScaleToFit(shapeBBox, refOrigin);\n      // `maxRectScaleToFit` can give Infinity if width or height is 0\n      var sx = shapeBBox.width === 0 || refBBox.width === 0 ? 1 : fitScale.sx;\n      var sy = shapeBBox.height === 0 || refBBox.height === 0 ? 1 : fitScale.sy;\n      shape.scale(sx, sy, shapeOrigin);\n      if (resetOffset) {\n        shape.translate(-shapeOrigin.x, -shapeOrigin.y);\n      }\n      return shape;\n    };\n  }\n\n  // `d` attribute for SVGPaths\n  function dWrapper(opt) {\n    function pathConstructor(value) {\n      return new Path(V.normalizePathData(value));\n    }\n    var shape = shapeWrapper(pathConstructor, opt);\n    return function (value, refBBox, node) {\n      var path = shape(value, refBBox, node);\n      return {\n        d: path.serialize()\n      };\n    };\n  }\n\n  // `points` attribute for SVGPolylines and SVGPolygons\n  function pointsWrapper(opt) {\n    var shape = shapeWrapper(Polyline, opt);\n    return function (value, refBBox, node) {\n      var polyline = shape(value, refBBox, node);\n      return {\n        points: polyline.serialize()\n      };\n    };\n  }\n  function atConnectionWrapper(method, opt) {\n    var zeroVector = new Point(1, 0);\n    return function (value) {\n      var p, angle;\n      var tangent = this[method](value);\n      if (tangent) {\n        angle = opt.rotate ? tangent.vector().vectorAngle(zeroVector) : 0;\n        p = tangent.start;\n      } else {\n        p = this.path.start;\n        angle = 0;\n      }\n      if (angle === 0) {\n        return {\n          transform: 'translate(' + p.x + ',' + p.y + ')'\n        };\n      }\n      return {\n        transform: 'translate(' + p.x + ',' + p.y + ') rotate(' + angle + ')'\n      };\n    };\n  }\n  function setIfChangedWrapper(attribute) {\n    return function setIfChanged(value, _, node) {\n      var vel = V(node);\n      if (vel.attr(attribute) === value) {\n        return;\n      }\n      vel.attr(attribute, value);\n    };\n  }\n  function isTextInUse(_value, _node, attrs) {\n    return attrs.text !== undefined;\n  }\n  function isLinkView() {\n    return this.model.isLink();\n  }\n  function contextMarker(context) {\n    var marker = {};\n    // Stroke\n    // The context 'fill' is disregared here. The usual case is to use the marker with a connection\n    // (for which 'fill' attribute is set to 'none').\n    var stroke = context.stroke;\n    if (typeof stroke === 'string') {\n      marker['stroke'] = stroke;\n      marker['fill'] = stroke;\n    }\n    // Opacity\n    // Again the context 'fill-opacity' is ignored.\n    var strokeOpacity = context.strokeOpacity;\n    if (strokeOpacity === undefined) {\n      strokeOpacity = context['stroke-opacity'];\n    }\n    if (strokeOpacity === undefined) {\n      strokeOpacity = context.opacity;\n    }\n    if (strokeOpacity !== undefined) {\n      marker['stroke-opacity'] = strokeOpacity;\n      marker['fill-opacity'] = strokeOpacity;\n    }\n    return marker;\n  }\n  function setPaintURL(def) {\n    var ref = this;\n    var paper = ref.paper;\n    var url = def.type === 'pattern' ? paper.definePattern(def) : paper.defineGradient(def);\n    return \"url(#\" + url + \")\";\n  }\n  var attributesNS = {\n    xlinkShow: {\n      set: 'xlink:show'\n    },\n    xlinkRole: {\n      set: 'xlink:role'\n    },\n    xlinkType: {\n      set: 'xlink:type'\n    },\n    xlinkArcrole: {\n      set: 'xlink:arcrole'\n    },\n    xlinkTitle: {\n      set: 'xlink:title'\n    },\n    xlinkActuate: {\n      set: 'xlink:actuate'\n    },\n    xmlSpace: {\n      set: 'xml:space'\n    },\n    xmlBase: {\n      set: 'xml:base'\n    },\n    xmlLang: {\n      set: 'xml:lang'\n    },\n    preserveAspectRatio: {\n      set: 'preserveAspectRatio'\n    },\n    requiredExtension: {\n      set: 'requiredExtension'\n    },\n    requiredFeatures: {\n      set: 'requiredFeatures'\n    },\n    systemLanguage: {\n      set: 'systemLanguage'\n    },\n    externalResourcesRequired: {\n      set: 'externalResourceRequired'\n    },\n    href: {\n      set: setIfChangedWrapper('href')\n    },\n    xlinkHref: {\n      set: setIfChangedWrapper('xlink:href')\n    },\n    filter: {\n      qualify: isPlainObject,\n      set: function (filter) {\n        return 'url(#' + this.paper.defineFilter(filter) + ')';\n      }\n    },\n    fill: {\n      qualify: isPlainObject,\n      set: setPaintURL\n    },\n    stroke: {\n      qualify: isPlainObject,\n      set: setPaintURL\n    },\n    sourceMarker: {\n      qualify: isPlainObject,\n      set: function (marker, refBBox, node, attrs) {\n        marker = assign(contextMarker(attrs), marker);\n        return {\n          'marker-start': 'url(#' + this.paper.defineMarker(marker) + ')'\n        };\n      }\n    },\n    targetMarker: {\n      qualify: isPlainObject,\n      set: function (marker, refBBox, node, attrs) {\n        marker = assign(contextMarker(attrs), {\n          'transform': 'rotate(180)'\n        }, marker);\n        return {\n          'marker-end': 'url(#' + this.paper.defineMarker(marker) + ')'\n        };\n      }\n    },\n    vertexMarker: {\n      qualify: isPlainObject,\n      set: function (marker, refBBox, node, attrs) {\n        marker = assign(contextMarker(attrs), marker);\n        return {\n          'marker-mid': 'url(#' + this.paper.defineMarker(marker) + ')'\n        };\n      }\n    },\n    text: {\n      qualify: function (_text, _node, attrs) {\n        return !attrs.textWrap || !isPlainObject(attrs.textWrap);\n      },\n      set: function (text, refBBox, node, attrs) {\n        var $node = $(node);\n        var cacheName = 'joint-text';\n        var cache = $node.data(cacheName);\n        var lineHeight = attrs.lineHeight;\n        var annotations = attrs.annotations;\n        var textVerticalAnchor = attrs.textVerticalAnchor;\n        var eol = attrs.eol;\n        var displayEmpty = attrs.displayEmpty;\n        var textPath = attrs.textPath;\n        // eval `x` if using calc()\n        var x = attrs.x;\n        if (isCalcAttribute(x)) {\n          x = evalCalcAttribute(x, refBBox);\n        }\n        // eval `font-size` if using calc()\n        var fontSize = attrs['font-size'] || attrs['fontSize'];\n        if (isCalcAttribute(fontSize)) {\n          fontSize = evalCalcAttribute(fontSize, refBBox);\n        }\n        // Update the text only if there was a change in the string\n        // or any of its attributes.\n        var textHash = JSON.stringify([text, lineHeight, annotations, textVerticalAnchor, eol, displayEmpty, textPath, x, fontSize]);\n        if (cache === undefined || cache !== textHash) {\n          // Chrome bug:\n          // <tspan> positions defined as `em` are not updated\n          // when container `font-size` change.\n          if (fontSize) {\n            node.setAttribute('font-size', fontSize);\n          }\n          // Text Along Path Selector\n          if (isObject$1(textPath)) {\n            var pathSelector = textPath.selector;\n            if (typeof pathSelector === 'string') {\n              var ref = this.findBySelector(pathSelector);\n              var pathNode = ref[0];\n              if (pathNode instanceof SVGPathElement) {\n                textPath = assign({\n                  'xlink:href': '#' + pathNode.id\n                }, textPath);\n              }\n            }\n          }\n          V(node).text('' + text, {\n            lineHeight: lineHeight,\n            annotations: annotations,\n            textPath: textPath,\n            x: x,\n            textVerticalAnchor: textVerticalAnchor,\n            eol: eol,\n            displayEmpty: displayEmpty\n          });\n          $node.data(cacheName, textHash);\n        }\n      }\n    },\n    textWrap: {\n      qualify: isPlainObject,\n      set: function (value, refBBox, node, attrs) {\n        var size = {};\n        // option `width`\n        var width = value.width || 0;\n        if (isPercentage(width)) {\n          size.width = refBBox.width * parseFloat(width) / 100;\n        } else if (isCalcAttribute(width)) {\n          size.width = Number(evalCalcAttribute(width, refBBox));\n        } else {\n          if (value.width === null) {\n            // breakText() requires width to be specified.\n            size.width = Infinity;\n          } else if (width <= 0) {\n            size.width = refBBox.width + width;\n          } else {\n            size.width = width;\n          }\n        }\n        // option `height`\n        var height = value.height || 0;\n        if (isPercentage(height)) {\n          size.height = refBBox.height * parseFloat(height) / 100;\n        } else if (isCalcAttribute(height)) {\n          size.height = Number(evalCalcAttribute(height, refBBox));\n        } else {\n          if (value.height === null) {\n            // if height is not specified breakText() does not\n            // restrict the height of the text.\n          } else if (height <= 0) {\n            size.height = refBBox.height + height;\n          } else {\n            size.height = height;\n          }\n        }\n        // option `text`\n        var wrappedText;\n        var text = value.text;\n        if (text === undefined) {\n          text = attrs.text;\n        }\n        if (text !== undefined) {\n          var breakTextFn = value.breakText || breakText;\n          var fontSizeAttr = attrs['font-size'] || attrs.fontSize;\n          wrappedText = breakTextFn('' + text, size, {\n            'font-weight': attrs['font-weight'] || attrs.fontWeight,\n            'font-size': isCalcAttribute(fontSizeAttr) ? evalCalcAttribute(fontSizeAttr, refBBox) : fontSizeAttr,\n            'font-family': attrs['font-family'] || attrs.fontFamily,\n            'lineHeight': attrs.lineHeight,\n            'letter-spacing': 'letter-spacing' in attrs ? attrs['letter-spacing'] : attrs.letterSpacing\n          }, {\n            // Provide an existing SVG Document here\n            // instead of creating a temporary one over again.\n            svgDocument: this.paper.svg,\n            ellipsis: value.ellipsis,\n            hyphen: value.hyphen,\n            separator: value.separator,\n            maxLineCount: value.maxLineCount,\n            preserveSpaces: value.preserveSpaces\n          });\n        } else {\n          wrappedText = '';\n        }\n        attributesNS.text.set.call(this, wrappedText, refBBox, node, attrs);\n      }\n    },\n    title: {\n      qualify: function (title, node) {\n        // HTMLElement title is specified via an attribute (i.e. not an element)\n        return node instanceof SVGElement;\n      },\n      set: function (title, refBBox, node) {\n        var $node = $(node);\n        var cacheName = 'joint-title';\n        var cache = $node.data(cacheName);\n        if (cache === undefined || cache !== title) {\n          $node.data(cacheName, title);\n          if (node.tagName === 'title') {\n            // The target node is a <title> element.\n            node.textContent = title;\n            return;\n          }\n          // Generally <title> element should be the first child element of its parent.\n          var firstChild = node.firstElementChild;\n          if (firstChild && firstChild.tagName === 'title') {\n            // Update an existing title\n            firstChild.textContent = title;\n          } else {\n            // Create a new title\n            var titleNode = document.createElementNS(node.namespaceURI, 'title');\n            titleNode.textContent = title;\n            node.insertBefore(titleNode, firstChild);\n          }\n        }\n      }\n    },\n    lineHeight: {\n      qualify: isTextInUse\n    },\n    textVerticalAnchor: {\n      qualify: isTextInUse\n    },\n    textPath: {\n      qualify: isTextInUse\n    },\n    annotations: {\n      qualify: isTextInUse\n    },\n    eol: {\n      qualify: isTextInUse\n    },\n    displayEmpty: {\n      qualify: isTextInUse\n    },\n    // `port` attribute contains the `id` of the port that the underlying magnet represents.\n    port: {\n      set: function (port) {\n        return port === null || port.id === undefined ? port : port.id;\n      }\n    },\n    // `style` attribute is special in the sense that it sets the CSS style of the subelement.\n    style: {\n      qualify: isPlainObject,\n      set: function (styles, refBBox, node) {\n        $(node).css(styles);\n      }\n    },\n    html: {\n      set: function (html, refBBox, node) {\n        $(node).html(html + '');\n      }\n    },\n    // Properties setter (set various properties on the node)\n    props: props$1,\n    ref: {\n      // We do not set `ref` attribute directly on an element.\n      // The attribute itself does not qualify for relative positioning.\n    },\n    // if `refX` is in [0, 1] then `refX` is a fraction of bounding box width\n    // if `refX` is < 0 then `refX`'s absolute values is the right coordinate of the bounding box\n    // otherwise, `refX` is the left coordinate of the bounding box\n\n    refX: {\n      position: positionWrapper('x', 'width', 'origin')\n    },\n    refY: {\n      position: positionWrapper('y', 'height', 'origin')\n    },\n    // `ref-dx` and `ref-dy` define the offset of the subelement relative to the right and/or bottom\n    // coordinate of the reference element.\n\n    refDx: {\n      position: positionWrapper('x', 'width', 'corner')\n    },\n    refDy: {\n      position: positionWrapper('y', 'height', 'corner')\n    },\n    // 'ref-width'/'ref-height' defines the width/height of the subelement relatively to\n    // the reference element size\n    // val in 0..1         ref-width = 0.75 sets the width to 75% of the ref. el. width\n    // val < 0 || val > 1  ref-height = -20 sets the height to the ref. el. height shorter by 20\n\n    refWidth: {\n      set: setWrapper('width', 'width')\n    },\n    refHeight: {\n      set: setWrapper('height', 'height')\n    },\n    refRx: {\n      set: setWrapper('rx', 'width')\n    },\n    refRy: {\n      set: setWrapper('ry', 'height')\n    },\n    refRInscribed: {\n      set: function (attrName) {\n        var widthFn = setWrapper(attrName, 'width');\n        var heightFn = setWrapper(attrName, 'height');\n        return function (value, refBBox) {\n          var fn = refBBox.height > refBBox.width ? widthFn : heightFn;\n          return fn(value, refBBox);\n        };\n      }('r')\n    },\n    refRCircumscribed: {\n      set: function (value, refBBox) {\n        var isValuePercentage = isPercentage(value);\n        value = parseFloat(value);\n        if (isValuePercentage) {\n          value /= 100;\n        }\n        var diagonalLength = Math.sqrt(refBBox.height * refBBox.height + refBBox.width * refBBox.width);\n        var rValue;\n        if (isFinite(value)) {\n          if (isValuePercentage || value >= 0 && value <= 1) {\n            rValue = value * diagonalLength;\n          } else {\n            rValue = Math.max(value + diagonalLength, 0);\n          }\n        }\n        return {\n          r: rValue\n        };\n      }\n    },\n    refCx: {\n      set: setWrapper('cx', 'width')\n    },\n    refCy: {\n      set: setWrapper('cy', 'height')\n    },\n    // `x-alignment` when set to `middle` causes centering of the subelement around its new x coordinate.\n    // `x-alignment` when set to `right` uses the x coordinate as referenced to the right of the bbox.\n\n    xAlignment: {\n      offset: offsetWrapper('x', 'width', 'right')\n    },\n    // `y-alignment` when set to `middle` causes centering of the subelement around its new y coordinate.\n    // `y-alignment` when set to `bottom` uses the y coordinate as referenced to the bottom of the bbox.\n\n    yAlignment: {\n      offset: offsetWrapper('y', 'height', 'bottom')\n    },\n    resetOffset: {\n      offset: function (val, nodeBBox) {\n        return val ? {\n          x: -nodeBBox.x,\n          y: -nodeBBox.y\n        } : {\n          x: 0,\n          y: 0\n        };\n      }\n    },\n    refDResetOffset: {\n      set: dWrapper({\n        resetOffset: true\n      })\n    },\n    refDKeepOffset: {\n      set: dWrapper({\n        resetOffset: false\n      })\n    },\n    refPointsResetOffset: {\n      set: pointsWrapper({\n        resetOffset: true\n      })\n    },\n    refPointsKeepOffset: {\n      set: pointsWrapper({\n        resetOffset: false\n      })\n    },\n    // LinkView Attributes\n\n    connection: {\n      qualify: isLinkView,\n      set: function (ref) {\n        var stubs = ref.stubs;\n        if (stubs === void 0) stubs = 0;\n        var d;\n        if (isFinite(stubs) && stubs !== 0) {\n          var offset;\n          if (stubs < 0) {\n            offset = (this.getConnectionLength() + stubs) / 2;\n          } else {\n            offset = stubs;\n          }\n          var path = this.getConnection();\n          var segmentSubdivisions = this.getConnectionSubdivisions();\n          var sourceParts = path.divideAtLength(offset, {\n            segmentSubdivisions: segmentSubdivisions\n          });\n          var targetParts = path.divideAtLength(-offset, {\n            segmentSubdivisions: segmentSubdivisions\n          });\n          if (sourceParts && targetParts) {\n            d = sourceParts[0].serialize() + \" \" + targetParts[1].serialize();\n          }\n        }\n        return {\n          d: d || this.getSerializedConnection()\n        };\n      }\n    },\n    atConnectionLengthKeepGradient: {\n      qualify: isLinkView,\n      set: atConnectionWrapper('getTangentAtLength', {\n        rotate: true\n      })\n    },\n    atConnectionLengthIgnoreGradient: {\n      qualify: isLinkView,\n      set: atConnectionWrapper('getTangentAtLength', {\n        rotate: false\n      })\n    },\n    atConnectionRatioKeepGradient: {\n      qualify: isLinkView,\n      set: atConnectionWrapper('getTangentAtRatio', {\n        rotate: true\n      })\n    },\n    atConnectionRatioIgnoreGradient: {\n      qualify: isLinkView,\n      set: atConnectionWrapper('getTangentAtRatio', {\n        rotate: false\n      })\n    }\n  };\n  attributesNS['xlink:href'] = attributesNS.xlinkHref;\n\n  // Support `calc()` with the following SVG attributes\n  ['transform',\n  // g\n  'd',\n  // path\n  'points',\n  // polyline / polygon\n  'cx', 'cy',\n  // circle / ellipse\n  'x1', 'x2', 'y1', 'y2',\n  // line\n  'x', 'y',\n  // rect / text / image\n  'dx', 'dy' // text\n  ].forEach(function (attribute) {\n    attributesNS[attribute] = {\n      qualify: isCalcAttribute,\n      set: function setCalcAttribute(value, refBBox) {\n        var obj;\n        return obj = {}, obj[attribute] = evalCalcAttribute(value, refBBox), obj;\n      }\n    };\n  });\n\n  // Prevent \"A negative value is not valid\" error.\n  ['width', 'height',\n  // rect / image\n  'r',\n  // circle\n  'rx', 'ry',\n  // rect / ellipse\n  'font-size',\n  // text\n  'stroke-width' // elements\n  ].forEach(function (attribute) {\n    attributesNS[attribute] = {\n      qualify: isCalcAttribute,\n      set: function setCalcAttribute(value, refBBox) {\n        var obj;\n        return obj = {}, obj[attribute] = Math.max(0, evalCalcAttribute(value, refBBox)), obj;\n      }\n    };\n  });\n\n  // Aliases\n  attributesNS.refR = attributesNS.refRInscribed;\n  attributesNS.refD = attributesNS.refDResetOffset;\n  attributesNS.refPoints = attributesNS.refPointsResetOffset;\n  attributesNS.atConnectionLength = attributesNS.atConnectionLengthKeepGradient;\n  attributesNS.atConnectionRatio = attributesNS.atConnectionRatioKeepGradient;\n  attributesNS.fontSize = attributesNS['font-size'];\n  attributesNS.strokeWidth = attributesNS['stroke-width'];\n\n  // This allows to combine both absolute and relative positioning\n  // refX: 50%, refX2: 20\n  attributesNS.refX2 = attributesNS.refX;\n  attributesNS.refY2 = attributesNS.refY;\n  attributesNS.refWidth2 = attributesNS.refWidth;\n  attributesNS.refHeight2 = attributesNS.refHeight;\n\n  // Aliases for backwards compatibility\n  attributesNS['ref-x'] = attributesNS.refX;\n  attributesNS['ref-y'] = attributesNS.refY;\n  attributesNS['ref-dy'] = attributesNS.refDy;\n  attributesNS['ref-dx'] = attributesNS.refDx;\n  attributesNS['ref-width'] = attributesNS.refWidth;\n  attributesNS['ref-height'] = attributesNS.refHeight;\n  attributesNS['x-alignment'] = attributesNS.xAlignment;\n  attributesNS['y-alignment'] = attributesNS.yAlignment;\n  var attributes = attributesNS;\n\n  // Cell base model.\n  // --------------------------\n\n  var Cell = Backbone.Model.extend({\n    // This is the same as Backbone.Model with the only difference that is uses util.merge\n    // instead of just _.extend. The reason is that we want to mixin attributes set in upper classes.\n    constructor: function (attributes, options) {\n      var defaults;\n      var attrs = attributes || {};\n      if (typeof this.preinitialize === 'function') {\n        // Check to support an older version of Backbone (prior v1.4)\n        this.preinitialize.apply(this, arguments);\n      }\n      this.cid = uniqueId('c');\n      this.attributes = {};\n      if (options && options.collection) {\n        this.collection = options.collection;\n      }\n      if (options && options.parse) {\n        attrs = this.parse(attrs, options) || {};\n      }\n      if (defaults = result(this, 'defaults')) {\n        //<custom code>\n        // Replaced the call to _.defaults with util.merge.\n        attrs = merge({}, defaults, attrs);\n        //</custom code>\n      }\n      this.set(attrs, options);\n      this.changed = {};\n      this.initialize.apply(this, arguments);\n    },\n    translate: function (dx, dy, opt) {\n      throw new Error('Must define a translate() method.');\n    },\n    toJSON: function () {\n      var defaults = result(this.constructor.prototype, 'defaults');\n      var defaultAttrs = defaults.attrs || {};\n      var attrs = this.attributes.attrs;\n      var finalAttrs = {};\n\n      // Loop through all the attributes and\n      // omit the default attributes as they are implicitly reconstructible by the cell 'type'.\n      forIn(attrs, function (attr, selector) {\n        var defaultAttr = defaultAttrs[selector];\n        forIn(attr, function (value, name) {\n          // attr is mainly flat though it might have one more level (consider the `style` attribute).\n          // Check if the `value` is object and if yes, go one level deep.\n          if (isObject$1(value) && !Array.isArray(value)) {\n            forIn(value, function (value2, name2) {\n              if (!defaultAttr || !defaultAttr[name] || !isEqual(defaultAttr[name][name2], value2)) {\n                finalAttrs[selector] = finalAttrs[selector] || {};\n                (finalAttrs[selector][name] || (finalAttrs[selector][name] = {}))[name2] = value2;\n              }\n            });\n          } else if (!defaultAttr || !isEqual(defaultAttr[name], value)) {\n            // `value` is not an object, default attribute for such a selector does not exist\n            // or it is different than the attribute value set on the model.\n\n            finalAttrs[selector] = finalAttrs[selector] || {};\n            finalAttrs[selector][name] = value;\n          }\n        });\n      });\n      var attributes = cloneDeep(omit(this.attributes, 'attrs'));\n      attributes.attrs = finalAttrs;\n      return attributes;\n    },\n    initialize: function (options) {\n      var idAttribute = this.getIdAttribute();\n      if (!options || options[idAttribute] === undefined) {\n        this.set(idAttribute, this.generateId(), {\n          silent: true\n        });\n      }\n      this._transitionIds = {};\n      this._scheduledTransitionIds = {};\n\n      // Collect ports defined in `attrs` and keep collecting whenever `attrs` object changes.\n      this.processPorts();\n      this.on('change:attrs', this.processPorts, this);\n    },\n    getIdAttribute: function () {\n      return this.idAttribute || 'id';\n    },\n    generateId: function () {\n      return uuid();\n    },\n    /**\n     * @deprecated\n     */\n    processPorts: function () {\n      // Whenever `attrs` changes, we extract ports from the `attrs` object and store it\n      // in a more accessible way. Also, if any port got removed and there were links that had `target`/`source`\n      // set to that port, we remove those links as well (to follow the same behaviour as\n      // with a removed element).\n\n      var previousPorts = this.ports;\n\n      // Collect ports from the `attrs` object.\n      var ports = {};\n      forIn(this.get('attrs'), function (attrs, selector) {\n        if (attrs && attrs.port) {\n          // `port` can either be directly an `id` or an object containing an `id` (and potentially other data).\n          if (attrs.port.id !== undefined) {\n            ports[attrs.port.id] = attrs.port;\n          } else {\n            ports[attrs.port] = {\n              id: attrs.port\n            };\n          }\n        }\n      });\n\n      // Collect ports that have been removed (compared to the previous ports) - if any.\n      // Use hash table for quick lookup.\n      var removedPorts = {};\n      forIn(previousPorts, function (port, id) {\n        if (!ports[id]) {\n          removedPorts[id] = true;\n        }\n      });\n\n      // Remove all the incoming/outgoing links that have source/target port set to any of the removed ports.\n      if (this.graph && !isEmpty(removedPorts)) {\n        var inboundLinks = this.graph.getConnectedLinks(this, {\n          inbound: true\n        });\n        inboundLinks.forEach(function (link) {\n          if (removedPorts[link.get('target').port]) {\n            link.remove();\n          }\n        });\n        var outboundLinks = this.graph.getConnectedLinks(this, {\n          outbound: true\n        });\n        outboundLinks.forEach(function (link) {\n          if (removedPorts[link.get('source').port]) {\n            link.remove();\n          }\n        });\n      }\n\n      // Update the `ports` object.\n      this.ports = ports;\n    },\n    remove: function (opt) {\n      if (opt === void 0) opt = {};\n\n      // Store the graph in a variable because `this.graph` won't be accessible\n      // after `this.trigger('remove', ...)` down below.\n      var ref = this;\n      var graph = ref.graph;\n      var collection = ref.collection;\n      if (!graph) {\n        // The collection is a common Backbone collection (not the graph collection).\n        if (collection) {\n          collection.remove(this, opt);\n        }\n        return this;\n      }\n      graph.startBatch('remove');\n\n      // First, unembed this cell from its parent cell if there is one.\n      var parentCell = this.getParentCell();\n      if (parentCell) {\n        parentCell.unembed(this, opt);\n      }\n\n      // Remove also all the cells, which were embedded into this cell\n      var embeddedCells = this.getEmbeddedCells();\n      for (var i = 0, n = embeddedCells.length; i < n; i++) {\n        var embed = embeddedCells[i];\n        if (embed) {\n          embed.remove(opt);\n        }\n      }\n      this.trigger('remove', this, graph.attributes.cells, opt);\n      graph.stopBatch('remove');\n      return this;\n    },\n    toFront: function (opt) {\n      var graph = this.graph;\n      if (graph) {\n        opt = defaults(opt || {}, {\n          foregroundEmbeds: true\n        });\n        var cells;\n        if (opt.deep) {\n          cells = this.getEmbeddedCells({\n            deep: true,\n            breadthFirst: opt.breadthFirst !== false,\n            sortSiblings: opt.foregroundEmbeds\n          });\n          cells.unshift(this);\n        } else {\n          cells = [this];\n        }\n        var sortedCells = opt.foregroundEmbeds ? cells : sortBy(cells, function (cell) {\n          return cell.z();\n        });\n        var maxZ = graph.maxZIndex();\n        var z = maxZ - cells.length + 1;\n        var collection = graph.get('cells');\n        var shouldUpdate = collection.indexOf(sortedCells[0]) !== collection.length - cells.length;\n        if (!shouldUpdate) {\n          shouldUpdate = sortedCells.some(function (cell, index) {\n            return cell.z() !== z + index;\n          });\n        }\n        if (shouldUpdate) {\n          this.startBatch('to-front');\n          z = z + cells.length;\n          sortedCells.forEach(function (cell, index) {\n            cell.set('z', z + index, opt);\n          });\n          this.stopBatch('to-front');\n        }\n      }\n      return this;\n    },\n    toBack: function (opt) {\n      var graph = this.graph;\n      if (graph) {\n        opt = defaults(opt || {}, {\n          foregroundEmbeds: true\n        });\n        var cells;\n        if (opt.deep) {\n          cells = this.getEmbeddedCells({\n            deep: true,\n            breadthFirst: opt.breadthFirst !== false,\n            sortSiblings: opt.foregroundEmbeds\n          });\n          cells.unshift(this);\n        } else {\n          cells = [this];\n        }\n        var sortedCells = opt.foregroundEmbeds ? cells : sortBy(cells, function (cell) {\n          return cell.z();\n        });\n        var z = graph.minZIndex();\n        var collection = graph.get('cells');\n        var shouldUpdate = collection.indexOf(sortedCells[0]) !== 0;\n        if (!shouldUpdate) {\n          shouldUpdate = sortedCells.some(function (cell, index) {\n            return cell.z() !== z + index;\n          });\n        }\n        if (shouldUpdate) {\n          this.startBatch('to-back');\n          z -= cells.length;\n          sortedCells.forEach(function (cell, index) {\n            cell.set('z', z + index, opt);\n          });\n          this.stopBatch('to-back');\n        }\n      }\n      return this;\n    },\n    parent: function (parent, opt) {\n      // getter\n      if (parent === undefined) {\n        return this.get('parent');\n      }\n      // setter\n      return this.set('parent', parent, opt);\n    },\n    embed: function (cell, opt) {\n      var this$1 = this;\n      var cells = Array.isArray(cell) ? cell : [cell];\n      if (!this.canEmbed(cells)) {\n        throw new Error('Recursive embedding not allowed.');\n      }\n      if (cells.some(function (c) {\n        return c.isEmbedded() && this$1.id !== c.parent();\n      })) {\n        throw new Error('Embedding of already embedded cells is not allowed.');\n      }\n      this._embedCells(cells, opt);\n      return this;\n    },\n    unembed: function (cell, opt) {\n      var cells = Array.isArray(cell) ? cell : [cell];\n      this._unembedCells(cells, opt);\n      return this;\n    },\n    canEmbed: function (cell) {\n      var this$1 = this;\n      var cells = Array.isArray(cell) ? cell : [cell];\n      return cells.every(function (c) {\n        return this$1 !== c && !this$1.isEmbeddedIn(c);\n      });\n    },\n    _embedCells: function (cells, opt) {\n      var this$1 = this;\n      var batchName = 'embed';\n      this.startBatch(batchName);\n      var embeds = assign([], this.get('embeds'));\n      cells.forEach(function (cell) {\n        // We keep all element ids after link ids.\n        embeds[cell.isLink() ? 'unshift' : 'push'](cell.id);\n        cell.parent(this$1.id, opt);\n      });\n      this.set('embeds', uniq(embeds), opt);\n      this.stopBatch(batchName);\n    },\n    _unembedCells: function (cells, opt) {\n      var batchName = 'unembed';\n      this.startBatch(batchName);\n      cells.forEach(function (cell) {\n        return cell.unset('parent', opt);\n      });\n      this.set('embeds', without.apply(void 0, [this.get('embeds')].concat(cells.map(function (cell) {\n        return cell.id;\n      }))), opt);\n      this.stopBatch(batchName);\n    },\n    getParentCell: function () {\n      // unlike link.source/target, cell.parent stores id directly as a string\n      var parentId = this.parent();\n      var graph = this.graph;\n      return parentId && graph && graph.getCell(parentId) || null;\n    },\n    // Return an array of ancestor cells.\n    // The array is ordered from the parent of the cell\n    // to the most distant ancestor.\n    getAncestors: function () {\n      var ancestors = [];\n      if (!this.graph) {\n        return ancestors;\n      }\n      var parentCell = this.getParentCell();\n      while (parentCell) {\n        ancestors.push(parentCell);\n        parentCell = parentCell.getParentCell();\n      }\n      return ancestors;\n    },\n    getEmbeddedCells: function (opt) {\n      opt = opt || {};\n\n      // Cell models can only be retrieved when this element is part of a collection.\n      // There is no way this element knows about other cells otherwise.\n      // This also means that calling e.g. `translate()` on an element with embeds before\n      // adding it to a graph does not translate its embeds.\n      if (!this.graph) {\n        return [];\n      }\n      if (opt.deep) {\n        if (opt.breadthFirst) {\n          return this._getEmbeddedCellsBfs(opt.sortSiblings);\n        } else {\n          return this._getEmbeddedCellsDfs(opt.sortSiblings);\n        }\n      }\n      var embeddedIds = this.get('embeds');\n      if (isEmpty(embeddedIds)) {\n        return [];\n      }\n      var cells = embeddedIds.map(this.graph.getCell, this.graph);\n      if (opt.sortSiblings) {\n        cells = sortBy(cells, function (cell) {\n          return cell.z();\n        });\n      }\n      return cells;\n    },\n    _getEmbeddedCellsBfs: function (sortSiblings) {\n      var cells = [];\n      var queue = [];\n      queue.push(this);\n      while (queue.length > 0) {\n        var current = queue.shift();\n        cells.push(current);\n        var embeddedCells = current.getEmbeddedCells({\n          sortSiblings: sortSiblings\n        });\n        queue.push.apply(queue, embeddedCells);\n      }\n      cells.shift();\n      return cells;\n    },\n    _getEmbeddedCellsDfs: function (sortSiblings) {\n      var cells = [];\n      var stack = [];\n      stack.push(this);\n      while (stack.length > 0) {\n        var current = stack.pop();\n        cells.push(current);\n        var embeddedCells = current.getEmbeddedCells({\n          sortSiblings: sortSiblings\n        });\n\n        // When using the stack, cells that are embedded last are processed first.\n        // To maintain the original order, we need to push the cells in reverse order\n        for (var i = embeddedCells.length - 1; i >= 0; --i) {\n          stack.push(embeddedCells[i]);\n        }\n      }\n      cells.shift();\n      return cells;\n    },\n    isEmbeddedIn: function (cell, opt) {\n      var cellId = isString(cell) ? cell : cell.id;\n      var parentId = this.parent();\n      opt = assign({\n        deep: true\n      }, opt);\n\n      // See getEmbeddedCells().\n      if (this.graph && opt.deep) {\n        while (parentId) {\n          if (parentId === cellId) {\n            return true;\n          }\n          parentId = this.graph.getCell(parentId).parent();\n        }\n        return false;\n      } else {\n        // When this cell is not part of a collection check\n        // at least whether it's a direct child of given cell.\n        return parentId === cellId;\n      }\n    },\n    // Whether or not the cell is embedded in any other cell.\n    isEmbedded: function () {\n      return !!this.parent();\n    },\n    // Isolated cloning. Isolated cloning has two versions: shallow and deep (pass `{ deep: true }` in `opt`).\n    // Shallow cloning simply clones the cell and returns a new cell with different ID.\n    // Deep cloning clones the cell and all its embedded cells recursively.\n    clone: function (opt) {\n      opt = opt || {};\n      if (!opt.deep) {\n        // Shallow cloning.\n\n        var clone = Backbone.Model.prototype.clone.apply(this, arguments);\n        // We don't want the clone to have the same ID as the original.\n        clone.set(this.getIdAttribute(), this.generateId());\n        // A shallow cloned element does not carry over the original embeds.\n        clone.unset('embeds');\n        // And can not be embedded in any cell\n        // as the clone is not part of the graph.\n        clone.unset('parent');\n        return clone;\n      } else {\n        // Deep cloning.\n\n        // For a deep clone, simply call `graph.cloneCells()` with the cell and all its embedded cells.\n        return toArray(cloneCells([this].concat(this.getEmbeddedCells({\n          deep: true\n        }))));\n      }\n    },\n    // A convenient way to set nested properties.\n    // This method merges the properties you'd like to set with the ones\n    // stored in the cell and makes sure change events are properly triggered.\n    // You can either set a nested property with one object\n    // or use a property path.\n    // The most simple use case is:\n    // `cell.prop('name/first', 'John')` or\n    // `cell.prop({ name: { first: 'John' } })`.\n    // Nested arrays are supported too:\n    // `cell.prop('series/0/data/0/degree', 50)` or\n    // `cell.prop({ series: [ { data: [ { degree: 50 } ] } ] })`.\n    prop: function (props, value, opt) {\n      var delim = '/';\n      var _isString = isString(props);\n      if (_isString || Array.isArray(props)) {\n        // Get/set an attribute by a special path syntax that delimits\n        // nested objects by the colon character.\n\n        if (arguments.length > 1) {\n          var path;\n          var pathArray;\n          if (_isString) {\n            path = props;\n            pathArray = path.split('/');\n          } else {\n            path = props.join(delim);\n            pathArray = props.slice();\n          }\n          var property = pathArray[0];\n          var pathArrayLength = pathArray.length;\n          var options$1 = opt || {};\n          options$1.propertyPath = path;\n          options$1.propertyValue = value;\n          options$1.propertyPathArray = pathArray;\n          if (!('rewrite' in options$1)) {\n            options$1.rewrite = false;\n          }\n          var update = {};\n          // Initialize the nested object. Sub-objects are either arrays or objects.\n          // An empty array is created if the sub-key is an integer. Otherwise, an empty object is created.\n          // Note that this imposes a limitation on object keys one can use with Inspector.\n          // Pure integer keys will cause issues and are therefore not allowed.\n          var initializer = update;\n          var prevProperty = property;\n          for (var i = 1; i < pathArrayLength; i++) {\n            var pathItem = pathArray[i];\n            var isArrayIndex = Number.isFinite(_isString ? Number(pathItem) : pathItem);\n            initializer = initializer[prevProperty] = isArrayIndex ? [] : {};\n            prevProperty = pathItem;\n          }\n\n          // Fill update with the `value` on `path`.\n          update = setByPath(update, pathArray, value, '/');\n          var baseAttributes = merge({}, this.attributes);\n          // if rewrite mode enabled, we replace value referenced by path with\n          // the new one (we don't merge).\n          options$1.rewrite && unsetByPath(baseAttributes, path, '/');\n\n          // Merge update with the model attributes.\n          var attributes = merge(baseAttributes, update);\n          // Finally, set the property to the updated attributes.\n          return this.set(property, attributes[property], options$1);\n        } else {\n          return getByPath(this.attributes, props, delim);\n        }\n      }\n      var options = value || {};\n      // Note: '' is not the path to the root. It's a path with an empty string i.e. { '': {}}.\n      options.propertyPath = null;\n      options.propertyValue = props;\n      options.propertyPathArray = [];\n      if (!('rewrite' in options)) {\n        options.rewrite = false;\n      }\n\n      // Create a new object containing only the changed attributes.\n      var changedAttributes = {};\n      for (var key in props) {\n        // Merging the values of changed attributes with the current ones.\n        var ref = merge({}, {\n          changedValue: this.attributes[key]\n        }, {\n          changedValue: props[key]\n        });\n        var changedValue = ref.changedValue;\n        changedAttributes[key] = changedValue;\n      }\n      return this.set(changedAttributes, options);\n    },\n    // A convenient way to unset nested properties\n    removeProp: function (path, opt) {\n      opt = opt || {};\n      var pathArray = Array.isArray(path) ? path : path.split('/');\n\n      // Once a property is removed from the `attrs` attribute\n      // the cellView will recognize a `dirty` flag and re-render itself\n      // in order to remove the attribute from SVG element.\n      var property = pathArray[0];\n      if (property === 'attrs') {\n        opt.dirty = true;\n      }\n      if (pathArray.length === 1) {\n        // A top level property\n        return this.unset(path, opt);\n      }\n\n      // A nested property\n      var nestedPath = pathArray.slice(1);\n      var propertyValue = this.get(property);\n      if (propertyValue === undefined || propertyValue === null) {\n        return this;\n      }\n      propertyValue = cloneDeep(propertyValue);\n      unsetByPath(propertyValue, nestedPath, '/');\n      return this.set(property, propertyValue, opt);\n    },\n    // A convenient way to set nested attributes.\n    attr: function (attrs, value, opt) {\n      var args = Array.from(arguments);\n      if (args.length === 0) {\n        return this.get('attrs');\n      }\n      if (Array.isArray(attrs)) {\n        args[0] = ['attrs'].concat(attrs);\n      } else if (isString(attrs)) {\n        // Get/set an attribute by a special path syntax that delimits\n        // nested objects by the colon character.\n        args[0] = 'attrs/' + attrs;\n      } else {\n        args[0] = {\n          'attrs': attrs\n        };\n      }\n      return this.prop.apply(this, args);\n    },\n    // A convenient way to unset nested attributes\n    removeAttr: function (path, opt) {\n      if (Array.isArray(path)) {\n        return this.removeProp(['attrs'].concat(path));\n      }\n      return this.removeProp('attrs/' + path, opt);\n    },\n    transition: function (path, value, opt, delim) {\n      var this$1 = this;\n      delim = delim || '/';\n      var defaults = {\n        duration: 100,\n        delay: 10,\n        timingFunction: timing.linear,\n        valueFunction: interpolate.number\n      };\n      opt = assign(defaults, opt);\n      var firstFrameTime = 0;\n      var interpolatingFunction;\n      var setter = function (runtime) {\n        var id, progress, propertyValue;\n        firstFrameTime = firstFrameTime || runtime;\n        runtime -= firstFrameTime;\n        progress = runtime / opt.duration;\n        if (progress < 1) {\n          this._transitionIds[path] = id = nextFrame(setter);\n        } else {\n          progress = 1;\n          delete this._transitionIds[path];\n        }\n        propertyValue = interpolatingFunction(opt.timingFunction(progress));\n        opt.transitionId = id;\n        this.prop(path, propertyValue, opt);\n        if (!id) {\n          this.trigger('transition:end', this, path);\n        }\n      }.bind(this);\n      var ref = this;\n      var _scheduledTransitionIds = ref._scheduledTransitionIds;\n      var initialId;\n      var initiator = function (callback) {\n        if (_scheduledTransitionIds[path]) {\n          _scheduledTransitionIds[path] = without(_scheduledTransitionIds[path], initialId);\n          if (_scheduledTransitionIds[path].length === 0) {\n            delete _scheduledTransitionIds[path];\n          }\n        }\n        this$1.stopPendingTransitions(path, delim);\n        interpolatingFunction = opt.valueFunction(getByPath(this$1.attributes, path, delim), value);\n        this$1._transitionIds[path] = nextFrame(callback);\n        this$1.trigger('transition:start', this$1, path);\n      };\n      initialId = setTimeout(initiator, opt.delay, setter);\n      _scheduledTransitionIds[path] || (_scheduledTransitionIds[path] = []);\n      _scheduledTransitionIds[path].push(initialId);\n      return initialId;\n    },\n    getTransitions: function () {\n      return union(Object.keys(this._transitionIds), Object.keys(this._scheduledTransitionIds));\n    },\n    stopScheduledTransitions: function (path, delim) {\n      if (delim === void 0) delim = '/';\n      var ref = this;\n      var _scheduledTransitionIds = ref._scheduledTransitionIds;\n      if (_scheduledTransitionIds === void 0) _scheduledTransitionIds = {};\n      var transitions = Object.keys(_scheduledTransitionIds);\n      if (path) {\n        var pathArray = path.split(delim);\n        transitions = transitions.filter(function (key) {\n          return isEqual(pathArray, key.split(delim).slice(0, pathArray.length));\n        });\n      }\n      transitions.forEach(function (key) {\n        var transitionIds = _scheduledTransitionIds[key];\n        // stop the initiator\n        transitionIds.forEach(function (transitionId) {\n          return clearTimeout(transitionId);\n        });\n        delete _scheduledTransitionIds[key];\n        // Note: we could trigger transition:cancel` event here\n      });\n      return this;\n    },\n    stopPendingTransitions: function stopPendingTransitions(path, delim) {\n      var this$1 = this;\n      if (delim === void 0) delim = '/';\n      var ref = this;\n      var _transitionIds = ref._transitionIds;\n      if (_transitionIds === void 0) _transitionIds = {};\n      var transitions = Object.keys(_transitionIds);\n      if (path) {\n        var pathArray = path.split(delim);\n        transitions = transitions.filter(function (key) {\n          return isEqual(pathArray, key.split(delim).slice(0, pathArray.length));\n        });\n      }\n      transitions.forEach(function (key) {\n        var transitionId = _transitionIds[key];\n        // stop the setter\n        cancelFrame(transitionId);\n        delete _transitionIds[key];\n        this$1.trigger('transition:end', this$1, key);\n      });\n    },\n    stopTransitions: function (path, delim) {\n      if (delim === void 0) delim = '/';\n      this.stopScheduledTransitions(path, delim);\n      this.stopPendingTransitions(path, delim);\n      return this;\n    },\n    // A shorcut making it easy to create constructs like the following:\n    // `var el = (new joint.shapes.basic.Rect).addTo(graph)`.\n    addTo: function (graph, opt) {\n      graph.addCell(this, opt);\n      return this;\n    },\n    // A shortcut for an equivalent call: `paper.findViewByModel(cell)`\n    // making it easy to create constructs like the following:\n    // `cell.findView(paper).highlight()`\n    findView: function (paper) {\n      return paper.findViewByModel(this);\n    },\n    isElement: function () {\n      return false;\n    },\n    isLink: function () {\n      return false;\n    },\n    startBatch: function (name, opt) {\n      if (this.graph) {\n        this.graph.startBatch(name, assign({}, opt, {\n          cell: this\n        }));\n      }\n      return this;\n    },\n    stopBatch: function (name, opt) {\n      if (this.graph) {\n        this.graph.stopBatch(name, assign({}, opt, {\n          cell: this\n        }));\n      }\n      return this;\n    },\n    getChangeFlag: function (attributes) {\n      var flag = 0;\n      if (!attributes) {\n        return flag;\n      }\n      for (var key in attributes) {\n        if (!attributes.hasOwnProperty(key) || !this.hasChanged(key)) {\n          continue;\n        }\n        flag |= attributes[key];\n      }\n      return flag;\n    },\n    angle: function () {\n      // To be overridden.\n      return 0;\n    },\n    position: function () {\n      // To be overridden.\n      return new Point(0, 0);\n    },\n    z: function () {\n      return this.get('z') || 0;\n    },\n    getPointFromConnectedLink: function () {\n      // To be overridden\n      return new Point();\n    },\n    getBBox: function () {\n      // To be overridden\n      return new Rect(0, 0, 0, 0);\n    },\n    getPointRotatedAroundCenter: function getPointRotatedAroundCenter(angle, x, y) {\n      var point = new Point(x, y);\n      if (angle) {\n        point.rotate(this.getBBox().center(), angle);\n      }\n      return point;\n    },\n    getAbsolutePointFromRelative: function getAbsolutePointFromRelative(x, y) {\n      // Rotate the position to take the model angle into account\n      return this.getPointRotatedAroundCenter(-this.angle(),\n      // Transform the relative position to absolute\n      this.position().offset(x, y));\n    },\n    getRelativePointFromAbsolute: function getRelativePointFromAbsolute(x, y) {\n      return this\n      // Rotate the coordinates to mitigate the element's rotation.\n      .getPointRotatedAroundCenter(this.angle(), x, y)\n      // Transform the absolute position into relative\n      .difference(this.position());\n    }\n  }, {\n    getAttributeDefinition: function (attrName) {\n      var defNS = this.attributes;\n      var globalDefNS = attributes;\n      return defNS && defNS[attrName] || globalDefNS[attrName];\n    },\n    define: function (type, defaults, protoProps, staticProps) {\n      protoProps = assign({\n        defaults: defaultsDeep({\n          type: type\n        }, defaults, this.prototype.defaults)\n      }, protoProps);\n      var Cell = this.extend(protoProps, staticProps);\n      // es5 backward compatibility\n      /* eslint-disable no-undef */\n      if (typeof joint !== 'undefined' && has$2(joint, 'shapes')) {\n        setByPath(joint.shapes, type, Cell, '.');\n      }\n      /* eslint-enable no-undef */\n      return Cell;\n    }\n  });\n  var wrapWith = function (object, methods, wrapper) {\n    if (isString(wrapper)) {\n      if (!wrappers[wrapper]) {\n        throw new Error('Unknown wrapper: \"' + wrapper + '\"');\n      }\n      wrapper = wrappers[wrapper];\n    }\n    if (!isFunction(wrapper)) {\n      throw new Error('Wrapper must be a function.');\n    }\n    toArray(methods).forEach(function (method) {\n      object[method] = wrapper(object[method]);\n    });\n  };\n  var wrappers = {\n    cells: function (fn) {\n      return function () {\n        var args = Array.from(arguments);\n        var n = args.length;\n        var cells = n > 0 && args[0] || [];\n        var opt = n > 1 && args[n - 1] || {};\n        if (!Array.isArray(cells)) {\n          if (opt instanceof Cell) {\n            cells = args;\n          } else if (cells instanceof Cell) {\n            if (args.length > 1) {\n              args.pop();\n            }\n            cells = args;\n          }\n        }\n        if (opt instanceof Cell) {\n          opt = {};\n        }\n        return fn.call(this, cells, opt);\n      };\n    }\n  };\n  function svg(strings) {\n    var expressions = [],\n      len = arguments.length - 1;\n    while (len-- > 0) expressions[len] = arguments[len + 1];\n    var svgParts = [];\n    strings.forEach(function (part, index) {\n      svgParts.push(part);\n      if (index in expressions) {\n        svgParts.push(expressions[index]);\n      }\n    });\n    var markup = parseFromSVGString(svgParts.join(''));\n    return markup;\n  }\n  function parseFromSVGString(str) {\n    var parser = new DOMParser();\n    var markupString = \"<svg>\" + str.trim() + \"</svg>\";\n    var xmldocument = parser.parseFromString(markupString.replace(/@/g, ''), 'application/xml');\n    if (xmldocument.getElementsByTagName('parsererror')[0]) {\n      throw new Error('Invalid SVG markup');\n    }\n    var document = parser.parseFromString(markupString, 'text/html');\n    var svg = document.querySelector('svg');\n    return build(svg);\n  }\n  function buildNode(node) {\n    var markupNode = {};\n    var tagName = node.tagName;\n    var attributes = node.attributes;\n    var namespaceURI = node.namespaceURI;\n    var style = node.style;\n    var childNodes = node.childNodes;\n    markupNode.namespaceURI = namespaceURI;\n    markupNode.tagName = namespaceURI === V.namespace.xhtml\n    // XHTML documents must use lower case for all HTML element and attribute names.\n    // The tagName property returns upper case value for HTML elements.\n    // e.g. <DIV> vs.<div/>\n    ? tagName.toLowerCase() : tagName;\n    var stylesObject = {};\n    for (var i = style.length; i--;) {\n      var nameString = style[i];\n      stylesObject[nameString] = style.getPropertyValue(nameString);\n    }\n    markupNode.style = stylesObject;\n\n    // selector fallbacks to tagName\n    var selectorAttribute = attributes.getNamedItem('@selector');\n    if (selectorAttribute) {\n      markupNode.selector = selectorAttribute.value;\n      attributes.removeNamedItem('@selector');\n    }\n    var groupSelectorAttribute = attributes.getNamedItem('@group-selector');\n    if (groupSelectorAttribute) {\n      var groupSelectors = groupSelectorAttribute.value.split(',');\n      markupNode.groupSelector = groupSelectors.map(function (s) {\n        return s.trim();\n      });\n      attributes.removeNamedItem('@group-selector');\n    }\n    var className = attributes.getNamedItem('class');\n    if (className) {\n      markupNode.className = className.value;\n    }\n    var children = [];\n    childNodes.forEach(function (node) {\n      switch (node.nodeType) {\n        case Node.TEXT_NODE:\n          {\n            var trimmedText = node.data.replace(/\\s\\s+/g, ' ');\n            if (trimmedText.trim()) {\n              children.push(trimmedText);\n            }\n            break;\n          }\n        case Node.ELEMENT_NODE:\n          {\n            children.push(buildNode(node));\n            break;\n          }\n        default:\n          break;\n      }\n    });\n    if (children.length) {\n      markupNode.children = children;\n    }\n    var nodeAttrs = {};\n    Array.from(attributes).forEach(function (nodeAttribute) {\n      var name = nodeAttribute.name;\n      var value = nodeAttribute.value;\n      nodeAttrs[name] = value;\n    });\n    if (Object.keys(nodeAttrs).length > 0) {\n      markupNode.attributes = nodeAttrs;\n    }\n    return markupNode;\n  }\n  function build(root) {\n    var markup = [];\n    Array.from(root.children).forEach(function (node) {\n      markup.push(buildNode(node));\n    });\n    return markup;\n  }\n  var Positions = {\n    TOP: 'top',\n    RIGHT: 'right',\n    BOTTOM: 'bottom',\n    LEFT: 'left',\n    TOP_LEFT: 'top-left',\n    TOP_RIGHT: 'top-right',\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_RIGHT: 'bottom-right',\n    CENTER: 'center'\n  };\n  function getRectPoint(rect, position) {\n    var r = new Rect(rect);\n    switch (position) {\n      case undefined:\n        throw new Error('Position required');\n\n      // Middle Points\n      case Positions.LEFT:\n      case 'leftMiddle':\n        return r.leftMiddle();\n      case Positions.RIGHT:\n      case 'rightMiddle':\n        return r.rightMiddle();\n      case Positions.TOP:\n      case 'topMiddle':\n        return r.topMiddle();\n      case Positions.BOTTOM:\n      case 'bottomMiddle':\n        return r.bottomMiddle();\n\n      // Corners\n      case Positions.TOP_LEFT:\n      case 'topLeft':\n      case 'origin':\n        return r.topLeft();\n      case Positions.TOP_RIGHT:\n      case 'topRight':\n        return r.topRight();\n      case Positions.BOTTOM_LEFT:\n      case 'bottomLeft':\n        return r.bottomLeft();\n      case Positions.BOTTOM_RIGHT:\n      case 'bottomRight':\n      case 'corner':\n        return r.bottomRight();\n\n      // Center\n      case Positions.CENTER:\n        return r.center();\n\n      // TODO: calc(), percentage etc.\n      default:\n        throw new Error(\"Unknown position: \" + position);\n    }\n  }\n  var index = {\n    getRectPoint: getRectPoint,\n    wrapWith: wrapWith,\n    wrappers: wrappers,\n    addClassNamePrefix: addClassNamePrefix,\n    removeClassNamePrefix: removeClassNamePrefix,\n    parseDOMJSON: parseDOMJSON,\n    hashCode: hashCode,\n    getByPath: getByPath,\n    setByPath: setByPath,\n    unsetByPath: unsetByPath,\n    flattenObject: flattenObject,\n    uuid: uuid,\n    guid: guid,\n    toKebabCase: toKebabCase,\n    normalizeEvent: normalizeEvent,\n    normalizeWheel: normalizeWheel,\n    cap: cap,\n    nextFrame: nextFrame,\n    cancelFrame: cancelFrame,\n    shapePerimeterConnectionPoint: shapePerimeterConnectionPoint,\n    isPercentage: isPercentage,\n    parseCssNumeric: parseCssNumeric,\n    breakText: breakText,\n    sanitizeHTML: sanitizeHTML,\n    downloadBlob: downloadBlob,\n    downloadDataUri: downloadDataUri,\n    dataUriToBlob: dataUriToBlob,\n    imageToDataUri: imageToDataUri,\n    getElementBBox: getElementBBox,\n    sortElements: sortElements,\n    setAttributesBySelector: setAttributesBySelector,\n    normalizeSides: normalizeSides,\n    timing: timing,\n    interpolate: interpolate,\n    filter: filter,\n    format: format,\n    template: template,\n    toggleFullScreen: toggleFullScreen,\n    isBoolean: isBoolean,\n    isObject: isObject$1,\n    isNumber: isNumber,\n    isString: isString,\n    mixin: mixin,\n    deepMixin: deepMixin,\n    supplement: supplement,\n    defaults: defaults,\n    deepSupplement: deepSupplement,\n    defaultsDeep: defaultsDeep,\n    assign: assign,\n    invoke: invoke,\n    invokeProperty: invokeProperty,\n    sortedIndex: sortedIndex,\n    uniq: uniq,\n    clone: clone,\n    cloneDeep: cloneDeep,\n    isEmpty: isEmpty,\n    isEqual: isEqual,\n    isFunction: isFunction,\n    isPlainObject: isPlainObject,\n    toArray: toArray,\n    debounce: debounce,\n    groupBy: groupBy,\n    sortBy: sortBy,\n    flattenDeep: flattenDeep,\n    without: without,\n    difference: difference,\n    intersection: intersection$1,\n    union: union,\n    has: has$2,\n    result: result,\n    omit: omit,\n    pick: pick,\n    bindAll: bindAll,\n    forIn: forIn,\n    camelCase: camelCase,\n    uniqueId: uniqueId,\n    merge: merge,\n    noop: noop,\n    cloneCells: cloneCells,\n    svg: svg\n  };\n  function portTransformAttrs(point, angle, opt) {\n    var trans = point.toJSON();\n    trans.angle = angle || 0;\n    return defaults({}, opt, trans);\n  }\n  function lineLayout(ports, p1, p2, elBBox) {\n    return ports.map(function (port, index, ports) {\n      var p = this.pointAt((index + 0.5) / ports.length);\n      // `dx`,`dy` per port offset option\n      if (port.dx || port.dy) {\n        p.offset(port.dx || 0, port.dy || 0);\n      }\n      return portTransformAttrs(p.round(), 0, argTransform(elBBox, port));\n    }, line(p1, p2));\n  }\n  function ellipseLayout(ports, elBBox, startAngle, stepFn) {\n    var center = elBBox.center();\n    var ratio = elBBox.width / elBBox.height;\n    var p1 = elBBox.topMiddle();\n    var ellipse = Ellipse.fromRect(elBBox);\n    return ports.map(function (port, index, ports) {\n      var angle = startAngle + stepFn(index, ports.length);\n      var p2 = p1.clone().rotate(center, -angle).scale(ratio, 1, center);\n      var theta = port.compensateRotation ? -ellipse.tangentTheta(p2) : 0;\n\n      // `dx`,`dy` per port offset option\n      if (port.dx || port.dy) {\n        p2.offset(port.dx || 0, port.dy || 0);\n      }\n\n      // `dr` delta radius option\n      if (port.dr) {\n        p2.move(center, port.dr);\n      }\n      return portTransformAttrs(p2.round(), theta, argTransform(elBBox, port));\n    });\n  }\n  function argTransform(bbox, args) {\n    var x = args.x;\n    var y = args.y;\n    var angle = args.angle;\n    if (isPercentage(x)) {\n      x = parseFloat(x) / 100 * bbox.width;\n    } else if (isCalcAttribute(x)) {\n      x = Number(evalCalcAttribute(x, bbox));\n    }\n    if (isPercentage(y)) {\n      y = parseFloat(y) / 100 * bbox.height;\n    } else if (isCalcAttribute(y)) {\n      y = Number(evalCalcAttribute(y, bbox));\n    }\n    return {\n      x: x,\n      y: y,\n      angle: angle\n    };\n  }\n\n  // Creates a point stored in arguments\n  function argPoint(bbox, args) {\n    var ref = argTransform(bbox, args);\n    var x = ref.x;\n    var y = ref.y;\n    return new Point(x || 0, y || 0);\n  }\n\n  /**\n   * @param {Array<Object>} ports\n   * @param {g.Rect} elBBox\n   * @param {Object=} opt opt Group options\n   * @returns {Array<g.Point>}\n   */\n  var absolute = function (ports, elBBox) {\n    return ports.map(function (port) {\n      var transformation = argPoint(elBBox, port).round().toJSON();\n      transformation.angle = port.angle || 0;\n      return transformation;\n    });\n  };\n\n  /**\n   * @param {Array<Object>} ports\n   * @param {g.Rect} elBBox\n   * @param {Object=} opt opt Group options\n   * @returns {Array<g.Point>}\n   */\n  var fn = function (ports, elBBox, opt) {\n    return opt.fn(ports, elBBox, opt);\n  };\n\n  /**\n   * @param {Array<Object>} ports\n   * @param {g.Rect} elBBox\n   * @param {Object=} opt opt Group options\n   * @returns {Array<g.Point>}\n   */\n  var line$1 = function (ports, elBBox, opt) {\n    var start = argPoint(elBBox, opt.start || elBBox.origin());\n    var end = argPoint(elBBox, opt.end || elBBox.corner());\n    return lineLayout(ports, start, end, elBBox);\n  };\n\n  /**\n   * @param {Array<Object>} ports\n   * @param {g.Rect} elBBox\n   * @param {Object=} opt opt Group options\n   * @returns {Array<g.Point>}\n   */\n  var left = function (ports, elBBox, opt) {\n    return lineLayout(ports, elBBox.origin(), elBBox.bottomLeft(), elBBox);\n  };\n\n  /**\n   * @param {Array<Object>} ports\n   * @param {g.Rect} elBBox\n   * @param {Object=} opt opt Group options\n   * @returns {Array<g.Point>}\n   */\n  var right = function (ports, elBBox, opt) {\n    return lineLayout(ports, elBBox.topRight(), elBBox.corner(), elBBox);\n  };\n\n  /**\n   * @param {Array<Object>} ports\n   * @param {g.Rect} elBBox\n   * @param {Object=} opt opt Group options\n   * @returns {Array<g.Point>}\n   */\n  var top = function (ports, elBBox, opt) {\n    return lineLayout(ports, elBBox.origin(), elBBox.topRight(), elBBox);\n  };\n\n  /**\n   * @param {Array<Object>} ports\n   * @param {g.Rect} elBBox\n   * @param {Object=} opt opt Group options\n   * @returns {Array<g.Point>}\n   */\n  var bottom = function (ports, elBBox, opt) {\n    return lineLayout(ports, elBBox.bottomLeft(), elBBox.corner(), elBBox);\n  };\n\n  /**\n   * @param {Array<Object>} ports\n   * @param {g.Rect} elBBox\n   * @param {Object=} opt Group options\n   * @returns {Array<g.Point>}\n   */\n  var ellipseSpread = function (ports, elBBox, opt) {\n    var startAngle = opt.startAngle || 0;\n    var stepAngle = opt.step || 360 / ports.length;\n    return ellipseLayout(ports, elBBox, startAngle, function (index) {\n      return index * stepAngle;\n    });\n  };\n\n  /**\n   * @param {Array<Object>} ports\n   * @param {g.Rect} elBBox\n   * @param {Object=} opt Group options\n   * @returns {Array<g.Point>}\n   */\n  var ellipse$1 = function (ports, elBBox, opt) {\n    var startAngle = opt.startAngle || 0;\n    var stepAngle = opt.step || 20;\n    return ellipseLayout(ports, elBBox, startAngle, function (index, count) {\n      return (index + 0.5 - count / 2) * stepAngle;\n    });\n  };\n  var Port = {\n    absolute: absolute,\n    fn: fn,\n    line: line$1,\n    left: left,\n    right: right,\n    top: top,\n    bottom: bottom,\n    ellipseSpread: ellipseSpread,\n    ellipse: ellipse$1\n  };\n  function labelAttributes(opt1, opt2) {\n    // use value from `opt2` if it is missing in `opt1`\n    // use value from this object if it is missing in `opt2` as well\n    return defaultsDeep({}, opt1, opt2, {\n      x: 0,\n      y: 0,\n      angle: 0,\n      attrs: {}\n    });\n  }\n  function getBBoxAngles(elBBox) {\n    var center = elBBox.center();\n    var tl = center.theta(elBBox.origin());\n    var bl = center.theta(elBBox.bottomLeft());\n    var br = center.theta(elBBox.corner());\n    var tr = center.theta(elBBox.topRight());\n    return [tl, tr, br, bl];\n  }\n  function outsideLayout(portPosition, elBBox, autoOrient, opt) {\n    opt = defaults({}, opt, {\n      offset: 15\n    });\n    var angle = elBBox.center().theta(portPosition);\n    var tx, ty, y, textAnchor;\n    var offset = opt.offset;\n    var orientAngle = 0;\n    var ref = getBBoxAngles(elBBox);\n    var topLeftAngle = ref[0];\n    var bottomLeftAngle = ref[1];\n    var bottomRightAngle = ref[2];\n    var topRightAngle = ref[3];\n    if (angle < bottomLeftAngle || angle > bottomRightAngle) {\n      y = '.3em';\n      tx = offset;\n      ty = 0;\n      textAnchor = 'start';\n    } else if (angle < topLeftAngle) {\n      tx = 0;\n      ty = -offset;\n      if (autoOrient) {\n        orientAngle = -90;\n        textAnchor = 'start';\n        y = '.3em';\n      } else {\n        textAnchor = 'middle';\n        y = '0';\n      }\n    } else if (angle < topRightAngle) {\n      y = '.3em';\n      tx = -offset;\n      ty = 0;\n      textAnchor = 'end';\n    } else {\n      tx = 0;\n      ty = offset;\n      if (autoOrient) {\n        orientAngle = 90;\n        textAnchor = 'start';\n        y = '.3em';\n      } else {\n        textAnchor = 'middle';\n        y = '.6em';\n      }\n    }\n    var round = Math.round;\n    return labelAttributes(opt, {\n      x: round(tx),\n      y: round(ty),\n      angle: orientAngle,\n      attrs: {\n        labelText: {\n          y: y,\n          textAnchor: textAnchor\n        }\n      }\n    });\n  }\n  function insideLayout(portPosition, elBBox, autoOrient, opt) {\n    opt = defaults({}, opt, {\n      offset: 15\n    });\n    var angle = elBBox.center().theta(portPosition);\n    var tx, ty, y, textAnchor;\n    var offset = opt.offset;\n    var orientAngle = 0;\n    var ref = getBBoxAngles(elBBox);\n    var topLeftAngle = ref[0];\n    var bottomLeftAngle = ref[1];\n    var bottomRightAngle = ref[2];\n    var topRightAngle = ref[3];\n    if (angle < bottomLeftAngle || angle > bottomRightAngle) {\n      y = '.3em';\n      tx = -offset;\n      ty = 0;\n      textAnchor = 'end';\n    } else if (angle < topLeftAngle) {\n      tx = 0;\n      ty = offset;\n      if (autoOrient) {\n        orientAngle = 90;\n        textAnchor = 'start';\n        y = '.3em';\n      } else {\n        textAnchor = 'middle';\n        y = '.6em';\n      }\n    } else if (angle < topRightAngle) {\n      y = '.3em';\n      tx = offset;\n      ty = 0;\n      textAnchor = 'start';\n    } else {\n      tx = 0;\n      ty = -offset;\n      if (autoOrient) {\n        orientAngle = -90;\n        textAnchor = 'start';\n        y = '.3em';\n      } else {\n        textAnchor = 'middle';\n        y = '0';\n      }\n    }\n    var round = Math.round;\n    return labelAttributes(opt, {\n      x: round(tx),\n      y: round(ty),\n      angle: orientAngle,\n      attrs: {\n        labelText: {\n          y: y,\n          textAnchor: textAnchor\n        }\n      }\n    });\n  }\n  function radialLayout(portCenterOffset, autoOrient, opt) {\n    opt = defaults({}, opt, {\n      offset: 20\n    });\n    var origin = point(0, 0);\n    var angle = -portCenterOffset.theta(origin);\n    var orientAngle = angle;\n    var offset = portCenterOffset.clone().move(origin, opt.offset).difference(portCenterOffset).round();\n    var y = '.3em';\n    var textAnchor;\n    if ((angle + 90) % 180 === 0) {\n      textAnchor = autoOrient ? 'end' : 'middle';\n      if (!autoOrient && angle === -270) {\n        y = '0em';\n      }\n    } else if (angle > -270 && angle < -90) {\n      textAnchor = 'start';\n      orientAngle = angle - 180;\n    } else {\n      textAnchor = 'end';\n    }\n    var round = Math.round;\n    return labelAttributes(opt, {\n      x: round(offset.x),\n      y: round(offset.y),\n      angle: autoOrient ? orientAngle : 0,\n      attrs: {\n        labelText: {\n          y: y,\n          textAnchor: textAnchor\n        }\n      }\n    });\n  }\n  var manual = function (_portPosition, _elBBox, opt) {\n    return labelAttributes(opt);\n  };\n  var left$1 = function (portPosition, elBBox, opt) {\n    return labelAttributes(opt, {\n      x: -15,\n      attrs: {\n        labelText: {\n          y: '.3em',\n          textAnchor: 'end'\n        }\n      }\n    });\n  };\n  var right$1 = function (portPosition, elBBox, opt) {\n    return labelAttributes(opt, {\n      x: 15,\n      attrs: {\n        labelText: {\n          y: '.3em',\n          textAnchor: 'start'\n        }\n      }\n    });\n  };\n  var top$1 = function (portPosition, elBBox, opt) {\n    return labelAttributes(opt, {\n      y: -15,\n      attrs: {\n        labelText: {\n          y: '0',\n          textAnchor: 'middle'\n        }\n      }\n    });\n  };\n  var bottom$1 = function (portPosition, elBBox, opt) {\n    return labelAttributes(opt, {\n      y: 15,\n      attrs: {\n        labelText: {\n          y: '.6em',\n          textAnchor: 'middle'\n        }\n      }\n    });\n  };\n  var outsideOriented = function (portPosition, elBBox, opt) {\n    return outsideLayout(portPosition, elBBox, true, opt);\n  };\n  var outside = function (portPosition, elBBox, opt) {\n    return outsideLayout(portPosition, elBBox, false, opt);\n  };\n  var insideOriented = function (portPosition, elBBox, opt) {\n    return insideLayout(portPosition, elBBox, true, opt);\n  };\n  var inside = function (portPosition, elBBox, opt) {\n    return insideLayout(portPosition, elBBox, false, opt);\n  };\n  var radial = function (portPosition, elBBox, opt) {\n    return radialLayout(portPosition.difference(elBBox.center()), false, opt);\n  };\n  var radialOriented = function (portPosition, elBBox, opt) {\n    return radialLayout(portPosition.difference(elBBox.center()), true, opt);\n  };\n  var PortLabel = {\n    manual: manual,\n    left: left$1,\n    right: right$1,\n    top: top$1,\n    bottom: bottom$1,\n    outsideOriented: outsideOriented,\n    outside: outside,\n    insideOriented: insideOriented,\n    inside: inside,\n    radial: radial,\n    radialOriented: radialOriented\n  };\n\n  // Link base model.\n  // --------------------------\n\n  var Link = Cell.extend({\n    // The default markup for links.\n    markup: ['<path class=\"connection\" stroke=\"black\" d=\"M 0 0 0 0\"/>', '<path class=\"marker-source\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>', '<path class=\"marker-target\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>', '<path class=\"connection-wrap\" d=\"M 0 0 0 0\"/>', '<g class=\"labels\"/>', '<g class=\"marker-vertices\"/>', '<g class=\"marker-arrowheads\"/>', '<g class=\"link-tools\"/>'].join(''),\n    toolMarkup: ['<g class=\"link-tool\">', '<g class=\"tool-remove\" event=\"remove\">', '<circle r=\"11\" />', '<path transform=\"scale(.8) translate(-16, -16)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\" />', '<title>Remove link.</title>', '</g>', '<g class=\"tool-options\" event=\"link:options\">', '<circle r=\"11\" transform=\"translate(25)\"/>', '<path fill=\"white\" transform=\"scale(.55) translate(29, -16)\" d=\"M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z\"/>', '<title>Link options.</title>', '</g>', '</g>'].join(''),\n    doubleToolMarkup: undefined,\n    // The default markup for showing/removing vertices. These elements are the children of the .marker-vertices element (see `this.markup`).\n    // Only .marker-vertex and .marker-vertex-remove element have special meaning. The former is used for\n    // dragging vertices (changing their position). The latter is used for removing vertices.\n    vertexMarkup: ['<g class=\"marker-vertex-group\" transform=\"translate(<%= x %>, <%= y %>)\">', '<circle class=\"marker-vertex\" idx=\"<%= idx %>\" r=\"10\" />', '<path class=\"marker-vertex-remove-area\" idx=\"<%= idx %>\" d=\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\" transform=\"translate(5, -33)\"/>', '<path class=\"marker-vertex-remove\" idx=\"<%= idx %>\" transform=\"scale(.8) translate(9.5, -37)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\">', '<title>Remove vertex.</title>', '</path>', '</g>'].join(''),\n    arrowheadMarkup: ['<g class=\"marker-arrowhead-group marker-arrowhead-group-<%= end %>\">', '<path class=\"marker-arrowhead\" end=\"<%= end %>\" d=\"M 26 0 L 0 13 L 26 26 z\" />', '</g>'].join(''),\n    // may be overwritten by user to change default label (its markup, size, attrs, position)\n    defaultLabel: undefined,\n    // deprecated\n    // may be overwritten by user to change default label markup\n    // lower priority than defaultLabel.markup\n    labelMarkup: undefined,\n    // private\n    _builtins: {\n      defaultLabel: {\n        // builtin default markup:\n        // used if neither defaultLabel.markup\n        // nor label.markup is set\n        markup: [{\n          tagName: 'rect',\n          selector: 'rect' // faster than tagName CSS selector\n        }, {\n          tagName: 'text',\n          selector: 'text' // faster than tagName CSS selector\n        }],\n        // builtin default attributes:\n        // applied only if builtin default markup is used\n        attrs: {\n          text: {\n            fill: '#000000',\n            fontSize: 14,\n            textAnchor: 'middle',\n            yAlignment: 'middle',\n            pointerEvents: 'none'\n          },\n          rect: {\n            ref: 'text',\n            fill: '#ffffff',\n            rx: 3,\n            ry: 3,\n            refWidth: 1,\n            refHeight: 1,\n            refX: 0,\n            refY: 0\n          }\n        },\n        // builtin default position:\n        // used if neither defaultLabel.position\n        // nor label.position is set\n        position: {\n          distance: 0.5\n        }\n      }\n    },\n    defaults: {\n      type: 'link',\n      source: {},\n      target: {}\n    },\n    isLink: function () {\n      return true;\n    },\n    disconnect: function (opt) {\n      return this.set({\n        source: {\n          x: 0,\n          y: 0\n        },\n        target: {\n          x: 0,\n          y: 0\n        }\n      }, opt);\n    },\n    source: function (source, args, opt) {\n      // getter\n      if (source === undefined) {\n        return clone(this.get('source'));\n      }\n\n      // setter\n      var setSource;\n      var setOpt;\n\n      // `source` is a cell\n      // take only its `id` and combine with `args`\n      var isCellProvided = source instanceof Cell;\n      if (isCellProvided) {\n        // three arguments\n        setSource = clone(args) || {};\n        setSource.id = source.id;\n        setOpt = opt;\n        return this.set('source', setSource, setOpt);\n      }\n\n      // `source` is a point-like object\n      // for example, a g.Point\n      // take only its `x` and `y` and combine with `args`\n      var isPointProvided = !isPlainObject(source);\n      if (isPointProvided) {\n        // three arguments\n        setSource = clone(args) || {};\n        setSource.x = source.x;\n        setSource.y = source.y;\n        setOpt = opt;\n        return this.set('source', setSource, setOpt);\n      }\n\n      // `source` is an object\n      // no checking\n      // two arguments\n      setSource = source;\n      setOpt = args;\n      return this.set('source', setSource, setOpt);\n    },\n    target: function (target, args, opt) {\n      // getter\n      if (target === undefined) {\n        return clone(this.get('target'));\n      }\n\n      // setter\n      var setTarget;\n      var setOpt;\n\n      // `target` is a cell\n      // take only its `id` argument and combine with `args`\n      var isCellProvided = target instanceof Cell;\n      if (isCellProvided) {\n        // three arguments\n        setTarget = clone(args) || {};\n        setTarget.id = target.id;\n        setOpt = opt;\n        return this.set('target', setTarget, setOpt);\n      }\n\n      // `target` is a point-like object\n      // for example, a g.Point\n      // take only its `x` and `y` and combine with `args`\n      var isPointProvided = !isPlainObject(target);\n      if (isPointProvided) {\n        // three arguments\n        setTarget = clone(args) || {};\n        setTarget.x = target.x;\n        setTarget.y = target.y;\n        setOpt = opt;\n        return this.set('target', setTarget, setOpt);\n      }\n\n      // `target` is an object\n      // no checking\n      // two arguments\n      setTarget = target;\n      setOpt = args;\n      return this.set('target', setTarget, setOpt);\n    },\n    router: function (name, args, opt) {\n      // getter\n      if (name === undefined) {\n        var router = this.get('router');\n        if (!router) {\n          if (this.get('manhattan')) {\n            return {\n              name: 'orthogonal'\n            };\n          } // backwards compatibility\n          return null;\n        }\n        if (typeof router === 'object') {\n          return clone(router);\n        }\n        return router; // e.g. a function\n      }\n\n      // setter\n      var isRouterProvided = typeof name === 'object' || typeof name === 'function';\n      var localRouter = isRouterProvided ? name : {\n        name: name,\n        args: args\n      };\n      var localOpt = isRouterProvided ? args : opt;\n      return this.set('router', localRouter, localOpt);\n    },\n    connector: function (name, args, opt) {\n      // getter\n      if (name === undefined) {\n        var connector = this.get('connector');\n        if (!connector) {\n          if (this.get('smooth')) {\n            return {\n              name: 'smooth'\n            };\n          } // backwards compatibility\n          return null;\n        }\n        if (typeof connector === 'object') {\n          return clone(connector);\n        }\n        return connector; // e.g. a function\n      }\n\n      // setter\n      var isConnectorProvided = typeof name === 'object' || typeof name === 'function';\n      var localConnector = isConnectorProvided ? name : {\n        name: name,\n        args: args\n      };\n      var localOpt = isConnectorProvided ? args : opt;\n      return this.set('connector', localConnector, localOpt);\n    },\n    // Labels API\n\n    // A convenient way to set labels. Currently set values will be mixined with `value` if used as a setter.\n    label: function (idx, label, opt) {\n      var labels = this.labels();\n      idx = isFinite(idx) && idx !== null ? idx | 0 : 0;\n      if (idx < 0) {\n        idx = labels.length + idx;\n      }\n\n      // getter\n      if (arguments.length <= 1) {\n        return this.prop(['labels', idx]);\n      }\n      // setter\n      return this.prop(['labels', idx], label, opt);\n    },\n    labels: function (labels, opt) {\n      // getter\n      if (arguments.length === 0) {\n        labels = this.get('labels');\n        if (!Array.isArray(labels)) {\n          return [];\n        }\n        return labels.slice();\n      }\n      // setter\n      if (!Array.isArray(labels)) {\n        labels = [];\n      }\n      return this.set('labels', labels, opt);\n    },\n    hasLabels: function () {\n      var ref = this.attributes;\n      var labels = ref.labels;\n      return Array.isArray(labels) && labels.length > 0;\n    },\n    insertLabel: function (idx, label, opt) {\n      if (!label) {\n        throw new Error('dia.Link: no label provided');\n      }\n      var labels = this.labels();\n      var n = labels.length;\n      idx = isFinite(idx) && idx !== null ? idx | 0 : n;\n      if (idx < 0) {\n        idx = n + idx + 1;\n      }\n      labels.splice(idx, 0, label);\n      return this.labels(labels, opt);\n    },\n    // convenience function\n    // add label to end of labels array\n    appendLabel: function (label, opt) {\n      return this.insertLabel(-1, label, opt);\n    },\n    removeLabel: function (idx, opt) {\n      var labels = this.labels();\n      idx = isFinite(idx) && idx !== null ? idx | 0 : -1;\n      labels.splice(idx, 1);\n      return this.labels(labels, opt);\n    },\n    // Vertices API\n\n    vertex: function (idx, vertex, opt) {\n      var vertices = this.vertices();\n      idx = isFinite(idx) && idx !== null ? idx | 0 : 0;\n      if (idx < 0) {\n        idx = vertices.length + idx;\n      }\n\n      // getter\n      if (arguments.length <= 1) {\n        return this.prop(['vertices', idx]);\n      }\n\n      // setter\n      var setVertex = this._normalizeVertex(vertex);\n      return this.prop(['vertices', idx], setVertex, opt);\n    },\n    vertices: function (vertices, opt) {\n      // getter\n      if (arguments.length === 0) {\n        vertices = this.get('vertices');\n        if (!Array.isArray(vertices)) {\n          return [];\n        }\n        return vertices.slice();\n      }\n\n      // setter\n      if (!Array.isArray(vertices)) {\n        vertices = [];\n      }\n      var setVertices = [];\n      for (var i = 0; i < vertices.length; i++) {\n        var vertex = vertices[i];\n        var setVertex = this._normalizeVertex(vertex);\n        setVertices.push(setVertex);\n      }\n      return this.set('vertices', setVertices, opt);\n    },\n    insertVertex: function (idx, vertex, opt) {\n      if (!vertex) {\n        throw new Error('dia.Link: no vertex provided');\n      }\n      var vertices = this.vertices();\n      var n = vertices.length;\n      idx = isFinite(idx) && idx !== null ? idx | 0 : n;\n      if (idx < 0) {\n        idx = n + idx + 1;\n      }\n      var setVertex = this._normalizeVertex(vertex);\n      vertices.splice(idx, 0, setVertex);\n      return this.vertices(vertices, opt);\n    },\n    removeVertex: function (idx, opt) {\n      var vertices = this.vertices();\n      idx = isFinite(idx) && idx !== null ? idx | 0 : -1;\n      vertices.splice(idx, 1);\n      return this.vertices(vertices, opt);\n    },\n    _normalizeVertex: function (vertex) {\n      // is vertex a point-like object?\n      // for example, a g.Point\n      var isPointProvided = !isPlainObject(vertex);\n      if (isPointProvided) {\n        return {\n          x: vertex.x,\n          y: vertex.y\n        };\n      }\n\n      // else: return vertex unchanged\n      return vertex;\n    },\n    // Transformations\n\n    translate: function (tx, ty, opt) {\n      // enrich the option object\n      opt = opt || {};\n      opt.translateBy = opt.translateBy || this.id;\n      opt.tx = tx;\n      opt.ty = ty;\n      return this.applyToPoints(function (p) {\n        return {\n          x: (p.x || 0) + tx,\n          y: (p.y || 0) + ty\n        };\n      }, opt);\n    },\n    scale: function (sx, sy, origin, opt) {\n      return this.applyToPoints(function (p) {\n        return Point(p).scale(sx, sy, origin).toJSON();\n      }, opt);\n    },\n    applyToPoints: function (fn, opt) {\n      if (!isFunction(fn)) {\n        throw new TypeError('dia.Link: applyToPoints expects its first parameter to be a function.');\n      }\n      var attrs = {};\n      var ref = this.attributes;\n      var source = ref.source;\n      var target = ref.target;\n      if (!source.id) {\n        attrs.source = fn(source);\n      }\n      if (!target.id) {\n        attrs.target = fn(target);\n      }\n      var vertices = this.vertices();\n      if (vertices.length > 0) {\n        attrs.vertices = vertices.map(fn);\n      }\n      return this.set(attrs, opt);\n    },\n    getSourcePoint: function () {\n      var sourceCell = this.getSourceCell();\n      if (!sourceCell) {\n        return new Point(this.source());\n      }\n      return sourceCell.getPointFromConnectedLink(this, 'source');\n    },\n    getTargetPoint: function () {\n      var targetCell = this.getTargetCell();\n      if (!targetCell) {\n        return new Point(this.target());\n      }\n      return targetCell.getPointFromConnectedLink(this, 'target');\n    },\n    getPointFromConnectedLink: function /* link, endType */\n    () {\n      return this.getPolyline().pointAt(0.5);\n    },\n    getPolyline: function () {\n      var points = [this.getSourcePoint()].concat(this.vertices().map(Point), [this.getTargetPoint()]);\n      return new Polyline(points);\n    },\n    getBBox: function () {\n      return this.getPolyline().bbox();\n    },\n    reparent: function (opt) {\n      var newParent;\n      if (this.graph) {\n        var source = this.getSourceElement();\n        var target = this.getTargetElement();\n        var prevParent = this.getParentCell();\n        if (source && target) {\n          if (source === target || source.isEmbeddedIn(target)) {\n            newParent = target;\n          } else if (target.isEmbeddedIn(source)) {\n            newParent = source;\n          } else {\n            newParent = this.graph.getCommonAncestor(source, target);\n          }\n        }\n        if (prevParent && (!newParent || newParent.id !== prevParent.id)) {\n          // Unembed the link if source and target has no common ancestor\n          // or common ancestor changed\n          prevParent.unembed(this, opt);\n        }\n        if (newParent) {\n          newParent.embed(this, opt);\n        }\n      }\n      return newParent;\n    },\n    hasLoop: function (opt) {\n      opt = opt || {};\n      var ref = this.attributes;\n      var source = ref.source;\n      var target = ref.target;\n      var sourceId = source.id;\n      var targetId = target.id;\n      if (!sourceId || !targetId) {\n        // Link \"pinned\" to the paper does not have a loop.\n        return false;\n      }\n      var loop = sourceId === targetId;\n\n      // Note that there in the deep mode a link can have a loop,\n      // even if it connects only a parent and its embed.\n      // A loop \"target equals source\" is valid in both shallow and deep mode.\n      if (!loop && opt.deep && this.graph) {\n        var sourceElement = this.getSourceCell();\n        var targetElement = this.getTargetCell();\n        loop = sourceElement.isEmbeddedIn(targetElement) || targetElement.isEmbeddedIn(sourceElement);\n      }\n      return loop;\n    },\n    // unlike source(), this method returns null if source is a point\n    getSourceCell: function () {\n      var ref = this;\n      var graph = ref.graph;\n      var attributes = ref.attributes;\n      var source = attributes.source;\n      return source && source.id && graph && graph.getCell(source.id) || null;\n    },\n    getSourceElement: function () {\n      var cell = this;\n      var visited = {};\n      do {\n        if (visited[cell.id]) {\n          return null;\n        }\n        visited[cell.id] = true;\n        cell = cell.getSourceCell();\n      } while (cell && cell.isLink());\n      return cell;\n    },\n    // unlike target(), this method returns null if target is a point\n    getTargetCell: function () {\n      var ref = this;\n      var graph = ref.graph;\n      var attributes = ref.attributes;\n      var target = attributes.target;\n      return target && target.id && graph && graph.getCell(target.id) || null;\n    },\n    getTargetElement: function () {\n      var cell = this;\n      var visited = {};\n      do {\n        if (visited[cell.id]) {\n          return null;\n        }\n        visited[cell.id] = true;\n        cell = cell.getTargetCell();\n      } while (cell && cell.isLink());\n      return cell;\n    },\n    // Returns the common ancestor for the source element,\n    // target element and the link itself.\n    getRelationshipAncestor: function () {\n      var connectionAncestor;\n      if (this.graph) {\n        var cells = [this, this.getSourceElement(),\n        // null if source is a point\n        this.getTargetElement() // null if target is a point\n        ].filter(function (item) {\n          return !!item;\n        });\n        connectionAncestor = this.graph.getCommonAncestor.apply(this.graph, cells);\n      }\n      return connectionAncestor || null;\n    },\n    // Is source, target and the link itself embedded in a given cell?\n    isRelationshipEmbeddedIn: function (cell) {\n      var cellId = isString(cell) || isNumber(cell) ? cell : cell.id;\n      var ancestor = this.getRelationshipAncestor();\n      return !!ancestor && (ancestor.id === cellId || ancestor.isEmbeddedIn(cellId));\n    },\n    // Get resolved default label.\n    _getDefaultLabel: function () {\n      var defaultLabel = this.get('defaultLabel') || this.defaultLabel || {};\n      var label = {};\n      label.markup = defaultLabel.markup || this.get('labelMarkup') || this.labelMarkup;\n      label.position = defaultLabel.position;\n      label.attrs = defaultLabel.attrs;\n      label.size = defaultLabel.size;\n      return label;\n    }\n  }, {\n    endsEqual: function (a, b) {\n      var portsEqual = a.port === b.port || !a.port && !b.port;\n      return a.id === b.id && portsEqual;\n    }\n  });\n  var PortData = function (data) {\n    var clonedData = cloneDeep(data) || {};\n    this.ports = [];\n    this.groups = {};\n    this.portLayoutNamespace = Port;\n    this.portLabelLayoutNamespace = PortLabel;\n    this._init(clonedData);\n  };\n  PortData.prototype = {\n    getPorts: function () {\n      return this.ports;\n    },\n    getGroup: function (name) {\n      return this.groups[name] || {};\n    },\n    getPortsByGroup: function (groupName) {\n      return this.ports.filter(function (port) {\n        return port.group === groupName;\n      });\n    },\n    getGroupPortsMetrics: function (groupName, elBBox) {\n      var group = this.getGroup(groupName);\n      var ports = this.getPortsByGroup(groupName);\n      var groupPosition = group.position || {};\n      var groupPositionName = groupPosition.name;\n      var namespace = this.portLayoutNamespace;\n      if (!namespace[groupPositionName]) {\n        groupPositionName = 'left';\n      }\n      var groupArgs = groupPosition.args || {};\n      var portsArgs = ports.map(function (port) {\n        return port && port.position && port.position.args;\n      });\n      var groupPortTransformations = namespace[groupPositionName](portsArgs, elBBox, groupArgs);\n      var accumulator = {\n        ports: ports,\n        result: []\n      };\n      toArray(groupPortTransformations).reduce(function (res, portTransformation, index) {\n        var port = res.ports[index];\n        res.result.push({\n          portId: port.id,\n          portTransformation: portTransformation,\n          labelTransformation: this._getPortLabelLayout(port, Point(portTransformation), elBBox),\n          portAttrs: port.attrs,\n          portSize: port.size,\n          labelSize: port.label.size\n        });\n        return res;\n      }.bind(this), accumulator);\n      return accumulator.result;\n    },\n    _getPortLabelLayout: function (port, portPosition, elBBox) {\n      var namespace = this.portLabelLayoutNamespace;\n      var labelPosition = port.label.position.name || 'left';\n      if (namespace[labelPosition]) {\n        return namespace[labelPosition](portPosition, elBBox, port.label.position.args);\n      }\n      return null;\n    },\n    _init: function (data) {\n      // prepare groups\n      if (isObject$1(data.groups)) {\n        var groups = Object.keys(data.groups);\n        for (var i = 0, n = groups.length; i < n; i++) {\n          var key = groups[i];\n          this.groups[key] = this._evaluateGroup(data.groups[key]);\n        }\n      }\n\n      // prepare ports\n      var ports = toArray(data.items);\n      for (var j = 0, m = ports.length; j < m; j++) {\n        this.ports.push(this._evaluatePort(ports[j]));\n      }\n    },\n    _evaluateGroup: function (group) {\n      return merge(group, {\n        position: this._getPosition(group.position, true),\n        label: this._getLabel(group, true)\n      });\n    },\n    _evaluatePort: function (port) {\n      var evaluated = assign({}, port);\n      var group = this.getGroup(port.group);\n      evaluated.markup = evaluated.markup || group.markup;\n      evaluated.attrs = merge({}, group.attrs, evaluated.attrs);\n      evaluated.position = this._createPositionNode(group, evaluated);\n      evaluated.label = merge({}, group.label, this._getLabel(evaluated));\n      evaluated.z = this._getZIndex(group, evaluated);\n      evaluated.size = assign({}, group.size, evaluated.size);\n      return evaluated;\n    },\n    _getZIndex: function (group, port) {\n      if (isNumber(port.z)) {\n        return port.z;\n      }\n      if (isNumber(group.z) || group.z === 'auto') {\n        return group.z;\n      }\n      return 'auto';\n    },\n    _createPositionNode: function (group, port) {\n      return merge({\n        name: 'left',\n        args: {}\n      }, group.position, {\n        args: port.args\n      });\n    },\n    _getPosition: function (position, setDefault) {\n      var args = {};\n      var positionName;\n      if (isFunction(position)) {\n        positionName = 'fn';\n        args.fn = position;\n      } else if (isString(position)) {\n        positionName = position;\n      } else if (position === undefined) {\n        positionName = setDefault ? 'left' : null;\n      } else if (Array.isArray(position)) {\n        positionName = 'absolute';\n        args.x = position[0];\n        args.y = position[1];\n      } else if (isObject$1(position)) {\n        positionName = position.name;\n        assign(args, position.args);\n      }\n      var result = {\n        args: args\n      };\n      if (positionName) {\n        result.name = positionName;\n      }\n      return result;\n    },\n    _getLabel: function (item, setDefaults) {\n      var label = item.label || {};\n      var ret = label;\n      ret.position = this._getPosition(label.position, setDefaults);\n      return ret;\n    }\n  };\n  var elementPortPrototype = {\n    _initializePorts: function () {\n      this._createPortData();\n      this.on('change:ports', function () {\n        this._processRemovedPort();\n        this._createPortData();\n      }, this);\n    },\n    /**\n     * remove links tied wiht just removed element\n     * @private\n     */\n    _processRemovedPort: function () {\n      var current = this.get('ports') || {};\n      var currentItemsMap = {};\n      toArray(current.items).forEach(function (item) {\n        currentItemsMap[item.id] = true;\n      });\n      var previous = this.previous('ports') || {};\n      var removed = {};\n      toArray(previous.items).forEach(function (item) {\n        if (!currentItemsMap[item.id]) {\n          removed[item.id] = true;\n        }\n      });\n      var graph = this.graph;\n      if (graph && !isEmpty(removed)) {\n        var inboundLinks = graph.getConnectedLinks(this, {\n          inbound: true\n        });\n        inboundLinks.forEach(function (link) {\n          if (removed[link.get('target').port]) {\n            link.remove();\n          }\n        });\n        var outboundLinks = graph.getConnectedLinks(this, {\n          outbound: true\n        });\n        outboundLinks.forEach(function (link) {\n          if (removed[link.get('source').port]) {\n            link.remove();\n          }\n        });\n      }\n    },\n    /**\n     * @returns {boolean}\n     */\n    hasPorts: function () {\n      var ports = this.prop('ports/items');\n      return Array.isArray(ports) && ports.length > 0;\n    },\n    /**\n     * @param {string} id\n     * @returns {boolean}\n     */\n    hasPort: function (id) {\n      return this.getPortIndex(id) !== -1;\n    },\n    /**\n     * @returns {Array<object>}\n     */\n    getPorts: function () {\n      return cloneDeep(this.prop('ports/items')) || [];\n    },\n    /**\n     * @returns {Array<object>}\n     */\n    getGroupPorts: function (groupName) {\n      var groupPorts = toArray(this.prop(['ports', 'items'])).filter(function (port) {\n        return port.group === groupName;\n      });\n      return cloneDeep(groupPorts);\n    },\n    /**\n     * @param {string} id\n     * @returns {object}\n     */\n    getPort: function (id) {\n      return cloneDeep(toArray(this.prop('ports/items')).find(function (port) {\n        return port.id && port.id === id;\n      }));\n    },\n    /**\n     * @param {string} groupName\n     * @returns {Object<portId, {x: number, y: number, angle: number}>}\n     */\n    getPortsPositions: function (groupName) {\n      var portsMetrics = this._portSettingsData.getGroupPortsMetrics(groupName, Rect(this.size()));\n      return portsMetrics.reduce(function (positions, metrics) {\n        var transformation = metrics.portTransformation;\n        positions[metrics.portId] = {\n          x: transformation.x,\n          y: transformation.y,\n          angle: transformation.angle\n        };\n        return positions;\n      }, {});\n    },\n    /**\n     * @param {string|Port} port port id or port\n     * @returns {number} port index\n     */\n    getPortIndex: function (port) {\n      var id = isObject$1(port) ? port.id : port;\n      if (!this._isValidPortId(id)) {\n        return -1;\n      }\n      return toArray(this.prop('ports/items')).findIndex(function (item) {\n        return item.id === id;\n      });\n    },\n    /**\n     * @param {object} port\n     * @param {object} [opt]\n     * @returns {joint.dia.Element}\n     */\n    addPort: function (port, opt) {\n      if (!isObject$1(port) || Array.isArray(port)) {\n        throw new Error('Element: addPort requires an object.');\n      }\n      var ports = assign([], this.prop('ports/items'));\n      ports.push(port);\n      this.prop('ports/items', ports, opt);\n      return this;\n    },\n    /**\n     * @param {string|Port|number} before\n     * @param {object} port\n     * @param {object} [opt]\n     * @returns {joint.dia.Element}\n     */\n    insertPort: function (before, port, opt) {\n      var index$1 = typeof before === 'number' ? before : this.getPortIndex(before);\n      if (!isObject$1(port) || Array.isArray(port)) {\n        throw new Error('dia.Element: insertPort requires an object.');\n      }\n      var ports = assign([], this.prop('ports/items'));\n      ports.splice(index$1, 0, port);\n      this.prop('ports/items', ports, opt);\n      return this;\n    },\n    /**\n     * @param {string} portId\n     * @param {string|object=} path\n     * @param {*=} value\n     * @param {object=} opt\n     * @returns {joint.dia.Element}\n     */\n    portProp: function (portId, path, value, opt) {\n      var index$1 = this.getPortIndex(portId);\n      if (index$1 === -1) {\n        throw new Error('Element: unable to find port with id ' + portId);\n      }\n      var args = Array.prototype.slice.call(arguments, 1);\n      if (Array.isArray(path)) {\n        args[0] = ['ports', 'items', index$1].concat(path);\n      } else if (isString(path)) {\n        // Get/set an attribute by a special path syntax that delimits\n        // nested objects by the colon character.\n        args[0] = ['ports/items/', index$1, '/', path].join('');\n      } else {\n        args = ['ports/items/' + index$1];\n        if (isPlainObject(path)) {\n          args.push(path);\n          args.push(value);\n        }\n      }\n      return this.prop.apply(this, args);\n    },\n    _validatePorts: function () {\n      var portsAttr = this.get('ports') || {};\n      var errorMessages = [];\n      portsAttr = portsAttr || {};\n      var ports = toArray(portsAttr.items);\n      ports.forEach(function (p) {\n        if (typeof p !== 'object') {\n          errorMessages.push('Element: invalid port ', p);\n        }\n        if (!this._isValidPortId(p.id)) {\n          p.id = this.generatePortId();\n        }\n      }, this);\n      if (uniq(ports, 'id').length !== ports.length) {\n        errorMessages.push('Element: found id duplicities in ports.');\n      }\n      return errorMessages;\n    },\n    generatePortId: function () {\n      return this.generateId();\n    },\n    /**\n     * @param {string} id port id\n     * @returns {boolean}\n     * @private\n     */\n    _isValidPortId: function (id) {\n      return id !== null && id !== undefined && !isObject$1(id);\n    },\n    addPorts: function (ports, opt) {\n      if (ports.length) {\n        this.prop('ports/items', assign([], this.prop('ports/items')).concat(ports), opt);\n      }\n      return this;\n    },\n    removePort: function (port, opt) {\n      var options = opt || {};\n      var index$1 = this.getPortIndex(port);\n      if (index$1 !== -1) {\n        var ports = assign([], this.prop(['ports', 'items']));\n        ports.splice(index$1, 1);\n        options.rewrite = true;\n        this.startBatch('port-remove');\n        this.prop(['ports', 'items'], ports, options);\n        this.stopBatch('port-remove');\n      }\n      return this;\n    },\n    removePorts: function (portsForRemoval, opt) {\n      var options, newPorts;\n      if (Array.isArray(portsForRemoval)) {\n        options = opt || {};\n        if (portsForRemoval.length === 0) {\n          return this.this;\n        }\n        var currentPorts = assign([], this.prop(['ports', 'items']));\n        newPorts = currentPorts.filter(function (cp) {\n          return !portsForRemoval.some(function (rp) {\n            var rpId = isObject$1(rp) ? rp.id : rp;\n            return cp.id === rpId;\n          });\n        });\n      } else {\n        options = portsForRemoval || {};\n        newPorts = [];\n      }\n      this.startBatch('port-remove');\n      options.rewrite = true;\n      this.prop(['ports', 'items'], newPorts, options);\n      this.stopBatch('port-remove');\n      return this;\n    },\n    /**\n     * @private\n     */\n    _createPortData: function () {\n      var err = this._validatePorts();\n      if (err.length > 0) {\n        this.set('ports', this.previous('ports'));\n        throw new Error(err.join(' '));\n      }\n      var prevPortData;\n      if (this._portSettingsData) {\n        prevPortData = this._portSettingsData.getPorts();\n      }\n      this._portSettingsData = new PortData(this.get('ports'));\n      var curPortData = this._portSettingsData.getPorts();\n      if (prevPortData) {\n        var added = curPortData.filter(function (item) {\n          if (!prevPortData.find(function (prevPort) {\n            return prevPort.id === item.id;\n          })) {\n            return item;\n          }\n        });\n        var removed = prevPortData.filter(function (item) {\n          if (!curPortData.find(function (curPort) {\n            return curPort.id === item.id;\n          })) {\n            return item;\n          }\n        });\n        if (removed.length > 0) {\n          this.trigger('ports:remove', this, removed);\n        }\n        if (added.length > 0) {\n          this.trigger('ports:add', this, added);\n        }\n      }\n    }\n  };\n  var elementViewPortPrototype = {\n    portContainerMarkup: 'g',\n    portMarkup: [{\n      tagName: 'circle',\n      selector: 'circle',\n      attributes: {\n        'r': 10,\n        'fill': '#FFFFFF',\n        'stroke': '#000000'\n      }\n    }],\n    portLabelMarkup: [{\n      tagName: 'text',\n      selector: 'text',\n      attributes: {\n        'fill': '#000000'\n      }\n    }],\n    /** @type {Object<string, {portElement: Vectorizer, portLabelElement: Vectorizer}>} */\n    _portElementsCache: null,\n    /**\n     * @private\n     */\n    _initializePorts: function () {\n      this._cleanPortsCache();\n    },\n    /**\n     * @typedef {Object} Port\n     *\n     * @property {string} id\n     * @property {Object} position\n     * @property {Object} label\n     * @property {Object} attrs\n     * @property {string} markup\n     * @property {string} group\n     */\n\n    /**\n     * @private\n     */\n    _refreshPorts: function () {\n      this._removePorts();\n      this._cleanPortsCache();\n      this._renderPorts();\n    },\n    _cleanPortsCache: function () {\n      this._portElementsCache = {};\n    },\n    /**\n     * @private\n     */\n    _renderPorts: function () {\n      // references to rendered elements without z-index\n      var elementReferences = [];\n      var elem = this._getContainerElement();\n      for (var i = 0, count = elem.node.childNodes.length; i < count; i++) {\n        elementReferences.push(elem.node.childNodes[i]);\n      }\n      var portsGropsByZ = groupBy(this.model._portSettingsData.getPorts(), 'z');\n      var withoutZKey = 'auto';\n\n      // render non-z first\n      toArray(portsGropsByZ[withoutZKey]).forEach(function (port) {\n        var portElement = this._getPortElement(port);\n        elem.append(portElement);\n        elementReferences.push(portElement);\n      }, this);\n      var groupNames = Object.keys(portsGropsByZ);\n      for (var k = 0; k < groupNames.length; k++) {\n        var groupName = groupNames[k];\n        if (groupName !== withoutZKey) {\n          var z = parseInt(groupName, 10);\n          this._appendPorts(portsGropsByZ[groupName], z, elementReferences);\n        }\n      }\n      this._updatePorts();\n    },\n    /**\n     * @returns {V}\n     * @private\n     */\n    _getContainerElement: function () {\n      return this.rotatableNode || this.vel;\n    },\n    /**\n     * @param {Array<Port>}ports\n     * @param {number} z\n     * @param refs\n     * @private\n     */\n    _appendPorts: function (ports, z, refs) {\n      var containerElement = this._getContainerElement();\n      var portElements = toArray(ports).map(this._getPortElement, this);\n      if (refs[z] || z < 0) {\n        V(refs[Math.max(z, 0)]).before(portElements);\n      } else {\n        containerElement.append(portElements);\n      }\n    },\n    /**\n     * Try to get element from cache,\n     * @param port\n     * @returns {*}\n     * @private\n     */\n    _getPortElement: function (port) {\n      if (this._portElementsCache[port.id]) {\n        return this._portElementsCache[port.id].portElement;\n      }\n      return this._createPortElement(port);\n    },\n    findPortNode: function (portId, selector) {\n      var portCache = this._portElementsCache[portId];\n      if (!portCache) {\n        return null;\n      }\n      if (!selector) {\n        return portCache.portContentElement.node;\n      }\n      var portRoot = portCache.portElement.node;\n      var portSelectors = portCache.portSelectors;\n      var ref = this.findBySelector(selector, portRoot, portSelectors);\n      var node = ref[0];\n      if (node === void 0) node = null;\n      return node;\n    },\n    /**\n     * @private\n     */\n    _updatePorts: function () {\n      // layout ports without group\n      this._updatePortGroup(undefined);\n      // layout ports with explicit group\n      var groupsNames = Object.keys(this.model._portSettingsData.groups);\n      groupsNames.forEach(this._updatePortGroup, this);\n    },\n    /**\n     * @private\n     */\n    _removePorts: function () {\n      invoke(this._portElementsCache, 'portElement.remove');\n    },\n    /**\n     * @param {Port} port\n     * @returns {V}\n     * @private\n     */\n    _createPortElement: function (port) {\n      var portElement;\n      var labelElement;\n      var labelSelectors;\n      var portSelectors;\n      var portContainerElement = V(this.portContainerMarkup).addClass('joint-port');\n      var portMarkup = this._getPortMarkup(port);\n      if (Array.isArray(portMarkup)) {\n        var portDoc = this.parseDOMJSON(portMarkup, portContainerElement.node);\n        var portFragment = portDoc.fragment;\n        if (portFragment.childNodes.length > 1) {\n          portElement = V('g').append(portFragment);\n        } else {\n          portElement = V(portFragment.firstChild);\n        }\n        portSelectors = portDoc.selectors;\n      } else {\n        portElement = V(portMarkup);\n        if (Array.isArray(portElement)) {\n          portElement = V('g').append(portElement);\n        }\n      }\n      if (!portElement) {\n        throw new Error('ElementView: Invalid port markup.');\n      }\n      portElement.attr({\n        'port': port.id,\n        'port-group': port.group\n      });\n      var labelMarkupDef = this._getPortLabelMarkup(port.label);\n      if (Array.isArray(labelMarkupDef)) {\n        // JSON Markup\n        var ref = this.parseDOMJSON(labelMarkupDef, portContainerElement.node);\n        var fragment = ref.fragment;\n        var selectors = ref.selectors;\n        var childCount = fragment.childNodes.length;\n        if (childCount > 0) {\n          labelSelectors = selectors;\n          labelElement = childCount === 1 ? V(fragment.firstChild) : V('g').append(fragment);\n        }\n      } else {\n        // String Markup\n        labelElement = V(labelMarkupDef);\n        if (Array.isArray(labelElement)) {\n          labelElement = V('g').append(labelElement);\n        }\n      }\n      var portContainerSelectors;\n      if (portSelectors && labelSelectors) {\n        for (var key in labelSelectors) {\n          if (portSelectors[key] && key !== this.selector) {\n            throw new Error('ElementView: selectors within port must be unique.');\n          }\n        }\n        portContainerSelectors = assign({}, portSelectors, labelSelectors);\n      } else {\n        portContainerSelectors = portSelectors || labelSelectors || {};\n      }\n\n      // The `portRootSelector` points to the root SVGNode of the port.\n      // Either the implicit wrapping group <g/> in case the port consist of multiple SVGNodes.\n      // Or the single SVGNode of the port.\n      var portRootSelector = 'portRoot';\n      // The `labelRootSelector` points to the root SVGNode of the label.\n      var labelRootSelector = 'labelRoot';\n      // The `labelTextSelector` points to all text SVGNodes of the label.\n      var labelTextSelector = 'labelText';\n      if (!(portRootSelector in portContainerSelectors)) {\n        portContainerSelectors[portRootSelector] = portElement.node;\n      }\n      if (labelElement) {\n        var labelNode = labelElement.node;\n        if (!(labelRootSelector in portContainerSelectors)) {\n          portContainerSelectors[labelRootSelector] = labelNode;\n        }\n        if (!(labelTextSelector in portContainerSelectors)) {\n          // If the label is a <text> element, we can use it directly.\n          // Otherwise, we need to find the <text> element within the label.\n          var labelTextNode = labelElement.tagName() === 'TEXT' ? labelNode : Array.from(labelNode.querySelectorAll('text'));\n          portContainerSelectors[labelTextSelector] = labelTextNode;\n          if (!labelSelectors) {\n            labelSelectors = {};\n          }\n          labelSelectors[labelTextSelector] = labelTextNode;\n        }\n      }\n      portContainerElement.append(portElement.addClass('joint-port-body'));\n      if (labelElement) {\n        portContainerElement.append(labelElement.addClass('joint-port-label'));\n      }\n      this._portElementsCache[port.id] = {\n        portElement: portContainerElement,\n        portLabelElement: labelElement,\n        portSelectors: portContainerSelectors,\n        portLabelSelectors: labelSelectors,\n        portContentElement: portElement,\n        portContentSelectors: portSelectors\n      };\n      return portContainerElement;\n    },\n    /**\n     * @param {string=} groupName\n     * @private\n     */\n    _updatePortGroup: function (groupName) {\n      var elementBBox = Rect(this.model.size());\n      var portsMetrics = this.model._portSettingsData.getGroupPortsMetrics(groupName, elementBBox);\n      for (var i = 0, n = portsMetrics.length; i < n; i++) {\n        var metrics = portsMetrics[i];\n        var portId = metrics.portId;\n        var cached = this._portElementsCache[portId] || {};\n        var portTransformation = metrics.portTransformation;\n        var labelTransformation = metrics.labelTransformation;\n        if (labelTransformation && cached.portLabelElement) {\n          this.updateDOMSubtreeAttributes(cached.portLabelElement.node, labelTransformation.attrs, {\n            rootBBox: new Rect(metrics.labelSize),\n            selectors: cached.portLabelSelectors\n          });\n          this.applyPortTransform(cached.portLabelElement, labelTransformation, -portTransformation.angle || 0);\n        }\n        this.updateDOMSubtreeAttributes(cached.portElement.node, metrics.portAttrs, {\n          rootBBox: new Rect(metrics.portSize),\n          selectors: cached.portSelectors\n        });\n        this.applyPortTransform(cached.portElement, portTransformation);\n      }\n    },\n    /**\n     * @param {Vectorizer} element\n     * @param {{dx:number, dy:number, angle: number, attrs: Object, x:number: y:number}} transformData\n     * @param {number=} initialAngle\n     * @constructor\n     */\n    applyPortTransform: function (element, transformData, initialAngle) {\n      var matrix = V.createSVGMatrix().rotate(initialAngle || 0).translate(transformData.x || 0, transformData.y || 0).rotate(transformData.angle || 0);\n      element.transform(matrix, {\n        absolute: true\n      });\n    },\n    /**\n     * @param {Port} port\n     * @returns {string}\n     * @private\n     */\n    _getPortMarkup: function (port) {\n      return port.markup || this.model.get('portMarkup') || this.model.portMarkup || this.portMarkup;\n    },\n    /**\n     * @param {Object} label\n     * @returns {string}\n     * @private\n     */\n    _getPortLabelMarkup: function (label) {\n      return label.markup || this.model.get('portLabelMarkup') || this.model.portLabelMarkup || this.portLabelMarkup;\n    }\n  };\n\n  // Element base model.\n  // -----------------------------\n\n  var Element$1 = Cell.extend({\n    defaults: {\n      position: {\n        x: 0,\n        y: 0\n      },\n      size: {\n        width: 1,\n        height: 1\n      },\n      angle: 0\n    },\n    initialize: function () {\n      this._initializePorts();\n      Cell.prototype.initialize.apply(this, arguments);\n    },\n    /**\n     * @abstract\n     */\n    _initializePorts: function () {\n      // implemented in ports.js\n    },\n    _refreshPorts: function () {\n      // implemented in ports.js\n    },\n    isElement: function () {\n      return true;\n    },\n    position: function (x, y, opt) {\n      var isSetter = isNumber(y);\n      opt = (isSetter ? opt : x) || {};\n      var parentRelative = opt.parentRelative;\n      var deep = opt.deep;\n      var restrictedArea = opt.restrictedArea;\n\n      // option `parentRelative` for setting the position relative to the element's parent.\n      var parentPosition;\n      if (parentRelative) {\n        // Getting the parent's position requires the collection.\n        // Cell.parent() holds cell id only.\n        if (!this.graph) {\n          throw new Error('Element must be part of a graph.');\n        }\n        var parent = this.getParentCell();\n        if (parent && !parent.isLink()) {\n          parentPosition = parent.get('position');\n        }\n      }\n      if (isSetter) {\n        if (parentPosition) {\n          x += parentPosition.x;\n          y += parentPosition.y;\n        }\n        if (deep || restrictedArea) {\n          var ref = this.get('position');\n          var x0 = ref.x;\n          var y0 = ref.y;\n          this.translate(x - x0, y - y0, opt);\n        } else {\n          this.set('position', {\n            x: x,\n            y: y\n          }, opt);\n        }\n        return this;\n      } else {\n        // Getter returns a geometry point.\n\n        var elementPosition = Point(this.get('position'));\n        return parentRelative ? elementPosition.difference(parentPosition) : elementPosition;\n      }\n    },\n    translate: function (tx, ty, opt) {\n      tx = tx || 0;\n      ty = ty || 0;\n      if (tx === 0 && ty === 0) {\n        // Like nothing has happened.\n        return this;\n      }\n      opt = opt || {};\n      // Pass the initiator of the translation.\n      opt.translateBy = opt.translateBy || this.id;\n      var position = this.get('position') || {\n        x: 0,\n        y: 0\n      };\n      var ra = opt.restrictedArea;\n      if (ra && opt.translateBy === this.id) {\n        if (typeof ra === 'function') {\n          var newPosition = ra.call(this, position.x + tx, position.y + ty, opt);\n          tx = newPosition.x - position.x;\n          ty = newPosition.y - position.y;\n        } else {\n          // We are restricting the translation for the element itself only. We get\n          // the bounding box of the element including all its embeds.\n          // All embeds have to be translated the exact same way as the element.\n          var bbox = this.getBBox({\n            deep: true\n          });\n          //- - - - - - - - - - - - -> ra.x + ra.width\n          // - - - -> position.x      |\n          // -> bbox.x\n          //                âââââââ   |\n          //         ââââââââââââââ\n          //         âââââââââ        |\n          //   âââââââââââââââ\n          //   ââââââââ               |\n          //   <-dx->                     | restricted area right border\n          //         <-width->        |   â translated element\n          //   <- - bbox.width - ->       â embedded element\n          var dx = position.x - bbox.x;\n          var dy = position.y - bbox.y;\n          // Find the maximal/minimal coordinates that the element can be translated\n          // while complies the restrictions.\n          var x = Math.max(ra.x + dx, Math.min(ra.x + ra.width + dx - bbox.width, position.x + tx));\n          var y = Math.max(ra.y + dy, Math.min(ra.y + ra.height + dy - bbox.height, position.y + ty));\n          // recalculate the translation taking the restrictions into account.\n          tx = x - position.x;\n          ty = y - position.y;\n        }\n      }\n      var translatedPosition = {\n        x: position.x + tx,\n        y: position.y + ty\n      };\n\n      // To find out by how much an element was translated in event 'change:position' handlers.\n      opt.tx = tx;\n      opt.ty = ty;\n      if (opt.transition) {\n        if (!isObject$1(opt.transition)) {\n          opt.transition = {};\n        }\n        this.transition('position', translatedPosition, assign({}, opt.transition, {\n          valueFunction: interpolate.object\n        }));\n\n        // Recursively call `translate()` on all the embeds cells.\n        invoke(this.getEmbeddedCells(), 'translate', tx, ty, opt);\n      } else {\n        this.startBatch('translate', opt);\n        this.set('position', translatedPosition, opt);\n        invoke(this.getEmbeddedCells(), 'translate', tx, ty, opt);\n        this.stopBatch('translate', opt);\n      }\n      return this;\n    },\n    size: function (width, height, opt) {\n      var currentSize = this.get('size');\n      // Getter\n      // () signature\n      if (width === undefined) {\n        return {\n          width: currentSize.width,\n          height: currentSize.height\n        };\n      }\n      // Setter\n      // (size, opt) signature\n      if (isObject$1(width)) {\n        opt = height;\n        height = isNumber(width.height) ? width.height : currentSize.height;\n        width = isNumber(width.width) ? width.width : currentSize.width;\n      }\n      return this.resize(width, height, opt);\n    },\n    resize: function (width, height, opt) {\n      opt = opt || {};\n      this.startBatch('resize', opt);\n      if (opt.direction) {\n        var currentSize = this.get('size');\n        switch (opt.direction) {\n          case 'left':\n          case 'right':\n            // Don't change height when resizing horizontally.\n            height = currentSize.height;\n            break;\n          case 'top':\n          case 'bottom':\n            // Don't change width when resizing vertically.\n            width = currentSize.width;\n            break;\n        }\n\n        // Get the angle and clamp its value between 0 and 360 degrees.\n        var angle = normalizeAngle(this.get('angle') || 0);\n\n        // This is a rectangle in size of the un-rotated element.\n        var bbox = this.getBBox();\n        var origin;\n        if (angle) {\n          var quadrant = {\n            'top-right': 0,\n            'right': 0,\n            'top-left': 1,\n            'top': 1,\n            'bottom-left': 2,\n            'left': 2,\n            'bottom-right': 3,\n            'bottom': 3\n          }[opt.direction];\n          if (opt.absolute) {\n            // We are taking the element's rotation into account\n            quadrant += Math.floor((angle + 45) / 90);\n            quadrant %= 4;\n          }\n\n          // Pick the corner point on the element, which meant to stay on its place before and\n          // after the rotation.\n          var fixedPoint = bbox[['bottomLeft', 'corner', 'topRight', 'origin'][quadrant]]();\n\n          // Find  an image of the previous indent point. This is the position, where is the\n          // point actually located on the screen.\n          var imageFixedPoint = Point(fixedPoint).rotate(bbox.center(), -angle);\n\n          // Every point on the element rotates around a circle with the centre of rotation\n          // in the middle of the element while the whole element is being rotated. That means\n          // that the distance from a point in the corner of the element (supposed its always rect) to\n          // the center of the element doesn't change during the rotation and therefore it equals\n          // to a distance on un-rotated element.\n          // We can find the distance as DISTANCE = (ELEMENTWIDTH/2)^2 + (ELEMENTHEIGHT/2)^2)^0.5.\n          var radius = Math.sqrt(width * width + height * height) / 2;\n\n          // Now we are looking for an angle between x-axis and the line starting at image of fixed point\n          // and ending at the center of the element. We call this angle `alpha`.\n\n          // The image of a fixed point is located in n-th quadrant. For each quadrant passed\n          // going anti-clockwise we have to add 90 degrees. Note that the first quadrant has index 0.\n          //\n          // 3 | 2\n          // --c-- Quadrant positions around the element's center `c`\n          // 0 | 1\n          //\n          var alpha = quadrant * Math.PI / 2;\n\n          // Add an angle between the beginning of the current quadrant (line parallel with x-axis or y-axis\n          // going through the center of the element) and line crossing the indent of the fixed point and the center\n          // of the element. This is the angle we need but on the un-rotated element.\n          alpha += Math.atan(quadrant % 2 == 0 ? height / width : width / height);\n\n          // Lastly we have to deduct the original angle the element was rotated by and that's it.\n          alpha -= toRad(angle);\n\n          // With this angle and distance we can easily calculate the centre of the un-rotated element.\n          // Note that fromPolar constructor accepts an angle in radians.\n          var center = Point.fromPolar(radius, alpha, imageFixedPoint);\n\n          // The top left corner on the un-rotated element has to be half a width on the left\n          // and half a height to the top from the center. This will be the origin of rectangle\n          // we were looking for.\n          origin = Point(center).offset(width / -2, height / -2);\n        } else {\n          // calculation for the origin Point when there is no rotation of the element\n          origin = bbox.topLeft();\n          switch (opt.direction) {\n            case 'top':\n            case 'top-right':\n              origin.offset(0, bbox.height - height);\n              break;\n            case 'left':\n            case 'bottom-left':\n              origin.offset(bbox.width - width, 0);\n              break;\n            case 'top-left':\n              origin.offset(bbox.width - width, bbox.height - height);\n              break;\n          }\n        }\n\n        // Resize the element (before re-positioning it).\n        this.set('size', {\n          width: width,\n          height: height\n        }, opt);\n\n        // Finally, re-position the element.\n        this.position(origin.x, origin.y, opt);\n      } else {\n        // Resize the element.\n        this.set('size', {\n          width: width,\n          height: height\n        }, opt);\n      }\n      this.stopBatch('resize', opt);\n      return this;\n    },\n    scale: function (sx, sy, origin, opt) {\n      var scaledBBox = this.getBBox().scale(sx, sy, origin);\n      this.startBatch('scale', opt);\n      this.position(scaledBBox.x, scaledBBox.y, opt);\n      this.resize(scaledBBox.width, scaledBBox.height, opt);\n      this.stopBatch('scale');\n      return this;\n    },\n    fitEmbeds: function (opt) {\n      return this.fitToChildren(opt);\n    },\n    fitToChildren: function (opt) {\n      if (opt === void 0) opt = {};\n\n      // Getting the children's size and position requires the collection.\n      // Cell.get('embeds') holds an array of cell ids only.\n      var ref = this;\n      var graph = ref.graph;\n      if (!graph) {\n        throw new Error('Element must be part of a graph.');\n      }\n      var childElements = this.getEmbeddedCells().filter(function (cell) {\n        return cell.isElement();\n      });\n      if (childElements.length === 0) {\n        return this;\n      }\n      this.startBatch('fit-embeds', opt);\n      if (opt.deep) {\n        // `opt.deep = true` means \"fit to all descendants\".\n        // As the first action of the fitting algorithm, recursively apply `fitToChildren()` on all descendants.\n        // - i.e. the algorithm is applied in reverse-depth order - start from deepest descendant, then go up (= this element).\n        invoke(childElements, 'fitToChildren', opt);\n      }\n\n      // Set new size and position of this element, based on:\n      // - union of bboxes of all children\n      // - inflated by given `opt.padding`\n      this._fitToElements(Object.assign({\n        elements: childElements\n      }, opt));\n      this.stopBatch('fit-embeds');\n      return this;\n    },\n    fitParent: function (opt) {\n      if (opt === void 0) opt = {};\n      var ref = this;\n      var graph = ref.graph;\n      if (!graph) {\n        throw new Error('Element must be part of a graph.');\n      }\n\n      // When `opt.deep = true`, we want `opt.terminator` to be the last ancestor processed.\n      // If the current element is `opt.terminator`, it means that this element has already been processed as parent so we can exit now.\n      if (opt.deep && opt.terminator && (opt.terminator === this || opt.terminator === this.id)) {\n        return this;\n      }\n      var parentElement = this.getParentCell();\n      if (!parentElement || !parentElement.isElement()) {\n        return this;\n      }\n\n      // Get all children of parent element (i.e. this element + any sibling elements).\n      var siblingElements = parentElement.getEmbeddedCells().filter(function (cell) {\n        return cell.isElement();\n      });\n      if (siblingElements.length === 0) {\n        return this;\n      }\n      this.startBatch('fit-parent', opt);\n\n      // Set new size and position of parent element, based on:\n      // - union of bboxes of all children of parent element (i.e. this element + any sibling elements)\n      // - inflated by given `opt.padding`\n      parentElement._fitToElements(Object.assign({\n        elements: siblingElements\n      }, opt));\n      if (opt.deep) {\n        // `opt.deep = true` means \"fit all ancestors to their respective children\".\n        // As the last action of the fitting algorithm, recursively apply `fitParent()` on all ancestors.\n        // - i.e. the algorithm is applied in reverse-depth order - start from deepest descendant (= this element), then go up.\n        parentElement.fitParent(opt);\n      }\n      this.stopBatch('fit-parent');\n      return this;\n    },\n    // Assumption: This element is part of a graph.\n    _fitToElements: function (opt) {\n      if (opt === void 0) opt = {};\n      var elementsBBox = this.graph.getCellsBBox(opt.elements);\n      // If no `opt.elements` were provided, do nothing.\n      if (!elementsBBox) {\n        return;\n      }\n      var expandOnly = opt.expandOnly;\n      var shrinkOnly = opt.shrinkOnly;\n      // This combination is meaningless, do nothing.\n      if (expandOnly && shrinkOnly) {\n        return;\n      }\n\n      // Calculate new size and position of this element based on:\n      // - union of bboxes of `opt.elements`\n      // - inflated by `opt.padding` (if not provided, all four properties = 0)\n      var x = elementsBBox.x;\n      var y = elementsBBox.y;\n      var width = elementsBBox.width;\n      var height = elementsBBox.height;\n      var ref = normalizeSides(opt.padding);\n      var left = ref.left;\n      var right = ref.right;\n      var top = ref.top;\n      var bottom = ref.bottom;\n      x -= left;\n      y -= top;\n      width += left + right;\n      height += bottom + top;\n      var resultBBox = new Rect(x, y, width, height);\n      if (expandOnly) {\n        // Non-shrinking is enforced by taking union of this element's current bbox with bbox calculated from `opt.elements`.\n        resultBBox = this.getBBox().union(resultBBox);\n      } else if (shrinkOnly) {\n        // Non-expansion is enforced by taking intersection of this element's current bbox with bbox calculated from `opt.elements`.\n        var intersectionBBox = this.getBBox().intersect(resultBBox);\n        // If all children are outside this element's current bbox, then `intersectionBBox` is `null` - does not make sense, do nothing.\n        if (!intersectionBBox) {\n          return;\n        }\n        resultBBox = intersectionBBox;\n      }\n\n      // Set the new size and position of this element.\n      this.set({\n        position: {\n          x: resultBBox.x,\n          y: resultBBox.y\n        },\n        size: {\n          width: resultBBox.width,\n          height: resultBBox.height\n        }\n      }, opt);\n    },\n    // Rotate element by `angle` degrees, optionally around `origin` point.\n    // If `origin` is not provided, it is considered to be the center of the element.\n    // If `absolute` is `true`, the `angle` is considered is absolute, i.e. it is not\n    // the difference from the previous angle.\n    rotate: function (angle, absolute, origin, opt) {\n      if (origin) {\n        var center = this.getBBox().center();\n        var size = this.get('size');\n        var position = this.get('position');\n        center.rotate(origin, this.get('angle') - angle);\n        var dx = center.x - size.width / 2 - position.x;\n        var dy = center.y - size.height / 2 - position.y;\n        this.startBatch('rotate', {\n          angle: angle,\n          absolute: absolute,\n          origin: origin\n        });\n        this.position(position.x + dx, position.y + dy, opt);\n        this.rotate(angle, absolute, null, opt);\n        this.stopBatch('rotate');\n      } else {\n        this.set('angle', absolute ? angle : (this.get('angle') + angle) % 360, opt);\n      }\n      return this;\n    },\n    angle: function () {\n      return normalizeAngle(this.get('angle') || 0);\n    },\n    getBBox: function (opt) {\n      if (opt === void 0) opt = {};\n      var ref = this;\n      var graph = ref.graph;\n      var attributes = ref.attributes;\n      var deep = opt.deep;\n      var rotate = opt.rotate;\n      if (deep && graph) {\n        // Get all the embedded elements using breadth first algorithm.\n        var elements = this.getEmbeddedCells({\n          deep: true,\n          breadthFirst: true\n        });\n        // Add the model itself.\n        elements.push(this);\n        // Note: the default of getCellsBBox() is rotate=true and can't be\n        // changed without a breaking change\n        return graph.getCellsBBox(elements, opt);\n      }\n      var angle = attributes.angle;\n      if (angle === void 0) angle = 0;\n      var attributes_position = attributes.position;\n      var x = attributes_position.x;\n      var y = attributes_position.y;\n      var attributes_size = attributes.size;\n      var width = attributes_size.width;\n      var height = attributes_size.height;\n      var bbox = new Rect(x, y, width, height);\n      if (rotate) {\n        bbox.rotateAroundCenter(angle);\n      }\n      return bbox;\n    },\n    getPointFromConnectedLink: function (link, endType) {\n      // Center of the model\n      var bbox = this.getBBox();\n      var center = bbox.center();\n      // Center of a port\n      var endDef = link.get(endType);\n      if (!endDef) {\n        return center;\n      }\n      var portId = endDef.port;\n      if (!portId || !this.hasPort(portId)) {\n        return center;\n      }\n      var portGroup = this.portProp(portId, ['group']);\n      var portsPositions = this.getPortsPositions(portGroup);\n      var portCenter = new Point(portsPositions[portId]).offset(bbox.origin());\n      var angle = this.angle();\n      if (angle) {\n        portCenter.rotate(center, -angle);\n      }\n      return portCenter;\n    }\n  });\n  assign(Element$1.prototype, elementPortPrototype);\n  var GraphCells = Backbone.Collection.extend({\n    initialize: function (models, opt) {\n      // Set the optional namespace where all model classes are defined.\n      if (opt.cellNamespace) {\n        this.cellNamespace = opt.cellNamespace;\n      } else {\n        /* eslint-disable no-undef */\n        this.cellNamespace = typeof joint !== 'undefined' && has$2(joint, 'shapes') ? joint.shapes : null;\n        /* eslint-enable no-undef */\n      }\n      this.graph = opt.graph;\n    },\n    model: function (attrs, opt) {\n      var collection = opt.collection;\n      var namespace = collection.cellNamespace;\n\n      // Find the model class in the namespace or use the default one.\n      var ModelClass = attrs.type === 'link' ? Link : getByPath(namespace, attrs.type, '.') || Element$1;\n      var cell = new ModelClass(attrs, opt);\n      // Add a reference to the graph. It is necessary to do this here because this is the earliest place\n      // where a new model is created from a plain JS object. For other objects, see `joint.dia.Graph>>_prepareCell()`.\n      if (!opt.dry) {\n        cell.graph = collection.graph;\n      }\n      return cell;\n    },\n    // `comparator` makes it easy to sort cells based on their `z` index.\n    comparator: function (model) {\n      return model.get('z') || 0;\n    }\n  });\n  var Graph = Backbone.Model.extend({\n    initialize: function (attrs, opt) {\n      opt = opt || {};\n\n      // Passing `cellModel` function in the options object to graph allows for\n      // setting models based on attribute objects. This is especially handy\n      // when processing JSON graphs that are in a different than JointJS format.\n      var cells = new GraphCells([], {\n        model: opt.cellModel,\n        cellNamespace: opt.cellNamespace,\n        graph: this\n      });\n      Backbone.Model.prototype.set.call(this, 'cells', cells);\n\n      // Make all the events fired in the `cells` collection available.\n      // to the outside world.\n      cells.on('all', this.trigger, this);\n\n      // Backbone automatically doesn't trigger re-sort if models attributes are changed later when\n      // they're already in the collection. Therefore, we're triggering sort manually here.\n      this.on('change:z', this._sortOnChangeZ, this);\n\n      // `joint.dia.Graph` keeps an internal data structure (an adjacency list)\n      // for fast graph queries. All changes that affect the structure of the graph\n      // must be reflected in the `al` object. This object provides fast answers to\n      // questions such as \"what are the neighbours of this node\" or \"what\n      // are the sibling links of this link\".\n\n      // Outgoing edges per node. Note that we use a hash-table for the list\n      // of outgoing edges for a faster lookup.\n      // [nodeId] -> Object [edgeId] -> true\n      this._out = {};\n      // Ingoing edges per node.\n      // [nodeId] -> Object [edgeId] -> true\n      this._in = {};\n      // `_nodes` is useful for quick lookup of all the elements in the graph, without\n      // having to go through the whole cells array.\n      // [node ID] -> true\n      this._nodes = {};\n      // `_edges` is useful for quick lookup of all the links in the graph, without\n      // having to go through the whole cells array.\n      // [edgeId] -> true\n      this._edges = {};\n      this._batches = {};\n      cells.on('add', this._restructureOnAdd, this);\n      cells.on('remove', this._restructureOnRemove, this);\n      cells.on('reset', this._restructureOnReset, this);\n      cells.on('change:source', this._restructureOnChangeSource, this);\n      cells.on('change:target', this._restructureOnChangeTarget, this);\n      cells.on('remove', this._removeCell, this);\n    },\n    _sortOnChangeZ: function () {\n      this.get('cells').sort();\n    },\n    _restructureOnAdd: function (cell) {\n      if (cell.isLink()) {\n        this._edges[cell.id] = true;\n        var ref = cell.attributes;\n        var source = ref.source;\n        var target = ref.target;\n        if (source.id) {\n          (this._out[source.id] || (this._out[source.id] = {}))[cell.id] = true;\n        }\n        if (target.id) {\n          (this._in[target.id] || (this._in[target.id] = {}))[cell.id] = true;\n        }\n      } else {\n        this._nodes[cell.id] = true;\n      }\n    },\n    _restructureOnRemove: function (cell) {\n      if (cell.isLink()) {\n        delete this._edges[cell.id];\n        var ref = cell.attributes;\n        var source = ref.source;\n        var target = ref.target;\n        if (source.id && this._out[source.id] && this._out[source.id][cell.id]) {\n          delete this._out[source.id][cell.id];\n        }\n        if (target.id && this._in[target.id] && this._in[target.id][cell.id]) {\n          delete this._in[target.id][cell.id];\n        }\n      } else {\n        delete this._nodes[cell.id];\n      }\n    },\n    _restructureOnReset: function (cells) {\n      // Normalize into an array of cells. The original `cells` is GraphCells Backbone collection.\n      cells = cells.models;\n      this._out = {};\n      this._in = {};\n      this._nodes = {};\n      this._edges = {};\n      cells.forEach(this._restructureOnAdd, this);\n    },\n    _restructureOnChangeSource: function (link) {\n      var prevSource = link.previous('source');\n      if (prevSource.id && this._out[prevSource.id]) {\n        delete this._out[prevSource.id][link.id];\n      }\n      var source = link.attributes.source;\n      if (source.id) {\n        (this._out[source.id] || (this._out[source.id] = {}))[link.id] = true;\n      }\n    },\n    _restructureOnChangeTarget: function (link) {\n      var prevTarget = link.previous('target');\n      if (prevTarget.id && this._in[prevTarget.id]) {\n        delete this._in[prevTarget.id][link.id];\n      }\n      var target = link.get('target');\n      if (target.id) {\n        (this._in[target.id] || (this._in[target.id] = {}))[link.id] = true;\n      }\n    },\n    // Return all outbound edges for the node. Return value is an object\n    // of the form: [edgeId] -> true\n    getOutboundEdges: function (node) {\n      return this._out && this._out[node] || {};\n    },\n    // Return all inbound edges for the node. Return value is an object\n    // of the form: [edgeId] -> true\n    getInboundEdges: function (node) {\n      return this._in && this._in[node] || {};\n    },\n    toJSON: function () {\n      // Backbone does not recursively call `toJSON()` on attributes that are themselves models/collections.\n      // It just clones the attributes. Therefore, we must call `toJSON()` on the cells collection explicitly.\n      var json = Backbone.Model.prototype.toJSON.apply(this, arguments);\n      json.cells = this.get('cells').toJSON();\n      return json;\n    },\n    fromJSON: function (json, opt) {\n      if (!json.cells) {\n        throw new Error('Graph JSON must contain cells array.');\n      }\n      return this.set(json, opt);\n    },\n    set: function (key, val, opt) {\n      var attrs;\n\n      // Handle both `key`, value and {key: value} style arguments.\n      if (typeof key === 'object') {\n        attrs = key;\n        opt = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      // Make sure that `cells` attribute is handled separately via resetCells().\n      if (attrs.hasOwnProperty('cells')) {\n        this.resetCells(attrs.cells, opt);\n        attrs = omit(attrs, 'cells');\n      }\n\n      // The rest of the attributes are applied via original set method.\n      return Backbone.Model.prototype.set.call(this, attrs, opt);\n    },\n    clear: function (opt) {\n      opt = assign({}, opt, {\n        clear: true\n      });\n      var collection = this.get('cells');\n      if (collection.length === 0) {\n        return this;\n      }\n      this.startBatch('clear', opt);\n\n      // The elements come after the links.\n      var cells = collection.sortBy(function (cell) {\n        return cell.isLink() ? 1 : 2;\n      });\n      do {\n        // Remove all the cells one by one.\n        // Note that all the links are removed first, so it's\n        // safe to remove the elements without removing the connected\n        // links first.\n        cells.shift().remove(opt);\n      } while (cells.length > 0);\n      this.stopBatch('clear');\n      return this;\n    },\n    _prepareCell: function (cell, opt) {\n      var attrs;\n      if (cell instanceof Backbone.Model) {\n        attrs = cell.attributes;\n        if (!cell.graph && (!opt || !opt.dry)) {\n          // An element can not be member of more than one graph.\n          // A cell stops being the member of the graph after it's explicitly removed.\n          cell.graph = this;\n        }\n      } else {\n        // In case we're dealing with a plain JS object, we have to set the reference\n        // to the `graph` right after the actual model is created. This happens in the `model()` function\n        // of `joint.dia.GraphCells`.\n        attrs = cell;\n      }\n      if (!isString(attrs.type)) {\n        throw new TypeError('dia.Graph: cell type must be a string.');\n      }\n      return cell;\n    },\n    minZIndex: function () {\n      var firstCell = this.get('cells').first();\n      return firstCell ? firstCell.get('z') || 0 : 0;\n    },\n    maxZIndex: function () {\n      var lastCell = this.get('cells').last();\n      return lastCell ? lastCell.get('z') || 0 : 0;\n    },\n    addCell: function (cell, opt) {\n      if (Array.isArray(cell)) {\n        return this.addCells(cell, opt);\n      }\n      if (cell instanceof Backbone.Model) {\n        if (!cell.has('z')) {\n          cell.set('z', this.maxZIndex() + 1);\n        }\n      } else if (cell.z === undefined) {\n        cell.z = this.maxZIndex() + 1;\n      }\n      this.get('cells').add(this._prepareCell(cell, opt), opt || {});\n      return this;\n    },\n    addCells: function (cells, opt) {\n      if (cells.length === 0) {\n        return this;\n      }\n      cells = flattenDeep(cells);\n      opt.maxPosition = opt.position = cells.length - 1;\n      this.startBatch('add', opt);\n      cells.forEach(function (cell) {\n        this.addCell(cell, opt);\n        opt.position--;\n      }, this);\n      this.stopBatch('add', opt);\n      return this;\n    },\n    // When adding a lot of cells, it is much more efficient to\n    // reset the entire cells collection in one go.\n    // Useful for bulk operations and optimizations.\n    resetCells: function (cells, opt) {\n      var preparedCells = toArray(cells).map(function (cell) {\n        return this._prepareCell(cell, opt);\n      }, this);\n      this.get('cells').reset(preparedCells, opt);\n      return this;\n    },\n    removeCells: function (cells, opt) {\n      if (cells.length) {\n        this.startBatch('remove');\n        invoke(cells, 'remove', opt);\n        this.stopBatch('remove');\n      }\n      return this;\n    },\n    _removeCell: function (cell, collection, options) {\n      options = options || {};\n      if (!options.clear) {\n        // Applications might provide a `disconnectLinks` option set to `true` in order to\n        // disconnect links when a cell is removed rather then removing them. The default\n        // is to remove all the associated links.\n        if (options.disconnectLinks) {\n          this.disconnectLinks(cell, options);\n        } else {\n          this.removeLinks(cell, options);\n        }\n      }\n      // Silently remove the cell from the cells collection. Silently, because\n      // `joint.dia.Cell.prototype.remove` already triggers the `remove` event which is\n      // then propagated to the graph model. If we didn't remove the cell silently, two `remove` events\n      // would be triggered on the graph model.\n      this.get('cells').remove(cell, {\n        silent: true\n      });\n      if (cell.graph === this) {\n        // Remove the element graph reference only if the cell is the member of this graph.\n        cell.graph = null;\n      }\n    },\n    // Get a cell by `id`.\n    getCell: function (id) {\n      return this.get('cells').get(id);\n    },\n    getCells: function () {\n      return this.get('cells').toArray();\n    },\n    getElements: function () {\n      return this.get('cells').filter(function (cell) {\n        return cell.isElement();\n      });\n    },\n    getLinks: function () {\n      return this.get('cells').filter(function (cell) {\n        return cell.isLink();\n      });\n    },\n    getFirstCell: function () {\n      return this.get('cells').first();\n    },\n    getLastCell: function () {\n      return this.get('cells').last();\n    },\n    // Get all inbound and outbound links connected to the cell `model`.\n    getConnectedLinks: function (model, opt) {\n      opt = opt || {};\n      var indirect = opt.indirect;\n      var inbound = opt.inbound;\n      var outbound = opt.outbound;\n      if (inbound === undefined && outbound === undefined) {\n        inbound = outbound = true;\n      }\n\n      // the final array of connected link models\n      var links = [];\n      // a hash table of connected edges of the form: [edgeId] -> true\n      // used for quick lookups to check if we already added a link\n      var edges = {};\n      if (outbound) {\n        addOutbounds(this, model);\n      }\n      if (inbound) {\n        addInbounds(this, model);\n      }\n      function addOutbounds(graph, model) {\n        forIn(graph.getOutboundEdges(model.id), function (_, edge) {\n          // skip links that were already added\n          // (those must be self-loop links)\n          // (because they are inbound and outbound edges of the same two elements)\n          if (edges[edge]) {\n            return;\n          }\n          var link = graph.getCell(edge);\n          links.push(link);\n          edges[edge] = true;\n          if (indirect) {\n            if (inbound) {\n              addInbounds(graph, link);\n            }\n            if (outbound) {\n              addOutbounds(graph, link);\n            }\n          }\n        }.bind(graph));\n        if (indirect && model.isLink()) {\n          var outCell = model.getTargetCell();\n          if (outCell && outCell.isLink()) {\n            if (!edges[outCell.id]) {\n              links.push(outCell);\n              addOutbounds(graph, outCell);\n            }\n          }\n        }\n      }\n      function addInbounds(graph, model) {\n        forIn(graph.getInboundEdges(model.id), function (_, edge) {\n          // skip links that were already added\n          // (those must be self-loop links)\n          // (because they are inbound and outbound edges of the same two elements)\n          if (edges[edge]) {\n            return;\n          }\n          var link = graph.getCell(edge);\n          links.push(link);\n          edges[edge] = true;\n          if (indirect) {\n            if (inbound) {\n              addInbounds(graph, link);\n            }\n            if (outbound) {\n              addOutbounds(graph, link);\n            }\n          }\n        }.bind(graph));\n        if (indirect && model.isLink()) {\n          var inCell = model.getSourceCell();\n          if (inCell && inCell.isLink()) {\n            if (!edges[inCell.id]) {\n              links.push(inCell);\n              addInbounds(graph, inCell);\n            }\n          }\n        }\n      }\n\n      // if `deep` option is `true`, check also all the links that are connected to any of the descendant cells\n      if (opt.deep) {\n        var embeddedCells = model.getEmbeddedCells({\n          deep: true\n        });\n\n        // in the first round, we collect all the embedded elements\n        var embeddedElements = {};\n        embeddedCells.forEach(function (cell) {\n          if (cell.isElement()) {\n            embeddedElements[cell.id] = true;\n          }\n        });\n        embeddedCells.forEach(function (cell) {\n          if (cell.isLink()) {\n            return;\n          }\n          if (outbound) {\n            forIn(this.getOutboundEdges(cell.id), function (exists, edge) {\n              if (!edges[edge]) {\n                var edgeCell = this.getCell(edge);\n                var ref = edgeCell.attributes;\n                var source = ref.source;\n                var target = ref.target;\n                var sourceId = source.id;\n                var targetId = target.id;\n\n                // if `includeEnclosed` option is falsy, skip enclosed links\n                if (!opt.includeEnclosed && sourceId && embeddedElements[sourceId] && targetId && embeddedElements[targetId]) {\n                  return;\n                }\n                links.push(this.getCell(edge));\n                edges[edge] = true;\n              }\n            }.bind(this));\n          }\n          if (inbound) {\n            forIn(this.getInboundEdges(cell.id), function (exists, edge) {\n              if (!edges[edge]) {\n                var edgeCell = this.getCell(edge);\n                var ref = edgeCell.attributes;\n                var source = ref.source;\n                var target = ref.target;\n                var sourceId = source.id;\n                var targetId = target.id;\n\n                // if `includeEnclosed` option is falsy, skip enclosed links\n                if (!opt.includeEnclosed && sourceId && embeddedElements[sourceId] && targetId && embeddedElements[targetId]) {\n                  return;\n                }\n                links.push(this.getCell(edge));\n                edges[edge] = true;\n              }\n            }.bind(this));\n          }\n        }, this);\n      }\n      return links;\n    },\n    getNeighbors: function (model, opt) {\n      opt || (opt = {});\n      var inbound = opt.inbound;\n      var outbound = opt.outbound;\n      if (inbound === undefined && outbound === undefined) {\n        inbound = outbound = true;\n      }\n      var neighbors = this.getConnectedLinks(model, opt).reduce(function (res, link) {\n        var ref = link.attributes;\n        var source = ref.source;\n        var target = ref.target;\n        var loop = link.hasLoop(opt);\n\n        // Discard if it is a point, or if the neighbor was already added.\n        if (inbound && has$2(source, 'id') && !res[source.id]) {\n          var sourceElement = this.getCell(source.id);\n          if (sourceElement.isElement()) {\n            if (loop || sourceElement && sourceElement !== model && (!opt.deep || !sourceElement.isEmbeddedIn(model))) {\n              res[source.id] = sourceElement;\n            }\n          }\n        }\n\n        // Discard if it is a point, or if the neighbor was already added.\n        if (outbound && has$2(target, 'id') && !res[target.id]) {\n          var targetElement = this.getCell(target.id);\n          if (targetElement.isElement()) {\n            if (loop || targetElement && targetElement !== model && (!opt.deep || !targetElement.isEmbeddedIn(model))) {\n              res[target.id] = targetElement;\n            }\n          }\n        }\n        return res;\n      }.bind(this), {});\n      if (model.isLink()) {\n        if (inbound) {\n          var sourceCell = model.getSourceCell();\n          if (sourceCell && sourceCell.isElement() && !neighbors[sourceCell.id]) {\n            neighbors[sourceCell.id] = sourceCell;\n          }\n        }\n        if (outbound) {\n          var targetCell = model.getTargetCell();\n          if (targetCell && targetCell.isElement() && !neighbors[targetCell.id]) {\n            neighbors[targetCell.id] = targetCell;\n          }\n        }\n      }\n      return toArray(neighbors);\n    },\n    getCommonAncestor: function /* cells */\n    () {\n      var cellsAncestors = Array.from(arguments).map(function (cell) {\n        var ancestors = [];\n        var parentId = cell.get('parent');\n        while (parentId) {\n          ancestors.push(parentId);\n          parentId = this.getCell(parentId).get('parent');\n        }\n        return ancestors;\n      }, this);\n      cellsAncestors = cellsAncestors.sort(function (a, b) {\n        return a.length - b.length;\n      });\n      var commonAncestor = toArray(cellsAncestors.shift()).find(function (ancestor) {\n        return cellsAncestors.every(function (cellAncestors) {\n          return cellAncestors.includes(ancestor);\n        });\n      });\n      return this.getCell(commonAncestor);\n    },\n    // Find the whole branch starting at `element`.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // If `opt.breadthFirst` is `true`, use the Breadth-first search algorithm, otherwise use Depth-first search.\n    getSuccessors: function (element, opt) {\n      opt = opt || {};\n      var res = [];\n      // Modify the options so that it includes the `outbound` neighbors only. In other words, search forwards.\n      this.search(element, function (el) {\n        if (el !== element) {\n          res.push(el);\n        }\n      }, assign({}, opt, {\n        outbound: true\n      }));\n      return res;\n    },\n    cloneCells: cloneCells,\n    // Clone the whole subgraph (including all the connected links whose source/target is in the subgraph).\n    // If `opt.deep` is `true`, also take into account all the embedded cells of all the subgraph cells.\n    // Return a map of the form: [original cell ID] -> [clone].\n    cloneSubgraph: function (cells, opt) {\n      var subgraph = this.getSubgraph(cells, opt);\n      return this.cloneCells(subgraph);\n    },\n    // Return `cells` and all the connected links that connect cells in the `cells` array.\n    // If `opt.deep` is `true`, return all the cells including all their embedded cells\n    // and all the links that connect any of the returned cells.\n    // For example, for a single shallow element, the result is that very same element.\n    // For two elements connected with a link: `A --- L ---> B`, the result for\n    // `getSubgraph([A, B])` is `[A, L, B]`. The same goes for `getSubgraph([L])`, the result is again `[A, L, B]`.\n    getSubgraph: function (cells, opt) {\n      opt = opt || {};\n      var subgraph = [];\n      // `cellMap` is used for a quick lookup of existence of a cell in the `cells` array.\n      var cellMap = {};\n      var elements = [];\n      var links = [];\n      toArray(cells).forEach(function (cell) {\n        if (!cellMap[cell.id]) {\n          subgraph.push(cell);\n          cellMap[cell.id] = cell;\n          if (cell.isLink()) {\n            links.push(cell);\n          } else {\n            elements.push(cell);\n          }\n        }\n        if (opt.deep) {\n          var embeds = cell.getEmbeddedCells({\n            deep: true\n          });\n          embeds.forEach(function (embed) {\n            if (!cellMap[embed.id]) {\n              subgraph.push(embed);\n              cellMap[embed.id] = embed;\n              if (embed.isLink()) {\n                links.push(embed);\n              } else {\n                elements.push(embed);\n              }\n            }\n          });\n        }\n      });\n      links.forEach(function (link) {\n        // For links, return their source & target (if they are elements - not points).\n        var ref = link.attributes;\n        var source = ref.source;\n        var target = ref.target;\n        if (source.id && !cellMap[source.id]) {\n          var sourceElement = this.getCell(source.id);\n          subgraph.push(sourceElement);\n          cellMap[sourceElement.id] = sourceElement;\n          elements.push(sourceElement);\n        }\n        if (target.id && !cellMap[target.id]) {\n          var targetElement = this.getCell(target.id);\n          subgraph.push(this.getCell(target.id));\n          cellMap[targetElement.id] = targetElement;\n          elements.push(targetElement);\n        }\n      }, this);\n      elements.forEach(function (element) {\n        // For elements, include their connected links if their source/target is in the subgraph;\n        var links = this.getConnectedLinks(element, opt);\n        links.forEach(function (link) {\n          var ref = link.attributes;\n          var source = ref.source;\n          var target = ref.target;\n          if (!cellMap[link.id] && source.id && cellMap[source.id] && target.id && cellMap[target.id]) {\n            subgraph.push(link);\n            cellMap[link.id] = link;\n          }\n        });\n      }, this);\n      return subgraph;\n    },\n    // Find all the predecessors of `element`. This is a reverse operation of `getSuccessors()`.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // If `opt.breadthFirst` is `true`, use the Breadth-first search algorithm, otherwise use Depth-first search.\n    getPredecessors: function (element, opt) {\n      opt = opt || {};\n      var res = [];\n      // Modify the options so that it includes the `inbound` neighbors only. In other words, search backwards.\n      this.search(element, function (el) {\n        if (el !== element) {\n          res.push(el);\n        }\n      }, assign({}, opt, {\n        inbound: true\n      }));\n      return res;\n    },\n    // Perform search on the graph.\n    // If `opt.breadthFirst` is `true`, use the Breadth-first Search algorithm, otherwise use Depth-first search.\n    // By setting `opt.inbound` to `true`, you can reverse the direction of the search.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // `iteratee` is a function of the form `function(element) {}`.\n    // If `iteratee` explicitly returns `false`, the searching stops.\n    search: function (element, iteratee, opt) {\n      opt = opt || {};\n      if (opt.breadthFirst) {\n        this.bfs(element, iteratee, opt);\n      } else {\n        this.dfs(element, iteratee, opt);\n      }\n    },\n    // Breadth-first search.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // If `opt.inbound` is `true`, reverse the search direction (it's like reversing all the link directions).\n    // `iteratee` is a function of the form `function(element, distance) {}`.\n    // where `element` is the currently visited element and `distance` is the distance of that element\n    // from the root `element` passed the `bfs()`, i.e. the element we started the search from.\n    // Note that the `distance` is not the shortest or longest distance, it is simply the number of levels\n    // crossed till we visited the `element` for the first time. It is especially useful for tree graphs.\n    // If `iteratee` explicitly returns `false`, the searching stops.\n    bfs: function (element, iteratee, opt) {\n      if (opt === void 0) opt = {};\n      var visited = {};\n      var distance = {};\n      var queue = [];\n      queue.push(element);\n      distance[element.id] = 0;\n      while (queue.length > 0) {\n        var next = queue.shift();\n        if (visited[next.id]) {\n          continue;\n        }\n        visited[next.id] = true;\n        if (iteratee.call(this, next, distance[next.id]) === false) {\n          continue;\n        }\n        var neighbors = this.getNeighbors(next, opt);\n        for (var i = 0, n = neighbors.length; i < n; i++) {\n          var neighbor = neighbors[i];\n          distance[neighbor.id] = distance[next.id] + 1;\n          queue.push(neighbor);\n        }\n      }\n    },\n    // Depth-first search.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // If `opt.inbound` is `true`, reverse the search direction (it's like reversing all the link directions).\n    // `iteratee` is a function of the form `function(element, distance) {}`.\n    // If `iteratee` explicitly returns `false`, the search stops.\n    dfs: function (element, iteratee, opt) {\n      if (opt === void 0) opt = {};\n      var visited = {};\n      var distance = {};\n      var queue = [];\n      queue.push(element);\n      distance[element.id] = 0;\n      while (queue.length > 0) {\n        var next = queue.pop();\n        if (visited[next.id]) {\n          continue;\n        }\n        visited[next.id] = true;\n        if (iteratee.call(this, next, distance[next.id]) === false) {\n          continue;\n        }\n        var neighbors = this.getNeighbors(next, opt);\n        var lastIndex = queue.length;\n        for (var i = 0, n = neighbors.length; i < n; i++) {\n          var neighbor = neighbors[i];\n          distance[neighbor.id] = distance[next.id] + 1;\n          queue.splice(lastIndex, 0, neighbor);\n        }\n      }\n    },\n    // Get all the roots of the graph. Time complexity: O(|V|).\n    getSources: function () {\n      var sources = [];\n      forIn(this._nodes, function (exists, node) {\n        if (!this._in[node] || isEmpty(this._in[node])) {\n          sources.push(this.getCell(node));\n        }\n      }.bind(this));\n      return sources;\n    },\n    // Get all the leafs of the graph. Time complexity: O(|V|).\n    getSinks: function () {\n      var sinks = [];\n      forIn(this._nodes, function (exists, node) {\n        if (!this._out[node] || isEmpty(this._out[node])) {\n          sinks.push(this.getCell(node));\n        }\n      }.bind(this));\n      return sinks;\n    },\n    // Return `true` if `element` is a root. Time complexity: O(1).\n    isSource: function (element) {\n      return !this._in[element.id] || isEmpty(this._in[element.id]);\n    },\n    // Return `true` if `element` is a leaf. Time complexity: O(1).\n    isSink: function (element) {\n      return !this._out[element.id] || isEmpty(this._out[element.id]);\n    },\n    // Return `true` is `elementB` is a successor of `elementA`. Return `false` otherwise.\n    isSuccessor: function (elementA, elementB) {\n      var isSuccessor = false;\n      this.search(elementA, function (element) {\n        if (element === elementB && element !== elementA) {\n          isSuccessor = true;\n          return false;\n        }\n      }, {\n        outbound: true\n      });\n      return isSuccessor;\n    },\n    // Return `true` is `elementB` is a predecessor of `elementA`. Return `false` otherwise.\n    isPredecessor: function (elementA, elementB) {\n      var isPredecessor = false;\n      this.search(elementA, function (element) {\n        if (element === elementB && element !== elementA) {\n          isPredecessor = true;\n          return false;\n        }\n      }, {\n        inbound: true\n      });\n      return isPredecessor;\n    },\n    // Return `true` is `elementB` is a neighbor of `elementA`. Return `false` otherwise.\n    // `opt.deep` controls whether to take into account embedded elements as well. See `getNeighbors()`\n    // for more details.\n    // If `opt.outbound` is set to `true`, return `true` only if `elementB` is a successor neighbor.\n    // Similarly, if `opt.inbound` is set to `true`, return `true` only if `elementB` is a predecessor neighbor.\n    isNeighbor: function (elementA, elementB, opt) {\n      opt = opt || {};\n      var inbound = opt.inbound;\n      var outbound = opt.outbound;\n      if (inbound === undefined && outbound === undefined) {\n        inbound = outbound = true;\n      }\n      var isNeighbor = false;\n      this.getConnectedLinks(elementA, opt).forEach(function (link) {\n        var ref = link.attributes;\n        var source = ref.source;\n        var target = ref.target;\n\n        // Discard if it is a point.\n        if (inbound && has$2(source, 'id') && source.id === elementB.id) {\n          isNeighbor = true;\n          return false;\n        }\n\n        // Discard if it is a point, or if the neighbor was already added.\n        if (outbound && has$2(target, 'id') && target.id === elementB.id) {\n          isNeighbor = true;\n          return false;\n        }\n      });\n      return isNeighbor;\n    },\n    // Disconnect links connected to the cell `model`.\n    disconnectLinks: function (model, opt) {\n      this.getConnectedLinks(model).forEach(function (link) {\n        link.set(link.attributes.source.id === model.id ? 'source' : 'target', {\n          x: 0,\n          y: 0\n        }, opt);\n      });\n    },\n    // Remove links connected to the cell `model` completely.\n    removeLinks: function (model, opt) {\n      invoke(this.getConnectedLinks(model), 'remove', opt);\n    },\n    // Find all elements at given point\n    findModelsFromPoint: function (p) {\n      return this.getElements().filter(function (el) {\n        return el.getBBox({\n          rotate: true\n        }).containsPoint(p);\n      });\n    },\n    // Find all elements in given area\n    findModelsInArea: function (rect, opt) {\n      if (opt === void 0) opt = {};\n      var r = new Rect(rect);\n      var strict = opt.strict;\n      if (strict === void 0) strict = false;\n      var method = strict ? 'containsRect' : 'intersect';\n      return this.getElements().filter(function (el) {\n        return r[method](el.getBBox({\n          rotate: true\n        }));\n      });\n    },\n    // Find all elements under the given element.\n    findModelsUnderElement: function (element, opt) {\n      if (opt === void 0) opt = {};\n      var searchBy = opt.searchBy;\n      if (searchBy === void 0) searchBy = 'bbox';\n      var bbox = element.getBBox().rotateAroundCenter(element.angle());\n      var elements = searchBy === 'bbox' ? this.findModelsInArea(bbox) : this.findModelsFromPoint(getRectPoint(bbox, searchBy));\n      // don't account element itself or any of its descendants\n      return elements.filter(function (el) {\n        return element.id !== el.id && !el.isEmbeddedIn(element);\n      });\n    },\n    // Return bounding box of all elements.\n    getBBox: function () {\n      return this.getCellsBBox(this.getCells());\n    },\n    // Return the bounding box of all cells in array provided.\n    getCellsBBox: function (cells, opt) {\n      if (opt === void 0) opt = {};\n      var rotate = opt.rotate;\n      if (rotate === void 0) rotate = true;\n      return toArray(cells).reduce(function (memo, cell) {\n        var rect = cell.getBBox({\n          rotate: rotate\n        });\n        if (!rect) {\n          return memo;\n        }\n        if (memo) {\n          return memo.union(rect);\n        }\n        return rect;\n      }, null);\n    },\n    translate: function (dx, dy, opt) {\n      // Don't translate cells that are embedded in any other cell.\n      var cells = this.getCells().filter(function (cell) {\n        return !cell.isEmbedded();\n      });\n      invoke(cells, 'translate', dx, dy, opt);\n      return this;\n    },\n    resize: function (width, height, opt) {\n      return this.resizeCells(width, height, this.getCells(), opt);\n    },\n    resizeCells: function (width, height, cells, opt) {\n      // `getBBox` method returns `null` if no elements provided.\n      // i.e. cells can be an array of links\n      var bbox = this.getCellsBBox(cells);\n      if (bbox) {\n        var sx = Math.max(width / bbox.width, 0);\n        var sy = Math.max(height / bbox.height, 0);\n        invoke(cells, 'scale', sx, sy, bbox.origin(), opt);\n      }\n      return this;\n    },\n    startBatch: function (name, data) {\n      data = data || {};\n      this._batches[name] = (this._batches[name] || 0) + 1;\n      return this.trigger('batch:start', assign({}, data, {\n        batchName: name\n      }));\n    },\n    stopBatch: function (name, data) {\n      data = data || {};\n      this._batches[name] = (this._batches[name] || 0) - 1;\n      return this.trigger('batch:stop', assign({}, data, {\n        batchName: name\n      }));\n    },\n    hasActiveBatch: function (name) {\n      var batches = this._batches;\n      var names;\n      if (arguments.length === 0) {\n        names = Object.keys(batches);\n      } else if (Array.isArray(name)) {\n        names = name;\n      } else {\n        names = [name];\n      }\n      return names.some(function (batch) {\n        return batches[batch] > 0;\n      });\n    }\n  }, {\n    validations: {\n      multiLinks: function (graph, link) {\n        // Do not allow multiple links to have the same source and target.\n        var ref = link.attributes;\n        var source = ref.source;\n        var target = ref.target;\n        if (source.id && target.id) {\n          var sourceModel = link.getSourceCell();\n          if (sourceModel) {\n            var connectedLinks = graph.getConnectedLinks(sourceModel, {\n              outbound: true\n            });\n            var sameLinks = connectedLinks.filter(function (_link) {\n              var ref = _link.attributes;\n              var _source = ref.source;\n              var _target = ref.target;\n              return _source && _source.id === source.id && (!_source.port || _source.port === source.port) && _target && _target.id === target.id && (!_target.port || _target.port === target.port);\n            });\n            if (sameLinks.length > 1) {\n              return false;\n            }\n          }\n        }\n        return true;\n      },\n      linkPinning: function (_graph, link) {\n        var ref = link.attributes;\n        var source = ref.source;\n        var target = ref.target;\n        return source.id && target.id;\n      }\n    }\n  });\n  wrapWith(Graph.prototype, ['resetCells', 'addCells', 'removeCells'], wrappers.cells);\n  var views = {};\n  var View = Backbone.View.extend({\n    options: {},\n    theme: null,\n    themeClassNamePrefix: addClassNamePrefix('theme-'),\n    requireSetThemeOverride: false,\n    defaultTheme: config.defaultTheme,\n    children: null,\n    childNodes: null,\n    DETACHABLE: true,\n    UPDATE_PRIORITY: 2,\n    FLAG_INSERT: 1 << 30,\n    FLAG_REMOVE: 1 << 29,\n    FLAG_INIT: 1 << 28,\n    constructor: function (options) {\n      this.requireSetThemeOverride = options && !!options.theme;\n      this.options = assign({}, this.options, options);\n      Backbone.View.call(this, options);\n    },\n    initialize: function () {\n      views[this.cid] = this;\n      this.setTheme(this.options.theme || this.defaultTheme);\n      this.init();\n    },\n    unmount: function () {\n      if (this.svgElement) {\n        this.vel.remove();\n      } else {\n        this.$el.remove();\n      }\n    },\n    isMounted: function () {\n      return this.el.parentNode !== null;\n    },\n    renderChildren: function (children) {\n      children || (children = result(this, 'children'));\n      if (children) {\n        var isSVG = this.svgElement;\n        var namespace = V.namespace[isSVG ? 'svg' : 'xhtml'];\n        var doc = parseDOMJSON(children, namespace);\n        (isSVG ? this.vel : this.$el).empty().append(doc.fragment);\n        this.childNodes = doc.selectors;\n      }\n      return this;\n    },\n    findAttribute: function (attributeName, node) {\n      var currentNode = node;\n      while (currentNode && currentNode.nodeType === 1) {\n        var attributeValue = currentNode.getAttribute(attributeName);\n        // attribute found\n        if (attributeValue) {\n          return attributeValue;\n        }\n        // do not climb up the DOM\n        if (currentNode === this.el) {\n          return null;\n        }\n        // try parent node\n        currentNode = currentNode.parentNode;\n      }\n      return null;\n    },\n    // Override the Backbone `_ensureElement()` method in order to create an\n    // svg element (e.g., `<g>`) node that wraps all the nodes of the Cell view.\n    // Expose class name setter as a separate method.\n    _ensureElement: function () {\n      if (!this.el) {\n        var tagName = result(this, 'tagName');\n        var attrs = assign({}, result(this, 'attributes'));\n        var style = assign({}, result(this, 'style'));\n        if (this.id) {\n          attrs.id = result(this, 'id');\n        }\n        this.setElement(this._createElement(tagName));\n        this._setAttributes(attrs);\n        this._setStyle(style);\n      } else {\n        this.setElement(result(this, 'el'));\n      }\n      this._ensureElClassName();\n    },\n    _setAttributes: function (attrs) {\n      if (this.svgElement) {\n        this.vel.attr(attrs);\n      } else {\n        this.$el.attr(attrs);\n      }\n    },\n    _setStyle: function (style) {\n      this.$el.css(style);\n    },\n    _createElement: function (tagName) {\n      if (this.svgElement) {\n        return document.createElementNS(V.namespace.svg, tagName);\n      } else {\n        return document.createElement(tagName);\n      }\n    },\n    // Utilize an alternative DOM manipulation API by\n    // adding an element reference wrapped in Vectorizer.\n    _setElement: function (el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n      if (this.svgElement) {\n        this.vel = V(this.el);\n      }\n    },\n    _ensureElClassName: function () {\n      var className = result(this, 'className');\n      if (!className) {\n        return;\n      }\n      var prefixedClassName = addClassNamePrefix(className);\n      // Note: className removal here kept for backwards compatibility only\n      if (this.svgElement) {\n        this.vel.removeClass(className).addClass(prefixedClassName);\n      } else {\n        this.$el.removeClass(className).addClass(prefixedClassName);\n      }\n    },\n    init: function () {\n      // Intentionally empty.\n      // This method is meant to be overridden.\n    },\n    onRender: function () {\n      // Intentionally empty.\n      // This method is meant to be overridden.\n    },\n    confirmUpdate: function () {\n      // Intentionally empty.\n      // This method is meant to be overridden.\n      return 0;\n    },\n    setTheme: function (theme, opt) {\n      opt = opt || {};\n\n      // Theme is already set, override is required, and override has not been set.\n      // Don't set the theme.\n      if (this.theme && this.requireSetThemeOverride && !opt.override) {\n        return this;\n      }\n      this.removeThemeClassName();\n      this.addThemeClassName(theme);\n      this.onSetTheme(this.theme /* oldTheme */, theme /* newTheme */);\n      this.theme = theme;\n      return this;\n    },\n    addThemeClassName: function (theme) {\n      theme = theme || this.theme;\n      if (!theme) {\n        return this;\n      }\n      var className = this.themeClassNamePrefix + theme;\n      if (this.svgElement) {\n        this.vel.addClass(className);\n      } else {\n        this.$el.addClass(className);\n      }\n      return this;\n    },\n    removeThemeClassName: function (theme) {\n      theme = theme || this.theme;\n      var className = this.themeClassNamePrefix + theme;\n      if (this.svgElement) {\n        this.vel.removeClass(className);\n      } else {\n        this.$el.removeClass(className);\n      }\n      return this;\n    },\n    onSetTheme: function (oldTheme, newTheme) {\n      // Intentionally empty.\n      // This method is meant to be overridden.\n    },\n    remove: function () {\n      this.onRemove();\n      this.undelegateDocumentEvents();\n      views[this.cid] = null;\n      Backbone.View.prototype.remove.apply(this, arguments);\n      return this;\n    },\n    onRemove: function () {\n      // Intentionally empty.\n      // This method is meant to be overridden.\n    },\n    getEventNamespace: function () {\n      // Returns a per-session unique namespace\n      return '.joint-event-ns-' + this.cid;\n    },\n    delegateElementEvents: function (element, events, data) {\n      if (!events) {\n        return this;\n      }\n      data || (data = {});\n      var eventNS = this.getEventNamespace();\n      for (var eventName in events) {\n        var method = events[eventName];\n        if (typeof method !== 'function') {\n          method = this[method];\n        }\n        if (!method) {\n          continue;\n        }\n        $(element).on(eventName + eventNS, data, method.bind(this));\n      }\n      return this;\n    },\n    undelegateElementEvents: function (element) {\n      $(element).off(this.getEventNamespace());\n      return this;\n    },\n    delegateDocumentEvents: function (events, data) {\n      events || (events = result(this, 'documentEvents'));\n      return this.delegateElementEvents(document, events, data);\n    },\n    undelegateDocumentEvents: function () {\n      return this.undelegateElementEvents(document);\n    },\n    eventData: function (evt, data) {\n      if (!evt) {\n        throw new Error('eventData(): event object required.');\n      }\n      var currentData = evt.data;\n      var key = '__' + this.cid + '__';\n      if (data === undefined) {\n        if (!currentData) {\n          return {};\n        }\n        return currentData[key] || {};\n      }\n      currentData || (currentData = evt.data = {});\n      currentData[key] || (currentData[key] = {});\n      assign(currentData[key], data);\n      return this;\n    },\n    stopPropagation: function (evt) {\n      this.eventData(evt, {\n        propagationStopped: true\n      });\n      return this;\n    },\n    isPropagationStopped: function (evt) {\n      return !!this.eventData(evt).propagationStopped;\n    }\n  }, {\n    extend: function () {\n      var args = Array.from(arguments);\n\n      // Deep clone the prototype and static properties objects.\n      // This prevents unexpected behavior where some properties are overwritten outside of this function.\n      var protoProps = args[0] && assign({}, args[0]) || {};\n      var staticProps = args[1] && assign({}, args[1]) || {};\n\n      // Need the real render method so that we can wrap it and call it later.\n      var renderFn = protoProps.render || this.prototype && this.prototype.render || null;\n\n      /*\n          Wrap the real render method so that:\n              .. `onRender` is always called.\n              .. `this` is always returned.\n      */\n      protoProps.render = function () {\n        if (typeof renderFn === 'function') {\n          // Call the original render method.\n          renderFn.apply(this, arguments);\n        }\n        if (this.render.__render__ === renderFn) {\n          // Should always call onRender() method.\n          // Should call it only once when renderFn is actual prototype method i.e. not the wrapper\n          this.onRender();\n        }\n\n        // Should always return itself.\n        return this;\n      };\n      protoProps.render.__render__ = renderFn;\n      return Backbone.View.extend.call(this, protoProps, staticProps);\n    }\n  });\n  var DoubleTapEventName = 'dbltap';\n  if ($.event && !(DoubleTapEventName in $.event.special)) {\n    var maxDelay = config.doubleTapInterval;\n    var minDelay = 30;\n    $.event.special[DoubleTapEventName] = {\n      bindType: 'touchend',\n      delegateType: 'touchend',\n      handle: function (event) {\n        var ref;\n        var args = [],\n          len = arguments.length - 1;\n        while (len-- > 0) args[len] = arguments[len + 1];\n        var handleObj = event.handleObj;\n        var target = event.target;\n        var targetData = $.data(target);\n        var now = new Date().getTime();\n        var delta = 'lastTouch' in targetData ? now - targetData.lastTouch : 0;\n        if (delta < maxDelay && delta > minDelay) {\n          targetData.lastTouch = null;\n          event.type = handleObj.origType;\n          // let jQuery handle the triggering of \"dbltap\" event handlers\n          (ref = handleObj.handler).call.apply(ref, [this, event].concat(args));\n        } else {\n          targetData.lastTouch = now;\n        }\n      }\n    };\n  }\n  var Listener = function Listener() {\n    var callbackArguments = [],\n      len = arguments.length;\n    while (len--) callbackArguments[len] = arguments[len];\n    this.callbackArguments = callbackArguments;\n  };\n  Listener.prototype.listenTo = function listenTo(object, evt) {\n    var this$1 = this;\n    var args = [],\n      len = arguments.length - 2;\n    while (len-- > 0) args[len] = arguments[len + 2];\n    var ref = this;\n    var callbackArguments = ref.callbackArguments;\n    // signature 1 - (object, eventHashMap, context)\n    if (V.isObject(evt)) {\n      var context = args[0];\n      if (context === void 0) context = null;\n      Object.entries(evt).forEach(function (ref) {\n        var eventName = ref[0];\n        var cb = ref[1];\n        if (typeof cb !== 'function') {\n          return;\n        }\n        // Invoke the callback with callbackArguments passed first\n        if (context || callbackArguments.length > 0) {\n          cb = cb.bind.apply(cb, [context].concat(callbackArguments));\n        }\n        Backbone.Events.listenTo.call(this$1, object, eventName, cb);\n      });\n    }\n    // signature 2 - (object, event, callback, context)\n    else if (typeof evt === 'string' && typeof args[0] === 'function') {\n      var cb = args[0];\n      var context$1 = args[1];\n      if (context$1 === void 0) context$1 = null;\n      // Invoke the callback with callbackArguments passed first\n      if (context$1 || callbackArguments.length > 0) {\n        cb = cb.bind.apply(cb, [context$1].concat(callbackArguments));\n      }\n      Backbone.Events.listenTo.call(this, object, evt, cb);\n    }\n  };\n  Listener.prototype.stopListening = function stopListening() {\n    Backbone.Events.stopListening.call(this);\n  };\n  var index$1 = {\n    views: views,\n    View: View,\n    Listener: Listener\n  };\n  var LayersNames = {\n    CELLS: 'cells',\n    BACK: 'back',\n    FRONT: 'front',\n    TOOLS: 'tools',\n    LABELS: 'labels'\n  };\n  var PaperLayer = View.extend({\n    tagName: 'g',\n    svgElement: true,\n    pivotNodes: null,\n    defaultTheme: null,\n    options: {\n      name: ''\n    },\n    className: function () {\n      return addClassNamePrefix(this.options.name + \"-layer\");\n    },\n    init: function () {\n      this.pivotNodes = {};\n    },\n    insertSortedNode: function (node, z) {\n      this.el.insertBefore(node, this.insertPivot(z));\n    },\n    insertNode: function (node) {\n      var ref = this;\n      var el = ref.el;\n      if (node.parentNode !== el) {\n        el.appendChild(node);\n      }\n    },\n    insertPivot: function (z) {\n      var ref = this;\n      var el = ref.el;\n      var pivotNodes = ref.pivotNodes;\n      z = +z;\n      z || (z = 0);\n      var pivotNode = pivotNodes[z];\n      if (pivotNode) {\n        return pivotNode;\n      }\n      pivotNode = pivotNodes[z] = document.createComment('z-index:' + (z + 1));\n      var neighborZ = -Infinity;\n      for (var currentZ in pivotNodes) {\n        currentZ = +currentZ;\n        if (currentZ < z && currentZ > neighborZ) {\n          neighborZ = currentZ;\n          if (neighborZ === z - 1) {\n            continue;\n          }\n        }\n      }\n      if (neighborZ !== -Infinity) {\n        var neighborPivot = pivotNodes[neighborZ];\n        // Insert After\n        el.insertBefore(pivotNode, neighborPivot.nextSibling);\n      } else {\n        // First Child\n        el.insertBefore(pivotNode, el.firstChild);\n      }\n      return pivotNode;\n    },\n    removePivots: function () {\n      var ref = this;\n      var el = ref.el;\n      var pivotNodes = ref.pivotNodes;\n      for (var z in pivotNodes) {\n        el.removeChild(pivotNodes[z]);\n      }\n      this.pivotNodes = {};\n    }\n  });\n  function toArray$1(obj) {\n    if (!obj) {\n      return [];\n    }\n    if (Array.isArray(obj)) {\n      return obj;\n    }\n    return [obj];\n  }\n  var HighlighterView = View.extend({\n    tagName: 'g',\n    svgElement: true,\n    className: 'highlight',\n    HIGHLIGHT_FLAG: 1,\n    UPDATE_PRIORITY: 3,\n    DETACHABLE: false,\n    UPDATABLE: true,\n    MOUNTABLE: true,\n    cellView: null,\n    nodeSelector: null,\n    node: null,\n    updateRequested: false,\n    postponedUpdate: false,\n    transformGroup: null,\n    detachedTransformGroup: null,\n    requestUpdate: function requestUpdate(cellView, nodeSelector) {\n      var paper = cellView.paper;\n      this.cellView = cellView;\n      this.nodeSelector = nodeSelector;\n      if (paper) {\n        this.updateRequested = true;\n        paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n      }\n    },\n    confirmUpdate: function confirmUpdate() {\n      // The cellView is now rendered/updated since it has a higher update priority.\n      this.updateRequested = false;\n      var ref = this;\n      var cellView = ref.cellView;\n      var nodeSelector = ref.nodeSelector;\n      if (!cellView.isMounted()) {\n        this.postponedUpdate = true;\n        return 0;\n      }\n      this.update(cellView, nodeSelector);\n      this.mount();\n      this.transform();\n      return 0;\n    },\n    findNode: function findNode(cellView, nodeSelector) {\n      var assign, assign$1;\n      if (nodeSelector === void 0) nodeSelector = null;\n      var el;\n      if (typeof nodeSelector === 'string') {\n        assign = cellView.findBySelector(nodeSelector), el = assign[0];\n      } else if (isPlainObject(nodeSelector)) {\n        var isLink = cellView.model.isLink();\n        var label = nodeSelector.label;\n        if (label === void 0) label = null;\n        var port = nodeSelector.port;\n        var selector = nodeSelector.selector;\n        if (isLink && label !== null) {\n          // Link Label Selector\n          el = cellView.findLabelNode(label, selector);\n        } else if (!isLink && port) {\n          // Element Port Selector\n          el = cellView.findPortNode(port, selector);\n        } else {\n          // Cell Selector\n          assign$1 = cellView.findBySelector(selector), el = assign$1[0];\n        }\n      } else if (nodeSelector) {\n        el = V.toNode(nodeSelector);\n        if (!(el instanceof SVGElement)) {\n          el = null;\n        }\n      }\n      return el ? el : null;\n    },\n    getNodeMatrix: function getNodeMatrix(cellView, node) {\n      var ref = this;\n      var options = ref.options;\n      var layer = options.layer;\n      var rotatableNode = cellView.rotatableNode;\n      var nodeMatrix = cellView.getNodeMatrix(node);\n      if (rotatableNode) {\n        if (layer) {\n          if (rotatableNode.contains(node)) {\n            return nodeMatrix;\n          }\n          // The node is outside of the rotatable group.\n          // Compensate the rotation set by transformGroup.\n          return cellView.getRootRotateMatrix().inverse().multiply(nodeMatrix);\n        } else {\n          return cellView.getNodeRotateMatrix(node).multiply(nodeMatrix);\n        }\n      }\n      return nodeMatrix;\n    },\n    mount: function mount() {\n      var ref = this;\n      var MOUNTABLE = ref.MOUNTABLE;\n      var cellView = ref.cellView;\n      var el = ref.el;\n      var options = ref.options;\n      var transformGroup = ref.transformGroup;\n      var detachedTransformGroup = ref.detachedTransformGroup;\n      var postponedUpdate = ref.postponedUpdate;\n      var nodeSelector = ref.nodeSelector;\n      if (!MOUNTABLE || transformGroup) {\n        return;\n      }\n      if (postponedUpdate) {\n        // The cellView was not mounted when the update was requested.\n        // The update was postponed until the cellView is mounted.\n        this.update(cellView, nodeSelector);\n        this.transform();\n        return;\n      }\n      var cellViewRoot = cellView.vel;\n      var paper = cellView.paper;\n      var layerName = options.layer;\n      if (layerName) {\n        var vGroup;\n        if (detachedTransformGroup) {\n          vGroup = detachedTransformGroup;\n          this.detachedTransformGroup = null;\n        } else {\n          vGroup = V('g').addClass('highlight-transform').append(el);\n        }\n        this.transformGroup = vGroup;\n        paper.getLayerView(layerName).insertSortedNode(vGroup.node, options.z);\n      } else {\n        // TODO: prepend vs append\n        if (!el.parentNode || el.nextSibling) {\n          // Not appended yet or not the last child\n          cellViewRoot.append(el);\n        }\n      }\n    },\n    unmount: function unmount() {\n      var ref = this;\n      var MOUNTABLE = ref.MOUNTABLE;\n      var transformGroup = ref.transformGroup;\n      var vel = ref.vel;\n      if (!MOUNTABLE) {\n        return;\n      }\n      if (transformGroup) {\n        this.transformGroup = null;\n        this.detachedTransformGroup = transformGroup;\n        transformGroup.remove();\n      } else {\n        vel.remove();\n      }\n    },\n    transform: function transform() {\n      var ref = this;\n      var transformGroup = ref.transformGroup;\n      var cellView = ref.cellView;\n      var updateRequested = ref.updateRequested;\n      if (!transformGroup || cellView.model.isLink() || updateRequested) {\n        return;\n      }\n      var translateMatrix = cellView.getRootTranslateMatrix();\n      var rotateMatrix = cellView.getRootRotateMatrix();\n      var transformMatrix = translateMatrix.multiply(rotateMatrix);\n      transformGroup.attr('transform', V.matrixToTransformString(transformMatrix));\n    },\n    update: function update() {\n      var ref = this;\n      var prevNode = ref.node;\n      var cellView = ref.cellView;\n      var nodeSelector = ref.nodeSelector;\n      var updateRequested = ref.updateRequested;\n      var id = ref.id;\n      if (updateRequested) {\n        return;\n      }\n      this.postponedUpdate = false;\n      var node = this.node = this.findNode(cellView, nodeSelector);\n      if (prevNode) {\n        this.unhighlight(cellView, prevNode);\n      }\n      if (node) {\n        this.highlight(cellView, node);\n        this.mount();\n      } else {\n        this.unmount();\n        cellView.notify('cell:highlight:invalid', id, this);\n      }\n    },\n    onRemove: function onRemove() {\n      var ref = this;\n      var node = ref.node;\n      var cellView = ref.cellView;\n      var id = ref.id;\n      var constructor = ref.constructor;\n      if (node) {\n        this.unhighlight(cellView, node);\n      }\n      this.unmount();\n      constructor._removeRef(cellView, id);\n    },\n    highlight: function highlight(_cellView, _node) {\n      // to be overridden\n    },\n    unhighlight: function unhighlight(_cellView, _node) {\n      // to be overridden\n    },\n    // Update Attributes\n\n    listenToUpdateAttributes: function listenToUpdateAttributes(cellView) {\n      var attributes = result(this, 'UPDATE_ATTRIBUTES');\n      if (!Array.isArray(attributes) || attributes.length === 0) {\n        return;\n      }\n      this.listenTo(cellView.model, 'change', this.onCellAttributeChange);\n    },\n    onCellAttributeChange: function onCellAttributeChange() {\n      var ref = this;\n      var cellView = ref.cellView;\n      if (!cellView) {\n        return;\n      }\n      var model = cellView.model;\n      var paper = cellView.paper;\n      var attributes = result(this, 'UPDATE_ATTRIBUTES');\n      if (!attributes.some(function (attribute) {\n        return model.hasChanged(attribute);\n      })) {\n        return;\n      }\n      paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n    }\n  }, {\n    _views: {},\n    // Used internally by CellView highlight()\n    highlight: function (cellView, node, opt) {\n      var id = this.uniqueId(node, opt);\n      this.add(cellView, node, id, opt);\n    },\n    // Used internally by CellView unhighlight()\n    unhighlight: function (cellView, node, opt) {\n      var id = this.uniqueId(node, opt);\n      this.remove(cellView, id);\n    },\n    get: function get(cellView, id) {\n      if (id === void 0) id = null;\n      var cid = cellView.cid;\n      var ref$2 = this;\n      var _views = ref$2._views;\n      var refs = _views[cid];\n      if (id === null) {\n        // all highlighters\n        var views = [];\n        if (!refs) {\n          return views;\n        }\n        for (var hid in refs) {\n          var ref = refs[hid];\n          if (ref instanceof this) {\n            views.push(ref);\n          }\n        }\n        return views;\n      } else {\n        // single highlighter\n        if (!refs) {\n          return null;\n        }\n        if (id in refs) {\n          var ref$1 = refs[id];\n          if (ref$1 instanceof this) {\n            return ref$1;\n          }\n        }\n        return null;\n      }\n    },\n    add: function add(cellView, nodeSelector, id, opt) {\n      if (opt === void 0) opt = {};\n      if (!id) {\n        throw new Error('dia.HighlighterView: An ID required.');\n      }\n      // Search the existing view amongst all the highlighters\n      var previousView = HighlighterView.get(cellView, id);\n      if (previousView) {\n        previousView.remove();\n      }\n      var view = new this(opt);\n      view.id = id;\n      this._addRef(cellView, id, view);\n      view.requestUpdate(cellView, nodeSelector);\n      view.listenToUpdateAttributes(cellView);\n      return view;\n    },\n    _addRef: function _addRef(cellView, id, view) {\n      var cid = cellView.cid;\n      var ref = this;\n      var _views = ref._views;\n      var refs = _views[cid];\n      if (!refs) {\n        refs = _views[cid] = {};\n      }\n      refs[id] = view;\n    },\n    _removeRef: function _removeRef(cellView, id) {\n      var cid = cellView.cid;\n      var ref = this;\n      var _views = ref._views;\n      var refs = _views[cid];\n      if (!refs) {\n        return;\n      }\n      if (id) {\n        delete refs[id];\n      }\n      for (var _ in refs) {\n        return;\n      }\n      delete _views[cid];\n    },\n    remove: function remove(cellView, id) {\n      if (id === void 0) id = null;\n      toArray$1(this.get(cellView, id)).forEach(function (view) {\n        view.remove();\n      });\n    },\n    removeAll: function removeAll(paper, id) {\n      if (id === void 0) id = null;\n      var ref = this;\n      var _views = ref._views;\n      for (var cid in _views) {\n        for (var hid in _views[cid]) {\n          var view = _views[cid][hid];\n          if (view.cellView.paper === paper && view instanceof this && (id === null || hid === id)) {\n            view.remove();\n          }\n        }\n      }\n    },\n    update: function update(cellView, id, dirty) {\n      if (id === void 0) id = null;\n      if (dirty === void 0) dirty = false;\n      toArray$1(this.get(cellView, id)).forEach(function (view) {\n        if (dirty || view.UPDATABLE) {\n          view.update();\n        }\n      });\n    },\n    transform: function transform(cellView, id) {\n      if (id === void 0) id = null;\n      toArray$1(this.get(cellView, id)).forEach(function (view) {\n        if (view.UPDATABLE) {\n          view.transform();\n        }\n      });\n    },\n    unmount: function unmount(cellView, id) {\n      if (id === void 0) id = null;\n      toArray$1(this.get(cellView, id)).forEach(function (view) {\n        return view.unmount();\n      });\n    },\n    mount: function mount(cellView, id) {\n      if (id === void 0) id = null;\n      toArray$1(this.get(cellView, id)).forEach(function (view) {\n        return view.mount();\n      });\n    },\n    uniqueId: function uniqueId(node, opt) {\n      if (opt === void 0) opt = '';\n      return V.ensureId(node) + JSON.stringify(opt);\n    }\n  });\n  var HighlightingTypes = {\n    DEFAULT: 'default',\n    EMBEDDING: 'embedding',\n    CONNECTING: 'connecting',\n    MAGNET_AVAILABILITY: 'magnetAvailability',\n    ELEMENT_AVAILABILITY: 'elementAvailability'\n  };\n  var Flags = {\n    TOOLS: 'TOOLS'\n  };\n\n  // CellView base view and controller.\n  // --------------------------------------------\n\n  // This is the base view and controller for `ElementView` and `LinkView`.\n  var CellView = View.extend({\n    tagName: 'g',\n    svgElement: true,\n    selector: 'root',\n    metrics: null,\n    className: function () {\n      var classNames = ['cell'];\n      var type = this.model.get('type');\n      if (type) {\n        type.toLowerCase().split('.').forEach(function (value, index, list) {\n          classNames.push('type-' + list.slice(0, index + 1).join('-'));\n        });\n      }\n      return classNames.join(' ');\n    },\n    _presentationAttributes: null,\n    _flags: null,\n    setFlags: function () {\n      var flags = {};\n      var attributes = {};\n      var shift = 0;\n      var i, n, label;\n      var presentationAttributes = result(this, 'presentationAttributes');\n      for (var attribute in presentationAttributes) {\n        if (!presentationAttributes.hasOwnProperty(attribute)) {\n          continue;\n        }\n        var labels = presentationAttributes[attribute];\n        if (!Array.isArray(labels)) {\n          labels = [labels];\n        }\n        for (i = 0, n = labels.length; i < n; i++) {\n          label = labels[i];\n          var flag = flags[label];\n          if (!flag) {\n            flag = flags[label] = 1 << shift++;\n          }\n          attributes[attribute] |= flag;\n        }\n      }\n      var initFlag = result(this, 'initFlag');\n      if (!Array.isArray(initFlag)) {\n        initFlag = [initFlag];\n      }\n      for (i = 0, n = initFlag.length; i < n; i++) {\n        label = initFlag[i];\n        if (!flags[label]) {\n          flags[label] = 1 << shift++;\n        }\n      }\n\n      // 26 - 30 are reserved for paper flags\n      // 31+ overflows maximal number\n      if (shift > 25) {\n        throw new Error('dia.CellView: Maximum number of flags exceeded.');\n      }\n      this._flags = flags;\n      this._presentationAttributes = attributes;\n    },\n    hasFlag: function (flag, label) {\n      return flag & this.getFlag(label);\n    },\n    removeFlag: function (flag, label) {\n      return flag ^ flag & this.getFlag(label);\n    },\n    getFlag: function (label) {\n      var flags = this._flags;\n      if (!flags) {\n        return 0;\n      }\n      var flag = 0;\n      if (Array.isArray(label)) {\n        for (var i = 0, n = label.length; i < n; i++) {\n          flag |= flags[label[i]];\n        }\n      } else {\n        flag |= flags[label];\n      }\n      return flag;\n    },\n    attributes: function () {\n      var cell = this.model;\n      return {\n        'model-id': cell.id,\n        'data-type': cell.attributes.type\n      };\n    },\n    constructor: function (options) {\n      // Make sure a global unique id is assigned to this view. Store this id also to the properties object.\n      // The global unique id makes sure that the same view can be rendered on e.g. different machines and\n      // still be associated to the same object among all those clients. This is necessary for real-time\n      // collaboration mechanism.\n      options.id = options.id || guid(this);\n      View.call(this, options);\n    },\n    initialize: function () {\n      this.setFlags();\n      View.prototype.initialize.apply(this, arguments);\n      this.cleanNodesCache();\n\n      // Store reference to this to the <g> DOM element so that the view is accessible through the DOM tree.\n      this.$el.data('view', this);\n      this.startListening();\n    },\n    startListening: function () {\n      this.listenTo(this.model, 'change', this.onAttributesChange);\n    },\n    onAttributesChange: function (model, opt) {\n      var flag = model.getChangeFlag(this._presentationAttributes);\n      if (opt.updateHandled || !flag) {\n        return;\n      }\n      if (opt.dirty && this.hasFlag(flag, 'UPDATE')) {\n        flag |= this.getFlag('RENDER');\n      }\n      // TODO: tool changes does not need to be sync\n      // Fix Segments tools\n      if (opt.tool) {\n        opt.async = false;\n      }\n      this.requestUpdate(flag, opt);\n    },\n    requestUpdate: function (flags, opt) {\n      var ref = this;\n      var paper = ref.paper;\n      if (paper && flags > 0) {\n        paper.requestViewUpdate(this, flags, this.UPDATE_PRIORITY, opt);\n      }\n    },\n    parseDOMJSON: function (markup, root) {\n      var doc = parseDOMJSON(markup);\n      var selectors = doc.selectors;\n      var groups = doc.groupSelectors;\n      for (var group in groups) {\n        if (selectors[group]) {\n          throw new Error('dia.CellView: ambiguous group selector');\n        }\n        selectors[group] = groups[group];\n      }\n      if (root) {\n        var rootSelector = this.selector;\n        if (selectors[rootSelector]) {\n          throw new Error('dia.CellView: ambiguous root selector.');\n        }\n        selectors[rootSelector] = root;\n      }\n      return {\n        fragment: doc.fragment,\n        selectors: selectors\n      };\n    },\n    // Return `true` if cell link is allowed to perform a certain UI `feature`.\n    // Example: `can('vertexMove')`, `can('labelMove')`.\n    can: function (feature) {\n      var interactive = isFunction(this.options.interactive) ? this.options.interactive(this) : this.options.interactive;\n      return isObject$1(interactive) && interactive[feature] !== false || isBoolean(interactive) && interactive !== false;\n    },\n    findBySelector: function (selector, root, selectors) {\n      root || (root = this.el);\n      selectors || (selectors = this.selectors);\n\n      // These are either descendants of `this.$el` of `this.$el` itself.\n      // `.` is a special selector used to select the wrapping `<g>` element.\n      if (!selector || selector === '.') {\n        return [root];\n      }\n      if (selectors) {\n        var nodes = selectors[selector];\n        if (nodes) {\n          if (Array.isArray(nodes)) {\n            return nodes;\n          }\n          return [nodes];\n        }\n      }\n\n      // Maintaining backwards compatibility\n      // e.g. `circle:first` would fail with querySelector() call\n      if (config.useCSSSelectors) {\n        return $(root).find(selector).toArray();\n      }\n      return [];\n    },\n    notify: function (eventName) {\n      if (this.paper) {\n        var args = Array.prototype.slice.call(arguments, 1);\n\n        // Trigger the event on both the element itself and also on the paper.\n        this.trigger.apply(this, [eventName].concat(args));\n\n        // Paper event handlers receive the view object as the first argument.\n        this.paper.trigger.apply(this.paper, [eventName, this].concat(args));\n      }\n    },\n    getBBox: function (opt) {\n      var bbox;\n      if (opt && opt.useModelGeometry) {\n        var model = this.model;\n        bbox = model.getBBox().bbox(model.angle());\n      } else {\n        bbox = this.getNodeBBox(this.el);\n      }\n      return this.paper.localToPaperRect(bbox);\n    },\n    getNodeBBox: function (magnet) {\n      var rect = this.getNodeBoundingRect(magnet);\n      var transformMatrix = this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(magnet));\n      var magnetMatrix = this.getNodeMatrix(magnet);\n      return V.transformRect(rect, transformMatrix.multiply(magnetMatrix));\n    },\n    getNodeRotateMatrix: function getNodeRotateMatrix(node) {\n      if (!this.rotatableNode || this.rotatableNode.contains(node)) {\n        // Rotate transformation is applied to all nodes when no rotatableGroup\n        // is present or to nodes inside the rotatableGroup only.\n        return this.getRootRotateMatrix();\n      }\n      // Nodes outside the rotatable group\n      return V.createSVGMatrix();\n    },\n    getNodeUnrotatedBBox: function (magnet) {\n      var rect = this.getNodeBoundingRect(magnet);\n      var magnetMatrix = this.getNodeMatrix(magnet);\n      var translateMatrix = this.getRootTranslateMatrix();\n      return V.transformRect(rect, translateMatrix.multiply(magnetMatrix));\n    },\n    getRootTranslateMatrix: function () {\n      var model = this.model;\n      var position = model.position();\n      var mt = V.createSVGMatrix().translate(position.x, position.y);\n      return mt;\n    },\n    getRootRotateMatrix: function () {\n      var mr = V.createSVGMatrix();\n      var model = this.model;\n      var angle = model.angle();\n      if (angle) {\n        var bbox = model.getBBox();\n        var cx = bbox.width / 2;\n        var cy = bbox.height / 2;\n        mr = mr.translate(cx, cy).rotate(angle).translate(-cx, -cy);\n      }\n      return mr;\n    },\n    _notifyHighlight: function (eventName, el, opt) {\n      var assign, assign$1;\n      if (opt === void 0) opt = {};\n      var ref = this;\n      var rootNode = ref.el;\n      var node;\n      if (typeof el === 'string') {\n        assign = this.findBySelector(el), node = assign[0], node = node === void 0 ? rootNode : node;\n      } else {\n        assign$1 = this.$(el), node = assign$1[0], node = node === void 0 ? rootNode : node;\n      }\n      // set partial flag if the highlighted element is not the entire view.\n      opt.partial = node !== rootNode;\n      // translate type flag into a type string\n      if (opt.type === undefined) {\n        var type;\n        switch (true) {\n          case opt.embedding:\n            type = HighlightingTypes.EMBEDDING;\n            break;\n          case opt.connecting:\n            type = HighlightingTypes.CONNECTING;\n            break;\n          case opt.magnetAvailability:\n            type = HighlightingTypes.MAGNET_AVAILABILITY;\n            break;\n          case opt.elementAvailability:\n            type = HighlightingTypes.ELEMENT_AVAILABILITY;\n            break;\n          default:\n            type = HighlightingTypes.DEFAULT;\n            break;\n        }\n        opt.type = type;\n      }\n      this.notify(eventName, node, opt);\n      return this;\n    },\n    highlight: function (el, opt) {\n      return this._notifyHighlight('cell:highlight', el, opt);\n    },\n    unhighlight: function (el, opt) {\n      if (opt === void 0) opt = {};\n      return this._notifyHighlight('cell:unhighlight', el, opt);\n    },\n    // Find the closest element that has the `magnet` attribute set to `true`. If there was not such\n    // an element found, return the root element of the cell view.\n    findMagnet: function (el) {\n      var root = this.el;\n      var magnet = this.$(el)[0];\n      if (!magnet) {\n        magnet = root;\n      }\n      do {\n        var magnetAttribute = magnet.getAttribute('magnet');\n        var isMagnetRoot = magnet === root;\n        if ((magnetAttribute || isMagnetRoot) && magnetAttribute !== 'false') {\n          return magnet;\n        }\n        if (isMagnetRoot) {\n          // If the overall cell has set `magnet === false`, then return `undefined` to\n          // announce there is no magnet found for this cell.\n          // This is especially useful to set on cells that have 'ports'. In this case,\n          // only the ports have set `magnet === true` and the overall element has `magnet === false`.\n          return undefined;\n        }\n        magnet = magnet.parentNode;\n      } while (magnet);\n      return undefined;\n    },\n    findProxyNode: function (el, type) {\n      el || (el = this.el);\n      var nodeSelector = el.getAttribute(type + \"-selector\");\n      if (nodeSelector) {\n        var ref = this.findBySelector(nodeSelector);\n        var proxyNode = ref[0];\n        if (proxyNode) {\n          return proxyNode;\n        }\n      }\n      return el;\n    },\n    // Construct a unique selector for the `el` element within this view.\n    // `prevSelector` is being collected through the recursive call.\n    // No value for `prevSelector` is expected when using this method.\n    getSelector: function (el, prevSelector) {\n      var selector;\n      if (el === this.el) {\n        if (typeof prevSelector === 'string') {\n          selector = '> ' + prevSelector;\n        }\n        return selector;\n      }\n      if (el) {\n        var nthChild = V(el).index() + 1;\n        selector = el.tagName + ':nth-child(' + nthChild + ')';\n        if (prevSelector) {\n          selector += ' > ' + prevSelector;\n        }\n        selector = this.getSelector(el.parentNode, selector);\n      }\n      return selector;\n    },\n    addLinkFromMagnet: function (magnet, x, y) {\n      var paper = this.paper;\n      var graph = paper.model;\n      var link = paper.getDefaultLink(this, magnet);\n      link.set({\n        source: this.getLinkEnd(magnet, x, y, link, 'source'),\n        target: {\n          x: x,\n          y: y\n        }\n      }).addTo(graph, {\n        async: false,\n        ui: true\n      });\n      return link.findView(paper);\n    },\n    getLinkEnd: function (magnet) {\n      var ref;\n      var args = [],\n        len = arguments.length - 1;\n      while (len-- > 0) args[len] = arguments[len + 1];\n      var model = this.model;\n      var id = model.id;\n      var port = this.findAttribute('port', magnet);\n      // Find a unique `selector` of the element under pointer that is a magnet.\n      var selector = magnet.getAttribute('joint-selector');\n      var end = {\n        id: id\n      };\n      if (selector != null) {\n        end.magnet = selector;\n      }\n      if (port != null) {\n        end.port = port;\n        if (!model.hasPort(port) && !selector) {\n          // port created via the `port` attribute (not API)\n          end.selector = this.getSelector(magnet);\n        }\n      } else if (selector == null && this.el !== magnet) {\n        end.selector = this.getSelector(magnet);\n      }\n      return (ref = this).customizeLinkEnd.apply(ref, [end, magnet].concat(args));\n    },\n    customizeLinkEnd: function (end, magnet, x, y, link, endType) {\n      var ref = this;\n      var paper = ref.paper;\n      var ref$1 = paper.options;\n      var connectionStrategy = ref$1.connectionStrategy;\n      if (typeof connectionStrategy === 'function') {\n        var strategy = connectionStrategy.call(paper, end, this, magnet, new Point(x, y), link, endType, paper);\n        if (strategy) {\n          return strategy;\n        }\n      }\n      return end;\n    },\n    getMagnetFromLinkEnd: function (end) {\n      var root = this.el;\n      var port = end.port;\n      var selector = end.magnet;\n      var model = this.model;\n      var magnet;\n      if (port != null && model.isElement() && model.hasPort(port)) {\n        magnet = this.findPortNode(port, selector) || root;\n      } else {\n        if (!selector) {\n          selector = end.selector;\n        }\n        if (!selector && port != null) {\n          // link end has only `id` and `port` property referencing\n          // a port created via the `port` attribute (not API).\n          selector = '[port=\"' + port + '\"]';\n        }\n        magnet = this.findBySelector(selector, root, this.selectors)[0];\n      }\n      return this.findProxyNode(magnet, 'magnet');\n    },\n    dragLinkStart: function (evt, magnet, x, y) {\n      this.model.startBatch('add-link');\n      var linkView = this.addLinkFromMagnet(magnet, x, y);\n      // backwards compatibility events\n      linkView.notifyPointerdown(evt, x, y);\n      linkView.eventData(evt, linkView.startArrowheadMove('target', {\n        whenNotAllowed: 'remove'\n      }));\n      this.eventData(evt, {\n        linkView: linkView\n      });\n    },\n    dragLink: function (evt, x, y) {\n      var data = this.eventData(evt);\n      var linkView = data.linkView;\n      if (linkView) {\n        linkView.pointermove(evt, x, y);\n      } else {\n        var paper = this.paper;\n        var magnetThreshold = paper.options.magnetThreshold;\n        var currentTarget = this.getEventTarget(evt);\n        var targetMagnet = data.targetMagnet;\n        if (magnetThreshold === 'onleave') {\n          // magnetThreshold when the pointer leaves the magnet\n          if (targetMagnet === currentTarget || V(targetMagnet).contains(currentTarget)) {\n            return;\n          }\n        } else {\n          // magnetThreshold defined as a number of movements\n          if (paper.eventData(evt).mousemoved <= magnetThreshold) {\n            return;\n          }\n        }\n        this.dragLinkStart(evt, targetMagnet, x, y);\n      }\n    },\n    dragLinkEnd: function (evt, x, y) {\n      var data = this.eventData(evt);\n      var linkView = data.linkView;\n      if (!linkView) {\n        return;\n      }\n      linkView.pointerup(evt, x, y);\n      this.model.stopBatch('add-link');\n    },\n    getAttributeDefinition: function (attrName) {\n      return this.model.constructor.getAttributeDefinition(attrName);\n    },\n    setNodeAttributes: function (node, attrs) {\n      if (!isEmpty(attrs)) {\n        if (node instanceof SVGElement) {\n          V(node).attr(attrs);\n        } else {\n          $(node).attr(attrs);\n        }\n      }\n    },\n    processNodeAttributes: function (node, attrs) {\n      var attrName, attrVal, def, i, n;\n      var normalAttrs, setAttrs, positionAttrs, offsetAttrs;\n      var relatives = [];\n      // divide the attributes between normal and special\n      for (attrName in attrs) {\n        if (!attrs.hasOwnProperty(attrName)) {\n          continue;\n        }\n        attrVal = attrs[attrName];\n        def = this.getAttributeDefinition(attrName);\n        if (def && (!isFunction(def.qualify) || def.qualify.call(this, attrVal, node, attrs, this))) {\n          if (isString(def.set)) {\n            normalAttrs || (normalAttrs = {});\n            normalAttrs[def.set] = attrVal;\n          }\n          if (attrVal !== null) {\n            relatives.push(attrName, def);\n          }\n        } else {\n          normalAttrs || (normalAttrs = {});\n          normalAttrs[toKebabCase(attrName)] = attrVal;\n        }\n      }\n\n      // handle the rest of attributes via related method\n      // from the special attributes namespace.\n      for (i = 0, n = relatives.length; i < n; i += 2) {\n        attrName = relatives[i];\n        def = relatives[i + 1];\n        attrVal = attrs[attrName];\n        if (isFunction(def.set)) {\n          setAttrs || (setAttrs = {});\n          setAttrs[attrName] = attrVal;\n        }\n        if (isFunction(def.position)) {\n          positionAttrs || (positionAttrs = {});\n          positionAttrs[attrName] = attrVal;\n        }\n        if (isFunction(def.offset)) {\n          offsetAttrs || (offsetAttrs = {});\n          offsetAttrs[attrName] = attrVal;\n        }\n      }\n      return {\n        raw: attrs,\n        normal: normalAttrs,\n        set: setAttrs,\n        position: positionAttrs,\n        offset: offsetAttrs\n      };\n    },\n    updateRelativeAttributes: function (node, attrs, refBBox, opt) {\n      opt || (opt = {});\n      var attrName, attrVal, def;\n      var rawAttrs = attrs.raw || {};\n      var nodeAttrs = attrs.normal || {};\n      var setAttrs = attrs.set;\n      var positionAttrs = attrs.position;\n      var offsetAttrs = attrs.offset;\n      for (attrName in setAttrs) {\n        attrVal = setAttrs[attrName];\n        def = this.getAttributeDefinition(attrName);\n        // SET - set function should return attributes to be set on the node,\n        // which will affect the node dimensions based on the reference bounding\n        // box. e.g. `width`, `height`, `d`, `rx`, `ry`, `points\n        var setResult = def.set.call(this, attrVal, refBBox.clone(), node, rawAttrs, this);\n        if (isObject$1(setResult)) {\n          assign(nodeAttrs, setResult);\n        } else if (setResult !== undefined) {\n          nodeAttrs[attrName] = setResult;\n        }\n      }\n      if (node instanceof HTMLElement) {\n        // TODO: setting the `transform` attribute on HTMLElements\n        // via `node.style.transform = 'matrix(...)';` would introduce\n        // a breaking change (e.g. basic.TextBlock).\n        this.setNodeAttributes(node, nodeAttrs);\n        return;\n      }\n\n      // The final translation of the subelement.\n      var nodeTransform = nodeAttrs.transform;\n      var nodeMatrix = V.transformStringToMatrix(nodeTransform);\n      var nodePosition = Point(nodeMatrix.e, nodeMatrix.f);\n      if (nodeTransform) {\n        nodeAttrs = omit(nodeAttrs, 'transform');\n        nodeMatrix.e = nodeMatrix.f = 0;\n      }\n\n      // Calculate node scale determined by the scalable group\n      // only if later needed.\n      var sx, sy, translation;\n      if (positionAttrs || offsetAttrs) {\n        var nodeScale = this.getNodeScale(node, opt.scalableNode);\n        sx = nodeScale.sx;\n        sy = nodeScale.sy;\n      }\n      var positioned = false;\n      for (attrName in positionAttrs) {\n        attrVal = positionAttrs[attrName];\n        def = this.getAttributeDefinition(attrName);\n        // POSITION - position function should return a point from the\n        // reference bounding box. The default position of the node is x:0, y:0 of\n        // the reference bounding box or could be further specify by some\n        // SVG attributes e.g. `x`, `y`\n        translation = def.position.call(this, attrVal, refBBox.clone(), node, rawAttrs, this);\n        if (translation) {\n          nodePosition.offset(Point(translation).scale(sx, sy));\n          positioned || (positioned = true);\n        }\n      }\n\n      // The node bounding box could depend on the `size` set from the previous loop.\n      // Here we know, that all the size attributes have been already set.\n      this.setNodeAttributes(node, nodeAttrs);\n      var offseted = false;\n      if (offsetAttrs) {\n        // Check if the node is visible\n        var nodeBoundingRect = this.getNodeBoundingRect(node);\n        if (nodeBoundingRect.width > 0 && nodeBoundingRect.height > 0) {\n          var nodeBBox = V.transformRect(nodeBoundingRect, nodeMatrix).scale(1 / sx, 1 / sy);\n          for (attrName in offsetAttrs) {\n            attrVal = offsetAttrs[attrName];\n            def = this.getAttributeDefinition(attrName);\n            // OFFSET - offset function should return a point from the element\n            // bounding box. The default offset point is x:0, y:0 (origin) or could be further\n            // specify with some SVG attributes e.g. `text-anchor`, `cx`, `cy`\n            translation = def.offset.call(this, attrVal, nodeBBox, node, rawAttrs, this);\n            if (translation) {\n              nodePosition.offset(Point(translation).scale(sx, sy));\n              offseted || (offseted = true);\n            }\n          }\n        }\n      }\n\n      // Do not touch node's transform attribute if there is no transformation applied.\n      if (nodeTransform !== undefined || positioned || offseted) {\n        // Round the coordinates to 1 decimal point.\n        nodePosition.round(1);\n        nodeMatrix.e = nodePosition.x;\n        nodeMatrix.f = nodePosition.y;\n        node.setAttribute('transform', V.matrixToTransformString(nodeMatrix));\n        // TODO: store nodeMatrix metrics?\n      }\n    },\n    getNodeScale: function (node, scalableNode) {\n      // Check if the node is a descendant of the scalable group.\n      var sx, sy;\n      if (scalableNode && scalableNode.contains(node)) {\n        var scale = scalableNode.scale();\n        sx = 1 / scale.sx;\n        sy = 1 / scale.sy;\n      } else {\n        sx = 1;\n        sy = 1;\n      }\n      return {\n        sx: sx,\n        sy: sy\n      };\n    },\n    cleanNodesCache: function () {\n      this.metrics = {};\n    },\n    nodeCache: function (magnet) {\n      var metrics = this.metrics;\n      // Don't use cache? It most likely a custom view with overridden update.\n      if (!metrics) {\n        return {};\n      }\n      var id = V.ensureId(magnet);\n      var value = metrics[id];\n      if (!value) {\n        value = metrics[id] = {};\n      }\n      return value;\n    },\n    getNodeData: function (magnet) {\n      var metrics = this.nodeCache(magnet);\n      if (!metrics.data) {\n        metrics.data = {};\n      }\n      return metrics.data;\n    },\n    getNodeBoundingRect: function (magnet) {\n      var metrics = this.nodeCache(magnet);\n      if (metrics.boundingRect === undefined) {\n        metrics.boundingRect = V(magnet).getBBox();\n      }\n      return new Rect(metrics.boundingRect);\n    },\n    getNodeMatrix: function (magnet) {\n      var metrics = this.nodeCache(magnet);\n      if (metrics.magnetMatrix === undefined) {\n        var ref = this;\n        var rotatableNode = ref.rotatableNode;\n        var el = ref.el;\n        var target;\n        if (rotatableNode && rotatableNode.contains(magnet)) {\n          target = rotatableNode;\n        } else {\n          target = el;\n        }\n        metrics.magnetMatrix = V(magnet).getTransformToElement(target);\n      }\n      return V.createSVGMatrix(metrics.magnetMatrix);\n    },\n    getNodeShape: function (magnet) {\n      var metrics = this.nodeCache(magnet);\n      if (metrics.geometryShape === undefined) {\n        metrics.geometryShape = V(magnet).toGeometryShape();\n      }\n      return metrics.geometryShape.clone();\n    },\n    isNodeConnection: function (node) {\n      return this.model.isLink() && (!node || node === this.el);\n    },\n    findNodesAttributes: function (attrs, root, selectorCache, selectors) {\n      var i, n, nodeAttrs, nodeId;\n      var nodesAttrs = {};\n      var mergeIds = [];\n      for (var selector in attrs) {\n        if (!attrs.hasOwnProperty(selector)) {\n          continue;\n        }\n        nodeAttrs = attrs[selector];\n        if (!isPlainObject(nodeAttrs)) {\n          continue;\n        } // Not a valid selector-attributes pair\n        var selected = selectorCache[selector] = this.findBySelector(selector, root, selectors);\n        for (i = 0, n = selected.length; i < n; i++) {\n          var node = selected[i];\n          nodeId = V.ensureId(node);\n          // \"unique\" selectors are selectors that referencing a single node (defined by `selector`)\n          // groupSelector referencing a single node is not \"unique\"\n          var unique = selectors && selectors[selector] === node;\n          var prevNodeAttrs = nodesAttrs[nodeId];\n          if (prevNodeAttrs) {\n            // Note, that nodes referenced by deprecated `CSS selectors` are not taken into account.\n            // e.g. css:`.circle` and selector:`circle` can be applied in a random order\n            if (!prevNodeAttrs.array) {\n              mergeIds.push(nodeId);\n              prevNodeAttrs.array = true;\n              prevNodeAttrs.attributes = [prevNodeAttrs.attributes];\n              prevNodeAttrs.selectedLength = [prevNodeAttrs.selectedLength];\n            }\n            var attributes = prevNodeAttrs.attributes;\n            var selectedLength = prevNodeAttrs.selectedLength;\n            if (unique) {\n              // node referenced by `selector`\n              attributes.unshift(nodeAttrs);\n              selectedLength.unshift(-1);\n            } else {\n              // node referenced by `groupSelector`\n              var sortIndex = sortedIndex(selectedLength, n);\n              attributes.splice(sortIndex, 0, nodeAttrs);\n              selectedLength.splice(sortIndex, 0, n);\n            }\n          } else {\n            nodesAttrs[nodeId] = {\n              attributes: nodeAttrs,\n              selectedLength: unique ? -1 : n,\n              node: node,\n              array: false\n            };\n          }\n        }\n      }\n      for (i = 0, n = mergeIds.length; i < n; i++) {\n        nodeId = mergeIds[i];\n        nodeAttrs = nodesAttrs[nodeId];\n        nodeAttrs.attributes = merge.apply(void 0, [{}].concat(nodeAttrs.attributes.reverse()));\n      }\n      return nodesAttrs;\n    },\n    getEventTarget: function (evt, opt) {\n      if (opt === void 0) opt = {};\n      var target = evt.target;\n      var type = evt.type;\n      var clientX = evt.clientX;\n      if (clientX === void 0) clientX = 0;\n      var clientY = evt.clientY;\n      if (clientY === void 0) clientY = 0;\n      if (\n      // Explicitly defined `fromPoint` option\n      opt.fromPoint ||\n      // Touchmove/Touchend event's target is not reflecting the element under the coordinates as mousemove does.\n      // It holds the element when a touchstart triggered.\n      type === 'touchmove' || type === 'touchend' ||\n      // Pointermove/Pointerup event with the pointer captured\n      'pointerId' in evt && target.hasPointerCapture(evt.pointerId)) {\n        return document.elementFromPoint(clientX, clientY);\n      }\n      return target;\n    },\n    // Default is to process the `model.attributes.attrs` object and set attributes on subelements based on the selectors,\n    // unless `attrs` parameter was passed.\n    updateDOMSubtreeAttributes: function (rootNode, attrs, opt) {\n      opt || (opt = {});\n      opt.rootBBox || (opt.rootBBox = Rect());\n      opt.selectors || (opt.selectors = this.selectors); // selector collection to use\n\n      // Cache table for query results and bounding box calculation.\n      // Note that `selectorCache` needs to be invalidated for all\n      // `updateAttributes` calls, as the selectors might pointing\n      // to nodes designated by an attribute or elements dynamically\n      // created.\n      var selectorCache = {};\n      var bboxCache = {};\n      var relativeItems = [];\n      var relativeRefItems = [];\n      var item, node, nodeAttrs, nodeData, processedAttrs;\n      var roAttrs = opt.roAttributes;\n      var nodesAttrs = this.findNodesAttributes(roAttrs || attrs, rootNode, selectorCache, opt.selectors);\n      // `nodesAttrs` are different from all attributes, when\n      // rendering only  attributes sent to this method.\n      var nodesAllAttrs = roAttrs ? this.findNodesAttributes(attrs, rootNode, selectorCache, opt.selectors) : nodesAttrs;\n      for (var nodeId in nodesAttrs) {\n        nodeData = nodesAttrs[nodeId];\n        nodeAttrs = nodeData.attributes;\n        node = nodeData.node;\n        processedAttrs = this.processNodeAttributes(node, nodeAttrs);\n        if (!processedAttrs.set && !processedAttrs.position && !processedAttrs.offset) {\n          // Set all the normal attributes right on the SVG/HTML element.\n          this.setNodeAttributes(node, processedAttrs.normal);\n        } else {\n          var nodeAllAttrs = nodesAllAttrs[nodeId] && nodesAllAttrs[nodeId].attributes;\n          var refSelector = nodeAllAttrs && nodeAttrs.ref === undefined ? nodeAllAttrs.ref : nodeAttrs.ref;\n          var refNode;\n          if (refSelector) {\n            refNode = (selectorCache[refSelector] || this.findBySelector(refSelector, rootNode, opt.selectors))[0];\n            if (!refNode) {\n              throw new Error('dia.CellView: \"' + refSelector + '\" reference does not exist.');\n            }\n          } else {\n            refNode = null;\n          }\n          item = {\n            node: node,\n            refNode: refNode,\n            processedAttributes: processedAttrs,\n            allAttributes: nodeAllAttrs\n          };\n          if (refNode) {\n            // If an element in the list is positioned relative to this one, then\n            // we want to insert this one before it in the list.\n            var itemIndex = relativeRefItems.findIndex(function (item) {\n              return item.refNode === node;\n            });\n            if (itemIndex > -1) {\n              relativeRefItems.splice(itemIndex, 0, item);\n            } else {\n              relativeRefItems.push(item);\n            }\n          } else {\n            // A node with no ref attribute. To be updated before the nodes referencing other nodes.\n            // The order of no-ref-items is not specified/important.\n            relativeItems.push(item);\n          }\n        }\n      }\n      relativeItems.push.apply(relativeItems, relativeRefItems);\n      for (var i = 0, n = relativeItems.length; i < n; i++) {\n        item = relativeItems[i];\n        node = item.node;\n        refNode = item.refNode;\n\n        // Find the reference element bounding box. If no reference was provided, we\n        // use the optional bounding box.\n        var refNodeId = refNode ? V.ensureId(refNode) : '';\n        var refBBox = bboxCache[refNodeId];\n        if (!refBBox) {\n          // Get the bounding box of the reference element using to the common ancestor\n          // transformation space.\n          //\n          // @example 1\n          // <g transform=\"translate(11, 13)\">\n          //     <rect @selector=\"b\" x=\"1\" y=\"2\" width=\"3\" height=\"4\"/>\n          //     <rect @selector=\"a\"/>\n          // </g>\n          //\n          // In this case, the reference bounding box can not be affected\n          // by the `transform` attribute of the `<g>` element,\n          // because the exact transformation will be applied to the `a` element\n          // as well as to the `b` element.\n          //\n          // @example 2\n          // <g transform=\"translate(11, 13)\">\n          //     <rect @selector=\"b\" x=\"1\" y=\"2\" width=\"3\" height=\"4\"/>\n          // </g>\n          // <rect @selector=\"a\"/>\n          //\n          // In this case, the reference bounding box have to be affected by the\n          // `transform` attribute of the `<g>` element, because the `a` element\n          // is not descendant of the `<g>` element and will not be affected\n          // by the transformation.\n          refBBox = bboxCache[refNodeId] = refNode ? V(refNode).getBBox({\n            target: getCommonAncestorNode(node, refNode)\n          }) : opt.rootBBox;\n        }\n        if (roAttrs) {\n          // if there was a special attribute affecting the position amongst passed-in attributes\n          // we have to merge it with the rest of the element's attributes as they are necessary\n          // to update the position relatively (i.e `ref-x` && 'ref-dx')\n          processedAttrs = this.processNodeAttributes(node, item.allAttributes);\n          this.mergeProcessedAttributes(processedAttrs, item.processedAttributes);\n        } else {\n          processedAttrs = item.processedAttributes;\n        }\n        this.updateRelativeAttributes(node, processedAttrs, refBBox, opt);\n      }\n    },\n    mergeProcessedAttributes: function (processedAttrs, roProcessedAttrs) {\n      processedAttrs.set || (processedAttrs.set = {});\n      processedAttrs.position || (processedAttrs.position = {});\n      processedAttrs.offset || (processedAttrs.offset = {});\n      assign(processedAttrs.set, roProcessedAttrs.set);\n      assign(processedAttrs.position, roProcessedAttrs.position);\n      assign(processedAttrs.offset, roProcessedAttrs.offset);\n\n      // Handle also the special transform property.\n      var transform = processedAttrs.normal && processedAttrs.normal.transform;\n      if (transform !== undefined && roProcessedAttrs.normal) {\n        roProcessedAttrs.normal.transform = transform;\n      }\n      processedAttrs.normal = roProcessedAttrs.normal;\n    },\n    // Lifecycle methods\n\n    // Called when the view is attached to the DOM,\n    // as result of `cell.addTo(graph)` being called (isInitialMount === true)\n    // or `paper.options.viewport` returning `true` (isInitialMount === false).\n    onMount: function onMount(isInitialMount) {\n      if (isInitialMount) {\n        return;\n      }\n      this.mountTools();\n      HighlighterView.mount(this);\n    },\n    // Called when the view is detached from the DOM,\n    // as result of `paper.options.viewport` returning `false`.\n    onDetach: function onDetach() {\n      this.unmountTools();\n      HighlighterView.unmount(this);\n    },\n    // Called when the view is removed from the DOM\n    // as result of `cell.remove()`.\n    onRemove: function () {\n      this.removeTools();\n      this.removeHighlighters();\n    },\n    _toolsView: null,\n    hasTools: function (name) {\n      var toolsView = this._toolsView;\n      if (!toolsView) {\n        return false;\n      }\n      if (!name) {\n        return true;\n      }\n      return toolsView.getName() === name;\n    },\n    addTools: function (toolsView) {\n      this.removeTools();\n      if (toolsView) {\n        this._toolsView = toolsView;\n        toolsView.configure({\n          relatedView: this\n        });\n        toolsView.listenTo(this.paper, 'tools:event', this.onToolEvent.bind(this));\n      }\n      return this;\n    },\n    unmountTools: function unmountTools() {\n      var toolsView = this._toolsView;\n      if (toolsView) {\n        toolsView.unmount();\n      }\n      return this;\n    },\n    mountTools: function mountTools() {\n      var toolsView = this._toolsView;\n      // Prevent unnecessary re-appending of the tools.\n      if (toolsView && !toolsView.isMounted()) {\n        toolsView.mount();\n      }\n      return this;\n    },\n    updateTools: function (opt) {\n      var toolsView = this._toolsView;\n      if (toolsView) {\n        toolsView.update(opt);\n      }\n      return this;\n    },\n    removeTools: function () {\n      var toolsView = this._toolsView;\n      if (toolsView) {\n        toolsView.remove();\n        this._toolsView = null;\n      }\n      return this;\n    },\n    hideTools: function () {\n      var toolsView = this._toolsView;\n      if (toolsView) {\n        toolsView.hide();\n      }\n      return this;\n    },\n    showTools: function () {\n      var toolsView = this._toolsView;\n      if (toolsView) {\n        toolsView.show();\n      }\n      return this;\n    },\n    onToolEvent: function (event) {\n      switch (event) {\n        case 'remove':\n          this.removeTools();\n          break;\n        case 'hide':\n          this.hideTools();\n          break;\n        case 'show':\n          this.showTools();\n          break;\n      }\n    },\n    removeHighlighters: function () {\n      HighlighterView.remove(this);\n    },\n    updateHighlighters: function (dirty) {\n      if (dirty === void 0) dirty = false;\n      HighlighterView.update(this, null, dirty);\n    },\n    transformHighlighters: function () {\n      HighlighterView.transform(this);\n    },\n    // Interaction. The controller part.\n    // ---------------------------------\n\n    preventDefaultInteraction: function preventDefaultInteraction(evt) {\n      this.eventData(evt, {\n        defaultInteractionPrevented: true\n      });\n    },\n    isDefaultInteractionPrevented: function isDefaultInteractionPrevented(evt) {\n      var ref = this.eventData(evt);\n      var defaultInteractionPrevented = ref.defaultInteractionPrevented;\n      if (defaultInteractionPrevented === void 0) defaultInteractionPrevented = false;\n      return defaultInteractionPrevented;\n    },\n    // Interaction is handled by the paper and delegated to the view in interest.\n    // `x` & `y` parameters passed to these functions represent the coordinates already snapped to the paper grid.\n    // If necessary, real coordinates can be obtained from the `evt` event object.\n\n    // These functions are supposed to be overridden by the views that inherit from `joint.dia.Cell`,\n    // i.e. `joint.dia.Element` and `joint.dia.Link`.\n\n    pointerdblclick: function (evt, x, y) {\n      this.notify('cell:pointerdblclick', evt, x, y);\n    },\n    pointerclick: function (evt, x, y) {\n      this.notify('cell:pointerclick', evt, x, y);\n    },\n    contextmenu: function (evt, x, y) {\n      this.notify('cell:contextmenu', evt, x, y);\n    },\n    pointerdown: function (evt, x, y) {\n      var ref = this;\n      var model = ref.model;\n      var graph = model.graph;\n      if (graph) {\n        model.startBatch('pointer');\n        this.eventData(evt, {\n          graph: graph\n        });\n      }\n      this.notify('cell:pointerdown', evt, x, y);\n    },\n    pointermove: function (evt, x, y) {\n      this.notify('cell:pointermove', evt, x, y);\n    },\n    pointerup: function (evt, x, y) {\n      var ref = this.eventData(evt);\n      var graph = ref.graph;\n      this.notify('cell:pointerup', evt, x, y);\n      if (graph) {\n        // we don't want to trigger event on model as model doesn't\n        // need to be member of collection anymore (remove)\n        graph.stopBatch('pointer', {\n          cell: this.model\n        });\n      }\n    },\n    mouseover: function (evt) {\n      this.notify('cell:mouseover', evt);\n    },\n    mouseout: function (evt) {\n      this.notify('cell:mouseout', evt);\n    },\n    mouseenter: function (evt) {\n      this.notify('cell:mouseenter', evt);\n    },\n    mouseleave: function (evt) {\n      this.notify('cell:mouseleave', evt);\n    },\n    mousewheel: function (evt, x, y, delta) {\n      this.notify('cell:mousewheel', evt, x, y, delta);\n    },\n    onevent: function (evt, eventName, x, y) {\n      this.notify(eventName, evt, x, y);\n    },\n    onmagnet: function () {\n\n      // noop\n    },\n    magnetpointerdblclick: function () {\n\n      // noop\n    },\n    magnetcontextmenu: function () {\n\n      // noop\n    },\n    checkMouseleave: function checkMouseleave(evt) {\n      var ref = this;\n      var paper = ref.paper;\n      var model = ref.model;\n      if (paper.isAsync()) {\n        // Make sure the source/target views are updated before this view.\n        // It's not 100% bulletproof (see below) but it's a good enough solution for now.\n        // The connected cells could be links as well. In that case, we would\n        // need to recursively go through all the connected links and update\n        // their source/target views as well.\n        if (model.isLink()) {\n          // The `this.sourceView` and `this.targetView` might not be updated yet.\n          // We need to find the view by the model.\n          var sourceElement = model.getSourceElement();\n          if (sourceElement) {\n            var sourceView = paper.findViewByModel(sourceElement);\n            if (sourceView) {\n              paper.dumpView(sourceView);\n              paper.checkViewVisibility(sourceView);\n            }\n          }\n          var targetElement = model.getTargetElement();\n          if (targetElement) {\n            var targetView = paper.findViewByModel(targetElement);\n            if (targetView) {\n              paper.dumpView(targetView);\n              paper.checkViewVisibility(targetView);\n            }\n          }\n        }\n        // Do the updates of the current view synchronously now\n        paper.dumpView(this);\n        paper.checkViewVisibility(this);\n      }\n      var target = this.getEventTarget(evt, {\n        fromPoint: true\n      });\n      var view = paper.findView(target);\n      if (view === this) {\n        return;\n      }\n      // Leaving the current view\n      this.mouseleave(evt);\n      if (!view) {\n        return;\n      }\n      // Entering another view\n      view.mouseenter(evt);\n    },\n    setInteractivity: function (value) {\n      this.options.interactive = value;\n    }\n  }, {\n    Flags: Flags,\n    Highlighting: HighlightingTypes,\n    addPresentationAttributes: function (presentationAttributes) {\n      return merge({}, result(this.prototype, 'presentationAttributes'), presentationAttributes, function (a, b) {\n        if (!a || !b) {\n          return;\n        }\n        if (typeof a === 'string') {\n          a = [a];\n        }\n        if (typeof b === 'string') {\n          b = [b];\n        }\n        if (Array.isArray(a) && Array.isArray(b)) {\n          return uniq(a.concat(b));\n        }\n      });\n    }\n  });\n\n  // TODO: Move to Vectorizer library.\n  function getCommonAncestorNode(node1, node2) {\n    var parent = node1;\n    do {\n      if (parent.contains(node2)) {\n        return parent;\n      }\n      parent = parent.parentNode;\n    } while (parent);\n    return null;\n  }\n  var Flags$1 = {\n    TOOLS: CellView.Flags.TOOLS,\n    UPDATE: 'UPDATE',\n    TRANSLATE: 'TRANSLATE',\n    RESIZE: 'RESIZE',\n    PORTS: 'PORTS',\n    ROTATE: 'ROTATE',\n    RENDER: 'RENDER'\n  };\n  var DragActions = {\n    MOVE: 'move',\n    MAGNET: 'magnet'\n  };\n  // Element base view and controller.\n  // -------------------------------------------\n\n  var ElementView = CellView.extend({\n    /**\n     * @abstract\n     */\n    _removePorts: function () {\n      // implemented in ports.js\n    },\n    /**\n     *\n     * @abstract\n     */\n    _renderPorts: function () {\n      // implemented in ports.js\n    },\n    className: function () {\n      var classNames = CellView.prototype.className.apply(this).split(' ');\n      classNames.push('element');\n      return classNames.join(' ');\n    },\n    initialize: function () {\n      CellView.prototype.initialize.apply(this, arguments);\n      this._initializePorts();\n    },\n    presentationAttributes: {\n      'attrs': [Flags$1.UPDATE],\n      'position': [Flags$1.TRANSLATE, Flags$1.TOOLS],\n      'size': [Flags$1.RESIZE, Flags$1.PORTS, Flags$1.TOOLS],\n      'angle': [Flags$1.ROTATE, Flags$1.TOOLS],\n      'markup': [Flags$1.RENDER],\n      'ports': [Flags$1.PORTS]\n    },\n    initFlag: [Flags$1.RENDER],\n    UPDATE_PRIORITY: 0,\n    confirmUpdate: function (flag, opt) {\n      var useCSSSelectors = config.useCSSSelectors;\n      if (this.hasFlag(flag, Flags$1.PORTS)) {\n        this._removePorts();\n        this._cleanPortsCache();\n      }\n      var transformHighlighters = false;\n      if (this.hasFlag(flag, Flags$1.RENDER)) {\n        this.render();\n        this.updateTools(opt);\n        this.updateHighlighters(true);\n        transformHighlighters = true;\n        flag = this.removeFlag(flag, [Flags$1.RENDER, Flags$1.UPDATE, Flags$1.RESIZE, Flags$1.TRANSLATE, Flags$1.ROTATE, Flags$1.PORTS, Flags$1.TOOLS]);\n      } else {\n        var updateHighlighters = false;\n\n        // Skip this branch if render is required\n        if (this.hasFlag(flag, Flags$1.RESIZE)) {\n          this.resize(opt);\n          updateHighlighters = true;\n          // Resize method is calling `update()` internally\n          flag = this.removeFlag(flag, [Flags$1.RESIZE, Flags$1.UPDATE]);\n          if (useCSSSelectors) {\n            // `resize()` rendered the ports when useCSSSelectors are enabled\n            flag = this.removeFlag(flag, Flags$1.PORTS);\n          }\n        }\n        if (this.hasFlag(flag, Flags$1.UPDATE)) {\n          this.update(this.model, null, opt);\n          flag = this.removeFlag(flag, Flags$1.UPDATE);\n          updateHighlighters = true;\n          if (useCSSSelectors) {\n            // `update()` will render ports when useCSSSelectors are enabled\n            flag = this.removeFlag(flag, Flags$1.PORTS);\n          }\n        }\n        if (this.hasFlag(flag, Flags$1.TRANSLATE)) {\n          this.translate();\n          flag = this.removeFlag(flag, Flags$1.TRANSLATE);\n          transformHighlighters = true;\n        }\n        if (this.hasFlag(flag, Flags$1.ROTATE)) {\n          this.rotate();\n          flag = this.removeFlag(flag, Flags$1.ROTATE);\n          transformHighlighters = true;\n        }\n        if (this.hasFlag(flag, Flags$1.PORTS)) {\n          this._renderPorts();\n          updateHighlighters = true;\n          flag = this.removeFlag(flag, Flags$1.PORTS);\n        }\n        if (updateHighlighters) {\n          this.updateHighlighters(false);\n        }\n      }\n      if (transformHighlighters) {\n        this.transformHighlighters();\n      }\n      if (this.hasFlag(flag, Flags$1.TOOLS)) {\n        this.updateTools(opt);\n        flag = this.removeFlag(flag, Flags$1.TOOLS);\n      }\n      return flag;\n    },\n    /**\n     * @abstract\n     */\n    _initializePorts: function () {},\n    update: function (_, renderingOnlyAttrs) {\n      this.cleanNodesCache();\n\n      // When CSS selector strings are used, make sure no rule matches port nodes.\n      var useCSSSelectors = config.useCSSSelectors;\n      if (useCSSSelectors) {\n        this._removePorts();\n      }\n      var model = this.model;\n      var modelAttrs = model.attr();\n      this.updateDOMSubtreeAttributes(this.el, modelAttrs, {\n        rootBBox: new Rect(model.size()),\n        selectors: this.selectors,\n        scalableNode: this.scalableNode,\n        rotatableNode: this.rotatableNode,\n        // Use rendering only attributes if they differs from the model attributes\n        roAttributes: renderingOnlyAttrs === modelAttrs ? null : renderingOnlyAttrs\n      });\n      if (useCSSSelectors) {\n        this._renderPorts();\n      }\n    },\n    rotatableSelector: 'rotatable',\n    scalableSelector: 'scalable',\n    scalableNode: null,\n    rotatableNode: null,\n    // `prototype.markup` is rendered by default. Set the `markup` attribute on the model if the\n    // default markup is not desirable.\n    renderMarkup: function () {\n      var element = this.model;\n      var markup = element.get('markup') || element.markup;\n      if (!markup) {\n        throw new Error('dia.ElementView: markup required');\n      }\n      if (Array.isArray(markup)) {\n        return this.renderJSONMarkup(markup);\n      }\n      if (typeof markup === 'string') {\n        return this.renderStringMarkup(markup);\n      }\n      throw new Error('dia.ElementView: invalid markup');\n    },\n    renderJSONMarkup: function (markup) {\n      var doc = this.parseDOMJSON(markup, this.el);\n      var selectors = this.selectors = doc.selectors;\n      this.rotatableNode = V(selectors[this.rotatableSelector]) || null;\n      this.scalableNode = V(selectors[this.scalableSelector]) || null;\n      // Fragment\n      this.vel.append(doc.fragment);\n    },\n    renderStringMarkup: function (markup) {\n      var vel = this.vel;\n      vel.append(V(markup));\n      // Cache transformation groups\n      this.rotatableNode = vel.findOne('.rotatable');\n      this.scalableNode = vel.findOne('.scalable');\n      var selectors = this.selectors = {};\n      selectors[this.selector] = this.el;\n    },\n    render: function () {\n      this.vel.empty();\n      this.renderMarkup();\n      if (this.scalableNode) {\n        // Double update is necessary for elements with the scalable group only\n        // Note the resize() triggers the other `update`.\n        this.update();\n      }\n      this.resize();\n      if (this.rotatableNode) {\n        // Translate transformation is applied on `this.el` while the rotation transformation\n        // on `this.rotatableNode`\n        this.rotate();\n        this.translate();\n      } else {\n        this.updateTransformation();\n      }\n      if (!config.useCSSSelectors) {\n        this._renderPorts();\n      }\n      return this;\n    },\n    resize: function (opt) {\n      if (this.scalableNode) {\n        return this.sgResize(opt);\n      }\n      if (this.model.attributes.angle) {\n        this.rotate();\n      }\n      this.update();\n    },\n    translate: function () {\n      if (this.rotatableNode) {\n        return this.rgTranslate();\n      }\n      this.updateTransformation();\n    },\n    rotate: function () {\n      if (this.rotatableNode) {\n        this.rgRotate();\n        // It's necessary to call the update for the nodes outside\n        // the rotatable group referencing nodes inside the group\n        this.update();\n        return;\n      }\n      this.updateTransformation();\n    },\n    updateTransformation: function () {\n      var transformation = this.getTranslateString();\n      var rotateString = this.getRotateString();\n      if (rotateString) {\n        transformation += ' ' + rotateString;\n      }\n      this.vel.attr('transform', transformation);\n    },\n    getTranslateString: function () {\n      var position = this.model.attributes.position;\n      return 'translate(' + position.x + ',' + position.y + ')';\n    },\n    getRotateString: function () {\n      var attributes = this.model.attributes;\n      var angle = attributes.angle;\n      if (!angle) {\n        return null;\n      }\n      var size = attributes.size;\n      return 'rotate(' + angle + ',' + size.width / 2 + ',' + size.height / 2 + ')';\n    },\n    // Rotatable & Scalable Group\n    // always slower, kept mainly for backwards compatibility\n\n    rgRotate: function () {\n      this.rotatableNode.attr('transform', this.getRotateString());\n    },\n    rgTranslate: function () {\n      this.vel.attr('transform', this.getTranslateString());\n    },\n    sgResize: function (opt) {\n      var model = this.model;\n      var angle = model.angle();\n      var size = model.size();\n      var scalable = this.scalableNode;\n\n      // Getting scalable group's bbox.\n      // Due to a bug in webkit's native SVG .getBBox implementation, the bbox of groups with path children includes the paths' control points.\n      // To work around the issue, we need to check whether there are any path elements inside the scalable group.\n      var recursive = false;\n      if (scalable.node.getElementsByTagName('path').length > 0) {\n        // If scalable has at least one descendant that is a path, we need to switch to recursive bbox calculation.\n        // If there are no path descendants, group bbox calculation works and so we can use the (faster) native function directly.\n        recursive = true;\n      }\n      var scalableBBox = scalable.getBBox({\n        recursive: recursive\n      });\n\n      // Make sure `scalableBbox.width` and `scalableBbox.height` are not zero which can happen if the element does not have any content. By making\n      // the width/height 1, we prevent HTML errors of the type `scale(Infinity, Infinity)`.\n      var sx = size.width / (scalableBBox.width || 1);\n      var sy = size.height / (scalableBBox.height || 1);\n      scalable.attr('transform', 'scale(' + sx + ',' + sy + ')');\n\n      // Now the interesting part. The goal is to be able to store the object geometry via just `x`, `y`, `angle`, `width` and `height`\n      // Order of transformations is significant but we want to reconstruct the object always in the order:\n      // resize(), rotate(), translate() no matter of how the object was transformed. For that to work,\n      // we must adjust the `x` and `y` coordinates of the object whenever we resize it (because the origin of the\n      // rotation changes). The new `x` and `y` coordinates are computed by canceling the previous rotation\n      // around the center of the resized object (which is a different origin then the origin of the previous rotation)\n      // and getting the top-left corner of the resulting object. Then we clean up the rotation back to what it originally was.\n\n      // Cancel the rotation but now around a different origin, which is the center of the scaled object.\n      var rotatable = this.rotatableNode;\n      var rotation = rotatable && rotatable.attr('transform');\n      if (rotation) {\n        rotatable.attr('transform', rotation + ' rotate(' + -angle + ',' + size.width / 2 + ',' + size.height / 2 + ')');\n        var rotatableBBox = scalable.getBBox({\n          target: this.paper.cells\n        });\n\n        // Store new x, y and perform rotate() again against the new rotation origin.\n        model.set('position', {\n          x: rotatableBBox.x,\n          y: rotatableBBox.y\n        }, assign({\n          updateHandled: true\n        }, opt));\n        this.translate();\n        this.rotate();\n      }\n\n      // Update must always be called on non-rotated element. Otherwise, relative positioning\n      // would work with wrong (rotated) bounding boxes.\n      this.update();\n    },\n    // Embedding mode methods.\n    // -----------------------\n\n    prepareEmbedding: function (data) {\n      if (data === void 0) data = {};\n      var element = data.model || this.model;\n      var paper = data.paper || this.paper;\n      var graph = paper.model;\n      var initialZIndices = data.initialZIndices = {};\n      var embeddedCells = element.getEmbeddedCells({\n        deep: true\n      });\n      var connectedLinks = graph.getConnectedLinks(element, {\n        deep: true,\n        includeEnclosed: true\n      });\n\n      // Note: an embedded cell can be a connect link, but it's fine\n      // to iterate over the cell twice.\n      [element].concat(embeddedCells, connectedLinks).forEach(function (cell) {\n        return initialZIndices[cell.id] = cell.attributes.z;\n      });\n      element.startBatch('to-front');\n\n      // Bring the model to the front with all his embeds.\n      element.toFront({\n        deep: true,\n        ui: true\n      });\n\n      // Note that at this point cells in the collection are not sorted by z index (it's running in the batch, see\n      // the dia.Graph._sortOnChangeZ), so we can't assume that the last cell in the collection has the highest z.\n      var maxZ = graph.getElements().reduce(function (max, cell) {\n        return Math.max(max, cell.attributes.z || 0);\n      }, 0);\n\n      // Move to front also all the inbound and outbound links that are connected\n      // to any of the element descendant. If we bring to front only embedded elements,\n      // links connected to them would stay in the background.\n      connectedLinks.forEach(function (link) {\n        if (link.attributes.z <= maxZ) {\n          link.set('z', maxZ + 1, {\n            ui: true\n          });\n        }\n      });\n      element.stopBatch('to-front');\n\n      // Before we start looking for suitable parent we remove the current one.\n      var parentId = element.parent();\n      if (parentId) {\n        var parent = graph.getCell(parentId);\n        parent.unembed(element, {\n          ui: true\n        });\n        data.initialParentId = parentId;\n      } else {\n        data.initialParentId = null;\n      }\n    },\n    processEmbedding: function (data, evt, x, y) {\n      if (data === void 0) data = {};\n      var model = data.model || this.model;\n      var paper = data.paper || this.paper;\n      var graph = paper.model;\n      var ref = paper.options;\n      var findParentBy = ref.findParentBy;\n      var frontParentOnly = ref.frontParentOnly;\n      var validateEmbedding = ref.validateEmbedding;\n      var candidates;\n      if (isFunction(findParentBy)) {\n        candidates = toArray(findParentBy.call(graph, this, evt, x, y));\n      } else if (findParentBy === 'pointer') {\n        candidates = toArray(graph.findModelsFromPoint({\n          x: x,\n          y: y\n        }));\n      } else {\n        candidates = graph.findModelsUnderElement(model, {\n          searchBy: findParentBy\n        });\n      }\n      candidates = candidates.filter(function (el) {\n        return el instanceof Cell && model.id !== el.id && !el.isEmbeddedIn(model);\n      });\n      if (frontParentOnly) {\n        // pick the element with the highest `z` index\n        candidates = candidates.slice(-1);\n      }\n      var newCandidateView = null;\n      var prevCandidateView = data.candidateEmbedView;\n\n      // iterate over all candidates starting from the last one (has the highest z-index).\n      for (var i = candidates.length - 1; i >= 0; i--) {\n        var candidate = candidates[i];\n        if (prevCandidateView && prevCandidateView.model.id == candidate.id) {\n          // candidate remains the same\n          newCandidateView = prevCandidateView;\n          break;\n        } else {\n          var view = candidate.findView(paper);\n          if (!isFunction(validateEmbedding) || validateEmbedding.call(paper, this, view)) {\n            // flip to the new candidate\n            newCandidateView = view;\n            break;\n          }\n        }\n      }\n      if (newCandidateView && newCandidateView != prevCandidateView) {\n        // A new candidate view found. Highlight the new one.\n        this.clearEmbedding(data);\n        data.candidateEmbedView = newCandidateView.highlight(newCandidateView.findProxyNode(null, 'container'), {\n          embedding: true\n        });\n      }\n      if (!newCandidateView && prevCandidateView) {\n        // No candidate view found. Unhighlight the previous candidate.\n        this.clearEmbedding(data);\n      }\n    },\n    clearEmbedding: function (data) {\n      data || (data = {});\n      var candidateView = data.candidateEmbedView;\n      if (candidateView) {\n        // No candidate view found. Unhighlight the previous candidate.\n        candidateView.unhighlight(candidateView.findProxyNode(null, 'container'), {\n          embedding: true\n        });\n        data.candidateEmbedView = null;\n      }\n    },\n    finalizeEmbedding: function (data) {\n      if (data === void 0) data = {};\n      var candidateView = data.candidateEmbedView;\n      var element = data.model || this.model;\n      var paper = data.paper || this.paper;\n      if (candidateView) {\n        // We finished embedding. Candidate view is chosen to become the parent of the model.\n        candidateView.model.embed(element, {\n          ui: true\n        });\n        candidateView.unhighlight(candidateView.findProxyNode(null, 'container'), {\n          embedding: true\n        });\n        data.candidateEmbedView = null;\n      } else {\n        var ref = paper.options;\n        var validateUnembedding = ref.validateUnembedding;\n        var initialParentId = data.initialParentId;\n        // The element was originally embedded into another element.\n        // The interaction would unembed the element. Let's validate\n        // if the element can be unembedded.\n        if (initialParentId && typeof validateUnembedding === 'function' && !validateUnembedding.call(paper, this)) {\n          this._disallowUnembed(data);\n          return;\n        }\n      }\n      paper.model.getConnectedLinks(element, {\n        deep: true\n      }).forEach(function (link) {\n        link.reparent({\n          ui: true\n        });\n      });\n    },\n    _disallowUnembed: function (data) {\n      var model = data.model;\n      var whenNotAllowed = data.whenNotAllowed;\n      if (whenNotAllowed === void 0) whenNotAllowed = 'revert';\n      var element = model || this.model;\n      var paper = data.paper || this.paper;\n      var graph = paper.model;\n      switch (whenNotAllowed) {\n        case 'remove':\n          {\n            element.remove({\n              ui: true\n            });\n            break;\n          }\n        case 'revert':\n          {\n            var initialParentId = data.initialParentId;\n            var initialPosition = data.initialPosition;\n            var initialZIndices = data.initialZIndices;\n            // Revert the element's position (and the position of its embedded cells if any)\n            if (initialPosition) {\n              var x = initialPosition.x;\n              var y = initialPosition.y;\n              element.position(x, y, {\n                deep: true,\n                ui: true\n              });\n            }\n            // Revert all the z-indices changed during the embedding\n            if (initialZIndices) {\n              Object.keys(initialZIndices).forEach(function (id) {\n                var cell = graph.getCell(id);\n                if (cell) {\n                  cell.set('z', initialZIndices[id], {\n                    ui: true\n                  });\n                }\n              });\n            }\n            // Revert the original parent\n            var parent = graph.getCell(initialParentId);\n            if (parent) {\n              parent.embed(element, {\n                ui: true\n              });\n            }\n            break;\n          }\n      }\n    },\n    getDelegatedView: function () {\n      var view = this;\n      var model = view.model;\n      var paper = view.paper;\n      while (view) {\n        if (model.isLink()) {\n          break;\n        }\n        if (!model.isEmbedded() || view.can('stopDelegation')) {\n          return view;\n        }\n        model = model.getParentCell();\n        view = paper.findViewByModel(model);\n      }\n      return null;\n    },\n    findProxyNode: function (el, type) {\n      el || (el = this.el);\n      var nodeSelector = el.getAttribute(type + \"-selector\");\n      if (nodeSelector) {\n        var port = this.findAttribute('port', el);\n        if (port) {\n          var proxyPortNode = this.findPortNode(port, nodeSelector);\n          if (proxyPortNode) {\n            return proxyPortNode;\n          }\n        } else {\n          var ref = this.findBySelector(nodeSelector);\n          var proxyNode = ref[0];\n          if (proxyNode) {\n            return proxyNode;\n          }\n        }\n      }\n      return el;\n    },\n    // Interaction. The controller part.\n    // ---------------------------------\n\n    notifyPointerdown: function notifyPointerdown(evt, x, y) {\n      CellView.prototype.pointerdown.call(this, evt, x, y);\n      this.notify('element:pointerdown', evt, x, y);\n    },\n    notifyPointermove: function notifyPointermove(evt, x, y) {\n      CellView.prototype.pointermove.call(this, evt, x, y);\n      this.notify('element:pointermove', evt, x, y);\n    },\n    notifyPointerup: function notifyPointerup(evt, x, y) {\n      this.notify('element:pointerup', evt, x, y);\n      CellView.prototype.pointerup.call(this, evt, x, y);\n    },\n    pointerdblclick: function (evt, x, y) {\n      CellView.prototype.pointerdblclick.apply(this, arguments);\n      this.notify('element:pointerdblclick', evt, x, y);\n    },\n    pointerclick: function (evt, x, y) {\n      CellView.prototype.pointerclick.apply(this, arguments);\n      this.notify('element:pointerclick', evt, x, y);\n    },\n    contextmenu: function (evt, x, y) {\n      CellView.prototype.contextmenu.apply(this, arguments);\n      this.notify('element:contextmenu', evt, x, y);\n    },\n    pointerdown: function (evt, x, y) {\n      this.notifyPointerdown(evt, x, y);\n      this.dragStart(evt, x, y);\n    },\n    pointermove: function (evt, x, y) {\n      var data = this.eventData(evt);\n      var targetMagnet = data.targetMagnet;\n      var action = data.action;\n      var delegatedView = data.delegatedView;\n      if (targetMagnet) {\n        this.magnetpointermove(evt, targetMagnet, x, y);\n      }\n      switch (action) {\n        case DragActions.MAGNET:\n          this.dragMagnet(evt, x, y);\n          break;\n        case DragActions.MOVE:\n          (delegatedView || this).drag(evt, x, y);\n        // eslint: no-fallthrough=false\n        default:\n          if (data.preventPointerEvents) {\n            break;\n          }\n          this.notifyPointermove(evt, x, y);\n          break;\n      }\n\n      // Make sure the element view data is passed along.\n      // It could have been wiped out in the handlers above.\n      this.eventData(evt, data);\n    },\n    pointerup: function (evt, x, y) {\n      var data = this.eventData(evt);\n      var targetMagnet = data.targetMagnet;\n      var action = data.action;\n      var delegatedView = data.delegatedView;\n      if (targetMagnet) {\n        this.magnetpointerup(evt, targetMagnet, x, y);\n      }\n      switch (action) {\n        case DragActions.MAGNET:\n          this.dragMagnetEnd(evt, x, y);\n          break;\n        case DragActions.MOVE:\n          (delegatedView || this).dragEnd(evt, x, y);\n        // eslint: no-fallthrough=false\n        default:\n          if (data.preventPointerEvents) {\n            break;\n          }\n          this.notifyPointerup(evt, x, y);\n      }\n      if (targetMagnet) {\n        this.magnetpointerclick(evt, targetMagnet, x, y);\n      }\n      this.checkMouseleave(evt);\n    },\n    mouseover: function (evt) {\n      CellView.prototype.mouseover.apply(this, arguments);\n      this.notify('element:mouseover', evt);\n    },\n    mouseout: function (evt) {\n      CellView.prototype.mouseout.apply(this, arguments);\n      this.notify('element:mouseout', evt);\n    },\n    mouseenter: function (evt) {\n      CellView.prototype.mouseenter.apply(this, arguments);\n      this.notify('element:mouseenter', evt);\n    },\n    mouseleave: function (evt) {\n      CellView.prototype.mouseleave.apply(this, arguments);\n      this.notify('element:mouseleave', evt);\n    },\n    mousewheel: function (evt, x, y, delta) {\n      CellView.prototype.mousewheel.apply(this, arguments);\n      this.notify('element:mousewheel', evt, x, y, delta);\n    },\n    onmagnet: function (evt, x, y) {\n      var targetMagnet = evt.currentTarget;\n      this.magnetpointerdown(evt, targetMagnet, x, y);\n      this.eventData(evt, {\n        targetMagnet: targetMagnet\n      });\n      this.dragMagnetStart(evt, x, y);\n    },\n    magnetpointerdown: function (evt, magnet, x, y) {\n      this.notify('element:magnet:pointerdown', evt, magnet, x, y);\n    },\n    magnetpointermove: function (evt, magnet, x, y) {\n      this.notify('element:magnet:pointermove', evt, magnet, x, y);\n    },\n    magnetpointerup: function (evt, magnet, x, y) {\n      this.notify('element:magnet:pointerup', evt, magnet, x, y);\n    },\n    magnetpointerdblclick: function (evt, magnet, x, y) {\n      this.notify('element:magnet:pointerdblclick', evt, magnet, x, y);\n    },\n    magnetcontextmenu: function (evt, magnet, x, y) {\n      this.notify('element:magnet:contextmenu', evt, magnet, x, y);\n    },\n    // Drag Start Handlers\n\n    dragStart: function (evt, x, y) {\n      if (this.isDefaultInteractionPrevented(evt)) {\n        return;\n      }\n      var view = this.getDelegatedView();\n      if (!view || !view.can('elementMove')) {\n        return;\n      }\n      this.eventData(evt, {\n        action: DragActions.MOVE,\n        delegatedView: view\n      });\n      var position = view.model.position();\n      view.eventData(evt, {\n        initialPosition: position,\n        pointerOffset: position.difference(x, y),\n        restrictedArea: this.paper.getRestrictedArea(view, x, y)\n      });\n    },\n    dragMagnetStart: function (evt, x, y) {\n      var ref = this;\n      var paper = ref.paper;\n      var isPropagationAlreadyStopped = evt.isPropagationStopped();\n      if (isPropagationAlreadyStopped) {\n        // Special case when the propagation was already stopped\n        // on the `element:magnet:pointerdown` event.\n        // Do not trigger any `element:pointer*` events\n        // but still start the magnet dragging.\n        this.eventData(evt, {\n          preventPointerEvents: true\n        });\n      }\n      if (this.isDefaultInteractionPrevented(evt) || !this.can('addLinkFromMagnet')) {\n        // Stop the default action, which is to start dragging a link.\n        return;\n      }\n      var ref$1 = this.eventData(evt);\n      var targetMagnet = ref$1.targetMagnet;\n      if (targetMagnet === void 0) targetMagnet = evt.currentTarget;\n      evt.stopPropagation();\n\n      // Invalid (Passive) magnet. Start dragging the element.\n      if (!paper.options.validateMagnet.call(paper, this, targetMagnet, evt)) {\n        if (isPropagationAlreadyStopped) {\n          // Do not trigger `element:pointerdown` and start element dragging\n          // if the propagation was stopped.\n          this.dragStart(evt, x, y);\n          // The `element:pointerdown` event is not triggered because\n          // of `preventPointerEvents` flag.\n        } else {\n          // We need to reset the action\n          // to `MOVE` so that the element is dragged.\n          this.pointerdown(evt, x, y);\n        }\n        return;\n      }\n\n      // Valid magnet. Start dragging a link.\n      if (paper.options.magnetThreshold <= 0) {\n        this.dragLinkStart(evt, targetMagnet, x, y);\n      }\n      this.eventData(evt, {\n        action: DragActions.MAGNET\n      });\n    },\n    // Drag Handlers\n\n    drag: function (evt, x, y) {\n      var paper = this.paper;\n      var grid = paper.options.gridSize;\n      var element = this.model;\n      var data = this.eventData(evt);\n      var pointerOffset = data.pointerOffset;\n      var restrictedArea = data.restrictedArea;\n      var embedding = data.embedding;\n\n      // Make sure the new element's position always snaps to the current grid\n      var elX = snapToGrid(x + pointerOffset.x, grid);\n      var elY = snapToGrid(y + pointerOffset.y, grid);\n      element.position(elX, elY, {\n        restrictedArea: restrictedArea,\n        deep: true,\n        ui: true\n      });\n      if (paper.options.embeddingMode) {\n        if (!embedding) {\n          // Prepare the element for embedding only if the pointer moves.\n          // We don't want to do unnecessary action with the element\n          // if an user only clicks/dblclicks on it.\n          this.prepareEmbedding(data);\n          embedding = true;\n        }\n        this.processEmbedding(data, evt, x, y);\n      }\n      this.eventData(evt, {\n        embedding: embedding\n      });\n    },\n    dragMagnet: function (evt, x, y) {\n      this.dragLink(evt, x, y);\n    },\n    // Drag End Handlers\n\n    dragEnd: function (evt, x, y) {\n      var data = this.eventData(evt);\n      if (data.embedding) {\n        this.finalizeEmbedding(data);\n      }\n    },\n    dragMagnetEnd: function (evt, x, y) {\n      this.dragLinkEnd(evt, x, y);\n    },\n    magnetpointerclick: function (evt, magnet, x, y) {\n      var paper = this.paper;\n      if (paper.eventData(evt).mousemoved > paper.options.clickThreshold) {\n        return;\n      }\n      this.notify('element:magnet:pointerclick', evt, magnet, x, y);\n    }\n  }, {\n    Flags: Flags$1\n  });\n  assign(ElementView.prototype, elementViewPortPrototype);\n\n  // Does not make any changes to vertices.\n  // Returns the arguments that are passed to it, unchanged.\n  var normal = function (vertices, opt, linkView) {\n    return vertices;\n  };\n\n  // Routes the link always to/from a certain side\n  //\n  // Arguments:\n  //   padding ... gap between the element and the first vertex. :: Default 40.\n  //   side ... 'left' | 'right' | 'top' | 'bottom' :: Default 'bottom'.\n  //\n  var oneSide = function (vertices, opt, linkView) {\n    var side = opt.side || 'bottom';\n    var padding = normalizeSides(opt.padding || 40);\n\n    // LinkView contains cached source an target bboxes.\n    // Note that those are Geometry rectangle objects.\n    var sourceBBox = linkView.sourceBBox;\n    var targetBBox = linkView.targetBBox;\n    var sourcePoint = sourceBBox.center();\n    var targetPoint = targetBBox.center();\n    var coordinate, dimension, direction;\n    switch (side) {\n      case 'bottom':\n        direction = 1;\n        coordinate = 'y';\n        dimension = 'height';\n        break;\n      case 'top':\n        direction = -1;\n        coordinate = 'y';\n        dimension = 'height';\n        break;\n      case 'left':\n        direction = -1;\n        coordinate = 'x';\n        dimension = 'width';\n        break;\n      case 'right':\n        direction = 1;\n        coordinate = 'x';\n        dimension = 'width';\n        break;\n      default:\n        throw new Error('Router: invalid side');\n    }\n\n    // move the points from the center of the element to outside of it.\n    sourcePoint[coordinate] += direction * (sourceBBox[dimension] / 2 + padding[side]);\n    targetPoint[coordinate] += direction * (targetBBox[dimension] / 2 + padding[side]);\n\n    // make link orthogonal (at least the first and last vertex).\n    if (direction * (sourcePoint[coordinate] - targetPoint[coordinate]) > 0) {\n      targetPoint[coordinate] = sourcePoint[coordinate];\n    } else {\n      sourcePoint[coordinate] = targetPoint[coordinate];\n    }\n    return [sourcePoint].concat(vertices, targetPoint);\n  };\n\n  // bearing -> opposite bearing\n  var opposites = {\n    N: 'S',\n    S: 'N',\n    E: 'W',\n    W: 'E'\n  };\n\n  // bearing -> radians\n  var radians = {\n    N: -Math.PI / 2 * 3,\n    S: -Math.PI / 2,\n    E: 0,\n    W: Math.PI\n  };\n\n  // HELPERS //\n\n  // returns a point `p` where lines p,p1 and p,p2 are perpendicular and p is not contained\n  // in the given box\n  function freeJoin(p1, p2, bbox) {\n    var p = new Point(p1.x, p2.y);\n    if (bbox.containsPoint(p)) {\n      p = new Point(p2.x, p1.y);\n    }\n    // kept for reference\n    // if (bbox.containsPoint(p)) p = null;\n\n    return p;\n  }\n\n  // returns either width or height of a bbox based on the given bearing\n  function getBBoxSize(bbox, bearing) {\n    return bbox[bearing === 'W' || bearing === 'E' ? 'width' : 'height'];\n  }\n\n  // simple bearing method (calculates only orthogonal cardinals)\n  function getBearing(from, to) {\n    if (from.x === to.x) {\n      return from.y > to.y ? 'N' : 'S';\n    }\n    if (from.y === to.y) {\n      return from.x > to.x ? 'W' : 'E';\n    }\n    return null;\n  }\n\n  // transform point to a rect\n  function getPointBox(p) {\n    return new Rect(p.x, p.y, 0, 0);\n  }\n  function getPaddingBox(opt) {\n    // if both provided, opt.padding wins over opt.elementPadding\n    var sides = normalizeSides(opt.padding || opt.elementPadding || 20);\n    return {\n      x: -sides.left,\n      y: -sides.top,\n      width: sides.left + sides.right,\n      height: sides.top + sides.bottom\n    };\n  }\n\n  // return source bbox\n  function getSourceBBox(linkView, opt) {\n    return linkView.sourceBBox.clone().moveAndExpand(getPaddingBox(opt));\n  }\n\n  // return target bbox\n  function getTargetBBox(linkView, opt) {\n    return linkView.targetBBox.clone().moveAndExpand(getPaddingBox(opt));\n  }\n\n  // return source anchor\n  function getSourceAnchor(linkView, opt) {\n    if (linkView.sourceAnchor) {\n      return linkView.sourceAnchor;\n    }\n\n    // fallback: center of bbox\n    var sourceBBox = getSourceBBox(linkView, opt);\n    return sourceBBox.center();\n  }\n\n  // return target anchor\n  function getTargetAnchor(linkView, opt) {\n    if (linkView.targetAnchor) {\n      return linkView.targetAnchor;\n    }\n\n    // fallback: center of bbox\n    var targetBBox = getTargetBBox(linkView, opt);\n    return targetBBox.center(); // default\n  }\n\n  // PARTIAL ROUTERS //\n\n  function vertexVertex(from, to, bearing) {\n    var p1 = new Point(from.x, to.y);\n    var p2 = new Point(to.x, from.y);\n    var d1 = getBearing(from, p1);\n    var d2 = getBearing(from, p2);\n    var opposite = opposites[bearing];\n    var p = d1 === bearing || d1 !== opposite && (d2 === opposite || d2 !== bearing) ? p1 : p2;\n    return {\n      points: [p],\n      direction: getBearing(p, to)\n    };\n  }\n  function elementVertex(from, to, fromBBox) {\n    var p = freeJoin(from, to, fromBBox);\n    return {\n      points: [p],\n      direction: getBearing(p, to)\n    };\n  }\n  function vertexElement(from, to, toBBox, bearing) {\n    var route = {};\n    var points = [new Point(from.x, to.y), new Point(to.x, from.y)];\n    var freePoints = points.filter(function (pt) {\n      return !toBBox.containsPoint(pt);\n    });\n    var freeBearingPoints = freePoints.filter(function (pt) {\n      return getBearing(pt, from) !== bearing;\n    });\n    var p;\n    if (freeBearingPoints.length > 0) {\n      // Try to pick a point which bears the same direction as the previous segment.\n\n      p = freeBearingPoints.filter(function (pt) {\n        return getBearing(from, pt) === bearing;\n      }).pop();\n      p = p || freeBearingPoints[0];\n      route.points = [p];\n      route.direction = getBearing(p, to);\n    } else {\n      // Here we found only points which are either contained in the element or they would create\n      // a link segment going in opposite direction from the previous one.\n      // We take the point inside element and move it outside the element in the direction the\n      // route is going. Now we can join this point with the current end (using freeJoin).\n\n      p = difference(points, freePoints)[0];\n      var p2 = new Point(to).move(p, -getBBoxSize(toBBox, bearing) / 2);\n      var p1 = freeJoin(p2, from, toBBox);\n      route.points = [p1, p2];\n      route.direction = getBearing(p2, to);\n    }\n    return route;\n  }\n  function elementElement(from, to, fromBBox, toBBox) {\n    var route = elementVertex(to, from, toBBox);\n    var p1 = route.points[0];\n    if (fromBBox.containsPoint(p1)) {\n      route = elementVertex(from, to, fromBBox);\n      var p2 = route.points[0];\n      if (toBBox.containsPoint(p2)) {\n        var fromBorder = new Point(from).move(p2, -getBBoxSize(fromBBox, getBearing(from, p2)) / 2);\n        var toBorder = new Point(to).move(p1, -getBBoxSize(toBBox, getBearing(to, p1)) / 2);\n        var mid = new Line(fromBorder, toBorder).midpoint();\n        var startRoute = elementVertex(from, mid, fromBBox);\n        var endRoute = vertexVertex(mid, to, startRoute.direction);\n        route.points = [startRoute.points[0], endRoute.points[0]];\n        route.direction = endRoute.direction;\n      }\n    }\n    return route;\n  }\n\n  // Finds route for situations where one element is inside the other.\n  // Typically the route is directed outside the outer element first and\n  // then back towards the inner element.\n  function insideElement(from, to, fromBBox, toBBox, bearing) {\n    var route = {};\n    var boundary = fromBBox.union(toBBox).inflate(1);\n\n    // start from the point which is closer to the boundary\n    var reversed = boundary.center().distance(to) > boundary.center().distance(from);\n    var start = reversed ? to : from;\n    var end = reversed ? from : to;\n    var p1, p2, p3;\n    if (bearing) {\n      // Points on circle with radius equals 'W + H` are always outside the rectangle\n      // with width W and height H if the center of that circle is the center of that rectangle.\n      p1 = Point.fromPolar(boundary.width + boundary.height, radians[bearing], start);\n      p1 = boundary.pointNearestToPoint(p1).move(p1, -1);\n    } else {\n      p1 = boundary.pointNearestToPoint(start).move(start, 1);\n    }\n    p2 = freeJoin(p1, end, boundary);\n    if (p1.round().equals(p2.round())) {\n      p2 = Point.fromPolar(boundary.width + boundary.height, toRad(p1.theta(start)) + Math.PI / 2, end);\n      p2 = boundary.pointNearestToPoint(p2).move(end, 1).round();\n      p3 = freeJoin(p1, p2, boundary);\n      route.points = reversed ? [p2, p3, p1] : [p1, p3, p2];\n    } else {\n      route.points = reversed ? [p2, p1] : [p1, p2];\n    }\n    route.direction = reversed ? getBearing(p1, to) : getBearing(p2, to);\n    return route;\n  }\n\n  // MAIN ROUTER //\n\n  // Return points through which a connection needs to be drawn in order to obtain an orthogonal link\n  // routing from source to target going through `vertices`.\n  function orthogonal(vertices, opt, linkView) {\n    var sourceBBox = getSourceBBox(linkView, opt);\n    var targetBBox = getTargetBBox(linkView, opt);\n    var sourceAnchor = getSourceAnchor(linkView, opt);\n    var targetAnchor = getTargetAnchor(linkView, opt);\n\n    // if anchor lies outside of bbox, the bbox expands to include it\n    sourceBBox = sourceBBox.union(getPointBox(sourceAnchor));\n    targetBBox = targetBBox.union(getPointBox(targetAnchor));\n    vertices = toArray(vertices).map(Point);\n    vertices.unshift(sourceAnchor);\n    vertices.push(targetAnchor);\n    var bearing; // bearing of previous route segment\n\n    var orthogonalVertices = []; // the array of found orthogonal vertices to be returned\n    for (var i = 0, max = vertices.length - 1; i < max; i++) {\n      var route = null;\n      var from = vertices[i];\n      var to = vertices[i + 1];\n      var isOrthogonal = !!getBearing(from, to);\n      if (i === 0) {\n        // source\n\n        if (i + 1 === max) {\n          // route source -> target\n\n          // Expand one of the elements by 1px to detect situations when the two\n          // elements are positioned next to each other with no gap in between.\n          if (sourceBBox.intersect(targetBBox.clone().inflate(1))) {\n            route = insideElement(from, to, sourceBBox, targetBBox);\n          } else if (!isOrthogonal) {\n            route = elementElement(from, to, sourceBBox, targetBBox);\n          }\n        } else {\n          // route source -> vertex\n\n          if (sourceBBox.containsPoint(to)) {\n            route = insideElement(from, to, sourceBBox, getPointBox(to).moveAndExpand(getPaddingBox(opt)));\n          } else if (!isOrthogonal) {\n            route = elementVertex(from, to, sourceBBox);\n          }\n        }\n      } else if (i + 1 === max) {\n        // route vertex -> target\n\n        // prevent overlaps with previous line segment\n        var isOrthogonalLoop = isOrthogonal && getBearing(to, from) === bearing;\n        if (targetBBox.containsPoint(from) || isOrthogonalLoop) {\n          route = insideElement(from, to, getPointBox(from).moveAndExpand(getPaddingBox(opt)), targetBBox, bearing);\n        } else if (!isOrthogonal) {\n          route = vertexElement(from, to, targetBBox, bearing);\n        }\n      } else if (!isOrthogonal) {\n        // route vertex -> vertex\n        route = vertexVertex(from, to, bearing);\n      }\n\n      // applicable to all routes:\n\n      // set bearing for next iteration\n      if (route) {\n        Array.prototype.push.apply(orthogonalVertices, route.points);\n        bearing = route.direction;\n      } else {\n        // orthogonal route and not looped\n        bearing = getBearing(from, to);\n      }\n\n      // push `to` point to identified orthogonal vertices array\n      if (i + 1 < max) {\n        orthogonalVertices.push(to);\n      }\n    }\n    return orthogonalVertices;\n  }\n  var config$1 = {\n    // size of the step to find a route (the grid of the manhattan pathfinder)\n    step: 10,\n    // the number of route finding loops that cause the router to abort\n    // returns fallback route instead\n    maximumLoops: 2000,\n    // the number of decimal places to round floating point coordinates\n    precision: 1,\n    // maximum change of direction\n    maxAllowedDirectionChange: 90,\n    // should the router use perpendicular linkView option?\n    // does not connect anchor of element but rather a point close-by that is orthogonal\n    // this looks much better\n    perpendicular: true,\n    // should the source and/or target not be considered as obstacles?\n    excludeEnds: [],\n    // 'source', 'target'\n\n    // should certain types of elements not be considered as obstacles?\n    excludeTypes: ['basic.Text'],\n    // possible starting directions from an element\n    startDirections: ['top', 'right', 'bottom', 'left'],\n    // possible ending directions to an element\n    endDirections: ['top', 'right', 'bottom', 'left'],\n    // specify the directions used above and what they mean\n    directionMap: {\n      top: {\n        x: 0,\n        y: -1\n      },\n      right: {\n        x: 1,\n        y: 0\n      },\n      bottom: {\n        x: 0,\n        y: 1\n      },\n      left: {\n        x: -1,\n        y: 0\n      }\n    },\n    // cost of an orthogonal step\n    cost: function () {\n      return this.step;\n    },\n    // an array of directions to find next points on the route\n    // different from start/end directions\n    directions: function () {\n      var step = this.step;\n      var cost = this.cost();\n      return [{\n        offsetX: step,\n        offsetY: 0,\n        cost: cost\n      }, {\n        offsetX: -step,\n        offsetY: 0,\n        cost: cost\n      }, {\n        offsetX: 0,\n        offsetY: step,\n        cost: cost\n      }, {\n        offsetX: 0,\n        offsetY: -step,\n        cost: cost\n      }];\n    },\n    // a penalty received for direction change\n    penalties: function () {\n      return {\n        0: 0,\n        45: this.step / 2,\n        90: this.step / 2\n      };\n    },\n    // padding applied on the element bounding boxes\n    paddingBox: function () {\n      var step = this.step;\n      return {\n        x: -step,\n        y: -step,\n        width: 2 * step,\n        height: 2 * step\n      };\n    },\n    // A function that determines whether a given point is an obstacle or not.\n    // If used, the `padding`, `excludeEnds`and `excludeTypes` options are ignored.\n    // (point: dia.Point) => boolean;\n    isPointObstacle: null,\n    // a router to use when the manhattan router fails\n    // (one of the partial routes returns null)\n    fallbackRouter: function (vertices, opt, linkView) {\n      if (!isFunction(orthogonal)) {\n        throw new Error('Manhattan requires the orthogonal router as default fallback.');\n      }\n      return orthogonal(vertices, assign({}, config$1, opt), linkView);\n    },\n    /* Deprecated */\n    // a simple route used in situations when main routing method fails\n    // (exceed max number of loop iterations, inaccessible)\n    fallbackRoute: function (from, to, opt) {\n      return null; // null result will trigger the fallbackRouter\n\n      // left for reference:\n      /*// Find an orthogonal route ignoring obstacles.\n       var point = ((opt.previousDirAngle || 0) % 180 === 0)\n              ? new g.Point(from.x, to.y)\n              : new g.Point(to.x, from.y);\n       return [point];*/\n    },\n    // if a function is provided, it's used to route the link while dragging an end\n    // i.e. function(from, to, opt) { return []; }\n    draggingRoute: null\n  };\n\n  // HELPER CLASSES //\n\n  // Map of obstacles\n  // Helper structure to identify whether a point lies inside an obstacle.\n  function ObstacleMap(opt) {\n    this.map = {};\n    this.options = opt;\n    // tells how to divide the paper when creating the elements map\n    this.mapGridSize = 100;\n  }\n  ObstacleMap.prototype.build = function (graph, link) {\n    var opt = this.options;\n\n    // source or target element could be excluded from set of obstacles\n    var excludedEnds = toArray(opt.excludeEnds).reduce(function (res, item) {\n      var end = link.get(item);\n      if (end) {\n        var cell = graph.getCell(end.id);\n        if (cell) {\n          res.push(cell);\n        }\n      }\n      return res;\n    }, []);\n\n    // Exclude any embedded elements from the source and the target element.\n    var excludedAncestors = [];\n    var source = graph.getCell(link.get('source').id);\n    if (source) {\n      excludedAncestors = union(excludedAncestors, source.getAncestors().map(function (cell) {\n        return cell.id;\n      }));\n    }\n    var target = graph.getCell(link.get('target').id);\n    if (target) {\n      excludedAncestors = union(excludedAncestors, target.getAncestors().map(function (cell) {\n        return cell.id;\n      }));\n    }\n\n    // Builds a map of all elements for quicker obstacle queries (i.e. is a point contained\n    // in any obstacle?) (a simplified grid search).\n    // The paper is divided into smaller cells, where each holds information about which\n    // elements belong to it. When we query whether a point lies inside an obstacle we\n    // don't need to go through all obstacles, we check only those in a particular cell.\n    var mapGridSize = this.mapGridSize;\n    graph.getElements().reduce(function (map, element) {\n      var isExcludedType = toArray(opt.excludeTypes).includes(element.get('type'));\n      var isExcludedEnd = excludedEnds.find(function (excluded) {\n        return excluded.id === element.id;\n      });\n      var isExcludedAncestor = excludedAncestors.includes(element.id);\n      var isExcluded = isExcludedType || isExcludedEnd || isExcludedAncestor;\n      if (!isExcluded) {\n        var bbox = element.getBBox().moveAndExpand(opt.paddingBox);\n        var origin = bbox.origin().snapToGrid(mapGridSize);\n        var corner = bbox.corner().snapToGrid(mapGridSize);\n        for (var x = origin.x; x <= corner.x; x += mapGridSize) {\n          for (var y = origin.y; y <= corner.y; y += mapGridSize) {\n            var gridKey = x + '@' + y;\n            map[gridKey] = map[gridKey] || [];\n            map[gridKey].push(bbox);\n          }\n        }\n      }\n      return map;\n    }, this.map);\n    return this;\n  };\n  ObstacleMap.prototype.isPointAccessible = function (point) {\n    var mapKey = point.clone().snapToGrid(this.mapGridSize).toString();\n    return toArray(this.map[mapKey]).every(function (obstacle) {\n      return !obstacle.containsPoint(point);\n    });\n  };\n\n  // Sorted Set\n  // Set of items sorted by given value.\n  function SortedSet() {\n    this.items = [];\n    this.hash = {};\n    this.values = {};\n    this.OPEN = 1;\n    this.CLOSE = 2;\n  }\n  SortedSet.prototype.add = function (item, value) {\n    if (this.hash[item]) {\n      // item removal\n      this.items.splice(this.items.indexOf(item), 1);\n    } else {\n      this.hash[item] = this.OPEN;\n    }\n    this.values[item] = value;\n    var index$1 = sortedIndex(this.items, item, function (i) {\n      return this.values[i];\n    }.bind(this));\n    this.items.splice(index$1, 0, item);\n  };\n  SortedSet.prototype.remove = function (item) {\n    this.hash[item] = this.CLOSE;\n  };\n  SortedSet.prototype.isOpen = function (item) {\n    return this.hash[item] === this.OPEN;\n  };\n  SortedSet.prototype.isClose = function (item) {\n    return this.hash[item] === this.CLOSE;\n  };\n  SortedSet.prototype.isEmpty = function () {\n    return this.items.length === 0;\n  };\n  SortedSet.prototype.pop = function () {\n    var item = this.items.shift();\n    this.remove(item);\n    return item;\n  };\n\n  // HELPERS //\n\n  // return source bbox\n  function getSourceBBox$1(linkView, opt) {\n    // expand by padding box\n    if (opt && opt.paddingBox) {\n      return linkView.sourceBBox.clone().moveAndExpand(opt.paddingBox);\n    }\n    return linkView.sourceBBox.clone();\n  }\n\n  // return target bbox\n  function getTargetBBox$1(linkView, opt) {\n    // expand by padding box\n    if (opt && opt.paddingBox) {\n      return linkView.targetBBox.clone().moveAndExpand(opt.paddingBox);\n    }\n    return linkView.targetBBox.clone();\n  }\n\n  // return source anchor\n  function getSourceAnchor$1(linkView, opt) {\n    if (linkView.sourceAnchor) {\n      return linkView.sourceAnchor;\n    }\n\n    // fallback: center of bbox\n    var sourceBBox = getSourceBBox$1(linkView, opt);\n    return sourceBBox.center();\n  }\n\n  // return target anchor\n  function getTargetAnchor$1(linkView, opt) {\n    if (linkView.targetAnchor) {\n      return linkView.targetAnchor;\n    }\n\n    // fallback: center of bbox\n    var targetBBox = getTargetBBox$1(linkView, opt);\n    return targetBBox.center(); // default\n  }\n\n  // returns a direction index from start point to end point\n  // corrects for grid deformation between start and end\n  function getDirectionAngle(start, end, numDirections, grid, opt) {\n    var quadrant = 360 / numDirections;\n    var angleTheta = start.theta(fixAngleEnd(start, end, grid, opt));\n    var normalizedAngle = normalizeAngle(angleTheta + quadrant / 2);\n    return quadrant * Math.floor(normalizedAngle / quadrant);\n  }\n\n  // helper function for getDirectionAngle()\n  // corrects for grid deformation\n  // (if a point is one grid steps away from another in both dimensions,\n  // it is considered to be 45 degrees away, even if the real angle is different)\n  // this causes visible angle discrepancies if `opt.step` is much larger than `paper.gridSize`\n  function fixAngleEnd(start, end, grid, opt) {\n    var step = opt.step;\n    var diffX = end.x - start.x;\n    var diffY = end.y - start.y;\n    var gridStepsX = diffX / grid.x;\n    var gridStepsY = diffY / grid.y;\n    var distanceX = gridStepsX * step;\n    var distanceY = gridStepsY * step;\n    return new Point(start.x + distanceX, start.y + distanceY);\n  }\n\n  // return the change in direction between two direction angles\n  function getDirectionChange(angle1, angle2) {\n    var directionChange = Math.abs(angle1 - angle2);\n    return directionChange > 180 ? 360 - directionChange : directionChange;\n  }\n\n  // fix direction offsets according to current grid\n  function getGridOffsets(directions, grid, opt) {\n    var step = opt.step;\n    toArray(opt.directions).forEach(function (direction) {\n      direction.gridOffsetX = direction.offsetX / step * grid.x;\n      direction.gridOffsetY = direction.offsetY / step * grid.y;\n    });\n  }\n\n  // get grid size in x and y dimensions, adapted to source and target positions\n  function getGrid(step, source, target) {\n    return {\n      source: source.clone(),\n      x: getGridDimension(target.x - source.x, step),\n      y: getGridDimension(target.y - source.y, step)\n    };\n  }\n\n  // helper function for getGrid()\n  function getGridDimension(diff, step) {\n    // return step if diff = 0\n    if (!diff) {\n      return step;\n    }\n    var absDiff = Math.abs(diff);\n    var numSteps = Math.round(absDiff / step);\n\n    // return absDiff if less than one step apart\n    if (!numSteps) {\n      return absDiff;\n    }\n\n    // otherwise, return corrected step\n    var roundedDiff = numSteps * step;\n    var remainder = absDiff - roundedDiff;\n    var stepCorrection = remainder / numSteps;\n    return step + stepCorrection;\n  }\n\n  // return a clone of point snapped to grid\n  function snapToGrid$1(point, grid) {\n    var source = grid.source;\n    var snappedX = snapToGrid(point.x - source.x, grid.x) + source.x;\n    var snappedY = snapToGrid(point.y - source.y, grid.y) + source.y;\n    return new Point(snappedX, snappedY);\n  }\n\n  // round the point to opt.precision\n  function round$4(point, precision) {\n    return point.round(precision);\n  }\n\n  // snap to grid and then round the point\n  function align(point, grid, precision) {\n    return round$4(snapToGrid$1(point.clone(), grid), precision);\n  }\n\n  // return a string representing the point\n  // string is rounded in both dimensions\n  function getKey(point) {\n    return point.clone().toString();\n  }\n\n  // return a normalized vector from given point\n  // used to determine the direction of a difference of two points\n  function normalizePoint(point) {\n    return new Point(point.x === 0 ? 0 : Math.abs(point.x) / point.x, point.y === 0 ? 0 : Math.abs(point.y) / point.y);\n  }\n\n  // PATHFINDING //\n\n  // reconstructs a route by concatenating points with their parents\n  function reconstructRoute(parents, points, tailPoint, from, to, grid, opt) {\n    var route = [];\n    var prevDiff = normalizePoint(to.difference(tailPoint));\n\n    // tailPoint is assumed to be aligned already\n    var currentKey = getKey(tailPoint);\n    var parent = parents[currentKey];\n    var point;\n    while (parent) {\n      // point is assumed to be aligned already\n      point = points[currentKey];\n      var diff = normalizePoint(point.difference(parent));\n      if (!diff.equals(prevDiff)) {\n        route.unshift(point);\n        prevDiff = diff;\n      }\n\n      // parent is assumed to be aligned already\n      currentKey = getKey(parent);\n      parent = parents[currentKey];\n    }\n\n    // leadPoint is assumed to be aligned already\n    var leadPoint = points[currentKey];\n    var fromDiff = normalizePoint(leadPoint.difference(from));\n    if (!fromDiff.equals(prevDiff)) {\n      route.unshift(leadPoint);\n    }\n    return route;\n  }\n\n  // heuristic method to determine the distance between two points\n  function estimateCost(from, endPoints) {\n    var min = Infinity;\n    for (var i = 0, len = endPoints.length; i < len; i++) {\n      var cost = from.manhattanDistance(endPoints[i]);\n      if (cost < min) {\n        min = cost;\n      }\n    }\n    return min;\n  }\n\n  // find points around the bbox taking given directions into account\n  // lines are drawn from anchor in given directions, intersections recorded\n  // if anchor is outside bbox, only those directions that intersect get a rect point\n  // the anchor itself is returned as rect point (representing some directions)\n  // (since those directions are unobstructed by the bbox)\n  function getRectPoints(anchor, bbox, directionList, grid, opt) {\n    var precision = opt.precision;\n    var directionMap = opt.directionMap;\n    var anchorCenterVector = anchor.difference(bbox.center());\n    var keys = isObject$1(directionMap) ? Object.keys(directionMap) : [];\n    var dirList = toArray(directionList);\n    var rectPoints = keys.reduce(function (res, key) {\n      if (dirList.includes(key)) {\n        var direction = directionMap[key];\n\n        // create a line that is guaranteed to intersect the bbox if bbox is in the direction\n        // even if anchor lies outside of bbox\n        var endpoint = new Point(anchor.x + direction.x * (Math.abs(anchorCenterVector.x) + bbox.width), anchor.y + direction.y * (Math.abs(anchorCenterVector.y) + bbox.height));\n        var intersectionLine = new Line(anchor, endpoint);\n\n        // get the farther intersection, in case there are two\n        // (that happens if anchor lies next to bbox)\n        var intersections = intersectionLine.intersect(bbox) || [];\n        var numIntersections = intersections.length;\n        var farthestIntersectionDistance;\n        var farthestIntersection = null;\n        for (var i = 0; i < numIntersections; i++) {\n          var currentIntersection = intersections[i];\n          var distance = anchor.squaredDistance(currentIntersection);\n          if (farthestIntersectionDistance === undefined || distance > farthestIntersectionDistance) {\n            farthestIntersectionDistance = distance;\n            farthestIntersection = currentIntersection;\n          }\n        }\n\n        // if an intersection was found in this direction, it is our rectPoint\n        if (farthestIntersection) {\n          var point = align(farthestIntersection, grid, precision);\n\n          // if the rectPoint lies inside the bbox, offset it by one more step\n          if (bbox.containsPoint(point)) {\n            point = align(point.offset(direction.x * grid.x, direction.y * grid.y), grid, precision);\n          }\n\n          // then add the point to the result array\n          // aligned\n          res.push(point);\n        }\n      }\n      return res;\n    }, []);\n\n    // if anchor lies outside of bbox, add it to the array of points\n    if (!bbox.containsPoint(anchor)) {\n      // aligned\n      rectPoints.push(align(anchor, grid, precision));\n    }\n    return rectPoints;\n  }\n\n  // finds the route between two points/rectangles (`from`, `to`) implementing A* algorithm\n  // rectangles get rect points assigned by getRectPoints()\n  function findRoute(from, to, isPointObstacle, opt) {\n    var precision = opt.precision;\n\n    // Get grid for this route.\n\n    var sourceAnchor, targetAnchor;\n    if (from instanceof Rect) {\n      // `from` is sourceBBox\n      sourceAnchor = round$4(getSourceAnchor$1(this, opt).clone(), precision);\n    } else {\n      sourceAnchor = round$4(from.clone(), precision);\n    }\n    if (to instanceof Rect) {\n      // `to` is targetBBox\n      targetAnchor = round$4(getTargetAnchor$1(this, opt).clone(), precision);\n    } else {\n      targetAnchor = round$4(to.clone(), precision);\n    }\n    var grid = getGrid(opt.step, sourceAnchor, targetAnchor);\n\n    // Get pathfinding points.\n\n    var start, end; // aligned with grid by definition\n    var startPoints, endPoints; // assumed to be aligned with grid already\n\n    // set of points we start pathfinding from\n    if (from instanceof Rect) {\n      // `from` is sourceBBox\n      start = sourceAnchor;\n      startPoints = getRectPoints(start, from, opt.startDirections, grid, opt);\n    } else {\n      start = sourceAnchor;\n      startPoints = [start];\n    }\n\n    // set of points we want the pathfinding to finish at\n    if (to instanceof Rect) {\n      // `to` is targetBBox\n      end = targetAnchor;\n      endPoints = getRectPoints(targetAnchor, to, opt.endDirections, grid, opt);\n    } else {\n      end = targetAnchor;\n      endPoints = [end];\n    }\n\n    // take into account only accessible rect points (those not under obstacles)\n    startPoints = startPoints.filter(function (p) {\n      return !isPointObstacle(p);\n    });\n    endPoints = endPoints.filter(function (p) {\n      return !isPointObstacle(p);\n    });\n\n    // Check that there is an accessible route point on both sides.\n    // Otherwise, use fallbackRoute().\n    if (startPoints.length > 0 && endPoints.length > 0) {\n      // The set of tentative points to be evaluated, initially containing the start points.\n      // Rounded to nearest integer for simplicity.\n      var openSet = new SortedSet();\n      // Keeps reference to actual points for given elements of the open set.\n      var points = {};\n      // Keeps reference to a point that is immediate predecessor of given element.\n      var parents = {};\n      // Cost from start to a point along best known path.\n      var costs = {};\n      for (var i = 0, n = startPoints.length; i < n; i++) {\n        // startPoint is assumed to be aligned already\n        var startPoint = startPoints[i];\n        var key = getKey(startPoint);\n        openSet.add(key, estimateCost(startPoint, endPoints));\n        points[key] = startPoint;\n        costs[key] = 0;\n      }\n      var previousRouteDirectionAngle = opt.previousDirectionAngle; // undefined for first route\n      var isPathBeginning = previousRouteDirectionAngle === undefined;\n\n      // directions\n      var direction, directionChange;\n      var directions = opt.directions;\n      getGridOffsets(directions, grid, opt);\n      var numDirections = directions.length;\n      var endPointsKeys = toArray(endPoints).reduce(function (res, endPoint) {\n        // endPoint is assumed to be aligned already\n\n        var key = getKey(endPoint);\n        res.push(key);\n        return res;\n      }, []);\n\n      // main route finding loop\n      var loopsRemaining = opt.maximumLoops;\n      while (!openSet.isEmpty() && loopsRemaining > 0) {\n        // remove current from the open list\n        var currentKey = openSet.pop();\n        var currentPoint = points[currentKey];\n        var currentParent = parents[currentKey];\n        var currentCost = costs[currentKey];\n        var isRouteBeginning = currentParent === undefined; // undefined for route starts\n        var isStart = currentPoint.equals(start); // (is source anchor or `from` point) = can leave in any direction\n\n        var previousDirectionAngle;\n        if (!isRouteBeginning) {\n          previousDirectionAngle = getDirectionAngle(currentParent, currentPoint, numDirections, grid, opt);\n        } // a vertex on the route\n        else if (!isPathBeginning) {\n          previousDirectionAngle = previousRouteDirectionAngle;\n        } // beginning of route on the path\n        else if (!isStart) {\n          previousDirectionAngle = getDirectionAngle(start, currentPoint, numDirections, grid, opt);\n        } // beginning of path, start rect point\n        else {\n          previousDirectionAngle = null;\n        } // beginning of path, source anchor or `from` point\n\n        // check if we reached any endpoint\n        var samePoints = startPoints.length === endPoints.length;\n        if (samePoints) {\n          for (var j = 0; j < startPoints.length; j++) {\n            if (!startPoints[j].equals(endPoints[j])) {\n              samePoints = false;\n              break;\n            }\n          }\n        }\n        var skipEndCheck = isRouteBeginning && samePoints;\n        if (!skipEndCheck && endPointsKeys.indexOf(currentKey) >= 0) {\n          opt.previousDirectionAngle = previousDirectionAngle;\n          return reconstructRoute(parents, points, currentPoint, start, end, grid, opt);\n        }\n\n        // go over all possible directions and find neighbors\n        for (i = 0; i < numDirections; i++) {\n          direction = directions[i];\n          var directionAngle = direction.angle;\n          directionChange = getDirectionChange(previousDirectionAngle, directionAngle);\n\n          // if the direction changed rapidly, don't use this point\n          // any direction is allowed for starting points\n          if (!(isPathBeginning && isStart) && directionChange > opt.maxAllowedDirectionChange) {\n            continue;\n          }\n          var neighborPoint = align(currentPoint.clone().offset(direction.gridOffsetX, direction.gridOffsetY), grid, precision);\n          var neighborKey = getKey(neighborPoint);\n\n          // Closed points from the openSet were already evaluated.\n          if (openSet.isClose(neighborKey) || isPointObstacle(neighborPoint)) {\n            continue;\n          }\n\n          // We can only enter end points at an acceptable angle.\n          if (endPointsKeys.indexOf(neighborKey) >= 0) {\n            // neighbor is an end point\n\n            var isNeighborEnd = neighborPoint.equals(end); // (is target anchor or `to` point) = can be entered in any direction\n\n            if (!isNeighborEnd) {\n              var endDirectionAngle = getDirectionAngle(neighborPoint, end, numDirections, grid, opt);\n              var endDirectionChange = getDirectionChange(directionAngle, endDirectionAngle);\n              if (endDirectionChange > opt.maxAllowedDirectionChange) {\n                continue;\n              }\n            }\n          }\n\n          // The current direction is ok.\n\n          var neighborCost = direction.cost;\n          var neighborPenalty = isStart ? 0 : opt.penalties[directionChange]; // no penalties for start point\n          var costFromStart = currentCost + neighborCost + neighborPenalty;\n          if (!openSet.isOpen(neighborKey) || costFromStart < costs[neighborKey]) {\n            // neighbor point has not been processed yet\n            // or the cost of the path from start is lower than previously calculated\n\n            points[neighborKey] = neighborPoint;\n            parents[neighborKey] = currentPoint;\n            costs[neighborKey] = costFromStart;\n            openSet.add(neighborKey, costFromStart + estimateCost(neighborPoint, endPoints));\n          }\n        }\n        loopsRemaining--;\n      }\n    }\n\n    // no route found (`to` point either wasn't accessible or finding route took\n    // way too much calculation)\n    return opt.fallbackRoute.call(this, start, end, opt);\n  }\n\n  // resolve some of the options\n  function resolveOptions(opt) {\n    opt.directions = result(opt, 'directions');\n    opt.penalties = result(opt, 'penalties');\n    opt.paddingBox = result(opt, 'paddingBox');\n    opt.padding = result(opt, 'padding');\n    if (opt.padding) {\n      // if both provided, opt.padding wins over opt.paddingBox\n      var sides = normalizeSides(opt.padding);\n      opt.paddingBox = {\n        x: -sides.left,\n        y: -sides.top,\n        width: sides.left + sides.right,\n        height: sides.top + sides.bottom\n      };\n    }\n    toArray(opt.directions).forEach(function (direction) {\n      var point1 = new Point(0, 0);\n      var point2 = new Point(direction.offsetX, direction.offsetY);\n      direction.angle = normalizeAngle(point1.theta(point2));\n    });\n  }\n\n  // initialization of the route finding\n  function router(vertices, opt, linkView) {\n    resolveOptions(opt);\n\n    // enable/disable linkView perpendicular option\n    linkView.options.perpendicular = !!opt.perpendicular;\n    var sourceBBox = getSourceBBox$1(linkView, opt);\n    var targetBBox = getTargetBBox$1(linkView, opt);\n    var sourceAnchor = getSourceAnchor$1(linkView, opt);\n    //var targetAnchor = getTargetAnchor(linkView, opt);\n\n    // pathfinding\n    var isPointObstacle;\n    if (typeof opt.isPointObstacle === 'function') {\n      isPointObstacle = opt.isPointObstacle;\n    } else {\n      var map = new ObstacleMap(opt);\n      map.build(linkView.paper.model, linkView.model);\n      isPointObstacle = function (point) {\n        return !map.isPointAccessible(point);\n      };\n    }\n    var oldVertices = toArray(vertices).map(Point);\n    var newVertices = [];\n    var tailPoint = sourceAnchor; // the origin of first route's grid, does not need snapping\n\n    // find a route by concatenating all partial routes (routes need to pass through vertices)\n    // source -> vertex[1] -> ... -> vertex[n] -> target\n    var to, from;\n    for (var i = 0, len = oldVertices.length; i <= len; i++) {\n      var partialRoute = null;\n      from = to || sourceBBox;\n      to = oldVertices[i];\n      if (!to) {\n        // this is the last iteration\n        // we ran through all vertices in oldVertices\n        // 'to' is not a vertex.\n\n        to = targetBBox;\n\n        // If the target is a point (i.e. it's not an element), we\n        // should use dragging route instead of main routing method if it has been provided.\n        var isEndingAtPoint = !linkView.model.get('source').id || !linkView.model.get('target').id;\n        if (isEndingAtPoint && isFunction(opt.draggingRoute)) {\n          // Make sure we are passing points only (not rects).\n          var dragFrom = from === sourceBBox ? sourceAnchor : from;\n          var dragTo = to.origin();\n          partialRoute = opt.draggingRoute.call(linkView, dragFrom, dragTo, opt);\n        }\n      }\n\n      // if partial route has not been calculated yet use the main routing method to find one\n      partialRoute = partialRoute || findRoute.call(linkView, from, to, isPointObstacle, opt);\n      if (partialRoute === null) {\n        // the partial route cannot be found\n        return opt.fallbackRouter(vertices, opt, linkView);\n      }\n      var leadPoint = partialRoute[0];\n\n      // remove the first point if the previous partial route had the same point as last\n      if (leadPoint && leadPoint.equals(tailPoint)) {\n        partialRoute.shift();\n      }\n\n      // save tailPoint for next iteration\n      tailPoint = partialRoute[partialRoute.length - 1] || tailPoint;\n      Array.prototype.push.apply(newVertices, partialRoute);\n    }\n    return newVertices;\n  }\n\n  // public function\n  var manhattan = function (vertices, opt, linkView) {\n    return router(vertices, assign({}, config$1, opt), linkView);\n  };\n  var config$2 = {\n    maxAllowedDirectionChange: 45,\n    // cost of a diagonal step\n    diagonalCost: function () {\n      var step = this.step;\n      return Math.ceil(Math.sqrt(step * step << 1));\n    },\n    // an array of directions to find next points on the route\n    // different from start/end directions\n    directions: function () {\n      var step = this.step;\n      var cost = this.cost();\n      var diagonalCost = this.diagonalCost();\n      return [{\n        offsetX: step,\n        offsetY: 0,\n        cost: cost\n      }, {\n        offsetX: step,\n        offsetY: step,\n        cost: diagonalCost\n      }, {\n        offsetX: 0,\n        offsetY: step,\n        cost: cost\n      }, {\n        offsetX: -step,\n        offsetY: step,\n        cost: diagonalCost\n      }, {\n        offsetX: -step,\n        offsetY: 0,\n        cost: cost\n      }, {\n        offsetX: -step,\n        offsetY: -step,\n        cost: diagonalCost\n      }, {\n        offsetX: 0,\n        offsetY: -step,\n        cost: cost\n      }, {\n        offsetX: step,\n        offsetY: -step,\n        cost: diagonalCost\n      }];\n    },\n    // a simple route used in situations when main routing method fails\n    // (exceed max number of loop iterations, inaccessible)\n    fallbackRoute: function (from, to, opt) {\n      // Find a route which breaks by 45 degrees ignoring all obstacles.\n\n      var theta = from.theta(to);\n      var route = [];\n      var a = {\n        x: to.x,\n        y: from.y\n      };\n      var b = {\n        x: from.x,\n        y: to.y\n      };\n      if (theta % 180 > 90) {\n        var t = a;\n        a = b;\n        b = t;\n      }\n      var p1 = theta % 90 < 45 ? a : b;\n      var l1 = new Line(from, p1);\n      var alpha = 90 * Math.ceil(theta / 90);\n      var p2 = Point.fromPolar(l1.squaredLength(), toRad(alpha + 135), p1);\n      var l2 = new Line(to, p2);\n      var intersectionPoint = l1.intersection(l2);\n      var point = intersectionPoint ? intersectionPoint : to;\n      var directionFrom = intersectionPoint ? point : from;\n      var quadrant = 360 / opt.directions.length;\n      var angleTheta = directionFrom.theta(to);\n      var normalizedAngle = normalizeAngle(angleTheta + quadrant / 2);\n      var directionAngle = quadrant * Math.floor(normalizedAngle / quadrant);\n      opt.previousDirectionAngle = directionAngle;\n      if (point) {\n        route.push(point.round());\n      }\n      route.push(to);\n      return route;\n    }\n  };\n\n  // public function\n  var metro = function (vertices, opt, linkView) {\n    if (!isFunction(manhattan)) {\n      throw new Error('Metro requires the manhattan router.');\n    }\n    return manhattan(vertices, assign({}, config$2, opt), linkView);\n  };\n  var Directions = {\n    AUTO: 'auto',\n    LEFT: 'left',\n    RIGHT: 'right',\n    TOP: 'top',\n    BOTTOM: 'bottom',\n    ANCHOR_SIDE: 'anchor-side',\n    MAGNET_SIDE: 'magnet-side'\n  };\n  var DEFINED_DIRECTIONS = [Directions.LEFT, Directions.RIGHT, Directions.TOP, Directions.BOTTOM];\n  var OPPOSITE_DIRECTIONS = {};\n  OPPOSITE_DIRECTIONS[Directions.LEFT] = Directions.RIGHT;\n  OPPOSITE_DIRECTIONS[Directions.RIGHT] = Directions.LEFT;\n  OPPOSITE_DIRECTIONS[Directions.TOP] = Directions.BOTTOM;\n  OPPOSITE_DIRECTIONS[Directions.BOTTOM] = Directions.TOP;\n  var VERTICAL_DIRECTIONS = [Directions.TOP, Directions.BOTTOM];\n  var ANGLE_DIRECTION_MAP = {\n    0: Directions.RIGHT,\n    180: Directions.LEFT,\n    270: Directions.TOP,\n    90: Directions.BOTTOM\n  };\n  function getSegmentAngle(line) {\n    // TODO: the angle() method is general and therefore unnecessarily heavy for orthogonal links\n    return line.angle();\n  }\n  function simplifyPoints(points) {\n    // TODO: use own more efficient implementation (filter points that do not change direction).\n    // To simplify segments that are almost aligned (start and end points differ by e.g. 0.5px), use a threshold of 1.\n    return new Polyline(points).simplify({\n      threshold: 1\n    }).points;\n  }\n  function resolveSides(source, target) {\n    var sourcePoint = source.point;\n    var sx0 = source.x0;\n    var sy0 = source.y0;\n    var sourceView = source.view;\n    var sourceBBox = source.bbox;\n    var sourceDirection = source.direction;\n    var targetPoint = target.point;\n    var tx0 = target.x0;\n    var ty0 = target.y0;\n    var targetView = target.view;\n    var targetBBox = target.bbox;\n    var targetDirection = target.direction;\n    var sourceSide;\n    if (!sourceView) {\n      var sourceLinkAnchorBBox = new Rect(sx0, sy0, 0, 0);\n      sourceSide = DEFINED_DIRECTIONS.includes(sourceDirection) ? sourceDirection : sourceLinkAnchorBBox.sideNearestToPoint(targetPoint);\n    } else if (sourceView.model.isLink()) {\n      sourceSide = getDirectionForLinkConnection(targetPoint, sourcePoint, sourceView);\n    } else if (sourceDirection === Directions.ANCHOR_SIDE) {\n      sourceSide = sourceBBox.sideNearestToPoint(sourcePoint);\n    } else if (sourceDirection === Directions.MAGNET_SIDE) {\n      sourceSide = sourceView.model.getBBox().sideNearestToPoint(sourcePoint);\n    } else {\n      sourceSide = sourceDirection;\n    }\n    var targetSide;\n    if (!targetView) {\n      var targetLinkAnchorBBox = new Rect(tx0, ty0, 0, 0);\n      targetSide = DEFINED_DIRECTIONS.includes(targetDirection) ? targetDirection : targetLinkAnchorBBox.sideNearestToPoint(sourcePoint);\n    } else if (targetView.model.isLink()) {\n      targetSide = getDirectionForLinkConnection(sourcePoint, targetPoint, targetView);\n    } else if (targetDirection === Directions.ANCHOR_SIDE) {\n      targetSide = targetBBox.sideNearestToPoint(targetPoint);\n    } else if (targetDirection === Directions.MAGNET_SIDE) {\n      targetSide = targetView.model.getBBox().sideNearestToPoint(targetPoint);\n    } else {\n      targetSide = targetDirection;\n    }\n    return [sourceSide, targetSide];\n  }\n  function resolveForTopSourceSide(source, target, nextInLine) {\n    var sx0 = source.x0;\n    var sy0 = source.y0;\n    var width = source.width;\n    var height = source.height;\n    var anchor = source.point;\n    var margin = source.margin;\n    var sx1 = sx0 + width;\n    var sy1 = sy0 + height;\n    var smx0 = sx0 - margin;\n    var smx1 = sx1 + margin;\n    var smy0 = sy0 - margin;\n    var ax = anchor.x;\n    var tx = target.x0;\n    var ty = target.y0;\n    if (tx === ax && ty < sy0) {\n      return Directions.BOTTOM;\n    }\n    if (tx < ax && ty < smy0) {\n      return Directions.RIGHT;\n    }\n    if (tx > ax && ty < smy0) {\n      return Directions.LEFT;\n    }\n    if (tx < smx0 && ty >= sy0) {\n      return Directions.TOP;\n    }\n    if (tx > smx1 && ty >= sy0) {\n      return Directions.TOP;\n    }\n    if (tx >= smx0 && tx <= ax && ty > sy1) {\n      if (nextInLine.point.x < tx) {\n        return Directions.RIGHT;\n      }\n      return Directions.LEFT;\n    }\n    if (tx <= smx1 && tx >= ax && ty > sy1) {\n      if (nextInLine.point.x < tx) {\n        return Directions.RIGHT;\n      }\n      return Directions.LEFT;\n    }\n    return Directions.TOP;\n  }\n  function resolveForBottomSourceSide(source, target, nextInLine) {\n    var sx0 = source.x0;\n    var sy0 = source.y0;\n    var width = source.width;\n    var height = source.height;\n    var anchor = source.point;\n    var margin = source.margin;\n    var sx1 = sx0 + width;\n    var sy1 = sy0 + height;\n    var smx0 = sx0 - margin;\n    var smx1 = sx1 + margin;\n    var smy1 = sy1 + margin;\n    var ax = anchor.x;\n    var tx = target.x0;\n    var ty = target.y0;\n    if (tx === ax && ty > sy1) {\n      return Directions.TOP;\n    }\n    if (tx < ax && ty > smy1) {\n      return Directions.RIGHT;\n    }\n    if (tx > ax && ty > smy1) {\n      return Directions.LEFT;\n    }\n    if (tx < smx0 && ty <= sy1) {\n      return Directions.BOTTOM;\n    }\n    if (tx > smx1 && ty <= sy1) {\n      return Directions.BOTTOM;\n    }\n    if (tx >= smx0 && tx <= ax && ty < sy0) {\n      if (nextInLine.point.x < tx) {\n        return Directions.RIGHT;\n      }\n      return Directions.LEFT;\n    }\n    if (tx <= smx1 && tx >= ax && ty < sy0) {\n      if (nextInLine.point.x < tx) {\n        return Directions.RIGHT;\n      }\n      return Directions.LEFT;\n    }\n    return Directions.BOTTOM;\n  }\n  function resolveForLeftSourceSide(source, target, nextInLine) {\n    var sy0 = source.y0;\n    var sx0 = source.x0;\n    var width = source.width;\n    var height = source.height;\n    var anchor = source.point;\n    var margin = source.margin;\n    var sx1 = sx0 + width;\n    var sy1 = sy0 + height;\n    var smx0 = sx0 - margin;\n    var smy0 = sy0 - margin;\n    var smy1 = sy1 + margin;\n    var ax = anchor.x;\n    var ay = anchor.y;\n    var tx = target.x0;\n    var ty = target.y0;\n    if (tx < ax && ty === ay) {\n      return Directions.RIGHT;\n    }\n    if (tx <= smx0 && ty < ay) {\n      return Directions.BOTTOM;\n    }\n    if (tx <= smx0 && ty > ay) {\n      return Directions.TOP;\n    }\n    if (tx >= sx0 && ty <= smy0) {\n      return Directions.LEFT;\n    }\n    if (tx >= sx0 && ty >= smy1) {\n      return Directions.LEFT;\n    }\n    if (tx > sx1 && ty >= smy0 && ty <= ay) {\n      if (nextInLine.point.y < ty) {\n        return Directions.BOTTOM;\n      }\n      return Directions.TOP;\n    }\n    if (tx > sx1 && ty <= smy1 && ty >= ay) {\n      if (nextInLine.point.y < ty) {\n        return Directions.BOTTOM;\n      }\n      return Directions.TOP;\n    }\n    return Directions.LEFT;\n  }\n  function resolveForRightSourceSide(source, target, nextInLine) {\n    var sy0 = source.y0;\n    var sx0 = source.x0;\n    var width = source.width;\n    var height = source.height;\n    var anchor = source.point;\n    var margin = source.margin;\n    var sx1 = sx0 + width;\n    var sy1 = sy0 + height;\n    var smx1 = sx1 + margin;\n    var smy0 = sy0 - margin;\n    var smy1 = sy1 + margin;\n    var ax = anchor.x;\n    var ay = anchor.y;\n    var tx = target.x0;\n    var ty = target.y0;\n    if (tx > ax && ty === ay) {\n      return Directions.LEFT;\n    }\n    if (tx >= smx1 && ty < ay) {\n      return Directions.BOTTOM;\n    }\n    if (tx >= smx1 && ty > ay) {\n      return Directions.TOP;\n    }\n    if (tx <= sx1 && ty <= smy0) {\n      return Directions.RIGHT;\n    }\n    if (tx <= sx1 && ty >= smy1) {\n      return Directions.RIGHT;\n    }\n    if (tx < sx0 && ty >= smy0 && ty <= ay) {\n      if (nextInLine.point.y < ty) {\n        return Directions.BOTTOM;\n      }\n      return Directions.TOP;\n    }\n    if (tx < sx0 && ty <= smy1 && ty >= ay) {\n      if (nextInLine.point.y < ty) {\n        return Directions.BOTTOM;\n      }\n      return Directions.TOP;\n    }\n    return Directions.RIGHT;\n  }\n  function resolveInitialDirection(source, target, nextInLine) {\n    var ref = resolveSides(source, target);\n    var sourceSide = ref[0];\n    switch (sourceSide) {\n      case Directions.TOP:\n        return resolveForTopSourceSide(source, target, nextInLine);\n      case Directions.RIGHT:\n        return resolveForRightSourceSide(source, target, nextInLine);\n      case Directions.BOTTOM:\n        return resolveForBottomSourceSide(source, target, nextInLine);\n      case Directions.LEFT:\n        return resolveForLeftSourceSide(source, target, nextInLine);\n    }\n  }\n  function getDirectionForLinkConnection(linkOrigin, connectionPoint, linkView) {\n    var tangent = linkView.getTangentAtLength(linkView.getClosestPointLength(connectionPoint));\n    var roundedAngle = Math.round(getSegmentAngle(tangent) / 90) * 90;\n    if (roundedAngle % 180 === 0 && linkOrigin.y === connectionPoint.y) {\n      return linkOrigin.x < connectionPoint.x ? Directions.LEFT : Directions.RIGHT;\n    } else if (linkOrigin.x === connectionPoint.x) {\n      return linkOrigin.y < connectionPoint.y ? Directions.TOP : Directions.BOTTOM;\n    }\n    switch (roundedAngle) {\n      case 0:\n      case 180:\n      case 360:\n        return linkOrigin.y < connectionPoint.y ? Directions.TOP : Directions.BOTTOM;\n      case 90:\n      case 270:\n        return linkOrigin.x < connectionPoint.x ? Directions.LEFT : Directions.RIGHT;\n    }\n  }\n  function pointDataFromAnchor(view, point, bbox, direction, isPort, fallBackAnchor, margin) {\n    if (direction === Directions.AUTO) {\n      direction = isPort ? Directions.MAGNET_SIDE : Directions.ANCHOR_SIDE;\n    }\n    var isElement = view && view.model.isElement();\n    var ref = isElement ? Rect.fromRectUnion(bbox, view.model.getBBox()) : fallBackAnchor;\n    var x0 = ref.x;\n    var y0 = ref.y;\n    var width = ref.width;\n    if (width === void 0) width = 0;\n    var height = ref.height;\n    if (height === void 0) height = 0;\n    return {\n      point: point,\n      x0: x0,\n      y0: y0,\n      view: view,\n      bbox: bbox,\n      width: width,\n      height: height,\n      direction: direction,\n      margin: isElement ? margin : 0\n    };\n  }\n  function pointDataFromVertex(ref) {\n    var x = ref.x;\n    var y = ref.y;\n    var point = new Point(x, y);\n    return {\n      point: point,\n      x0: point.x,\n      y0: point.y,\n      view: null,\n      bbox: new Rect(x, y, 0, 0),\n      width: 0,\n      height: 0,\n      direction: null,\n      margin: 0\n    };\n  }\n  function getOutsidePoint(side, pointData, margin) {\n    var outsidePoint = pointData.point.clone();\n    var x0 = pointData.x0;\n    var y0 = pointData.y0;\n    var width = pointData.width;\n    var height = pointData.height;\n    switch (side) {\n      case 'left':\n        outsidePoint.x = x0 - margin;\n        break;\n      case 'right':\n        outsidePoint.x = x0 + width + margin;\n        break;\n      case 'top':\n        outsidePoint.y = y0 - margin;\n        break;\n      case 'bottom':\n        outsidePoint.y = y0 + height + margin;\n        break;\n    }\n    return outsidePoint;\n  }\n  function routeBetweenPoints(source, target) {\n    var sourcePoint = source.point;\n    var sx0 = source.x0;\n    var sy0 = source.y0;\n    var sourceView = source.view;\n    var sourceWidth = source.width;\n    var sourceHeight = source.height;\n    var sourceMargin = source.margin;\n    var targetPoint = target.point;\n    var tx0 = target.x0;\n    var ty0 = target.y0;\n    var targetWidth = target.width;\n    var targetHeight = target.height;\n    var targetMargin = target.margin;\n    var tx1 = tx0 + targetWidth;\n    var ty1 = ty0 + targetHeight;\n    var sx1 = sx0 + sourceWidth;\n    var sy1 = sy0 + sourceHeight;\n    var isSourceEl = sourceView && sourceView.model.isElement();\n\n    // Key coordinates including the margin\n    var smx0 = sx0 - sourceMargin;\n    var smx1 = sx1 + sourceMargin;\n    var smy0 = sy0 - sourceMargin;\n    var smy1 = sy1 + sourceMargin;\n    var tmx0 = tx0 - targetMargin;\n    var tmx1 = tx1 + targetMargin;\n    var tmy0 = ty0 - targetMargin;\n    var tmy1 = ty1 + targetMargin;\n    var ref = resolveSides(source, target);\n    var sourceSide = ref[0];\n    var targetSide = ref[1];\n    var sourceOutsidePoint = getOutsidePoint(sourceSide, {\n      point: sourcePoint,\n      x0: sx0,\n      y0: sy0,\n      width: sourceWidth,\n      height: sourceHeight\n    }, sourceMargin);\n    var targetOutsidePoint = getOutsidePoint(targetSide, {\n      point: targetPoint,\n      x0: tx0,\n      y0: ty0,\n      width: targetWidth,\n      height: targetHeight\n    }, targetMargin);\n    var sox = sourceOutsidePoint.x;\n    var soy = sourceOutsidePoint.y;\n    var tox = targetOutsidePoint.x;\n    var toy = targetOutsidePoint.y;\n    var tcx = (tx0 + tx1) / 2;\n    var tcy = (ty0 + ty1) / 2;\n    var scx = (sx0 + sx1) / 2;\n    var scy = (sy0 + sy1) / 2;\n    var middleOfVerticalSides = (scx < tcx ? sx1 + tx0 : tx1 + sx0) / 2;\n    var middleOfHorizontalSides = (scy < tcy ? sy1 + ty0 : ty1 + sy0) / 2;\n    if (sourceSide === 'left' && targetSide === 'right') {\n      if (smx0 <= tmx1) {\n        var y = middleOfHorizontalSides;\n        if (sx1 <= tx0) {\n          if (ty1 >= smy0 && toy < soy) {\n            y = Math.min(tmy0, smy0);\n          } else if (ty0 <= smy1 && toy >= soy) {\n            y = Math.max(tmy1, smy1);\n          }\n        }\n        return [{\n          x: sox,\n          y: soy\n        }, {\n          x: sox,\n          y: y\n        }, {\n          x: tox,\n          y: y\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      var x = (sox + tox) / 2;\n      return [{\n        x: x,\n        y: soy\n      }, {\n        x: x,\n        y: toy\n      }];\n    } else if (sourceSide === 'right' && targetSide === 'left') {\n      if (smx1 >= tmx0) {\n        var y$1 = middleOfHorizontalSides;\n        if (sox > tx1) {\n          if (ty1 >= smy0 && toy < soy) {\n            y$1 = Math.min(tmy0, smy0);\n          } else if (ty0 <= smy1 && toy >= soy) {\n            y$1 = Math.max(tmy1, smy1);\n          }\n        }\n        return [{\n          x: sox,\n          y: soy\n        }, {\n          x: sox,\n          y: y$1\n        }, {\n          x: tox,\n          y: y$1\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      var x$1 = (sox + tox) / 2;\n      return [{\n        x: x$1,\n        y: soy\n      }, {\n        x: x$1,\n        y: toy\n      }];\n    } else if (sourceSide === 'top' && targetSide === 'bottom') {\n      if (soy < toy) {\n        var x$2 = middleOfVerticalSides;\n        var y$2 = soy;\n        if (soy < ty0) {\n          if (tx1 >= smx0 && tox < sox) {\n            x$2 = Math.min(tmx0, smx0);\n          } else if (tx0 <= smx1 && tox >= sox) {\n            x$2 = Math.max(tmx1, smx1);\n          }\n        }\n        return [{\n          x: sox,\n          y: y$2\n        }, {\n          x: x$2,\n          y: y$2\n        }, {\n          x: x$2,\n          y: toy\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      var y$3 = (soy + toy) / 2;\n      return [{\n        x: sox,\n        y: y$3\n      }, {\n        x: tox,\n        y: y$3\n      }];\n    } else if (sourceSide === 'bottom' && targetSide === 'top') {\n      if (soy - sourceMargin > toy) {\n        var x$3 = middleOfVerticalSides;\n        var y$4 = soy;\n        if (soy > ty1) {\n          if (tx1 >= smx0 && tox < sox) {\n            x$3 = Math.min(tmx0, smx0);\n          } else if (tx0 <= smx1 && tox >= sox) {\n            x$3 = Math.max(tmx1, smx1);\n          }\n        }\n        return [{\n          x: sox,\n          y: y$4\n        }, {\n          x: x$3,\n          y: y$4\n        }, {\n          x: x$3,\n          y: toy\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      var y$5 = (soy + toy) / 2;\n      return [{\n        x: sox,\n        y: y$5\n      }, {\n        x: tox,\n        y: y$5\n      }];\n    } else if (sourceSide === 'top' && targetSide === 'top') {\n      var x$4;\n      var y1 = Math.min((sy1 + ty0) / 2, toy);\n      var y2 = Math.min((sy0 + ty1) / 2, soy);\n      if (toy < soy) {\n        if (sox >= tmx1 || sox <= tmx0) {\n          return [{\n            x: sox,\n            y: Math.min(soy, toy)\n          }, {\n            x: tox,\n            y: Math.min(soy, toy)\n          }];\n        } else if (tox > sox) {\n          x$4 = Math.min(sox, tmx0);\n        } else {\n          x$4 = Math.max(sox, tmx1);\n        }\n      } else {\n        if (tox >= smx1 || tox <= smx0) {\n          return [{\n            x: sox,\n            y: Math.min(soy, toy)\n          }, {\n            x: tox,\n            y: Math.min(soy, toy)\n          }];\n        } else if (tox >= sox) {\n          x$4 = Math.max(tox, smx1);\n        } else {\n          x$4 = Math.min(tox, smx0);\n        }\n      }\n      return [{\n        x: sox,\n        y: y2\n      }, {\n        x: x$4,\n        y: y2\n      }, {\n        x: x$4,\n        y: y1\n      }, {\n        x: tox,\n        y: y1\n      }];\n    } else if (sourceSide === 'bottom' && targetSide === 'bottom') {\n      var x$5;\n      var y1$1 = Math.max((sy0 + ty1) / 2, toy);\n      var y2$1 = Math.max((sy1 + ty0) / 2, soy);\n      if (toy > soy) {\n        if (sox >= tmx1 || sox <= tmx0) {\n          return [{\n            x: sox,\n            y: Math.max(soy, toy)\n          }, {\n            x: tox,\n            y: Math.max(soy, toy)\n          }];\n        } else if (tox > sox) {\n          x$5 = Math.min(sox, tmx0);\n        } else {\n          x$5 = Math.max(sox, tmx1);\n        }\n      } else {\n        if (tox >= smx1 || tox <= smx0) {\n          return [{\n            x: sox,\n            y: Math.max(soy, toy)\n          }, {\n            x: tox,\n            y: Math.max(soy, toy)\n          }];\n        } else if (tox >= sox) {\n          x$5 = Math.max(tox, smx1);\n        } else {\n          x$5 = Math.min(tox, smx0);\n        }\n      }\n      return [{\n        x: sox,\n        y: y2$1\n      }, {\n        x: x$5,\n        y: y2$1\n      }, {\n        x: x$5,\n        y: y1$1\n      }, {\n        x: tox,\n        y: y1$1\n      }];\n    } else if (sourceSide === 'left' && targetSide === 'left') {\n      var y$6;\n      var x1 = Math.min((sx1 + tx0) / 2, tox);\n      var x2 = Math.min((sx0 + tx1) / 2, sox);\n      if (tox > sox) {\n        if (toy <= soy) {\n          y$6 = Math.min(smy0, toy);\n        } else {\n          y$6 = Math.max(smy1, toy);\n        }\n      } else {\n        if (toy >= soy) {\n          y$6 = Math.min(tmy0, soy);\n        } else {\n          y$6 = Math.max(tmy1, soy);\n        }\n      }\n      return [{\n        x: x2,\n        y: soy\n      }, {\n        x: x2,\n        y: y$6\n      }, {\n        x: x1,\n        y: y$6\n      }, {\n        x: x1,\n        y: toy\n      }];\n    } else if (sourceSide === 'right' && targetSide === 'right') {\n      var y$7;\n      var x1$1 = Math.max((sx0 + tx1) / 2, tox);\n      var x2$1 = Math.max((sx1 + tx0) / 2, sox);\n      if (tox < sox) {\n        if (toy <= soy) {\n          y$7 = Math.min(smy0, toy);\n        } else {\n          y$7 = Math.max(smy1, toy);\n        }\n      } else {\n        if (toy >= soy) {\n          y$7 = Math.min(tmy0, soy);\n        } else {\n          y$7 = Math.max(tmy1, soy);\n        }\n      }\n      return [{\n        x: x2$1,\n        y: soy\n      }, {\n        x: x2$1,\n        y: y$7\n      }, {\n        x: x1$1,\n        y: y$7\n      }, {\n        x: x1$1,\n        y: toy\n      }];\n    } else if (sourceSide === 'top' && targetSide === 'right') {\n      if (soy > toy) {\n        if (sox < tox) {\n          var y$8 = middleOfHorizontalSides;\n          if ((y$8 > tcy || !isSourceEl) && y$8 < tmy1 && sox < tx0) {\n            y$8 = tmy0;\n          }\n          return [{\n            x: sox,\n            y: y$8\n          }, {\n            x: tox,\n            y: y$8\n          }, {\n            x: tox,\n            y: toy\n          }];\n        }\n        return [{\n          x: sox,\n          y: toy\n        }];\n      }\n      var x$6 = Math.max(middleOfVerticalSides, tmx1);\n      if (tox < sox && toy > sy0 && toy < sy1) {\n        return [{\n          x: sox,\n          y: soy\n        }, {\n          x: x$6,\n          y: soy\n        }, {\n          x: x$6,\n          y: toy\n        }];\n      }\n      if (x$6 > smx0 && toy > sy0 || tx0 > sx1) {\n        var y$9 = Math.min(sy0 - sourceMargin, ty0 - targetMargin);\n        var x$7 = Math.max(sx1 + sourceMargin, tx1 + targetMargin);\n        return [{\n          x: sox,\n          y: y$9\n        }, {\n          x: x$7,\n          y: y$9\n        }, {\n          x: x$7,\n          y: toy\n        }];\n      }\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: Math.max(x$6, tox),\n        y: soy\n      }, {\n        x: Math.max(x$6, tox),\n        y: toy\n      }];\n    } else if (sourceSide === 'top' && targetSide === 'left') {\n      if (soy > toy) {\n        if (sox > tox) {\n          var y$10 = middleOfHorizontalSides;\n          if ((y$10 > tcy || !isSourceEl) && y$10 < tmy1 && sox > tx1) {\n            y$10 = tmy0;\n          }\n          return [{\n            x: sox,\n            y: y$10\n          }, {\n            x: tox,\n            y: y$10\n          }, {\n            x: tox,\n            y: toy\n          }];\n        }\n        return [{\n          x: sox,\n          y: toy\n        }];\n      }\n      var x$8 = Math.min(tmx0, middleOfVerticalSides);\n      if (sox < tox && sy1 >= toy) {\n        return [{\n          x: sox,\n          y: soy\n        }, {\n          x: x$8,\n          y: soy\n        }, {\n          x: x$8,\n          y: toy\n        }];\n      }\n      if (x$8 < smx1 && soy < ty1) {\n        var y$11 = Math.min(smy0, tmy0);\n        var x$9 = Math.min(smx0, tmx0);\n        return [{\n          x: sox,\n          y: y$11\n        }, {\n          x: x$9,\n          y: y$11\n        }, {\n          x: x$9,\n          y: toy\n        }];\n      }\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: x$8,\n        y: soy\n      }, {\n        x: x$8,\n        y: toy\n      }];\n    } else if (sourceSide === 'bottom' && targetSide === 'right') {\n      if (soy < toy) {\n        if (sox < tox) {\n          var y$12 = middleOfHorizontalSides;\n          if ((y$12 < tcy || !isSourceEl) && y$12 > tmy0 && sox < tx0) {\n            y$12 = tmy1;\n          }\n          return [{\n            x: sox,\n            y: y$12\n          }, {\n            x: tox,\n            y: y$12\n          }, {\n            x: tox,\n            y: toy\n          }];\n        }\n        return [{\n          x: sox,\n          y: toy\n        }];\n      } else {\n        if (sx0 < tox) {\n          var y$13 = Math.max(smy1, tmy1);\n          var x$10 = Math.max(smx1, tmx1);\n          return [{\n            x: sox,\n            y: y$13\n          }, {\n            x: x$10,\n            y: y$13\n          }, {\n            x: x$10,\n            y: toy\n          }];\n        }\n      }\n      var x$11 = middleOfVerticalSides;\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: x$11,\n        y: soy\n      }, {\n        x: x$11,\n        y: toy\n      }];\n    } else if (sourceSide === 'bottom' && targetSide === 'left') {\n      if (soy < toy) {\n        if (sox > tox) {\n          var y$14 = middleOfHorizontalSides;\n          if ((y$14 < tcy || !isSourceEl) && y$14 > tmy0 && sox > tx1) {\n            y$14 = tmy1;\n          }\n          return [{\n            x: sox,\n            y: y$14\n          }, {\n            x: tox,\n            y: y$14\n          }, {\n            x: tox,\n            y: toy\n          }];\n        }\n        return [{\n          x: sox,\n          y: toy\n        }];\n      } else {\n        if (sx1 > tox) {\n          var y$15 = Math.max(smy1, tmy1);\n          var x$12 = Math.min(smx0, tmx0);\n          return [{\n            x: sox,\n            y: y$15\n          }, {\n            x: x$12,\n            y: y$15\n          }, {\n            x: x$12,\n            y: toy\n          }];\n        }\n      }\n      var x$13 = middleOfVerticalSides;\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: x$13,\n        y: soy\n      }, {\n        x: x$13,\n        y: toy\n      }];\n    } else if (sourceSide === 'left' && targetSide === 'bottom') {\n      if (sox >= tox && soy >= tmy1) {\n        return [{\n          x: tox,\n          y: soy\n        }];\n      }\n      if (sox >= tx1 && soy < toy) {\n        var x$14 = middleOfVerticalSides;\n        return [{\n          x: x$14,\n          y: soy\n        }, {\n          x: x$14,\n          y: toy\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      if (tox < sx1 && ty1 <= sy0) {\n        var y$16 = middleOfHorizontalSides;\n        return [{\n          x: sox,\n          y: soy\n        }, {\n          x: sox,\n          y: y$16\n        }, {\n          x: tox,\n          y: y$16\n        }];\n      }\n      var x$15 = Math.min(tmx0, sox);\n      var y$17 = Math.max(smy1, tmy1);\n      return [{\n        x: x$15,\n        y: soy\n      }, {\n        x: x$15,\n        y: y$17\n      }, {\n        x: tox,\n        y: y$17\n      }];\n    } else if (sourceSide === 'left' && targetSide === 'top') {\n      if (sox > tox && soy < tmy0) {\n        return [{\n          x: tox,\n          y: soy\n        }];\n      }\n      if (sox >= tx1) {\n        if (soy > toy) {\n          var x$16 = middleOfVerticalSides;\n          return [{\n            x: x$16,\n            y: soy\n          }, {\n            x: x$16,\n            y: toy\n          }, {\n            x: tox,\n            y: toy\n          }];\n        }\n      }\n      if (tox <= sx1 && toy > soy) {\n        var y$18 = middleOfHorizontalSides;\n        return [{\n          x: sox,\n          y: soy\n        }, {\n          x: sox,\n          y: y$18\n        }, {\n          x: tox,\n          y: y$18\n        }];\n      }\n      var x$17 = toy < soy ? Math.min(smx0, tmx0) : smx0;\n      var y$19 = Math.min(smy0, tmy0);\n      return [{\n        x: x$17,\n        y: soy\n      }, {\n        x: x$17,\n        y: y$19\n      }, {\n        x: tox,\n        y: y$19\n      }];\n    } else if (sourceSide === 'right' && targetSide === 'top') {\n      if (sox <= tox && soy < tmy0) {\n        return [{\n          x: tox,\n          y: soy\n        }];\n      }\n      if (sx1 < tx0 && soy > toy) {\n        var x$18 = middleOfVerticalSides;\n        return [{\n          x: x$18,\n          y: soy\n        }, {\n          x: x$18,\n          y: toy\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      if (tox < sox && ty0 > sy1) {\n        var y$20 = middleOfHorizontalSides;\n        return [{\n          x: sox,\n          y: soy\n        }, {\n          x: sox,\n          y: y$20\n        }, {\n          x: tox,\n          y: y$20\n        }];\n      }\n      var x$19 = Math.max(smx1, tmx1);\n      var y$21 = Math.min(smy0, tmy0);\n      return [{\n        x: x$19,\n        y: soy\n      }, {\n        x: x$19,\n        y: y$21\n      }, {\n        x: tox,\n        y: y$21\n      }];\n    } else if (sourceSide === 'right' && targetSide === 'bottom') {\n      if (sox <= tox && soy >= tmy1) {\n        return [{\n          x: tox,\n          y: soy\n        }];\n      }\n      if (sox <= tmx0 && soy < toy) {\n        var x$20 = middleOfVerticalSides;\n        return [{\n          x: x$20,\n          y: soy\n        }, {\n          x: x$20,\n          y: toy\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      if (tox > sx0 && ty1 < sy0) {\n        var y$22 = middleOfHorizontalSides;\n        return [{\n          x: sox,\n          y: soy\n        }, {\n          x: sox,\n          y: y$22\n        }, {\n          x: tox,\n          y: y$22\n        }];\n      }\n      var x$21 = Math.max(tmx1, sox);\n      var y$23 = Math.max(smy1, tmy1);\n      return [{\n        x: x$21,\n        y: soy\n      }, {\n        x: x$21,\n        y: y$23\n      }, {\n        x: tox,\n        y: y$23\n      }];\n    }\n  }\n  function rightAngleRouter(vertices, opt, linkView) {\n    var sourceDirection = opt.sourceDirection;\n    if (sourceDirection === void 0) sourceDirection = Directions.AUTO;\n    var targetDirection = opt.targetDirection;\n    if (targetDirection === void 0) targetDirection = Directions.AUTO;\n    var margin = opt.margin || 20;\n    var useVertices = opt.useVertices || false;\n    var isSourcePort = !!linkView.model.source().port;\n    var sourcePoint = pointDataFromAnchor(linkView.sourceView, linkView.sourceAnchor, linkView.sourceBBox, sourceDirection, isSourcePort, linkView.sourceAnchor, margin);\n    var isTargetPort = !!linkView.model.target().port;\n    var targetPoint = pointDataFromAnchor(linkView.targetView, linkView.targetAnchor, linkView.targetBBox, targetDirection, isTargetPort, linkView.targetAnchor, margin);\n    var resultVertices = [];\n    if (!useVertices || vertices.length === 0) {\n      return simplifyPoints(routeBetweenPoints(sourcePoint, targetPoint));\n    }\n    var verticesData = vertices.map(function (v) {\n      return pointDataFromVertex(v);\n    });\n    var firstVertex = verticesData[0];\n    if (sourcePoint.view && sourcePoint.view.model.isElement() && sourcePoint.view.model.getBBox().inflate(margin).containsPoint(firstVertex.point)) {\n      var ref = resolveSides(sourcePoint, firstVertex);\n      var fromDirection = ref[0];\n      var toDirection = fromDirection;\n      var dummySource = pointDataFromVertex(sourcePoint.point);\n      // Points do not usually have margin. Here we create a point with a margin.\n      dummySource.margin = margin;\n      dummySource.direction = fromDirection;\n      firstVertex.direction = toDirection;\n      resultVertices.push.apply(resultVertices, routeBetweenPoints(dummySource, firstVertex).concat([firstVertex.point]));\n    } else {\n      // The first point responsible for the initial direction of the route\n      var next = verticesData[1] || targetPoint;\n      var direction = resolveInitialDirection(sourcePoint, firstVertex, next);\n      firstVertex.direction = direction;\n      resultVertices.push.apply(resultVertices, routeBetweenPoints(sourcePoint, firstVertex).concat([firstVertex.point]));\n    }\n    for (var i = 0; i < verticesData.length - 1; i++) {\n      var from = verticesData[i];\n      var to = verticesData[i + 1];\n      var segment = new Line(from.point, to.point);\n      var segmentAngle = getSegmentAngle(segment);\n      if (segmentAngle % 90 === 0) {\n        // Since the segment is horizontal or vertical, we can skip the routing and just connect them with a straight line\n        var toDirection$1 = ANGLE_DIRECTION_MAP[segmentAngle];\n        var accessDirection = OPPOSITE_DIRECTIONS[toDirection$1];\n        if (toDirection$1 !== from.direction) {\n          resultVertices.push(from.point, to.point);\n          to.direction = accessDirection;\n        } else {\n          var angle = normalizeAngle(segmentAngle - 90);\n          var dx = 0;\n          var dy = 0;\n          if (angle === 90) {\n            dy = -margin;\n          } else if (angle === 180) {\n            dx = -margin;\n          } else if (angle === 270) {\n            dy = margin;\n          } else if (angle === 0) {\n            dx = margin;\n          }\n          var p1 = {\n            x: from.point.x + dx,\n            y: from.point.y + dy\n          };\n          var p2 = {\n            x: to.point.x + dx,\n            y: to.point.y + dy\n          };\n          var segment2 = new Line(to.point, p2);\n          to.direction = ANGLE_DIRECTION_MAP[getSegmentAngle(segment2)];\n\n          // Constructing a loop\n          resultVertices.push(from.point, p1, p2, to.point);\n        }\n        continue;\n      }\n      var ref$1 = resolveDirection(from, to);\n      var fromDirection$1 = ref$1[0];\n      var toDirection$2 = ref$1[1];\n      from.direction = fromDirection$1;\n      to.direction = toDirection$2;\n      resultVertices.push.apply(resultVertices, routeBetweenPoints(from, to).concat([to.point]));\n    }\n    var lastVertex = verticesData[verticesData.length - 1];\n    if (targetPoint.view && targetPoint.view.model.isElement()) {\n      if (targetPoint.view.model.getBBox().inflate(margin).containsPoint(lastVertex.point)) {\n        var ref$2 = resolveDirection(lastVertex, targetPoint);\n        var fromDirection$2 = ref$2[0];\n        var dummyTarget = pointDataFromVertex(targetPoint.point);\n        var ref$3 = resolveSides(lastVertex, targetPoint);\n        var toDirection$3 = ref$3[1];\n        // we are creating a point that has a margin\n        dummyTarget.margin = margin;\n        dummyTarget.direction = toDirection$3;\n        lastVertex.direction = fromDirection$2;\n        resultVertices.push.apply(resultVertices, routeBetweenPoints(lastVertex, dummyTarget));\n      } else {\n        // the last point of `simplified` array is the last defined vertex\n        // grab the penultimate point and construct a line segment from it to the last vertex\n        // this will ensure that the last segment continues in a straight line\n\n        var simplified = simplifyPoints(resultVertices);\n        var segment$1 = new Line(simplified[simplified.length - 2], lastVertex.point);\n        var definedDirection = ANGLE_DIRECTION_MAP[Math.round(getSegmentAngle(segment$1))];\n        lastVertex.direction = definedDirection;\n        var lastSegmentRoute = routeBetweenPoints(lastVertex, targetPoint);\n        var ref$4 = simplifyPoints(lastSegmentRoute.concat([targetPoint.point]));\n        var p1$1 = ref$4[0];\n        var p2$1 = ref$4[1];\n        var lastSegment = new Line(p1$1, p2$1);\n        var roundedLastSegmentAngle = Math.round(getSegmentAngle(lastSegment));\n        var lastSegmentDirection = ANGLE_DIRECTION_MAP[roundedLastSegmentAngle];\n        if (lastSegmentDirection !== definedDirection && definedDirection === OPPOSITE_DIRECTIONS[lastSegmentDirection]) {\n          lastVertex.margin = margin;\n          lastSegmentRoute = routeBetweenPoints(lastVertex, targetPoint);\n        }\n        resultVertices.push.apply(resultVertices, lastSegmentRoute);\n      }\n    } else {\n      // since the target is only a point we can apply the same logic as if we connected two verticesData\n      var ref$5 = resolveDirection(lastVertex, targetPoint);\n      var vertexDirection = ref$5[0];\n      lastVertex.direction = vertexDirection;\n      resultVertices.push.apply(resultVertices, routeBetweenPoints(lastVertex, targetPoint));\n    }\n    return simplifyPoints(resultVertices);\n  }\n  function resolveDirection(from, to) {\n    var accessDirection = from.direction;\n    var isDirectionVertical = VERTICAL_DIRECTIONS.includes(accessDirection);\n    var sourceDirection = from.direction;\n    var targetDirection = to.direction;\n    if (isDirectionVertical) {\n      var isToAbove = from.point.y > to.point.y;\n      var dx = to.point.x - from.point.x;\n      if (accessDirection === Directions.BOTTOM) {\n        // If isToAbove === false and we need figure out if to go left or right\n        sourceDirection = isToAbove ? OPPOSITE_DIRECTIONS[accessDirection] : dx >= 0 ? Directions.RIGHT : Directions.LEFT;\n        if (dx > 0) {\n          targetDirection = isToAbove ? Directions.LEFT : Directions.TOP;\n        } else if (dx < 0) {\n          targetDirection = isToAbove ? Directions.RIGHT : Directions.TOP;\n        }\n      } else {\n        // If isToAbove === true and we need figure out if to go left or right\n        sourceDirection = isToAbove ? dx >= 0 ? Directions.RIGHT : Directions.LEFT : OPPOSITE_DIRECTIONS[accessDirection];\n        if (dx > 0) {\n          targetDirection = isToAbove ? Directions.BOTTOM : Directions.LEFT;\n        } else if (dx < 0) {\n          targetDirection = isToAbove ? Directions.BOTTOM : Directions.RIGHT;\n        }\n      }\n    } else {\n      var isToLeft = from.point.x > to.point.x;\n      var dy = to.point.y - from.point.y;\n      if (accessDirection === Directions.RIGHT) {\n        sourceDirection = isToLeft ? OPPOSITE_DIRECTIONS[accessDirection] : dy >= 0 ? Directions.BOTTOM : Directions.TOP;\n        if (dy > 0) {\n          targetDirection = isToLeft ? Directions.TOP : Directions.LEFT;\n        } else if (dy < 0) {\n          targetDirection = isToLeft ? Directions.BOTTOM : Directions.LEFT;\n        }\n      } else {\n        sourceDirection = isToLeft ? dy >= 0 ? Directions.BOTTOM : Directions.TOP : OPPOSITE_DIRECTIONS[accessDirection];\n        if (dy > 0) {\n          targetDirection = isToLeft ? Directions.RIGHT : Directions.TOP;\n        } else if (dy < 0) {\n          targetDirection = isToLeft ? Directions.RIGHT : Directions.BOTTOM;\n        }\n      }\n    }\n    return [sourceDirection, targetDirection];\n  }\n  rightAngleRouter.Directions = Directions;\n  var rightAngle = rightAngleRouter;\n  var routers = {\n    normal: normal,\n    oneSide: oneSide,\n    orthogonal: orthogonal,\n    manhattan: manhattan,\n    metro: metro,\n    rightAngle: rightAngle\n  };\n  var CornerTypes = {\n    POINT: 'point',\n    CUBIC: 'cubic',\n    LINE: 'line',\n    GAP: 'gap'\n  };\n  var DEFINED_CORNER_TYPES = Object.values(CornerTypes);\n  var CORNER_RADIUS = 10;\n  var PRECISION = 1;\n  var straight = function (sourcePoint, targetPoint, routePoints, opt) {\n    if (routePoints === void 0) routePoints = [];\n    if (opt === void 0) opt = {};\n    var cornerType = opt.cornerType;\n    if (cornerType === void 0) cornerType = CornerTypes.POINT;\n    var cornerRadius = opt.cornerRadius;\n    if (cornerRadius === void 0) cornerRadius = CORNER_RADIUS;\n    var cornerPreserveAspectRatio = opt.cornerPreserveAspectRatio;\n    if (cornerPreserveAspectRatio === void 0) cornerPreserveAspectRatio = false;\n    var precision = opt.precision;\n    if (precision === void 0) precision = PRECISION;\n    var raw = opt.raw;\n    if (raw === void 0) raw = false;\n    if (DEFINED_CORNER_TYPES.indexOf(cornerType) === -1) {\n      // unknown `cornerType` provided => error\n      throw new Error('Invalid `cornerType` provided to `straight` connector.');\n    }\n    var path;\n    if (cornerType === CornerTypes.POINT || !cornerRadius) {\n      // default option => normal connector\n      // simply connect all points with straight lines\n      var points = [sourcePoint].concat(routePoints).concat([targetPoint]);\n      var polyline = new Polyline(points);\n      path = new Path(polyline);\n    } else {\n      // `cornerType` is not unknown and not 'point' (default) => must be one of other valid types\n      path = new Path();\n\n      // add initial gap segment = to source point\n      path.appendSegment(Path.createSegment('M', sourcePoint));\n      var nextDistance;\n      var routePointsLength = routePoints.length;\n      for (var i = 0; i < routePointsLength; i++) {\n        var curr = new Point(routePoints[i]);\n        var prev = routePoints[i - 1] || sourcePoint;\n        var next = routePoints[i + 1] || targetPoint;\n        var prevDistance = nextDistance || curr.distance(prev) / 2; // try to re-use previously-computed `nextDistance`\n        nextDistance = curr.distance(next) / 2;\n        var startMove = void 0,\n          endMove = void 0;\n        if (!cornerPreserveAspectRatio) {\n          // `startMove` and `endMove` may be different\n          // (this happens when next or previous path point is closer than `2 * cornerRadius`)\n          startMove = -Math.min(cornerRadius, prevDistance);\n          endMove = -Math.min(cornerRadius, nextDistance);\n        } else {\n          // force `startMove` and `endMove` to be the same\n          startMove = endMove = -Math.min(cornerRadius, prevDistance, nextDistance);\n        }\n\n        // to find `cornerStart` and `cornerEnd`, the logic is as follows (using `cornerStart` as example):\n        // - find a point lying on the line `prev - startMove` such that...\n        // - ...the point lies `abs(startMove)` distance away from `curr`...\n        // - ...and its coordinates are rounded to whole numbers\n        var cornerStart = curr.clone().move(prev, startMove).round(precision);\n        var cornerEnd = curr.clone().move(next, endMove).round(precision);\n\n        // add in-between straight segment = from previous route point to corner start point\n        // (may have zero length)\n        path.appendSegment(Path.createSegment('L', cornerStart));\n\n        // add corner segment = from corner start point to corner end point\n        switch (cornerType) {\n          case CornerTypes.CUBIC:\n            {\n              // corner is rounded\n              var _13 = 1 / 3;\n              var _23 = 2 / 3;\n              var control1 = new Point(_13 * cornerStart.x + _23 * curr.x, _23 * curr.y + _13 * cornerStart.y);\n              var control2 = new Point(_13 * cornerEnd.x + _23 * curr.x, _23 * curr.y + _13 * cornerEnd.y);\n              path.appendSegment(Path.createSegment('C', control1, control2, cornerEnd));\n              break;\n            }\n          case CornerTypes.LINE:\n            {\n              // corner has bevel\n              path.appendSegment(Path.createSegment('L', cornerEnd));\n              break;\n            }\n          case CornerTypes.GAP:\n            {\n              // corner has empty space\n              path.appendSegment(Path.createSegment('M', cornerEnd));\n              break;\n            }\n          // default: no segment is created\n        }\n      }\n\n      // add final straight segment = from last corner end point to target point\n      // (= or from start point to end point, if there are no route points)\n      // (may have zero length)\n      path.appendSegment(Path.createSegment('L', targetPoint));\n    }\n    return raw ? path : path.serialize();\n  };\n\n  // default size of jump if not specified in options\n  var JUMP_SIZE = 5;\n\n  // available jump types\n  // first one taken as default\n  var JUMP_TYPES = ['arc', 'gap', 'cubic'];\n\n  // default radius\n  var RADIUS = 0;\n\n  // takes care of math. error for case when jump is too close to end of line\n  var CLOSE_PROXIMITY_PADDING = 1;\n\n  // list of connector types not to jump over.\n  var IGNORED_CONNECTORS = ['smooth'];\n\n  // internal constants for round segment\n  var _13 = 1 / 3;\n  var _23 = 2 / 3;\n  function sortPointsAscending(p1, p2) {\n    var x1 = p1.x;\n    var y1 = p1.y;\n    var x2 = p2.x;\n    var y2 = p2.y;\n    if (x1 > x2) {\n      var swap = x1;\n      x1 = x2;\n      x2 = swap;\n      swap = y1;\n      y1 = y2;\n      y2 = swap;\n    }\n    if (y1 > y2) {\n      var swap$1 = x1;\n      x1 = x2;\n      x2 = swap$1;\n      swap$1 = y1;\n      y1 = y2;\n      y2 = swap$1;\n    }\n    return [new Point(x1, y1), new Point(x2, y2)];\n  }\n  function overlapExists(line1, line2) {\n    var ref = sortPointsAscending(line1.start, line1.end);\n    var ref_0 = ref[0];\n    var x1 = ref_0.x;\n    var y1 = ref_0.y;\n    var ref_1 = ref[1];\n    var x2 = ref_1.x;\n    var y2 = ref_1.y;\n    var ref$1 = sortPointsAscending(line2.start, line2.end);\n    var ref$1_0 = ref$1[0];\n    var x3 = ref$1_0.x;\n    var y3 = ref$1_0.y;\n    var ref$1_1 = ref$1[1];\n    var x4 = ref$1_1.x;\n    var y4 = ref$1_1.y;\n    var xMatch = x1 <= x4 && x3 <= x2;\n    var yMatch = y1 <= y4 && y3 <= y2;\n    return xMatch && yMatch;\n  }\n\n  /**\n   * Transform start/end and route into series of lines\n   * @param {g.point} sourcePoint start point\n   * @param {g.point} targetPoint end point\n   * @param {g.point[]} route optional list of route\n   * @return {g.line[]} [description]\n   */\n  function createLines(sourcePoint, targetPoint, route) {\n    // make a flattened array of all points\n    var points = [].concat(sourcePoint, route, targetPoint);\n    return points.reduce(function (resultLines, point, idx) {\n      // if there is a next point, make a line with it\n      var nextPoint = points[idx + 1];\n      if (nextPoint != null) {\n        resultLines[idx] = line(point, nextPoint);\n      }\n      return resultLines;\n    }, []);\n  }\n  function setupUpdating(jumpOverLinkView) {\n    var paper = jumpOverLinkView.paper;\n    var updateList = paper._jumpOverUpdateList;\n\n    // first time setup for this paper\n    if (updateList == null) {\n      updateList = paper._jumpOverUpdateList = [];\n      var graph = paper.model;\n      graph.on('batch:stop', function () {\n        if (this.hasActiveBatch()) {\n          return;\n        }\n        updateJumpOver(paper);\n      });\n      graph.on('reset', function () {\n        updateList = paper._jumpOverUpdateList = [];\n      });\n    }\n\n    // add this link to a list so it can be updated when some other link is updated\n    if (updateList.indexOf(jumpOverLinkView) < 0) {\n      updateList.push(jumpOverLinkView);\n\n      // watch for change of connector type or removal of link itself\n      // to remove the link from a list of jump over connectors\n      jumpOverLinkView.listenToOnce(jumpOverLinkView.model, 'change:connector remove', function () {\n        updateList.splice(updateList.indexOf(jumpOverLinkView), 1);\n      });\n    }\n  }\n\n  /**\n   * Handler for a batch:stop event to force\n   * update of all registered links with jump over connector\n   * @param {object} batchEvent optional object with info about batch\n   */\n  function updateJumpOver(paper) {\n    var updateList = paper._jumpOverUpdateList;\n    for (var i = 0; i < updateList.length; i++) {\n      var linkView = updateList[i];\n      var updateFlag = linkView.getFlag(linkView.constructor.Flags.CONNECTOR);\n      linkView.requestUpdate(updateFlag);\n    }\n  }\n\n  /**\n   * Utility function to collect all intersection points of a single\n   * line against group of other lines.\n   * @param {g.line} line where to find points\n   * @param {g.line[]} crossCheckLines lines to cross\n   * @return {g.point[]} list of intersection points\n   */\n  function findLineIntersections(line, crossCheckLines) {\n    return toArray(crossCheckLines).reduce(function (res, crossCheckLine) {\n      var intersection = line.intersection(crossCheckLine);\n      if (intersection) {\n        res.push(intersection);\n      }\n      return res;\n    }, []);\n  }\n\n  /**\n   * Sorting function for list of points by their distance.\n   * @param {g.point} p1 first point\n   * @param {g.point} p2 second point\n   * @return {number} squared distance between points\n   */\n  function sortPoints(p1, p2) {\n    return line(p1, p2).squaredLength();\n  }\n\n  /**\n   * Split input line into multiple based on intersection points.\n   * @param {g.line} line input line to split\n   * @param {g.point[]} intersections points where to split the line\n   * @param {number} jumpSize the size of jump arc (length empty spot on a line)\n   * @return {g.line[]} list of lines being split\n   */\n  function createJumps(line$1, intersections, jumpSize) {\n    return intersections.reduce(function (resultLines, point$1, idx) {\n      // skipping points that were merged with the previous line\n      // to make bigger arc over multiple lines that are close to each other\n      if (point$1.skip === true) {\n        return resultLines;\n      }\n\n      // always grab the last line from buffer and modify it\n      var lastLine = resultLines.pop() || line$1;\n\n      // calculate start and end of jump by moving by a given size of jump\n      var jumpStart = point(point$1).move(lastLine.start, -jumpSize);\n      var jumpEnd = point(point$1).move(lastLine.start, +jumpSize);\n\n      // now try to look at the next intersection point\n      var nextPoint = intersections[idx + 1];\n      if (nextPoint != null) {\n        var distance = jumpEnd.distance(nextPoint);\n        if (distance <= jumpSize) {\n          // next point is close enough, move the jump end by this\n          // difference and mark the next point to be skipped\n          jumpEnd = nextPoint.move(lastLine.start, distance);\n          nextPoint.skip = true;\n        }\n      } else {\n        // this block is inside of `else` as an optimization so the distance is\n        // not calculated when we know there are no other intersection points\n        var endDistance = jumpStart.distance(lastLine.end);\n        // if the end is too close to possible jump, draw remaining line instead of a jump\n        if (endDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n          resultLines.push(lastLine);\n          return resultLines;\n        }\n      }\n      var startDistance = jumpEnd.distance(lastLine.start);\n      if (startDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n        // if the start of line is too close to jump, draw that line instead of a jump\n        resultLines.push(lastLine);\n        return resultLines;\n      }\n\n      // finally create a jump line\n      var jumpLine = line(jumpStart, jumpEnd);\n      // it's just simple line but with a `isJump` property\n      jumpLine.isJump = true;\n      resultLines.push(line(lastLine.start, jumpStart), jumpLine, line(jumpEnd, lastLine.end));\n      return resultLines;\n    }, []);\n  }\n\n  /**\n   * Assemble `D` attribute of a SVG path by iterating given lines.\n   * @param {g.line[]} lines source lines to use\n   * @param {number} jumpSize the size of jump arc (length empty spot on a line)\n   * @param {number} radius the radius\n   * @return {string}\n   */\n  function buildPath(lines, jumpSize, jumpType, radius) {\n    var path = new Path();\n    var segment;\n\n    // first move to the start of a first line\n    segment = Path.createSegment('M', lines[0].start);\n    path.appendSegment(segment);\n\n    // make a paths from lines\n    toArray(lines).forEach(function (line, index) {\n      if (line.isJump) {\n        var angle, diff;\n        var control1, control2;\n        if (jumpType === 'arc') {\n          // approximates semicircle with 2 curves\n          angle = -90;\n          // determine rotation of arc based on difference between points\n          diff = line.start.difference(line.end);\n          // make sure the arc always points up (or right)\n          var xAxisRotate = Number(diff.x < 0 || diff.x === 0 && diff.y < 0);\n          if (xAxisRotate) {\n            angle += 180;\n          }\n          var midpoint = line.midpoint();\n          var centerLine = new Line(midpoint, line.end).rotate(midpoint, angle);\n          var halfLine;\n\n          // first half\n          halfLine = new Line(line.start, midpoint);\n          control1 = halfLine.pointAt(2 / 3).rotate(line.start, angle);\n          control2 = centerLine.pointAt(1 / 3).rotate(centerLine.end, -angle);\n          segment = Path.createSegment('C', control1, control2, centerLine.end);\n          path.appendSegment(segment);\n\n          // second half\n          halfLine = new Line(midpoint, line.end);\n          control1 = centerLine.pointAt(1 / 3).rotate(centerLine.end, angle);\n          control2 = halfLine.pointAt(1 / 3).rotate(line.end, -angle);\n          segment = Path.createSegment('C', control1, control2, line.end);\n          path.appendSegment(segment);\n        } else if (jumpType === 'gap') {\n          segment = Path.createSegment('M', line.end);\n          path.appendSegment(segment);\n        } else if (jumpType === 'cubic') {\n          // approximates semicircle with 1 curve\n          angle = line.start.theta(line.end);\n          var xOffset = jumpSize * 0.6;\n          var yOffset = jumpSize * 1.35;\n\n          // determine rotation of arc based on difference between points\n          diff = line.start.difference(line.end);\n          // make sure the arc always points up (or right)\n          xAxisRotate = Number(diff.x < 0 || diff.x === 0 && diff.y < 0);\n          if (xAxisRotate) {\n            yOffset *= -1;\n          }\n          control1 = Point(line.start.x + xOffset, line.start.y + yOffset).rotate(line.start, angle);\n          control2 = Point(line.end.x - xOffset, line.end.y + yOffset).rotate(line.end, angle);\n          segment = Path.createSegment('C', control1, control2, line.end);\n          path.appendSegment(segment);\n        }\n      } else {\n        var nextLine = lines[index + 1];\n        if (radius == 0 || !nextLine || nextLine.isJump) {\n          segment = Path.createSegment('L', line.end);\n          path.appendSegment(segment);\n        } else {\n          buildRoundedSegment(radius, path, line.end, line.start, nextLine.end);\n        }\n      }\n    });\n    return path;\n  }\n  function buildRoundedSegment(offset, path, curr, prev, next) {\n    var prevDistance = curr.distance(prev) / 2;\n    var nextDistance = curr.distance(next) / 2;\n    var startMove = -Math.min(offset, prevDistance);\n    var endMove = -Math.min(offset, nextDistance);\n    var roundedStart = curr.clone().move(prev, startMove).round();\n    var roundedEnd = curr.clone().move(next, endMove).round();\n    var control1 = new Point(_13 * roundedStart.x + _23 * curr.x, _23 * curr.y + _13 * roundedStart.y);\n    var control2 = new Point(_13 * roundedEnd.x + _23 * curr.x, _23 * curr.y + _13 * roundedEnd.y);\n    var segment;\n    segment = Path.createSegment('L', roundedStart);\n    path.appendSegment(segment);\n    segment = Path.createSegment('C', control1, control2, roundedEnd);\n    path.appendSegment(segment);\n  }\n\n  /**\n   * Actual connector function that will be run on every update.\n   * @param {g.point} sourcePoint start point of this link\n   * @param {g.point} targetPoint end point of this link\n   * @param {g.point[]} route of this link\n   * @param {object} opt options\n   * @property {number} size optional size of a jump arc\n   * @return {string} created `D` attribute of SVG path\n   */\n  var jumpover = function (sourcePoint, targetPoint, route, opt) {\n    // eslint-disable-line max-params\n\n    setupUpdating(this);\n    var raw = opt.raw;\n    var jumpSize = opt.size || JUMP_SIZE;\n    var jumpType = opt.jump && ('' + opt.jump).toLowerCase();\n    var radius = opt.radius || RADIUS;\n    var ignoreConnectors = opt.ignoreConnectors || IGNORED_CONNECTORS;\n\n    // grab the first jump type as a default if specified one is invalid\n    if (JUMP_TYPES.indexOf(jumpType) === -1) {\n      jumpType = JUMP_TYPES[0];\n    }\n    var paper = this.paper;\n    var graph = paper.model;\n    var allLinks = graph.getLinks();\n\n    // there is just one link, draw it directly\n    if (allLinks.length === 1) {\n      return buildPath(createLines(sourcePoint, targetPoint, route), jumpSize, jumpType, radius);\n    }\n    var thisModel = this.model;\n    var thisIndex = allLinks.indexOf(thisModel);\n    var defaultConnector = paper.options.defaultConnector || {};\n\n    // not all links are meant to be jumped over.\n    var links = allLinks.filter(function (link, idx) {\n      var connector = link.get('connector') || defaultConnector;\n\n      // avoid jumping over links with connector type listed in `ignored connectors`.\n      if (toArray(ignoreConnectors).includes(connector.name)) {\n        return false;\n      }\n      // filter out links that are above this one and  have the same connector type\n      // otherwise there would double hoops for each intersection\n      if (idx > thisIndex) {\n        return connector.name !== 'jumpover';\n      }\n      return true;\n    });\n\n    // find views for all links\n    var linkViews = links.map(function (link) {\n      return paper.findViewByModel(link);\n    });\n\n    // create lines for this link\n    var thisLines = createLines(sourcePoint, targetPoint, route);\n\n    // create lines for all other links\n    var linkLines = linkViews.map(function (linkView) {\n      if (linkView == null) {\n        return [];\n      }\n      if (linkView === this) {\n        return thisLines;\n      }\n      return createLines(linkView.sourcePoint, linkView.targetPoint, linkView.route);\n    }, this);\n\n    // transform lines for this link by splitting with jump lines at\n    // points of intersection with other links\n    var jumpingLines = thisLines.reduce(function (resultLines, thisLine) {\n      // iterate all links and grab the intersections with this line\n      // these are then sorted by distance so the line can be split more easily\n      var intersections = links.reduce(function (res, link, i) {\n        // don't intersection with itself\n        if (link !== thisModel) {\n          var linkLinesToTest = linkLines[i].slice();\n          var overlapIndex = linkLinesToTest.findIndex(function (line) {\n            return overlapExists(thisLine, line);\n          });\n\n          // Overlap occurs and the end point of one segment lies on thisLine\n          if (overlapIndex > -1 && thisLine.containsPoint(linkLinesToTest[overlapIndex].end)) {\n            // Remove the next segment because there will never be a jump\n            linkLinesToTest.splice(overlapIndex + 1, 1);\n          }\n          var lineIntersections = findLineIntersections(thisLine, linkLinesToTest);\n          res.push.apply(res, lineIntersections);\n        }\n        return res;\n      }, []).sort(function (a, b) {\n        return sortPoints(thisLine.start, a) - sortPoints(thisLine.start, b);\n      });\n      if (intersections.length > 0) {\n        // split the line based on found intersection points\n        resultLines.push.apply(resultLines, createJumps(thisLine, intersections, jumpSize));\n      } else {\n        // without any intersection the line goes uninterrupted\n        resultLines.push(thisLine);\n      }\n      return resultLines;\n    }, []);\n    var path = buildPath(jumpingLines, jumpSize, jumpType, radius);\n    return raw ? path : path.serialize();\n  };\n  var normal$1 = function (sourcePoint, targetPoint, route, opt) {\n    if (route === void 0) route = [];\n    if (opt === void 0) opt = {};\n    var raw = opt.raw;\n    var localOpt = {\n      cornerType: 'point',\n      raw: raw\n    };\n    return straight(sourcePoint, targetPoint, route, localOpt);\n  };\n  var CORNER_RADIUS$1 = 10;\n  var PRECISION$1 = 0;\n  var rounded = function (sourcePoint, targetPoint, route, opt) {\n    if (route === void 0) route = [];\n    if (opt === void 0) opt = {};\n    var radius = opt.radius;\n    if (radius === void 0) radius = CORNER_RADIUS$1;\n    var raw = opt.raw;\n    var localOpt = {\n      cornerType: 'cubic',\n      cornerRadius: radius,\n      precision: PRECISION$1,\n      raw: raw\n    };\n    return straight(sourcePoint, targetPoint, route, localOpt);\n  };\n  var smooth = function (sourcePoint, targetPoint, route, opt) {\n    var raw = opt && opt.raw;\n    var path;\n    if (route && route.length !== 0) {\n      var points = [sourcePoint].concat(route).concat([targetPoint]);\n      var curves = Curve.throughPoints(points);\n      path = new Path(curves);\n    } else {\n      // if we have no route, use a default cubic bezier curve\n      // cubic bezier requires two control points\n      // the control points have `x` midway between source and target\n      // this produces an S-like curve\n\n      path = new Path();\n      var segment;\n      segment = Path.createSegment('M', sourcePoint);\n      path.appendSegment(segment);\n      if (Math.abs(sourcePoint.x - targetPoint.x) >= Math.abs(sourcePoint.y - targetPoint.y)) {\n        var controlPointX = (sourcePoint.x + targetPoint.x) / 2;\n        segment = Path.createSegment('C', controlPointX, sourcePoint.y, controlPointX, targetPoint.y, targetPoint.x, targetPoint.y);\n        path.appendSegment(segment);\n      } else {\n        var controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n        segment = Path.createSegment('C', sourcePoint.x, controlPointY, targetPoint.x, controlPointY, targetPoint.x, targetPoint.y);\n        path.appendSegment(segment);\n      }\n    }\n    return raw ? path : path.serialize();\n  };\n  var Directions$1 = {\n    AUTO: 'auto',\n    HORIZONTAL: 'horizontal',\n    VERTICAL: 'vertical',\n    CLOSEST_POINT: 'closest-point',\n    OUTWARDS: 'outwards'\n  };\n  var TangentDirections = {\n    UP: 'up',\n    DOWN: 'down',\n    LEFT: 'left',\n    RIGHT: 'right',\n    AUTO: 'auto',\n    CLOSEST_POINT: 'closest-point',\n    OUTWARDS: 'outwards'\n  };\n  var curve = function (sourcePoint, targetPoint, route, opt, linkView) {\n    if (route === void 0) route = [];\n    if (opt === void 0) opt = {};\n    var raw = Boolean(opt.raw);\n    // distanceCoefficient - a coefficient of the tangent vector length relative to the distance between points.\n    // angleTangentCoefficient - a coefficient of the end tangents length in the case of angles larger than 45 degrees.\n    // tension - a Catmull-Rom curve tension parameter.\n    // sourceTangent - a tangent vector along the curve at the sourcePoint.\n    // sourceDirection - a unit direction vector along the curve at the sourcePoint.\n    // targetTangent - a tangent vector along the curve at the targetPoint.\n    // targetDirection - a unit direction vector along the curve at the targetPoint.\n    // precision - a rounding precision for path values.\n    var direction = opt.direction;\n    if (direction === void 0) direction = Directions$1.AUTO;\n    var precision = opt.precision;\n    if (precision === void 0) precision = 3;\n    var options = {\n      coeff: opt.distanceCoefficient || 0.6,\n      angleTangentCoefficient: opt.angleTangentCoefficient || 80,\n      tau: opt.tension || 0.5,\n      sourceTangent: opt.sourceTangent ? new Point(opt.sourceTangent) : null,\n      targetTangent: opt.targetTangent ? new Point(opt.targetTangent) : null,\n      rotate: Boolean(opt.rotate)\n    };\n    if (typeof opt.sourceDirection === 'string') {\n      options.sourceDirection = opt.sourceDirection;\n    } else if (typeof opt.sourceDirection === 'number') {\n      options.sourceDirection = new Point(1, 0).rotate(null, opt.sourceDirection);\n    } else {\n      options.sourceDirection = opt.sourceDirection ? new Point(opt.sourceDirection).normalize() : null;\n    }\n    if (typeof opt.targetDirection === 'string') {\n      options.targetDirection = opt.targetDirection;\n    } else if (typeof opt.targetDirection === 'number') {\n      options.targetDirection = new Point(1, 0).rotate(null, opt.targetDirection);\n    } else {\n      options.targetDirection = opt.targetDirection ? new Point(opt.targetDirection).normalize() : null;\n    }\n    var completeRoute = [sourcePoint].concat(route, [targetPoint]).map(function (p) {\n      return new Point(p);\n    });\n\n    // The calculation of a sourceTangent\n    var sourceTangent;\n    if (options.sourceTangent) {\n      sourceTangent = options.sourceTangent;\n    } else {\n      var sourceDirection = getSourceTangentDirection(linkView, completeRoute, direction, options);\n      var tangentLength = completeRoute[0].distance(completeRoute[1]) * options.coeff;\n      var pointsVector = completeRoute[1].difference(completeRoute[0]).normalize();\n      var angle = angleBetweenVectors(sourceDirection, pointsVector);\n      if (angle > Math.PI / 4) {\n        var updatedLength = tangentLength + (angle - Math.PI / 4) * options.angleTangentCoefficient;\n        sourceTangent = sourceDirection.clone().scale(updatedLength, updatedLength);\n      } else {\n        sourceTangent = sourceDirection.clone().scale(tangentLength, tangentLength);\n      }\n    }\n\n    // The calculation of a targetTangent\n    var targetTangent;\n    if (options.targetTangent) {\n      targetTangent = options.targetTangent;\n    } else {\n      var targetDirection = getTargetTangentDirection(linkView, completeRoute, direction, options);\n      var last = completeRoute.length - 1;\n      var tangentLength$1 = completeRoute[last - 1].distance(completeRoute[last]) * options.coeff;\n      var pointsVector$1 = completeRoute[last - 1].difference(completeRoute[last]).normalize();\n      var angle$1 = angleBetweenVectors(targetDirection, pointsVector$1);\n      if (angle$1 > Math.PI / 4) {\n        var updatedLength$1 = tangentLength$1 + (angle$1 - Math.PI / 4) * options.angleTangentCoefficient;\n        targetTangent = targetDirection.clone().scale(updatedLength$1, updatedLength$1);\n      } else {\n        targetTangent = targetDirection.clone().scale(tangentLength$1, tangentLength$1);\n      }\n    }\n    var catmullRomCurves = createCatmullRomCurves(completeRoute, sourceTangent, targetTangent, options);\n    var bezierCurves = catmullRomCurves.map(function (curve) {\n      return catmullRomToBezier(curve, options);\n    });\n    var path = new Path(bezierCurves).round(precision);\n    return raw ? path : path.serialize();\n  };\n  curve.Directions = Directions$1;\n  curve.TangentDirections = TangentDirections;\n  function getHorizontalSourceDirection(linkView, route, options) {\n    var sourceBBox = linkView.sourceBBox;\n    var sourceSide;\n    var rotation;\n    if (!linkView.sourceView) {\n      if (sourceBBox.x > route[1].x) {\n        sourceSide = 'right';\n      } else {\n        sourceSide = 'left';\n      }\n    } else {\n      rotation = linkView.sourceView.model.angle();\n      if (options.rotate && rotation) {\n        var unrotatedBBox = linkView.sourceView.getNodeUnrotatedBBox(linkView.sourceView.el);\n        var sourcePoint = route[0].clone();\n        sourcePoint.rotate(sourceBBox.center(), rotation);\n        sourceSide = unrotatedBBox.sideNearestToPoint(sourcePoint);\n      } else {\n        sourceSide = sourceBBox.sideNearestToPoint(route[0]);\n      }\n    }\n    var direction;\n    switch (sourceSide) {\n      case 'left':\n        direction = new Point(-1, 0);\n        break;\n      case 'right':\n      default:\n        direction = new Point(1, 0);\n        break;\n    }\n    if (options.rotate && rotation) {\n      direction.rotate(null, -rotation);\n    }\n    return direction;\n  }\n  function getHorizontalTargetDirection(linkView, route, options) {\n    var targetBBox = linkView.targetBBox;\n    var targetSide;\n    var rotation;\n    if (!linkView.targetView) {\n      if (targetBBox.x > route[route.length - 2].x) {\n        targetSide = 'left';\n      } else {\n        targetSide = 'right';\n      }\n    } else {\n      rotation = linkView.targetView.model.angle();\n      if (options.rotate && rotation) {\n        var unrotatedBBox = linkView.targetView.getNodeUnrotatedBBox(linkView.targetView.el);\n        var targetPoint = route[route.length - 1].clone();\n        targetPoint.rotate(targetBBox.center(), rotation);\n        targetSide = unrotatedBBox.sideNearestToPoint(targetPoint);\n      } else {\n        targetSide = targetBBox.sideNearestToPoint(route[route.length - 1]);\n      }\n    }\n    var direction;\n    switch (targetSide) {\n      case 'left':\n        direction = new Point(-1, 0);\n        break;\n      case 'right':\n      default:\n        direction = new Point(1, 0);\n        break;\n    }\n    if (options.rotate && rotation) {\n      direction.rotate(null, -rotation);\n    }\n    return direction;\n  }\n  function getVerticalSourceDirection(linkView, route, options) {\n    var sourceBBox = linkView.sourceBBox;\n    var sourceSide;\n    var rotation;\n    if (!linkView.sourceView) {\n      if (sourceBBox.y > route[1].y) {\n        sourceSide = 'bottom';\n      } else {\n        sourceSide = 'top';\n      }\n    } else {\n      rotation = linkView.sourceView.model.angle();\n      if (options.rotate && rotation) {\n        var unrotatedBBox = linkView.sourceView.getNodeUnrotatedBBox(linkView.sourceView.el);\n        var sourcePoint = route[0].clone();\n        sourcePoint.rotate(sourceBBox.center(), rotation);\n        sourceSide = unrotatedBBox.sideNearestToPoint(sourcePoint);\n      } else {\n        sourceSide = sourceBBox.sideNearestToPoint(route[0]);\n      }\n    }\n    var direction;\n    switch (sourceSide) {\n      case 'top':\n        direction = new Point(0, -1);\n        break;\n      case 'bottom':\n      default:\n        direction = new Point(0, 1);\n        break;\n    }\n    if (options.rotate && rotation) {\n      direction.rotate(null, -rotation);\n    }\n    return direction;\n  }\n  function getVerticalTargetDirection(linkView, route, options) {\n    var targetBBox = linkView.targetBBox;\n    var targetSide;\n    var rotation;\n    if (!linkView.targetView) {\n      if (targetBBox.y > route[route.length - 2].y) {\n        targetSide = 'top';\n      } else {\n        targetSide = 'bottom';\n      }\n    } else {\n      rotation = linkView.targetView.model.angle();\n      if (options.rotate && rotation) {\n        var unrotatedBBox = linkView.targetView.getNodeUnrotatedBBox(linkView.targetView.el);\n        var targetPoint = route[route.length - 1].clone();\n        targetPoint.rotate(targetBBox.center(), rotation);\n        targetSide = unrotatedBBox.sideNearestToPoint(targetPoint);\n      } else {\n        targetSide = targetBBox.sideNearestToPoint(route[route.length - 1]);\n      }\n    }\n    var direction;\n    switch (targetSide) {\n      case 'top':\n        direction = new Point(0, -1);\n        break;\n      case 'bottom':\n      default:\n        direction = new Point(0, 1);\n        break;\n    }\n    if (options.rotate && rotation) {\n      direction.rotate(null, -rotation);\n    }\n    return direction;\n  }\n  function getAutoSourceDirection(linkView, route, options) {\n    var sourceBBox = linkView.sourceBBox;\n    var sourceSide;\n    var rotation;\n    if (!linkView.sourceView) {\n      sourceSide = sourceBBox.sideNearestToPoint(route[1]);\n    } else {\n      rotation = linkView.sourceView.model.angle();\n      if (options.rotate && rotation) {\n        var unrotatedBBox = linkView.sourceView.getNodeUnrotatedBBox(linkView.sourceView.el);\n        var sourcePoint = route[0].clone();\n        sourcePoint.rotate(sourceBBox.center(), rotation);\n        sourceSide = unrotatedBBox.sideNearestToPoint(sourcePoint);\n      } else {\n        sourceSide = sourceBBox.sideNearestToPoint(route[0]);\n      }\n    }\n    var direction;\n    switch (sourceSide) {\n      case 'top':\n        direction = new Point(0, -1);\n        break;\n      case 'bottom':\n        direction = new Point(0, 1);\n        break;\n      case 'right':\n        direction = new Point(1, 0);\n        break;\n      case 'left':\n        direction = new Point(-1, 0);\n        break;\n    }\n    if (options.rotate && rotation) {\n      direction.rotate(null, -rotation);\n    }\n    return direction;\n  }\n  function getAutoTargetDirection(linkView, route, options) {\n    var targetBBox = linkView.targetBBox;\n    var targetSide;\n    var rotation;\n    if (!linkView.targetView) {\n      targetSide = targetBBox.sideNearestToPoint(route[route.length - 2]);\n    } else {\n      rotation = linkView.targetView.model.angle();\n      if (options.rotate && rotation) {\n        var unrotatedBBox = linkView.targetView.getNodeUnrotatedBBox(linkView.targetView.el);\n        var targetPoint = route[route.length - 1].clone();\n        targetPoint.rotate(targetBBox.center(), rotation);\n        targetSide = unrotatedBBox.sideNearestToPoint(targetPoint);\n      } else {\n        targetSide = targetBBox.sideNearestToPoint(route[route.length - 1]);\n      }\n    }\n    var direction;\n    switch (targetSide) {\n      case 'top':\n        direction = new Point(0, -1);\n        break;\n      case 'bottom':\n        direction = new Point(0, 1);\n        break;\n      case 'right':\n        direction = new Point(1, 0);\n        break;\n      case 'left':\n        direction = new Point(-1, 0);\n        break;\n    }\n    if (options.rotate && rotation) {\n      direction.rotate(null, -rotation);\n    }\n    return direction;\n  }\n  function getClosestPointSourceDirection(linkView, route, options) {\n    return route[1].difference(route[0]).normalize();\n  }\n  function getClosestPointTargetDirection(linkView, route, options) {\n    var last = route.length - 1;\n    return route[last - 1].difference(route[last]).normalize();\n  }\n  function getOutwardsSourceDirection(linkView, route, options) {\n    var sourceBBox = linkView.sourceBBox;\n    var sourceCenter = sourceBBox.center();\n    return route[0].difference(sourceCenter).normalize();\n  }\n  function getOutwardsTargetDirection(linkView, route, options) {\n    var targetBBox = linkView.targetBBox;\n    var targetCenter = targetBBox.center();\n    return route[route.length - 1].difference(targetCenter).normalize();\n  }\n  function getSourceTangentDirection(linkView, route, direction, options) {\n    if (options.sourceDirection) {\n      switch (options.sourceDirection) {\n        case TangentDirections.UP:\n          return new Point(0, -1);\n        case TangentDirections.DOWN:\n          return new Point(0, 1);\n        case TangentDirections.LEFT:\n          return new Point(-1, 0);\n        case TangentDirections.RIGHT:\n          return new Point(1, 0);\n        case TangentDirections.AUTO:\n          return getAutoSourceDirection(linkView, route, options);\n        case TangentDirections.CLOSEST_POINT:\n          return getClosestPointSourceDirection(linkView, route, options);\n        case TangentDirections.OUTWARDS:\n          return getOutwardsSourceDirection(linkView, route, options);\n        default:\n          return options.sourceDirection;\n      }\n    }\n    switch (direction) {\n      case Directions$1.HORIZONTAL:\n        return getHorizontalSourceDirection(linkView, route, options);\n      case Directions$1.VERTICAL:\n        return getVerticalSourceDirection(linkView, route, options);\n      case Directions$1.CLOSEST_POINT:\n        return getClosestPointSourceDirection(linkView, route, options);\n      case Directions$1.OUTWARDS:\n        return getOutwardsSourceDirection(linkView, route, options);\n      case Directions$1.AUTO:\n      default:\n        return getAutoSourceDirection(linkView, route, options);\n    }\n  }\n  function getTargetTangentDirection(linkView, route, direction, options) {\n    if (options.targetDirection) {\n      switch (options.targetDirection) {\n        case TangentDirections.UP:\n          return new Point(0, -1);\n        case TangentDirections.DOWN:\n          return new Point(0, 1);\n        case TangentDirections.LEFT:\n          return new Point(-1, 0);\n        case TangentDirections.RIGHT:\n          return new Point(1, 0);\n        case TangentDirections.AUTO:\n          return getAutoTargetDirection(linkView, route, options);\n        case TangentDirections.CLOSEST_POINT:\n          return getClosestPointTargetDirection(linkView, route, options);\n        case TangentDirections.OUTWARDS:\n          return getOutwardsTargetDirection(linkView, route, options);\n        default:\n          return options.targetDirection;\n      }\n    }\n    switch (direction) {\n      case Directions$1.HORIZONTAL:\n        return getHorizontalTargetDirection(linkView, route, options);\n      case Directions$1.VERTICAL:\n        return getVerticalTargetDirection(linkView, route, options);\n      case Directions$1.CLOSEST_POINT:\n        return getClosestPointTargetDirection(linkView, route, options);\n      case Directions$1.OUTWARDS:\n        return getOutwardsTargetDirection(linkView, route, options);\n      case Directions$1.AUTO:\n      default:\n        return getAutoTargetDirection(linkView, route, options);\n    }\n  }\n  function rotateVector(vector, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var x = cos * vector.x - sin * vector.y;\n    var y = sin * vector.x + cos * vector.y;\n    vector.x = x;\n    vector.y = y;\n  }\n  function angleBetweenVectors(v1, v2) {\n    var cos = v1.dot(v2) / (v1.magnitude() * v2.magnitude());\n    if (cos < -1) {\n      cos = -1;\n    }\n    if (cos > 1) {\n      cos = 1;\n    }\n    return Math.acos(cos);\n  }\n  function determinant(v1, v2) {\n    return v1.x * v2.y - v1.y * v2.x;\n  }\n  function createCatmullRomCurves(points, sourceTangent, targetTangent, options) {\n    var tau = options.tau;\n    var coeff = options.coeff;\n    var distances = [];\n    var tangents = [];\n    var catmullRomCurves = [];\n    var n = points.length - 1;\n    for (var i = 0; i < n; i++) {\n      distances[i] = points[i].distance(points[i + 1]);\n    }\n    tangents[0] = sourceTangent;\n    tangents[n] = targetTangent;\n\n    // The calculation of tangents of vertices\n    for (var i$1 = 1; i$1 < n; i$1++) {\n      var tpPrev = void 0;\n      var tpNext = void 0;\n      if (i$1 === 1) {\n        tpPrev = points[i$1 - 1].clone().offset(tangents[i$1 - 1].x, tangents[i$1 - 1].y);\n      } else {\n        tpPrev = points[i$1 - 1].clone();\n      }\n      if (i$1 === n - 1) {\n        tpNext = points[i$1 + 1].clone().offset(tangents[i$1 + 1].x, tangents[i$1 + 1].y);\n      } else {\n        tpNext = points[i$1 + 1].clone();\n      }\n      var v1 = tpPrev.difference(points[i$1]).normalize();\n      var v2 = tpNext.difference(points[i$1]).normalize();\n      var vAngle = angleBetweenVectors(v1, v2);\n      var rot = (Math.PI - vAngle) / 2;\n      var t = void 0;\n      var vectorDeterminant = determinant(v1, v2);\n      var pointsDeterminant = void 0;\n      pointsDeterminant = determinant(points[i$1].difference(points[i$1 + 1]), points[i$1].difference(points[i$1 - 1]));\n      if (vectorDeterminant < 0) {\n        rot = -rot;\n      }\n      if (vAngle < Math.PI / 2 && (rot < 0 && pointsDeterminant < 0 || rot > 0 && pointsDeterminant > 0)) {\n        rot = rot - Math.PI;\n      }\n      t = v2.clone();\n      rotateVector(t, rot);\n      var t1 = t.clone();\n      var t2 = t.clone();\n      var scaleFactor1 = distances[i$1 - 1] * coeff;\n      var scaleFactor2 = distances[i$1] * coeff;\n      t1.scale(scaleFactor1, scaleFactor1);\n      t2.scale(scaleFactor2, scaleFactor2);\n      tangents[i$1] = [t1, t2];\n    }\n\n    // The building of a Catmull-Rom curve based of tangents of points\n    for (var i$2 = 0; i$2 < n; i$2++) {\n      var p0 = void 0;\n      var p3 = void 0;\n      if (i$2 === 0) {\n        p0 = points[i$2 + 1].difference(tangents[i$2].x / tau, tangents[i$2].y / tau);\n      } else {\n        p0 = points[i$2 + 1].difference(tangents[i$2][1].x / tau, tangents[i$2][1].y / tau);\n      }\n      if (i$2 === n - 1) {\n        p3 = points[i$2].clone().offset(tangents[i$2 + 1].x / tau, tangents[i$2 + 1].y / tau);\n      } else {\n        p3 = points[i$2].difference(tangents[i$2 + 1][0].x / tau, tangents[i$2 + 1][0].y / tau);\n      }\n      catmullRomCurves[i$2] = [p0, points[i$2], points[i$2 + 1], p3];\n    }\n    return catmullRomCurves;\n  }\n\n  // The function to convert Catmull-Rom curve to Bezier curve using the tension (tau)\n  function catmullRomToBezier(points, options) {\n    var tau = options.tau;\n    var bcp1 = new Point();\n    bcp1.x = points[1].x + (points[2].x - points[0].x) / (6 * tau);\n    bcp1.y = points[1].y + (points[2].y - points[0].y) / (6 * tau);\n    var bcp2 = new Point();\n    bcp2.x = points[2].x + (points[3].x - points[1].x) / (6 * tau);\n    bcp2.y = points[2].y + (points[3].y - points[1].y) / (6 * tau);\n    return new Curve(points[1], bcp1, bcp2, points[2]);\n  }\n  var connectors = {\n    straight: straight,\n    jumpover: jumpover,\n    normal: normal$1,\n    rounded: rounded,\n    smooth: smooth,\n    curve: curve\n  };\n  var Flags$2 = {\n    TOOLS: CellView.Flags.TOOLS,\n    RENDER: 'RENDER',\n    UPDATE: 'UPDATE',\n    LEGACY_TOOLS: 'LEGACY_TOOLS',\n    LABELS: 'LABELS',\n    VERTICES: 'VERTICES',\n    SOURCE: 'SOURCE',\n    TARGET: 'TARGET',\n    CONNECTOR: 'CONNECTOR'\n  };\n\n  // Link base view and controller.\n  // ----------------------------------------\n\n  var LinkView = CellView.extend({\n    className: function () {\n      var classNames = CellView.prototype.className.apply(this).split(' ');\n      classNames.push('link');\n      return classNames.join(' ');\n    },\n    options: {\n      shortLinkLength: 105,\n      doubleLinkTools: false,\n      longLinkLength: 155,\n      linkToolsOffset: 40,\n      doubleLinkToolsOffset: 65,\n      sampleInterval: 50\n    },\n    _labelCache: null,\n    _labelSelectors: null,\n    _markerCache: null,\n    _V: null,\n    _dragData: null,\n    // deprecated\n\n    metrics: null,\n    decimalsRounding: 2,\n    initialize: function () {\n      CellView.prototype.initialize.apply(this, arguments);\n\n      // `_.labelCache` is a mapping of indexes of labels in the `this.get('labels')` array to\n      // `<g class=\"label\">` nodes wrapped by Vectorizer. This allows for quick access to the\n      // nodes in `updateLabelPosition()` in order to update the label positions.\n      this._labelCache = {};\n\n      // a cache of label selectors\n      this._labelSelectors = {};\n\n      // keeps markers bboxes and positions again for quicker access\n      this._markerCache = {};\n\n      // cache of default markup nodes\n      this._V = {};\n\n      // connection path metrics\n      this.cleanNodesCache();\n    },\n    presentationAttributes: {\n      markup: [Flags$2.RENDER],\n      attrs: [Flags$2.UPDATE],\n      router: [Flags$2.UPDATE],\n      connector: [Flags$2.CONNECTOR],\n      smooth: [Flags$2.UPDATE],\n      manhattan: [Flags$2.UPDATE],\n      toolMarkup: [Flags$2.LEGACY_TOOLS],\n      labels: [Flags$2.LABELS],\n      labelMarkup: [Flags$2.LABELS],\n      vertices: [Flags$2.VERTICES, Flags$2.UPDATE],\n      vertexMarkup: [Flags$2.VERTICES],\n      source: [Flags$2.SOURCE, Flags$2.UPDATE],\n      target: [Flags$2.TARGET, Flags$2.UPDATE]\n    },\n    initFlag: [Flags$2.RENDER, Flags$2.SOURCE, Flags$2.TARGET, Flags$2.TOOLS],\n    UPDATE_PRIORITY: 1,\n    confirmUpdate: function (flags, opt) {\n      opt || (opt = {});\n      if (this.hasFlag(flags, Flags$2.SOURCE)) {\n        if (!this.updateEndProperties('source')) {\n          return flags;\n        }\n        flags = this.removeFlag(flags, Flags$2.SOURCE);\n      }\n      if (this.hasFlag(flags, Flags$2.TARGET)) {\n        if (!this.updateEndProperties('target')) {\n          return flags;\n        }\n        flags = this.removeFlag(flags, Flags$2.TARGET);\n      }\n      var ref = this;\n      var paper = ref.paper;\n      var sourceView = ref.sourceView;\n      var targetView = ref.targetView;\n      if (paper && (sourceView && !paper.isViewMounted(sourceView) || targetView && !paper.isViewMounted(targetView))) {\n        // Wait for the sourceView and targetView to be rendered\n        return flags;\n      }\n      if (this.hasFlag(flags, Flags$2.RENDER)) {\n        this.render();\n        this.updateHighlighters(true);\n        this.updateTools(opt);\n        flags = this.removeFlag(flags, [Flags$2.RENDER, Flags$2.UPDATE, Flags$2.VERTICES, Flags$2.LABELS, Flags$2.TOOLS, Flags$2.LEGACY_TOOLS, Flags$2.CONNECTOR]);\n        return flags;\n      }\n      var updateHighlighters = false;\n      if (this.hasFlag(flags, Flags$2.VERTICES)) {\n        this.renderVertexMarkers();\n        flags = this.removeFlag(flags, Flags$2.VERTICES);\n      }\n      var ref$1 = this;\n      var model = ref$1.model;\n      var attributes = model.attributes;\n      var updateLabels = this.hasFlag(flags, Flags$2.LABELS);\n      var updateLegacyTools = this.hasFlag(flags, Flags$2.LEGACY_TOOLS);\n      if (updateLabels) {\n        this.onLabelsChange(model, attributes.labels, opt);\n        flags = this.removeFlag(flags, Flags$2.LABELS);\n        updateHighlighters = true;\n      }\n      if (updateLegacyTools) {\n        this.renderTools();\n        flags = this.removeFlag(flags, Flags$2.LEGACY_TOOLS);\n      }\n      var updateAll = this.hasFlag(flags, Flags$2.UPDATE);\n      var updateConnector = this.hasFlag(flags, Flags$2.CONNECTOR);\n      if (updateAll || updateConnector) {\n        if (!updateAll) {\n          // Keep the current route and update the geometry\n          this.updatePath();\n          this.updateDOM();\n        } else if (opt.translateBy && model.isRelationshipEmbeddedIn(opt.translateBy)) {\n          // The link is being translated by an ancestor that will\n          // shift source point, target point and all vertices\n          // by an equal distance.\n          this.translate(opt.tx, opt.ty);\n        } else {\n          this.update();\n        }\n        this.updateTools(opt);\n        flags = this.removeFlag(flags, [Flags$2.UPDATE, Flags$2.TOOLS, Flags$2.CONNECTOR]);\n        updateLabels = false;\n        updateLegacyTools = false;\n        updateHighlighters = true;\n      }\n      if (updateLabels) {\n        this.updateLabelPositions();\n      }\n      if (updateLegacyTools) {\n        this.updateToolsPosition();\n      }\n      if (updateHighlighters) {\n        this.updateHighlighters();\n      }\n      if (this.hasFlag(flags, Flags$2.TOOLS)) {\n        this.updateTools(opt);\n        flags = this.removeFlag(flags, Flags$2.TOOLS);\n      }\n      return flags;\n    },\n    requestConnectionUpdate: function (opt) {\n      this.requestUpdate(this.getFlag(Flags$2.UPDATE), opt);\n    },\n    isLabelsRenderRequired: function (opt) {\n      if (opt === void 0) opt = {};\n      var previousLabels = this.model.previous('labels');\n      if (!previousLabels) {\n        return true;\n      }\n\n      // Here is an optimization for cases when we know, that change does\n      // not require re-rendering of all labels.\n      if ('propertyPathArray' in opt && 'propertyValue' in opt) {\n        // The label is setting by `prop()` method\n        var pathArray = opt.propertyPathArray || [];\n        var pathLength = pathArray.length;\n        if (pathLength > 1) {\n          // We are changing a single label here e.g. 'labels/0/position'\n          var labelExists = !!previousLabels[pathArray[1]];\n          if (labelExists) {\n            if (pathLength === 2) {\n              // We are changing the entire label. Need to check if the\n              // markup is also being changed.\n              return 'markup' in Object(opt.propertyValue);\n            } else if (pathArray[2] !== 'markup') {\n              // We are changing a label property but not the markup\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    },\n    onLabelsChange: function (_link, _labels, opt) {\n      // Note: this optimization works in async=false mode only\n      if (this.isLabelsRenderRequired(opt)) {\n        this.renderLabels();\n      } else {\n        this.updateLabels();\n      }\n    },\n    // Rendering.\n    // ----------\n\n    render: function () {\n      this.vel.empty();\n      this.unmountLabels();\n      this._V = {};\n      this.renderMarkup();\n      // rendering labels has to be run after the link is appended to DOM tree. (otherwise <Text> bbox\n      // returns zero values)\n      this.renderLabels();\n      this.update();\n      return this;\n    },\n    renderMarkup: function () {\n      var link = this.model;\n      var markup = link.get('markup') || link.markup;\n      if (!markup) {\n        throw new Error('dia.LinkView: markup required');\n      }\n      if (Array.isArray(markup)) {\n        return this.renderJSONMarkup(markup);\n      }\n      if (typeof markup === 'string') {\n        return this.renderStringMarkup(markup);\n      }\n      throw new Error('dia.LinkView: invalid markup');\n    },\n    renderJSONMarkup: function (markup) {\n      var doc = this.parseDOMJSON(markup, this.el);\n      // Selectors\n      this.selectors = doc.selectors;\n      // Fragment\n      this.vel.append(doc.fragment);\n    },\n    renderStringMarkup: function (markup) {\n      // A special markup can be given in the `properties.markup` property. This might be handy\n      // if e.g. arrowhead markers should be `<image>` elements or any other element than `<path>`s.\n      // `.connection`, `.connection-wrap`, `.marker-source` and `.marker-target` selectors\n      // of elements with special meaning though. Therefore, those classes should be preserved in any\n      // special markup passed in `properties.markup`.\n      var children = V(markup);\n      // custom markup may contain only one children\n      if (!Array.isArray(children)) {\n        children = [children];\n      }\n      // Cache all children elements for quicker access.\n      var cache = this._V; // vectorized markup;\n      for (var i = 0, n = children.length; i < n; i++) {\n        var child = children[i];\n        var className = child.attr('class');\n        if (className) {\n          // Strip the joint class name prefix, if there is one.\n          className = removeClassNamePrefix(className);\n          cache[$.camelCase(className)] = child;\n        }\n      }\n      // partial rendering\n      this.renderTools();\n      this.renderVertexMarkers();\n      this.renderArrowheadMarkers();\n      this.vel.append(children);\n    },\n    _getLabelMarkup: function (labelMarkup) {\n      if (!labelMarkup) {\n        return undefined;\n      }\n      if (Array.isArray(labelMarkup)) {\n        return this.parseDOMJSON(labelMarkup, null);\n      }\n      if (typeof labelMarkup === 'string') {\n        return this._getLabelStringMarkup(labelMarkup);\n      }\n      throw new Error('dia.linkView: invalid label markup');\n    },\n    _getLabelStringMarkup: function (labelMarkup) {\n      var children = V(labelMarkup);\n      var fragment = document.createDocumentFragment();\n      if (!Array.isArray(children)) {\n        fragment.appendChild(children.node);\n      } else {\n        for (var i = 0, n = children.length; i < n; i++) {\n          var currentChild = children[i].node;\n          fragment.appendChild(currentChild);\n        }\n      }\n      return {\n        fragment: fragment,\n        selectors: {}\n      }; // no selectors\n    },\n    // Label markup fragment may come wrapped in <g class=\"label\" />, or not.\n    // If it doesn't, add the <g /> container here.\n    _normalizeLabelMarkup: function (markup) {\n      if (!markup) {\n        return undefined;\n      }\n      var fragment = markup.fragment;\n      if (!(markup.fragment instanceof DocumentFragment) || !markup.fragment.hasChildNodes()) {\n        throw new Error('dia.LinkView: invalid label markup.');\n      }\n      var vNode;\n      var childNodes = fragment.childNodes;\n      if (childNodes.length > 1 || childNodes[0].nodeName.toUpperCase() !== 'G') {\n        // default markup fragment is not wrapped in <g />\n        // add a <g /> container\n        vNode = V('g').append(fragment);\n      } else {\n        vNode = V(childNodes[0]);\n      }\n      vNode.addClass('label');\n      return {\n        node: vNode.node,\n        selectors: markup.selectors\n      };\n    },\n    renderLabels: function () {\n      var cache = this._V;\n      var vLabels = cache.labels;\n      var labelCache = this._labelCache = {};\n      var labelSelectors = this._labelSelectors = {};\n      var model = this.model;\n      var labels = model.attributes.labels || [];\n      var labelsCount = labels.length;\n      if (labelsCount === 0) {\n        if (vLabels) {\n          vLabels.remove();\n        }\n        return this;\n      }\n      if (vLabels) {\n        vLabels.empty();\n      } else {\n        // there is no label container in the markup but some labels are defined\n        // add a <g class=\"labels\" /> container\n        vLabels = cache.labels = V('g').addClass('labels');\n        if (this.options.labelsLayer) {\n          vLabels.addClass(addClassNamePrefix(result(this, 'className')));\n          vLabels.attr('model-id', model.id);\n        }\n      }\n      for (var i = 0; i < labelsCount; i++) {\n        var label = labels[i];\n        var labelMarkup = this._normalizeLabelMarkup(this._getLabelMarkup(label.markup));\n        var labelNode;\n        var selectors;\n        if (labelMarkup) {\n          labelNode = labelMarkup.node;\n          selectors = labelMarkup.selectors;\n        } else {\n          var builtinDefaultLabel = model._builtins.defaultLabel;\n          var builtinDefaultLabelMarkup = this._normalizeLabelMarkup(this._getLabelMarkup(builtinDefaultLabel.markup));\n          var defaultLabel = model._getDefaultLabel();\n          var defaultLabelMarkup = this._normalizeLabelMarkup(this._getLabelMarkup(defaultLabel.markup));\n          var defaultMarkup = defaultLabelMarkup || builtinDefaultLabelMarkup;\n          labelNode = defaultMarkup.node;\n          selectors = defaultMarkup.selectors;\n        }\n        labelNode.setAttribute('label-idx', i); // assign label-idx\n        vLabels.append(labelNode);\n        labelCache[i] = labelNode; // cache node for `updateLabels()` so it can just update label node positions\n\n        var rootSelector = this.selector;\n        if (selectors[rootSelector]) {\n          throw new Error('dia.LinkView: ambiguous label root selector.');\n        }\n        selectors[rootSelector] = labelNode;\n        labelSelectors[i] = selectors; // cache label selectors for `updateLabels()`\n      }\n      if (!vLabels.parent()) {\n        this.mountLabels();\n      }\n      this.updateLabels();\n      return this;\n    },\n    mountLabels: function () {\n      var ref = this;\n      var el = ref.el;\n      var paper = ref.paper;\n      var model = ref.model;\n      var _V = ref._V;\n      var options = ref.options;\n      var vLabels = _V.labels;\n      if (!vLabels || !model.hasLabels()) {\n        return;\n      }\n      var node = vLabels.node;\n      if (options.labelsLayer) {\n        paper.getLayerView(options.labelsLayer).insertSortedNode(node, model.get('z'));\n      } else {\n        if (node.parentNode !== el) {\n          el.appendChild(node);\n        }\n      }\n    },\n    unmountLabels: function () {\n      var ref = this;\n      var options = ref.options;\n      var _V = ref._V;\n      if (!_V) {\n        return;\n      }\n      var vLabels = _V.labels;\n      if (vLabels && options.labelsLayer) {\n        vLabels.remove();\n      }\n    },\n    findLabelNode: function (labelIndex, selector) {\n      var labelRoot = this._labelCache[labelIndex];\n      if (!labelRoot) {\n        return null;\n      }\n      var labelSelectors = this._labelSelectors[labelIndex];\n      var ref = this.findBySelector(selector, labelRoot, labelSelectors);\n      var node = ref[0];\n      if (node === void 0) node = null;\n      return node;\n    },\n    // merge default label attrs into label attrs (or use built-in default label attrs if neither is provided)\n    // keep `undefined` or `null` because `{}` means something else\n    _mergeLabelAttrs: function (hasCustomMarkup, labelAttrs, defaultLabelAttrs, builtinDefaultLabelAttrs) {\n      if (labelAttrs === null) {\n        return null;\n      }\n      if (labelAttrs === undefined) {\n        if (defaultLabelAttrs === null) {\n          return null;\n        }\n        if (defaultLabelAttrs === undefined) {\n          if (hasCustomMarkup) {\n            return undefined;\n          }\n          return builtinDefaultLabelAttrs;\n        }\n        if (hasCustomMarkup) {\n          return defaultLabelAttrs;\n        }\n        return merge({}, builtinDefaultLabelAttrs, defaultLabelAttrs);\n      }\n      if (hasCustomMarkup) {\n        return merge({}, defaultLabelAttrs, labelAttrs);\n      }\n      return merge({}, builtinDefaultLabelAttrs, defaultLabelAttrs, labelAttrs);\n    },\n    // merge default label size into label size (no built-in default)\n    // keep `undefined` or `null` because `{}` means something else\n    _mergeLabelSize: function (labelSize, defaultLabelSize) {\n      if (labelSize === null) {\n        return null;\n      }\n      if (labelSize === undefined) {\n        if (defaultLabelSize === null) {\n          return null;\n        }\n        if (defaultLabelSize === undefined) {\n          return undefined;\n        }\n        return defaultLabelSize;\n      }\n      return merge({}, defaultLabelSize, labelSize);\n    },\n    updateLabels: function () {\n      if (!this._V.labels) {\n        return this;\n      }\n      var model = this.model;\n      var labels = model.get('labels') || [];\n      var canLabelMove = this.can('labelMove');\n      var builtinDefaultLabel = model._builtins.defaultLabel;\n      var builtinDefaultLabelAttrs = builtinDefaultLabel.attrs;\n      var defaultLabel = model._getDefaultLabel();\n      var defaultLabelMarkup = defaultLabel.markup;\n      var defaultLabelAttrs = defaultLabel.attrs;\n      var defaultLabelSize = defaultLabel.size;\n      for (var i = 0, n = labels.length; i < n; i++) {\n        var labelNode = this._labelCache[i];\n        labelNode.setAttribute('cursor', canLabelMove ? 'move' : 'default');\n        var selectors = this._labelSelectors[i];\n        var label = labels[i];\n        var labelMarkup = label.markup;\n        var labelAttrs = label.attrs;\n        var labelSize = label.size;\n        var attrs = this._mergeLabelAttrs(labelMarkup || defaultLabelMarkup, labelAttrs, defaultLabelAttrs, builtinDefaultLabelAttrs);\n        var size = this._mergeLabelSize(labelSize, defaultLabelSize);\n        this.updateDOMSubtreeAttributes(labelNode, attrs, {\n          rootBBox: new Rect(size),\n          selectors: selectors\n        });\n      }\n      return this;\n    },\n    renderTools: function () {\n      if (!this._V.linkTools) {\n        return this;\n      }\n\n      // Tools are a group of clickable elements that manipulate the whole link.\n      // A good example of this is the remove tool that removes the whole link.\n      // Tools appear after hovering the link close to the `source` element/point of the link\n      // but are offset a bit so that they don't cover the `marker-arrowhead`.\n\n      var $tools = $(this._V.linkTools.node).empty();\n      var toolTemplate = template(this.model.get('toolMarkup') || this.model.toolMarkup);\n      var tool = V(toolTemplate());\n      $tools.append(tool.node);\n\n      // Cache the tool node so that the `updateToolsPosition()` can update the tool position quickly.\n      this._toolCache = tool;\n\n      // If `doubleLinkTools` is enabled, we render copy of the tools on the other side of the\n      // link as well but only if the link is longer than `longLinkLength`.\n      if (this.options.doubleLinkTools) {\n        var tool2;\n        if (this.model.get('doubleToolMarkup') || this.model.doubleToolMarkup) {\n          toolTemplate = template(this.model.get('doubleToolMarkup') || this.model.doubleToolMarkup);\n          tool2 = V(toolTemplate());\n        } else {\n          tool2 = tool.clone();\n        }\n        $tools.append(tool2.node);\n        this._tool2Cache = tool2;\n      }\n      return this;\n    },\n    renderVertexMarkers: function () {\n      if (!this._V.markerVertices) {\n        return this;\n      }\n      var $markerVertices = $(this._V.markerVertices.node).empty();\n\n      // A special markup can be given in the `properties.vertexMarkup` property. This might be handy\n      // if default styling (elements) are not desired. This makes it possible to use any\n      // SVG elements for .marker-vertex and .marker-vertex-remove tools.\n      var markupTemplate = template(this.model.get('vertexMarkup') || this.model.vertexMarkup);\n      this.model.vertices().forEach(function (vertex, idx) {\n        $markerVertices.append(V(markupTemplate(assign({\n          idx: idx\n        }, vertex))).node);\n      });\n      return this;\n    },\n    renderArrowheadMarkers: function () {\n      // Custom markups might not have arrowhead markers. Therefore, jump of this function immediately if that's the case.\n      if (!this._V.markerArrowheads) {\n        return this;\n      }\n      var $markerArrowheads = $(this._V.markerArrowheads.node);\n      $markerArrowheads.empty();\n\n      // A special markup can be given in the `properties.vertexMarkup` property. This might be handy\n      // if default styling (elements) are not desired. This makes it possible to use any\n      // SVG elements for .marker-vertex and .marker-vertex-remove tools.\n      var markupTemplate = template(this.model.get('arrowheadMarkup') || this.model.arrowheadMarkup);\n      this._V.sourceArrowhead = V(markupTemplate({\n        end: 'source'\n      }));\n      this._V.targetArrowhead = V(markupTemplate({\n        end: 'target'\n      }));\n      $markerArrowheads.append(this._V.sourceArrowhead.node, this._V.targetArrowhead.node);\n      return this;\n    },\n    // remove vertices that lie on (or nearly on) straight lines within the link\n    // return the number of removed points\n    removeRedundantLinearVertices: function (opt) {\n      var SIMPLIFY_THRESHOLD = 0.001;\n      var link = this.model;\n      var vertices = link.vertices();\n      var routePoints = [this.sourceAnchor].concat(vertices, [this.targetAnchor]);\n      var numRoutePoints = routePoints.length;\n\n      // put routePoints into a polyline and try to simplify\n      var polyline = new Polyline(routePoints);\n      polyline.simplify({\n        threshold: SIMPLIFY_THRESHOLD\n      });\n      var polylinePoints = polyline.points.map(function (point) {\n        return point.toJSON();\n      }); // JSON of points after simplification\n      var numPolylinePoints = polylinePoints.length; // number of points after simplification\n\n      // shortcut if simplification did not remove any redundant vertices:\n      if (numRoutePoints === numPolylinePoints) {\n        return 0;\n      }\n\n      // else: set simplified polyline points as link vertices\n      // remove first and last polyline points again (= source/target anchors)\n      link.vertices(polylinePoints.slice(1, numPolylinePoints - 1), opt);\n      return numRoutePoints - numPolylinePoints;\n    },\n    updateDefaultConnectionPath: function () {\n      var cache = this._V;\n      if (cache.connection) {\n        cache.connection.attr('d', this.getSerializedConnection());\n      }\n      if (cache.connectionWrap) {\n        cache.connectionWrap.attr('d', this.getSerializedConnection());\n      }\n      if (cache.markerSource && cache.markerTarget) {\n        this._translateAndAutoOrientArrows(cache.markerSource, cache.markerTarget);\n      }\n    },\n    getEndView: function (type) {\n      switch (type) {\n        case 'source':\n          return this.sourceView || null;\n        case 'target':\n          return this.targetView || null;\n        default:\n          throw new Error('dia.LinkView: type parameter required.');\n      }\n    },\n    getEndAnchor: function (type) {\n      switch (type) {\n        case 'source':\n          return new Point(this.sourceAnchor);\n        case 'target':\n          return new Point(this.targetAnchor);\n        default:\n          throw new Error('dia.LinkView: type parameter required.');\n      }\n    },\n    getEndConnectionPoint: function (type) {\n      switch (type) {\n        case 'source':\n          return new Point(this.sourcePoint);\n        case 'target':\n          return new Point(this.targetPoint);\n        default:\n          throw new Error('dia.LinkView: type parameter required.');\n      }\n    },\n    getEndMagnet: function (type) {\n      switch (type) {\n        case 'source':\n          var sourceView = this.sourceView;\n          if (!sourceView) {\n            break;\n          }\n          return this.sourceMagnet || sourceView.el;\n        case 'target':\n          var targetView = this.targetView;\n          if (!targetView) {\n            break;\n          }\n          return this.targetMagnet || targetView.el;\n        default:\n          throw new Error('dia.LinkView: type parameter required.');\n      }\n      return null;\n    },\n    // Updating.\n    // ---------\n\n    update: function () {\n      this.updateRoute();\n      this.updatePath();\n      this.updateDOM();\n      return this;\n    },\n    translate: function (tx, ty) {\n      if (tx === void 0) tx = 0;\n      if (ty === void 0) ty = 0;\n      var ref = this;\n      var route = ref.route;\n      var path = ref.path;\n      if (!route || !path) {\n        return;\n      }\n      // translate the route\n      var polyline = new Polyline(route);\n      polyline.translate(tx, ty);\n      this.route = polyline.points;\n      // translate source and target connection and marker points.\n      this._translateConnectionPoints(tx, ty);\n      // translate the geometry path\n      path.translate(tx, ty);\n      this.updateDOM();\n    },\n    updateDOM: function updateDOM() {\n      var ref = this;\n      var el = ref.el;\n      var model = ref.model;\n      var selectors = ref.selectors;\n      this.cleanNodesCache();\n      // update SVG attributes defined by 'attrs/'.\n      this.updateDOMSubtreeAttributes(el, model.attr(), {\n        selectors: selectors\n      });\n      // legacy link path update\n      this.updateDefaultConnectionPath();\n      // update the label position etc.\n      this.updateLabelPositions();\n      this.updateToolsPosition();\n      this.updateArrowheadMarkers();\n      // *Deprecated*\n      // Local perpendicular flag (as opposed to one defined on paper).\n      // Could be enabled inside a connector/router. It's valid only\n      // during the update execution.\n      this.options.perpendicular = null;\n    },\n    updateRoute: function () {\n      var ref = this;\n      var model = ref.model;\n      var vertices = model.vertices();\n      // 1. Find Anchors\n      var anchors = this.findAnchors(vertices);\n      var sourceAnchor = this.sourceAnchor = anchors.source;\n      var targetAnchor = this.targetAnchor = anchors.target;\n      // 2. Find Route\n      var route = this.findRoute(vertices);\n      this.route = route;\n      // 3. Find Connection Points\n      var connectionPoints = this.findConnectionPoints(route, sourceAnchor, targetAnchor);\n      this.sourcePoint = connectionPoints.source;\n      this.targetPoint = connectionPoints.target;\n    },\n    updatePath: function () {\n      var ref = this;\n      var route = ref.route;\n      var sourcePoint = ref.sourcePoint;\n      var targetPoint = ref.targetPoint;\n      // 3b. Find Marker Connection Point - Backwards Compatibility\n      var markerPoints = this.findMarkerPoints(route, sourcePoint, targetPoint);\n      // 4. Find Connection\n      var path = this.findPath(route, markerPoints.source || sourcePoint, markerPoints.target || targetPoint);\n      this.path = path;\n    },\n    findMarkerPoints: function (route, sourcePoint, targetPoint) {\n      var firstWaypoint = route[0];\n      var lastWaypoint = route[route.length - 1];\n\n      // Move the source point by the width of the marker taking into account\n      // its scale around x-axis. Note that scale is the only transform that\n      // makes sense to be set in `.marker-source` attributes object\n      // as all other transforms (translate/rotate) will be replaced\n      // by the `translateAndAutoOrient()` function.\n      var cache = this._markerCache;\n      // cache source and target points\n      var sourceMarkerPoint, targetMarkerPoint;\n      if (this._V.markerSource) {\n        cache.sourceBBox = cache.sourceBBox || this._V.markerSource.getBBox();\n        sourceMarkerPoint = Point(sourcePoint).move(firstWaypoint || targetPoint, cache.sourceBBox.width * this._V.markerSource.scale().sx * -1).round();\n      }\n      if (this._V.markerTarget) {\n        cache.targetBBox = cache.targetBBox || this._V.markerTarget.getBBox();\n        targetMarkerPoint = Point(targetPoint).move(lastWaypoint || sourcePoint, cache.targetBBox.width * this._V.markerTarget.scale().sx * -1).round();\n      }\n\n      // if there was no markup for the marker, use the connection point.\n      cache.sourcePoint = sourceMarkerPoint || sourcePoint.clone();\n      cache.targetPoint = targetMarkerPoint || targetPoint.clone();\n      return {\n        source: sourceMarkerPoint,\n        target: targetMarkerPoint\n      };\n    },\n    findAnchorsOrdered: function (firstEndType, firstRef, secondEndType, secondRef) {\n      var firstAnchor, secondAnchor;\n      var firstAnchorRef, secondAnchorRef;\n      var model = this.model;\n      var firstDef = model.get(firstEndType);\n      var secondDef = model.get(secondEndType);\n      var firstView = this.getEndView(firstEndType);\n      var secondView = this.getEndView(secondEndType);\n      var firstMagnet = this.getEndMagnet(firstEndType);\n      var secondMagnet = this.getEndMagnet(secondEndType);\n\n      // Anchor first\n      if (firstView) {\n        if (firstRef) {\n          firstAnchorRef = new Point(firstRef);\n        } else if (secondView) {\n          firstAnchorRef = secondMagnet;\n        } else {\n          firstAnchorRef = new Point(secondDef);\n        }\n        firstAnchor = this.getAnchor(firstDef.anchor, firstView, firstMagnet, firstAnchorRef, firstEndType);\n      } else {\n        firstAnchor = new Point(firstDef);\n      }\n\n      // Anchor second\n      if (secondView) {\n        secondAnchorRef = new Point(secondRef || firstAnchor);\n        secondAnchor = this.getAnchor(secondDef.anchor, secondView, secondMagnet, secondAnchorRef, secondEndType);\n      } else {\n        secondAnchor = new Point(secondDef);\n      }\n      var res = {};\n      res[firstEndType] = firstAnchor;\n      res[secondEndType] = secondAnchor;\n      return res;\n    },\n    findAnchors: function (vertices) {\n      var model = this.model;\n      var firstVertex = vertices[0];\n      var lastVertex = vertices[vertices.length - 1];\n      if (model.target().priority && !model.source().priority) {\n        // Reversed order\n        return this.findAnchorsOrdered('target', lastVertex, 'source', firstVertex);\n      }\n\n      // Usual order\n      return this.findAnchorsOrdered('source', firstVertex, 'target', lastVertex);\n    },\n    findConnectionPoints: function (route, sourceAnchor, targetAnchor) {\n      var firstWaypoint = route[0];\n      var lastWaypoint = route[route.length - 1];\n      var model = this.model;\n      var sourceDef = model.get('source');\n      var targetDef = model.get('target');\n      var sourceView = this.sourceView;\n      var targetView = this.targetView;\n      var paperOptions = this.paper.options;\n      var sourceMagnet, targetMagnet;\n\n      // Connection Point Source\n      var sourcePoint;\n      if (sourceView && !sourceView.isNodeConnection(this.sourceMagnet)) {\n        sourceMagnet = this.sourceMagnet || sourceView.el;\n        var sourceConnectionPointDef = sourceDef.connectionPoint || paperOptions.defaultConnectionPoint;\n        var sourcePointRef = firstWaypoint || targetAnchor;\n        var sourceLine = new Line(sourcePointRef, sourceAnchor);\n        sourcePoint = this.getConnectionPoint(sourceConnectionPointDef, sourceView, sourceMagnet, sourceLine, 'source');\n      } else {\n        sourcePoint = sourceAnchor;\n      }\n      // Connection Point Target\n      var targetPoint;\n      if (targetView && !targetView.isNodeConnection(this.targetMagnet)) {\n        targetMagnet = this.targetMagnet || targetView.el;\n        var targetConnectionPointDef = targetDef.connectionPoint || paperOptions.defaultConnectionPoint;\n        var targetPointRef = lastWaypoint || sourceAnchor;\n        var targetLine = new Line(targetPointRef, targetAnchor);\n        targetPoint = this.getConnectionPoint(targetConnectionPointDef, targetView, targetMagnet, targetLine, 'target');\n      } else {\n        targetPoint = targetAnchor;\n      }\n      return {\n        source: sourcePoint,\n        target: targetPoint\n      };\n    },\n    getAnchor: function (anchorDef, cellView, magnet, ref, endType) {\n      var isConnection = cellView.isNodeConnection(magnet);\n      var paperOptions = this.paper.options;\n      if (!anchorDef) {\n        if (isConnection) {\n          anchorDef = paperOptions.defaultLinkAnchor;\n        } else {\n          if (paperOptions.perpendicularLinks || this.options.perpendicular) {\n            // Backwards compatibility\n            // If `perpendicularLinks` flag is set on the paper and there are vertices\n            // on the link, then try to find a connection point that makes the link perpendicular\n            // even though the link won't point to the center of the targeted object.\n            anchorDef = {\n              name: 'perpendicular'\n            };\n          } else {\n            anchorDef = paperOptions.defaultAnchor;\n          }\n        }\n      }\n      if (!anchorDef) {\n        throw new Error('Anchor required.');\n      }\n      var anchorFn;\n      if (typeof anchorDef === 'function') {\n        anchorFn = anchorDef;\n      } else {\n        var anchorName = anchorDef.name;\n        var anchorNamespace = isConnection ? 'linkAnchorNamespace' : 'anchorNamespace';\n        anchorFn = paperOptions[anchorNamespace][anchorName];\n        if (typeof anchorFn !== 'function') {\n          throw new Error('Unknown anchor: ' + anchorName);\n        }\n      }\n      var anchor = anchorFn.call(this, cellView, magnet, ref, anchorDef.args || {}, endType, this);\n      if (!anchor) {\n        return new Point();\n      }\n      return anchor.round(this.decimalsRounding);\n    },\n    getConnectionPoint: function (connectionPointDef, view, magnet, line, endType) {\n      var connectionPoint;\n      var anchor = line.end;\n      var paperOptions = this.paper.options;\n\n      // Backwards compatibility\n      if (typeof paperOptions.linkConnectionPoint === 'function') {\n        var linkConnectionMagnet = magnet === view.el ? undefined : magnet;\n        connectionPoint = paperOptions.linkConnectionPoint(this, view, linkConnectionMagnet, line.start, endType);\n        if (connectionPoint) {\n          return connectionPoint;\n        }\n      }\n      if (!connectionPointDef) {\n        return anchor;\n      }\n      var connectionPointFn;\n      if (typeof connectionPointDef === 'function') {\n        connectionPointFn = connectionPointDef;\n      } else {\n        var connectionPointName = connectionPointDef.name;\n        connectionPointFn = paperOptions.connectionPointNamespace[connectionPointName];\n        if (typeof connectionPointFn !== 'function') {\n          throw new Error('Unknown connection point: ' + connectionPointName);\n        }\n      }\n      connectionPoint = connectionPointFn.call(this, line, view, magnet, connectionPointDef.args || {}, endType, this);\n      if (!connectionPoint) {\n        return anchor;\n      }\n      return connectionPoint.round(this.decimalsRounding);\n    },\n    _translateConnectionPoints: function (tx, ty) {\n      var cache = this._markerCache;\n      cache.sourcePoint.offset(tx, ty);\n      cache.targetPoint.offset(tx, ty);\n      this.sourcePoint.offset(tx, ty);\n      this.targetPoint.offset(tx, ty);\n      this.sourceAnchor.offset(tx, ty);\n      this.targetAnchor.offset(tx, ty);\n    },\n    // combine default label position with built-in default label position\n    _getDefaultLabelPositionProperty: function () {\n      var model = this.model;\n      var builtinDefaultLabel = model._builtins.defaultLabel;\n      var builtinDefaultLabelPosition = builtinDefaultLabel.position;\n      var defaultLabel = model._getDefaultLabel();\n      var defaultLabelPosition = this._normalizeLabelPosition(defaultLabel.position);\n      return merge({}, builtinDefaultLabelPosition, defaultLabelPosition);\n    },\n    // if label position is a number, normalize it to a position object\n    // this makes sure that label positions can be merged properly\n    _normalizeLabelPosition: function (labelPosition) {\n      if (typeof labelPosition === 'number') {\n        return {\n          distance: labelPosition,\n          offset: null,\n          angle: 0,\n          args: null\n        };\n      }\n      return labelPosition;\n    },\n    // expects normalized position properties\n    // e.g. `this._normalizeLabelPosition(labelPosition)` and `this._getDefaultLabelPositionProperty()`\n    _mergeLabelPositionProperty: function (normalizedLabelPosition, normalizedDefaultLabelPosition) {\n      if (normalizedLabelPosition === null) {\n        return null;\n      }\n      if (normalizedLabelPosition === undefined) {\n        if (normalizedDefaultLabelPosition === null) {\n          return null;\n        }\n        return normalizedDefaultLabelPosition;\n      }\n      return merge({}, normalizedDefaultLabelPosition, normalizedLabelPosition);\n    },\n    updateLabelPositions: function () {\n      if (!this._V.labels) {\n        return this;\n      }\n      var path = this.path;\n      if (!path) {\n        return this;\n      }\n\n      // This method assumes all the label nodes are stored in the `this._labelCache` hash table\n      // by their indices in the `this.get('labels')` array. This is done in the `renderLabels()` method.\n\n      var model = this.model;\n      var labels = model.get('labels') || [];\n      if (!labels.length) {\n        return this;\n      }\n      var defaultLabelPosition = this._getDefaultLabelPositionProperty();\n      for (var idx = 0, n = labels.length; idx < n; idx++) {\n        var labelNode = this._labelCache[idx];\n        if (!labelNode) {\n          continue;\n        }\n        var label = labels[idx];\n        var labelPosition = this._normalizeLabelPosition(label.position);\n        var position = this._mergeLabelPositionProperty(labelPosition, defaultLabelPosition);\n        var transformationMatrix = this._getLabelTransformationMatrix(position);\n        labelNode.setAttribute('transform', V.matrixToTransformString(transformationMatrix));\n        this._cleanLabelMatrices(idx);\n      }\n      return this;\n    },\n    _cleanLabelMatrices: function (index) {\n      // Clean magnetMatrix for all nodes of the label.\n      // Cached BoundingRect does not need to updated when the position changes\n      // TODO: this doesn't work for labels with XML String markups.\n      var ref = this;\n      var metrics = ref.metrics;\n      var _labelSelectors = ref._labelSelectors;\n      var selectors = _labelSelectors[index];\n      if (!selectors) {\n        return;\n      }\n      for (var selector in selectors) {\n        var ref$1 = selectors[selector];\n        var id = ref$1.id;\n        if (id && id in metrics) {\n          delete metrics[id].magnetMatrix;\n        }\n      }\n    },\n    updateToolsPosition: function () {\n      if (!this._V.linkTools) {\n        return this;\n      }\n\n      // Move the tools a bit to the target position but don't cover the `sourceArrowhead` marker.\n      // Note that the offset is hardcoded here. The offset should be always\n      // more than the `this.$('.marker-arrowhead[end=\"source\"]')[0].bbox().width` but looking\n      // this up all the time would be slow.\n\n      var scale = '';\n      var offset = this.options.linkToolsOffset;\n      var connectionLength = this.getConnectionLength();\n\n      // Firefox returns connectionLength=NaN in odd cases (for bezier curves).\n      // In that case we won't update tools position at all.\n      if (!Number.isNaN(connectionLength)) {\n        // If the link is too short, make the tools half the size and the offset twice as low.\n        if (connectionLength < this.options.shortLinkLength) {\n          scale = 'scale(.5)';\n          offset /= 2;\n        }\n        var toolPosition = this.getPointAtLength(offset);\n        this._toolCache.attr('transform', 'translate(' + toolPosition.x + ', ' + toolPosition.y + ') ' + scale);\n        if (this.options.doubleLinkTools && connectionLength >= this.options.longLinkLength) {\n          var doubleLinkToolsOffset = this.options.doubleLinkToolsOffset || offset;\n          toolPosition = this.getPointAtLength(connectionLength - doubleLinkToolsOffset);\n          this._tool2Cache.attr('transform', 'translate(' + toolPosition.x + ', ' + toolPosition.y + ') ' + scale);\n          this._tool2Cache.attr('display', 'inline');\n        } else if (this.options.doubleLinkTools) {\n          this._tool2Cache.attr('display', 'none');\n        }\n      }\n      return this;\n    },\n    updateArrowheadMarkers: function () {\n      if (!this._V.markerArrowheads) {\n        return this;\n      }\n\n      // getting bbox of an element with `display=\"none\"` in IE9 ends up with access violation\n      if ($.css(this._V.markerArrowheads.node, 'display') === 'none') {\n        return this;\n      }\n      var sx = this.getConnectionLength() < this.options.shortLinkLength ? .5 : 1;\n      this._V.sourceArrowhead.scale(sx);\n      this._V.targetArrowhead.scale(sx);\n      this._translateAndAutoOrientArrows(this._V.sourceArrowhead, this._V.targetArrowhead);\n      return this;\n    },\n    updateEndProperties: function (endType) {\n      var ref = this;\n      var model = ref.model;\n      var paper = ref.paper;\n      var endViewProperty = endType + \"View\";\n      var endDef = model.get(endType);\n      var endId = endDef && endDef.id;\n      if (!endId) {\n        // the link end is a point ~ rect 0x0\n        this[endViewProperty] = null;\n        this.updateEndMagnet(endType);\n        return true;\n      }\n      var endModel = paper.getModelById(endId);\n      if (!endModel) {\n        throw new Error('LinkView: invalid ' + endType + ' cell.');\n      }\n      var endView = endModel.findView(paper);\n      if (!endView) {\n        // A view for a model should always exist\n        return false;\n      }\n      this[endViewProperty] = endView;\n      this.updateEndMagnet(endType);\n      return true;\n    },\n    updateEndMagnet: function (endType) {\n      var endMagnetProperty = endType + \"Magnet\";\n      var endView = this.getEndView(endType);\n      if (endView) {\n        var connectedMagnet = endView.getMagnetFromLinkEnd(this.model.get(endType));\n        if (connectedMagnet === endView.el) {\n          connectedMagnet = null;\n        }\n        this[endMagnetProperty] = connectedMagnet;\n      } else {\n        this[endMagnetProperty] = null;\n      }\n    },\n    _translateAndAutoOrientArrows: function (sourceArrow, targetArrow) {\n      // Make the markers \"point\" to their sticky points being auto-oriented towards\n      // `targetPosition`/`sourcePosition`. And do so only if there is a markup for them.\n      var route = toArray(this.route);\n      if (sourceArrow) {\n        sourceArrow.translateAndAutoOrient(this.sourcePoint, route[0] || this.targetPoint, this.paper.cells);\n      }\n      if (targetArrow) {\n        targetArrow.translateAndAutoOrient(this.targetPoint, route[route.length - 1] || this.sourcePoint, this.paper.cells);\n      }\n    },\n    _getLabelPositionProperty: function (idx) {\n      return this.model.label(idx).position || {};\n    },\n    _getLabelPositionAngle: function (idx) {\n      var labelPosition = this._getLabelPositionProperty(idx);\n      return labelPosition.angle || 0;\n    },\n    _getLabelPositionArgs: function (idx) {\n      var labelPosition = this._getLabelPositionProperty(idx);\n      return labelPosition.args;\n    },\n    _getDefaultLabelPositionArgs: function () {\n      var defaultLabel = this.model._getDefaultLabel();\n      var defaultLabelPosition = defaultLabel.position || {};\n      return defaultLabelPosition.args;\n    },\n    // merge default label position args into label position args\n    // keep `undefined` or `null` because `{}` means something else\n    _mergeLabelPositionArgs: function (labelPositionArgs, defaultLabelPositionArgs) {\n      if (labelPositionArgs === null) {\n        return null;\n      }\n      if (labelPositionArgs === undefined) {\n        if (defaultLabelPositionArgs === null) {\n          return null;\n        }\n        return defaultLabelPositionArgs;\n      }\n      return merge({}, defaultLabelPositionArgs, labelPositionArgs);\n    },\n    // Add default label at given position at end of `labels` array.\n    // Four signatures:\n    // - obj, obj = point, opt\n    // - obj, num, obj = point, angle, opt\n    // - num, num, obj = x, y, opt\n    // - num, num, num, obj = x, y, angle, opt\n    // Assigns relative coordinates by default:\n    // `opt.absoluteDistance` forces absolute coordinates.\n    // `opt.reverseDistance` forces reverse absolute coordinates (if absoluteDistance = true).\n    // `opt.absoluteOffset` forces absolute coordinates for offset.\n    // Additional args:\n    // `opt.keepGradient` auto-adjusts the angle of the label to match path gradient at position.\n    // `opt.ensureLegibility` rotates labels so they are never upside-down.\n    addLabel: function (p1, p2, p3, p4) {\n      // normalize data from the four possible signatures\n      var localX;\n      var localY;\n      var localAngle = 0;\n      var localOpt;\n      if (typeof p1 !== 'number') {\n        // {x, y} object provided as first parameter\n        localX = p1.x;\n        localY = p1.y;\n        if (typeof p2 === 'number') {\n          // angle and opt provided as second and third parameters\n          localAngle = p2;\n          localOpt = p3;\n        } else {\n          // opt provided as second parameter\n          localOpt = p2;\n        }\n      } else {\n        // x and y provided as first and second parameters\n        localX = p1;\n        localY = p2;\n        if (typeof p3 === 'number') {\n          // angle and opt provided as third and fourth parameters\n          localAngle = p3;\n          localOpt = p4;\n        } else {\n          // opt provided as third parameter\n          localOpt = p3;\n        }\n      }\n\n      // merge label position arguments\n      var defaultLabelPositionArgs = this._getDefaultLabelPositionArgs();\n      var labelPositionArgs = localOpt;\n      var positionArgs = this._mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n\n      // append label to labels array\n      var label = {\n        position: this.getLabelPosition(localX, localY, localAngle, positionArgs)\n      };\n      var idx = -1;\n      this.model.insertLabel(idx, label, localOpt);\n      return idx;\n    },\n    // Add a new vertex at calculated index to the `vertices` array.\n    addVertex: function (x, y, opt) {\n      // accept input in form `{ x, y }, opt` or `x, y, opt`\n      var isPointProvided = typeof x !== 'number';\n      var localX = isPointProvided ? x.x : x;\n      var localY = isPointProvided ? x.y : y;\n      var localOpt = isPointProvided ? y : opt;\n      var vertex = {\n        x: localX,\n        y: localY\n      };\n      var idx = this.getVertexIndex(localX, localY);\n      this.model.insertVertex(idx, vertex, localOpt);\n      return idx;\n    },\n    // Send a token (an SVG element, usually a circle) along the connection path.\n    // Example: `link.findView(paper).sendToken(V('circle', { r: 7, fill: 'green' }).node)`\n    // `opt.duration` is optional and is a time in milliseconds that the token travels from the source to the target of the link. Default is `1000`.\n    // `opt.directon` is optional and it determines whether the token goes from source to target or other way round (`reverse`)\n    // `opt.connection` is an optional selector to the connection path.\n    // `callback` is optional and is a function to be called once the token reaches the target.\n    sendToken: function (token, opt, callback) {\n      function onAnimationEnd(vToken, callback) {\n        return function () {\n          vToken.remove();\n          if (typeof callback === 'function') {\n            callback();\n          }\n        };\n      }\n      var duration, isReversed, selector;\n      if (isObject$1(opt)) {\n        duration = opt.duration;\n        isReversed = opt.direction === 'reverse';\n        selector = opt.connection;\n      } else {\n        // Backwards compatibility\n        duration = opt;\n        isReversed = false;\n        selector = null;\n      }\n      duration = duration || 1000;\n      var animationAttributes = {\n        dur: duration + 'ms',\n        repeatCount: 1,\n        calcMode: 'linear',\n        fill: 'freeze'\n      };\n      if (isReversed) {\n        animationAttributes.keyPoints = '1;0';\n        animationAttributes.keyTimes = '0;1';\n      }\n      var vToken = V(token);\n      var connection;\n      if (typeof selector === 'string') {\n        // Use custom connection path.\n        connection = this.findBySelector(selector, this.el, this.selectors)[0];\n      } else {\n        // Select connection path automatically.\n        var cache = this._V;\n        connection = cache.connection ? cache.connection.node : this.el.querySelector('path');\n      }\n      if (!(connection instanceof SVGPathElement)) {\n        throw new Error('dia.LinkView: token animation requires a valid connection path.');\n      }\n      vToken.appendTo(this.paper.cells).animateAlongPath(animationAttributes, connection);\n      setTimeout(onAnimationEnd(vToken, callback), duration);\n    },\n    findRoute: function (vertices) {\n      vertices || (vertices = []);\n      var namespace = this.paper.options.routerNamespace || routers;\n      var router = this.model.router();\n      var defaultRouter = this.paper.options.defaultRouter;\n      if (!router) {\n        if (defaultRouter) {\n          router = defaultRouter;\n        } else {\n          return vertices.map(Point);\n        } // no router specified\n      }\n      var routerFn = isFunction(router) ? router : namespace[router.name];\n      if (!isFunction(routerFn)) {\n        throw new Error('dia.LinkView: unknown router: \"' + router.name + '\".');\n      }\n      var args = router.args || {};\n      var route = routerFn.call(this,\n      // context\n      vertices,\n      // vertices\n      args,\n      // options\n      this // linkView\n      );\n      if (!route) {\n        return vertices.map(Point);\n      }\n      return route;\n    },\n    // Return the `d` attribute value of the `<path>` element representing the link\n    // between `source` and `target`.\n    findPath: function (route, sourcePoint, targetPoint) {\n      var namespace = this.paper.options.connectorNamespace || connectors;\n      var connector = this.model.connector();\n      var defaultConnector = this.paper.options.defaultConnector;\n      if (!connector) {\n        connector = defaultConnector || {};\n      }\n      var connectorFn = isFunction(connector) ? connector : namespace[connector.name];\n      if (!isFunction(connectorFn)) {\n        throw new Error('dia.LinkView: unknown connector: \"' + connector.name + '\".');\n      }\n      var args = clone(connector.args || {});\n      args.raw = true; // Request raw g.Path as the result.\n\n      var path = connectorFn.call(this,\n      // context\n      sourcePoint,\n      // start point\n      targetPoint,\n      // end point\n      route,\n      // vertices\n      args,\n      // options\n      this // linkView\n      );\n      if (typeof path === 'string') {\n        // Backwards compatibility for connectors not supporting `raw` option.\n        path = new Path(V.normalizePathData(path));\n      }\n      return path;\n    },\n    // Public API.\n    // -----------\n\n    getConnection: function () {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      return path.clone();\n    },\n    getSerializedConnection: function () {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      var metrics = this.metrics;\n      if (metrics.hasOwnProperty('data')) {\n        return metrics.data;\n      }\n      var data = path.serialize();\n      metrics.data = data;\n      return data;\n    },\n    getConnectionSubdivisions: function () {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      var metrics = this.metrics;\n      if (metrics.hasOwnProperty('segmentSubdivisions')) {\n        return metrics.segmentSubdivisions;\n      }\n      var subdivisions = path.getSegmentSubdivisions();\n      metrics.segmentSubdivisions = subdivisions;\n      return subdivisions;\n    },\n    getConnectionLength: function () {\n      var path = this.path;\n      if (!path) {\n        return 0;\n      }\n      var metrics = this.metrics;\n      if (metrics.hasOwnProperty('length')) {\n        return metrics.length;\n      }\n      var length = path.length({\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      });\n      metrics.length = length;\n      return length;\n    },\n    getPointAtLength: function (length) {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      return path.pointAtLength(length, {\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      });\n    },\n    getPointAtRatio: function (ratio) {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      if (isPercentage(ratio)) {\n        ratio = parseFloat(ratio) / 100;\n      }\n      return path.pointAt(ratio, {\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      });\n    },\n    getTangentAtLength: function (length) {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      return path.tangentAtLength(length, {\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      });\n    },\n    getTangentAtRatio: function (ratio) {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      return path.tangentAt(ratio, {\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      });\n    },\n    getClosestPoint: function (point) {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      return path.closestPoint(point, {\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      });\n    },\n    getClosestPointLength: function (point) {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      return path.closestPointLength(point, {\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      });\n    },\n    getClosestPointRatio: function (point) {\n      var path = this.path;\n      if (!path) {\n        return null;\n      }\n      return path.closestPointNormalizedLength(point, {\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      });\n    },\n    // Get label position object based on two provided coordinates, x and y.\n    // (Used behind the scenes when user moves labels around.)\n    // Two signatures:\n    // - num, num, obj = x, y, options\n    // - num, num, num, obj = x, y, angle, options\n    // Accepts distance/offset options = `absoluteDistance: boolean`, `reverseDistance: boolean`, `absoluteOffset: boolean`\n    // - `absoluteOffset` is necessary in order to move beyond connection endpoints\n    // Additional options = `keepGradient: boolean`, `ensureLegibility: boolean`\n    getLabelPosition: function (x, y, p3, p4) {\n      var position = {};\n\n      // normalize data from the two possible signatures\n      var localAngle = 0;\n      var localOpt;\n      if (typeof p3 === 'number') {\n        // angle and opt provided as third and fourth argument\n        localAngle = p3;\n        localOpt = p4;\n      } else {\n        // opt provided as third argument\n        localOpt = p3;\n      }\n\n      // save localOpt as `args` of the position object that is passed along\n      if (localOpt) {\n        position.args = localOpt;\n      }\n\n      // identify distance/offset settings\n      var isDistanceRelative = !(localOpt && localOpt.absoluteDistance); // relative by default\n      var isDistanceAbsoluteReverse = localOpt && localOpt.absoluteDistance && localOpt.reverseDistance; // non-reverse by default\n      var isOffsetAbsolute = localOpt && localOpt.absoluteOffset; // offset is non-absolute by default\n\n      // find closest point t\n      var path = this.path;\n      var pathOpt = {\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      };\n      var labelPoint = new Point(x, y);\n      var t = path.closestPointT(labelPoint, pathOpt);\n\n      // DISTANCE:\n      var labelDistance = path.lengthAtT(t, pathOpt);\n      if (isDistanceRelative) {\n        labelDistance = labelDistance / this.getConnectionLength() || 0;\n      } // fix to prevent NaN for 0 length\n      if (isDistanceAbsoluteReverse) {\n        labelDistance = -1 * (this.getConnectionLength() - labelDistance) || 1;\n      } // fix for end point (-0 => 1)\n      position.distance = labelDistance;\n\n      // OFFSET:\n      // use absolute offset if:\n      // - opt.absoluteOffset is true,\n      // - opt.absoluteOffset is not true but there is no tangent\n      var tangent;\n      if (!isOffsetAbsolute) {\n        tangent = path.tangentAtT(t);\n      }\n      var labelOffset;\n      if (tangent) {\n        labelOffset = tangent.pointOffset(labelPoint);\n      } else {\n        var closestPoint = path.pointAtT(t);\n        var labelOffsetDiff = labelPoint.difference(closestPoint);\n        labelOffset = {\n          x: labelOffsetDiff.x,\n          y: labelOffsetDiff.y\n        };\n      }\n      position.offset = labelOffset;\n\n      // ANGLE:\n      position.angle = localAngle;\n      return position;\n    },\n    _getLabelTransformationMatrix: function (labelPosition) {\n      var labelDistance;\n      var labelAngle = 0;\n      var args = {};\n      if (typeof labelPosition === 'number') {\n        labelDistance = labelPosition;\n      } else if (typeof labelPosition.distance === 'number') {\n        args = labelPosition.args || {};\n        labelDistance = labelPosition.distance;\n        labelAngle = labelPosition.angle || 0;\n      } else {\n        throw new Error('dia.LinkView: invalid label position distance.');\n      }\n      var isDistanceRelative = labelDistance > 0 && labelDistance <= 1;\n      var labelOffset = 0;\n      var labelOffsetCoordinates = {\n        x: 0,\n        y: 0\n      };\n      if (labelPosition.offset) {\n        var positionOffset = labelPosition.offset;\n        if (typeof positionOffset === 'number') {\n          labelOffset = positionOffset;\n        }\n        if (positionOffset.x) {\n          labelOffsetCoordinates.x = positionOffset.x;\n        }\n        if (positionOffset.y) {\n          labelOffsetCoordinates.y = positionOffset.y;\n        }\n      }\n      var isOffsetAbsolute = labelOffsetCoordinates.x !== 0 || labelOffsetCoordinates.y !== 0 || labelOffset === 0;\n      var isKeepGradient = args.keepGradient;\n      var isEnsureLegibility = args.ensureLegibility;\n      var path = this.path;\n      var pathOpt = {\n        segmentSubdivisions: this.getConnectionSubdivisions()\n      };\n      var distance = isDistanceRelative ? labelDistance * this.getConnectionLength() : labelDistance;\n      var tangent = path.tangentAtLength(distance, pathOpt);\n      var translation;\n      var angle = labelAngle;\n      if (tangent) {\n        if (isOffsetAbsolute) {\n          translation = tangent.start.clone();\n          translation.offset(labelOffsetCoordinates);\n        } else {\n          var normal = tangent.clone();\n          normal.rotate(tangent.start, -90);\n          normal.setLength(labelOffset);\n          translation = normal.end;\n        }\n        if (isKeepGradient) {\n          angle = tangent.angle() + labelAngle;\n          if (isEnsureLegibility) {\n            angle = normalizeAngle((angle + 90) % 180 - 90);\n          }\n        }\n      } else {\n        // fallback - the connection has zero length\n        translation = path.start.clone();\n        if (isOffsetAbsolute) {\n          translation.offset(labelOffsetCoordinates);\n        }\n      }\n      return V.createSVGMatrix().translate(translation.x, translation.y).rotate(angle);\n    },\n    getLabelCoordinates: function (labelPosition) {\n      var transformationMatrix = this._getLabelTransformationMatrix(labelPosition);\n      return new Point(transformationMatrix.e, transformationMatrix.f);\n    },\n    getVertexIndex: function (x, y) {\n      var model = this.model;\n      var vertices = model.vertices();\n      var vertexLength = this.getClosestPointLength(new Point(x, y));\n      var idx = 0;\n      for (var n = vertices.length; idx < n; idx++) {\n        var currentVertex = vertices[idx];\n        var currentVertexLength = this.getClosestPointLength(currentVertex);\n        if (vertexLength < currentVertexLength) {\n          break;\n        }\n      }\n      return idx;\n    },\n    // Interaction. The controller part.\n    // ---------------------------------\n\n    notifyPointerdown: function notifyPointerdown(evt, x, y) {\n      CellView.prototype.pointerdown.call(this, evt, x, y);\n      this.notify('link:pointerdown', evt, x, y);\n    },\n    notifyPointermove: function notifyPointermove(evt, x, y) {\n      CellView.prototype.pointermove.call(this, evt, x, y);\n      this.notify('link:pointermove', evt, x, y);\n    },\n    notifyPointerup: function notifyPointerup(evt, x, y) {\n      this.notify('link:pointerup', evt, x, y);\n      CellView.prototype.pointerup.call(this, evt, x, y);\n    },\n    pointerdblclick: function (evt, x, y) {\n      CellView.prototype.pointerdblclick.apply(this, arguments);\n      this.notify('link:pointerdblclick', evt, x, y);\n    },\n    pointerclick: function (evt, x, y) {\n      CellView.prototype.pointerclick.apply(this, arguments);\n      this.notify('link:pointerclick', evt, x, y);\n    },\n    contextmenu: function (evt, x, y) {\n      CellView.prototype.contextmenu.apply(this, arguments);\n      this.notify('link:contextmenu', evt, x, y);\n    },\n    pointerdown: function (evt, x, y) {\n      this.notifyPointerdown(evt, x, y);\n\n      // Backwards compatibility for the default markup\n      var className = evt.target.getAttribute('class');\n      switch (className) {\n        case 'marker-vertex':\n          this.dragVertexStart(evt, x, y);\n          return;\n        case 'marker-vertex-remove':\n        case 'marker-vertex-remove-area':\n          this.dragVertexRemoveStart(evt, x, y);\n          return;\n        case 'marker-arrowhead':\n          this.dragArrowheadStart(evt, x, y);\n          return;\n        case 'connection':\n        case 'connection-wrap':\n          this.dragConnectionStart(evt, x, y);\n          return;\n        case 'marker-source':\n        case 'marker-target':\n          return;\n      }\n      this.dragStart(evt, x, y);\n    },\n    pointermove: function (evt, x, y) {\n      // Backwards compatibility\n      var dragData = this._dragData;\n      if (dragData) {\n        this.eventData(evt, dragData);\n      }\n      var data = this.eventData(evt);\n      switch (data.action) {\n        case 'vertex-move':\n          this.dragVertex(evt, x, y);\n          break;\n        case 'label-move':\n          this.dragLabel(evt, x, y);\n          break;\n        case 'arrowhead-move':\n          this.dragArrowhead(evt, x, y);\n          break;\n        case 'move':\n          this.drag(evt, x, y);\n          break;\n      }\n\n      // Backwards compatibility\n      if (dragData) {\n        assign(dragData, this.eventData(evt));\n      }\n      this.notifyPointermove(evt, x, y);\n    },\n    pointerup: function (evt, x, y) {\n      // Backwards compatibility\n      var dragData = this._dragData;\n      if (dragData) {\n        this.eventData(evt, dragData);\n        this._dragData = null;\n      }\n      var data = this.eventData(evt);\n      switch (data.action) {\n        case 'vertex-move':\n          this.dragVertexEnd(evt, x, y);\n          break;\n        case 'label-move':\n          this.dragLabelEnd(evt, x, y);\n          break;\n        case 'arrowhead-move':\n          this.dragArrowheadEnd(evt, x, y);\n          break;\n        case 'move':\n          this.dragEnd(evt, x, y);\n      }\n      this.notifyPointerup(evt, x, y);\n      this.checkMouseleave(evt);\n    },\n    mouseover: function (evt) {\n      CellView.prototype.mouseover.apply(this, arguments);\n      this.notify('link:mouseover', evt);\n    },\n    mouseout: function (evt) {\n      CellView.prototype.mouseout.apply(this, arguments);\n      this.notify('link:mouseout', evt);\n    },\n    mouseenter: function (evt) {\n      CellView.prototype.mouseenter.apply(this, arguments);\n      this.notify('link:mouseenter', evt);\n    },\n    mouseleave: function (evt) {\n      CellView.prototype.mouseleave.apply(this, arguments);\n      this.notify('link:mouseleave', evt);\n    },\n    mousewheel: function (evt, x, y, delta) {\n      CellView.prototype.mousewheel.apply(this, arguments);\n      this.notify('link:mousewheel', evt, x, y, delta);\n    },\n    onevent: function (evt, eventName, x, y) {\n      // Backwards compatibility\n      var linkTool = V(evt.target).findParentByClass('link-tool', this.el);\n      if (linkTool) {\n        // No further action to be executed\n        evt.stopPropagation();\n\n        // Allow `interactive.useLinkTools=false`\n        if (this.can('useLinkTools')) {\n          if (eventName === 'remove') {\n            // Built-in remove event\n            this.model.remove({\n              ui: true\n            });\n            // Do not trigger link pointerdown\n            return;\n          } else {\n            // link:options and other custom events inside the link tools\n            this.notify(eventName, evt, x, y);\n          }\n        }\n        this.notifyPointerdown(evt, x, y);\n        this.paper.delegateDragEvents(this, evt.data);\n      } else {\n        CellView.prototype.onevent.apply(this, arguments);\n      }\n    },\n    onlabel: function (evt, x, y) {\n      this.notifyPointerdown(evt, x, y);\n      this.dragLabelStart(evt, x, y);\n      var stopPropagation = this.eventData(evt).stopPropagation;\n      if (stopPropagation) {\n        evt.stopPropagation();\n      }\n    },\n    // Drag Start Handlers\n\n    dragConnectionStart: function (evt, x, y) {\n      if (!this.can('vertexAdd')) {\n        return;\n      }\n\n      // Store the index at which the new vertex has just been placed.\n      // We'll be update the very same vertex position in `pointermove()`.\n      var vertexIdx = this.addVertex({\n        x: x,\n        y: y\n      }, {\n        ui: true\n      });\n      this.eventData(evt, {\n        action: 'vertex-move',\n        vertexIdx: vertexIdx\n      });\n    },\n    dragLabelStart: function (evt, x, y) {\n      if (this.can('labelMove')) {\n        if (this.isDefaultInteractionPrevented(evt)) {\n          return;\n        }\n        var labelNode = evt.currentTarget;\n        var labelIdx = parseInt(labelNode.getAttribute('label-idx'), 10);\n        var defaultLabelPosition = this._getDefaultLabelPositionProperty();\n        var initialLabelPosition = this._normalizeLabelPosition(this._getLabelPositionProperty(labelIdx));\n        var position = this._mergeLabelPositionProperty(initialLabelPosition, defaultLabelPosition);\n        var coords = this.getLabelCoordinates(position);\n        var dx = coords.x - x; // how much needs to be added to cursor x to get to label x\n        var dy = coords.y - y; // how much needs to be added to cursor y to get to label y\n\n        var positionAngle = this._getLabelPositionAngle(labelIdx);\n        var labelPositionArgs = this._getLabelPositionArgs(labelIdx);\n        var defaultLabelPositionArgs = this._getDefaultLabelPositionArgs();\n        var positionArgs = this._mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n        this.eventData(evt, {\n          action: 'label-move',\n          labelIdx: labelIdx,\n          dx: dx,\n          dy: dy,\n          positionAngle: positionAngle,\n          positionArgs: positionArgs,\n          stopPropagation: true\n        });\n      } else {\n        // Backwards compatibility:\n        // If labels can't be dragged no default action is triggered.\n        this.eventData(evt, {\n          stopPropagation: true\n        });\n      }\n      this.paper.delegateDragEvents(this, evt.data);\n    },\n    dragVertexStart: function (evt, x, y) {\n      if (!this.can('vertexMove')) {\n        return;\n      }\n      var vertexNode = evt.target;\n      var vertexIdx = parseInt(vertexNode.getAttribute('idx'), 10);\n      this.eventData(evt, {\n        action: 'vertex-move',\n        vertexIdx: vertexIdx\n      });\n    },\n    dragVertexRemoveStart: function (evt, x, y) {\n      if (!this.can('vertexRemove')) {\n        return;\n      }\n      var removeNode = evt.target;\n      var vertexIdx = parseInt(removeNode.getAttribute('idx'), 10);\n      this.model.removeVertex(vertexIdx);\n    },\n    dragArrowheadStart: function (evt, x, y) {\n      if (!this.can('arrowheadMove')) {\n        return;\n      }\n      var arrowheadNode = evt.target;\n      var arrowheadType = arrowheadNode.getAttribute('end');\n      var data = this.startArrowheadMove(arrowheadType, {\n        ignoreBackwardsCompatibility: true\n      });\n      this.eventData(evt, data);\n    },\n    dragStart: function (evt, x, y) {\n      if (this.isDefaultInteractionPrevented(evt)) {\n        return;\n      }\n      if (!this.can('linkMove')) {\n        return;\n      }\n      this.eventData(evt, {\n        action: 'move',\n        dx: x,\n        dy: y\n      });\n    },\n    // Drag Handlers\n    dragLabel: function (evt, x, y) {\n      var data = this.eventData(evt);\n      var label = {\n        position: this.getLabelPosition(x + data.dx, y + data.dy, data.positionAngle, data.positionArgs)\n      };\n      if (this.paper.options.snapLabels) {\n        delete label.position.offset;\n      }\n      // The `touchmove' events are not fired\n      // when the original event target is removed from the DOM.\n      // The labels are currently re-rendered completely when only\n      // the position changes. This is why we need to make sure that\n      // the label is updated synchronously.\n      // TODO: replace `touchmove` with `pointermove` (breaking change).\n      var setOptions = {\n        ui: true\n      };\n      if (this.paper.isAsync() && evt.type === 'touchmove') {\n        setOptions.async = false;\n      }\n      this.model.label(data.labelIdx, label, setOptions);\n    },\n    dragVertex: function (evt, x, y) {\n      var data = this.eventData(evt);\n      this.model.vertex(data.vertexIdx, {\n        x: x,\n        y: y\n      }, {\n        ui: true\n      });\n    },\n    dragArrowhead: function (evt, x, y) {\n      if (this.paper.options.snapLinks) {\n        var isSnapped = this._snapArrowhead(evt, x, y);\n        if (!isSnapped && this.paper.options.snapLinksSelf) {\n          this._snapArrowheadSelf(evt, x, y);\n        }\n      } else {\n        if (this.paper.options.snapLinksSelf) {\n          this._snapArrowheadSelf(evt, x, y);\n        } else {\n          this._connectArrowhead(this.getEventTarget(evt), x, y, this.eventData(evt));\n        }\n      }\n    },\n    drag: function (evt, x, y) {\n      var data = this.eventData(evt);\n      this.model.translate(x - data.dx, y - data.dy, {\n        ui: true\n      });\n      this.eventData(evt, {\n        dx: x,\n        dy: y\n      });\n    },\n    // Drag End Handlers\n\n    dragLabelEnd: function () {\n      // noop\n    },\n    dragVertexEnd: function () {\n      // noop\n    },\n    dragArrowheadEnd: function (evt, x, y) {\n      var data = this.eventData(evt);\n      var paper = this.paper;\n      if (paper.options.snapLinks) {\n        this._snapArrowheadEnd(data);\n      } else {\n        this._connectArrowheadEnd(data, x, y);\n      }\n      if (!paper.linkAllowed(this)) {\n        // If the changed link is not allowed, revert to its previous state.\n        this._disallow(data);\n      } else {\n        this._finishEmbedding(data);\n        this._notifyConnectEvent(data, evt);\n      }\n      this._afterArrowheadMove(data);\n    },\n    dragEnd: function () {\n      // noop\n    },\n    _disallow: function (data) {\n      switch (data.whenNotAllowed) {\n        case 'remove':\n          this.model.remove({\n            ui: true\n          });\n          break;\n        case 'revert':\n        default:\n          this.model.set(data.arrowhead, data.initialEnd, {\n            ui: true\n          });\n          break;\n      }\n    },\n    _finishEmbedding: function (data) {\n      // Reparent the link if embedding is enabled\n      if (this.paper.options.embeddingMode && this.model.reparent()) {\n        // Make sure we don't reverse to the original 'z' index (see afterArrowheadMove()).\n        data.z = null;\n      }\n    },\n    _notifyConnectEvent: function (data, evt) {\n      var arrowhead = data.arrowhead;\n      var initialEnd = data.initialEnd;\n      var currentEnd = this.model.prop(arrowhead);\n      var endChanged = currentEnd && !Link.endsEqual(initialEnd, currentEnd);\n      if (endChanged) {\n        var paper = this.paper;\n        if (initialEnd.id) {\n          this.notify('link:disconnect', evt, paper.findViewByModel(initialEnd.id), data.initialMagnet, arrowhead);\n        }\n        if (currentEnd.id) {\n          this.notify('link:connect', evt, paper.findViewByModel(currentEnd.id), data.magnetUnderPointer, arrowhead);\n        }\n      }\n    },\n    _snapToPoints: function (snapPoint, points, radius) {\n      var closestPointX = null;\n      var closestDistanceX = Infinity;\n      var closestPointY = null;\n      var closestDistanceY = Infinity;\n      var x = snapPoint.x;\n      var y = snapPoint.y;\n      for (var i = 0; i < points.length; i++) {\n        var distX = Math.abs(points[i].x - snapPoint.x);\n        if (distX < closestDistanceX) {\n          closestDistanceX = distX;\n          closestPointX = points[i];\n        }\n        var distY = Math.abs(points[i].y - snapPoint.y);\n        if (distY < closestDistanceY) {\n          closestDistanceY = distY;\n          closestPointY = points[i];\n        }\n      }\n      if (closestDistanceX < radius) {\n        x = closestPointX.x;\n      }\n      if (closestDistanceY < radius) {\n        y = closestPointY.y;\n      }\n      return {\n        x: x,\n        y: y\n      };\n    },\n    _snapArrowheadSelf: function (evt, x, y) {\n      var ref = this;\n      var paper = ref.paper;\n      var model = ref.model;\n      var ref$1 = paper.options;\n      var snapLinksSelf = ref$1.snapLinksSelf;\n      var data = this.eventData(evt);\n      var radius = snapLinksSelf.radius || 20;\n      var anchor = this.getEndAnchor(data.arrowhead === 'source' ? 'target' : 'source');\n      var vertices = model.vertices();\n      var points = [anchor].concat(vertices);\n      var snapPoint = this._snapToPoints({\n        x: x,\n        y: y\n      }, points, radius);\n      var point = paper.localToClientPoint(snapPoint);\n      this._connectArrowhead(document.elementFromPoint(point.x, point.y), snapPoint.x, snapPoint.y, this.eventData(evt));\n    },\n    _snapArrowhead: function (evt, x, y) {\n      var ref = this;\n      var paper = ref.paper;\n      var ref$1 = paper.options;\n      var snapLinks = ref$1.snapLinks;\n      var connectionStrategy = ref$1.connectionStrategy;\n      var data = this.eventData(evt);\n      var isSnapped = false;\n      // checking view in close area of the pointer\n\n      var r = snapLinks.radius || 50;\n      var viewsInArea = paper.findViewsInArea({\n        x: x - r,\n        y: y - r,\n        width: 2 * r,\n        height: 2 * r\n      });\n      var prevClosestView = data.closestView || null;\n      var prevClosestMagnet = data.closestMagnet || null;\n      var prevMagnetProxy = data.magnetProxy || null;\n      data.closestView = data.closestMagnet = data.magnetProxy = null;\n      var minDistance = Number.MAX_VALUE;\n      var pointer = new Point(x, y);\n      viewsInArea.forEach(function (view) {\n        var candidates = [];\n        // skip connecting to the element in case '.': { magnet: false } attribute present\n        if (view.el.getAttribute('magnet') !== 'false') {\n          candidates.push({\n            bbox: view.model.getBBox(),\n            magnet: view.el\n          });\n        }\n        view.$('[magnet]').toArray().forEach(function (magnet) {\n          candidates.push({\n            bbox: view.getNodeBBox(magnet),\n            magnet: magnet\n          });\n        });\n        candidates.forEach(function (candidate) {\n          var magnet = candidate.magnet;\n          var bbox = candidate.bbox;\n          // find distance from the center of the model to pointer coordinates\n          var distance = bbox.center().squaredDistance(pointer);\n          // the connection is looked up in a circle area by `distance < r`\n          if (distance < minDistance) {\n            var isAlreadyValidated = prevClosestMagnet === magnet;\n            if (isAlreadyValidated || paper.options.validateConnection.apply(paper, data.validateConnectionArgs(view, view.el === magnet ? null : magnet))) {\n              minDistance = distance;\n              data.closestView = view;\n              data.closestMagnet = magnet;\n            }\n          }\n        });\n      }, this);\n      var end;\n      var magnetProxy = null;\n      var closestView = data.closestView;\n      var closestMagnet = data.closestMagnet;\n      if (closestMagnet) {\n        magnetProxy = data.magnetProxy = closestView.findProxyNode(closestMagnet, 'highlighter');\n      }\n      var endType = data.arrowhead;\n      var newClosestMagnet = prevClosestMagnet !== closestMagnet;\n      if (prevClosestView && newClosestMagnet) {\n        prevClosestView.unhighlight(prevMagnetProxy, {\n          connecting: true,\n          snapping: true\n        });\n      }\n      if (closestView) {\n        var prevEnd = data.prevEnd;\n        var prevX = data.prevX;\n        var prevY = data.prevY;\n        data.prevX = x;\n        data.prevY = y;\n        isSnapped = true;\n        if (!newClosestMagnet) {\n          if (typeof connectionStrategy !== 'function' || prevX === x && prevY === y) {\n            // the magnet has not changed and the link's end does not depend on the x and y\n            return isSnapped;\n          }\n        }\n        end = closestView.getLinkEnd(closestMagnet, x, y, this.model, endType);\n        if (!newClosestMagnet && isEqual(prevEnd, end)) {\n          // the source/target json has not changed\n          return isSnapped;\n        }\n        data.prevEnd = end;\n        if (newClosestMagnet) {\n          closestView.highlight(magnetProxy, {\n            connecting: true,\n            snapping: true\n          });\n        }\n      } else {\n        end = {\n          x: x,\n          y: y\n        };\n      }\n      this.model.set(endType, end || {\n        x: x,\n        y: y\n      }, {\n        ui: true\n      });\n      if (prevClosestView) {\n        this.notify('link:snap:disconnect', evt, prevClosestView, prevClosestMagnet, endType);\n      }\n      if (closestView) {\n        this.notify('link:snap:connect', evt, closestView, closestMagnet, endType);\n      }\n      return isSnapped;\n    },\n    _snapArrowheadEnd: function (data) {\n      // Finish off link snapping.\n      // Everything except view unhighlighting was already done on pointermove.\n      var closestView = data.closestView;\n      var closestMagnet = data.closestMagnet;\n      if (closestView && closestMagnet) {\n        closestView.unhighlight(data.magnetProxy, {\n          connecting: true,\n          snapping: true\n        });\n        data.magnetUnderPointer = closestView.findMagnet(closestMagnet);\n      }\n      data.closestView = data.closestMagnet = null;\n    },\n    _connectArrowhead: function (target, x, y, data) {\n      // checking views right under the pointer\n      var ref = this;\n      var paper = ref.paper;\n      var model = ref.model;\n      if (data.eventTarget !== target) {\n        // Unhighlight the previous view under pointer if there was one.\n        if (data.magnetProxy) {\n          data.viewUnderPointer.unhighlight(data.magnetProxy, {\n            connecting: true\n          });\n        }\n        var viewUnderPointer = data.viewUnderPointer = paper.findView(target);\n        if (viewUnderPointer) {\n          // If we found a view that is under the pointer, we need to find the closest\n          // magnet based on the real target element of the event.\n          var magnetUnderPointer = data.magnetUnderPointer = viewUnderPointer.findMagnet(target);\n          var magnetProxy = data.magnetProxy = viewUnderPointer.findProxyNode(magnetUnderPointer, 'highlighter');\n          if (magnetUnderPointer && this.paper.options.validateConnection.apply(paper, data.validateConnectionArgs(viewUnderPointer, magnetUnderPointer))) {\n            // If there was no magnet found, do not highlight anything and assume there\n            // is no view under pointer we're interested in reconnecting to.\n            // This can only happen if the overall element has the attribute `'.': { magnet: false }`.\n            if (magnetProxy) {\n              viewUnderPointer.highlight(magnetProxy, {\n                connecting: true\n              });\n            }\n          } else {\n            // This type of connection is not valid. Disregard this magnet.\n            data.magnetUnderPointer = null;\n            data.magnetProxy = null;\n          }\n        } else {\n          // Make sure we'll unset previous magnet.\n          data.magnetUnderPointer = null;\n          data.magnetProxy = null;\n        }\n      }\n      data.eventTarget = target;\n      model.set(data.arrowhead, {\n        x: x,\n        y: y\n      }, {\n        ui: true\n      });\n    },\n    _connectArrowheadEnd: function (data, x, y) {\n      if (data === void 0) data = {};\n      var ref = this;\n      var model = ref.model;\n      var viewUnderPointer = data.viewUnderPointer;\n      var magnetUnderPointer = data.magnetUnderPointer;\n      var magnetProxy = data.magnetProxy;\n      var arrowhead = data.arrowhead;\n      if (!magnetUnderPointer || !magnetProxy || !viewUnderPointer) {\n        return;\n      }\n      viewUnderPointer.unhighlight(magnetProxy, {\n        connecting: true\n      });\n\n      // The link end is taken from the magnet under the pointer, not the proxy.\n      var end = viewUnderPointer.getLinkEnd(magnetUnderPointer, x, y, model, arrowhead);\n      model.set(arrowhead, end, {\n        ui: true\n      });\n    },\n    _beforeArrowheadMove: function (data) {\n      data.z = this.model.get('z');\n      this.model.toFront();\n\n      // Let the pointer propagate through the link view elements so that\n      // the `evt.target` is another element under the pointer, not the link itself.\n      var style = this.el.style;\n      data.pointerEvents = style.pointerEvents;\n      style.pointerEvents = 'none';\n      if (this.paper.options.markAvailable) {\n        this._markAvailableMagnets(data);\n      }\n    },\n    _afterArrowheadMove: function (data) {\n      if (data.z !== null) {\n        this.model.set('z', data.z, {\n          ui: true\n        });\n        data.z = null;\n      }\n\n      // Put `pointer-events` back to its original value. See `_beforeArrowheadMove()` for explanation.\n      this.el.style.pointerEvents = data.pointerEvents;\n      if (this.paper.options.markAvailable) {\n        this._unmarkAvailableMagnets(data);\n      }\n    },\n    _createValidateConnectionArgs: function (arrowhead) {\n      // It makes sure the arguments for validateConnection have the following form:\n      // (source view, source magnet, target view, target magnet and link view)\n      var args = [];\n      args[4] = arrowhead;\n      args[5] = this;\n      var oppositeArrowhead;\n      var i = 0;\n      var j = 0;\n      if (arrowhead === 'source') {\n        i = 2;\n        oppositeArrowhead = 'target';\n      } else {\n        j = 2;\n        oppositeArrowhead = 'source';\n      }\n      var end = this.model.get(oppositeArrowhead);\n      if (end.id) {\n        var view = args[i] = this.paper.findViewByModel(end.id);\n        var magnet = view.getMagnetFromLinkEnd(end);\n        if (magnet === view.el) {\n          magnet = undefined;\n        }\n        args[i + 1] = magnet;\n      }\n      function validateConnectionArgs(cellView, magnet) {\n        args[j] = cellView;\n        args[j + 1] = cellView.el === magnet ? undefined : magnet;\n        return args;\n      }\n      return validateConnectionArgs;\n    },\n    _markAvailableMagnets: function (data) {\n      function isMagnetAvailable(view, magnet) {\n        var paper = view.paper;\n        var validate = paper.options.validateConnection;\n        return validate.apply(paper, this.validateConnectionArgs(view, magnet));\n      }\n      var paper = this.paper;\n      var elements = paper.model.getCells();\n      data.marked = {};\n      for (var i = 0, n = elements.length; i < n; i++) {\n        var view = elements[i].findView(paper);\n        if (!view) {\n          continue;\n        }\n        var magnets = Array.prototype.slice.call(view.el.querySelectorAll('[magnet]'));\n        if (view.el.getAttribute('magnet') !== 'false') {\n          // Element wrapping group is also a magnet\n          magnets.push(view.el);\n        }\n        var availableMagnets = magnets.filter(isMagnetAvailable.bind(data, view));\n        if (availableMagnets.length > 0) {\n          // highlight all available magnets\n          for (var j = 0, m = availableMagnets.length; j < m; j++) {\n            view.highlight(availableMagnets[j], {\n              magnetAvailability: true\n            });\n          }\n          // highlight the entire view\n          view.highlight(null, {\n            elementAvailability: true\n          });\n          data.marked[view.model.id] = availableMagnets;\n        }\n      }\n    },\n    _unmarkAvailableMagnets: function (data) {\n      var markedKeys = Object.keys(data.marked);\n      var id;\n      var markedMagnets;\n      for (var i = 0, n = markedKeys.length; i < n; i++) {\n        id = markedKeys[i];\n        markedMagnets = data.marked[id];\n        var view = this.paper.findViewByModel(id);\n        if (view) {\n          for (var j = 0, m = markedMagnets.length; j < m; j++) {\n            view.unhighlight(markedMagnets[j], {\n              magnetAvailability: true\n            });\n          }\n          view.unhighlight(null, {\n            elementAvailability: true\n          });\n        }\n      }\n      data.marked = null;\n    },\n    startArrowheadMove: function (end, opt) {\n      opt || (opt = {});\n\n      // Allow to delegate events from an another view to this linkView in order to trigger arrowhead\n      // move without need to click on the actual arrowhead dom element.\n      var data = {\n        action: 'arrowhead-move',\n        arrowhead: end,\n        whenNotAllowed: opt.whenNotAllowed || 'revert',\n        initialMagnet: this[end + 'Magnet'] || (this[end + 'View'] ? this[end + 'View'].el : null),\n        initialEnd: clone(this.model.get(end)),\n        validateConnectionArgs: this._createValidateConnectionArgs(end)\n      };\n      this._beforeArrowheadMove(data);\n      if (opt.ignoreBackwardsCompatibility !== true) {\n        this._dragData = data;\n      }\n      return data;\n    },\n    // Lifecycle methods\n\n    onMount: function () {\n      CellView.prototype.onMount.apply(this, arguments);\n      this.mountLabels();\n    },\n    onDetach: function () {\n      CellView.prototype.onDetach.apply(this, arguments);\n      this.unmountLabels();\n    },\n    onRemove: function () {\n      CellView.prototype.onRemove.apply(this, arguments);\n      this.unmountLabels();\n    }\n  }, {\n    Flags: Flags$2\n  });\n  Object.defineProperty(LinkView.prototype, 'sourceBBox', {\n    enumerable: true,\n    get: function () {\n      var sourceView = this.sourceView;\n      if (!sourceView) {\n        var sourceDef = this.model.source();\n        return new Rect(sourceDef.x, sourceDef.y);\n      }\n      var sourceMagnet = this.sourceMagnet;\n      if (sourceView.isNodeConnection(sourceMagnet)) {\n        return new Rect(this.sourceAnchor);\n      }\n      return sourceView.getNodeBBox(sourceMagnet || sourceView.el);\n    }\n  });\n  Object.defineProperty(LinkView.prototype, 'targetBBox', {\n    enumerable: true,\n    get: function () {\n      var targetView = this.targetView;\n      if (!targetView) {\n        var targetDef = this.model.target();\n        return new Rect(targetDef.x, targetDef.y);\n      }\n      var targetMagnet = this.targetMagnet;\n      if (targetView.isNodeConnection(targetMagnet)) {\n        return new Rect(this.targetAnchor);\n      }\n      return targetView.getNodeBBox(targetMagnet || targetView.el);\n    }\n  });\n  var stroke = HighlighterView.extend({\n    tagName: 'path',\n    className: 'highlight-stroke',\n    attributes: {\n      'pointer-events': 'none',\n      'vector-effect': 'non-scaling-stroke',\n      'fill': 'none'\n    },\n    options: {\n      padding: 3,\n      rx: 0,\n      ry: 0,\n      useFirstSubpath: false,\n      attrs: {\n        'stroke-width': 3,\n        'stroke': '#FEB663'\n      }\n    },\n    getPathData: function getPathData(cellView, node) {\n      var ref = this;\n      var options = ref.options;\n      var useFirstSubpath = options.useFirstSubpath;\n      var d;\n      try {\n        var vNode = V(node);\n        d = vNode.convertToPathData().trim();\n        if (vNode.tagName() === 'PATH' && useFirstSubpath) {\n          var secondSubpathIndex = d.search(/.M/i) + 1;\n          if (secondSubpathIndex > 0) {\n            d = d.substr(0, secondSubpathIndex);\n          }\n        }\n      } catch (error) {\n        // Failed to get path data from magnet element.\n        // Draw a rectangle around the node instead.\n        var nodeBBox = cellView.getNodeBoundingRect(node);\n        d = V.rectToPath(assign({}, options, nodeBBox.toJSON()));\n      }\n      return d;\n    },\n    highlightConnection: function highlightConnection(cellView) {\n      this.vel.attr('d', cellView.getSerializedConnection());\n    },\n    highlightNode: function highlightNode(cellView, node) {\n      var ref = this;\n      var vel = ref.vel;\n      var options = ref.options;\n      var padding = options.padding;\n      var layer = options.layer;\n      var highlightMatrix = this.getNodeMatrix(cellView, node);\n      // Add padding to the highlight element.\n      if (padding) {\n        if (!layer && node === cellView.el) {\n          // If the highlighter is appended to the cellView\n          // and we measure the size of the cellView wrapping group\n          // it's necessary to remove the highlighter first\n          vel.remove();\n        }\n        var nodeBBox = cellView.getNodeBoundingRect(node);\n        var cx = nodeBBox.x + nodeBBox.width / 2;\n        var cy = nodeBBox.y + nodeBBox.height / 2;\n        nodeBBox = V.transformRect(nodeBBox, highlightMatrix);\n        var width = Math.max(nodeBBox.width, 1);\n        var height = Math.max(nodeBBox.height, 1);\n        var sx = (width + padding) / width;\n        var sy = (height + padding) / height;\n        var paddingMatrix = V.createSVGMatrix({\n          a: sx,\n          b: 0,\n          c: 0,\n          d: sy,\n          e: cx - sx * cx,\n          f: cy - sy * cy\n        });\n        highlightMatrix = highlightMatrix.multiply(paddingMatrix);\n      }\n      vel.attr({\n        'd': this.getPathData(cellView, node),\n        'transform': V.matrixToTransformString(highlightMatrix)\n      });\n    },\n    highlight: function highlight(cellView, node) {\n      var ref = this;\n      var vel = ref.vel;\n      var options = ref.options;\n      vel.attr(options.attrs);\n      if (cellView.isNodeConnection(node)) {\n        this.highlightConnection(cellView);\n      } else {\n        this.highlightNode(cellView, node);\n      }\n    }\n  });\n  var MASK_CLIP = 20;\n  function forEachDescendant(vel, fn) {\n    var descendants = vel.children();\n    while (descendants.length > 0) {\n      var descendant = descendants.shift();\n      if (fn(descendant)) {\n        descendants.push.apply(descendants, descendant.children());\n      }\n    }\n  }\n  var mask = HighlighterView.extend({\n    tagName: 'rect',\n    className: 'highlight-mask',\n    attributes: {\n      'pointer-events': 'none'\n    },\n    options: {\n      padding: 3,\n      maskClip: MASK_CLIP,\n      deep: false,\n      attrs: {\n        'stroke': '#FEB663',\n        'stroke-width': 3,\n        'stroke-linecap': 'butt',\n        'stroke-linejoin': 'miter'\n      }\n    },\n    VISIBLE: 'white',\n    INVISIBLE: 'black',\n    MASK_ROOT_ATTRIBUTE_BLACKLIST: ['marker-start', 'marker-end', 'marker-mid', 'transform', 'stroke-dasharray', 'class'],\n    MASK_CHILD_ATTRIBUTE_BLACKLIST: ['stroke', 'fill', 'stroke-width', 'stroke-opacity', 'stroke-dasharray', 'fill-opacity', 'marker-start', 'marker-end', 'marker-mid', 'class'],\n    // TODO: change the list to a function callback\n    MASK_REPLACE_TAGS: ['FOREIGNOBJECT', 'IMAGE', 'USE', 'TEXT', 'TSPAN', 'TEXTPATH'],\n    // TODO: change the list to a function callback\n    MASK_REMOVE_TAGS: ['TEXT', 'TSPAN', 'TEXTPATH'],\n    transformMaskChild: function transformMaskChild(cellView, childEl) {\n      var ref = this;\n      var MASK_CHILD_ATTRIBUTE_BLACKLIST = ref.MASK_CHILD_ATTRIBUTE_BLACKLIST;\n      var MASK_REPLACE_TAGS = ref.MASK_REPLACE_TAGS;\n      var MASK_REMOVE_TAGS = ref.MASK_REMOVE_TAGS;\n      var childTagName = childEl.tagName();\n      // Do not include the element in the mask's image\n      if (!V.isSVGGraphicsElement(childEl) || MASK_REMOVE_TAGS.includes(childTagName)) {\n        childEl.remove();\n        return false;\n      }\n      // Replace the element with a rectangle\n      if (MASK_REPLACE_TAGS.includes(childTagName)) {\n        // Note: clone() method does not change the children ids\n        var originalChild = cellView.vel.findOne(\"#\" + childEl.id);\n        if (originalChild) {\n          var originalNode = originalChild.node;\n          var childBBox = cellView.getNodeBoundingRect(originalNode);\n          if (cellView.model.isElement()) {\n            childBBox = V.transformRect(childBBox, cellView.getNodeMatrix(originalNode));\n          }\n          var replacement = V('rect', childBBox.toJSON());\n          var ref$1 = childBBox.center();\n          var ox = ref$1.x;\n          var oy = ref$1.y;\n          var ref$2 = originalChild.rotate();\n          var angle = ref$2.angle;\n          var cx = ref$2.cx;\n          if (cx === void 0) cx = ox;\n          var cy = ref$2.cy;\n          if (cy === void 0) cy = oy;\n          if (angle) {\n            replacement.rotate(angle, cx, cy);\n          }\n          // Note: it's not important to keep the same sibling index since all subnodes are filled\n          childEl.parent().append(replacement);\n        }\n        childEl.remove();\n        return false;\n      }\n      // Keep the element, but clean it from certain attributes\n      MASK_CHILD_ATTRIBUTE_BLACKLIST.forEach(function (attrName) {\n        if (attrName === 'fill' && childEl.attr('fill') === 'none') {\n          return;\n        }\n        childEl.removeAttr(attrName);\n      });\n      return true;\n    },\n    transformMaskRoot: function transformMaskRoot(_cellView, rootEl) {\n      var ref = this;\n      var MASK_ROOT_ATTRIBUTE_BLACKLIST = ref.MASK_ROOT_ATTRIBUTE_BLACKLIST;\n      MASK_ROOT_ATTRIBUTE_BLACKLIST.forEach(function (attrName) {\n        rootEl.removeAttr(attrName);\n      });\n    },\n    getMaskShape: function getMaskShape(cellView, vel) {\n      var this$1 = this;\n      var ref = this;\n      var options = ref.options;\n      var MASK_REPLACE_TAGS = ref.MASK_REPLACE_TAGS;\n      var deep = options.deep;\n      var tagName = vel.tagName();\n      var maskRoot;\n      if (tagName === 'G') {\n        if (!deep) {\n          return null;\n        }\n        maskRoot = vel.clone();\n        forEachDescendant(maskRoot, function (maskChild) {\n          return this$1.transformMaskChild(cellView, maskChild);\n        });\n      } else {\n        if (MASK_REPLACE_TAGS.includes(tagName)) {\n          return null;\n        }\n        maskRoot = vel.clone();\n      }\n      this.transformMaskRoot(cellView, maskRoot);\n      return maskRoot;\n    },\n    getMaskId: function getMaskId() {\n      return \"highlight-mask-\" + this.cid;\n    },\n    getMask: function getMask(cellView, vNode) {\n      var ref = this;\n      var VISIBLE = ref.VISIBLE;\n      var INVISIBLE = ref.INVISIBLE;\n      var options = ref.options;\n      var padding = options.padding;\n      var attrs = options.attrs;\n      var strokeWidth = 'stroke-width' in attrs ? attrs['stroke-width'] : 1;\n      var hasNodeFill = vNode.attr('fill') !== 'none';\n      var magnetStrokeWidth = parseFloat(vNode.attr('stroke-width'));\n      if (isNaN(magnetStrokeWidth)) {\n        magnetStrokeWidth = 1;\n      }\n      // stroke of the invisible shape\n      var minStrokeWidth = magnetStrokeWidth + padding * 2;\n      // stroke of the visible shape\n      var maxStrokeWidth = minStrokeWidth + strokeWidth * 2;\n      var maskEl = this.getMaskShape(cellView, vNode);\n      if (!maskEl) {\n        var nodeBBox = cellView.getNodeBoundingRect(vNode.node);\n        // Make sure the rect is visible\n        nodeBBox.inflate(nodeBBox.width ? 0 : 0.5, nodeBBox.height ? 0 : 0.5);\n        maskEl = V('rect', nodeBBox.toJSON());\n      }\n      maskEl.attr(attrs);\n      return V('mask', {\n        'id': this.getMaskId()\n      }).append([maskEl.clone().attr({\n        'fill': hasNodeFill ? VISIBLE : 'none',\n        'stroke': VISIBLE,\n        'stroke-width': maxStrokeWidth\n      }), maskEl.clone().attr({\n        'fill': hasNodeFill ? INVISIBLE : 'none',\n        'stroke': INVISIBLE,\n        'stroke-width': minStrokeWidth\n      })]);\n    },\n    removeMask: function removeMask(paper) {\n      var maskNode = paper.svg.getElementById(this.getMaskId());\n      if (maskNode) {\n        paper.defs.removeChild(maskNode);\n      }\n    },\n    addMask: function addMask(paper, maskEl) {\n      paper.defs.appendChild(maskEl.node);\n    },\n    highlight: function highlight(cellView, node) {\n      var ref = this;\n      var options = ref.options;\n      var vel = ref.vel;\n      var padding = options.padding;\n      var attrs = options.attrs;\n      var maskClip = options.maskClip;\n      if (maskClip === void 0) maskClip = MASK_CLIP;\n      var layer = options.layer;\n      var color = 'stroke' in attrs ? attrs['stroke'] : '#000000';\n      if (!layer && node === cellView.el) {\n        // If the highlighter is appended to the cellView\n        // and we measure the size of the cellView wrapping group\n        // it's necessary to remove the highlighter first\n        vel.remove();\n      }\n      var highlighterBBox = cellView.getNodeBoundingRect(node).inflate(padding + maskClip);\n      var highlightMatrix = this.getNodeMatrix(cellView, node);\n      var maskEl = this.getMask(cellView, V(node));\n      this.addMask(cellView.paper, maskEl);\n      vel.attr(highlighterBBox.toJSON());\n      vel.attr({\n        'transform': V.matrixToTransformString(highlightMatrix),\n        'mask': \"url(#\" + maskEl.id + \")\",\n        'fill': color\n      });\n    },\n    unhighlight: function unhighlight(cellView) {\n      this.removeMask(cellView.paper);\n    }\n  });\n  var opacity = HighlighterView.extend({\n    UPDATABLE: false,\n    MOUNTABLE: false,\n    opacityClassName: addClassNamePrefix('highlight-opacity'),\n    highlight: function (_cellView, node) {\n      V(node).addClass(this.opacityClassName);\n    },\n    unhighlight: function (_cellView, node) {\n      V(node).removeClass(this.opacityClassName);\n    }\n  });\n  var className = addClassNamePrefix('highlighted');\n  var addClass = HighlighterView.extend({\n    UPDATABLE: false,\n    MOUNTABLE: false,\n    options: {\n      className: className\n    },\n    highlight: function (_cellView, node) {\n      V(node).addClass(this.options.className);\n    },\n    unhighlight: function (_cellView, node) {\n      V(node).removeClass(this.options.className);\n    }\n  }, {\n    // Backwards Compatibility\n    className: className\n  });\n  var Directions$2 = {\n    ROW: 'row',\n    COLUMN: 'column'\n  };\n  var list = HighlighterView.extend({\n    tagName: 'g',\n    MOUNTABLE: true,\n    UPDATE_ATTRIBUTES: function () {\n      return [this.options.attribute];\n    },\n    _prevItems: null,\n    highlight: function highlight(elementView, node) {\n      var this$1 = this;\n      var element = elementView.model;\n      var ref = this.options;\n      var attribute = ref.attribute;\n      var size = ref.size;\n      if (size === void 0) size = 20;\n      var gap = ref.gap;\n      if (gap === void 0) gap = 5;\n      var direction = ref.direction;\n      if (direction === void 0) direction = Directions$2.ROW;\n      if (!attribute) {\n        throw new Error('List: attribute is required');\n      }\n      var normalizedSize = typeof size === 'number' ? {\n        width: size,\n        height: size\n      } : size;\n      var isRowDirection = direction === Directions$2.ROW;\n      var itemWidth = isRowDirection ? normalizedSize.width : normalizedSize.height;\n      var items = element.get(attribute);\n      if (!Array.isArray(items)) {\n        items = [];\n      }\n      var prevItems = this._prevItems || [];\n      var comparison = items.map(function (item, index) {\n        return isEqual(prevItems[index], items[index]);\n      });\n      if (prevItems.length !== items.length || comparison.some(function (unchanged) {\n        return !unchanged;\n      })) {\n        var prevEls = this.vel.children();\n        var itemsEls = items.map(function (item, index) {\n          var prevEl = index in prevEls ? prevEls[index].node : null;\n          if (comparison[index]) {\n            return prevEl;\n          }\n          var itemEl = this$1.createListItem(item, normalizedSize, prevEl);\n          if (!itemEl) {\n            return null;\n          }\n          if (!(itemEl instanceof SVGElement)) {\n            throw new Error('List: item must be an SVGElement');\n          }\n          itemEl.dataset.index = index;\n          itemEl.dataset.attribute = attribute;\n          var offset = index * (itemWidth + gap);\n          itemEl.setAttribute('transform', isRowDirection ? \"translate(\" + offset + \", 0)\" : \"translate(0, \" + offset + \")\");\n          return itemEl;\n        });\n        this.vel.empty().append(itemsEls);\n        this._prevItems = items;\n      }\n      var itemsCount = items.length;\n      var length = itemsCount === 0 ? 0 : itemsCount * itemWidth + (itemsCount - 1) * gap;\n      var listSize = isRowDirection ? {\n        width: length,\n        height: normalizedSize.height\n      } : {\n        width: normalizedSize.width,\n        height: length\n      };\n      this.position(element, listSize);\n    },\n    position: function position(element, listSize) {\n      var ref = this;\n      var vel = ref.vel;\n      var options = ref.options;\n      var margin = options.margin;\n      if (margin === void 0) margin = 5;\n      var position = options.position;\n      if (position === void 0) position = 'top-left';\n      var ref$1 = element.size();\n      var width = ref$1.width;\n      var height = ref$1.height;\n      var ref$2 = normalizeSides(margin);\n      var left = ref$2.left;\n      var right = ref$2.right;\n      var top = ref$2.top;\n      var bottom = ref$2.bottom;\n      var bbox = new Rect(left, top, width - (left + right), height - (top + bottom));\n      var ref$3 = getRectPoint(bbox, position);\n      var x = ref$3.x;\n      var y = ref$3.y;\n      // x\n      switch (position) {\n        case Positions.CENTER:\n        case Positions.TOP:\n        case Positions.BOTTOM:\n          {\n            x -= listSize.width / 2;\n            break;\n          }\n        case Positions.RIGHT:\n        case Positions.BOTTOM_RIGHT:\n        case Positions.TOP_RIGHT:\n          {\n            x -= listSize.width;\n            break;\n          }\n      }\n      // y\n      switch (position) {\n        case Positions.CENTER:\n        case Positions.RIGHT:\n        case Positions.LEFT:\n          {\n            y -= listSize.height / 2;\n            break;\n          }\n        case Positions.BOTTOM:\n        case Positions.BOTTOM_RIGHT:\n        case Positions.BOTTOM_LEFT:\n          {\n            y -= listSize.height;\n            break;\n          }\n      }\n      vel.attr('transform', \"translate(\" + x + \", \" + y + \")\");\n    }\n  }, {\n    Directions: Directions$2,\n    Positions: Positions\n  });\n  var highlighters = {\n    stroke: stroke,\n    mask: mask,\n    opacity: opacity,\n    addClass: addClass,\n    list: list\n  };\n  function connectionRatio(view, _magnet, _refPoint, opt) {\n    var ratio = 'ratio' in opt ? opt.ratio : 0.5;\n    return view.getPointAtRatio(ratio);\n  }\n  function connectionLength(view, _magnet, _refPoint, opt) {\n    var length = 'length' in opt ? opt.length : 20;\n    return view.getPointAtLength(length);\n  }\n  function _connectionPerpendicular(view, _magnet, refPoint, opt) {\n    var OFFSET = 1e6;\n    var path = view.getConnection();\n    var segmentSubdivisions = view.getConnectionSubdivisions();\n    var verticalLine = new Line(refPoint.clone().offset(0, OFFSET), refPoint.clone().offset(0, -OFFSET));\n    var horizontalLine = new Line(refPoint.clone().offset(OFFSET, 0), refPoint.clone().offset(-OFFSET, 0));\n    var verticalIntersections = verticalLine.intersect(path, {\n      segmentSubdivisions: segmentSubdivisions\n    });\n    var horizontalIntersections = horizontalLine.intersect(path, {\n      segmentSubdivisions: segmentSubdivisions\n    });\n    var intersections = [];\n    if (verticalIntersections) {\n      Array.prototype.push.apply(intersections, verticalIntersections);\n    }\n    if (horizontalIntersections) {\n      Array.prototype.push.apply(intersections, horizontalIntersections);\n    }\n    if (intersections.length > 0) {\n      return refPoint.chooseClosest(intersections);\n    }\n    if ('fallbackAt' in opt) {\n      return getPointAtLink(view, opt.fallbackAt);\n    }\n    return connectionClosest(view, _magnet, refPoint, opt);\n  }\n  function _connectionClosest(view, _magnet, refPoint, _opt) {\n    var closestPoint = view.getClosestPoint(refPoint);\n    if (!closestPoint) {\n      return new Point();\n    }\n    return closestPoint;\n  }\n  function resolveRef(fn) {\n    return function (view, magnet, ref, opt) {\n      if (ref instanceof Element) {\n        var refView = this.paper.findView(ref);\n        var refPoint;\n        if (refView) {\n          if (refView.isNodeConnection(ref)) {\n            var distance = 'fixedAt' in opt ? opt.fixedAt : '50%';\n            refPoint = getPointAtLink(refView, distance);\n          } else {\n            refPoint = refView.getNodeBBox(ref).center();\n          }\n        } else {\n          // Something went wrong\n          refPoint = new Point();\n        }\n        return fn.call(this, view, magnet, refPoint, opt);\n      }\n      return fn.apply(this, arguments);\n    };\n  }\n  function getPointAtLink(view, value) {\n    var parsedValue = parseFloat(value);\n    if (isPercentage(value)) {\n      return view.getPointAtRatio(parsedValue / 100);\n    } else {\n      return view.getPointAtLength(parsedValue);\n    }\n  }\n  var connectionPerpendicular = resolveRef(_connectionPerpendicular);\n  var connectionClosest = resolveRef(_connectionClosest);\n  var linkAnchors = {\n    resolveRef: resolveRef,\n    connectionRatio: connectionRatio,\n    connectionLength: connectionLength,\n    connectionPerpendicular: connectionPerpendicular,\n    connectionClosest: connectionClosest\n  };\n  function offsetPoint(p1, p2, offset) {\n    if (isPlainObject(offset)) {\n      var x = offset.x;\n      var y = offset.y;\n      if (isFinite(y)) {\n        var line = new Line(p2, p1);\n        var ref = line.parallel(y);\n        var start = ref.start;\n        var end = ref.end;\n        p2 = start;\n        p1 = end;\n      }\n      offset = x;\n    }\n    if (!isFinite(offset)) {\n      return p1;\n    }\n    var length = p1.distance(p2);\n    if (offset === 0 && length > 0) {\n      return p1;\n    }\n    return p1.move(p2, -Math.min(offset, length - 1));\n  }\n  function stroke$1(magnet) {\n    var stroke = magnet.getAttribute('stroke-width');\n    if (stroke === null) {\n      return 0;\n    }\n    return parseFloat(stroke) || 0;\n  }\n  function alignLine(line, type, offset) {\n    if (offset === void 0) offset = 0;\n    var coordinate, a, b, direction;\n    var start = line.start;\n    var end = line.end;\n    switch (type) {\n      case 'left':\n        coordinate = 'x';\n        a = end;\n        b = start;\n        direction = -1;\n        break;\n      case 'right':\n        coordinate = 'x';\n        a = start;\n        b = end;\n        direction = 1;\n        break;\n      case 'top':\n        coordinate = 'y';\n        a = end;\n        b = start;\n        direction = -1;\n        break;\n      case 'bottom':\n        coordinate = 'y';\n        a = start;\n        b = end;\n        direction = 1;\n        break;\n      default:\n        return;\n    }\n    if (start[coordinate] < end[coordinate]) {\n      a[coordinate] = b[coordinate];\n    } else {\n      b[coordinate] = a[coordinate];\n    }\n    if (isFinite(offset)) {\n      a[coordinate] += direction * offset;\n      b[coordinate] += direction * offset;\n    }\n  }\n\n  // Connection Points\n\n  function anchorConnectionPoint(line, _view, _magnet, opt) {\n    var offset = opt.offset;\n    var alignOffset = opt.alignOffset;\n    var align = opt.align;\n    if (align) {\n      alignLine(line, align, alignOffset);\n    }\n    return offsetPoint(line.end, line.start, offset);\n  }\n  function bboxIntersection(line, view, magnet, opt) {\n    var bbox = view.getNodeBBox(magnet);\n    if (opt.stroke) {\n      bbox.inflate(stroke$1(magnet) / 2);\n    }\n    var intersections = line.intersect(bbox);\n    var cp = intersections ? line.start.chooseClosest(intersections) : line.end;\n    return offsetPoint(cp, line.start, opt.offset);\n  }\n  function rectangleIntersection(line, view, magnet, opt) {\n    var angle = view.model.angle();\n    if (angle === 0) {\n      return bboxIntersection(line, view, magnet, opt);\n    }\n    var bboxWORotation = view.getNodeUnrotatedBBox(magnet);\n    if (opt.stroke) {\n      bboxWORotation.inflate(stroke$1(magnet) / 2);\n    }\n    var center = bboxWORotation.center();\n    var lineWORotation = line.clone().rotate(center, angle);\n    var intersections = lineWORotation.setLength(1e6).intersect(bboxWORotation);\n    var cp = intersections ? lineWORotation.start.chooseClosest(intersections).rotate(center, -angle) : line.end;\n    return offsetPoint(cp, line.start, opt.offset);\n  }\n  function findShapeNode(magnet) {\n    if (!magnet) {\n      return null;\n    }\n    var node = magnet;\n    do {\n      var tagName = node.tagName;\n      if (typeof tagName !== 'string') {\n        return null;\n      }\n      tagName = tagName.toUpperCase();\n      if (tagName === 'G') {\n        node = node.firstElementChild;\n      } else if (tagName === 'TITLE') {\n        node = node.nextElementSibling;\n      } else {\n        break;\n      }\n    } while (node);\n    return node;\n  }\n  var BNDR_SUBDIVISIONS = 'segmentSubdivisons';\n  var BNDR_SHAPE_BBOX = 'shapeBBox';\n  function boundaryIntersection(line, view, magnet, opt) {\n    var node, intersection;\n    var selector = opt.selector;\n    var anchor = line.end;\n    if (typeof selector === 'string') {\n      node = view.findBySelector(selector)[0];\n    } else if (selector === false) {\n      node = magnet;\n    } else if (Array.isArray(selector)) {\n      node = getByPath(magnet, selector);\n    } else {\n      node = findShapeNode(magnet);\n    }\n    if (!V.isSVGGraphicsElement(node)) {\n      if (node === magnet || !V.isSVGGraphicsElement(magnet)) {\n        return anchor;\n      }\n      node = magnet;\n    }\n    var localShape = view.getNodeShape(node);\n    var magnetMatrix = view.getNodeMatrix(node);\n    var translateMatrix = view.getRootTranslateMatrix();\n    var rotateMatrix = view.getRootRotateMatrix();\n    var targetMatrix = translateMatrix.multiply(rotateMatrix).multiply(magnetMatrix);\n    var localMatrix = targetMatrix.inverse();\n    var localLine = V.transformLine(line, localMatrix);\n    var localRef = localLine.start.clone();\n    var data = view.getNodeData(node);\n    if (opt.insideout === false) {\n      if (!data[BNDR_SHAPE_BBOX]) {\n        data[BNDR_SHAPE_BBOX] = localShape.bbox();\n      }\n      var localBBox = data[BNDR_SHAPE_BBOX];\n      if (localBBox.containsPoint(localRef)) {\n        return anchor;\n      }\n    }\n\n    // Caching segment subdivisions for paths\n    var pathOpt;\n    if (localShape instanceof Path) {\n      var precision = opt.precision || 2;\n      if (!data[BNDR_SUBDIVISIONS]) {\n        data[BNDR_SUBDIVISIONS] = localShape.getSegmentSubdivisions({\n          precision: precision\n        });\n      }\n      pathOpt = {\n        precision: precision,\n        segmentSubdivisions: data[BNDR_SUBDIVISIONS]\n      };\n    }\n    if (opt.extrapolate === true) {\n      localLine.setLength(1e6);\n    }\n    intersection = localLine.intersect(localShape, pathOpt);\n    if (intersection) {\n      // More than one intersection\n      if (V.isArray(intersection)) {\n        intersection = localRef.chooseClosest(intersection);\n      }\n    } else if (opt.sticky === true) {\n      // No intersection, find the closest point instead\n      if (localShape instanceof Rect) {\n        intersection = localShape.pointNearestToPoint(localRef);\n      } else if (localShape instanceof Ellipse) {\n        intersection = localShape.intersectionWithLineFromCenterToPoint(localRef);\n      } else {\n        intersection = localShape.closestPoint(localRef, pathOpt);\n      }\n    }\n    var cp = intersection ? V.transformPoint(intersection, targetMatrix) : anchor;\n    var cpOffset = opt.offset || 0;\n    if (opt.stroke) {\n      cpOffset += stroke$1(node) / 2;\n    }\n    return offsetPoint(cp, line.start, cpOffset);\n  }\n  var anchor = anchorConnectionPoint;\n  var bbox = bboxIntersection;\n  var rectangle = rectangleIntersection;\n  var boundary = boundaryIntersection;\n  var connectionPoints = {\n    anchor: anchor,\n    bbox: bbox,\n    rectangle: rectangle,\n    boundary: boundary\n  };\n  function bboxWrapper(method) {\n    return function (view, magnet, ref, opt) {\n      var rotate = !!opt.rotate;\n      var bbox = rotate ? view.getNodeUnrotatedBBox(magnet) : view.getNodeBBox(magnet);\n      var anchor = bbox[method]();\n      var dx = opt.dx;\n      if (dx) {\n        var dxPercentage = isPercentage(dx);\n        dx = parseFloat(dx);\n        if (isFinite(dx)) {\n          if (dxPercentage) {\n            dx /= 100;\n            dx *= bbox.width;\n          }\n          anchor.x += dx;\n        }\n      }\n      var dy = opt.dy;\n      if (dy) {\n        var dyPercentage = isPercentage(dy);\n        dy = parseFloat(dy);\n        if (isFinite(dy)) {\n          if (dyPercentage) {\n            dy /= 100;\n            dy *= bbox.height;\n          }\n          anchor.y += dy;\n        }\n      }\n      return rotate ? anchor.rotate(view.model.getBBox().center(), -view.model.angle()) : anchor;\n    };\n  }\n  function _perpendicular(view, magnet, refPoint, opt) {\n    var angle = view.model.angle();\n    var bbox = view.getNodeBBox(magnet);\n    var anchor = bbox.center();\n    var topLeft = bbox.origin();\n    var bottomRight = bbox.corner();\n    var padding = opt.padding;\n    if (!isFinite(padding)) {\n      padding = 0;\n    }\n    if (topLeft.y + padding <= refPoint.y && refPoint.y <= bottomRight.y - padding) {\n      var dy = refPoint.y - anchor.y;\n      anchor.x += angle === 0 || angle === 180 ? 0 : dy * 1 / Math.tan(toRad(angle));\n      anchor.y += dy;\n    } else if (topLeft.x + padding <= refPoint.x && refPoint.x <= bottomRight.x - padding) {\n      var dx = refPoint.x - anchor.x;\n      anchor.y += angle === 90 || angle === 270 ? 0 : dx * Math.tan(toRad(angle));\n      anchor.x += dx;\n    }\n    return anchor;\n  }\n  function _midSide(view, magnet, refPoint, opt) {\n    var rotate = !!opt.rotate;\n    var bbox, angle, center;\n    if (rotate) {\n      bbox = view.getNodeUnrotatedBBox(magnet);\n      center = view.model.getBBox().center();\n      angle = view.model.angle();\n    } else {\n      bbox = view.getNodeBBox(magnet);\n    }\n    var padding = opt.padding;\n    if (isFinite(padding)) {\n      bbox.inflate(padding);\n    }\n    if (rotate) {\n      refPoint.rotate(center, angle);\n    }\n    var side = bbox.sideNearestToPoint(refPoint);\n    var anchor;\n    switch (side) {\n      case 'left':\n        anchor = bbox.leftMiddle();\n        break;\n      case 'right':\n        anchor = bbox.rightMiddle();\n        break;\n      case 'top':\n        anchor = bbox.topMiddle();\n        break;\n      case 'bottom':\n        anchor = bbox.bottomMiddle();\n        break;\n    }\n    return rotate ? anchor.rotate(center, -angle) : anchor;\n  }\n\n  // Can find anchor from model, when there is no selector or the link end\n  // is connected to a port\n  function _modelCenter(view, _magnet, _refPoint, opt, endType) {\n    return view.model.getPointFromConnectedLink(this.model, endType).offset(opt.dx, opt.dy);\n  }\n\n  //joint.anchors\n  var center = bboxWrapper('center');\n  var top$2 = bboxWrapper('topMiddle');\n  var bottom$2 = bboxWrapper('bottomMiddle');\n  var left$2 = bboxWrapper('leftMiddle');\n  var right$2 = bboxWrapper('rightMiddle');\n  var topLeft = bboxWrapper('origin');\n  var topRight = bboxWrapper('topRight');\n  var bottomLeft = bboxWrapper('bottomLeft');\n  var bottomRight = bboxWrapper('corner');\n  var perpendicular = resolveRef(_perpendicular);\n  var midSide = resolveRef(_midSide);\n  var modelCenter = _modelCenter;\n  var anchors = {\n    center: center,\n    top: top$2,\n    bottom: bottom$2,\n    left: left$2,\n    right: right$2,\n    topLeft: topLeft,\n    topRight: topRight,\n    bottomLeft: bottomLeft,\n    bottomRight: bottomRight,\n    perpendicular: perpendicular,\n    midSide: midSide,\n    modelCenter: modelCenter\n  };\n  var sortingTypes = {\n    NONE: 'sorting-none',\n    APPROX: 'sorting-approximate',\n    EXACT: 'sorting-exact'\n  };\n  var WHEEL_CAP = 50;\n  var WHEEL_WAIT_MS = 20;\n  var MOUNT_BATCH_SIZE = 1000;\n  var UPDATE_BATCH_SIZE = Infinity;\n  var MIN_PRIORITY = 9007199254740991; // Number.MAX_SAFE_INTEGER\n\n  var HighlightingTypes$1 = CellView.Highlighting;\n  var defaultHighlighting = {};\n  defaultHighlighting[HighlightingTypes$1.DEFAULT] = {\n    name: 'stroke',\n    options: {\n      padding: 3\n    }\n  };\n  defaultHighlighting[HighlightingTypes$1.MAGNET_AVAILABILITY] = {\n    name: 'addClass',\n    options: {\n      className: 'available-magnet'\n    }\n  };\n  defaultHighlighting[HighlightingTypes$1.ELEMENT_AVAILABILITY] = {\n    name: 'addClass',\n    options: {\n      className: 'available-cell'\n    }\n  };\n  var defaultLayers = [{\n    name: LayersNames.BACK\n  }, {\n    name: LayersNames.CELLS\n  }, {\n    name: LayersNames.LABELS\n  }, {\n    name: LayersNames.FRONT\n  }, {\n    name: LayersNames.TOOLS\n  }];\n  var Paper = View.extend({\n    className: 'paper',\n    options: {\n      width: 800,\n      height: 600,\n      origin: {\n        x: 0,\n        y: 0\n      },\n      // x,y coordinates in top-left corner\n      gridSize: 1,\n      // Whether or not to draw the grid lines on the paper's DOM element.\n      // e.g drawGrid: true, drawGrid: { color: 'red', thickness: 2 }\n      drawGrid: false,\n      // If not set, the size of the visual grid is the same as the `gridSize`.\n      drawGridSize: null,\n      // Whether or not to draw the background on the paper's DOM element.\n      // e.g. background: { color: 'lightblue', image: '/paper-background.png', repeat: 'flip-xy' }\n      background: false,\n      perpendicularLinks: false,\n      elementView: ElementView,\n      linkView: LinkView,\n      snapLabels: false,\n      // false, true\n      snapLinks: false,\n      // false, true, { radius: value }\n      snapLinksSelf: false,\n      // false, true, { radius: value }\n\n      // Should the link labels be rendered into its own layer?\n      // `false` - the labels are part of the links\n      // `true` - the labels are appended to LayersName.LABELS\n      // [LayersName] - the labels are appended to the layer specified\n      labelsLayer: false,\n      // When set to FALSE, an element may not have more than 1 link with the same source and target element.\n      multiLinks: true,\n      // For adding custom guard logic.\n      guard: function (evt, view) {\n        // FALSE means the event isn't guarded.\n        return false;\n      },\n      highlighting: defaultHighlighting,\n      // Prevent the default context menu from being displayed.\n      preventContextMenu: true,\n      // Prevent the default action for blank:pointer<action>.\n      preventDefaultBlankAction: true,\n      // Prevent the default action for cell:pointer<action>.\n      preventDefaultViewAction: true,\n      // Restrict the translation of elements by given bounding box.\n      // Option accepts a boolean:\n      //  true - the translation is restricted to the paper area\n      //  false - no restrictions\n      // A method:\n      // restrictTranslate: function(elementView) {\n      //     var parentId = elementView.model.get('parent');\n      //     return parentId && this.model.getCell(parentId).getBBox();\n      // },\n      // Or a bounding box:\n      // restrictTranslate: { x: 10, y: 10, width: 790, height: 590 }\n      restrictTranslate: false,\n      // Marks all available magnets with 'available-magnet' class name and all available cells with\n      // 'available-cell' class name. Marks them when dragging a link is started and unmark\n      // when the dragging is stopped.\n      markAvailable: false,\n      // Defines what link model is added to the graph after an user clicks on an active magnet.\n      // Value could be the Backbone.model or a function returning the Backbone.model\n      // defaultLink: function(elementView, magnet) { return condition ? new customLink1() : new customLink2() }\n      defaultLink: new Link(),\n      // A connector that is used by links with no connector defined on the model.\n      // e.g. { name: 'rounded', args: { radius: 5 }} or a function\n      defaultConnector: {\n        name: 'normal'\n      },\n      // A router that is used by links with no router defined on the model.\n      // e.g. { name: 'oneSide', args: { padding: 10 }} or a function\n      defaultRouter: {\n        name: 'normal'\n      },\n      defaultAnchor: {\n        name: 'center'\n      },\n      defaultLinkAnchor: {\n        name: 'connectionRatio'\n      },\n      defaultConnectionPoint: {\n        name: 'bbox'\n      },\n      /* CONNECTING */\n\n      connectionStrategy: null,\n      // Check whether to add a new link to the graph when user clicks on an a magnet.\n      validateMagnet: function (_cellView, magnet, _evt) {\n        return magnet.getAttribute('magnet') !== 'passive';\n      },\n      // Check whether to allow or disallow the link connection while an arrowhead end (source/target)\n      // being changed.\n      validateConnection: function (cellViewS, _magnetS, cellViewT, _magnetT, end, _linkView) {\n        return (end === 'target' ? cellViewT : cellViewS) instanceof ElementView;\n      },\n      /* EMBEDDING */\n\n      // Enables embedding. Re-parent the dragged element with elements under it and makes sure that\n      // all links and elements are visible taken the level of embedding into account.\n      embeddingMode: false,\n      // Check whether to allow or disallow the element embedding while an element being translated.\n      validateEmbedding: function (childView, parentView) {\n        // by default all elements can be in relation child-parent\n        return true;\n      },\n      // Check whether to allow or disallow an embedded element to be unembedded / to become a root.\n      validateUnembedding: function (childView) {\n        // by default all elements can become roots\n        return true;\n      },\n      // Determines the way how a cell finds a suitable parent when it's dragged over the paper.\n      // The cell with the highest z-index (visually on the top) will be chosen.\n      findParentBy: 'bbox',\n      // 'bbox'|'center'|'origin'|'corner'|'topRight'|'bottomLeft'\n\n      // If enabled only the element on the very front is taken into account for the embedding.\n      // If disabled the elements under the dragged view are tested one by one\n      // (from front to back) until a valid parent found.\n      frontParentOnly: true,\n      // Interactive flags. See online docs for the complete list of interactive flags.\n      interactive: {\n        labelMove: false\n      },\n      // When set to true the links can be pinned to the paper.\n      // i.e. link source/target can be a point e.g. link.get('source') ==> { x: 100, y: 100 };\n      linkPinning: true,\n      // Custom validation after an interaction with a link ends.\n      // Recognizes a function. If `false` is returned, the link is disallowed (removed or reverted)\n      // (linkView, paper) => boolean\n      allowLink: null,\n      // Allowed number of mousemove events after which the pointerclick event will be still triggered.\n      clickThreshold: 0,\n      // Number of required mousemove events before the first pointermove event will be triggered.\n      moveThreshold: 0,\n      // Number of required mousemove events before a link is created out of the magnet.\n      // Or string `onleave` so the link is created when the pointer leaves the magnet\n      magnetThreshold: 0,\n      // Rendering Options\n\n      sorting: sortingTypes.EXACT,\n      frozen: false,\n      autoFreeze: false,\n      // no docs yet\n      onViewUpdate: function (view, flag, priority, opt, paper) {\n        // Do not update connected links when:\n        // 1. the view was just inserted (added to the graph and rendered)\n        // 2. the view was just mounted (added back to the paper by viewport function)\n        // 3. the change was marked as `isolate`.\n        // 4. the view model was just removed from the graph\n        if (flag & (view.FLAG_INSERT | view.FLAG_REMOVE) || opt.mounting || opt.isolate) {\n          return;\n        }\n        paper.requestConnectedLinksUpdate(view, priority, opt);\n      },\n      // no docs yet\n      onViewPostponed: function (view, flag, paper) {\n        return paper.forcePostponedViewUpdate(view, flag);\n      },\n      beforeRender: null,\n      // function(opt, paper) { },\n\n      afterRender: null,\n      // function(stats, opt, paper) {\n\n      viewport: null,\n      // Default namespaces\n\n      cellViewNamespace: null,\n      routerNamespace: null,\n      connectorNamespace: null,\n      highlighterNamespace: highlighters,\n      anchorNamespace: anchors,\n      linkAnchorNamespace: linkAnchors,\n      connectionPointNamespace: connectionPoints,\n      overflow: false\n    },\n    events: {\n      'dblclick': 'pointerdblclick',\n      'dbltap': 'pointerdblclick',\n      'contextmenu': 'contextmenu',\n      'mousedown': 'pointerdown',\n      'touchstart': 'pointerdown',\n      'mouseover': 'mouseover',\n      'mouseout': 'mouseout',\n      'mouseenter': 'mouseenter',\n      'mouseleave': 'mouseleave',\n      'wheel': 'mousewheel',\n      'mouseenter .joint-cell': 'mouseenter',\n      'mouseleave .joint-cell': 'mouseleave',\n      'mouseenter .joint-tools': 'mouseenter',\n      'mouseleave .joint-tools': 'mouseleave',\n      'dblclick .joint-cell [magnet]': 'magnetpointerdblclick',\n      'contextmenu .joint-cell [magnet]': 'magnetcontextmenu',\n      'mousedown .joint-link .label': 'onlabel',\n      // interaction with link label\n      'touchstart .joint-link .label': 'onlabel',\n      'dragstart .joint-cell image': 'onImageDragStart' // firefox fix\n    },\n    documentEvents: {\n      'mousemove': 'pointermove',\n      'touchmove': 'pointermove',\n      'mouseup': 'pointerup',\n      'touchend': 'pointerup',\n      'touchcancel': 'pointerup'\n    },\n    svg: null,\n    viewport: null,\n    defs: null,\n    tools: null,\n    $background: null,\n    layers: null,\n    $grid: null,\n    $document: null,\n    // For storing the current transformation matrix (CTM) of the paper's viewport.\n    _viewportMatrix: null,\n    // For verifying whether the CTM is up-to-date. The viewport transform attribute\n    // could have been manipulated directly.\n    _viewportTransformString: null,\n    // Updates data (priorities, unmounted views etc.)\n    _updates: null,\n    // Paper Layers\n    _layers: null,\n    SORT_DELAYING_BATCHES: ['add', 'to-front', 'to-back'],\n    UPDATE_DELAYING_BATCHES: ['translate'],\n    // If you interact with these elements,\n    // the default interaction such as `element move` is prevented.\n    FORM_CONTROL_TAG_NAMES: ['TEXTAREA', 'INPUT', 'BUTTON', 'SELECT', 'OPTION'],\n    // If you interact with these elements, the events are not propagated to the paper\n    // i.e. paper events such as `element:pointerdown` are not triggered.\n    GUARDED_TAG_NAMES: [\n    // Guard <select> for consistency. When you click on it:\n    // Chrome: triggers `pointerdown`, `pointerup`, `pointerclick` to open\n    // Firefox: triggers `pointerdown` on open, `pointerup` (and `pointerclick` only if you haven't moved).\n    //          on close. However, if you open and then close by clicking elsewhere on the page,\n    //           no other event is triggered.\n    // Safari: when you open it, it triggers `pointerdown`. That's it.\n    'SELECT'],\n    MIN_SCALE: 1e-6,\n    init: function () {\n      var ref = this;\n      var options = ref.options;\n      var el = ref.el;\n      if (!options.cellViewNamespace) {\n        /* eslint-disable no-undef */\n        options.cellViewNamespace = typeof joint !== 'undefined' && has$2(joint, 'shapes') ? joint.shapes : null;\n        /* eslint-enable no-undef */\n      }\n      var model = this.model = options.model || new Graph();\n\n      // Layers (SVGGroups)\n      this._layers = {};\n      this.setGrid(options.drawGrid);\n      this.cloneOptions();\n      this.render();\n      this._setDimensions();\n      this.startListening();\n\n      // Hash of all cell views.\n      this._views = {};\n\n      // Mouse wheel events buffer\n      this._mw_evt_buffer = {\n        event: null,\n        deltas: []\n      };\n\n      // Reference to the paper owner document\n      this.$document = $(el.ownerDocument);\n      // Render existing cells in the graph\n      this.resetViews(model.attributes.cells.models);\n      // Start the Rendering Loop\n      if (!this.isFrozen() && this.isAsync()) {\n        this.updateViewsAsync();\n      }\n    },\n    _resetUpdates: function () {\n      return this._updates = {\n        id: null,\n        priorities: [{}, {}, {}],\n        unmountedCids: [],\n        mountedCids: [],\n        unmounted: {},\n        mounted: {},\n        count: 0,\n        keyFrozen: false,\n        freezeKey: null,\n        sort: false,\n        disabled: false,\n        idle: false\n      };\n    },\n    startListening: function () {\n      var model = this.model;\n      this.listenTo(model, 'add', this.onCellAdded).listenTo(model, 'remove', this.onCellRemoved).listenTo(model, 'change', this.onCellChange).listenTo(model, 'reset', this.onGraphReset).listenTo(model, 'sort', this.onGraphSort).listenTo(model, 'batch:stop', this.onGraphBatchStop);\n      this.on('cell:highlight', this.onCellHighlight).on('cell:unhighlight', this.onCellUnhighlight).on('scale translate', this.update);\n    },\n    onCellAdded: function (cell, _, opt) {\n      var position = opt.position;\n      if (this.isAsync() || !isNumber(position)) {\n        this.renderView(cell, opt);\n      } else {\n        if (opt.maxPosition === position) {\n          this.freeze({\n            key: 'addCells'\n          });\n        }\n        this.renderView(cell, opt);\n        if (position === 0) {\n          this.unfreeze({\n            key: 'addCells'\n          });\n        }\n      }\n    },\n    onCellRemoved: function (cell, _, opt) {\n      var view = this.findViewByModel(cell);\n      if (view) {\n        this.requestViewUpdate(view, view.FLAG_REMOVE, view.UPDATE_PRIORITY, opt);\n      }\n    },\n    onCellChange: function (cell, opt) {\n      if (cell === this.model.attributes.cells) {\n        return;\n      }\n      if (cell.hasChanged('z') && this.options.sorting === sortingTypes.APPROX) {\n        var view = this.findViewByModel(cell);\n        if (view) {\n          this.requestViewUpdate(view, view.FLAG_INSERT, view.UPDATE_PRIORITY, opt);\n        }\n      }\n    },\n    onGraphReset: function (collection, opt) {\n      this.resetLayers();\n      this.resetViews(collection.models, opt);\n    },\n    onGraphSort: function () {\n      if (this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)) {\n        return;\n      }\n      this.sortViews();\n    },\n    onGraphBatchStop: function (data) {\n      if (this.isFrozen()) {\n        return;\n      }\n      var name = data && data.batchName;\n      var graph = this.model;\n      if (!this.isAsync()) {\n        var updateDelayingBatches = this.UPDATE_DELAYING_BATCHES;\n        if (updateDelayingBatches.includes(name) && !graph.hasActiveBatch(updateDelayingBatches)) {\n          this.updateViews(data);\n        }\n      }\n      var sortDelayingBatches = this.SORT_DELAYING_BATCHES;\n      if (sortDelayingBatches.includes(name) && !graph.hasActiveBatch(sortDelayingBatches)) {\n        this.sortViews();\n      }\n    },\n    cloneOptions: function () {\n      var ref = this;\n      var options = ref.options;\n      var defaultConnector = options.defaultConnector;\n      var defaultRouter = options.defaultRouter;\n      var defaultConnectionPoint = options.defaultConnectionPoint;\n      var defaultAnchor = options.defaultAnchor;\n      var defaultLinkAnchor = options.defaultLinkAnchor;\n      var origin = options.origin;\n      var highlighting = options.highlighting;\n      var cellViewNamespace = options.cellViewNamespace;\n      var interactive = options.interactive;\n\n      // Default cellView namespace for ES5\n      /* eslint-disable no-undef */\n      if (!cellViewNamespace && typeof joint !== 'undefined' && has$2(joint, 'shapes')) {\n        options.cellViewNamespace = joint.shapes;\n      }\n      /* eslint-enable no-undef */\n\n      // Here if a function was provided, we can not clone it, as this would result in loosing the function.\n      // If the default is used, the cloning is necessary in order to prevent modifying the options on prototype.\n      if (!isFunction(defaultConnector)) {\n        options.defaultConnector = cloneDeep(defaultConnector);\n      }\n      if (!isFunction(defaultRouter)) {\n        options.defaultRouter = cloneDeep(defaultRouter);\n      }\n      if (!isFunction(defaultConnectionPoint)) {\n        options.defaultConnectionPoint = cloneDeep(defaultConnectionPoint);\n      }\n      if (!isFunction(defaultAnchor)) {\n        options.defaultAnchor = cloneDeep(defaultAnchor);\n      }\n      if (!isFunction(defaultLinkAnchor)) {\n        options.defaultLinkAnchor = cloneDeep(defaultLinkAnchor);\n      }\n      if (isPlainObject(interactive)) {\n        options.interactive = assign({}, interactive);\n      }\n      if (isPlainObject(highlighting)) {\n        // Return the default highlighting options into the user specified options.\n        options.highlighting = defaultsDeep({}, highlighting, defaultHighlighting);\n      }\n      options.origin = assign({}, origin);\n    },\n    children: function () {\n      var ns = V.namespace;\n      return [{\n        namespaceURI: ns.xhtml,\n        tagName: 'div',\n        className: addClassNamePrefix('paper-background'),\n        selector: 'background'\n      }, {\n        namespaceURI: ns.xhtml,\n        tagName: 'div',\n        className: addClassNamePrefix('paper-grid'),\n        selector: 'grid'\n      }, {\n        namespaceURI: ns.svg,\n        tagName: 'svg',\n        attributes: {\n          'width': '100%',\n          'height': '100%',\n          'xmlns:xlink': ns.xlink\n        },\n        selector: 'svg',\n        children: [{\n          // Append `<defs>` element to the SVG document. This is useful for filters and gradients.\n          // It's desired to have the defs defined before the viewport (e.g. to make a PDF document pick up defs properly).\n          tagName: 'defs',\n          selector: 'defs'\n        }, {\n          tagName: 'g',\n          className: addClassNamePrefix('layers'),\n          selector: 'layers'\n        }]\n      }];\n    },\n    hasLayerView: function hasLayerView(layerName) {\n      return layerName in this._layers;\n    },\n    getLayerView: function getLayerView(layerName) {\n      var ref = this;\n      var _layers = ref._layers;\n      if (layerName in _layers) {\n        return _layers[layerName];\n      }\n      throw new Error(\"dia.Paper: Unknown layer \\\"\" + layerName + \"\\\"\");\n    },\n    getLayerNode: function getLayerNode(layerName) {\n      return this.getLayerView(layerName).el;\n    },\n    render: function () {\n      this.renderChildren();\n      var ref = this;\n      var childNodes = ref.childNodes;\n      var options = ref.options;\n      var svg = childNodes.svg;\n      var defs = childNodes.defs;\n      var layers = childNodes.layers;\n      var background = childNodes.background;\n      var grid = childNodes.grid;\n      svg.style.overflow = options.overflow ? 'visible' : 'hidden';\n      this.svg = svg;\n      this.defs = defs;\n      this.layers = layers;\n      this.$background = $(background);\n      this.$grid = $(grid);\n      this.renderLayers();\n      V.ensureId(svg);\n      if (options.background) {\n        this.drawBackground(options.background);\n      }\n      if (options.drawGrid) {\n        this.drawGrid();\n      }\n      return this;\n    },\n    renderLayers: function (layers) {\n      var this$1 = this;\n      if (layers === void 0) layers = defaultLayers;\n      this.removeLayers();\n      // TODO: Layers to be read from the graph `layers` attribute\n      layers.forEach(function (ref) {\n        var name = ref.name;\n        var sorted = ref.sorted;\n        var layerView = new PaperLayer({\n          name: name\n        });\n        this$1.layers.appendChild(layerView.el);\n        this$1._layers[name] = layerView;\n      });\n      // Throws an exception if doesn't exist\n      var cellsLayerView = this.getLayerView(LayersNames.CELLS);\n      var toolsLayerView = this.getLayerView(LayersNames.TOOLS);\n      var labelsLayerView = this.getLayerView(LayersNames.LABELS);\n      // backwards compatibility\n      this.tools = toolsLayerView.el;\n      this.cells = this.viewport = cellsLayerView.el;\n      // user-select: none;\n      cellsLayerView.vel.addClass(addClassNamePrefix('viewport'));\n      labelsLayerView.vel.addClass(addClassNamePrefix('viewport'));\n    },\n    removeLayers: function () {\n      var ref = this;\n      var _layers = ref._layers;\n      Object.keys(_layers).forEach(function (name) {\n        _layers[name].remove();\n        delete _layers[name];\n      });\n    },\n    resetLayers: function () {\n      var ref = this;\n      var _layers = ref._layers;\n      Object.keys(_layers).forEach(function (name) {\n        _layers[name].removePivots();\n      });\n    },\n    update: function () {\n      if (this.options.drawGrid) {\n        this.drawGrid();\n      }\n      if (this._background) {\n        this.updateBackgroundImage(this._background);\n      }\n      return this;\n    },\n    matrix: function (ctm) {\n      var viewport = this.layers;\n\n      // Getter:\n      if (ctm === undefined) {\n        var transformString = viewport.getAttribute('transform');\n        if ((this._viewportTransformString || null) === transformString) {\n          // It's ok to return the cached matrix. The transform attribute has not changed since\n          // the matrix was stored.\n          ctm = this._viewportMatrix;\n        } else {\n          // The viewport transform attribute has changed. Measure the matrix and cache again.\n          ctm = viewport.getCTM();\n          this._viewportMatrix = ctm;\n          this._viewportTransformString = transformString;\n        }\n\n        // Clone the cached current transformation matrix.\n        // If no matrix previously stored the identity matrix is returned.\n        return V.createSVGMatrix(ctm);\n      }\n\n      // Setter:\n      ctm = V.createSVGMatrix(ctm);\n      var ctmString = V.matrixToTransformString(ctm);\n      viewport.setAttribute('transform', ctmString);\n      this._viewportMatrix = ctm;\n      this._viewportTransformString = viewport.getAttribute('transform');\n      return this;\n    },\n    clientMatrix: function () {\n      return V.createSVGMatrix(this.cells.getScreenCTM());\n    },\n    requestConnectedLinksUpdate: function (view, priority, opt) {\n      if (view instanceof CellView) {\n        var model = view.model;\n        var links = this.model.getConnectedLinks(model);\n        for (var j = 0, n = links.length; j < n; j++) {\n          var link = links[j];\n          var linkView = this.findViewByModel(link);\n          if (!linkView) {\n            continue;\n          }\n          var flagLabels = ['UPDATE'];\n          if (link.getTargetCell() === model) {\n            flagLabels.push('TARGET');\n          }\n          if (link.getSourceCell() === model) {\n            flagLabels.push('SOURCE');\n          }\n          var nextPriority = Math.max(priority + 1, linkView.UPDATE_PRIORITY);\n          this.scheduleViewUpdate(linkView, linkView.getFlag(flagLabels), nextPriority, opt);\n        }\n      }\n    },\n    forcePostponedViewUpdate: function (view, flag) {\n      if (!view || !(view instanceof CellView)) {\n        return false;\n      }\n      var model = view.model;\n      if (model.isElement()) {\n        return false;\n      }\n      if ((flag & view.getFlag(['SOURCE', 'TARGET'])) === 0) {\n        var dumpOptions = {\n          silent: true\n        };\n        // LinkView is waiting for the target or the source cellView to be rendered\n        // This can happen when the cells are not in the viewport.\n        var sourceFlag = 0;\n        var sourceView = this.findViewByModel(model.getSourceCell());\n        if (sourceView && !this.isViewMounted(sourceView)) {\n          sourceFlag = this.dumpView(sourceView, dumpOptions);\n          view.updateEndMagnet('source');\n        }\n        var targetFlag = 0;\n        var targetView = this.findViewByModel(model.getTargetCell());\n        if (targetView && !this.isViewMounted(targetView)) {\n          targetFlag = this.dumpView(targetView, dumpOptions);\n          view.updateEndMagnet('target');\n        }\n        if (sourceFlag === 0 && targetFlag === 0) {\n          // If leftover flag is 0, all view updates were done.\n          return !this.dumpView(view, dumpOptions);\n        }\n      }\n      return false;\n    },\n    requestViewUpdate: function (view, flag, priority, opt) {\n      opt || (opt = {});\n      this.scheduleViewUpdate(view, flag, priority, opt);\n      var isAsync = this.isAsync();\n      if (this.isFrozen() || isAsync && opt.async !== false) {\n        return;\n      }\n      if (this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)) {\n        return;\n      }\n      var stats = this.updateViews(opt);\n      if (isAsync) {\n        this.notifyAfterRender(stats, opt);\n      }\n    },\n    scheduleViewUpdate: function (view, type, priority, opt) {\n      var ref = this;\n      var updates = ref._updates;\n      var options = ref.options;\n      if (updates.idle) {\n        if (options.autoFreeze) {\n          updates.idle = false;\n          this.unfreeze();\n        }\n      }\n      var FLAG_REMOVE = view.FLAG_REMOVE;\n      var FLAG_INSERT = view.FLAG_INSERT;\n      var UPDATE_PRIORITY = view.UPDATE_PRIORITY;\n      var cid = view.cid;\n      var priorityUpdates = updates.priorities[priority];\n      if (!priorityUpdates) {\n        priorityUpdates = updates.priorities[priority] = {};\n      }\n      // Move higher priority updates to this priority\n      if (priority > UPDATE_PRIORITY) {\n        // Not the default priority for this view. It's most likely a link view\n        // connected to another link view, which triggered the update.\n        // TODO: If there is an update scheduled with a lower priority already, we should\n        // change the requested priority to the lowest one. Does not seem to be critical\n        // right now, as it \"only\" results in multiple updates on the same view.\n        for (var i = priority - 1; i >= UPDATE_PRIORITY; i--) {\n          var prevPriorityUpdates = updates.priorities[i];\n          if (!prevPriorityUpdates || !(cid in prevPriorityUpdates)) {\n            continue;\n          }\n          priorityUpdates[cid] |= prevPriorityUpdates[cid];\n          delete prevPriorityUpdates[cid];\n        }\n      }\n      var currentType = priorityUpdates[cid] || 0;\n      // Prevent cycling\n      if ((currentType & type) === type) {\n        return;\n      }\n      if (!currentType) {\n        updates.count++;\n      }\n      if (type & FLAG_REMOVE && currentType & FLAG_INSERT) {\n        // When a view is removed we need to remove the insert flag as this is a reinsert\n        priorityUpdates[cid] ^= FLAG_INSERT;\n      } else if (type & FLAG_INSERT && currentType & FLAG_REMOVE) {\n        // When a view is added we need to remove the remove flag as this is view was previously removed\n        priorityUpdates[cid] ^= FLAG_REMOVE;\n      }\n      priorityUpdates[cid] |= type;\n      var viewUpdateFn = options.onViewUpdate;\n      if (typeof viewUpdateFn === 'function') {\n        viewUpdateFn.call(this, view, type, priority, opt || {}, this);\n      }\n    },\n    dumpViewUpdate: function (view) {\n      if (!view) {\n        return 0;\n      }\n      var updates = this._updates;\n      var cid = view.cid;\n      var priorityUpdates = updates.priorities[view.UPDATE_PRIORITY];\n      var flag = this.registerMountedView(view) | priorityUpdates[cid];\n      delete priorityUpdates[cid];\n      return flag;\n    },\n    dumpView: function (view, opt) {\n      if (opt === void 0) opt = {};\n      var flag = this.dumpViewUpdate(view);\n      if (!flag) {\n        return 0;\n      }\n      var shouldNotify = !opt.silent;\n      if (shouldNotify) {\n        this.notifyBeforeRender(opt);\n      }\n      var leftover = this.updateView(view, flag, opt);\n      if (shouldNotify) {\n        var stats = {\n          updated: 1,\n          priority: view.UPDATE_PRIORITY\n        };\n        this.notifyAfterRender(stats, opt);\n      }\n      return leftover;\n    },\n    updateView: function (view, flag, opt) {\n      if (!view) {\n        return 0;\n      }\n      var FLAG_REMOVE = view.FLAG_REMOVE;\n      var FLAG_INSERT = view.FLAG_INSERT;\n      var FLAG_INIT = view.FLAG_INIT;\n      var model = view.model;\n      if (view instanceof CellView) {\n        if (flag & FLAG_REMOVE) {\n          this.removeView(model);\n          return 0;\n        }\n        if (flag & FLAG_INSERT) {\n          var isInitialInsert = !!(flag & FLAG_INIT);\n          if (isInitialInsert) {\n            flag ^= FLAG_INIT;\n          }\n          this.insertView(view, isInitialInsert);\n          flag ^= FLAG_INSERT;\n        }\n      }\n      if (!flag) {\n        return 0;\n      }\n      return view.confirmUpdate(flag, opt || {});\n    },\n    requireView: function (model, opt) {\n      var view = this.findViewByModel(model);\n      if (!view) {\n        return null;\n      }\n      this.dumpView(view, opt);\n      return view;\n    },\n    registerUnmountedView: function (view) {\n      var cid = view.cid;\n      var updates = this._updates;\n      if (cid in updates.unmounted) {\n        return 0;\n      }\n      var flag = updates.unmounted[cid] |= view.FLAG_INSERT;\n      updates.unmountedCids.push(cid);\n      delete updates.mounted[cid];\n      return flag;\n    },\n    registerMountedView: function (view) {\n      var cid = view.cid;\n      var updates = this._updates;\n      if (cid in updates.mounted) {\n        return 0;\n      }\n      updates.mounted[cid] = true;\n      updates.mountedCids.push(cid);\n      var flag = updates.unmounted[cid] || 0;\n      delete updates.unmounted[cid];\n      return flag;\n    },\n    isViewMounted: function (view) {\n      if (!view) {\n        return false;\n      }\n      var cid = view.cid;\n      var updates = this._updates;\n      return cid in updates.mounted;\n    },\n    dumpViews: function (opt) {\n      var passingOpt = defaults({}, opt, {\n        viewport: null\n      });\n      this.checkViewport(passingOpt);\n      this.updateViews(passingOpt);\n    },\n    // Synchronous views update\n    updateViews: function (opt) {\n      this.notifyBeforeRender(opt);\n      var batchStats;\n      var updateCount = 0;\n      var batchCount = 0;\n      var priority = MIN_PRIORITY;\n      do {\n        batchCount++;\n        batchStats = this.updateViewsBatch(opt);\n        updateCount += batchStats.updated;\n        priority = Math.min(batchStats.priority, priority);\n      } while (!batchStats.empty);\n      var stats = {\n        updated: updateCount,\n        batches: batchCount,\n        priority: priority\n      };\n      this.notifyAfterRender(stats, opt);\n      return stats;\n    },\n    hasScheduledUpdates: function () {\n      var priorities = this._updates.priorities;\n      var priorityIndexes = Object.keys(priorities); // convert priorities to a dense array\n      var i = priorityIndexes.length;\n      while (i > 0 && i--) {\n        // a faster way how to check if an object is empty\n        for (var _key in priorities[priorityIndexes[i]]) {\n          return true;\n        }\n      }\n      return false;\n    },\n    updateViewsAsync: function (opt, data) {\n      opt || (opt = {});\n      data || (data = {\n        processed: 0,\n        priority: MIN_PRIORITY\n      });\n      var ref = this;\n      var updates = ref._updates;\n      var options = ref.options;\n      var id = updates.id;\n      if (id) {\n        cancelFrame(id);\n        if (data.processed === 0 && this.hasScheduledUpdates()) {\n          this.notifyBeforeRender(opt);\n        }\n        var stats = this.updateViewsBatch(opt);\n        var passingOpt = defaults({}, opt, {\n          mountBatchSize: MOUNT_BATCH_SIZE - stats.mounted,\n          unmountBatchSize: MOUNT_BATCH_SIZE - stats.unmounted\n        });\n        var checkStats = this.checkViewport(passingOpt);\n        var unmountCount = checkStats.unmounted;\n        var mountCount = checkStats.mounted;\n        var processed = data.processed;\n        var total = updates.count;\n        if (stats.updated > 0) {\n          // Some updates have been just processed\n          processed += stats.updated + stats.unmounted;\n          stats.processed = processed;\n          data.priority = Math.min(stats.priority, data.priority);\n          if (stats.empty && mountCount === 0) {\n            stats.unmounted += unmountCount;\n            stats.mounted += mountCount;\n            stats.priority = data.priority;\n            this.notifyAfterRender(stats, opt);\n            data.processed = 0;\n            data.priority = MIN_PRIORITY;\n            updates.count = 0;\n          } else {\n            data.processed = processed;\n          }\n        } else {\n          if (!updates.idle) {\n            if (options.autoFreeze) {\n              this.freeze();\n              updates.idle = true;\n              this.trigger('render:idle', opt);\n            }\n          }\n        }\n        // Progress callback\n        var progressFn = opt.progress;\n        if (total && typeof progressFn === 'function') {\n          progressFn.call(this, stats.empty, processed, total, stats, this);\n        }\n        // The current frame could have been canceled in a callback\n        if (updates.id !== id) {\n          return;\n        }\n      }\n      if (updates.disabled) {\n        throw new Error('dia.Paper: can not unfreeze the paper after it was removed');\n      }\n      updates.id = nextFrame(this.updateViewsAsync, this, opt, data);\n    },\n    notifyBeforeRender: function (opt) {\n      if (opt === void 0) opt = {};\n      var beforeFn = opt.beforeRender;\n      if (typeof beforeFn !== 'function') {\n        beforeFn = this.options.beforeRender;\n        if (typeof beforeFn !== 'function') {\n          return;\n        }\n      }\n      beforeFn.call(this, opt, this);\n    },\n    notifyAfterRender: function (stats, opt) {\n      if (opt === void 0) opt = {};\n      var afterFn = opt.afterRender;\n      if (typeof afterFn !== 'function') {\n        afterFn = this.options.afterRender;\n      }\n      if (typeof afterFn === 'function') {\n        afterFn.call(this, stats, opt, this);\n      }\n      this.trigger('render:done', stats, opt);\n    },\n    updateViewsBatch: function (opt) {\n      opt || (opt = {});\n      var batchSize = opt.batchSize || UPDATE_BATCH_SIZE;\n      var updates = this._updates;\n      var updateCount = 0;\n      var postponeCount = 0;\n      var unmountCount = 0;\n      var mountCount = 0;\n      var maxPriority = MIN_PRIORITY;\n      var empty = true;\n      var options = this.options;\n      var priorities = updates.priorities;\n      var viewportFn = 'viewport' in opt ? opt.viewport : options.viewport;\n      if (typeof viewportFn !== 'function') {\n        viewportFn = null;\n      }\n      var postponeViewFn = options.onViewPostponed;\n      if (typeof postponeViewFn !== 'function') {\n        postponeViewFn = null;\n      }\n      var priorityIndexes = Object.keys(priorities); // convert priorities to a dense array\n      main: for (var i = 0, n = priorityIndexes.length; i < n; i++) {\n        var priority = +priorityIndexes[i];\n        var priorityUpdates = priorities[priority];\n        for (var cid in priorityUpdates) {\n          if (updateCount >= batchSize) {\n            empty = false;\n            break main;\n          }\n          var view = views[cid];\n          if (!view) {\n            // This should not occur\n            delete priorityUpdates[cid];\n            continue;\n          }\n          var currentFlag = priorityUpdates[cid];\n          if ((currentFlag & view.FLAG_REMOVE) === 0) {\n            // We should never check a view for viewport if we are about to remove the view\n            var isDetached = cid in updates.unmounted;\n            if (view.DETACHABLE && viewportFn && !viewportFn.call(this, view, !isDetached, this)) {\n              // Unmount View\n              if (!isDetached) {\n                this.registerUnmountedView(view);\n                this.detachView(view);\n              }\n              updates.unmounted[cid] |= currentFlag;\n              delete priorityUpdates[cid];\n              unmountCount++;\n              continue;\n            }\n            // Mount View\n            if (isDetached) {\n              currentFlag |= view.FLAG_INSERT;\n              mountCount++;\n            }\n            currentFlag |= this.registerMountedView(view);\n          }\n          var leftoverFlag = this.updateView(view, currentFlag, opt);\n          if (leftoverFlag > 0) {\n            // View update has not finished completely\n            priorityUpdates[cid] = leftoverFlag;\n            if (!postponeViewFn || !postponeViewFn.call(this, view, leftoverFlag, this) || priorityUpdates[cid]) {\n              postponeCount++;\n              empty = false;\n              continue;\n            }\n          }\n          if (maxPriority > priority) {\n            maxPriority = priority;\n          }\n          updateCount++;\n          delete priorityUpdates[cid];\n        }\n      }\n      return {\n        priority: maxPriority,\n        updated: updateCount,\n        postponed: postponeCount,\n        unmounted: unmountCount,\n        mounted: mountCount,\n        empty: empty\n      };\n    },\n    getUnmountedViews: function () {\n      var updates = this._updates;\n      var unmountedCids = Object.keys(updates.unmounted);\n      var n = unmountedCids.length;\n      var unmountedViews = new Array(n);\n      for (var i = 0; i < n; i++) {\n        unmountedViews[i] = views[unmountedCids[i]];\n      }\n      return unmountedViews;\n    },\n    getMountedViews: function () {\n      var updates = this._updates;\n      var mountedCids = Object.keys(updates.mounted);\n      var n = mountedCids.length;\n      var mountedViews = new Array(n);\n      for (var i = 0; i < n; i++) {\n        mountedViews[i] = views[mountedCids[i]];\n      }\n      return mountedViews;\n    },\n    checkUnmountedViews: function (viewportFn, opt) {\n      opt || (opt = {});\n      var mountCount = 0;\n      if (typeof viewportFn !== 'function') {\n        viewportFn = null;\n      }\n      var batchSize = 'mountBatchSize' in opt ? opt.mountBatchSize : Infinity;\n      var updates = this._updates;\n      var unmountedCids = updates.unmountedCids;\n      var unmounted = updates.unmounted;\n      for (var i = 0, n = Math.min(unmountedCids.length, batchSize); i < n; i++) {\n        var cid = unmountedCids[i];\n        if (!(cid in unmounted)) {\n          continue;\n        }\n        var view = views[cid];\n        if (!view) {\n          continue;\n        }\n        if (view.DETACHABLE && viewportFn && !viewportFn.call(this, view, false, this)) {\n          // Push at the end of all unmounted ids, so this can be check later again\n          unmountedCids.push(cid);\n          continue;\n        }\n        mountCount++;\n        var flag = this.registerMountedView(view);\n        if (flag) {\n          this.scheduleViewUpdate(view, flag, view.UPDATE_PRIORITY, {\n            mounting: true\n          });\n        }\n      }\n      // Get rid of views, that have been mounted\n      unmountedCids.splice(0, i);\n      return mountCount;\n    },\n    checkMountedViews: function (viewportFn, opt) {\n      opt || (opt = {});\n      var unmountCount = 0;\n      if (typeof viewportFn !== 'function') {\n        return unmountCount;\n      }\n      var batchSize = 'unmountBatchSize' in opt ? opt.unmountBatchSize : Infinity;\n      var updates = this._updates;\n      var mountedCids = updates.mountedCids;\n      var mounted = updates.mounted;\n      for (var i = 0, n = Math.min(mountedCids.length, batchSize); i < n; i++) {\n        var cid = mountedCids[i];\n        if (!(cid in mounted)) {\n          continue;\n        }\n        var view = views[cid];\n        if (!view) {\n          continue;\n        }\n        if (!view.DETACHABLE || viewportFn.call(this, view, true, this)) {\n          // Push at the end of all mounted ids, so this can be check later again\n          mountedCids.push(cid);\n          continue;\n        }\n        unmountCount++;\n        var flag = this.registerUnmountedView(view);\n        if (flag) {\n          this.detachView(view);\n        }\n      }\n      // Get rid of views, that have been unmounted\n      mountedCids.splice(0, i);\n      return unmountCount;\n    },\n    checkViewVisibility: function (cellView, opt) {\n      if (opt === void 0) opt = {};\n      var viewportFn = 'viewport' in opt ? opt.viewport : this.options.viewport;\n      if (typeof viewportFn !== 'function') {\n        viewportFn = null;\n      }\n      var updates = this._updates;\n      var mounted = updates.mounted;\n      var unmounted = updates.unmounted;\n      var visible = !cellView.DETACHABLE || !viewportFn || viewportFn.call(this, cellView, false, this);\n      var isUnmounted = false;\n      var isMounted = false;\n      if (cellView.cid in mounted && !visible) {\n        var flag$1 = this.registerUnmountedView(cellView);\n        if (flag$1) {\n          this.detachView(cellView);\n        }\n        var i = updates.mountedCids.indexOf(cellView.cid);\n        updates.mountedCids.splice(i, 1);\n        isUnmounted = true;\n      }\n      if (!isUnmounted && cellView.cid in unmounted && visible) {\n        var i$1 = updates.unmountedCids.indexOf(cellView.cid);\n        updates.unmountedCids.splice(i$1, 1);\n        var flag = this.registerMountedView(cellView);\n        if (flag) {\n          this.scheduleViewUpdate(cellView, flag, cellView.UPDATE_PRIORITY, {\n            mounting: true\n          });\n        }\n        isMounted = true;\n      }\n      return {\n        mounted: isMounted ? 1 : 0,\n        unmounted: isUnmounted ? 1 : 0\n      };\n    },\n    checkViewport: function (opt) {\n      var passingOpt = defaults({}, opt, {\n        mountBatchSize: Infinity,\n        unmountBatchSize: Infinity\n      });\n      var viewportFn = 'viewport' in passingOpt ? passingOpt.viewport : this.options.viewport;\n      var unmountedCount = this.checkMountedViews(viewportFn, passingOpt);\n      if (unmountedCount > 0) {\n        // Do not check views, that have been just unmounted and pushed at the end of the cids array\n        var unmountedCids = this._updates.unmountedCids;\n        passingOpt.mountBatchSize = Math.min(unmountedCids.length - unmountedCount, passingOpt.mountBatchSize);\n      }\n      var mountedCount = this.checkUnmountedViews(viewportFn, passingOpt);\n      return {\n        mounted: mountedCount,\n        unmounted: unmountedCount\n      };\n    },\n    freeze: function (opt) {\n      opt || (opt = {});\n      var updates = this._updates;\n      var key = opt.key;\n      var isFrozen = this.options.frozen;\n      var freezeKey = updates.freezeKey;\n      if (key && key !== freezeKey) {\n        // key passed, but the paper is already freezed with another key\n        if (isFrozen && freezeKey) {\n          return;\n        }\n        updates.freezeKey = key;\n        updates.keyFrozen = isFrozen;\n      }\n      this.options.frozen = true;\n      var id = updates.id;\n      updates.id = null;\n      if (this.isAsync() && id) {\n        cancelFrame(id);\n      }\n    },\n    unfreeze: function (opt) {\n      opt || (opt = {});\n      var updates = this._updates;\n      var key = opt.key;\n      var freezeKey = updates.freezeKey;\n      // key passed, but the paper is already freezed with another key\n      if (key && freezeKey && key !== freezeKey) {\n        return;\n      }\n      updates.freezeKey = null;\n      // key passed, but the paper is already freezed\n      if (key && key === freezeKey && updates.keyFrozen) {\n        return;\n      }\n      if (this.isAsync()) {\n        this.freeze();\n        this.updateViewsAsync(opt);\n      } else {\n        this.updateViews(opt);\n      }\n      this.options.frozen = updates.keyFrozen = false;\n      if (updates.sort) {\n        this.sortViews();\n        updates.sort = false;\n      }\n    },\n    isAsync: function () {\n      return !!this.options.async;\n    },\n    isFrozen: function () {\n      return !!this.options.frozen;\n    },\n    isExactSorting: function () {\n      return this.options.sorting === sortingTypes.EXACT;\n    },\n    onRemove: function () {\n      this.freeze();\n      this._updates.disabled = true;\n      //clean up all DOM elements/views to prevent memory leaks\n      this.removeLayers();\n      this.removeViews();\n    },\n    getComputedSize: function () {\n      var options = this.options;\n      var w = options.width;\n      var h = options.height;\n      if (!isNumber(w)) {\n        w = this.el.clientWidth;\n      }\n      if (!isNumber(h)) {\n        h = this.el.clientHeight;\n      }\n      return {\n        width: w,\n        height: h\n      };\n    },\n    setDimensions: function (width, height) {\n      var ref = this;\n      var options = ref.options;\n      var currentWidth = options.width;\n      var currentHeight = options.height;\n      var w = width === undefined ? currentWidth : width;\n      var h = height === undefined ? currentHeight : height;\n      if (currentWidth === w && currentHeight === h) {\n        return;\n      }\n      options.width = w;\n      options.height = h;\n      this._setDimensions();\n      var computedSize = this.getComputedSize();\n      this.trigger('resize', computedSize.width, computedSize.height);\n    },\n    _setDimensions: function () {\n      var ref = this;\n      var options = ref.options;\n      var w = options.width;\n      var h = options.height;\n      if (isNumber(w)) {\n        w = Math.round(w);\n      }\n      if (isNumber(h)) {\n        h = Math.round(h);\n      }\n      this.$el.css({\n        width: w === null ? '' : w,\n        height: h === null ? '' : h\n      });\n    },\n    setOrigin: function (ox, oy) {\n      return this.translate(ox || 0, oy || 0);\n    },\n    // Expand/shrink the paper to fit the content.\n    // Alternatively signature function(opt)\n    fitToContent: function (gridWidth, gridHeight, padding, opt) {\n      if (isObject$1(gridWidth)) {\n        // first parameter is an option object\n        opt = gridWidth;\n      } else {\n        // Support for a deprecated signature\n        opt = assign({\n          gridWidth: gridWidth,\n          gridHeight: gridHeight,\n          padding: padding\n        }, opt);\n      }\n      var ref = this.getFitToContentArea(opt);\n      var x = ref.x;\n      var y = ref.y;\n      var width = ref.width;\n      var height = ref.height;\n      var ref$1 = this.scale();\n      var sx = ref$1.sx;\n      var sy = ref$1.sy;\n      this.setOrigin(-x * sx, -y * sy);\n      this.setDimensions(width * sx, height * sy);\n      return new Rect(x, y, width, height);\n    },\n    getFitToContentArea: function (opt) {\n      if (opt === void 0) opt = {};\n\n      // Calculate the paper size to accommodate all the graph's elements.\n\n      var gridWidth = opt.gridWidth || 1;\n      var gridHeight = opt.gridHeight || 1;\n      var padding = normalizeSides(opt.padding || 0);\n      var minWidth = Math.max(opt.minWidth || 0, gridWidth);\n      var minHeight = Math.max(opt.minHeight || 0, gridHeight);\n      var maxWidth = opt.maxWidth || Number.MAX_VALUE;\n      var maxHeight = opt.maxHeight || Number.MAX_VALUE;\n      var newOrigin = opt.allowNewOrigin;\n      var area = 'contentArea' in opt ? new Rect(opt.contentArea) : this.getContentArea(opt);\n      var ref = this.scale();\n      var sx = ref.sx;\n      var sy = ref.sy;\n      area.x *= sx;\n      area.y *= sy;\n      area.width *= sx;\n      area.height *= sy;\n      var calcWidth = Math.ceil((area.width + area.x) / gridWidth);\n      var calcHeight = Math.ceil((area.height + area.y) / gridHeight);\n      if (!opt.allowNegativeBottomRight) {\n        calcWidth = Math.max(calcWidth, 1);\n        calcHeight = Math.max(calcHeight, 1);\n      }\n      calcWidth *= gridWidth;\n      calcHeight *= gridHeight;\n      var tx = 0;\n      if (newOrigin === 'negative' && area.x < 0 || newOrigin === 'positive' && area.x >= 0 || newOrigin === 'any') {\n        tx = Math.ceil(-area.x / gridWidth) * gridWidth;\n        tx += padding.left;\n        calcWidth += tx;\n      }\n      var ty = 0;\n      if (newOrigin === 'negative' && area.y < 0 || newOrigin === 'positive' && area.y >= 0 || newOrigin === 'any') {\n        ty = Math.ceil(-area.y / gridHeight) * gridHeight;\n        ty += padding.top;\n        calcHeight += ty;\n      }\n      calcWidth += padding.right;\n      calcHeight += padding.bottom;\n\n      // Make sure the resulting width and height are greater than minimum.\n      calcWidth = Math.max(calcWidth, minWidth);\n      calcHeight = Math.max(calcHeight, minHeight);\n\n      // Make sure the resulting width and height are lesser than maximum.\n      calcWidth = Math.min(calcWidth, maxWidth);\n      calcHeight = Math.min(calcHeight, maxHeight);\n      return new Rect(-tx / sx, -ty / sy, calcWidth / sx, calcHeight / sy);\n    },\n    transformToFitContent: function (opt) {\n      opt || (opt = {});\n      var contentBBox, contentLocalOrigin;\n      if ('contentArea' in opt) {\n        var contentArea = opt.contentArea;\n        contentBBox = this.localToPaperRect(contentArea);\n        contentLocalOrigin = new Point(contentArea);\n      } else {\n        contentBBox = this.getContentBBox(opt);\n        contentLocalOrigin = this.paperToLocalPoint(contentBBox);\n      }\n      if (!contentBBox.width || !contentBBox.height) {\n        return;\n      }\n      defaults(opt, {\n        padding: 0,\n        preserveAspectRatio: true,\n        scaleGrid: null,\n        minScale: 0,\n        maxScale: Number.MAX_VALUE,\n        verticalAlign: 'top',\n        horizontalAlign: 'left'\n        //minScaleX\n        //minScaleY\n        //maxScaleX\n        //maxScaleY\n        //fittingBBox\n      });\n      var padding = normalizeSides(opt.padding);\n      var minScaleX = opt.minScaleX || opt.minScale;\n      var maxScaleX = opt.maxScaleX || opt.maxScale;\n      var minScaleY = opt.minScaleY || opt.minScale;\n      var maxScaleY = opt.maxScaleY || opt.maxScale;\n      var fittingBBox;\n      if (opt.fittingBBox) {\n        fittingBBox = opt.fittingBBox;\n      } else {\n        var currentTranslate = this.translate();\n        var computedSize = this.getComputedSize();\n        fittingBBox = {\n          x: currentTranslate.tx,\n          y: currentTranslate.ty,\n          width: computedSize.width,\n          height: computedSize.height\n        };\n      }\n      fittingBBox = new Rect(fittingBBox).moveAndExpand({\n        x: padding.left,\n        y: padding.top,\n        width: -padding.left - padding.right,\n        height: -padding.top - padding.bottom\n      });\n      var currentScale = this.scale();\n      var newSx = fittingBBox.width / contentBBox.width * currentScale.sx;\n      var newSy = fittingBBox.height / contentBBox.height * currentScale.sy;\n      if (opt.preserveAspectRatio) {\n        newSx = newSy = Math.min(newSx, newSy);\n      }\n\n      // snap scale to a grid\n      if (opt.scaleGrid) {\n        var gridSize = opt.scaleGrid;\n        newSx = gridSize * Math.floor(newSx / gridSize);\n        newSy = gridSize * Math.floor(newSy / gridSize);\n      }\n\n      // scale min/max boundaries\n      newSx = Math.min(maxScaleX, Math.max(minScaleX, newSx));\n      newSy = Math.min(maxScaleY, Math.max(minScaleY, newSy));\n      var scaleDiff = {\n        x: newSx / currentScale.sx,\n        y: newSy / currentScale.sy\n      };\n      var origin = this.options.origin;\n      var newOx = fittingBBox.x - contentLocalOrigin.x * newSx - origin.x;\n      var newOy = fittingBBox.y - contentLocalOrigin.y * newSy - origin.y;\n      switch (opt.verticalAlign) {\n        case 'middle':\n          newOy = newOy + (fittingBBox.height - contentBBox.height * scaleDiff.y) / 2;\n          break;\n        case 'bottom':\n          newOy = newOy + (fittingBBox.height - contentBBox.height * scaleDiff.y);\n          break;\n        case 'top':\n        default:\n          break;\n      }\n      switch (opt.horizontalAlign) {\n        case 'middle':\n          newOx = newOx + (fittingBBox.width - contentBBox.width * scaleDiff.x) / 2;\n          break;\n        case 'right':\n          newOx = newOx + (fittingBBox.width - contentBBox.width * scaleDiff.x);\n          break;\n        case 'left':\n        default:\n          break;\n      }\n      this.scale(newSx, newSy);\n      this.translate(newOx, newOy);\n    },\n    scaleContentToFit: function (opt) {\n      this.transformToFitContent(opt);\n    },\n    // Return the dimensions of the content area in local units (without transformations).\n    getContentArea: function (opt) {\n      if (opt && opt.useModelGeometry) {\n        return this.model.getBBox() || new Rect();\n      }\n      return V(this.cells).getBBox();\n    },\n    // Return the dimensions of the content bbox in the paper units (as it appears on screen).\n    getContentBBox: function (opt) {\n      return this.localToPaperRect(this.getContentArea(opt));\n    },\n    // Returns a geometry rectangle representing the entire\n    // paper area (coordinates from the left paper border to the right one\n    // and the top border to the bottom one).\n    getArea: function () {\n      return this.paperToLocalRect(this.getComputedSize());\n    },\n    getRestrictedArea: function () {\n      var args = [],\n        len = arguments.length;\n      while (len--) args[len] = arguments[len];\n      var ref = this.options;\n      var restrictTranslate = ref.restrictTranslate;\n      var restrictedArea;\n      if (isFunction(restrictTranslate)) {\n        // A method returning a bounding box\n        restrictedArea = restrictTranslate.apply(this, args);\n      } else if (restrictTranslate === true) {\n        // The paper area\n        restrictedArea = this.getArea();\n      } else if (!restrictTranslate) {\n        // falsy value\n        restrictedArea = null;\n      } else {\n        // any other value\n        restrictedArea = new Rect(restrictTranslate);\n      }\n      return restrictedArea;\n    },\n    createViewForModel: function (cell) {\n      var ref = this;\n      var options = ref.options;\n      // A class taken from the paper options.\n      var optionalViewClass;\n\n      // A default basic class (either dia.ElementView or dia.LinkView)\n      var defaultViewClass;\n\n      // A special class defined for this model in the corresponding namespace.\n      // e.g. joint.shapes.basic.Rect searches for joint.shapes.basic.RectView\n      var namespace = options.cellViewNamespace;\n      var type = cell.get('type') + 'View';\n      var namespaceViewClass = getByPath(namespace, type, '.');\n      if (cell.isLink()) {\n        optionalViewClass = options.linkView;\n        defaultViewClass = LinkView;\n      } else {\n        optionalViewClass = options.elementView;\n        defaultViewClass = ElementView;\n      }\n\n      // a) the paper options view is a class (deprecated)\n      //  1. search the namespace for a view\n      //  2. if no view was found, use view from the paper options\n      // b) the paper options view is a function\n      //  1. call the function from the paper options\n      //  2. if no view was return, search the namespace for a view\n      //  3. if no view was found, use the default\n      var ViewClass = optionalViewClass.prototype instanceof Backbone.View ? namespaceViewClass || optionalViewClass : optionalViewClass.call(this, cell) || namespaceViewClass || defaultViewClass;\n      return new ViewClass({\n        model: cell,\n        interactive: options.interactive,\n        labelsLayer: options.labelsLayer === true ? LayersNames.LABELS : options.labelsLayer\n      });\n    },\n    removeView: function (cell) {\n      var id = cell.id;\n      var ref = this;\n      var _views = ref._views;\n      var _updates = ref._updates;\n      var view = _views[id];\n      if (view) {\n        var cid = view.cid;\n        var mounted = _updates.mounted;\n        var unmounted = _updates.unmounted;\n        view.remove();\n        delete _views[id];\n        delete mounted[cid];\n        delete unmounted[cid];\n      }\n      return view;\n    },\n    renderView: function (cell, opt) {\n      var id = cell.id;\n      var views = this._views;\n      var view, flag;\n      var create = true;\n      if (id in views) {\n        view = views[id];\n        if (view.model === cell) {\n          flag = view.FLAG_INSERT;\n          create = false;\n        } else {\n          // The view for this `id` already exist.\n          // The cell is a new instance of the model with identical id\n          // We simply remove the existing view and create a new one\n          this.removeView(cell);\n        }\n      }\n      if (create) {\n        view = views[id] = this.createViewForModel(cell);\n        view.paper = this;\n        flag = this.registerUnmountedView(view) | this.FLAG_INIT | view.getFlag(result(view, 'initFlag'));\n      }\n      this.requestViewUpdate(view, flag, view.UPDATE_PRIORITY, opt);\n      return view;\n    },\n    onImageDragStart: function () {\n      // This is the only way to prevent image dragging in Firefox that works.\n      // Setting -moz-user-select: none, draggable=\"false\" attribute or user-drag: none didn't help.\n\n      return false;\n    },\n    resetViews: function (cells, opt) {\n      opt || (opt = {});\n      cells || (cells = []);\n      this._resetUpdates();\n      // clearing views removes any event listeners\n      this.removeViews();\n      // Allows to unfreeze normally while in the idle state using autoFreeze option\n      var key = this.options.autoFreeze ? null : 'reset';\n      this.freeze({\n        key: key\n      });\n      for (var i = 0, n = cells.length; i < n; i++) {\n        this.renderView(cells[i], opt);\n      }\n      this.unfreeze({\n        key: key\n      });\n      this.sortViews();\n    },\n    removeViews: function () {\n      invoke(this._views, 'remove');\n      this._views = {};\n    },\n    sortViews: function () {\n      if (!this.isExactSorting()) {\n        // noop\n        return;\n      }\n      if (this.isFrozen()) {\n        // sort views once unfrozen\n        this._updates.sort = true;\n        return;\n      }\n      this.sortViewsExact();\n    },\n    sortViewsExact: function () {\n      // Run insertion sort algorithm in order to efficiently sort DOM elements according to their\n      // associated model `z` attribute.\n\n      var $cells = $(this.cells).children('[model-id]');\n      var cells = this.model.get('cells');\n      sortElements($cells, function (a, b) {\n        var cellA = cells.get(a.getAttribute('model-id'));\n        var cellB = cells.get(b.getAttribute('model-id'));\n        var zA = cellA.attributes.z || 0;\n        var zB = cellB.attributes.z || 0;\n        return zA === zB ? 0 : zA < zB ? -1 : 1;\n      });\n    },\n    insertView: function (view, isInitialInsert) {\n      var layerView = this.getLayerView(LayersNames.CELLS);\n      var el = view.el;\n      var model = view.model;\n      switch (this.options.sorting) {\n        case sortingTypes.APPROX:\n          layerView.insertSortedNode(el, model.get('z'));\n          break;\n        case sortingTypes.EXACT:\n        default:\n          layerView.insertNode(el);\n          break;\n      }\n      view.onMount(isInitialInsert);\n    },\n    detachView: function detachView(view) {\n      view.unmount();\n      view.onDetach();\n    },\n    scale: function (sx, sy, ox, oy) {\n      // getter\n      if (sx === undefined) {\n        return V.matrixToScale(this.matrix());\n      }\n\n      // setter\n      if (sy === undefined) {\n        sy = sx;\n      }\n      if (ox === undefined) {\n        ox = 0;\n        oy = 0;\n      }\n      var translate = this.translate();\n      if (ox || oy || translate.tx || translate.ty) {\n        var newTx = translate.tx - ox * (sx - 1);\n        var newTy = translate.ty - oy * (sy - 1);\n        this.translate(newTx, newTy);\n      }\n      sx = Math.max(sx || 0, this.MIN_SCALE);\n      sy = Math.max(sy || 0, this.MIN_SCALE);\n      var ctm = this.matrix();\n      ctm.a = sx;\n      ctm.d = sy;\n      this.matrix(ctm);\n      this.trigger('scale', sx, sy, ox, oy);\n      return this;\n    },\n    // Experimental - do not use in production.\n    rotate: function (angle, cx, cy) {\n      // getter\n      if (angle === undefined) {\n        return V.matrixToRotate(this.matrix());\n      }\n\n      // setter\n\n      // If the origin is not set explicitely, rotate around the center. Note that\n      // we must use the plain bounding box (`this.el.getBBox()` instead of the one that gives us\n      // the real bounding box (`bbox()`) including transformations).\n      if (cx === undefined) {\n        var bbox = this.cells.getBBox();\n        cx = bbox.width / 2;\n        cy = bbox.height / 2;\n      }\n      var ctm = this.matrix().translate(cx, cy).rotate(angle).translate(-cx, -cy);\n      this.matrix(ctm);\n      return this;\n    },\n    translate: function (tx, ty) {\n      // getter\n      if (tx === undefined) {\n        return V.matrixToTranslate(this.matrix());\n      }\n      var ref = this;\n      var options = ref.options;\n      var origin = options.origin;\n      var drawGrid = options.drawGrid;\n\n      // setter\n      tx || (tx = 0);\n      ty || (ty = 0);\n      var ctm = this.matrix();\n      if (ctm.e === tx && ctm.f === ty) {\n        return this;\n      }\n      ctm.e = tx;\n      ctm.f = ty;\n      this.matrix(ctm);\n      var ref$1 = this.translate();\n      var ox = ref$1.tx;\n      var oy = ref$1.ty;\n      origin.x = ox;\n      origin.y = oy;\n      this.trigger('translate', ox, oy);\n      if (drawGrid) {\n        this.drawGrid();\n      }\n      return this;\n    },\n    // Find the first view climbing up the DOM tree starting at element `el`. Note that `el` can also\n    // be a selector or a jQuery object.\n    findView: function ($el) {\n      var el = isString($el) ? this.cells.querySelector($el) : $el instanceof $ ? $el[0] : $el;\n      var id = this.findAttribute('model-id', el);\n      if (id) {\n        return this._views[id];\n      }\n      return undefined;\n    },\n    // Find a view for a model `cell`. `cell` can also be a string or number representing a model `id`.\n    findViewByModel: function (cell) {\n      var id = isString(cell) || isNumber(cell) ? cell : cell && cell.id;\n      return this._views[id];\n    },\n    // Find all views at given point\n    findViewsFromPoint: function (p) {\n      p = new Point(p);\n      var views = this.model.getElements().map(this.findViewByModel, this);\n      return views.filter(function (view) {\n        return view && view.vel.getBBox({\n          target: this.cells\n        }).containsPoint(p);\n      }, this);\n    },\n    // Find all views in given area\n    findViewsInArea: function (rect, opt) {\n      opt = defaults(opt || {}, {\n        strict: false\n      });\n      rect = new Rect(rect);\n      var views = this.model.getElements().map(this.findViewByModel, this);\n      var method = opt.strict ? 'containsRect' : 'intersect';\n      return views.filter(function (view) {\n        return view && rect[method](view.vel.getBBox({\n          target: this.cells\n        }));\n      }, this);\n    },\n    removeTools: function () {\n      this.dispatchToolsEvent('remove');\n      return this;\n    },\n    hideTools: function () {\n      this.dispatchToolsEvent('hide');\n      return this;\n    },\n    showTools: function () {\n      this.dispatchToolsEvent('show');\n      return this;\n    },\n    dispatchToolsEvent: function (event) {\n      var ref;\n      var args = [],\n        len = arguments.length - 1;\n      while (len-- > 0) args[len] = arguments[len + 1];\n      if (typeof event !== 'string') {\n        return;\n      }\n      (ref = this).trigger.apply(ref, ['tools:event', event].concat(args));\n    },\n    getModelById: function (id) {\n      return this.model.getCell(id);\n    },\n    snapToGrid: function (x, y) {\n      // Convert global coordinates to the local ones of the `viewport`. Otherwise,\n      // improper transformation would be applied when the viewport gets transformed (scaled/rotated).\n      return this.clientToLocalPoint(x, y).snapToGrid(this.options.gridSize);\n    },\n    localToPaperPoint: function (x, y) {\n      // allow `x` to be a point and `y` undefined\n      var localPoint = new Point(x, y);\n      var paperPoint = V.transformPoint(localPoint, this.matrix());\n      return paperPoint;\n    },\n    localToPaperRect: function (x, y, width, height) {\n      // allow `x` to be a rectangle and rest arguments undefined\n      var localRect = new Rect(x, y, width, height);\n      var paperRect = V.transformRect(localRect, this.matrix());\n      return paperRect;\n    },\n    paperToLocalPoint: function (x, y) {\n      // allow `x` to be a point and `y` undefined\n      var paperPoint = new Point(x, y);\n      var localPoint = V.transformPoint(paperPoint, this.matrix().inverse());\n      return localPoint;\n    },\n    paperToLocalRect: function (x, y, width, height) {\n      // allow `x` to be a rectangle and rest arguments undefined\n      var paperRect = new Rect(x, y, width, height);\n      var localRect = V.transformRect(paperRect, this.matrix().inverse());\n      return localRect;\n    },\n    localToClientPoint: function (x, y) {\n      // allow `x` to be a point and `y` undefined\n      var localPoint = new Point(x, y);\n      var clientPoint = V.transformPoint(localPoint, this.clientMatrix());\n      return clientPoint;\n    },\n    localToClientRect: function (x, y, width, height) {\n      // allow `x` to be a point and `y` undefined\n      var localRect = new Rect(x, y, width, height);\n      var clientRect = V.transformRect(localRect, this.clientMatrix());\n      return clientRect;\n    },\n    // Transform client coordinates to the paper local coordinates.\n    // Useful when you have a mouse event object and you'd like to get coordinates\n    // inside the paper that correspond to `evt.clientX` and `evt.clientY` point.\n    // Example: var localPoint = paper.clientToLocalPoint({ x: evt.clientX, y: evt.clientY });\n    clientToLocalPoint: function (x, y) {\n      // allow `x` to be a point and `y` undefined\n      var clientPoint = new Point(x, y);\n      var localPoint = V.transformPoint(clientPoint, this.clientMatrix().inverse());\n      return localPoint;\n    },\n    clientToLocalRect: function (x, y, width, height) {\n      // allow `x` to be a point and `y` undefined\n      var clientRect = new Rect(x, y, width, height);\n      var localRect = V.transformRect(clientRect, this.clientMatrix().inverse());\n      return localRect;\n    },\n    localToPagePoint: function (x, y) {\n      return this.localToPaperPoint(x, y).offset(this.pageOffset());\n    },\n    localToPageRect: function (x, y, width, height) {\n      return this.localToPaperRect(x, y, width, height).offset(this.pageOffset());\n    },\n    pageToLocalPoint: function (x, y) {\n      var pagePoint = new Point(x, y);\n      var paperPoint = pagePoint.difference(this.pageOffset());\n      return this.paperToLocalPoint(paperPoint);\n    },\n    pageToLocalRect: function (x, y, width, height) {\n      var pageOffset = this.pageOffset();\n      var paperRect = new Rect(x, y, width, height);\n      paperRect.x -= pageOffset.x;\n      paperRect.y -= pageOffset.y;\n      return this.paperToLocalRect(paperRect);\n    },\n    clientOffset: function () {\n      var clientRect = this.svg.getBoundingClientRect();\n      return new Point(clientRect.left, clientRect.top);\n    },\n    pageOffset: function () {\n      return this.clientOffset().offset(window.scrollX, window.scrollY);\n    },\n    linkAllowed: function (linkView) {\n      if (!(linkView instanceof LinkView)) {\n        throw new Error('Must provide a linkView.');\n      }\n      var link = linkView.model;\n      var paperOptions = this.options;\n      var graph = this.model;\n      var ns = graph.constructor.validations;\n      if (!paperOptions.multiLinks) {\n        if (!ns.multiLinks.call(this, graph, link)) {\n          return false;\n        }\n      }\n      if (!paperOptions.linkPinning) {\n        // Link pinning is not allowed and the link is not connected to the target.\n        if (!ns.linkPinning.call(this, graph, link)) {\n          return false;\n        }\n      }\n      if (typeof paperOptions.allowLink === 'function') {\n        if (!paperOptions.allowLink.call(this, linkView, this)) {\n          return false;\n        }\n      }\n      return true;\n    },\n    getDefaultLink: function (cellView, magnet) {\n      return isFunction(this.options.defaultLink)\n      // default link is a function producing link model\n      ? this.options.defaultLink.call(this, cellView, magnet)\n      // default link is the Backbone model\n      : this.options.defaultLink.clone();\n    },\n    // Cell highlighting.\n    // ------------------\n\n    resolveHighlighter: function (opt) {\n      if (opt === void 0) opt = {};\n      var highlighterDef = opt.highlighter;\n      var type = opt.type;\n      var ref = this.options;\n      var highlighting = ref.highlighting;\n      var highlighterNamespace = ref.highlighterNamespace;\n\n      /*\n          Expecting opt.highlighter to have the following structure:\n          {\n              name: 'highlighter-name',\n              options: {\n                  some: 'value'\n              }\n          }\n      */\n      if (highlighterDef === undefined) {\n        // Is highlighting disabled?\n        if (!highlighting) {\n          return false;\n        }\n        // check for built-in types\n        if (type) {\n          highlighterDef = highlighting[type];\n          // Is a specific type highlight disabled?\n          if (highlighterDef === false) {\n            return false;\n          }\n        }\n        if (!highlighterDef) {\n          // Type not defined use default highlight\n          highlighterDef = highlighting['default'];\n        }\n      }\n\n      // Do nothing if opt.highlighter is falsy.\n      // This allows the case to not highlight cell(s) in certain cases.\n      // For example, if you want to NOT highlight when embedding elements\n      // or use a custom highlighter.\n      if (!highlighterDef) {\n        return false;\n      }\n\n      // Allow specifying a highlighter by name.\n      if (isString(highlighterDef)) {\n        highlighterDef = {\n          name: highlighterDef\n        };\n      }\n      var name = highlighterDef.name;\n      var highlighter = highlighterNamespace[name];\n\n      // Highlighter validation\n      if (!highlighter) {\n        throw new Error('Unknown highlighter (\"' + name + '\")');\n      }\n      if (typeof highlighter.highlight !== 'function') {\n        throw new Error('Highlighter (\"' + name + '\") is missing required highlight() method');\n      }\n      if (typeof highlighter.unhighlight !== 'function') {\n        throw new Error('Highlighter (\"' + name + '\") is missing required unhighlight() method');\n      }\n      return {\n        highlighter: highlighter,\n        options: highlighterDef.options || {},\n        name: name\n      };\n    },\n    onCellHighlight: function (cellView, magnetEl, opt) {\n      var highlighterDescriptor = this.resolveHighlighter(opt);\n      if (!highlighterDescriptor) {\n        return;\n      }\n      var highlighter = highlighterDescriptor.highlighter;\n      var options = highlighterDescriptor.options;\n      highlighter.highlight(cellView, magnetEl, options);\n    },\n    onCellUnhighlight: function (cellView, magnetEl, opt) {\n      var highlighterDescriptor = this.resolveHighlighter(opt);\n      if (!highlighterDescriptor) {\n        return;\n      }\n      var highlighter = highlighterDescriptor.highlighter;\n      var options = highlighterDescriptor.options;\n      highlighter.unhighlight(cellView, magnetEl, options);\n    },\n    // Interaction.\n    // ------------\n\n    pointerdblclick: function (evt) {\n      evt.preventDefault();\n\n      // magnetpointerdblclick can stop propagation\n\n      evt = normalizeEvent(evt);\n      var view = this.findView(evt.target);\n      if (this.guard(evt, view)) {\n        return;\n      }\n      var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n      if (view) {\n        view.pointerdblclick(evt, localPoint.x, localPoint.y);\n      } else {\n        this.trigger('blank:pointerdblclick', evt, localPoint.x, localPoint.y);\n      }\n    },\n    pointerclick: function (evt) {\n      // magnetpointerclick can stop propagation\n\n      var data = this.eventData(evt);\n      // Trigger event only if mouse has not moved.\n      if (data.mousemoved <= this.options.clickThreshold) {\n        evt = normalizeEvent(evt);\n        var view = this.findView(evt.target);\n        if (this.guard(evt, view)) {\n          return;\n        }\n        var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n        if (view) {\n          view.pointerclick(evt, localPoint.x, localPoint.y);\n        } else {\n          this.trigger('blank:pointerclick', evt, localPoint.x, localPoint.y);\n        }\n      }\n    },\n    contextmenu: function (evt) {\n      if (this.options.preventContextMenu) {\n        evt.preventDefault();\n      }\n      if (this.contextMenuFired) {\n        this.contextMenuFired = false;\n        return;\n      }\n      evt = normalizeEvent(evt);\n      this.contextMenuTrigger(evt);\n    },\n    contextMenuTrigger: function (evt) {\n      var view = this.findView(evt.target);\n      if (this.guard(evt, view)) {\n        return;\n      }\n      var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n      if (view) {\n        view.contextmenu(evt, localPoint.x, localPoint.y);\n      } else {\n        this.trigger('blank:contextmenu', evt, localPoint.x, localPoint.y);\n      }\n    },\n    pointerdown: function (evt) {\n      evt = normalizeEvent(evt);\n      var target = evt.target;\n      var button = evt.button;\n      var view = this.findView(target);\n      var isContextMenu = button === 2;\n      if (view) {\n        if (!isContextMenu && this.guard(evt, view)) {\n          return;\n        }\n        var isTargetFormNode = this.FORM_CONTROL_TAG_NAMES.includes(target.tagName);\n        if (this.options.preventDefaultViewAction && !isTargetFormNode) {\n          // If the target is a form element, we do not want to prevent the default action.\n          // For example, we want to be able to select text in a text input or\n          // to be able to click on a checkbox.\n          evt.preventDefault();\n        }\n        if (isTargetFormNode) {\n          // If the target is a form element, we do not want to start dragging the element.\n          // For example, we want to be able to select text by dragging the mouse.\n          view.preventDefaultInteraction(evt);\n        }\n\n        // Custom event\n        var eventEvt = this.customEventTrigger(evt, view);\n        if (eventEvt) {\n          // `onevent` could have stopped propagation\n          if (eventEvt.isPropagationStopped()) {\n            return;\n          }\n          evt.data = eventEvt.data;\n        }\n\n        // Element magnet\n        var magnetNode = target.closest('[magnet]');\n        if (magnetNode && view.el !== magnetNode && view.el.contains(magnetNode)) {\n          var magnetEvt = normalizeEvent($.Event(evt.originalEvent, {\n            data: evt.data,\n            // Originally the event listener was attached to the magnet element.\n            currentTarget: magnetNode\n          }));\n          this.onmagnet(magnetEvt);\n          if (magnetEvt.isDefaultPrevented()) {\n            evt.preventDefault();\n          }\n          // `onmagnet` stops propagation when `addLinkFromMagnet` is allowed\n          if (magnetEvt.isPropagationStopped()) {\n            // `magnet:pointermove` and `magnet:pointerup` events must be fired\n            if (isContextMenu) {\n              return;\n            }\n            this.delegateDragEvents(view, magnetEvt.data);\n            return;\n          }\n          evt.data = magnetEvt.data;\n        }\n      }\n      if (isContextMenu) {\n        this.contextMenuFired = true;\n        var contextmenuEvt = $.Event(evt.originalEvent, {\n          type: 'contextmenu',\n          data: evt.data\n        });\n        this.contextMenuTrigger(contextmenuEvt);\n      } else {\n        var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n        if (view) {\n          view.pointerdown(evt, localPoint.x, localPoint.y);\n        } else {\n          if (this.options.preventDefaultBlankAction) {\n            evt.preventDefault();\n          }\n          this.trigger('blank:pointerdown', evt, localPoint.x, localPoint.y);\n        }\n        this.delegateDragEvents(view, evt.data);\n      }\n    },\n    pointermove: function (evt) {\n      // mouse moved counter\n      var data = this.eventData(evt);\n      if (!data.mousemoved) {\n        data.mousemoved = 0;\n        // Make sure that events like `mouseenter` and `mouseleave` are\n        // not triggered while the user is dragging a cellView.\n        this.undelegateEvents();\n        // Note: the events are undelegated after the first `pointermove` event.\n        // Not on `pointerdown` to make sure that `dbltap` is recognized.\n      }\n      var mousemoved = ++data.mousemoved;\n      if (mousemoved <= this.options.moveThreshold) {\n        return;\n      }\n      evt = normalizeEvent(evt);\n      var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n      var view = data.sourceView;\n      if (view) {\n        view.pointermove(evt, localPoint.x, localPoint.y);\n      } else {\n        this.trigger('blank:pointermove', evt, localPoint.x, localPoint.y);\n      }\n      this.eventData(evt, data);\n    },\n    pointerup: function (evt) {\n      this.undelegateDocumentEvents();\n      var normalizedEvt = normalizeEvent(evt);\n      var localPoint = this.snapToGrid(normalizedEvt.clientX, normalizedEvt.clientY);\n      var view = this.eventData(evt).sourceView;\n      if (view) {\n        view.pointerup(normalizedEvt, localPoint.x, localPoint.y);\n      } else {\n        this.trigger('blank:pointerup', normalizedEvt, localPoint.x, localPoint.y);\n      }\n      if (!normalizedEvt.isPropagationStopped()) {\n        this.pointerclick($.Event(evt.originalEvent, {\n          type: 'click',\n          data: evt.data\n        }));\n      }\n      this.delegateEvents();\n    },\n    mouseover: function (evt) {\n      evt = normalizeEvent(evt);\n      var view = this.findView(evt.target);\n      if (this.guard(evt, view)) {\n        return;\n      }\n      if (view) {\n        view.mouseover(evt);\n      } else {\n        if (this.el === evt.target) {\n          return;\n        } // prevent border of paper from triggering this\n        this.trigger('blank:mouseover', evt);\n      }\n    },\n    mouseout: function (evt) {\n      evt = normalizeEvent(evt);\n      var view = this.findView(evt.target);\n      if (this.guard(evt, view)) {\n        return;\n      }\n      if (view) {\n        view.mouseout(evt);\n      } else {\n        if (this.el === evt.target) {\n          return;\n        } // prevent border of paper from triggering this\n        this.trigger('blank:mouseout', evt);\n      }\n    },\n    mouseenter: function (evt) {\n      evt = normalizeEvent(evt);\n      var target = evt.target;\n      var relatedTarget = evt.relatedTarget;\n      var currentTarget = evt.currentTarget;\n      var view = this.findView(target);\n      if (this.guard(evt, view)) {\n        return;\n      }\n      var relatedView = this.findView(relatedTarget);\n      if (view) {\n        if (relatedView === view) {\n          // Mouse left a cell tool\n          return;\n        }\n        view.mouseenter(evt);\n        if (this.el.contains(relatedTarget)) {\n          // The pointer remains inside the paper.\n          return;\n        }\n      }\n      if (relatedView) {\n        return;\n      }\n      // prevent double `mouseenter` event if the `relatedTarget` is outside the paper\n      // (mouseenter method would be fired twice)\n      if (currentTarget === this.el) {\n        // `paper` (more descriptive), not `blank`\n        this.trigger('paper:mouseenter', evt);\n      }\n    },\n    mouseleave: function (evt) {\n      evt = normalizeEvent(evt);\n      var target = evt.target;\n      var relatedTarget = evt.relatedTarget;\n      var currentTarget = evt.currentTarget;\n      var view = this.findView(target);\n      if (this.guard(evt, view)) {\n        return;\n      }\n      var relatedView = this.findView(relatedTarget);\n      if (view) {\n        if (relatedView === view) {\n          // Mouse entered a cell tool\n          return;\n        }\n        view.mouseleave(evt);\n        if (this.el.contains(relatedTarget)) {\n          // The pointer has exited a cellView. The pointer is still inside of the paper.\n          return;\n        }\n      }\n      if (relatedView) {\n        // The pointer has entered a new cellView\n        return;\n      }\n      // prevent double `mouseleave` event if the `relatedTarget` is outside the paper\n      // (mouseleave method would be fired twice)\n      if (currentTarget === this.el) {\n        // There is no cellView under the pointer, nor the blank area of the paper\n        this.trigger('paper:mouseleave', evt);\n      }\n    },\n    _processMouseWheelEvtBuf: debounce(function () {\n      var ref = this._mw_evt_buffer;\n      var event = ref.event;\n      var deltas = ref.deltas;\n      var deltaY = deltas.reduce(function (acc, deltaY) {\n        return acc + cap(deltaY, WHEEL_CAP);\n      }, 0);\n      var scale = Math.pow(0.995, deltaY); // 1.005 for inverted pinch/zoom\n      var ref$1 = this.clientToLocalPoint(event.clientX, event.clientY);\n      var x = ref$1.x;\n      var y = ref$1.y;\n      this.trigger('paper:pinch', event, x, y, scale);\n      this._mw_evt_buffer = {\n        event: null,\n        deltas: []\n      };\n    }, WHEEL_WAIT_MS, {\n      maxWait: WHEEL_WAIT_MS\n    }),\n    mousewheel: function (evt) {\n      evt = normalizeEvent(evt);\n      var view = this.findView(evt.target);\n      if (this.guard(evt, view)) {\n        return;\n      }\n      var originalEvent = evt.originalEvent;\n      var localPoint = this.snapToGrid(originalEvent.clientX, originalEvent.clientY);\n      var ref = normalizeWheel(originalEvent);\n      var deltaX = ref.deltaX;\n      var deltaY = ref.deltaY;\n      var pinchHandlers = this._events['paper:pinch'];\n\n      // Touchpad devices will send a fake CTRL press when a pinch is performed\n      //\n      // We also check if there are any subscribers to paper:pinch event. If there are none,\n      // just skip the entire block of code (we don't want to blindly call\n      // .preventDefault() if we really don't have to).\n      if (evt.ctrlKey && pinchHandlers && pinchHandlers.length > 0) {\n        // This is a pinch gesture, it's safe to assume that we must call .preventDefault()\n        originalEvent.preventDefault();\n        this._mw_evt_buffer.event = originalEvent;\n        this._mw_evt_buffer.deltas.push(deltaY);\n        this._processMouseWheelEvtBuf();\n      } else {\n        var delta = Math.max(-1, Math.min(1, originalEvent.wheelDelta));\n        if (view) {\n          view.mousewheel(evt, localPoint.x, localPoint.y, delta);\n        } else {\n          this.trigger('blank:mousewheel', evt, localPoint.x, localPoint.y, delta);\n        }\n        this.trigger('paper:pan', evt, deltaX, deltaY);\n      }\n    },\n    onevent: function (evt) {\n      var eventNode = evt.currentTarget;\n      var eventName = eventNode.getAttribute('event');\n      if (eventName) {\n        var view = this.findView(eventNode);\n        if (view) {\n          evt = normalizeEvent(evt);\n          if (this.guard(evt, view)) {\n            return;\n          }\n          var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n          view.onevent(evt, eventName, localPoint.x, localPoint.y);\n        }\n      }\n    },\n    magnetEvent: function (evt, handler) {\n      var magnetNode = evt.currentTarget;\n      var magnetValue = magnetNode.getAttribute('magnet');\n      if (magnetValue) {\n        var view = this.findView(magnetNode);\n        if (view) {\n          evt = normalizeEvent(evt);\n          if (this.guard(evt, view)) {\n            return;\n          }\n          var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n          handler.call(this, view, evt, magnetNode, localPoint.x, localPoint.y);\n        }\n      }\n    },\n    onmagnet: function (evt) {\n      if (evt.button === 2) {\n        this.contextMenuFired = true;\n        this.magnetContextMenuFired = true;\n        var contextmenuEvt = $.Event(evt.originalEvent, {\n          type: 'contextmenu',\n          data: evt.data,\n          currentTarget: evt.currentTarget\n        });\n        this.magnetContextMenuTrigger(contextmenuEvt);\n        if (contextmenuEvt.isPropagationStopped()) {\n          evt.stopPropagation();\n        }\n      } else {\n        this.magnetEvent(evt, function (view, evt, _, x, y) {\n          view.onmagnet(evt, x, y);\n        });\n      }\n    },\n    magnetpointerdblclick: function (evt) {\n      this.magnetEvent(evt, function (view, evt, magnet, x, y) {\n        view.magnetpointerdblclick(evt, magnet, x, y);\n      });\n    },\n    magnetcontextmenu: function (evt) {\n      if (this.options.preventContextMenu) {\n        evt.preventDefault();\n      }\n      if (this.magnetContextMenuFired) {\n        this.magnetContextMenuFired = false;\n        return;\n      }\n      this.magnetContextMenuTrigger(evt);\n    },\n    magnetContextMenuTrigger: function (evt) {\n      this.magnetEvent(evt, function (view, evt, magnet, x, y) {\n        view.magnetcontextmenu(evt, magnet, x, y);\n      });\n    },\n    onlabel: function (evt) {\n      var labelNode = evt.currentTarget;\n      var view = this.findView(labelNode);\n      if (!view) {\n        return;\n      }\n      evt = normalizeEvent(evt);\n      if (this.guard(evt, view)) {\n        return;\n      }\n\n      // Custom event\n      var eventEvt = this.customEventTrigger(evt, view, labelNode);\n      if (eventEvt) {\n        // `onevent` could have stopped propagation\n        if (eventEvt.isPropagationStopped()) {\n          return;\n        }\n        evt.data = eventEvt.data;\n      }\n      var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n      view.onlabel(evt, localPoint.x, localPoint.y);\n    },\n    getPointerArgs: function getPointerArgs(evt) {\n      var normalizedEvt = normalizeEvent(evt);\n      var ref = this.snapToGrid(normalizedEvt.clientX, normalizedEvt.clientY);\n      var x = ref.x;\n      var y = ref.y;\n      return [normalizedEvt, x, y];\n    },\n    delegateDragEvents: function (view, data) {\n      data || (data = {});\n      this.eventData({\n        data: data\n      }, {\n        sourceView: view || null,\n        mousemoved: 0\n      });\n      this.delegateDocumentEvents(null, data);\n    },\n    // Guard the specified event. If the event should be ignored, guard returns `true`.\n    // Otherwise, it returns `false`.\n    guard: function (evt, view) {\n      if (evt.type === 'mousedown' && evt.button === 2) {\n        // handled as `contextmenu` type\n        return true;\n      }\n      if (this.options.guard && this.options.guard(evt, view)) {\n        return true;\n      }\n      if (evt.data && evt.data.guarded !== undefined) {\n        return evt.data.guarded;\n      }\n      var target = evt.target;\n      if (this.GUARDED_TAG_NAMES.includes(target.tagName)) {\n        return true;\n      }\n      if (view && view.model && view.model instanceof Cell) {\n        return false;\n      }\n      if (this.svg === target || this.el === target || $.contains(this.svg, target)) {\n        return false;\n      }\n      return true; // Event guarded. Paper should not react on it in any way.\n    },\n    setGridSize: function (gridSize) {\n      var ref = this;\n      var options = ref.options;\n      options.gridSize = gridSize;\n      if (options.drawGrid && !options.drawGridSize) {\n        // Do not redraw the grid if the `drawGridSize` is set.\n        this.drawGrid();\n      }\n      return this;\n    },\n    clearGrid: function () {\n      if (this.$grid) {\n        this.$grid.css('backgroundImage', 'none');\n      }\n      return this;\n    },\n    _getGridRefs: function () {\n      if (!this._gridCache) {\n        this._gridCache = {\n          root: V('svg', {\n            width: '100%',\n            height: '100%'\n          }, V('defs')),\n          patterns: {},\n          add: function (id, vel) {\n            V(this.root.node.childNodes[0]).append(vel);\n            this.patterns[id] = vel;\n            this.root.append(V('rect', {\n              width: '100%',\n              height: '100%',\n              fill: 'url(#' + id + ')'\n            }));\n          },\n          get: function (id) {\n            return this.patterns[id];\n          },\n          exist: function (id) {\n            return this.patterns[id] !== undefined;\n          }\n        };\n      }\n      return this._gridCache;\n    },\n    setGrid: function (drawGrid) {\n      this.clearGrid();\n      this._gridCache = null;\n      this._gridSettings = [];\n      var optionsList = Array.isArray(drawGrid) ? drawGrid : [drawGrid || {}];\n      optionsList.forEach(function (item) {\n        this._gridSettings.push.apply(this._gridSettings, this._resolveDrawGridOption(item));\n      }, this);\n      return this;\n    },\n    _resolveDrawGridOption: function (opt) {\n      var namespace = this.constructor.gridPatterns;\n      if (isString(opt) && Array.isArray(namespace[opt])) {\n        return namespace[opt].map(function (item) {\n          return assign({}, item);\n        });\n      }\n      var options = opt || {\n        args: [{}]\n      };\n      var isArray = Array.isArray(options);\n      var name = options.name;\n      if (!isArray && !name && !options.markup) {\n        name = 'dot';\n      }\n      if (name && Array.isArray(namespace[name])) {\n        var pattern = namespace[name].map(function (item) {\n          return assign({}, item);\n        });\n        var args = Array.isArray(options.args) ? options.args : [options.args || {}];\n        defaults(args[0], omit(opt, 'args'));\n        for (var i = 0; i < args.length; i++) {\n          if (pattern[i]) {\n            assign(pattern[i], args[i]);\n          }\n        }\n        return pattern;\n      }\n      return isArray ? options : [options];\n    },\n    drawGrid: function (opt) {\n      var gridSize = this.options.drawGridSize || this.options.gridSize;\n      if (gridSize <= 1) {\n        return this.clearGrid();\n      }\n      var localOptions = Array.isArray(opt) ? opt : [opt];\n      var ctm = this.matrix();\n      var refs = this._getGridRefs();\n      this._gridSettings.forEach(function (gridLayerSetting, index) {\n        var id = 'pattern_' + index;\n        var options = merge(gridLayerSetting, localOptions[index], {\n          sx: ctm.a || 1,\n          sy: ctm.d || 1,\n          ox: ctm.e || 0,\n          oy: ctm.f || 0\n        });\n        options.width = gridSize * (ctm.a || 1) * (options.scaleFactor || 1);\n        options.height = gridSize * (ctm.d || 1) * (options.scaleFactor || 1);\n        if (!refs.exist(id)) {\n          refs.add(id, V('pattern', {\n            id: id,\n            patternUnits: 'userSpaceOnUse'\n          }, V(options.markup)));\n        }\n        var patternDefVel = refs.get(id);\n        if (isFunction(options.update)) {\n          options.update(patternDefVel.node.childNodes[0], options);\n        }\n        var x = options.ox % options.width;\n        if (x < 0) {\n          x += options.width;\n        }\n        var y = options.oy % options.height;\n        if (y < 0) {\n          y += options.height;\n        }\n        patternDefVel.attr({\n          x: x,\n          y: y,\n          width: options.width,\n          height: options.height\n        });\n      });\n      var patternUri = new XMLSerializer().serializeToString(refs.root.node);\n      patternUri = 'url(data:image/svg+xml;base64,' + btoa(patternUri) + ')';\n      this.$grid.css('backgroundImage', patternUri);\n      return this;\n    },\n    updateBackgroundImage: function (opt) {\n      opt = opt || {};\n      var backgroundPosition = opt.position || 'center';\n      var backgroundSize = opt.size || 'auto auto';\n      var currentScale = this.scale();\n      var currentTranslate = this.translate();\n\n      // backgroundPosition\n      if (isObject$1(backgroundPosition)) {\n        var x = currentTranslate.tx + currentScale.sx * (backgroundPosition.x || 0);\n        var y = currentTranslate.ty + currentScale.sy * (backgroundPosition.y || 0);\n        backgroundPosition = x + 'px ' + y + 'px';\n      }\n\n      // backgroundSize\n      if (isObject$1(backgroundSize)) {\n        backgroundSize = new Rect(backgroundSize).scale(currentScale.sx, currentScale.sy);\n        backgroundSize = backgroundSize.width + 'px ' + backgroundSize.height + 'px';\n      }\n      this.$background.css({\n        backgroundSize: backgroundSize,\n        backgroundPosition: backgroundPosition\n      });\n    },\n    drawBackgroundImage: function (img, opt) {\n      // Clear the background image if no image provided\n      if (!(img instanceof HTMLImageElement)) {\n        this.$background.css('backgroundImage', '');\n        return;\n      }\n      if (!this._background || this._background.id !== opt.id) {\n        // Draw only the last image requested (see drawBackground())\n        return;\n      }\n      opt = opt || {};\n      var backgroundImage;\n      var backgroundSize = opt.size;\n      var backgroundRepeat = opt.repeat || 'no-repeat';\n      var backgroundOpacity = opt.opacity || 1;\n      var backgroundQuality = Math.abs(opt.quality) || 1;\n      var backgroundPattern = this.constructor.backgroundPatterns[camelCase(backgroundRepeat)];\n      if (isFunction(backgroundPattern)) {\n        // 'flip-x', 'flip-y', 'flip-xy', 'watermark' and custom\n        img.width *= backgroundQuality;\n        img.height *= backgroundQuality;\n        var canvas = backgroundPattern(img, opt);\n        if (!(canvas instanceof HTMLCanvasElement)) {\n          throw new Error('dia.Paper: background pattern must return an HTML Canvas instance');\n        }\n        backgroundImage = canvas.toDataURL('image/png');\n        backgroundRepeat = 'repeat';\n        if (isObject$1(backgroundSize)) {\n          // recalculate the tile size if an object passed in\n          backgroundSize.width *= canvas.width / img.width;\n          backgroundSize.height *= canvas.height / img.height;\n        } else if (backgroundSize === undefined) {\n          // calculate the tile size if no provided\n          opt.size = {\n            width: canvas.width / backgroundQuality,\n            height: canvas.height / backgroundQuality\n          };\n        }\n      } else {\n        // backgroundRepeat:\n        // no-repeat', 'round', 'space', 'repeat', 'repeat-x', 'repeat-y'\n        backgroundImage = img.src;\n        if (backgroundSize === undefined) {\n          // pass the image size for  the backgroundSize if no size provided\n          opt.size = {\n            width: img.width,\n            height: img.height\n          };\n        }\n      }\n      this.$background.css({\n        opacity: backgroundOpacity,\n        backgroundRepeat: backgroundRepeat,\n        backgroundImage: 'url(' + backgroundImage + ')'\n      });\n      this.updateBackgroundImage(opt);\n    },\n    updateBackgroundColor: function (color) {\n      this.$el.css('backgroundColor', color || '');\n    },\n    drawBackground: function (opt) {\n      opt = opt || {};\n      this.updateBackgroundColor(opt.color);\n      if (opt.image) {\n        opt = this._background = cloneDeep(opt);\n        guid(opt);\n        var img = document.createElement('img');\n        img.onload = this.drawBackgroundImage.bind(this, img, opt);\n        img.src = opt.image;\n      } else {\n        this.drawBackgroundImage(null);\n        this._background = null;\n      }\n      return this;\n    },\n    setInteractivity: function (value) {\n      this.options.interactive = value;\n      invoke(this._views, 'setInteractivity', value);\n    },\n    // Paper definitions.\n    // ------------------\n\n    isDefined: function (defId) {\n      return !!this.svg.getElementById(defId);\n    },\n    defineFilter: function (filter$1) {\n      if (!isObject$1(filter$1)) {\n        throw new TypeError('dia.Paper: defineFilter() requires 1. argument to be an object.');\n      }\n      var filterId = filter$1.id;\n      var name = filter$1.name;\n      // Generate a hash code from the stringified filter definition. This gives us\n      // a unique filter ID for different definitions.\n      if (!filterId) {\n        filterId = name + this.svg.id + hashCode(JSON.stringify(filter$1));\n      }\n      // If the filter already exists in the document,\n      // we're done and we can just use it (reference it using `url()`).\n      // If not, create one.\n      if (!this.isDefined(filterId)) {\n        var namespace = filter;\n        var filterSVGString = namespace[name] && namespace[name](filter$1.args || {});\n        if (!filterSVGString) {\n          throw new Error('Non-existing filter ' + name);\n        }\n\n        // Set the filter area to be 3x the bounding box of the cell\n        // and center the filter around the cell.\n        var filterAttrs = assign({\n          filterUnits: 'objectBoundingBox',\n          x: -1,\n          y: -1,\n          width: 3,\n          height: 3\n        }, filter$1.attrs, {\n          id: filterId\n        });\n        V(filterSVGString, filterAttrs).appendTo(this.defs);\n      }\n      return filterId;\n    },\n    defineGradient: function (gradient) {\n      if (!isObject$1(gradient)) {\n        throw new TypeError('dia.Paper: defineGradient() requires 1. argument to be an object.');\n      }\n      var ref = this;\n      var svg = ref.svg;\n      var defs = ref.defs;\n      var type = gradient.type;\n      var id = gradient.id;\n      if (id === void 0) id = type + svg.id + hashCode(JSON.stringify(gradient));\n      var stops = gradient.stops;\n      var attrs = gradient.attrs;\n      if (attrs === void 0) attrs = {};\n      // If the gradient already exists in the document,\n      // we're done and we can just use it (reference it using `url()`).\n      if (this.isDefined(id)) {\n        return id;\n      }\n      // If not, create one.\n      var stopVEls = toArray(stops).map(function (ref) {\n        var offset = ref.offset;\n        var color = ref.color;\n        var opacity = ref.opacity;\n        return V('stop').attr({\n          'offset': offset,\n          'stop-color': color,\n          'stop-opacity': Number.isFinite(opacity) ? opacity : 1\n        });\n      });\n      var gradientVEl = V(type, attrs, stopVEls);\n      gradientVEl.id = id;\n      gradientVEl.appendTo(defs);\n      return id;\n    },\n    definePattern: function (pattern) {\n      if (!isObject$1(pattern)) {\n        throw new TypeError('dia.Paper: definePattern() requires 1. argument to be an object.');\n      }\n      var ref = this;\n      var svg = ref.svg;\n      var defs = ref.defs;\n      var id = pattern.id;\n      if (id === void 0) id = svg.id + hashCode(JSON.stringify(pattern));\n      var markup = pattern.markup;\n      var attrs = pattern.attrs;\n      if (attrs === void 0) attrs = {};\n      if (!markup) {\n        throw new TypeError('dia.Paper: definePattern() requires markup.');\n      }\n      // If the gradient already exists in the document,\n      // we're done and we can just use it (reference it using `url()`).\n      if (this.isDefined(id)) {\n        return id;\n      }\n      // If not, create one.\n      var patternVEl = V('pattern', {\n        patternUnits: 'userSpaceOnUse'\n      });\n      patternVEl.id = id;\n      patternVEl.attr(attrs);\n      if (typeof markup === 'string') {\n        patternVEl.append(V(markup));\n      } else {\n        var ref$1 = parseDOMJSON(markup);\n        var fragment = ref$1.fragment;\n        patternVEl.append(fragment);\n      }\n      patternVEl.appendTo(defs);\n      return id;\n    },\n    defineMarker: function (marker) {\n      if (!isObject$1(marker)) {\n        throw new TypeError('dia.Paper: defineMarker() requires the first argument to be an object.');\n      }\n      var ref = this;\n      var svg = ref.svg;\n      var defs = ref.defs;\n      var id = marker.id;\n      if (id === void 0) id = svg.id + hashCode(JSON.stringify(marker));\n      var markup = marker.markup;\n      var attrs = marker.attrs;\n      if (attrs === void 0) attrs = {};\n      var markerUnits = marker.markerUnits;\n      if (markerUnits === void 0) markerUnits = 'userSpaceOnUse';\n      // If the marker already exists in the document,\n      // we're done and we can just use it (reference it using `url()`).\n      if (this.isDefined(id)) {\n        return id;\n      }\n      // If not, create one.\n      var markerVEl = V('marker', {\n        orient: 'auto',\n        overflow: 'visible',\n        markerUnits: markerUnits\n      });\n      markerVEl.id = id;\n      markerVEl.attr(attrs);\n      var markerContentVEl;\n      if (markup) {\n        var markupVEl;\n        if (typeof markup === 'string') {\n          // Marker object has a `markup` property of type string.\n          // - Construct V from the provided string.\n          markupVEl = V(markup);\n          // `markupVEl` is now either a single VEl, or an array of VEls.\n          // - Coerce it to an array.\n          markupVEl = Array.isArray(markupVEl) ? markupVEl : [markupVEl];\n        } else {\n          // Marker object has a `markup` property of type object.\n          // - Construct V from the object by parsing it as DOM JSON.\n          var ref$1 = parseDOMJSON(markup);\n          var fragment = ref$1.fragment;\n          markupVEl = V(fragment).children();\n        }\n        // `markupVEl` is an array with one or more VEls inside.\n        // - If there are multiple VEls, wrap them in a newly-constructed <g> element\n        if (markupVEl.length > 1) {\n          markerContentVEl = V('g').append(markupVEl);\n        } else {\n          markerContentVEl = markupVEl[0];\n        }\n      } else {\n        // Marker object is a flat structure.\n        // - Construct a new V of type `marker.type`.\n        var type = marker.type;\n        if (type === void 0) type = 'path';\n        markerContentVEl = V(type);\n      }\n      // `markerContentVEl` is a single VEl.\n      // Assign additional attributes to it (= context attributes + marker attributes):\n      // - Attribute values are taken from non-special properties of `marker`.\n      var markerAttrs = omit(marker, 'type', 'id', 'markup', 'attrs', 'markerUnits');\n      var markerAttrsKeys = Object.keys(markerAttrs);\n      markerAttrsKeys.forEach(function (key) {\n        var value = markerAttrs[key];\n        var markupValue = markerContentVEl.attr(key); // value coming from markupVEl (if any) = higher priority\n        if (markupValue == null) {\n          // Default logic:\n          markerContentVEl.attr(key, value);\n        } else {\n          // Properties with special logic should be added as cases to this switch block:\n          switch (key) {\n            case 'transform':\n              // - Prepend `transform` to existing value.\n              markerContentVEl.attr(key, value + ' ' + markupValue);\n              break;\n          }\n        }\n      });\n      markerContentVEl.appendTo(markerVEl);\n      markerVEl.appendTo(defs);\n      return id;\n    },\n    customEventTrigger: function (evt, view, rootNode) {\n      if (rootNode === void 0) rootNode = view.el;\n      var eventNode = evt.target.closest('[event]');\n      if (eventNode && rootNode !== eventNode && view.el.contains(eventNode)) {\n        var eventEvt = normalizeEvent($.Event(evt.originalEvent, {\n          data: evt.data,\n          // Originally the event listener was attached to the event element.\n          currentTarget: eventNode\n        }));\n        this.onevent(eventEvt);\n        if (eventEvt.isDefaultPrevented()) {\n          evt.preventDefault();\n        }\n        return eventEvt;\n      }\n      return null;\n    }\n  }, {\n    sorting: sortingTypes,\n    Layers: LayersNames,\n    backgroundPatterns: {\n      flipXy: function (img) {\n        // d b\n        // q p\n\n        var canvas = document.createElement('canvas');\n        var imgWidth = img.width;\n        var imgHeight = img.height;\n        canvas.width = 2 * imgWidth;\n        canvas.height = 2 * imgHeight;\n        var ctx = canvas.getContext('2d');\n        // top-left image\n        ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n        // xy-flipped bottom-right image\n        ctx.setTransform(-1, 0, 0, -1, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n        // x-flipped top-right image\n        ctx.setTransform(-1, 0, 0, 1, canvas.width, 0);\n        ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n        // y-flipped bottom-left image\n        ctx.setTransform(1, 0, 0, -1, 0, canvas.height);\n        ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n        return canvas;\n      },\n      flipX: function (img) {\n        // d b\n        // d b\n\n        var canvas = document.createElement('canvas');\n        var imgWidth = img.width;\n        var imgHeight = img.height;\n        canvas.width = imgWidth * 2;\n        canvas.height = imgHeight;\n        var ctx = canvas.getContext('2d');\n        // left image\n        ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n        // flipped right image\n        ctx.translate(2 * imgWidth, 0);\n        ctx.scale(-1, 1);\n        ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n        return canvas;\n      },\n      flipY: function (img) {\n        // d d\n        // q q\n\n        var canvas = document.createElement('canvas');\n        var imgWidth = img.width;\n        var imgHeight = img.height;\n        canvas.width = imgWidth;\n        canvas.height = imgHeight * 2;\n        var ctx = canvas.getContext('2d');\n        // top image\n        ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n        // flipped bottom image\n        ctx.translate(0, 2 * imgHeight);\n        ctx.scale(1, -1);\n        ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n        return canvas;\n      },\n      watermark: function (img, opt) {\n        //   d\n        // d\n\n        opt = opt || {};\n        var imgWidth = img.width;\n        var imgHeight = img.height;\n        var canvas = document.createElement('canvas');\n        canvas.width = imgWidth * 3;\n        canvas.height = imgHeight * 3;\n        var ctx = canvas.getContext('2d');\n        var angle = isNumber(opt.watermarkAngle) ? -opt.watermarkAngle : -20;\n        var radians = toRad(angle);\n        var stepX = canvas.width / 4;\n        var stepY = canvas.height / 4;\n        for (var i = 0; i < 4; i++) {\n          for (var j = 0; j < 4; j++) {\n            if ((i + j) % 2 > 0) {\n              // reset the current transformations\n              ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n              ctx.rotate(radians);\n              ctx.drawImage(img, -imgWidth / 2, -imgHeight / 2, imgWidth, imgHeight);\n            }\n          }\n        }\n        return canvas;\n      }\n    },\n    gridPatterns: {\n      dot: [{\n        color: '#AAAAAA',\n        thickness: 1,\n        markup: 'rect',\n        update: function (el, opt) {\n          V(el).attr({\n            width: opt.thickness * opt.sx,\n            height: opt.thickness * opt.sy,\n            fill: opt.color\n          });\n        }\n      }],\n      fixedDot: [{\n        color: '#AAAAAA',\n        thickness: 1,\n        markup: 'rect',\n        update: function (el, opt) {\n          var size = opt.sx <= 1 ? opt.thickness * opt.sx : opt.thickness;\n          V(el).attr({\n            width: size,\n            height: size,\n            fill: opt.color\n          });\n        }\n      }],\n      mesh: [{\n        color: '#AAAAAA',\n        thickness: 1,\n        markup: 'path',\n        update: function (el, opt) {\n          var d;\n          var width = opt.width;\n          var height = opt.height;\n          var thickness = opt.thickness;\n          if (width - thickness >= 0 && height - thickness >= 0) {\n            d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n          } else {\n            d = 'M 0 0 0 0';\n          }\n          V(el).attr({\n            'd': d,\n            stroke: opt.color,\n            'stroke-width': opt.thickness\n          });\n        }\n      }],\n      doubleMesh: [{\n        color: '#AAAAAA',\n        thickness: 1,\n        markup: 'path',\n        update: function (el, opt) {\n          var d;\n          var width = opt.width;\n          var height = opt.height;\n          var thickness = opt.thickness;\n          if (width - thickness >= 0 && height - thickness >= 0) {\n            d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n          } else {\n            d = 'M 0 0 0 0';\n          }\n          V(el).attr({\n            'd': d,\n            stroke: opt.color,\n            'stroke-width': opt.thickness\n          });\n        }\n      }, {\n        color: '#000000',\n        thickness: 3,\n        scaleFactor: 4,\n        markup: 'path',\n        update: function (el, opt) {\n          var d;\n          var width = opt.width;\n          var height = opt.height;\n          var thickness = opt.thickness;\n          if (width - thickness >= 0 && height - thickness >= 0) {\n            d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n          } else {\n            d = 'M 0 0 0 0';\n          }\n          V(el).attr({\n            'd': d,\n            stroke: opt.color,\n            'stroke-width': opt.thickness\n          });\n        }\n      }]\n    }\n  });\n  var ToolView = View.extend({\n    name: null,\n    tagName: 'g',\n    className: 'tool',\n    svgElement: true,\n    _visible: true,\n    init: function () {\n      var name = this.name;\n      if (name) {\n        this.vel.attr('data-tool-name', name);\n      }\n    },\n    configure: function (view, toolsView) {\n      this.relatedView = view;\n      this.paper = view.paper;\n      this.parentView = toolsView;\n      this.simulateRelatedView(this.el);\n      // Delegate events in case the ToolView was removed from the DOM and reused.\n      this.delegateEvents();\n      return this;\n    },\n    simulateRelatedView: function (el) {\n      if (el) {\n        el.setAttribute('model-id', this.relatedView.model.id);\n      }\n    },\n    getName: function () {\n      return this.name;\n    },\n    show: function () {\n      this.el.style.display = '';\n      this._visible = true;\n    },\n    hide: function () {\n      this.el.style.display = 'none';\n      this._visible = false;\n    },\n    isVisible: function () {\n      return !!this._visible;\n    },\n    focus: function () {\n      var opacity = this.options.focusOpacity;\n      if (isFinite(opacity)) {\n        this.el.style.opacity = opacity;\n      }\n      this.parentView.focusTool(this);\n    },\n    blur: function () {\n      this.el.style.opacity = '';\n      this.parentView.blurTool(this);\n    },\n    update: function () {\n      // to be overridden\n    },\n    guard: function (evt) {\n      // Let the context-menu event bubble up to the relatedView\n      var ref = this;\n      var paper = ref.paper;\n      var relatedView = ref.relatedView;\n      if (!paper || !relatedView) {\n        return true;\n      }\n      return paper.guard(evt, relatedView);\n    }\n  });\n  var ToolsView = View.extend({\n    tagName: 'g',\n    className: 'tools',\n    svgElement: true,\n    tools: null,\n    isRendered: false,\n    options: {\n      tools: null,\n      relatedView: null,\n      name: null\n      // layer?: LayersNames.TOOLS\n      // z?: number\n    },\n    configure: function (options) {\n      options = assign(this.options, options);\n      var tools = options.tools;\n      if (!Array.isArray(tools)) {\n        return this;\n      }\n      var relatedView = options.relatedView;\n      if (!(relatedView instanceof CellView)) {\n        return this;\n      }\n      var views = this.tools = [];\n      for (var i = 0, n = tools.length; i < n; i++) {\n        var tool = tools[i];\n        if (!(tool instanceof ToolView)) {\n          continue;\n        }\n        tool.configure(relatedView, this);\n        this.vel.append(tool.el);\n        views.push(tool);\n      }\n      this.isRendered = false;\n      relatedView.requestUpdate(relatedView.getFlag('TOOLS'));\n      return this;\n    },\n    getName: function () {\n      return this.options.name;\n    },\n    update: function (opt) {\n      opt || (opt = {});\n      var tools = this.tools;\n      if (!tools) {\n        return this;\n      }\n      var isRendered = this.isRendered;\n      for (var i = 0, n = tools.length; i < n; i++) {\n        var tool = tools[i];\n        if (!isRendered) {\n          // First update executes render()\n          tool.render();\n        } else if (opt.tool !== tool.cid && tool.isVisible()) {\n          tool.update();\n        }\n      }\n      if (!this.isMounted()) {\n        this.mount();\n      }\n      if (!isRendered) {\n        // Make sure tools are visible (if they were hidden and the tool removed)\n        this.blurTool();\n        this.isRendered = true;\n      }\n      return this;\n    },\n    focusTool: function (focusedTool) {\n      var tools = this.tools;\n      if (!tools) {\n        return this;\n      }\n      for (var i = 0, n = tools.length; i < n; i++) {\n        var tool = tools[i];\n        if (focusedTool === tool) {\n          tool.show();\n        } else {\n          tool.hide();\n        }\n      }\n      return this;\n    },\n    blurTool: function (blurredTool) {\n      var tools = this.tools;\n      if (!tools) {\n        return this;\n      }\n      for (var i = 0, n = tools.length; i < n; i++) {\n        var tool = tools[i];\n        if (tool !== blurredTool && !tool.isVisible()) {\n          tool.show();\n          tool.update();\n        }\n      }\n      return this;\n    },\n    hide: function () {\n      return this.focusTool(null);\n    },\n    show: function () {\n      return this.blurTool(null);\n    },\n    onRemove: function () {\n      var tools = this.tools;\n      if (!tools) {\n        return this;\n      }\n      for (var i = 0, n = tools.length; i < n; i++) {\n        tools[i].remove();\n      }\n      this.tools = null;\n    },\n    mount: function () {\n      var ref = this;\n      var options = ref.options;\n      var el = ref.el;\n      var relatedView = options.relatedView;\n      var layer = options.layer;\n      if (layer === void 0) layer = LayersNames.TOOLS;\n      var z = options.z;\n      if (relatedView) {\n        if (layer) {\n          relatedView.paper.getLayerView(layer).insertSortedNode(el, z);\n        } else {\n          relatedView.el.appendChild(el);\n        }\n      }\n      return this;\n    }\n  });\n  var index$2 = {\n    Graph: Graph,\n    attributes: attributes,\n    LayersNames: LayersNames,\n    PaperLayer: PaperLayer,\n    Cell: Cell,\n    CellView: CellView,\n    Element: Element$1,\n    ElementView: ElementView,\n    Link: Link,\n    LinkView: LinkView,\n    Paper: Paper,\n    ToolView: ToolView,\n    ToolsView: ToolsView,\n    HighlighterView: HighlighterView\n  };\n  var DirectedGraph = {\n    exportElement: function (element) {\n      // The width and height of the element.\n      return element.size();\n    },\n    exportLink: function (link) {\n      var labelSize = link.get('labelSize') || {};\n      var edge = {\n        // The number of ranks to keep between the source and target of the edge.\n        minLen: link.get('minLen') || 1,\n        // The weight to assign edges. Higher weight edges are generally\n        // made shorter and straighter than lower weight edges.\n        weight: link.get('weight') || 1,\n        // Where to place the label relative to the edge.\n        // l = left, c = center r = right.\n        labelpos: link.get('labelPosition') || 'c',\n        // How many pixels to move the label away from the edge.\n        // Applies only when labelpos is l or r.\n        labeloffset: link.get('labelOffset') || 0,\n        // The width of the edge label in pixels.\n        width: labelSize.width || 0,\n        // The height of the edge label in pixels.\n        height: labelSize.height || 0\n      };\n      return edge;\n    },\n    importElement: function (opt, v, gl) {\n      var element = this.getCell(v);\n      var glNode = gl.node(v);\n      if (opt.setPosition) {\n        opt.setPosition(element, glNode);\n      } else {\n        element.set('position', {\n          x: glNode.x - glNode.width / 2,\n          y: glNode.y - glNode.height / 2\n        });\n      }\n    },\n    importLink: function (opt, edgeObj, gl) {\n      var SIMPLIFY_THRESHOLD = 0.001;\n      var link = this.getCell(edgeObj.name);\n      var glEdge = gl.edge(edgeObj);\n      var points = glEdge.points || [];\n      var polyline = new Polyline(points);\n\n      // check the `setLinkVertices` here for backwards compatibility\n      if (opt.setVertices || opt.setLinkVertices) {\n        if (isFunction(opt.setVertices)) {\n          opt.setVertices(link, points);\n        } else {\n          // simplify the `points` polyline\n          polyline.simplify({\n            threshold: SIMPLIFY_THRESHOLD\n          });\n          var polylinePoints = polyline.points.map(function (point) {\n            return point.toJSON();\n          }); // JSON of points after simplification\n          var numPolylinePoints = polylinePoints.length; // number of points after simplification\n          // set simplified polyline points as link vertices\n          // remove first and last polyline points (= source/target sonnectionPoints)\n          link.set('vertices', polylinePoints.slice(1, numPolylinePoints - 1));\n        }\n      }\n      if (opt.setLabels && 'x' in glEdge && 'y' in glEdge) {\n        var labelPosition = {\n          x: glEdge.x,\n          y: glEdge.y\n        };\n        if (isFunction(opt.setLabels)) {\n          opt.setLabels(link, labelPosition, points);\n        } else {\n          // convert the absolute label position to a relative position\n          // towards the closest point on the edge\n          var length = polyline.closestPointLength(labelPosition);\n          var closestPoint = polyline.pointAtLength(length);\n          var distance = length / polyline.length();\n          var offset = new Point(labelPosition).difference(closestPoint).toJSON();\n          link.label(0, {\n            position: {\n              distance: distance,\n              offset: offset\n            }\n          });\n        }\n      }\n    },\n    layout: function (graphOrCells, opt) {\n      var graph;\n      if (graphOrCells instanceof Graph) {\n        graph = graphOrCells;\n      } else {\n        // Reset cells in dry mode so the graph reference is not stored on the cells.\n        // `sort: false` to prevent elements to change their order based on the z-index\n        graph = new Graph().resetCells(graphOrCells, {\n          dry: true,\n          sort: false\n        });\n      }\n\n      // This is not needed anymore.\n      graphOrCells = null;\n      opt = defaults(opt || {}, {\n        resizeClusters: true,\n        clusterPadding: 10,\n        exportElement: this.exportElement,\n        exportLink: this.exportLink\n      });\n\n      /* eslint-disable no-undef */\n      var dagreUtil = opt.dagre || (typeof dagre !== 'undefined' ? dagre : undefined);\n      /* eslint-enable no-undef */\n\n      if (dagreUtil === undefined) {\n        throw new Error('The the \"dagre\" utility is a mandatory dependency.');\n      }\n\n      // create a graphlib.Graph that represents the joint.dia.Graph\n      // var glGraph = graph.toGraphLib({\n      var glGraph = DirectedGraph.toGraphLib(graph, {\n        graphlib: opt.graphlib,\n        directed: true,\n        // We are about to use edge naming feature.\n        multigraph: true,\n        // We are able to layout graphs with embeds.\n        compound: true,\n        setNodeLabel: opt.exportElement,\n        setEdgeLabel: opt.exportLink,\n        setEdgeName: function (link) {\n          // Graphlib edges have no ids. We use edge name property\n          // to store and retrieve ids instead.\n          return link.id;\n        }\n      });\n      var glLabel = {};\n      var marginX = opt.marginX || 0;\n      var marginY = opt.marginY || 0;\n\n      // Dagre layout accepts options as lower case.\n      // Direction for rank nodes. Can be TB, BT, LR, or RL\n      if (opt.rankDir) {\n        glLabel.rankdir = opt.rankDir;\n      }\n      // Alignment for rank nodes. Can be UL, UR, DL, or DR\n      if (opt.align) {\n        glLabel.align = opt.align;\n      }\n      // Number of pixels that separate nodes horizontally in the layout.\n      if (opt.nodeSep) {\n        glLabel.nodesep = opt.nodeSep;\n      }\n      // Number of pixels that separate edges horizontally in the layout.\n      if (opt.edgeSep) {\n        glLabel.edgesep = opt.edgeSep;\n      }\n      // Number of pixels between each rank in the layout.\n      if (opt.rankSep) {\n        glLabel.ranksep = opt.rankSep;\n      }\n      // Type of algorithm to assign a rank to each node in the input graph.\n      // Possible values: network-simplex, tight-tree or longest-path\n      if (opt.ranker) {\n        glLabel.ranker = opt.ranker;\n      }\n      // Number of pixels to use as a margin around the left and right of the graph.\n      if (marginX) {\n        glLabel.marginx = marginX;\n      }\n      // Number of pixels to use as a margin around the top and bottom of the graph.\n      if (marginY) {\n        glLabel.marginy = marginY;\n      }\n\n      // Set the option object for the graph label.\n      glGraph.setGraph(glLabel);\n\n      // Executes the layout.\n      dagreUtil.layout(glGraph, {\n        debugTiming: !!opt.debugTiming\n      });\n\n      // Wrap all graph changes into a batch.\n      graph.startBatch('layout');\n      DirectedGraph.fromGraphLib(glGraph, {\n        importNode: this.importElement.bind(graph, opt),\n        importEdge: this.importLink.bind(graph, opt)\n      });\n\n      // // Update the graph.\n      // graph.fromGraphLib(glGraph, {\n      //     importNode: this.importElement.bind(graph, opt),\n      //     importEdge: this.importLink.bind(graph, opt)\n      // });\n\n      if (opt.resizeClusters) {\n        // Resize and reposition cluster elements (parents of other elements)\n        // to fit their children.\n        // 1. filter clusters only\n        // 2. map id on cells\n        // 3. sort cells by their depth (the deepest first)\n        // 4. resize cell to fit their direct children only.\n        var clusters = glGraph.nodes().filter(function (v) {\n          return glGraph.children(v).length > 0;\n        }).map(graph.getCell.bind(graph)).sort(function (aCluster, bCluster) {\n          return bCluster.getAncestors().length - aCluster.getAncestors().length;\n        });\n        invoke(clusters, 'fitToChildren', {\n          padding: opt.clusterPadding\n        });\n      }\n      graph.stopBatch('layout');\n\n      // Width and height of the graph extended by margins.\n      var glSize = glGraph.graph();\n      // Return the bounding box of the graph after the layout.\n      return new Rect(marginX, marginY, Math.abs(glSize.width - 2 * marginX), Math.abs(glSize.height - 2 * marginY));\n    },\n    fromGraphLib: function (glGraph, opt) {\n      opt = opt || {};\n      var importNode = opt.importNode || noop;\n      var importEdge = opt.importEdge || noop;\n      var graph = this instanceof Graph ? this : new Graph();\n\n      // Import all nodes.\n      glGraph.nodes().forEach(function (node) {\n        importNode.call(graph, node, glGraph, graph, opt);\n      });\n\n      // Import all edges.\n      glGraph.edges().forEach(function (edge) {\n        importEdge.call(graph, edge, glGraph, graph, opt);\n      });\n      return graph;\n    },\n    // Create new graphlib graph from existing JointJS graph.\n    toGraphLib: function (graph, opt) {\n      opt = opt || {};\n\n      /* eslint-disable no-undef */\n      var graphlibUtil = opt.graphlib || (typeof graphlib !== 'undefined' ? graphlib : undefined);\n      /* eslint-enable no-undef */\n\n      if (graphlibUtil === undefined) {\n        throw new Error('The the \"graphlib\" utility is a mandatory dependency.');\n      }\n      var glGraphType = pick(opt, 'directed', 'compound', 'multigraph');\n      var glGraph = new graphlibUtil.Graph(glGraphType);\n      var setNodeLabel = opt.setNodeLabel || noop;\n      var setEdgeLabel = opt.setEdgeLabel || noop;\n      var setEdgeName = opt.setEdgeName || noop;\n      var collection = graph.get('cells');\n      for (var i = 0, n = collection.length; i < n; i++) {\n        var cell = collection.at(i);\n        if (cell.isLink()) {\n          var source = cell.get('source');\n          var target = cell.get('target');\n\n          // Links that end at a point are ignored.\n          if (!source.id || !target.id) {\n            break;\n          }\n\n          // Note that if we are creating a multigraph we can name the edges. If\n          // we try to name edges on a non-multigraph an exception is thrown.\n          glGraph.setEdge(source.id, target.id, setEdgeLabel(cell), setEdgeName(cell));\n        } else {\n          glGraph.setNode(cell.id, setNodeLabel(cell));\n\n          // For the compound graphs we have to take embeds into account.\n          if (glGraph.isCompound() && cell.has('parent')) {\n            var parentId = cell.get('parent');\n            if (collection.has(parentId)) {\n              // Make sure the parent cell is included in the graph (this can\n              // happen when the layout is run on part of the graph only).\n              glGraph.setParent(cell.id, parentId);\n            }\n          }\n        }\n      }\n      return glGraph;\n    }\n  };\n  Graph.prototype.toGraphLib = function (opt) {\n    return DirectedGraph.toGraphLib(this, opt);\n  };\n  Graph.prototype.fromGraphLib = function (glGraph, opt) {\n    return DirectedGraph.fromGraphLib.call(this, glGraph, opt);\n  };\n  var env = {\n    _results: {},\n    _tests: {\n      svgforeignobject: function () {\n        return !!document.createElementNS && /SVGForeignObject/.test({}.toString.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));\n      }\n    },\n    addTest: function (name, fn) {\n      return this._tests[name] = fn;\n    },\n    test: function (name) {\n      var fn = this._tests[name];\n      if (!fn) {\n        throw new Error('Test not defined (\"' + name + '\"). Use `joint.env.addTest(name, fn) to add a new test.`');\n      }\n      var result = this._results[name];\n      if (typeof result !== 'undefined') {\n        return result;\n      }\n      try {\n        result = fn();\n      } catch (error) {\n        result = false;\n      }\n\n      // Cache the test result.\n      this._results[name] = result;\n      return result;\n    }\n  };\n  var Generic = Element$1.define('basic.Generic', {\n    attrs: {\n      '.': {\n        fill: '#ffffff',\n        stroke: 'none'\n      }\n    }\n  });\n  var Rect$1 = Generic.define('basic.Rect', {\n    attrs: {\n      'rect': {\n        fill: '#ffffff',\n        stroke: '#000000',\n        width: 100,\n        height: 60\n      },\n      'text': {\n        fill: '#000000',\n        text: '',\n        'font-size': 14,\n        'ref-x': .5,\n        'ref-y': .5,\n        'text-anchor': 'middle',\n        'y-alignment': 'middle',\n        'font-family': 'Arial, helvetica, sans-serif'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect/></g><text/></g>'\n  });\n  var TextView = ElementView.extend({\n    presentationAttributes: ElementView.addPresentationAttributes({\n      // The element view is not automatically re-scaled to fit the model size\n      // when the attribute 'attrs' is changed.\n      attrs: ['SCALE']\n    }),\n    confirmUpdate: function () {\n      var flags = ElementView.prototype.confirmUpdate.apply(this, arguments);\n      if (this.hasFlag(flags, 'SCALE')) {\n        this.resize();\n        flags = this.removeFlag(flags, 'SCALE');\n      }\n      return flags;\n    }\n  });\n  var Text = Generic.define('basic.Text', {\n    attrs: {\n      'text': {\n        'font-size': 18,\n        fill: '#000000'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><text/></g></g>'\n  });\n  var Circle = Generic.define('basic.Circle', {\n    size: {\n      width: 60,\n      height: 60\n    },\n    attrs: {\n      'circle': {\n        fill: '#ffffff',\n        stroke: '#000000',\n        r: 30,\n        cx: 30,\n        cy: 30\n      },\n      'text': {\n        'font-size': 14,\n        text: '',\n        'text-anchor': 'middle',\n        'ref-x': .5,\n        'ref-y': .5,\n        'y-alignment': 'middle',\n        fill: '#000000',\n        'font-family': 'Arial, helvetica, sans-serif'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle/></g><text/></g>'\n  });\n  var Ellipse$1 = Generic.define('basic.Ellipse', {\n    size: {\n      width: 60,\n      height: 40\n    },\n    attrs: {\n      'ellipse': {\n        fill: '#ffffff',\n        stroke: '#000000',\n        rx: 30,\n        ry: 20,\n        cx: 30,\n        cy: 20\n      },\n      'text': {\n        'font-size': 14,\n        text: '',\n        'text-anchor': 'middle',\n        'ref-x': .5,\n        'ref-y': .5,\n        'y-alignment': 'middle',\n        fill: '#000000',\n        'font-family': 'Arial, helvetica, sans-serif'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><ellipse/></g><text/></g>'\n  });\n  var Polygon$1 = Generic.define('basic.Polygon', {\n    size: {\n      width: 60,\n      height: 40\n    },\n    attrs: {\n      'polygon': {\n        fill: '#ffffff',\n        stroke: '#000000'\n      },\n      'text': {\n        'font-size': 14,\n        text: '',\n        'text-anchor': 'middle',\n        'ref-x': .5,\n        'ref-dy': 20,\n        'y-alignment': 'middle',\n        fill: '#000000',\n        'font-family': 'Arial, helvetica, sans-serif'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon/></g><text/></g>'\n  });\n  var Polyline$1 = Generic.define('basic.Polyline', {\n    size: {\n      width: 60,\n      height: 40\n    },\n    attrs: {\n      'polyline': {\n        fill: '#ffffff',\n        stroke: '#000000'\n      },\n      'text': {\n        'font-size': 14,\n        text: '',\n        'text-anchor': 'middle',\n        'ref-x': .5,\n        'ref-dy': 20,\n        'y-alignment': 'middle',\n        fill: '#000000',\n        'font-family': 'Arial, helvetica, sans-serif'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polyline/></g><text/></g>'\n  });\n  var Image = Generic.define('basic.Image', {\n    attrs: {\n      'text': {\n        'font-size': 14,\n        text: '',\n        'text-anchor': 'middle',\n        'ref-x': .5,\n        'ref-dy': 20,\n        'y-alignment': 'middle',\n        fill: '#000000',\n        'font-family': 'Arial, helvetica, sans-serif'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><image/></g><text/></g>'\n  });\n  var Path$1 = Generic.define('basic.Path', {\n    size: {\n      width: 60,\n      height: 60\n    },\n    attrs: {\n      'path': {\n        fill: '#ffffff',\n        stroke: '#000000'\n      },\n      'text': {\n        'font-size': 14,\n        text: '',\n        'text-anchor': 'middle',\n        'ref': 'path',\n        'ref-x': .5,\n        'ref-dy': 10,\n        fill: '#000000',\n        'font-family': 'Arial, helvetica, sans-serif'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><path/></g><text/></g>'\n  });\n  var Rhombus = Path$1.define('basic.Rhombus', {\n    attrs: {\n      'path': {\n        d: 'M 30 0 L 60 30 30 60 0 30 z'\n      },\n      'text': {\n        'ref-y': .5,\n        'ref-dy': null,\n        'y-alignment': 'middle'\n      }\n    }\n  });\n  var svgForeignObjectSupported = env.test('svgforeignobject');\n  var TextBlock = Generic.define('basic.TextBlock', {\n    // see joint.css for more element styles\n    attrs: {\n      rect: {\n        fill: '#ffffff',\n        stroke: '#000000',\n        width: 80,\n        height: 100\n      },\n      text: {\n        fill: '#000000',\n        'font-size': 14,\n        'font-family': 'Arial, helvetica, sans-serif'\n      },\n      '.content': {\n        text: '',\n        'ref-x': .5,\n        'ref-y': .5,\n        'y-alignment': 'middle',\n        'x-alignment': 'middle'\n      }\n    },\n    content: ''\n  }, {\n    markup: ['<g class=\"rotatable\">', '<g class=\"scalable\"><rect/></g>', svgForeignObjectSupported ? '<foreignObject class=\"fobj\"><body xmlns=\"http://www.w3.org/1999/xhtml\"><div class=\"content\"/></body></foreignObject>' : '<text class=\"content\"/>', '</g>'].join(''),\n    initialize: function () {\n      this.listenTo(this, 'change:size', this.updateSize);\n      this.listenTo(this, 'change:content', this.updateContent);\n      this.updateSize(this, this.get('size'));\n      this.updateContent(this, this.get('content'));\n      Generic.prototype.initialize.apply(this, arguments);\n    },\n    updateSize: function (cell, size) {\n      // Selector `foreignObject' doesn't work across all browsers, we're using class selector instead.\n      // We have to clone size as we don't want attributes.div.style to be same object as attributes.size.\n      this.attr({\n        '.fobj': assign({}, size),\n        div: {\n          style: assign({}, size)\n        }\n      });\n    },\n    updateContent: function (cell, content) {\n      if (svgForeignObjectSupported) {\n        // Content element is a <div> element.\n        this.attr({\n          '.content': {\n            html: sanitizeHTML(content)\n          }\n        });\n      } else {\n        // Content element is a <text> element.\n        // SVG elements don't have innerHTML attribute.\n        this.attr({\n          '.content': {\n            text: content\n          }\n        });\n      }\n    },\n    // Here for backwards compatibility:\n    setForeignObjectSize: function () {\n      this.updateSize.apply(this, arguments);\n    },\n    // Here for backwards compatibility:\n    setDivContent: function () {\n      this.updateContent.apply(this, arguments);\n    }\n  });\n\n  // TextBlockView implements the fallback for IE when no foreignObject exists and\n  // the text needs to be manually broken.\n  var TextBlockView = ElementView.extend({\n    presentationAttributes: svgForeignObjectSupported ? ElementView.prototype.presentationAttributes : ElementView.addPresentationAttributes({\n      content: ['CONTENT'],\n      size: ['CONTENT']\n    }),\n    initFlag: ['RENDER', 'CONTENT'],\n    confirmUpdate: function () {\n      var flags = ElementView.prototype.confirmUpdate.apply(this, arguments);\n      if (this.hasFlag(flags, 'CONTENT')) {\n        this.updateContent(this.model);\n        flags = this.removeFlag(flags, 'CONTENT');\n      }\n      return flags;\n    },\n    update: function (_, renderingOnlyAttrs) {\n      var model = this.model;\n      if (!svgForeignObjectSupported) {\n        // Update everything but the content first.\n        var noTextAttrs = omit(renderingOnlyAttrs || model.get('attrs'), '.content');\n        ElementView.prototype.update.call(this, model, noTextAttrs);\n        if (!renderingOnlyAttrs || has$2(renderingOnlyAttrs, '.content')) {\n          // Update the content itself.\n          this.updateContent(model, renderingOnlyAttrs);\n        }\n      } else {\n        ElementView.prototype.update.call(this, model, renderingOnlyAttrs);\n      }\n    },\n    updateContent: function (cell, renderingOnlyAttrs) {\n      // Create copy of the text attributes\n      var textAttrs = merge({}, (renderingOnlyAttrs || cell.get('attrs'))['.content']);\n      textAttrs = omit(textAttrs, 'text');\n\n      // Break the content to fit the element size taking into account the attributes\n      // set on the model.\n      var text = breakText(cell.get('content'), cell.get('size'), textAttrs, {\n        // measuring sandbox svg document\n        svgDocument: this.paper.svg\n      });\n\n      // Create a new attrs with same structure as the model attrs { text: { *textAttributes* }}\n      var attrs = setByPath({}, '.content', textAttrs, '/');\n\n      // Replace text attribute with the one we just processed.\n      attrs['.content'].text = text;\n\n      // Update the view using renderingOnlyAttributes parameter.\n      ElementView.prototype.update.call(this, cell, attrs);\n    }\n  });\n  var basic = {\n    Generic: Generic,\n    Rect: Rect$1,\n    TextView: TextView,\n    Text: Text,\n    Circle: Circle,\n    Ellipse: Ellipse$1,\n    Polygon: Polygon$1,\n    Polyline: Polyline$1,\n    Image: Image,\n    Path: Path$1,\n    Rhombus: Rhombus,\n    TextBlock: TextBlock,\n    TextBlockView: TextBlockView\n  };\n\n  // ELEMENTS\n\n  var Rectangle = Element$1.define('standard.Rectangle', {\n    attrs: {\n      body: {\n        refWidth: '100%',\n        refHeight: '100%',\n        strokeWidth: 2,\n        stroke: '#000000',\n        fill: '#FFFFFF'\n      },\n      label: {\n        textVerticalAnchor: 'middle',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '50%',\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'rect',\n      selector: 'body'\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var Circle$1 = Element$1.define('standard.Circle', {\n    attrs: {\n      body: {\n        refCx: '50%',\n        refCy: '50%',\n        refR: '50%',\n        strokeWidth: 2,\n        stroke: '#333333',\n        fill: '#FFFFFF'\n      },\n      label: {\n        textVerticalAnchor: 'middle',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '50%',\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'circle',\n      selector: 'body'\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var Ellipse$2 = Element$1.define('standard.Ellipse', {\n    attrs: {\n      body: {\n        refCx: '50%',\n        refCy: '50%',\n        refRx: '50%',\n        refRy: '50%',\n        strokeWidth: 2,\n        stroke: '#333333',\n        fill: '#FFFFFF'\n      },\n      label: {\n        textVerticalAnchor: 'middle',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '50%',\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'ellipse',\n      selector: 'body'\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var Path$2 = Element$1.define('standard.Path', {\n    attrs: {\n      body: {\n        refD: 'M 0 0 L 10 0 10 10 0 10 Z',\n        strokeWidth: 2,\n        stroke: '#333333',\n        fill: '#FFFFFF'\n      },\n      label: {\n        textVerticalAnchor: 'middle',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '50%',\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'path',\n      selector: 'body'\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var Polygon$2 = Element$1.define('standard.Polygon', {\n    attrs: {\n      body: {\n        refPoints: '0 0 10 0 10 10 0 10',\n        strokeWidth: 2,\n        stroke: '#333333',\n        fill: '#FFFFFF'\n      },\n      label: {\n        textVerticalAnchor: 'middle',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '50%',\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'polygon',\n      selector: 'body'\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var Polyline$2 = Element$1.define('standard.Polyline', {\n    attrs: {\n      body: {\n        refPoints: '0 0 10 0 10 10 0 10 0 0',\n        strokeWidth: 2,\n        stroke: '#333333',\n        fill: '#FFFFFF'\n      },\n      label: {\n        textVerticalAnchor: 'middle',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '50%',\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'polyline',\n      selector: 'body'\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var Image$1 = Element$1.define('standard.Image', {\n    attrs: {\n      image: {\n        refWidth: '100%',\n        refHeight: '100%'\n        // xlinkHref: '[URL]'\n      },\n      label: {\n        textVerticalAnchor: 'top',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '100%',\n        refY2: 10,\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'image',\n      selector: 'image'\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var BorderedImage = Element$1.define('standard.BorderedImage', {\n    attrs: {\n      border: {\n        refWidth: '100%',\n        refHeight: '100%',\n        stroke: '#333333',\n        strokeWidth: 2\n      },\n      background: {\n        refWidth: -1,\n        refHeight: -1,\n        x: 0.5,\n        y: 0.5,\n        fill: '#FFFFFF'\n      },\n      image: {\n        // xlinkHref: '[URL]'\n        refWidth: -1,\n        refHeight: -1,\n        x: 0.5,\n        y: 0.5\n      },\n      label: {\n        textVerticalAnchor: 'top',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '100%',\n        refY2: 10,\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'rect',\n      selector: 'background',\n      attributes: {\n        'stroke': 'none'\n      }\n    }, {\n      tagName: 'image',\n      selector: 'image'\n    }, {\n      tagName: 'rect',\n      selector: 'border',\n      attributes: {\n        'fill': 'none'\n      }\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var EmbeddedImage = Element$1.define('standard.EmbeddedImage', {\n    attrs: {\n      body: {\n        refWidth: '100%',\n        refHeight: '100%',\n        stroke: '#333333',\n        fill: '#FFFFFF',\n        strokeWidth: 2\n      },\n      image: {\n        // xlinkHref: '[URL]'\n        refWidth: '30%',\n        refHeight: -20,\n        x: 10,\n        y: 10,\n        preserveAspectRatio: 'xMidYMin'\n      },\n      label: {\n        textVerticalAnchor: 'top',\n        textAnchor: 'left',\n        refX: '30%',\n        refX2: 20,\n        // 10 + 10\n        refY: 10,\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'rect',\n      selector: 'body'\n    }, {\n      tagName: 'image',\n      selector: 'image'\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var InscribedImage = Element$1.define('standard.InscribedImage', {\n    attrs: {\n      border: {\n        refRx: '50%',\n        refRy: '50%',\n        refCx: '50%',\n        refCy: '50%',\n        stroke: '#333333',\n        strokeWidth: 2\n      },\n      background: {\n        refRx: '50%',\n        refRy: '50%',\n        refCx: '50%',\n        refCy: '50%',\n        fill: '#FFFFFF'\n      },\n      image: {\n        // The image corners touch the border when its size is Math.sqrt(2) / 2 = 0.707.. ~= 70%\n        refWidth: '68%',\n        refHeight: '68%',\n        // The image offset is calculated as (100% - 68%) / 2\n        refX: '16%',\n        refY: '16%',\n        preserveAspectRatio: 'xMidYMid'\n        // xlinkHref: '[URL]'\n      },\n      label: {\n        textVerticalAnchor: 'top',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '100%',\n        refY2: 10,\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'ellipse',\n      selector: 'background'\n    }, {\n      tagName: 'image',\n      selector: 'image'\n    }, {\n      tagName: 'ellipse',\n      selector: 'border',\n      attributes: {\n        'fill': 'none'\n      }\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }]\n  });\n  var HeaderedRectangle = Element$1.define('standard.HeaderedRectangle', {\n    attrs: {\n      body: {\n        refWidth: '100%',\n        refHeight: '100%',\n        strokeWidth: 2,\n        stroke: '#000000',\n        fill: '#FFFFFF'\n      },\n      header: {\n        refWidth: '100%',\n        height: 30,\n        strokeWidth: 2,\n        stroke: '#000000',\n        fill: '#FFFFFF'\n      },\n      headerText: {\n        textVerticalAnchor: 'middle',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: 15,\n        fontSize: 16,\n        fill: '#333333'\n      },\n      bodyText: {\n        textVerticalAnchor: 'middle',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '50%',\n        refY2: 15,\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'rect',\n      selector: 'body'\n    }, {\n      tagName: 'rect',\n      selector: 'header'\n    }, {\n      tagName: 'text',\n      selector: 'headerText'\n    }, {\n      tagName: 'text',\n      selector: 'bodyText'\n    }]\n  });\n  var CYLINDER_TILT = 10;\n  var Cylinder = Element$1.define('standard.Cylinder', {\n    attrs: {\n      body: {\n        lateralArea: CYLINDER_TILT,\n        fill: '#FFFFFF',\n        stroke: '#333333',\n        strokeWidth: 2\n      },\n      top: {\n        refCx: '50%',\n        cy: CYLINDER_TILT,\n        refRx: '50%',\n        ry: CYLINDER_TILT,\n        fill: '#FFFFFF',\n        stroke: '#333333',\n        strokeWidth: 2\n      },\n      label: {\n        textVerticalAnchor: 'middle',\n        textAnchor: 'middle',\n        refX: '50%',\n        refY: '100%',\n        refY2: 15,\n        fontSize: 14,\n        fill: '#333333'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'path',\n      selector: 'body'\n    }, {\n      tagName: 'ellipse',\n      selector: 'top'\n    }, {\n      tagName: 'text',\n      selector: 'label'\n    }],\n    topRy: function (t, opt) {\n      // getter\n      if (t === undefined) {\n        return this.attr('body/lateralArea');\n      }\n\n      // setter\n      var isPercentageSetter = isPercentage(t);\n      var bodyAttrs = {\n        lateralArea: t\n      };\n      var topAttrs = isPercentageSetter ? {\n        refCy: t,\n        refRy: t,\n        cy: null,\n        ry: null\n      } : {\n        refCy: null,\n        refRy: null,\n        cy: t,\n        ry: t\n      };\n      return this.attr({\n        body: bodyAttrs,\n        top: topAttrs\n      }, opt);\n    }\n  }, {\n    attributes: {\n      lateralArea: {\n        set: function (t, refBBox) {\n          var isPercentageSetter = isPercentage(t);\n          if (isPercentageSetter) {\n            t = parseFloat(t) / 100;\n          }\n          var x = refBBox.x;\n          var y = refBBox.y;\n          var w = refBBox.width;\n          var h = refBBox.height;\n\n          // curve control point variables\n          var rx = w / 2;\n          var ry = isPercentageSetter ? h * t : t;\n          var kappa = V.KAPPA;\n          var cx = kappa * rx;\n          var cy = kappa * (isPercentageSetter ? h * t : t);\n\n          // shape variables\n          var xLeft = x;\n          var xCenter = x + w / 2;\n          var xRight = x + w;\n          var ySideTop = y + ry;\n          var yCurveTop = ySideTop - ry;\n          var ySideBottom = y + h - ry;\n          var yCurveBottom = y + h;\n\n          // return calculated shape\n          var data = ['M', xLeft, ySideTop, 'L', xLeft, ySideBottom, 'C', x, ySideBottom + cy, xCenter - cx, yCurveBottom, xCenter, yCurveBottom, 'C', xCenter + cx, yCurveBottom, xRight, ySideBottom + cy, xRight, ySideBottom, 'L', xRight, ySideTop, 'C', xRight, ySideTop - cy, xCenter + cx, yCurveTop, xCenter, yCurveTop, 'C', xCenter - cx, yCurveTop, xLeft, ySideTop - cy, xLeft, ySideTop, 'Z'];\n          return {\n            d: data.join(' ')\n          };\n        }\n      }\n    }\n  });\n  var foLabelMarkup = {\n    tagName: 'foreignObject',\n    selector: 'foreignObject',\n    attributes: {\n      'overflow': 'hidden'\n    },\n    children: [{\n      tagName: 'div',\n      namespaceURI: 'http://www.w3.org/1999/xhtml',\n      selector: 'label',\n      style: {\n        width: '100%',\n        height: '100%',\n        position: 'static',\n        backgroundColor: 'transparent',\n        textAlign: 'center',\n        margin: 0,\n        padding: '0px 5px',\n        boxSizing: 'border-box',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      }\n    }]\n  };\n  var svgLabelMarkup = {\n    tagName: 'text',\n    selector: 'label',\n    attributes: {\n      'text-anchor': 'middle'\n    }\n  };\n  var labelMarkup = env.test('svgforeignobject') ? foLabelMarkup : svgLabelMarkup;\n  var TextBlock$1 = Element$1.define('standard.TextBlock', {\n    attrs: {\n      body: {\n        refWidth: '100%',\n        refHeight: '100%',\n        stroke: '#333333',\n        fill: '#ffffff',\n        strokeWidth: 2\n      },\n      foreignObject: {\n        refWidth: '100%',\n        refHeight: '100%'\n      },\n      label: {\n        style: {\n          fontSize: 14\n        }\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'rect',\n      selector: 'body'\n    }, labelMarkup]\n  }, {\n    attributes: {\n      text: {\n        set: function (text, refBBox, node, attrs) {\n          if (node instanceof HTMLElement) {\n            node.textContent = text;\n          } else {\n            // No foreign object\n            var style = attrs.style || {};\n            var wrapValue = {\n              text: text,\n              width: -5,\n              height: '100%'\n            };\n            var wrapAttrs = assign({\n              textVerticalAnchor: 'middle'\n            }, style);\n            attributes.textWrap.set.call(this, wrapValue, refBBox, node, wrapAttrs);\n            return {\n              fill: style.color || null\n            };\n          }\n        },\n        position: function (text, refBBox, node) {\n          // No foreign object\n          if (node instanceof SVGElement) {\n            return refBBox.center();\n          }\n        }\n      }\n    }\n  });\n\n  // LINKS\n\n  var Link$1 = Link.define('standard.Link', {\n    attrs: {\n      line: {\n        connection: true,\n        stroke: '#333333',\n        strokeWidth: 2,\n        strokeLinejoin: 'round',\n        targetMarker: {\n          'type': 'path',\n          'd': 'M 10 -5 0 0 10 5 z'\n        }\n      },\n      wrapper: {\n        connection: true,\n        strokeWidth: 10,\n        strokeLinejoin: 'round'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'path',\n      selector: 'wrapper',\n      attributes: {\n        'fill': 'none',\n        'cursor': 'pointer',\n        'stroke': 'transparent',\n        'stroke-linecap': 'round'\n      }\n    }, {\n      tagName: 'path',\n      selector: 'line',\n      attributes: {\n        'fill': 'none',\n        'pointer-events': 'none'\n      }\n    }]\n  });\n  var DoubleLink = Link.define('standard.DoubleLink', {\n    attrs: {\n      line: {\n        connection: true,\n        stroke: '#DDDDDD',\n        strokeWidth: 4,\n        strokeLinejoin: 'round',\n        targetMarker: {\n          type: 'path',\n          stroke: '#000000',\n          d: 'M 10 -3 10 -10 -2 0 10 10 10 3'\n        }\n      },\n      outline: {\n        connection: true,\n        stroke: '#000000',\n        strokeWidth: 6,\n        strokeLinejoin: 'round'\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'path',\n      selector: 'outline',\n      attributes: {\n        'fill': 'none',\n        'cursor': 'pointer'\n      }\n    }, {\n      tagName: 'path',\n      selector: 'line',\n      attributes: {\n        'fill': 'none',\n        'pointer-events': 'none'\n      }\n    }]\n  });\n  var ShadowLink = Link.define('standard.ShadowLink', {\n    attrs: {\n      line: {\n        connection: true,\n        stroke: '#FF0000',\n        strokeWidth: 20,\n        strokeLinejoin: 'round',\n        targetMarker: {\n          'type': 'path',\n          'stroke': 'none',\n          'd': 'M 0 -10 -10 0 0 10 z'\n        },\n        sourceMarker: {\n          'type': 'path',\n          'stroke': 'none',\n          'd': 'M -10 -10 0 0 -10 10 0 10 0 -10 z'\n        }\n      },\n      shadow: {\n        connection: true,\n        refX: 3,\n        refY: 6,\n        stroke: '#000000',\n        strokeOpacity: 0.2,\n        strokeWidth: 20,\n        strokeLinejoin: 'round',\n        targetMarker: {\n          'type': 'path',\n          'd': 'M 0 -10 -10 0 0 10 z',\n          'stroke': 'none'\n        },\n        sourceMarker: {\n          'type': 'path',\n          'stroke': 'none',\n          'd': 'M -10 -10 0 0 -10 10 0 10 0 -10 z'\n        }\n      }\n    }\n  }, {\n    markup: [{\n      tagName: 'path',\n      selector: 'shadow',\n      attributes: {\n        'fill': 'none',\n        'pointer-events': 'none'\n      }\n    }, {\n      tagName: 'path',\n      selector: 'line',\n      attributes: {\n        'fill': 'none',\n        'cursor': 'pointer'\n      }\n    }]\n  });\n  var standard = {\n    Rectangle: Rectangle,\n    Circle: Circle$1,\n    Ellipse: Ellipse$2,\n    Path: Path$2,\n    Polygon: Polygon$2,\n    Polyline: Polyline$2,\n    Image: Image$1,\n    BorderedImage: BorderedImage,\n    EmbeddedImage: EmbeddedImage,\n    InscribedImage: InscribedImage,\n    HeaderedRectangle: HeaderedRectangle,\n    Cylinder: Cylinder,\n    TextBlock: TextBlock$1,\n    Link: Link$1,\n    DoubleLink: DoubleLink,\n    ShadowLink: ShadowLink\n  };\n\n  /**\n   * @deprecated use the port api instead\n   */\n  var Model = Generic.define('devs.Model', {\n    inPorts: [],\n    outPorts: [],\n    size: {\n      width: 80,\n      height: 80\n    },\n    attrs: {\n      '.': {\n        magnet: false\n      },\n      '.label': {\n        text: 'Model',\n        'ref-x': .5,\n        'ref-y': 10,\n        'font-size': 18,\n        'text-anchor': 'middle',\n        fill: '#000'\n      },\n      '.body': {\n        'ref-width': '100%',\n        'ref-height': '100%',\n        stroke: '#000'\n      }\n    },\n    ports: {\n      groups: {\n        'in': {\n          position: {\n            name: 'left'\n          },\n          attrs: {\n            '.port-label': {\n              fill: '#000'\n            },\n            '.port-body': {\n              fill: '#fff',\n              stroke: '#000',\n              r: 10,\n              magnet: true\n            }\n          },\n          label: {\n            position: {\n              name: 'left',\n              args: {\n                y: 10\n              }\n            }\n          }\n        },\n        'out': {\n          position: {\n            name: 'right'\n          },\n          attrs: {\n            '.port-label': {\n              fill: '#000'\n            },\n            '.port-body': {\n              fill: '#fff',\n              stroke: '#000',\n              r: 10,\n              magnet: true\n            }\n          },\n          label: {\n            position: {\n              name: 'right',\n              args: {\n                y: 10\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><rect class=\"body\"/><text class=\"label\"/></g>',\n    portMarkup: '<circle class=\"port-body\"/>',\n    portLabelMarkup: '<text class=\"port-label\"/>',\n    initialize: function () {\n      Generic.prototype.initialize.apply(this, arguments);\n      this.on('change:inPorts change:outPorts', this.updatePortItems, this);\n      this.updatePortItems();\n    },\n    updatePortItems: function (model, changed, opt) {\n      // Make sure all ports are unique.\n      var inPorts = uniq(this.get('inPorts'));\n      var outPorts = difference(uniq(this.get('outPorts')), inPorts);\n      var inPortItems = this.createPortItems('in', inPorts);\n      var outPortItems = this.createPortItems('out', outPorts);\n      this.prop('ports/items', inPortItems.concat(outPortItems), assign({\n        rewrite: true\n      }, opt));\n    },\n    createPortItem: function (group, port) {\n      return {\n        id: port,\n        group: group,\n        attrs: {\n          '.port-label': {\n            text: port\n          }\n        }\n      };\n    },\n    createPortItems: function (group, ports) {\n      return toArray(ports).map(this.createPortItem.bind(this, group));\n    },\n    _addGroupPort: function (port, group, opt) {\n      var ports = this.get(group);\n      return this.set(group, Array.isArray(ports) ? ports.concat(port) : [port], opt);\n    },\n    addOutPort: function (port, opt) {\n      return this._addGroupPort(port, 'outPorts', opt);\n    },\n    addInPort: function (port, opt) {\n      return this._addGroupPort(port, 'inPorts', opt);\n    },\n    _removeGroupPort: function (port, group, opt) {\n      return this.set(group, without(this.get(group), port), opt);\n    },\n    removeOutPort: function (port, opt) {\n      return this._removeGroupPort(port, 'outPorts', opt);\n    },\n    removeInPort: function (port, opt) {\n      return this._removeGroupPort(port, 'inPorts', opt);\n    },\n    _changeGroup: function (group, properties, opt) {\n      return this.prop('ports/groups/' + group, isObject$1(properties) ? properties : {}, opt);\n    },\n    changeInGroup: function (properties, opt) {\n      return this._changeGroup('in', properties, opt);\n    },\n    changeOutGroup: function (properties, opt) {\n      return this._changeGroup('out', properties, opt);\n    }\n  });\n  var Atomic = Model.define('devs.Atomic', {\n    size: {\n      width: 80,\n      height: 80\n    },\n    attrs: {\n      '.label': {\n        text: 'Atomic'\n      }\n    }\n  });\n  var Coupled = Model.define('devs.Coupled', {\n    size: {\n      width: 200,\n      height: 300\n    },\n    attrs: {\n      '.label': {\n        text: 'Coupled'\n      }\n    }\n  });\n  var Link$2 = Link.define('devs.Link', {\n    attrs: {\n      '.connection': {\n        'stroke-width': 2\n      }\n    }\n  });\n  var devs = {\n    Model: Model,\n    Atomic: Atomic,\n    Coupled: Coupled,\n    Link: Link$2\n  };\n  var Gate = Generic.define('logic.Gate', {\n    size: {\n      width: 80,\n      height: 40\n    },\n    attrs: {\n      '.': {\n        magnet: false\n      },\n      '.body': {\n        width: 100,\n        height: 50\n      },\n      circle: {\n        r: 7,\n        stroke: 'black',\n        fill: 'transparent',\n        'stroke-width': 2\n      }\n    }\n  }, {\n    operation: function () {\n      return true;\n    }\n  });\n  var IO = Gate.define('logic.IO', {\n    size: {\n      width: 60,\n      height: 30\n    },\n    attrs: {\n      '.body': {\n        fill: 'white',\n        stroke: 'black',\n        'stroke-width': 2\n      },\n      '.wire': {\n        ref: '.body',\n        'ref-y': .5,\n        stroke: 'black'\n      },\n      text: {\n        fill: 'black',\n        ref: '.body',\n        'ref-x': .5,\n        'ref-y': .5,\n        'y-alignment': 'middle',\n        'text-anchor': 'middle',\n        'font-weight': 'bold',\n        'font-variant': 'small-caps',\n        'text-transform': 'capitalize',\n        'font-size': '14px'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"body\"/></g><path class=\"wire\"/><circle/><text/></g>'\n  });\n  var Input = IO.define('logic.Input', {\n    attrs: {\n      '.wire': {\n        'ref-dx': 0,\n        d: 'M 0 0 L 23 0'\n      },\n      circle: {\n        ref: '.body',\n        'ref-dx': 30,\n        'ref-y': 0.5,\n        magnet: true,\n        'class': 'output',\n        port: 'out'\n      },\n      text: {\n        text: 'input'\n      }\n    }\n  });\n  var Output = IO.define('logic.Output', {\n    attrs: {\n      '.wire': {\n        'ref-x': 0,\n        d: 'M 0 0 L -23 0'\n      },\n      circle: {\n        ref: '.body',\n        'ref-x': -30,\n        'ref-y': 0.5,\n        magnet: 'passive',\n        'class': 'input',\n        port: 'in'\n      },\n      text: {\n        text: 'output'\n      }\n    }\n  });\n  var Gate11 = Gate.define('logic.Gate11', {\n    attrs: {\n      '.input': {\n        ref: '.body',\n        'ref-x': -2,\n        'ref-y': 0.5,\n        magnet: 'passive',\n        port: 'in'\n      },\n      '.output': {\n        ref: '.body',\n        'ref-dx': 2,\n        'ref-y': 0.5,\n        magnet: true,\n        port: 'out'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><image class=\"body\"/></g><circle class=\"input\"/><circle class=\"output\"/></g>'\n  });\n  var Gate21 = Gate.define('logic.Gate21', {\n    attrs: {\n      '.input1': {\n        ref: '.body',\n        'ref-x': -2,\n        'ref-y': 0.3,\n        magnet: 'passive',\n        port: 'in1'\n      },\n      '.input2': {\n        ref: '.body',\n        'ref-x': -2,\n        'ref-y': 0.7,\n        magnet: 'passive',\n        port: 'in2'\n      },\n      '.output': {\n        ref: '.body',\n        'ref-dx': 2,\n        'ref-y': 0.5,\n        magnet: true,\n        port: 'out'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><image class=\"body\"/></g><circle class=\"input input1\"/><circle  class=\"input input2\"/><circle class=\"output\"/></g>'\n  });\n  var Repeater = Gate11.define('logic.Repeater', {\n    attrs: {\n      image: {\n        'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo='\n      }\n    }\n  }, {\n    operation: function (input) {\n      return input;\n    }\n  });\n  var Not = Gate11.define('logic.Not', {\n    attrs: {\n      image: {\n        'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K'\n      }\n    }\n  }, {\n    operation: function (input) {\n      return !input;\n    }\n  });\n  var Or = Gate21.define('logic.Or', {\n    attrs: {\n      image: {\n        'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo='\n      }\n    }\n  }, {\n    operation: function (input1, input2) {\n      return input1 || input2;\n    }\n  });\n  var And = Gate21.define('logic.And', {\n    attrs: {\n      image: {\n        'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=='\n      }\n    }\n  }, {\n    operation: function (input1, input2) {\n      return input1 && input2;\n    }\n  });\n  var Nor = Gate21.define('logic.Nor', {\n    attrs: {\n      image: {\n        'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K'\n      }\n    }\n  }, {\n    operation: function (input1, input2) {\n      return !(input1 || input2);\n    }\n  });\n  var Nand = Gate21.define('logic.Nand', {\n    attrs: {\n      image: {\n        'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=='\n      }\n    }\n  }, {\n    operation: function (input1, input2) {\n      return !(input1 && input2);\n    }\n  });\n  var Xor = Gate21.define('logic.Xor', {\n    attrs: {\n      image: {\n        'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K'\n      }\n    }\n  }, {\n    operation: function (input1, input2) {\n      return (!input1 || input2) && (input1 || !input2);\n    }\n  });\n  var Xnor = Gate21.define('logic.Xnor', {\n    attrs: {\n      image: {\n        'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=='\n      }\n    }\n  }, {\n    operation: function (input1, input2) {\n      return (!input1 || !input2) && (input1 || input2);\n    }\n  });\n  var Wire = Link.define('logic.Wire', {\n    attrs: {\n      '.connection': {\n        'stroke-width': 2\n      },\n      '.marker-vertex': {\n        r: 7\n      }\n    },\n    router: {\n      name: 'orthogonal'\n    },\n    connector: {\n      name: 'rounded',\n      args: {\n        radius: 10\n      }\n    }\n  }, {\n    arrowheadMarkup: ['<g class=\"marker-arrowhead-group marker-arrowhead-group-<%= end %>\">', '<circle class=\"marker-arrowhead\" end=\"<%= end %>\" r=\"7\"/>', '</g>'].join(''),\n    vertexMarkup: ['<g class=\"marker-vertex-group\" transform=\"translate(<%= x %>, <%= y %>)\">', '<circle class=\"marker-vertex\" idx=\"<%= idx %>\" r=\"10\" />', '<g class=\"marker-vertex-remove-group\">', '<path class=\"marker-vertex-remove-area\" idx=\"<%= idx %>\" d=\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\" transform=\"translate(5, -33)\"/>', '<path class=\"marker-vertex-remove\" idx=\"<%= idx %>\" transform=\"scale(.8) translate(9.5, -37)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\">', '<title>Remove vertex.</title>', '</path>', '</g>', '</g>'].join('')\n  });\n  var logic = {\n    Gate: Gate,\n    IO: IO,\n    Input: Input,\n    Output: Output,\n    Gate11: Gate11,\n    Gate21: Gate21,\n    Repeater: Repeater,\n    Not: Not,\n    Or: Or,\n    And: And,\n    Nor: Nor,\n    Nand: Nand,\n    Xor: Xor,\n    Xnor: Xnor,\n    Wire: Wire\n  };\n  var KingWhite = Generic.define('chess.KingWhite', {\n    size: {\n      width: 42,\n      height: 38\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\"><path      d=\"M 22.5,11.63 L 22.5,6\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path      d=\"M 20,8 L 25,8\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path      d=\"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\"      style=\"fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;\" />    <path      d=\"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z \"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 11.5,30 C 17,27 27,27 32.5,30\"      style=\"fill:none; stroke:#000000;\" />    <path      d=\"M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5\"      style=\"fill:none; stroke:#000000;\" />    <path      d=\"M 11.5,37 C 17,34 27,34 32.5,37\"      style=\"fill:none; stroke:#000000;\" />  </g></g></g>'\n  });\n  var KingBlack = Generic.define('chess.KingBlack', {\n    size: {\n      width: 42,\n      height: 38\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path       d=\"M 22.5,11.63 L 22.5,6\"       style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\"       id=\"path6570\" />    <path       d=\"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\"       style=\"fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;\" />    <path       d=\"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z \"       style=\"fill:#000000; stroke:#000000;\" />    <path       d=\"M 20,8 L 25,8\"       style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path       d=\"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37\"       style=\"fill:none; stroke:#ffffff;\" />  </g></g></g>'\n  });\n  var QueenWhite = Generic.define('chess.QueenWhite', {\n    size: {\n      width: 42,\n      height: 38\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(-1,-1)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(15.5,-5.5)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(32,-1)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(7,-4.5)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(24,-4)\" />    <path      d=\"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11.5,30 C 15,29 30,29 33.5,30\"      style=\"fill:none;\" />    <path      d=\"M 12,33.5 C 18,32.5 27,32.5 33,33.5\"      style=\"fill:none;\" />  </g></g></g>'\n  });\n  var QueenBlack = Generic.define('chess.QueenBlack', {\n    size: {\n      width: 42,\n      height: 38\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#000000; stroke:none;\">      <circle cx=\"6\"    cy=\"12\" r=\"2.75\" />      <circle cx=\"14\"   cy=\"9\"  r=\"2.75\" />      <circle cx=\"22.5\" cy=\"8\"  r=\"2.75\" />      <circle cx=\"31\"   cy=\"9\"  r=\"2.75\" />      <circle cx=\"39\"   cy=\"12\" r=\"2.75\" />    </g>    <path       d=\"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\"       style=\"stroke-linecap:butt; stroke:#000000;\" />    <path       d=\"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z\"       style=\"stroke-linecap:butt;\" />    <path       d=\"M 11,38.5 A 35,35 1 0 0 34,38.5\"       style=\"fill:none; stroke:#000000; stroke-linecap:butt;\" />    <path       d=\"M 11,29 A 35,35 1 0 1 34,29\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 12.5,31.5 L 32.5,31.5\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5\"       style=\"fill:none; stroke:#ffffff;\" />  </g></g></g>'\n  });\n  var RookWhite = Generic.define('chess.RookWhite', {\n    size: {\n      width: 32,\n      height: 34\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14\"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 34,14 L 31,17 L 14,17 L 11,14\" />    <path      d=\"M 31,17 L 31,29.5 L 14,29.5 L 14,17\"      style=\"stroke-linecap:butt; stroke-linejoin:miter;\" />    <path      d=\"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5\" />    <path      d=\"M 11,14 L 34,14\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />  </g></g></g>'\n  });\n  var RookBlack = Generic.define('chess.RookBlack', {\n    size: {\n      width: 32,\n      height: 34\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z \"      style=\"stroke-linecap:butt;stroke-linejoin:miter;\" />    <path      d=\"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,35.5 L 33,35.5 L 33,35.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 13,31.5 L 32,31.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 14,29.5 L 31,29.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 14,16.5 L 31,16.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 11,14 L 34,14\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />  </g></g></g>'\n  });\n  var BishopWhite = Generic.define('chess.BishopWhite', {\n    size: {\n      width: 38,\n      height: 38\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#ffffff; stroke:#000000; stroke-linecap:butt;\">       <path        d=\"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z\" />      <path        d=\"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\" />      <path        d=\"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\" />    </g>    <path      d=\"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />  </g></g></g>'\n  });\n  var BishopBlack = Generic.define('chess.BishopBlack', {\n    size: {\n      width: 38,\n      height: 38\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#000000; stroke:#000000; stroke-linecap:butt;\">       <path        d=\"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z\" />      <path        d=\"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\" />      <path        d=\"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\" />    </g>    <path       d=\"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\"       style=\"fill:none; stroke:#ffffff; stroke-linejoin:miter;\" />  </g></g></g>'\n  });\n  var KnightWhite = Generic.define('chess.KnightWhite', {\n    size: {\n      width: 38,\n      height: 37\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\"      transform=\"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\"      style=\"fill:#000000; stroke:#000000;\" />  </g></g></g>'\n  });\n  var KnightBlack = Generic.define('chess.KnightBlack', {\n    size: {\n      width: 38,\n      height: 37\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\"      style=\"fill:#ffffff; stroke:#ffffff;\" />    <path      d=\"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\"      transform=\"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\"      style=\"fill:#ffffff; stroke:#ffffff;\" />    <path      d=\"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z \"      style=\"fill:#ffffff; stroke:none;\" />  </g></g></g>'\n  });\n  var PawnWhite = Generic.define('chess.PawnWhite', {\n    size: {\n      width: 28,\n      height: 33\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><path d=\"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z \"  style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\" /></g></g>'\n  });\n  var PawnBlack = Generic.define('chess.PawnBlack', {\n    size: {\n      width: 28,\n      height: 33\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><path d=\"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z \"  style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\" /></g></g>'\n  });\n  var chess = {\n    KingWhite: KingWhite,\n    KingBlack: KingBlack,\n    QueenWhite: QueenWhite,\n    QueenBlack: QueenBlack,\n    RookWhite: RookWhite,\n    RookBlack: RookBlack,\n    BishopWhite: BishopWhite,\n    BishopBlack: BishopBlack,\n    KnightWhite: KnightWhite,\n    KnightBlack: KnightBlack,\n    PawnWhite: PawnWhite,\n    PawnBlack: PawnBlack\n  };\n  var Entity = Element$1.define('erd.Entity', {\n    size: {\n      width: 150,\n      height: 60\n    },\n    attrs: {\n      '.outer': {\n        fill: '#2ECC71',\n        stroke: '#27AE60',\n        'stroke-width': 2,\n        points: '100,0 100,60 0,60 0,0'\n      },\n      '.inner': {\n        fill: '#2ECC71',\n        stroke: '#27AE60',\n        'stroke-width': 2,\n        points: '95,5 95,55 5,55 5,5',\n        display: 'none'\n      },\n      text: {\n        text: 'Entity',\n        'font-family': 'Arial',\n        'font-size': 14,\n        'ref-x': .5,\n        'ref-y': .5,\n        'y-alignment': 'middle',\n        'text-anchor': 'middle'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"outer\"/><polygon class=\"inner\"/></g><text/></g>'\n  });\n  var WeakEntity = Entity.define('erd.WeakEntity', {\n    attrs: {\n      '.inner': {\n        display: 'auto'\n      },\n      text: {\n        text: 'Weak Entity'\n      }\n    }\n  });\n  var Relationship = Element$1.define('erd.Relationship', {\n    size: {\n      width: 80,\n      height: 80\n    },\n    attrs: {\n      '.outer': {\n        fill: '#3498DB',\n        stroke: '#2980B9',\n        'stroke-width': 2,\n        points: '40,0 80,40 40,80 0,40'\n      },\n      '.inner': {\n        fill: '#3498DB',\n        stroke: '#2980B9',\n        'stroke-width': 2,\n        points: '40,5 75,40 40,75 5,40',\n        display: 'none'\n      },\n      text: {\n        text: 'Relationship',\n        'font-family': 'Arial',\n        'font-size': 12,\n        'ref-x': .5,\n        'ref-y': .5,\n        'y-alignment': 'middle',\n        'text-anchor': 'middle'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"outer\"/><polygon class=\"inner\"/></g><text/></g>'\n  });\n  var IdentifyingRelationship = Relationship.define('erd.IdentifyingRelationship', {\n    attrs: {\n      '.inner': {\n        display: 'auto'\n      },\n      text: {\n        text: 'Identifying'\n      }\n    }\n  });\n  var Attribute = Element$1.define('erd.Attribute', {\n    size: {\n      width: 100,\n      height: 50\n    },\n    attrs: {\n      'ellipse': {\n        transform: 'translate(50, 25)'\n      },\n      '.outer': {\n        stroke: '#D35400',\n        'stroke-width': 2,\n        cx: 0,\n        cy: 0,\n        rx: 50,\n        ry: 25,\n        fill: '#E67E22'\n      },\n      '.inner': {\n        stroke: '#D35400',\n        'stroke-width': 2,\n        cx: 0,\n        cy: 0,\n        rx: 45,\n        ry: 20,\n        fill: '#E67E22',\n        display: 'none'\n      },\n      text: {\n        'font-family': 'Arial',\n        'font-size': 14,\n        'ref-x': .5,\n        'ref-y': .5,\n        'y-alignment': 'middle',\n        'text-anchor': 'middle'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><ellipse class=\"outer\"/><ellipse class=\"inner\"/></g><text/></g>'\n  });\n  var Multivalued = Attribute.define('erd.Multivalued', {\n    attrs: {\n      '.inner': {\n        display: 'block'\n      },\n      text: {\n        text: 'multivalued'\n      }\n    }\n  });\n  var Derived = Attribute.define('erd.Derived', {\n    attrs: {\n      '.outer': {\n        'stroke-dasharray': '3,5'\n      },\n      text: {\n        text: 'derived'\n      }\n    }\n  });\n  var Key = Attribute.define('erd.Key', {\n    attrs: {\n      ellipse: {\n        'stroke-width': 4\n      },\n      text: {\n        text: 'key',\n        'font-weight': '800',\n        'text-decoration': 'underline'\n      }\n    }\n  });\n  var Normal = Attribute.define('erd.Normal', {\n    attrs: {\n      text: {\n        text: 'Normal'\n      }\n    }\n  });\n  var ISA = Element$1.define('erd.ISA', {\n    type: 'erd.ISA',\n    size: {\n      width: 100,\n      height: 50\n    },\n    attrs: {\n      polygon: {\n        points: '0,0 50,50 100,0',\n        fill: '#F1C40F',\n        stroke: '#F39C12',\n        'stroke-width': 2\n      },\n      text: {\n        text: 'ISA',\n        'font-size': 18,\n        'ref-x': .5,\n        'ref-y': .3,\n        'y-alignment': 'middle',\n        'text-anchor': 'middle'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon/></g><text/></g>'\n  });\n  var Line$1 = Link.define('erd.Line', {}, {\n    cardinality: function (value) {\n      this.set('labels', [{\n        position: -20,\n        attrs: {\n          text: {\n            dy: -8,\n            text: value\n          }\n        }\n      }]);\n    }\n  });\n  var erd = {\n    Entity: Entity,\n    WeakEntity: WeakEntity,\n    Relationship: Relationship,\n    IdentifyingRelationship: IdentifyingRelationship,\n    Attribute: Attribute,\n    Multivalued: Multivalued,\n    Derived: Derived,\n    Key: Key,\n    Normal: Normal,\n    ISA: ISA,\n    Line: Line$1\n  };\n  var State = Circle.define('fsa.State', {\n    attrs: {\n      circle: {\n        'stroke-width': 3\n      },\n      text: {\n        'font-weight': '800'\n      }\n    }\n  });\n  var StartState = Element$1.define('fsa.StartState', {\n    size: {\n      width: 20,\n      height: 20\n    },\n    attrs: {\n      circle: {\n        transform: 'translate(10, 10)',\n        r: 10,\n        fill: '#000000'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle/></g></g>'\n  });\n  var EndState = Element$1.define('fsa.EndState', {\n    size: {\n      width: 20,\n      height: 20\n    },\n    attrs: {\n      '.outer': {\n        transform: 'translate(10, 10)',\n        r: 10,\n        fill: '#ffffff',\n        stroke: '#000000'\n      },\n      '.inner': {\n        transform: 'translate(10, 10)',\n        r: 6,\n        fill: '#000000'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"outer\"/><circle class=\"inner\"/></g></g>'\n  });\n  var Arrow = Link.define('fsa.Arrow', {\n    attrs: {\n      '.marker-target': {\n        d: 'M 10 0 L 0 5 L 10 10 z'\n      }\n    },\n    smooth: true\n  });\n  var fsa = {\n    State: State,\n    StartState: StartState,\n    EndState: EndState,\n    Arrow: Arrow\n  };\n  var Member = Element$1.define('org.Member', {\n    size: {\n      width: 180,\n      height: 70\n    },\n    attrs: {\n      rect: {\n        width: 170,\n        height: 60\n      },\n      '.card': {\n        fill: '#FFFFFF',\n        stroke: '#000000',\n        'stroke-width': 2,\n        'pointer-events': 'visiblePainted',\n        rx: 10,\n        ry: 10\n      },\n      image: {\n        width: 48,\n        height: 48,\n        ref: '.card',\n        'ref-x': 10,\n        'ref-y': 5\n      },\n      '.rank': {\n        'text-decoration': 'underline',\n        ref: '.card',\n        'ref-x': 0.9,\n        'ref-y': 0.2,\n        'font-family': 'Courier New',\n        'font-size': 14,\n        'text-anchor': 'end'\n      },\n      '.name': {\n        'font-weight': '800',\n        ref: '.card',\n        'ref-x': 0.9,\n        'ref-y': 0.6,\n        'font-family': 'Courier New',\n        'font-size': 14,\n        'text-anchor': 'end'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"card\"/><image/></g><text class=\"rank\"/><text class=\"name\"/></g>'\n  });\n  var Arrow$1 = Link.define('org.Arrow', {\n    source: {\n      selector: '.card'\n    },\n    target: {\n      selector: '.card'\n    },\n    attrs: {\n      '.connection': {\n        stroke: '#585858',\n        'stroke-width': 3\n      }\n    },\n    z: -1\n  });\n  var org = {\n    Member: Member,\n    Arrow: Arrow$1\n  };\n  var Place = Generic.define('pn.Place', {\n    size: {\n      width: 50,\n      height: 50\n    },\n    attrs: {\n      '.root': {\n        r: 25,\n        fill: '#ffffff',\n        stroke: '#000000',\n        transform: 'translate(25, 25)'\n      },\n      '.label': {\n        'text-anchor': 'middle',\n        'ref-x': .5,\n        'ref-y': -20,\n        ref: '.root',\n        fill: '#000000',\n        'font-size': 12\n      },\n      '.tokens > circle': {\n        fill: '#000000',\n        r: 5\n      },\n      '.tokens.one > circle': {\n        transform: 'translate(25, 25)'\n      },\n      '.tokens.two > circle:nth-child(1)': {\n        transform: 'translate(19, 25)'\n      },\n      '.tokens.two > circle:nth-child(2)': {\n        transform: 'translate(31, 25)'\n      },\n      '.tokens.three > circle:nth-child(1)': {\n        transform: 'translate(18, 29)'\n      },\n      '.tokens.three > circle:nth-child(2)': {\n        transform: 'translate(25, 19)'\n      },\n      '.tokens.three > circle:nth-child(3)': {\n        transform: 'translate(32, 29)'\n      },\n      '.tokens.alot > text': {\n        transform: 'translate(25, 18)',\n        'text-anchor': 'middle',\n        fill: '#000000'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>'\n  });\n  var PlaceView = ElementView.extend({\n    presentationAttributes: ElementView.addPresentationAttributes({\n      tokens: ['TOKENS']\n    }),\n    initFlag: ElementView.prototype.initFlag.concat(['TOKENS']),\n    confirmUpdate: function () {\n      var ref;\n      var args = [],\n        len = arguments.length;\n      while (len--) args[len] = arguments[len];\n      var flags = (ref = ElementView.prototype.confirmUpdate).call.apply(ref, [this].concat(args));\n      if (this.hasFlag(flags, 'TOKENS')) {\n        this.renderTokens();\n        this.update();\n        flags = this.removeFlag(flags, 'TOKENS');\n      }\n      return flags;\n    },\n    renderTokens: function () {\n      var vTokens = this.vel.findOne('.tokens').empty();\n      ['one', 'two', 'three', 'alot'].forEach(function (className) {\n        vTokens.removeClass(className);\n      });\n      var tokens = this.model.get('tokens');\n      if (!tokens) {\n        return;\n      }\n      switch (tokens) {\n        case 1:\n          vTokens.addClass('one');\n          vTokens.append(V('circle'));\n          break;\n        case 2:\n          vTokens.addClass('two');\n          vTokens.append([V('circle'), V('circle')]);\n          break;\n        case 3:\n          vTokens.addClass('three');\n          vTokens.append([V('circle'), V('circle'), V('circle')]);\n          break;\n        default:\n          vTokens.addClass('alot');\n          vTokens.append(V('text').text(tokens + ''));\n          break;\n      }\n    }\n  });\n  var Transition = Generic.define('pn.Transition', {\n    size: {\n      width: 12,\n      height: 50\n    },\n    attrs: {\n      'rect': {\n        width: 12,\n        height: 50,\n        fill: '#000000',\n        stroke: '#000000'\n      },\n      '.label': {\n        'text-anchor': 'middle',\n        'ref-x': .5,\n        'ref-y': -20,\n        ref: 'rect',\n        fill: '#000000',\n        'font-size': 12\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>'\n  });\n  var Link$3 = Link.define('pn.Link', {\n    attrs: {\n      '.marker-target': {\n        d: 'M 10 0 L 0 5 L 10 10 z'\n      }\n    }\n  });\n  var pn = {\n    Place: Place,\n    PlaceView: PlaceView,\n    Transition: Transition,\n    Link: Link$3\n  };\n  var Class = Generic.define('uml.Class', {\n    attrs: {\n      rect: {\n        'width': 200\n      },\n      '.uml-class-name-rect': {\n        'stroke': 'black',\n        'stroke-width': 2,\n        'fill': '#3498db'\n      },\n      '.uml-class-attrs-rect': {\n        'stroke': 'black',\n        'stroke-width': 2,\n        'fill': '#2980b9'\n      },\n      '.uml-class-methods-rect': {\n        'stroke': 'black',\n        'stroke-width': 2,\n        'fill': '#2980b9'\n      },\n      '.uml-class-name-text': {\n        'ref': '.uml-class-name-rect',\n        'ref-y': .5,\n        'ref-x': .5,\n        'text-anchor': 'middle',\n        'y-alignment': 'middle',\n        'font-weight': 'bold',\n        'fill': 'black',\n        'font-size': 12,\n        'font-family': 'Times New Roman'\n      },\n      '.uml-class-attrs-text': {\n        'ref': '.uml-class-attrs-rect',\n        'ref-y': 5,\n        'ref-x': 5,\n        'fill': 'black',\n        'font-size': 12,\n        'font-family': 'Times New Roman'\n      },\n      '.uml-class-methods-text': {\n        'ref': '.uml-class-methods-rect',\n        'ref-y': 5,\n        'ref-x': 5,\n        'fill': 'black',\n        'font-size': 12,\n        'font-family': 'Times New Roman'\n      }\n    },\n    name: [],\n    attributes: [],\n    methods: []\n  }, {\n    markup: ['<g class=\"rotatable\">', '<g class=\"scalable\">', '<rect class=\"uml-class-name-rect\"/><rect class=\"uml-class-attrs-rect\"/><rect class=\"uml-class-methods-rect\"/>', '</g>', '<text class=\"uml-class-name-text\"/><text class=\"uml-class-attrs-text\"/><text class=\"uml-class-methods-text\"/>', '</g>'].join(''),\n    initialize: function () {\n      this.on('change:name change:attributes change:methods', function () {\n        this.updateRectangles();\n        this.trigger('uml-update');\n      }, this);\n      this.updateRectangles();\n      Generic.prototype.initialize.apply(this, arguments);\n    },\n    getClassName: function () {\n      return this.get('name');\n    },\n    updateRectangles: function () {\n      var attrs = this.get('attrs');\n      var rects = [{\n        type: 'name',\n        text: this.getClassName()\n      }, {\n        type: 'attrs',\n        text: this.get('attributes')\n      }, {\n        type: 'methods',\n        text: this.get('methods')\n      }];\n      var offsetY = 0;\n      rects.forEach(function (rect) {\n        var lines = Array.isArray(rect.text) ? rect.text : [rect.text];\n        var rectHeight = lines.length * 20 + 20;\n        attrs['.uml-class-' + rect.type + '-text'].text = lines.join('\\n');\n        attrs['.uml-class-' + rect.type + '-rect'].height = rectHeight;\n        attrs['.uml-class-' + rect.type + '-rect'].transform = 'translate(0,' + offsetY + ')';\n        offsetY += rectHeight;\n      });\n    }\n  });\n  var ClassView = ElementView.extend({\n    initialize: function () {\n      ElementView.prototype.initialize.apply(this, arguments);\n      this.listenTo(this.model, 'uml-update', function () {\n        this.update();\n        this.resize();\n      });\n    }\n  });\n  var Abstract = Class.define('uml.Abstract', {\n    attrs: {\n      '.uml-class-name-rect': {\n        fill: '#e74c3c'\n      },\n      '.uml-class-attrs-rect': {\n        fill: '#c0392b'\n      },\n      '.uml-class-methods-rect': {\n        fill: '#c0392b'\n      }\n    }\n  }, {\n    getClassName: function () {\n      return ['<<Abstract>>', this.get('name')];\n    }\n  });\n  var AbstractView = ClassView;\n  var Interface = Class.define('uml.Interface', {\n    attrs: {\n      '.uml-class-name-rect': {\n        fill: '#f1c40f'\n      },\n      '.uml-class-attrs-rect': {\n        fill: '#f39c12'\n      },\n      '.uml-class-methods-rect': {\n        fill: '#f39c12'\n      }\n    }\n  }, {\n    getClassName: function () {\n      return ['<<Interface>>', this.get('name')];\n    }\n  });\n  var InterfaceView = ClassView;\n  var Generalization = Link.define('uml.Generalization', {\n    attrs: {\n      '.marker-target': {\n        d: 'M 20 0 L 0 10 L 20 20 z',\n        fill: 'white'\n      }\n    }\n  });\n  var Implementation = Link.define('uml.Implementation', {\n    attrs: {\n      '.marker-target': {\n        d: 'M 20 0 L 0 10 L 20 20 z',\n        fill: 'white'\n      },\n      '.connection': {\n        'stroke-dasharray': '3,3'\n      }\n    }\n  });\n  var Aggregation = Link.define('uml.Aggregation', {\n    attrs: {\n      '.marker-target': {\n        d: 'M 40 10 L 20 20 L 0 10 L 20 0 z',\n        fill: 'white'\n      }\n    }\n  });\n  var Composition = Link.define('uml.Composition', {\n    attrs: {\n      '.marker-target': {\n        d: 'M 40 10 L 20 20 L 0 10 L 20 0 z',\n        fill: 'black'\n      }\n    }\n  });\n  var Association = Link.define('uml.Association');\n\n  // Statechart\n\n  var State$1 = Generic.define('uml.State', {\n    attrs: {\n      '.uml-state-body': {\n        'width': 200,\n        'height': 200,\n        'rx': 10,\n        'ry': 10,\n        'fill': '#ecf0f1',\n        'stroke': '#bdc3c7',\n        'stroke-width': 3\n      },\n      '.uml-state-separator': {\n        'stroke': '#bdc3c7',\n        'stroke-width': 2\n      },\n      '.uml-state-name': {\n        'ref': '.uml-state-body',\n        'ref-x': .5,\n        'ref-y': 5,\n        'text-anchor': 'middle',\n        'fill': '#000000',\n        'font-family': 'Courier New',\n        'font-size': 14\n      },\n      '.uml-state-events': {\n        'ref': '.uml-state-separator',\n        'ref-x': 5,\n        'ref-y': 5,\n        'fill': '#000000',\n        'font-family': 'Courier New',\n        'font-size': 14\n      }\n    },\n    name: 'State',\n    events: []\n  }, {\n    markup: ['<g class=\"rotatable\">', '<g class=\"scalable\">', '<rect class=\"uml-state-body\"/>', '</g>', '<path class=\"uml-state-separator\"/>', '<text class=\"uml-state-name\"/>', '<text class=\"uml-state-events\"/>', '</g>'].join(''),\n    initialize: function () {\n      this.on({\n        'change:name': this.updateName,\n        'change:events': this.updateEvents,\n        'change:size': this.updatePath\n      }, this);\n      this.updateName();\n      this.updateEvents();\n      this.updatePath();\n      Generic.prototype.initialize.apply(this, arguments);\n    },\n    updateName: function () {\n      this.attr('.uml-state-name/text', this.get('name'));\n    },\n    updateEvents: function () {\n      this.attr('.uml-state-events/text', this.get('events').join('\\n'));\n    },\n    updatePath: function () {\n      var d = 'M 0 20 L ' + this.get('size').width + ' 20';\n\n      // We are using `silent: true` here because updatePath() is meant to be called\n      // on resize and there's no need to to update the element twice (`change:size`\n      // triggers also an update).\n      this.attr('.uml-state-separator/d', d, {\n        silent: true\n      });\n    }\n  });\n  var StartState$1 = Circle.define('uml.StartState', {\n    type: 'uml.StartState',\n    attrs: {\n      circle: {\n        'fill': '#34495e',\n        'stroke': '#2c3e50',\n        'stroke-width': 2,\n        'rx': 1\n      }\n    }\n  });\n  var EndState$1 = Generic.define('uml.EndState', {\n    size: {\n      width: 20,\n      height: 20\n    },\n    attrs: {\n      'circle.outer': {\n        transform: 'translate(10, 10)',\n        r: 10,\n        fill: '#ffffff',\n        stroke: '#2c3e50'\n      },\n      'circle.inner': {\n        transform: 'translate(10, 10)',\n        r: 6,\n        fill: '#34495e'\n      }\n    }\n  }, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"outer\"/><circle class=\"inner\"/></g></g>'\n  });\n  var Transition$1 = Link.define('uml.Transition', {\n    attrs: {\n      '.marker-target': {\n        d: 'M 10 0 L 0 5 L 10 10 z',\n        fill: '#34495e',\n        stroke: '#2c3e50'\n      },\n      '.connection': {\n        stroke: '#2c3e50'\n      }\n    }\n  });\n  var uml = {\n    Class: Class,\n    ClassView: ClassView,\n    Abstract: Abstract,\n    AbstractView: AbstractView,\n    Interface: Interface,\n    InterfaceView: InterfaceView,\n    Generalization: Generalization,\n    Implementation: Implementation,\n    Aggregation: Aggregation,\n    Composition: Composition,\n    Association: Association,\n    State: State$1,\n    StartState: StartState$1,\n    EndState: EndState$1,\n    Transition: Transition$1\n  };\n  var index$3 = {\n    basic: basic,\n    standard: standard,\n    devs: devs,\n    logic: logic,\n    chess: chess,\n    erd: erd,\n    fsa: fsa,\n    org: org,\n    pn: pn,\n    uml: uml\n  };\n  function abs2rel(absolute, max) {\n    if (max === 0) {\n      return '0%';\n    }\n    // round to 3 decimal places\n    var dp = 1000;\n    var relative = Math.round(absolute / max * 100 * dp) / dp;\n    return relative + \"%\";\n  }\n  function pin(relative) {\n    return function (end, view, magnet, coords) {\n      var fn = view.isNodeConnection(magnet) ? pinnedLinkEnd : pinnedElementEnd;\n      return fn(relative, end, view, magnet, coords);\n    };\n  }\n  function pinnedElementEnd(relative, end, view, magnet, coords) {\n    var angle = view.model.angle();\n    var bbox = view.getNodeUnrotatedBBox(magnet);\n    var origin = view.model.getBBox().center();\n    coords.rotate(origin, angle);\n    var dx = coords.x - bbox.x;\n    var dy = coords.y - bbox.y;\n    if (relative) {\n      dx = abs2rel(dx, bbox.width);\n      dy = abs2rel(dy, bbox.height);\n    }\n    end.anchor = {\n      name: 'topLeft',\n      args: {\n        dx: dx,\n        dy: dy,\n        rotate: true\n      }\n    };\n    return end;\n  }\n  function pinnedLinkEnd(relative, end, view, _magnet, coords) {\n    var connection = view.getConnection();\n    if (!connection) {\n      return end;\n    }\n    var length = connection.closestPointLength(coords);\n    if (relative) {\n      var totalLength = connection.length();\n      end.anchor = {\n        name: 'connectionRatio',\n        args: {\n          ratio: length / totalLength\n        }\n      };\n    } else {\n      end.anchor = {\n        name: 'connectionLength',\n        args: {\n          length: length\n        }\n      };\n    }\n    return end;\n  }\n  var useDefaults = noop;\n  var pinAbsolute = pin(false);\n  var pinRelative = pin(true);\n  var index$4 = {\n    useDefaults: useDefaults,\n    pinAbsolute: pinAbsolute,\n    pinRelative: pinRelative\n  };\n\n  // Vertex Handles\n  var VertexHandle = View.extend({\n    tagName: 'circle',\n    svgElement: true,\n    className: 'marker-vertex',\n    events: {\n      mousedown: 'onPointerDown',\n      touchstart: 'onPointerDown',\n      dblclick: 'onDoubleClick',\n      dbltap: 'onDoubleClick'\n    },\n    documentEvents: {\n      mousemove: 'onPointerMove',\n      touchmove: 'onPointerMove',\n      mouseup: 'onPointerUp',\n      touchend: 'onPointerUp',\n      touchcancel: 'onPointerUp'\n    },\n    attributes: {\n      'r': 6,\n      'fill': '#33334F',\n      'stroke': '#FFFFFF',\n      'stroke-width': 2,\n      'cursor': 'move'\n    },\n    position: function (x, y) {\n      var ref = this;\n      var vel = ref.vel;\n      var options = ref.options;\n      var scale = options.scale;\n      var matrix = V.createSVGMatrix().translate(x, y);\n      if (scale) {\n        matrix = matrix.scale(scale);\n      }\n      vel.transform(matrix, {\n        absolute: true\n      });\n    },\n    onPointerDown: function (evt) {\n      if (this.options.guard(evt)) {\n        return;\n      }\n      evt.stopPropagation();\n      evt.preventDefault();\n      this.options.paper.undelegateEvents();\n      this.delegateDocumentEvents(null, evt.data);\n      this.trigger('will-change', this, evt);\n    },\n    onPointerMove: function (evt) {\n      this.trigger('changing', this, evt);\n    },\n    onDoubleClick: function (evt) {\n      this.trigger('remove', this, evt);\n    },\n    onPointerUp: function (evt) {\n      this.trigger('changed', this, evt);\n      this.undelegateDocumentEvents();\n      this.options.paper.delegateEvents();\n    }\n  });\n  var Vertices = ToolView.extend({\n    name: 'vertices',\n    options: {\n      handleClass: VertexHandle,\n      snapRadius: 20,\n      redundancyRemoval: true,\n      vertexAdding: true,\n      stopPropagation: true,\n      scale: null\n    },\n    children: [{\n      tagName: 'path',\n      selector: 'connection',\n      className: 'joint-vertices-path',\n      attributes: {\n        'fill': 'none',\n        'stroke': 'transparent',\n        'stroke-width': 10,\n        'cursor': 'cell'\n      }\n    }],\n    handles: null,\n    events: {\n      'mousedown .joint-vertices-path': 'onPathPointerDown',\n      'touchstart .joint-vertices-path': 'onPathPointerDown'\n    },\n    onRender: function () {\n      if (this.options.vertexAdding) {\n        this.renderChildren();\n        this.updatePath();\n      }\n      this.resetHandles();\n      this.renderHandles();\n      return this;\n    },\n    update: function () {\n      var relatedView = this.relatedView;\n      var vertices = relatedView.model.vertices();\n      if (vertices.length === this.handles.length) {\n        this.updateHandles();\n      } else {\n        this.resetHandles();\n        this.renderHandles();\n      }\n      if (this.options.vertexAdding) {\n        this.updatePath();\n      }\n      return this;\n    },\n    resetHandles: function () {\n      var handles = this.handles;\n      this.handles = [];\n      this.stopListening();\n      if (!Array.isArray(handles)) {\n        return;\n      }\n      for (var i = 0, n = handles.length; i < n; i++) {\n        handles[i].remove();\n      }\n    },\n    renderHandles: function () {\n      var this$1 = this;\n      var relatedView = this.relatedView;\n      var vertices = relatedView.model.vertices();\n      for (var i = 0, n = vertices.length; i < n; i++) {\n        var vertex = vertices[i];\n        var handle = new this.options.handleClass({\n          index: i,\n          paper: this.paper,\n          scale: this.options.scale,\n          guard: function (evt) {\n            return this$1.guard(evt);\n          }\n        });\n        handle.render();\n        handle.position(vertex.x, vertex.y);\n        this.simulateRelatedView(handle.el);\n        handle.vel.appendTo(this.el);\n        this.handles.push(handle);\n        this.startHandleListening(handle);\n      }\n    },\n    updateHandles: function () {\n      var relatedView = this.relatedView;\n      var vertices = relatedView.model.vertices();\n      for (var i = 0, n = vertices.length; i < n; i++) {\n        var vertex = vertices[i];\n        var handle = this.handles[i];\n        if (!handle) {\n          return;\n        }\n        handle.position(vertex.x, vertex.y);\n      }\n    },\n    updatePath: function () {\n      var connection = this.childNodes.connection;\n      if (connection) {\n        connection.setAttribute('d', this.relatedView.getSerializedConnection());\n      }\n    },\n    startHandleListening: function (handle) {\n      var relatedView = this.relatedView;\n      if (relatedView.can('vertexMove')) {\n        this.listenTo(handle, 'will-change', this.onHandleWillChange);\n        this.listenTo(handle, 'changing', this.onHandleChanging);\n        this.listenTo(handle, 'changed', this.onHandleChanged);\n      }\n      if (relatedView.can('vertexRemove')) {\n        this.listenTo(handle, 'remove', this.onHandleRemove);\n      }\n    },\n    getNeighborPoints: function (index) {\n      var linkView = this.relatedView;\n      var vertices = linkView.model.vertices();\n      var prev = index > 0 ? vertices[index - 1] : linkView.sourceAnchor;\n      var next = index < vertices.length - 1 ? vertices[index + 1] : linkView.targetAnchor;\n      return {\n        prev: new Point(prev),\n        next: new Point(next)\n      };\n    },\n    onHandleWillChange: function (_handle, evt) {\n      this.focus();\n      var ref = this;\n      var relatedView = ref.relatedView;\n      var options = ref.options;\n      relatedView.model.startBatch('vertex-move', {\n        ui: true,\n        tool: this.cid\n      });\n      if (!options.stopPropagation) {\n        relatedView.notifyPointerdown.apply(relatedView, relatedView.paper.getPointerArgs(evt));\n      }\n    },\n    onHandleChanging: function (handle, evt) {\n      var ref = this;\n      var options = ref.options;\n      var linkView = ref.relatedView;\n      var index = handle.options.index;\n      var ref$1 = linkView.paper.getPointerArgs(evt);\n      var normalizedEvent = ref$1[0];\n      var x = ref$1[1];\n      var y = ref$1[2];\n      var vertex = {\n        x: x,\n        y: y\n      };\n      this.snapVertex(vertex, index);\n      linkView.model.vertex(index, vertex, {\n        ui: true,\n        tool: this.cid\n      });\n      handle.position(vertex.x, vertex.y);\n      if (!options.stopPropagation) {\n        linkView.notifyPointermove(normalizedEvent, x, y);\n      }\n    },\n    onHandleChanged: function (_handle, evt) {\n      var ref = this;\n      var options = ref.options;\n      var linkView = ref.relatedView;\n      if (options.vertexAdding) {\n        this.updatePath();\n      }\n      if (!options.redundancyRemoval) {\n        return;\n      }\n      var verticesRemoved = linkView.removeRedundantLinearVertices({\n        ui: true,\n        tool: this.cid\n      });\n      if (verticesRemoved) {\n        this.render();\n      }\n      this.blur();\n      linkView.model.stopBatch('vertex-move', {\n        ui: true,\n        tool: this.cid\n      });\n      if (this.eventData(evt).vertexAdded) {\n        linkView.model.stopBatch('vertex-add', {\n          ui: true,\n          tool: this.cid\n        });\n      }\n      var ref$1 = linkView.paper.getPointerArgs(evt);\n      var normalizedEvt = ref$1[0];\n      var x = ref$1[1];\n      var y = ref$1[2];\n      if (!options.stopPropagation) {\n        linkView.notifyPointerup(normalizedEvt, x, y);\n      }\n      linkView.checkMouseleave(normalizedEvt);\n    },\n    snapVertex: function (vertex, index) {\n      var snapRadius = this.options.snapRadius;\n      if (snapRadius > 0) {\n        var neighbors = this.getNeighborPoints(index);\n        var prev = neighbors.prev;\n        var next = neighbors.next;\n        if (Math.abs(vertex.x - prev.x) < snapRadius) {\n          vertex.x = prev.x;\n        } else if (Math.abs(vertex.x - next.x) < snapRadius) {\n          vertex.x = next.x;\n        }\n        if (Math.abs(vertex.y - prev.y) < snapRadius) {\n          vertex.y = neighbors.prev.y;\n        } else if (Math.abs(vertex.y - next.y) < snapRadius) {\n          vertex.y = next.y;\n        }\n      }\n    },\n    onHandleRemove: function (handle, evt) {\n      var index$1 = handle.options.index;\n      var linkView = this.relatedView;\n      linkView.model.removeVertex(index$1, {\n        ui: true\n      });\n      if (this.options.vertexAdding) {\n        this.updatePath();\n      }\n      linkView.checkMouseleave(normalizeEvent(evt));\n    },\n    onPathPointerDown: function (evt) {\n      if (this.guard(evt)) {\n        return;\n      }\n      evt.stopPropagation();\n      evt.preventDefault();\n      var normalizedEvent = normalizeEvent(evt);\n      var vertex = this.paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY).toJSON();\n      var relatedView = this.relatedView;\n      relatedView.model.startBatch('vertex-add', {\n        ui: true,\n        tool: this.cid\n      });\n      var index$1 = relatedView.getVertexIndex(vertex.x, vertex.y);\n      this.snapVertex(vertex, index$1);\n      relatedView.model.insertVertex(index$1, vertex, {\n        ui: true,\n        tool: this.cid\n      });\n      this.update();\n      var handle = this.handles[index$1];\n      this.eventData(normalizedEvent, {\n        vertexAdded: true\n      });\n      handle.onPointerDown(normalizedEvent);\n    },\n    onRemove: function () {\n      this.resetHandles();\n    }\n  }, {\n    VertexHandle: VertexHandle // keep as class property\n  });\n  function getViewBBox(view, useModelGeometry) {\n    var model = view.model;\n    if (useModelGeometry) {\n      return model.getBBox();\n    }\n    return model.isLink() ? view.getConnection().bbox() : view.getNodeUnrotatedBBox(view.el);\n  }\n  function getAnchor(coords, view, magnet) {\n    // take advantage of an existing logic inside of the\n    // pin relative connection strategy\n    var end = pinRelative.call(this.paper, {}, view, magnet, coords, this.model);\n    return end.anchor;\n  }\n  function snapAnchor(coords, view, magnet, type, relatedView, toolView) {\n    var snapRadius = toolView.options.snapRadius;\n    var isSource = type === 'source';\n    var refIndex = isSource ? 0 : -1;\n    var ref = this.model.vertex(refIndex) || this.getEndAnchor(isSource ? 'target' : 'source');\n    if (ref) {\n      if (Math.abs(ref.x - coords.x) < snapRadius) {\n        coords.x = ref.x;\n      }\n      if (Math.abs(ref.y - coords.y) < snapRadius) {\n        coords.y = ref.y;\n      }\n    }\n    return coords;\n  }\n  var SegmentHandle = View.extend({\n    tagName: 'g',\n    svgElement: true,\n    className: 'marker-segment',\n    events: {\n      mousedown: 'onPointerDown',\n      touchstart: 'onPointerDown'\n    },\n    documentEvents: {\n      mousemove: 'onPointerMove',\n      touchmove: 'onPointerMove',\n      mouseup: 'onPointerUp',\n      touchend: 'onPointerUp',\n      touchcancel: 'onPointerUp'\n    },\n    children: [{\n      tagName: 'line',\n      selector: 'line',\n      attributes: {\n        'stroke': '#33334F',\n        'stroke-width': 2,\n        'fill': 'none',\n        'pointer-events': 'none'\n      }\n    }, {\n      tagName: 'rect',\n      selector: 'handle',\n      attributes: {\n        'width': 20,\n        'height': 8,\n        'x': -10,\n        'y': -4,\n        'rx': 4,\n        'ry': 4,\n        'fill': '#33334F',\n        'stroke': '#FFFFFF',\n        'stroke-width': 2\n      }\n    }],\n    onRender: function () {\n      this.renderChildren();\n    },\n    position: function (x, y, angle, view) {\n      var ref = this.options;\n      var scale = ref.scale;\n      var matrix = V.createSVGMatrix().translate(x, y).rotate(angle);\n      if (scale) {\n        matrix = matrix.scale(scale);\n      }\n      var handle = this.childNodes.handle;\n      handle.setAttribute('transform', V.matrixToTransformString(matrix));\n      handle.setAttribute('cursor', angle % 180 === 0 ? 'row-resize' : 'col-resize');\n      var viewPoint = view.getClosestPoint(new Point(x, y));\n      var line = this.childNodes.line;\n      line.setAttribute('x1', x);\n      line.setAttribute('y1', y);\n      line.setAttribute('x2', viewPoint.x);\n      line.setAttribute('y2', viewPoint.y);\n    },\n    onPointerDown: function (evt) {\n      if (this.options.guard(evt)) {\n        return;\n      }\n      this.trigger('change:start', this, evt);\n      evt.stopPropagation();\n      evt.preventDefault();\n      this.options.paper.undelegateEvents();\n      this.delegateDocumentEvents(null, evt.data);\n    },\n    onPointerMove: function (evt) {\n      this.trigger('changing', this, evt);\n    },\n    onPointerUp: function (evt) {\n      this.undelegateDocumentEvents();\n      this.options.paper.delegateEvents();\n      this.trigger('change:end', this, evt);\n    },\n    show: function () {\n      this.el.style.display = '';\n    },\n    hide: function () {\n      this.el.style.display = 'none';\n    }\n  });\n  var Segments = ToolView.extend({\n    name: 'segments',\n    precision: .5,\n    options: {\n      handleClass: SegmentHandle,\n      segmentLengthThreshold: 40,\n      redundancyRemoval: true,\n      anchor: getAnchor,\n      snapRadius: 10,\n      snapHandle: true,\n      stopPropagation: true\n    },\n    handles: null,\n    onRender: function () {\n      this.resetHandles();\n      var relatedView = this.relatedView;\n      var vertices = relatedView.model.vertices();\n      vertices.unshift(relatedView.sourcePoint);\n      vertices.push(relatedView.targetPoint);\n      for (var i = 0, n = vertices.length; i < n - 1; i++) {\n        var vertex = vertices[i];\n        var nextVertex = vertices[i + 1];\n        var handle = this.renderHandle(vertex, nextVertex);\n        this.simulateRelatedView(handle.el);\n        this.handles.push(handle);\n        handle.options.index = i;\n      }\n      return this;\n    },\n    renderHandle: function (vertex, nextVertex) {\n      var this$1 = this;\n      var handle = new this.options.handleClass({\n        paper: this.paper,\n        scale: this.options.scale,\n        guard: function (evt) {\n          return this$1.guard(evt);\n        }\n      });\n      handle.render();\n      this.updateHandle(handle, vertex, nextVertex);\n      handle.vel.appendTo(this.el);\n      this.startHandleListening(handle);\n      return handle;\n    },\n    update: function () {\n      this.render();\n      return this;\n    },\n    startHandleListening: function (handle) {\n      this.listenTo(handle, 'change:start', this.onHandleChangeStart);\n      this.listenTo(handle, 'changing', this.onHandleChanging);\n      this.listenTo(handle, 'change:end', this.onHandleChangeEnd);\n    },\n    resetHandles: function () {\n      var handles = this.handles;\n      this.handles = [];\n      this.stopListening();\n      if (!Array.isArray(handles)) {\n        return;\n      }\n      for (var i = 0, n = handles.length; i < n; i++) {\n        handles[i].remove();\n      }\n    },\n    shiftHandleIndexes: function (value) {\n      var handles = this.handles;\n      for (var i = 0, n = handles.length; i < n; i++) {\n        handles[i].options.index += value;\n      }\n    },\n    resetAnchor: function (type, anchor) {\n      var relatedModel = this.relatedView.model;\n      if (anchor) {\n        relatedModel.prop([type, 'anchor'], anchor, {\n          rewrite: true,\n          ui: true,\n          tool: this.cid\n        });\n      } else {\n        relatedModel.removeProp([type, 'anchor'], {\n          ui: true,\n          tool: this.cid\n        });\n      }\n    },\n    snapHandle: function (handle, position, data) {\n      var index = handle.options.index;\n      var linkView = this.relatedView;\n      var link = linkView.model;\n      var vertices = link.vertices();\n      var axis = handle.options.axis;\n      var prev = vertices[index - 2] || data.sourceAnchor;\n      var next = vertices[index + 1] || data.targetAnchor;\n      var snapRadius = this.options.snapRadius;\n      if (Math.abs(position[axis] - prev[axis]) < snapRadius) {\n        position[axis] = prev[axis];\n      } else if (Math.abs(position[axis] - next[axis]) < snapRadius) {\n        position[axis] = next[axis];\n      }\n      return position;\n    },\n    onHandleChanging: function (handle, evt) {\n      var ref = this;\n      var options = ref.options;\n      var data = this.eventData(evt);\n      var relatedView = this.relatedView;\n      var paper = relatedView.paper;\n      var index$1 = handle.options.index - 1;\n      var normalizedEvent = normalizeEvent(evt);\n      var coords = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n      var position = this.snapHandle(handle, coords.clone(), data);\n      var axis = handle.options.axis;\n      var offset = this.options.snapHandle ? 0 : coords[axis] - position[axis];\n      var link = relatedView.model;\n      var vertices = cloneDeep(link.vertices());\n      var anchorFn = this.options.anchor;\n      if (typeof anchorFn !== 'function') {\n        anchorFn = null;\n      }\n      var handleIndex = handle.options.index;\n      var vertexPoints = [relatedView.sourcePoint.clone()].concat(vertices, [relatedView.targetPoint.clone()]);\n      var indexOffset = 0;\n\n      // check if vertex before handle vertex exists\n      if (handleIndex - 1 >= 0) {\n        var v1 = vertexPoints[handleIndex - 1];\n        var v2 = vertexPoints[handleIndex];\n        var theta = new Line(v1, v2).vector().theta();\n\n        // check only non-orthogonal segments\n        if (theta % 90 !== 0) {\n          vertices.splice(handleIndex - 1, 0, data.originalVertices[handleIndex - 1]);\n          indexOffset++;\n          this.shiftHandleIndexes(1);\n        }\n      }\n      var vertex = vertices[index$1 + indexOffset];\n      var nextVertex = vertices[index$1 + 1 + indexOffset];\n\n      // check if vertex after handle vertex exists\n      if (handleIndex + 2 < vertexPoints.length) {\n        var v1$1 = vertexPoints[handleIndex + 1];\n        var v2$1 = vertexPoints[handleIndex + 2];\n        var theta$1 = new Line(v1$1, v2$1).vector().theta();\n\n        // check only non-orthogonal segments\n        if (theta$1 % 90 !== 0) {\n          var isSingleVertex = data.originalVertices.length === 1;\n          var origVIndex = isSingleVertex ? 0 : handleIndex;\n          var additionalOffset = data.firstHandleShifted && !isSingleVertex ? 1 : 0;\n          var nextVIndex = 1 + indexOffset;\n          vertices.splice(handleIndex + nextVIndex, 0, data.originalVertices[origVIndex - additionalOffset]);\n        }\n      }\n\n      // First Segment\n      var sourceView = relatedView.sourceView;\n      var sourceBBox = relatedView.sourceBBox;\n      var changeSourceAnchor = false;\n      var deleteSourceAnchor = false;\n      if (!vertex) {\n        vertex = relatedView.sourceAnchor.toJSON();\n        vertex[axis] = position[axis];\n        if (sourceBBox.containsPoint(vertex)) {\n          vertex[axis] = position[axis];\n          changeSourceAnchor = true;\n        } else {\n          // we left the area of the source magnet for the first time\n          vertices.unshift(vertex);\n          this.shiftHandleIndexes(1);\n          data.firstHandleShifted = true;\n          deleteSourceAnchor = true;\n        }\n      } else if (index$1 === 0) {\n        if (sourceBBox.containsPoint(vertex)) {\n          vertices.shift();\n          this.shiftHandleIndexes(-1);\n          changeSourceAnchor = true;\n        } else {\n          vertex[axis] = position[axis];\n          deleteSourceAnchor = true;\n        }\n      } else {\n        vertex[axis] = position[axis];\n      }\n      if (anchorFn && sourceView) {\n        if (changeSourceAnchor) {\n          var sourceAnchorPosition = data.sourceAnchor.clone();\n          sourceAnchorPosition[axis] = position[axis];\n          var sourceAnchor = anchorFn.call(relatedView, sourceAnchorPosition, sourceView, relatedView.sourceMagnet || sourceView.el, 'source', relatedView);\n          this.resetAnchor('source', sourceAnchor);\n        }\n        if (deleteSourceAnchor) {\n          this.resetAnchor('source', data.sourceAnchorDef);\n        }\n      }\n\n      // Last segment\n      var targetView = relatedView.targetView;\n      var targetBBox = relatedView.targetBBox;\n      var changeTargetAnchor = false;\n      var deleteTargetAnchor = false;\n      if (!nextVertex) {\n        nextVertex = relatedView.targetAnchor.toJSON();\n        nextVertex[axis] = position[axis];\n        if (targetBBox.containsPoint(nextVertex)) {\n          changeTargetAnchor = true;\n        } else {\n          // we left the area of the target magnet for the first time\n          vertices.push(nextVertex);\n          deleteTargetAnchor = true;\n        }\n      } else if (index$1 === vertices.length - 2) {\n        if (targetBBox.containsPoint(nextVertex)) {\n          vertices.pop();\n          changeTargetAnchor = true;\n        } else {\n          nextVertex[axis] = position[axis];\n          deleteTargetAnchor = true;\n        }\n      } else {\n        nextVertex[axis] = position[axis];\n      }\n      if (anchorFn && targetView) {\n        if (changeTargetAnchor) {\n          var targetAnchorPosition = data.targetAnchor.clone();\n          targetAnchorPosition[axis] = position[axis];\n          var targetAnchor = anchorFn.call(relatedView, targetAnchorPosition, targetView, relatedView.targetMagnet || targetView.el, 'target', relatedView);\n          this.resetAnchor('target', targetAnchor);\n        }\n        if (deleteTargetAnchor) {\n          this.resetAnchor('target', data.targetAnchorDef);\n        }\n      }\n      if (vertices.some(function (v) {\n        return !v;\n      })) {\n        // This can happen when the link is using a smart routing and the number of\n        // vertices is not the same as the number of route points.\n        throw new Error('Segments: incompatible router in use');\n      }\n      link.vertices(vertices, {\n        ui: true,\n        tool: this.cid\n      });\n      this.updateHandle(handle, vertex, nextVertex, offset);\n      if (!options.stopPropagation) {\n        relatedView.notifyPointermove(normalizedEvent, coords.x, coords.y);\n      }\n    },\n    onHandleChangeStart: function (handle, evt) {\n      var ref = this;\n      var options = ref.options;\n      var handles = ref.handles;\n      var linkView = ref.relatedView;\n      var model = linkView.model;\n      var paper = linkView.paper;\n      var index$1 = handle.options.index;\n      if (!Array.isArray(handles)) {\n        return;\n      }\n      for (var i = 0, n = handles.length; i < n; i++) {\n        if (i !== index$1) {\n          handles[i].hide();\n        }\n      }\n      this.focus();\n      this.eventData(evt, {\n        sourceAnchor: linkView.sourceAnchor.clone(),\n        targetAnchor: linkView.targetAnchor.clone(),\n        sourceAnchorDef: clone(model.prop(['source', 'anchor'])),\n        targetAnchorDef: clone(model.prop(['target', 'anchor'])),\n        originalVertices: cloneDeep(model.vertices()),\n        firstHandleShifted: false\n      });\n      model.startBatch('segment-move', {\n        ui: true,\n        tool: this.cid\n      });\n      if (!options.stopPropagation) {\n        linkView.notifyPointerdown.apply(linkView, paper.getPointerArgs(evt));\n      }\n    },\n    onHandleChangeEnd: function (_handle, evt) {\n      var ref = this;\n      var options = ref.options;\n      var linkView = ref.relatedView;\n      var paper = linkView.paper;\n      var model = linkView.model;\n      if (options.redundancyRemoval) {\n        linkView.removeRedundantLinearVertices({\n          ui: true,\n          tool: this.cid\n        });\n      }\n      var normalizedEvent = normalizeEvent(evt);\n      var coords = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n      this.render();\n      this.blur();\n      model.stopBatch('segment-move', {\n        ui: true,\n        tool: this.cid\n      });\n      if (!options.stopPropagation) {\n        linkView.notifyPointerup(normalizedEvent, coords.x, coords.y);\n      }\n      linkView.checkMouseleave(normalizedEvent);\n    },\n    updateHandle: function (handle, vertex, nextVertex, offset) {\n      var vertical = Math.abs(vertex.x - nextVertex.x) < this.precision;\n      var horizontal = Math.abs(vertex.y - nextVertex.y) < this.precision;\n      if (vertical || horizontal) {\n        var segmentLine = new Line(vertex, nextVertex);\n        var length = segmentLine.length();\n        if (length < this.options.segmentLengthThreshold) {\n          handle.hide();\n        } else {\n          var position = segmentLine.midpoint();\n          var axis = vertical ? 'x' : 'y';\n          position[axis] += offset || 0;\n          var angle = segmentLine.vector().vectorAngle(new Point(1, 0));\n          handle.position(position.x, position.y, angle, this.relatedView);\n          handle.show();\n          handle.options.axis = axis;\n        }\n      } else {\n        handle.hide();\n      }\n    },\n    onRemove: function () {\n      this.resetHandles();\n    }\n  }, {\n    SegmentHandle: SegmentHandle // keep as class property\n  });\n\n  // End Markers\n  var Arrowhead = ToolView.extend({\n    tagName: 'path',\n    xAxisVector: new Point(1, 0),\n    events: {\n      mousedown: 'onPointerDown',\n      touchstart: 'onPointerDown'\n    },\n    documentEvents: {\n      mousemove: 'onPointerMove',\n      touchmove: 'onPointerMove',\n      mouseup: 'onPointerUp',\n      touchend: 'onPointerUp',\n      touchcancel: 'onPointerUp'\n    },\n    options: {\n      scale: null\n    },\n    onRender: function () {\n      this.update();\n    },\n    update: function () {\n      var ratio = this.ratio;\n      var view = this.relatedView;\n      var tangent = view.getTangentAtRatio(ratio);\n      var position, angle;\n      if (tangent) {\n        position = tangent.start;\n        angle = tangent.vector().vectorAngle(this.xAxisVector) || 0;\n      } else {\n        position = view.getPointAtRatio(ratio);\n        angle = 0;\n      }\n      if (!position) {\n        return this;\n      }\n      var matrix = V.createSVGMatrix().translate(position.x, position.y).rotate(angle);\n      var ref = this.options;\n      var scale = ref.scale;\n      if (scale) {\n        matrix = matrix.scale(scale);\n      }\n      this.vel.transform(matrix, {\n        absolute: true\n      });\n      return this;\n    },\n    onPointerDown: function (evt) {\n      if (this.guard(evt)) {\n        return;\n      }\n      evt.stopPropagation();\n      evt.preventDefault();\n      var relatedView = this.relatedView;\n      relatedView.model.startBatch('arrowhead-move', {\n        ui: true,\n        tool: this.cid\n      });\n      if (relatedView.can('arrowheadMove')) {\n        relatedView.startArrowheadMove(this.arrowheadType);\n        this.delegateDocumentEvents();\n        relatedView.paper.undelegateEvents();\n      }\n      this.focus();\n      this.el.style.pointerEvents = 'none';\n    },\n    onPointerMove: function (evt) {\n      var normalizedEvent = normalizeEvent(evt);\n      var coords = this.paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n      this.relatedView.pointermove(normalizedEvent, coords.x, coords.y);\n    },\n    onPointerUp: function (evt) {\n      this.undelegateDocumentEvents();\n      var relatedView = this.relatedView;\n      var paper = relatedView.paper;\n      var normalizedEvent = normalizeEvent(evt);\n      var coords = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n      relatedView.pointerup(normalizedEvent, coords.x, coords.y);\n      paper.delegateEvents();\n      this.blur();\n      this.el.style.pointerEvents = '';\n      relatedView.model.stopBatch('arrowhead-move', {\n        ui: true,\n        tool: this.cid\n      });\n    }\n  });\n  var TargetArrowhead = Arrowhead.extend({\n    name: 'target-arrowhead',\n    ratio: 1,\n    arrowheadType: 'target',\n    attributes: {\n      'd': 'M -10 -8 10 0 -10 8 Z',\n      'fill': '#33334F',\n      'stroke': '#FFFFFF',\n      'stroke-width': 2,\n      'cursor': 'move',\n      'class': 'target-arrowhead'\n    }\n  });\n  var SourceArrowhead = Arrowhead.extend({\n    name: 'source-arrowhead',\n    ratio: 0,\n    arrowheadType: 'source',\n    attributes: {\n      'd': 'M 10 -8 -10 0 10 8 Z',\n      'fill': '#33334F',\n      'stroke': '#FFFFFF',\n      'stroke-width': 2,\n      'cursor': 'move',\n      'class': 'source-arrowhead'\n    }\n  });\n  var Boundary = ToolView.extend({\n    name: 'boundary',\n    tagName: 'rect',\n    options: {\n      padding: 10,\n      useModelGeometry: false\n    },\n    attributes: {\n      'fill': 'none',\n      'stroke': '#33334F',\n      'stroke-width': .5,\n      'stroke-dasharray': '5, 5',\n      'pointer-events': 'none'\n    },\n    onRender: function () {\n      this.update();\n    },\n    update: function () {\n      var ref = this;\n      var view = ref.relatedView;\n      var options = ref.options;\n      var vel = ref.vel;\n      var useModelGeometry = options.useModelGeometry;\n      var rotate = options.rotate;\n      var padding = normalizeSides(options.padding);\n      var bbox = getViewBBox(view, useModelGeometry).moveAndExpand({\n        x: -padding.left,\n        y: -padding.top,\n        width: padding.left + padding.right,\n        height: padding.top + padding.bottom\n      });\n      var model = view.model;\n      if (model.isElement()) {\n        var angle = model.angle();\n        if (angle) {\n          if (rotate) {\n            var origin = model.getBBox().center();\n            vel.rotate(angle, origin.x, origin.y, {\n              absolute: true\n            });\n          } else {\n            bbox = bbox.bbox(angle);\n          }\n        }\n      }\n      vel.attr(bbox.toJSON());\n      return this;\n    }\n  });\n  var Anchor = ToolView.extend({\n    tagName: 'g',\n    type: null,\n    children: [{\n      tagName: 'circle',\n      selector: 'anchor',\n      attributes: {\n        'cursor': 'pointer'\n      }\n    }, {\n      tagName: 'rect',\n      selector: 'area',\n      attributes: {\n        'pointer-events': 'none',\n        'fill': 'none',\n        'stroke': '#33334F',\n        'stroke-dasharray': '2,4',\n        'rx': 5,\n        'ry': 5\n      }\n    }],\n    events: {\n      mousedown: 'onPointerDown',\n      touchstart: 'onPointerDown',\n      dblclick: 'onPointerDblClick',\n      dbltap: 'onPointerDblClick'\n    },\n    documentEvents: {\n      mousemove: 'onPointerMove',\n      touchmove: 'onPointerMove',\n      mouseup: 'onPointerUp',\n      touchend: 'onPointerUp',\n      touchcancel: 'onPointerUp'\n    },\n    options: {\n      snap: snapAnchor,\n      anchor: getAnchor,\n      scale: null,\n      resetAnchor: true,\n      customAnchorAttributes: {\n        'stroke-width': 4,\n        'stroke': '#33334F',\n        'fill': '#FFFFFF',\n        'r': 5\n      },\n      defaultAnchorAttributes: {\n        'stroke-width': 2,\n        'stroke': '#FFFFFF',\n        'fill': '#33334F',\n        'r': 6\n      },\n      areaPadding: 6,\n      snapRadius: 10,\n      restrictArea: true,\n      redundancyRemoval: true\n    },\n    onRender: function () {\n      this.renderChildren();\n      this.toggleArea(false);\n      this.update();\n    },\n    update: function () {\n      var type = this.type;\n      var relatedView = this.relatedView;\n      var view = relatedView.getEndView(type);\n      if (view) {\n        this.updateAnchor();\n        this.updateArea();\n        this.el.style.display = '';\n      } else {\n        this.el.style.display = 'none';\n      }\n      return this;\n    },\n    updateAnchor: function () {\n      var childNodes = this.childNodes;\n      if (!childNodes) {\n        return;\n      }\n      var anchorNode = childNodes.anchor;\n      if (!anchorNode) {\n        return;\n      }\n      var relatedView = this.relatedView;\n      var type = this.type;\n      var position = relatedView.getEndAnchor(type);\n      var options = this.options;\n      var customAnchor = relatedView.model.prop([type, 'anchor']);\n      var transformString = \"translate(\" + position.x + \",\" + position.y + \")\";\n      if (options.scale) {\n        transformString += \" scale(\" + options.scale + \")\";\n      }\n      anchorNode.setAttribute('transform', transformString);\n      var anchorAttributes = customAnchor ? options.customAnchorAttributes : options.defaultAnchorAttributes;\n      for (var attrName in anchorAttributes) {\n        anchorNode.setAttribute(attrName, anchorAttributes[attrName]);\n      }\n    },\n    updateArea: function () {\n      var childNodes = this.childNodes;\n      if (!childNodes) {\n        return;\n      }\n      var areaNode = childNodes.area;\n      if (!areaNode) {\n        return;\n      }\n      var relatedView = this.relatedView;\n      var type = this.type;\n      var view = relatedView.getEndView(type);\n      var model = view.model;\n      var magnet = relatedView.getEndMagnet(type);\n      var padding = this.options.areaPadding;\n      if (!isFinite(padding)) {\n        padding = 0;\n      }\n      var bbox, angle, center;\n      if (view.isNodeConnection(magnet)) {\n        bbox = view.getNodeBBox(magnet);\n        angle = 0;\n        center = bbox.center();\n      } else {\n        bbox = view.getNodeUnrotatedBBox(magnet);\n        angle = model.angle();\n        center = bbox.center();\n        if (angle) {\n          center.rotate(model.getBBox().center(), -angle);\n        }\n        // TODO: get the link's magnet rotation into account\n      }\n      bbox.inflate(padding);\n      areaNode.setAttribute('x', -bbox.width / 2);\n      areaNode.setAttribute('y', -bbox.height / 2);\n      areaNode.setAttribute('width', bbox.width);\n      areaNode.setAttribute('height', bbox.height);\n      areaNode.setAttribute('transform', 'translate(' + center.x + ',' + center.y + ') rotate(' + angle + ')');\n    },\n    toggleArea: function (visible) {\n      var childNodes = this.childNodes;\n      if (!childNodes) {\n        return;\n      }\n      var areaNode = childNodes.area;\n      if (!areaNode) {\n        return;\n      }\n      areaNode.style.display = visible ? '' : 'none';\n    },\n    onPointerDown: function (evt) {\n      if (this.guard(evt)) {\n        return;\n      }\n      evt.stopPropagation();\n      evt.preventDefault();\n      this.paper.undelegateEvents();\n      this.delegateDocumentEvents();\n      this.focus();\n      this.toggleArea(this.options.restrictArea);\n      this.relatedView.model.startBatch('anchor-move', {\n        ui: true,\n        tool: this.cid\n      });\n    },\n    resetAnchor: function (anchor) {\n      var type = this.type;\n      var relatedModel = this.relatedView.model;\n      if (anchor) {\n        relatedModel.prop([type, 'anchor'], anchor, {\n          rewrite: true,\n          ui: true,\n          tool: this.cid\n        });\n      } else {\n        relatedModel.removeProp([type, 'anchor'], {\n          ui: true,\n          tool: this.cid\n        });\n      }\n    },\n    onPointerMove: function (evt) {\n      var relatedView = this.relatedView;\n      var type = this.type;\n      var view = relatedView.getEndView(type);\n      var model = view.model;\n      var magnet = relatedView.getEndMagnet(type);\n      var normalizedEvent = normalizeEvent(evt);\n      var coords = this.paper.clientToLocalPoint(normalizedEvent.clientX, normalizedEvent.clientY);\n      var snapFn = this.options.snap;\n      if (typeof snapFn === 'function') {\n        coords = snapFn.call(relatedView, coords, view, magnet, type, relatedView, this);\n        coords = new Point(coords);\n      }\n      if (this.options.restrictArea) {\n        if (view.isNodeConnection(magnet)) {\n          // snap coords to the link's connection\n          var pointAtConnection = view.getClosestPoint(coords);\n          if (pointAtConnection) {\n            coords = pointAtConnection;\n          }\n        } else {\n          // snap coords within node bbox\n          var bbox = view.getNodeUnrotatedBBox(magnet);\n          var angle = model.angle();\n          var origin = model.getBBox().center();\n          var rotatedCoords = coords.clone().rotate(origin, angle);\n          if (!bbox.containsPoint(rotatedCoords)) {\n            coords = bbox.pointNearestToPoint(rotatedCoords).rotate(origin, -angle);\n          }\n        }\n      }\n      var anchor;\n      var anchorFn = this.options.anchor;\n      if (typeof anchorFn === 'function') {\n        anchor = anchorFn.call(relatedView, coords, view, magnet, type, relatedView);\n      }\n      this.resetAnchor(anchor);\n      this.update();\n    },\n    onPointerUp: function (evt) {\n      var normalizedEvent = normalizeEvent(evt);\n      this.paper.delegateEvents();\n      this.undelegateDocumentEvents();\n      this.blur();\n      this.toggleArea(false);\n      var linkView = this.relatedView;\n      if (this.options.redundancyRemoval) {\n        linkView.removeRedundantLinearVertices({\n          ui: true,\n          tool: this.cid\n        });\n      }\n      linkView.checkMouseleave(normalizedEvent);\n      linkView.model.stopBatch('anchor-move', {\n        ui: true,\n        tool: this.cid\n      });\n    },\n    onPointerDblClick: function () {\n      var anchor = this.options.resetAnchor;\n      if (anchor === false) {\n        return;\n      } // reset anchor disabled\n      if (anchor === true) {\n        anchor = null;\n      } // remove the current anchor\n      this.resetAnchor(cloneDeep(anchor));\n      this.update();\n    }\n  });\n  var SourceAnchor = Anchor.extend({\n    name: 'source-anchor',\n    type: 'source'\n  });\n  var TargetAnchor = Anchor.extend({\n    name: 'target-anchor',\n    type: 'target'\n  });\n  var Button = ToolView.extend({\n    name: 'button',\n    events: {\n      'mousedown': 'onPointerDown',\n      'touchstart': 'onPointerDown'\n    },\n    options: {\n      distance: 0,\n      offset: 0,\n      scale: null,\n      rotate: false\n    },\n    onRender: function () {\n      this.renderChildren(this.options.markup);\n      this.update();\n    },\n    update: function () {\n      this.position();\n      return this;\n    },\n    position: function () {\n      var ref = this;\n      var vel = ref.vel;\n      vel.transform(this.getCellMatrix(), {\n        absolute: true\n      });\n    },\n    getCellMatrix: function getCellMatrix() {\n      return this.relatedView.model.isLink() ? this.getLinkMatrix() : this.getElementMatrix();\n    },\n    getElementMatrix: function getElementMatrix() {\n      var ref = this;\n      var view = ref.relatedView;\n      var options = ref.options;\n      var x = options.x;\n      if (x === void 0) x = 0;\n      var y = options.y;\n      if (y === void 0) y = 0;\n      var offset = options.offset;\n      if (offset === void 0) offset = {};\n      var useModelGeometry = options.useModelGeometry;\n      var rotate = options.rotate;\n      var scale = options.scale;\n      var bbox = getViewBBox(view, useModelGeometry);\n      var angle = view.model.angle();\n      if (!rotate) {\n        bbox = bbox.bbox(angle);\n      }\n      var offsetX = offset.x;\n      if (offsetX === void 0) offsetX = 0;\n      var offsetY = offset.y;\n      if (offsetY === void 0) offsetY = 0;\n      if (isPercentage(x)) {\n        x = parseFloat(x) / 100 * bbox.width;\n      } else if (isCalcAttribute(x)) {\n        x = Number(evalCalcAttribute(x, bbox));\n      }\n      if (isPercentage(y)) {\n        y = parseFloat(y) / 100 * bbox.height;\n      } else if (isCalcAttribute(y)) {\n        y = Number(evalCalcAttribute(y, bbox));\n      }\n      var matrix = V.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n      if (rotate) {\n        matrix = matrix.rotate(angle);\n      }\n      matrix = matrix.translate(x + offsetX - bbox.width / 2, y + offsetY - bbox.height / 2);\n      if (scale) {\n        matrix = matrix.scale(scale);\n      }\n      return matrix;\n    },\n    getLinkMatrix: function getLinkMatrix() {\n      var ref = this;\n      var view = ref.relatedView;\n      var options = ref.options;\n      var offset = options.offset;\n      if (offset === void 0) offset = 0;\n      var distance = options.distance;\n      if (distance === void 0) distance = 0;\n      var rotate = options.rotate;\n      var scale = options.scale;\n      var tangent, position, angle;\n      if (isPercentage(distance)) {\n        tangent = view.getTangentAtRatio(parseFloat(distance) / 100);\n      } else {\n        tangent = view.getTangentAtLength(distance);\n      }\n      if (tangent) {\n        position = tangent.start;\n        angle = tangent.vector().vectorAngle(new Point(1, 0)) || 0;\n      } else {\n        position = view.getConnection().start;\n        angle = 0;\n      }\n      var matrix = V.createSVGMatrix().translate(position.x, position.y).rotate(angle).translate(0, offset);\n      if (!rotate) {\n        matrix = matrix.rotate(-angle);\n      }\n      if (scale) {\n        matrix = matrix.scale(scale);\n      }\n      return matrix;\n    },\n    onPointerDown: function (evt) {\n      if (this.guard(evt)) {\n        return;\n      }\n      evt.stopPropagation();\n      evt.preventDefault();\n      var actionFn = this.options.action;\n      if (typeof actionFn === 'function') {\n        actionFn.call(this.relatedView, evt, this.relatedView, this);\n      }\n    }\n  });\n  var Remove = Button.extend({\n    children: [{\n      tagName: 'circle',\n      selector: 'button',\n      attributes: {\n        'r': 7,\n        'fill': '#FF1D00',\n        'cursor': 'pointer'\n      }\n    }, {\n      tagName: 'path',\n      selector: 'icon',\n      attributes: {\n        'd': 'M -3 -3 3 3 M -3 3 3 -3',\n        'fill': 'none',\n        'stroke': '#FFFFFF',\n        'stroke-width': 2,\n        'pointer-events': 'none'\n      }\n    }],\n    options: {\n      distance: 60,\n      offset: 0,\n      action: function (evt, view, tool) {\n        view.model.remove({\n          ui: true,\n          tool: tool.cid\n        });\n      }\n    }\n  });\n  var Connect = Button.extend({\n    name: 'connect',\n    documentEvents: {\n      mousemove: 'drag',\n      touchmove: 'drag',\n      mouseup: 'dragend',\n      touchend: 'dragend',\n      touchcancel: 'dragend'\n    },\n    children: [{\n      tagName: 'circle',\n      selector: 'button',\n      attributes: {\n        'r': 7,\n        'fill': '#333333',\n        'cursor': 'pointer'\n      }\n    }, {\n      tagName: 'path',\n      selector: 'icon',\n      attributes: {\n        'd': 'M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z',\n        'fill': '#FFFFFF',\n        'stroke': 'none',\n        'stroke-width': 2,\n        'pointer-events': 'none'\n      }\n    }],\n    options: {\n      distance: 80,\n      offset: 0,\n      magnet: function (view) {\n        return view.el;\n      },\n      action: function (evt, _view, tool) {\n        return tool.dragstart(evt);\n      }\n    },\n    getMagnetNode: function () {\n      var assign;\n      var ref = this;\n      var options = ref.options;\n      var relatedView = ref.relatedView;\n      var magnet = options.magnet;\n      var magnetNode;\n      switch (typeof magnet) {\n        case 'function':\n          {\n            magnetNode = magnet.call(this, relatedView, this);\n            break;\n          }\n        case 'string':\n          {\n            assign = relatedView.findBySelector(magnet), magnetNode = assign[0];\n            break;\n          }\n        default:\n          {\n            magnetNode = magnet;\n            break;\n          }\n      }\n      if (!magnetNode) {\n        magnetNode = relatedView.el;\n      }\n      if (magnetNode instanceof SVGElement) {\n        return magnetNode;\n      }\n      throw new Error('Connect: magnet must be an SVGElement');\n    },\n    dragstart: function (evt) {\n      var ref = this;\n      var paper = ref.paper;\n      var relatedView = ref.relatedView;\n      var normalizedEvent = normalizeEvent(evt);\n      var ref$1 = paper.clientToLocalPoint(normalizedEvent.clientX, normalizedEvent.clientY);\n      var x = ref$1.x;\n      var y = ref$1.y;\n      relatedView.dragLinkStart(normalizedEvent, this.getMagnetNode(), x, y);\n      paper.undelegateEvents();\n      this.delegateDocumentEvents(null, normalizedEvent.data);\n      this.focus();\n    },\n    drag: function (evt) {\n      var ref = this;\n      var paper = ref.paper;\n      var relatedView = ref.relatedView;\n      var normalizedEvent = normalizeEvent(evt);\n      var ref$1 = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n      var x = ref$1.x;\n      var y = ref$1.y;\n      relatedView.dragLink(normalizedEvent, x, y);\n    },\n    dragend: function (evt) {\n      var ref = this;\n      var paper = ref.paper;\n      var relatedView = ref.relatedView;\n      var normalizedEvent = normalizeEvent(evt);\n      var ref$1 = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n      var x = ref$1.x;\n      var y = ref$1.y;\n      relatedView.dragLinkEnd(normalizedEvent, x, y);\n      this.undelegateDocumentEvents();\n      paper.delegateEvents();\n      this.blur();\n      relatedView.checkMouseleave(normalizedEvent);\n    }\n  });\n  var HoverConnect = Connect.extend({\n    name: 'hover-connect',\n    defaultMarkup: [{\n      tagName: 'circle',\n      attributes: {\n        'r': 7,\n        'fill': '#333333',\n        'cursor': 'pointer'\n      }\n    }, {\n      tagName: 'path',\n      attributes: {\n        'd': 'M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z',\n        'fill': '#FFFFFF',\n        'stroke': 'none',\n        'stroke-width': 2\n      }\n    }],\n    children: function children() {\n      var ref = this;\n      var options = ref.options;\n      var defaultMarkup = ref.defaultMarkup;\n      return [{\n        tagName: 'path',\n        selector: 'track',\n        attributes: {\n          'fill': 'none',\n          'stroke': 'transparent',\n          'stroke-width': options.trackWidth || 15,\n          'cursor': 'pointer'\n        }\n      }, {\n        tagName: 'g',\n        selector: 'button',\n        attributes: {\n          'pointer-events': 'none',\n          'display': 'none'\n        },\n        children: options.markup || defaultMarkup\n      }];\n    },\n    events: Object.assign({\n      mousemove: 'onMousemove',\n      mouseenter: 'onMouseenter',\n      mouseleave: 'onMouseleave'\n    }, Connect.prototype.events),\n    onRender: function () {\n      this.renderChildren();\n      this.update();\n    },\n    trackPath: null,\n    update: function update() {\n      var ref = this;\n      var childNodes = ref.childNodes;\n      this.trackPath = this.getTrackPath();\n      Connect.prototype.update.apply(this, arguments);\n      childNodes.track.setAttribute('d', this.trackPath.serialize());\n    },\n    position: function position() {\n      var ref = this;\n      var el = ref.el;\n      var childNodes = ref.childNodes;\n      childNodes.button.setAttribute('transform', V.matrixToTransformString(this.getButtonMatrix()));\n      el.setAttribute('transform', V.matrixToTransformString(this.getTrackMatrix()));\n    },\n    getButtonMatrix: function getButtonMatrix() {\n      var ref = this;\n      var options = ref.options;\n      var trackPath = ref.trackPath;\n      var offset = options.offset;\n      if (offset === void 0) offset = 0;\n      var distance = options.distance;\n      if (distance === void 0) distance = 0;\n      var rotate = options.rotate;\n      var scale = options.scale;\n      var tangent, position, angle;\n      if (isPercentage(distance)) {\n        tangent = trackPath.tangentAtRatio(parseFloat(distance) / 100);\n      } else {\n        tangent = trackPath.tangentAtLength(distance);\n      }\n      if (tangent) {\n        position = tangent.start;\n        angle = tangent.vector().vectorAngle(new Point(1, 0)) || 0;\n      } else {\n        position = trackPath.start;\n        angle = 0;\n      }\n      var matrix = V.createSVGMatrix().translate(position.x, position.y).rotate(angle).translate(0, offset);\n      if (!rotate) {\n        matrix = matrix.rotate(-angle);\n      }\n      if (scale) {\n        matrix = matrix.scale(scale);\n      }\n      return matrix;\n    },\n    getTrackPath: function getTrackPath() {\n      return this.relatedView.getConnection();\n    },\n    getTrackMatrix: function getTrackMatrix() {\n      return V.createSVGMatrix();\n    },\n    getTrackRatioFromEvent: function getTrackRatioFromEvent(evt) {\n      var ref = this;\n      var relatedView = ref.relatedView;\n      var trackPath = ref.trackPath;\n      var localPoint = relatedView.paper.clientToLocalPoint(evt.clientX, evt.clientY);\n      var trackPoint = V.transformPoint(localPoint, this.getTrackMatrix().inverse());\n      return trackPath.closestPointLength(trackPoint);\n    },\n    canShowButton: function canShowButton() {\n      // Has been the paper events undelegated? If so, we can't show the button.\n      // TODO: add a method to the paper to check if the events are delegated.\n      return $._data(this.paper.el, 'events');\n    },\n    showButton: function showButton() {\n      this.childNodes.button.style.display = 'block';\n    },\n    hideButton: function hideButton() {\n      this.childNodes.button.style.display = '';\n    },\n    onMousemove: function onMousemove(evt) {\n      var ref = this;\n      var trackPath = ref.trackPath;\n      if (!trackPath) {\n        return;\n      }\n      var ref$1 = this;\n      var options = ref$1.options;\n      options.distance = this.getTrackRatioFromEvent(evt);\n      this.position();\n    },\n    onMouseenter: function onMouseenter() {\n      if (!this.canShowButton()) {\n        return;\n      }\n      this.showButton();\n    },\n    onMouseleave: function onMouseleave() {\n      this.hideButton();\n    }\n  });\n  var index$5 = {\n    Vertices: Vertices,\n    Segments: Segments,\n    TargetArrowhead: TargetArrowhead,\n    SourceArrowhead: SourceArrowhead,\n    Boundary: Boundary,\n    SourceAnchor: SourceAnchor,\n    TargetAnchor: TargetAnchor,\n    Button: Button,\n    Remove: Remove,\n    Connect: Connect,\n    HoverConnect: HoverConnect\n  };\n  var Control = ToolView.extend({\n    tagName: 'g',\n    children: [{\n      tagName: 'circle',\n      selector: 'handle',\n      attributes: {\n        'cursor': 'pointer',\n        'stroke-width': 2,\n        'stroke': '#FFFFFF',\n        'fill': '#33334F',\n        'r': 6\n      }\n    }, {\n      tagName: 'rect',\n      selector: 'extras',\n      attributes: {\n        'pointer-events': 'none',\n        'fill': 'none',\n        'stroke': '#33334F',\n        'stroke-dasharray': '2,4',\n        'rx': 5,\n        'ry': 5\n      }\n    }],\n    events: {\n      mousedown: 'onPointerDown',\n      touchstart: 'onPointerDown',\n      dblclick: 'onPointerDblClick',\n      dbltap: 'onPointerDblClick'\n    },\n    documentEvents: {\n      mousemove: 'onPointerMove',\n      touchmove: 'onPointerMove',\n      mouseup: 'onPointerUp',\n      touchend: 'onPointerUp',\n      touchcancel: 'onPointerUp'\n    },\n    options: {\n      handleAttributes: null,\n      selector: 'root',\n      padding: 6,\n      scale: null\n    },\n    getPosition: function () {\n      // To be overridden\n    },\n    setPosition: function () {\n      // To be overridden\n    },\n    resetPosition: function () {\n      // To be overridden\n    },\n    onRender: function () {\n      this.renderChildren();\n      this.toggleExtras(false);\n      this.update();\n    },\n    update: function () {\n      var ref = this.childNodes;\n      var handle = ref.handle;\n      var extras = ref.extras;\n      if (handle) {\n        this.updateHandle(handle);\n      } else {\n        throw new Error('Control: markup selector `handle` is required');\n      }\n      if (extras) {\n        this.updateExtras(extras);\n      }\n      return this;\n    },\n    updateHandle: function (handleNode) {\n      var ref = this;\n      var relatedView = ref.relatedView;\n      var options = ref.options;\n      var model = relatedView.model;\n      var relativePos = this.getPosition(relatedView, this);\n      var absolutePos = model.getAbsolutePointFromRelative(relativePos);\n      var handleAttributes = options.handleAttributes;\n      var scale = options.scale;\n      var transformString = \"translate(\" + absolutePos.x + \",\" + absolutePos.y + \")\";\n      if (scale) {\n        transformString += \" scale(\" + scale + \")\";\n      }\n      handleNode.setAttribute('transform', transformString);\n      if (handleAttributes) {\n        for (var attrName in handleAttributes) {\n          handleNode.setAttribute(attrName, handleAttributes[attrName]);\n        }\n      }\n    },\n    updateExtras: function (extrasNode) {\n      var ref = this;\n      var relatedView = ref.relatedView;\n      var options = ref.options;\n      var ref$1 = this.options;\n      var selector = ref$1.selector;\n      if (!selector) {\n        this.toggleExtras(false);\n        return;\n      }\n      var ref$2 = relatedView.findBySelector(selector);\n      var magnet = ref$2[0];\n      if (!magnet) {\n        throw new Error('Control: invalid selector.');\n      }\n      var padding = options.padding;\n      if (!isFinite(padding)) {\n        padding = 0;\n      }\n      var bbox = relatedView.getNodeUnrotatedBBox(magnet);\n      var model = relatedView.model;\n      var angle = model.angle();\n      var center = bbox.center();\n      if (angle) {\n        center.rotate(model.getBBox().center(), -angle);\n      }\n      bbox.inflate(padding);\n      extrasNode.setAttribute('x', -bbox.width / 2);\n      extrasNode.setAttribute('y', -bbox.height / 2);\n      extrasNode.setAttribute('width', bbox.width);\n      extrasNode.setAttribute('height', bbox.height);\n      extrasNode.setAttribute('transform', \"translate(\" + center.x + \",\" + center.y + \") rotate(\" + angle + \")\");\n    },\n    toggleExtras: function (visible) {\n      var ref = this.childNodes;\n      var extras = ref.extras;\n      if (!extras) {\n        return;\n      }\n      extras.style.display = visible ? '' : 'none';\n    },\n    onPointerDown: function (evt) {\n      var ref = this;\n      var relatedView = ref.relatedView;\n      var paper = ref.paper;\n      if (this.guard(evt)) {\n        return;\n      }\n      evt.stopPropagation();\n      evt.preventDefault();\n      paper.undelegateEvents();\n      this.delegateDocumentEvents();\n      this.focus();\n      this.toggleExtras(true);\n      relatedView.model.startBatch('control-move', {\n        ui: true,\n        tool: this.cid\n      });\n    },\n    onPointerMove: function (evt) {\n      var ref = this;\n      var relatedView = ref.relatedView;\n      var paper = ref.paper;\n      var model = relatedView.model;\n      var ref$1 = normalizeEvent(evt);\n      var clientX = ref$1.clientX;\n      var clientY = ref$1.clientY;\n      var coords = paper.clientToLocalPoint(clientX, clientY);\n      var relativeCoords = model.getRelativePointFromAbsolute(coords);\n      this.setPosition(relatedView, relativeCoords, this);\n      this.update();\n    },\n    onPointerUp: function (_evt) {\n      var ref = this;\n      var relatedView = ref.relatedView;\n      var paper = ref.paper;\n      paper.delegateEvents();\n      this.undelegateDocumentEvents();\n      this.blur();\n      this.toggleExtras(false);\n      relatedView.model.stopBatch('control-move', {\n        ui: true,\n        tool: this.cid\n      });\n    },\n    onPointerDblClick: function () {\n      var ref = this;\n      var relatedView = ref.relatedView;\n      this.resetPosition(relatedView, this);\n      this.update();\n    }\n  });\n  var HoverConnect$1 = HoverConnect.extend({\n    getTrackPath: function getTrackPath() {\n      var ref = this;\n      var view = ref.relatedView;\n      var options = ref.options;\n      var useModelGeometry = options.useModelGeometry;\n      var trackPath = options.trackPath;\n      if (trackPath === void 0) trackPath = 'M 0 0 H calc(w) V calc(h) H 0 Z';\n      if (typeof trackPath === 'function') {\n        trackPath = trackPath.call(this, view);\n      }\n      if (isCalcAttribute(trackPath)) {\n        var bbox = getViewBBox(view, useModelGeometry);\n        trackPath = evalCalcAttribute(trackPath, bbox);\n      }\n      return new Path(V.normalizePathData(trackPath));\n    },\n    getTrackMatrix: function getTrackMatrix() {\n      var ref = this;\n      var view = ref.relatedView;\n      var options = ref.options;\n      var useModelGeometry = options.useModelGeometry;\n      var rotate = options.rotate;\n      var bbox = getViewBBox(view, useModelGeometry);\n      var angle = view.model.angle();\n      if (!rotate) {\n        bbox = bbox.bbox(angle);\n      }\n      var matrix = V.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n      if (rotate) {\n        matrix = matrix.rotate(angle);\n      }\n      matrix = matrix.translate(-bbox.width / 2, -bbox.height / 2);\n      return matrix;\n    }\n  });\n  var index$6 = {\n    Button: Button,\n    Remove: Remove,\n    Connect: Connect,\n    Boundary: Boundary,\n    HoverConnect: HoverConnect$1,\n    Control: Control\n  };\n  var version = \"3.7.7\";\n  var Vectorizer = V;\n  var layout = {\n    PortLabel: PortLabel,\n    Port: Port\n  };\n  var setTheme = function (theme, opt) {\n    opt = opt || {};\n    invoke(views, 'setTheme', theme, opt);\n\n    // Update the default theme on the view prototype.\n    View.prototype.defaultTheme = theme;\n  };\n  var layout$1 = {\n    DirectedGraph: DirectedGraph,\n    PortLabel: PortLabel,\n    Port: Port\n  };\n\n  // export empty namespaces - backward compatibility\n  var format$1 = {};\n  var ui = {};\n  exports.V = V;\n  exports.Vectorizer = Vectorizer;\n  exports.anchors = anchors;\n  exports.config = config;\n  exports.connectionPoints = connectionPoints;\n  exports.connectionStrategies = index$4;\n  exports.connectors = connectors;\n  exports.dia = index$2;\n  exports.elementTools = index$6;\n  exports.env = env;\n  exports.format = format$1;\n  exports.g = g;\n  exports.highlighters = highlighters;\n  exports.layout = layout$1;\n  exports.linkAnchors = linkAnchors;\n  exports.linkTools = index$5;\n  exports.mvc = index$1;\n  exports.routers = routers;\n  exports.setTheme = setTheme;\n  exports.shapes = index$3;\n  exports.ui = ui;\n  exports.util = index;\n  exports.version = version;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});\nif (typeof joint !== 'undefined') {\n  var g = joint.g,\n    V = joint.V,\n    Vectorizer = joint.V;\n}"],
  "mappings": ";;;;;;;;;AAAA;AAAA;AAOA,KAAC,SAAUA,SAAQ,SAAS;AAC1B,aAAO,YAAY,YAAY,OAAO,WAAW,cAAc,QAAQ,SAAS,oBAAqB,gBAAiB,IAAI,OAAO,WAAW,cAAc,OAAO,MAAM,OAAO,CAAC,WAAW,YAAY,QAAQ,GAAG,OAAO,KAAKA,UAASA,WAAU,MAAM,QAAQA,QAAO,QAAQ,CAAC,GAAGA,QAAO,UAAUA,QAAO,CAAC;AAAA,IAC5S,GAAG,SAAM,SAAUC,UAAS,UAAU,GAAG;AACvC;AAEA,iBAAW,YAAY,SAAS,eAAe,SAAS,IAAI,SAAS,SAAS,IAAI;AAClF,UAAI,KAAK,EAAE,eAAe,SAAS,IAAI,EAAE,SAAS,IAAI;AACtD,UAAI,iBAAiB,OAAO,WAAW,cAAc,SAAS,OAAO,WAAW,cAAc,SAAS,OAAO,SAAS,cAAc,OAAO,CAAC;AAC7I,eAAS,kBAAkB;AACzB,cAAM,IAAI,MAAM,wEAAwE;AAAA,MAC1F;AACA,eAAS,cAAc,GAAG;AACxB,eAAO,KAAK,EAAE,cAAc,OAAO,UAAU,eAAe,KAAK,GAAG,SAAS,IAAI,EAAE,UAAU;AAAA,MAC/F;AACA,eAAS,qBAAqBC,KAAIC,SAAQ;AACxC,eAAOA,UAAS;AAAA,UACd,SAAS,CAAC;AAAA,QACZ,GAAGD,IAAGC,SAAQA,QAAO,OAAO,GAAGA,QAAO;AAAA,MACxC;AACA,eAAS,0BAA0B,GAAG;AACpC,eAAO,KAAK,EAAE,WAAW;AAAA,MAC3B;AACA,UAAI,QAAQ,SAAU,IAAI;AACxB,eAAO,MAAM,GAAG,QAAQ,QAAQ;AAAA,MAClC;AAGA,UAAI;AAAA;AAAA,QAEJ,MAAM,OAAO,cAAc,YAAY,UAAU,KAAK,MAAM,OAAO,UAAU,YAAY,MAAM,KAAK,MAAM,OAAO,QAAQ,YAAY,IAAI,KAAK,MAAM,OAAO,kBAAkB,YAAY,cAAc;AAAA,QAEvM,2BAAY;AACV,iBAAO;AAAA,QACT,EAAE,KAAK,SAAS,aAAa,EAAE;AAAA;AAC/B,UAAI,QAAQ,SAAU,MAAM;AAC1B,YAAI;AACF,iBAAO,CAAC,CAAC,KAAK;AAAA,QAChB,SAAS,OAAO;AACd,iBAAO;AAAA,QACT;AAAA,MACF;AAGA,UAAI,cAAc,CAAC,MAAM,WAAY;AACnC,eAAO,OAAO,eAAe,CAAC,GAAG,GAAG;AAAA,UAClC,KAAK,WAAY;AACf,mBAAO;AAAA,UACT;AAAA,QACF,CAAC,EAAE,CAAC,KAAK;AAAA,MACX,CAAC;AACD;AACA,UAAI,6BAA6B,CAAC,EAAE;AACpC,UAAI,2BAA2B,OAAO;AAGtC,UAAI,cAAc,4BAA4B,CAAC,2BAA2B,KAAK;AAAA,QAC7E,GAAG;AAAA,MACL,GAAG,CAAC;AAIJ,UAAI,IAAI,cAAc,SAASC,sBAAqBC,IAAG;AACrD,YAAI,aAAa,yBAAyB,MAAMA,EAAC;AACjD,eAAO,CAAC,CAAC,cAAc,WAAW;AAAA,MACpC,IAAI;AACJ,UAAI,6BAA6B;AAAA,QAC/B;AAAA,MACF;AACA,UAAI,2BAA2B,SAAU,QAAQ,OAAO;AACtD,eAAO;AAAA,UACL,YAAY,EAAE,SAAS;AAAA,UACvB,cAAc,EAAE,SAAS;AAAA,UACzB,UAAU,EAAE,SAAS;AAAA,UACrB;AAAA,QACF;AAAA,MACF;AACA,UAAI,WAAW,CAAC,EAAE;AAClB,UAAI,aAAa,SAAU,IAAI;AAC7B,eAAO,SAAS,KAAK,EAAE,EAAE,MAAM,GAAG,EAAE;AAAA,MACtC;AACA,UAAI,QAAQ,GAAG;AAGf,UAAI,gBAAgB,MAAM,WAAY;AAGpC,eAAO,CAAC,OAAO,GAAG,EAAE,qBAAqB,CAAC;AAAA,MAC5C,CAAC,IAAI,SAAU,IAAI;AACjB,eAAO,WAAW,EAAE,KAAK,WAAW,MAAM,KAAK,IAAI,EAAE,IAAI,OAAO,EAAE;AAAA,MACpE,IAAI;AAIJ,UAAI,yBAAyB,SAAU,IAAI;AACzC,YAAI,MAAM,QAAW;AACnB,gBAAM,UAAU,0BAA0B,EAAE;AAAA,QAC9C;AACA,eAAO;AAAA,MACT;AAIA,UAAI,kBAAkB,SAAU,IAAI;AAClC,eAAO,cAAc,uBAAuB,EAAE,CAAC;AAAA,MACjD;AACA,UAAI,WAAW,SAAU,IAAI;AAC3B,eAAO,OAAO,OAAO,WAAW,OAAO,OAAO,OAAO,OAAO;AAAA,MAC9D;AAMA,UAAI,cAAc,SAAU,OAAO,kBAAkB;AACnD,YAAI,CAAC,SAAS,KAAK,GAAG;AACpB,iBAAO;AAAA,QACT;AACA,YAAIH,KAAI;AACR,YAAI,oBAAoB,QAAQA,MAAK,MAAM,aAAa,cAAc,CAAC,SAAS,MAAMA,IAAG,KAAK,KAAK,CAAC,GAAG;AACrG,iBAAO;AAAA,QACT;AACA,YAAI,QAAQA,MAAK,MAAM,YAAY,cAAc,CAAC,SAAS,MAAMA,IAAG,KAAK,KAAK,CAAC,GAAG;AAChF,iBAAO;AAAA,QACT;AACA,YAAI,CAAC,oBAAoB,QAAQA,MAAK,MAAM,aAAa,cAAc,CAAC,SAAS,MAAMA,IAAG,KAAK,KAAK,CAAC,GAAG;AACtG,iBAAO;AAAA,QACT;AACA,cAAM,UAAU,yCAAyC;AAAA,MAC3D;AACA,UAAI,mBAAmB,CAAC,EAAE;AAC1B,UAAI,MAAM,SAAU,IAAI,KAAK;AAC3B,eAAO,iBAAiB,KAAK,IAAI,GAAG;AAAA,MACtC;AACA,UAAI,aAAa,SAAS;AAE1B,UAAI,SAAS,SAAS,UAAU,KAAK,SAAS,WAAW,aAAa;AACtE,UAAI,wBAAwB,SAAU,IAAI;AACxC,eAAO,SAAS,WAAW,cAAc,EAAE,IAAI,CAAC;AAAA,MAClD;AAGA,UAAI,eAAe,CAAC,eAAe,CAAC,MAAM,WAAY;AACpD,eAAO,OAAO,eAAe,sBAAsB,KAAK,GAAG,KAAK;AAAA,UAC9D,KAAK,WAAY;AACf,mBAAO;AAAA,UACT;AAAA,QACF,CAAC,EAAE,KAAK;AAAA,MACV,CAAC;AACD,UAAI,iCAAiC,OAAO;AAI5C,UAAI,MAAM,cAAc,iCAAiC,SAASI,0BAAyB,GAAG,GAAG;AAC/F,YAAI,gBAAgB,CAAC;AACrB,YAAI,YAAY,GAAG,IAAI;AACvB,YAAI,cAAc;AAChB,cAAI;AACF,mBAAO,+BAA+B,GAAG,CAAC;AAAA,UAC5C,SAAS,OAAO;AAAA,UAAY;AAAA,QAC9B;AACA,YAAI,IAAI,GAAG,CAAC,GAAG;AACb,iBAAO,yBAAyB,CAAC,2BAA2B,EAAE,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;AAAA,QAChF;AAAA,MACF;AACA,UAAI,iCAAiC;AAAA,QACnC,GAAG;AAAA,MACL;AACA,UAAI,WAAW,SAAU,IAAI;AAC3B,YAAI,CAAC,SAAS,EAAE,GAAG;AACjB,gBAAM,UAAU,OAAO,EAAE,IAAI,mBAAmB;AAAA,QAClD;AACA,eAAO;AAAA,MACT;AACA,UAAI,uBAAuB,OAAO;AAIlC,UAAI,MAAM,cAAc,uBAAuB,SAASC,gBAAe,GAAG,GAAG,YAAY;AACvF,iBAAS,CAAC;AACV,YAAI,YAAY,GAAG,IAAI;AACvB,iBAAS,UAAU;AACnB,YAAI,cAAc;AAChB,cAAI;AACF,mBAAO,qBAAqB,GAAG,GAAG,UAAU;AAAA,UAC9C,SAAS,OAAO;AAAA,UAAY;AAAA,QAC9B;AACA,YAAI,SAAS,cAAc,SAAS,YAAY;AAC9C,gBAAM,UAAU,yBAAyB;AAAA,QAC3C;AACA,YAAI,WAAW,YAAY;AACzB,YAAE,CAAC,IAAI,WAAW;AAAA,QACpB;AACA,eAAO;AAAA,MACT;AACA,UAAI,uBAAuB;AAAA,QACzB,GAAG;AAAA,MACL;AACA,UAAI,8BAA8B,cAAc,SAAU,QAAQ,KAAK,OAAO;AAC5E,eAAO,qBAAqB,EAAE,QAAQ,KAAK,yBAAyB,GAAG,KAAK,CAAC;AAAA,MAC/E,IAAI,SAAU,QAAQ,KAAK,OAAO;AAChC,eAAO,GAAG,IAAI;AACd,eAAO;AAAA,MACT;AACA,UAAI,YAAY,SAAU,KAAK,OAAO;AACpC,YAAI;AACF,sCAA4B,UAAU,KAAK,KAAK;AAAA,QAClD,SAAS,OAAO;AACd,mBAAS,GAAG,IAAI;AAAA,QAClB;AACA,eAAO;AAAA,MACT;AACA,UAAI,SAAS;AACb,UAAI,QAAQ,SAAS,MAAM,KAAK,UAAU,QAAQ,CAAC,CAAC;AACpD,UAAI,cAAc;AAClB,UAAI,mBAAmB,SAAS;AAGhC,UAAI,OAAO,YAAY,iBAAiB,YAAY;AAClD,oBAAY,gBAAgB,SAAU,IAAI;AACxC,iBAAO,iBAAiB,KAAK,EAAE;AAAA,QACjC;AAAA,MACF;AACA,UAAI,gBAAgB,YAAY;AAChC,UAAI,UAAU,SAAS;AACvB,UAAI,gBAAgB,OAAO,YAAY,cAAc,cAAc,KAAK,cAAc,OAAO,CAAC;AAC9F,UAAI,SAAS;AACb,UAAI,SAAS,qBAAqB,SAAUJ,SAAQ;AAClD,SAACA,QAAO,UAAU,SAAU,KAAK,OAAO;AACtC,iBAAO,YAAY,GAAG,MAAM,YAAY,GAAG,IAAI,UAAU,SAAY,QAAQ,CAAC;AAAA,QAChF,GAAG,YAAY,CAAC,CAAC,EAAE,KAAK;AAAA,UACtB,SAAS;AAAA,UACT,MAAM,SAAS,SAAS;AAAA,UACxB,WAAW;AAAA,QACb,CAAC;AAAA,MACH,CAAC;AACD,UAAI,KAAK;AACT,UAAI,UAAU,KAAK,OAAO;AAC1B,UAAI,MAAM,SAAU,KAAK;AACvB,eAAO,YAAY,OAAO,QAAQ,SAAY,KAAK,GAAG,IAAI,QAAQ,EAAE,KAAK,SAAS,SAAS,EAAE;AAAA,MAC/F;AACA,UAAI,OAAO,OAAO,MAAM;AACxB,UAAI,YAAY,SAAU,KAAK;AAC7B,eAAO,KAAK,GAAG,MAAM,KAAK,GAAG,IAAI,IAAI,GAAG;AAAA,MAC1C;AACA,UAAI,aAAa,CAAC;AAClB,UAAI,YAAY,SAAS;AACzB,UAAI,KAAK,KAAK;AACd,UAAI,UAAU,SAAU,IAAI;AAC1B,eAAO,MAAM,EAAE,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,CAAC,CAAC;AAAA,MACzC;AACA,UAAI,YAAY,SAAU,MAAM;AAC9B,eAAO,SAAU,IAAI;AACnB,cAAI;AACJ,cAAI,CAAC,SAAS,EAAE,MAAM,QAAQ,IAAI,EAAE,GAAG,SAAS,MAAM;AACpD,kBAAM,UAAU,4BAA4B,OAAO,WAAW;AAAA,UAChE;AACA,iBAAO;AAAA,QACT;AAAA,MACF;AACA,UAAI,eAAe;AACjB,YAAI,UAAU,YAAY,UAAU,YAAY,QAAQ,IAAI,UAAU;AACtE,YAAI,QAAQ,QAAQ;AACpB,YAAI,QAAQ,QAAQ;AACpB,YAAI,QAAQ,QAAQ;AACpB,cAAM,SAAU,IAAI,UAAU;AAC5B,mBAAS,SAAS;AAClB,gBAAM,KAAK,SAAS,IAAI,QAAQ;AAChC,iBAAO;AAAA,QACT;AACA,cAAM,SAAU,IAAI;AAClB,iBAAO,MAAM,KAAK,SAAS,EAAE,KAAK,CAAC;AAAA,QACrC;AACA,gBAAQ,SAAU,IAAI;AACpB,iBAAO,MAAM,KAAK,SAAS,EAAE;AAAA,QAC/B;AAAA,MACF,OAAO;AACL,YAAI,QAAQ,UAAU,OAAO;AAC7B,mBAAW,KAAK,IAAI;AACpB,cAAM,SAAU,IAAI,UAAU;AAC5B,mBAAS,SAAS;AAClB,sCAA4B,IAAI,OAAO,QAAQ;AAC/C,iBAAO;AAAA,QACT;AACA,cAAM,SAAU,IAAI;AAClB,iBAAO,IAAI,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,CAAC;AAAA,QACvC;AACA,gBAAQ,SAAU,IAAI;AACpB,iBAAO,IAAI,IAAI,KAAK;AAAA,QACtB;AAAA,MACF;AACA,UAAI,gBAAgB;AAAA,QAClB;AAAA,QACA;AAAA,QACA,KAAK;AAAA,QACL;AAAA,QACA;AAAA,MACF;AACA,UAAI,kBAAkB,cAAc;AACpC,UAAI,kBAAkB,cAAc;AACpC,UAAI,kBAAkB,cAAc;AACpC,UAAI,kBAAkB,cAAc;AACpC,UAAI,kBAAkB,cAAc;AACpC,UAAI,WAAW,qBAAqB,SAAUA,SAAQ;AACpD,YAAIK,oBAAmB,cAAc;AACrC,YAAI,uBAAuB,cAAc;AACzC,YAAI,WAAW,OAAO,MAAM,EAAE,MAAM,QAAQ;AAC5C,SAACL,QAAO,UAAU,SAAU,GAAG,KAAK,OAAO,SAAS;AAClD,cAAI,SAAS,UAAU,CAAC,CAAC,QAAQ,SAAS;AAC1C,cAAI,SAAS,UAAU,CAAC,CAAC,QAAQ,aAAa;AAC9C,cAAI,cAAc,UAAU,CAAC,CAAC,QAAQ,cAAc;AACpD,cAAI;AACJ,cAAI,OAAO,SAAS,YAAY;AAC9B,gBAAI,OAAO,OAAO,YAAY,CAAC,IAAI,OAAO,MAAM,GAAG;AACjD,0CAA4B,OAAO,QAAQ,GAAG;AAAA,YAChD;AACA,oBAAQ,qBAAqB,KAAK;AAClC,gBAAI,CAAC,MAAM,QAAQ;AACjB,oBAAM,SAAS,SAAS,KAAK,OAAO,OAAO,WAAW,MAAM,EAAE;AAAA,YAChE;AAAA,UACF;AACA,cAAI,MAAM,UAAU;AAClB,gBAAI,QAAQ;AACV,gBAAE,GAAG,IAAI;AAAA,YACX,OAAO;AACL,wBAAU,KAAK,KAAK;AAAA,YACtB;AACA;AAAA,UACF,WAAW,CAAC,QAAQ;AAClB,mBAAO,EAAE,GAAG;AAAA,UACd,WAAW,CAAC,eAAe,EAAE,GAAG,GAAG;AACjC,qBAAS;AAAA,UACX;AACA,cAAI,QAAQ;AACV,cAAE,GAAG,IAAI;AAAA,UACX,OAAO;AACL,wCAA4B,GAAG,KAAK,KAAK;AAAA,UAC3C;AAAA,QAEF,GAAG,SAAS,WAAW,YAAY,SAASM,YAAW;AACrD,iBAAO,OAAO,QAAQ,cAAcD,kBAAiB,IAAI,EAAE,UAAU,cAAc,IAAI;AAAA,QACzF,CAAC;AAAA,MACH,CAAC;AACD,UAAI,OAAO;AACX,UAAI,YAAY,SAAU,UAAU;AAClC,eAAO,OAAO,YAAY,aAAa,WAAW;AAAA,MACpD;AACA,UAAI,aAAa,SAAU,WAAW,QAAQ;AAC5C,eAAO,UAAU,SAAS,IAAI,UAAU,KAAK,SAAS,CAAC,KAAK,UAAU,SAAS,SAAS,CAAC,IAAI,KAAK,SAAS,KAAK,KAAK,SAAS,EAAE,MAAM,KAAK,SAAS,SAAS,KAAK,SAAS,SAAS,EAAE,MAAM;AAAA,MAC9L;AACA,UAAI,OAAO,KAAK;AAChB,UAAI,QAAQ,KAAK;AAIjB,UAAI,YAAY,SAAU,UAAU;AAClC,eAAO,MAAM,WAAW,CAAC,QAAQ,IAAI,KAAK,WAAW,IAAI,QAAQ,MAAM,QAAQ;AAAA,MACjF;AACA,UAAI,MAAM,KAAK;AAIf,UAAI,WAAW,SAAU,UAAU;AACjC,eAAO,WAAW,IAAI,IAAI,UAAU,QAAQ,GAAG,gBAAgB,IAAI;AAAA,MACrE;AACA,UAAI,MAAM,KAAK;AACf,UAAI,QAAQ,KAAK;AAKjB,UAAI,kBAAkB,SAAUE,QAAOC,SAAQ;AAC7C,YAAI,UAAU,UAAUD,MAAK;AAC7B,eAAO,UAAU,IAAI,IAAI,UAAUC,SAAQ,CAAC,IAAI,MAAM,SAASA,OAAM;AAAA,MACvE;AAGA,UAAI,eAAe,SAAU,aAAa;AACxC,eAAO,SAAU,OAAO,IAAI,WAAW;AACrC,cAAI,IAAI,gBAAgB,KAAK;AAC7B,cAAIA,UAAS,SAAS,EAAE,MAAM;AAC9B,cAAID,SAAQ,gBAAgB,WAAWC,OAAM;AAC7C,cAAI;AAGJ,cAAI,eAAe,MAAM,IAAI;AAC3B,mBAAOA,UAASD,QAAO;AACrB,sBAAQ,EAAEA,QAAO;AAEjB,kBAAI,SAAS,OAAO;AAClB,uBAAO;AAAA,cACT;AAAA,YAEF;AAAA,UACF,OAAO;AACL,mBAAOC,UAASD,QAAOA,UAAS;AAC9B,mBAAK,eAAeA,UAAS,MAAM,EAAEA,MAAK,MAAM,IAAI;AAClD,uBAAO,eAAeA,UAAS;AAAA,cACjC;AAAA,YACF;AAAA,UACF;AACA,iBAAO,CAAC,eAAe;AAAA,QACzB;AAAA,MACF;AACA,UAAI,gBAAgB;AAAA;AAAA;AAAA,QAGlB,UAAU,aAAa,IAAI;AAAA;AAAA;AAAA,QAG3B,SAAS,aAAa,KAAK;AAAA,MAC7B;AACA,UAAI,kBAAkB,cAAc;AACpC,UAAI,kBAAkB,cAAc;AACpC,UAAI,UAAU,cAAc;AAC5B,UAAI,qBAAqB,SAAU,QAAQ,OAAO;AAChD,YAAI,IAAI,gBAAgB,MAAM;AAC9B,YAAI,IAAI;AACR,YAAIE,UAAS,CAAC;AACd,YAAI;AACJ,aAAK,OAAO,GAAG;AACb,WAAC,IAAI,YAAY,GAAG,KAAK,IAAI,GAAG,GAAG,KAAKA,QAAO,KAAK,GAAG;AAAA,QACzD;AAEA,eAAO,MAAM,SAAS,GAAG;AACvB,cAAI,IAAI,GAAG,MAAM,MAAM,GAAG,CAAC,GAAG;AAC5B,aAAC,QAAQA,SAAQ,GAAG,KAAKA,QAAO,KAAK,GAAG;AAAA,UAC1C;AAAA,QACF;AACA,eAAOA;AAAA,MACT;AAGA,UAAI,cAAc,CAAC,eAAe,kBAAkB,iBAAiB,wBAAwB,kBAAkB,YAAY,SAAS;AACpI,UAAI,eAAe,YAAY,OAAO,UAAU,WAAW;AAI3D,UAAI,MAAM,OAAO,uBAAuB,SAAS,oBAAoB,GAAG;AACtE,eAAO,mBAAmB,GAAG,YAAY;AAAA,MAC3C;AACA,UAAI,4BAA4B;AAAA,QAC9B,GAAG;AAAA,MACL;AACA,UAAI,MAAM,OAAO;AACjB,UAAI,8BAA8B;AAAA,QAChC,GAAG;AAAA,MACL;AAGA,UAAI,UAAU,WAAW,WAAW,SAAS,KAAK,SAASC,SAAQ,IAAI;AACrE,YAAIC,QAAO,0BAA0B,EAAE,SAAS,EAAE,CAAC;AACnD,YAAI,wBAAwB,4BAA4B;AACxD,eAAO,wBAAwBA,MAAK,OAAO,sBAAsB,EAAE,CAAC,IAAIA;AAAA,MAC1E;AACA,UAAI,4BAA4B,SAAU,QAAQ,QAAQ;AACxD,YAAIA,QAAO,QAAQ,MAAM;AACzB,YAAIP,kBAAiB,qBAAqB;AAC1C,YAAID,4BAA2B,+BAA+B;AAC9D,iBAAS,IAAI,GAAG,IAAIQ,MAAK,QAAQ,KAAK;AACpC,cAAI,MAAMA,MAAK,CAAC;AAChB,cAAI,CAAC,IAAI,QAAQ,GAAG,GAAG;AACrB,YAAAP,gBAAe,QAAQ,KAAKD,0BAAyB,QAAQ,GAAG,CAAC;AAAA,UACnE;AAAA,QACF;AAAA,MACF;AACA,UAAI,cAAc;AAClB,UAAI,WAAW,SAAU,SAAS,WAAW;AAC3C,YAAI,QAAQ,KAAK,UAAU,OAAO,CAAC;AACnC,eAAO,SAAS,WAAW,OAAO,SAAS,SAAS,QAAQ,OAAO,aAAa,aAAa,MAAM,SAAS,IAAI,CAAC,CAAC;AAAA,MACpH;AACA,UAAI,YAAY,SAAS,YAAY,SAAU,QAAQ;AACrD,eAAO,OAAO,MAAM,EAAE,QAAQ,aAAa,GAAG,EAAE,YAAY;AAAA,MAC9D;AACA,UAAI,OAAO,SAAS,OAAO,CAAC;AAC5B,UAAI,SAAS,SAAS,SAAS;AAC/B,UAAI,WAAW,SAAS,WAAW;AACnC,UAAI,aAAa;AACjB,UAAI,6BAA6B,+BAA+B;AAgBhE,UAAI,UAAU,SAAU,SAAS,QAAQ;AACvC,YAAI,SAAS,QAAQ;AACrB,YAAI,SAAS,QAAQ;AACrB,YAAI,SAAS,QAAQ;AACrB,YAAI,QAAQ,QAAQ,KAAK,gBAAgB,gBAAgB;AACzD,YAAI,QAAQ;AACV,mBAAS;AAAA,QACX,WAAW,QAAQ;AACjB,mBAAS,SAAS,MAAM,KAAK,UAAU,QAAQ,CAAC,CAAC;AAAA,QACnD,OAAO;AACL,oBAAU,SAAS,MAAM,KAAK,CAAC,GAAG;AAAA,QACpC;AACA,YAAI,QAAQ;AACV,eAAK,OAAO,QAAQ;AAClB,6BAAiB,OAAO,GAAG;AAC3B,gBAAI,QAAQ,aAAa;AACvB,2BAAa,2BAA2B,QAAQ,GAAG;AACnD,+BAAiB,cAAc,WAAW;AAAA,YAC5C,OAAO;AACL,+BAAiB,OAAO,GAAG;AAAA,YAC7B;AACA,qBAAS,WAAW,SAAS,MAAM,UAAU,SAAS,MAAM,OAAO,KAAK,QAAQ,MAAM;AAEtF,gBAAI,CAAC,UAAU,mBAAmB,QAAW;AAC3C,kBAAI,OAAO,mBAAmB,OAAO,gBAAgB;AACnD;AAAA,cACF;AACA,wCAA0B,gBAAgB,cAAc;AAAA,YAC1D;AAEA,gBAAI,QAAQ,QAAQ,kBAAkB,eAAe,MAAM;AACzD,0CAA4B,gBAAgB,QAAQ,IAAI;AAAA,YAC1D;AAEA,qBAAS,QAAQ,KAAK,gBAAgB,OAAO;AAAA,UAC/C;AAAA,QACF;AAAA,MACF;AACA,UAAI,eAAe,CAAC,CAAC,OAAO,yBAAyB,CAAC,MAAM,WAAY;AAGtE,eAAO,CAAC,OAAO,OAAO,CAAC;AAAA,MACzB,CAAC;AACD,UAAI,iBAAiB,gBAElB,CAAC,OAAO,QAER,OAAO,OAAO,YAAY;AAC7B,UAAI,wBAAwB,OAAO,KAAK;AACxC,UAAI,WAAW,SAAS;AACxB,UAAI,wBAAwB,iBAAiB,WAAW,YAAY,SAAS,iBAAiB;AAC9F,UAAI,kBAAkB,SAAU,MAAM;AACpC,YAAI,CAAC,IAAI,uBAAuB,IAAI,GAAG;AACrC,cAAI,gBAAgB,IAAI,UAAU,IAAI,GAAG;AACvC,kCAAsB,IAAI,IAAI,SAAS,IAAI;AAAA,UAC7C,OAAO;AACL,kCAAsB,IAAI,IAAI,sBAAsB,YAAY,IAAI;AAAA,UACtE;AAAA,QACF;AACA,eAAO,sBAAsB,IAAI;AAAA,MACnC;AAIA,UAAI,aAAa,OAAO,QAAQ,SAASQ,MAAK,GAAG;AAC/C,eAAO,mBAAmB,GAAG,WAAW;AAAA,MAC1C;AAIA,UAAI,yBAAyB,cAAc,OAAO,mBAAmB,SAAS,iBAAiB,GAAG,YAAY;AAC5G,iBAAS,CAAC;AACV,YAAIA,QAAO,WAAW,UAAU;AAChC,YAAIH,UAASG,MAAK;AAClB,YAAIJ,SAAQ;AACZ,YAAI;AACJ,eAAOC,UAASD,QAAO;AACrB,+BAAqB,EAAE,GAAG,MAAMI,MAAKJ,QAAO,GAAG,WAAW,GAAG,CAAC;AAAA,QAChE;AACA,eAAO;AAAA,MACT;AACA,UAAI,OAAO,WAAW,YAAY,iBAAiB;AACnD,UAAI,KAAK;AACT,UAAI,KAAK;AACT,UAAI,YAAY;AAChB,UAAI,SAAS;AACb,UAAI,WAAW,UAAU,UAAU;AACnC,UAAI,mBAAmB,WAAY;AAAA,MAAY;AAC/C,UAAI,YAAY,SAAU,SAAS;AACjC,eAAO,KAAK,SAAS,KAAK,UAAU,KAAK,MAAM,SAAS;AAAA,MAC1D;AAGA,UAAI,4BAA4B,SAAUK,kBAAiB;AACzD,QAAAA,iBAAgB,MAAM,UAAU,EAAE,CAAC;AACnC,QAAAA,iBAAgB,MAAM;AACtB,YAAI,OAAOA,iBAAgB,aAAa;AACxC,QAAAA,mBAAkB;AAClB,eAAO;AAAA,MACT;AAGA,UAAI,2BAA2B,WAAY;AAEzC,YAAI,SAAS,sBAAsB,QAAQ;AAC3C,YAAI,KAAK,SAAS,SAAS;AAC3B,YAAI;AACJ,eAAO,MAAM,UAAU;AACvB,aAAK,YAAY,MAAM;AAEvB,eAAO,MAAM,OAAO,EAAE;AACtB,yBAAiB,OAAO,cAAc;AACtC,uBAAe,KAAK;AACpB,uBAAe,MAAM,UAAU,mBAAmB,CAAC;AACnD,uBAAe,MAAM;AACrB,eAAO,eAAe;AAAA,MACxB;AAOA,UAAI;AACJ,UAAI,kBAAkB,WAAY;AAChC,YAAI;AAEF,4BAAkB,SAAS,UAAU,IAAI,cAAc,UAAU;AAAA,QACnE,SAAS,OAAO;AAAA,QAAa;AAC7B,0BAAkB,kBAAkB,0BAA0B,eAAe,IAAI,yBAAyB;AAC1G,YAAIJ,UAAS,YAAY;AACzB,eAAOA,WAAU;AACf,iBAAO,gBAAgB,SAAS,EAAE,YAAYA,OAAM,CAAC;AAAA,QACvD;AACA,eAAO,gBAAgB;AAAA,MACzB;AACA,iBAAW,QAAQ,IAAI;AAIvB,UAAI,eAAe,OAAO,UAAU,SAAS,OAAO,GAAG,YAAY;AACjE,YAAIC;AACJ,YAAI,MAAM,MAAM;AACd,2BAAiB,SAAS,IAAI,SAAS,CAAC;AACxC,UAAAA,UAAS,IAAI,iBAAiB;AAC9B,2BAAiB,SAAS,IAAI;AAE9B,UAAAA,QAAO,QAAQ,IAAI;AAAA,QACrB,OAAO;AACL,UAAAA,UAAS,gBAAgB;AAAA,QAC3B;AACA,eAAO,eAAe,SAAYA,UAAS,uBAAuBA,SAAQ,UAAU;AAAA,MACtF;AACA,UAAI,cAAc,gBAAgB,aAAa;AAC/C,UAAI,iBAAiB,MAAM;AAI3B,UAAI,eAAe,WAAW,KAAK,QAAW;AAC5C,6BAAqB,EAAE,gBAAgB,aAAa;AAAA,UAClD,cAAc;AAAA,UACd,OAAO,aAAa,IAAI;AAAA,QAC1B,CAAC;AAAA,MACH;AAGA,UAAI,mBAAmB,SAAU,KAAK;AACpC,uBAAe,WAAW,EAAE,GAAG,IAAI;AAAA,MACrC;AACA,UAAI,iBAAiB,OAAO;AAC5B,UAAI,QAAQ,CAAC;AACb,UAAI,UAAU,SAAU,IAAI;AAC1B,cAAM;AAAA,MACR;AACA,UAAI,0BAA0B,SAAU,aAAa,SAAS;AAC5D,YAAI,IAAI,OAAO,WAAW,GAAG;AAC3B,iBAAO,MAAM,WAAW;AAAA,QAC1B;AACA,YAAI,CAAC,SAAS;AACZ,oBAAU,CAAC;AAAA,QACb;AACA,YAAI,SAAS,CAAC,EAAE,WAAW;AAC3B,YAAI,YAAY,IAAI,SAAS,WAAW,IAAI,QAAQ,YAAY;AAChE,YAAI,YAAY,IAAI,SAAS,CAAC,IAAI,QAAQ,CAAC,IAAI;AAC/C,YAAI,YAAY,IAAI,SAAS,CAAC,IAAI,QAAQ,CAAC,IAAI;AAC/C,eAAO,MAAM,WAAW,IAAI,CAAC,CAAC,UAAU,CAAC,MAAM,WAAY;AACzD,cAAI,aAAa,CAAC,aAAa;AAC7B,mBAAO;AAAA,UACT;AACA,cAAI,IAAI;AAAA,YACN,QAAQ;AAAA,UACV;AACA,cAAI,WAAW;AACb,2BAAe,GAAG,GAAG;AAAA,cACnB,YAAY;AAAA,cACZ,KAAK;AAAA,YACP,CAAC;AAAA,UACH,OAAO;AACL,cAAE,CAAC,IAAI;AAAA,UACT;AACA,iBAAO,KAAK,GAAG,WAAW,SAAS;AAAA,QACrC,CAAC;AAAA,MACH;AACA;AACA,UAAI,YAAY,cAAc;AAC9B,UAAI,iBAAiB,wBAAwB,WAAW;AAAA,QACtD,WAAW;AAAA,QACX,GAAG;AAAA,MACL,CAAC;AAID,cAAQ;AAAA,QACN,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ,CAAC;AAAA,MACX,GAAG;AAAA,QACD,UAAU,SAASI,UAAS,IAA0B;AACpD,iBAAO,UAAU,MAAM,IAAI,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,MAAS;AAAA,QAC5E;AAAA,MACF,CAAC;AAGD,uBAAiB,UAAU;AAC3B,UAAI,oBAAoB,CAAC;AACzB,UAAI,cAAc,SAAU,IAAI;AAC9B,YAAI,OAAO,MAAM,YAAY;AAC3B,gBAAM,UAAU,OAAO,EAAE,IAAI,oBAAoB;AAAA,QACnD;AACA,eAAO;AAAA,MACT;AAGA,UAAI,sBAAsB,SAAUd,KAAI,MAAMS,SAAQ;AACpD,oBAAYT,GAAE;AACd,YAAI,SAAS,QAAW;AACtB,iBAAOA;AAAA,QACT;AACA,gBAAQS,SAAQ;AAAA,UACd,KAAK;AACH,mBAAO,WAAY;AACjB,qBAAOT,IAAG,KAAK,IAAI;AAAA,YACrB;AAAA,UACF,KAAK;AACH,mBAAO,SAAU,GAAG;AAClB,qBAAOA,IAAG,KAAK,MAAM,CAAC;AAAA,YACxB;AAAA,UACF,KAAK;AACH,mBAAO,SAAU,GAAG,GAAG;AACrB,qBAAOA,IAAG,KAAK,MAAM,GAAG,CAAC;AAAA,YAC3B;AAAA,UACF,KAAK;AACH,mBAAO,SAAU,GAAG,GAAG,GAAG;AACxB,qBAAOA,IAAG,KAAK,MAAM,GAAG,GAAG,CAAC;AAAA,YAC9B;AAAA,QACJ;AACA,eAAO,WACJ;AACD,iBAAOA,IAAG,MAAM,MAAM,SAAS;AAAA,QACjC;AAAA,MACF;AACA,UAAI,OAAO,SAAS;AACpB,UAAI,cAAc,SAAU,aAAa,QAAQS,SAAQ;AACvD,eAAO,oBAAoB,MAAM,SAAS,WAAW,EAAE,UAAU,MAAM,GAAGA,OAAM;AAAA,MAClF;AACA,UAAI,WAAW,YAAY,SAAS,UAAU;AAC9C,UAAI,aAAa;AAIjB,UAAI,WAAW,SAAU,UAAU;AACjC,eAAO,OAAO,uBAAuB,QAAQ,CAAC;AAAA,MAChD;AAIA,UAAI,UAAU,MAAM,WAAW,SAASM,SAAQ,KAAK;AACnD,eAAO,WAAW,GAAG,KAAK;AAAA,MAC5B;AACA,UAAI,UAAU,gBAAgB,SAAS;AAIvC,UAAI,qBAAqB,SAAU,eAAeN,SAAQ;AACxD,YAAI;AACJ,YAAI,QAAQ,aAAa,GAAG;AAC1B,cAAI,cAAc;AAElB,cAAI,OAAO,KAAK,eAAe,MAAM,SAAS,QAAQ,EAAE,SAAS,IAAI;AACnE,gBAAI;AAAA,UACN,WAAW,SAAS,CAAC,GAAG;AACtB,gBAAI,EAAE,OAAO;AACb,gBAAI,MAAM,MAAM;AACd,kBAAI;AAAA,YACN;AAAA,UACF;AAAA,QACF;AACA,eAAO,KAAK,MAAM,SAAY,QAAQ,GAAGA,YAAW,IAAI,IAAIA,OAAM;AAAA,MACpE;AACA,UAAI,OAAO,CAAC,EAAE;AAGd,UAAI,iBAAiB,SAAU,MAAM;AACnC,YAAI,SAAS,QAAQ;AACrB,YAAI,YAAY,QAAQ;AACxB,YAAI,UAAU,QAAQ;AACtB,YAAI,WAAW,QAAQ;AACvB,YAAI,gBAAgB,QAAQ;AAC5B,YAAI,gBAAgB,QAAQ;AAC5B,YAAI,WAAW,QAAQ,KAAK;AAC5B,eAAO,SAAU,OAAO,YAAY,MAAM,gBAAgB;AACxD,cAAI,IAAI,SAAS,KAAK;AACtB,cAAIO,QAAO,cAAc,CAAC;AAC1B,cAAI,gBAAgB,oBAAoB,YAAY,MAAM,CAAC;AAC3D,cAAIP,UAAS,SAASO,MAAK,MAAM;AACjC,cAAIR,SAAQ;AACZ,cAAI,SAAS,kBAAkB;AAC/B,cAAI,SAAS,SAAS,OAAO,OAAOC,OAAM,IAAI,aAAa,gBAAgB,OAAO,OAAO,CAAC,IAAI;AAC9F,cAAI,OAAOC;AACX,iBAAOD,UAASD,QAAOA,UAAS;AAC9B,gBAAI,YAAYA,UAASQ,OAAM;AAC7B,sBAAQA,MAAKR,MAAK;AAClB,cAAAE,UAAS,cAAc,OAAOF,QAAO,CAAC;AACtC,kBAAI,MAAM;AACR,oBAAI,QAAQ;AACV,yBAAOA,MAAK,IAAIE;AAAA,gBAClB,WACSA,SAAQ;AACf,0BAAQ,MAAM;AAAA,oBACZ,KAAK;AACH,6BAAO;AAAA;AAAA,oBAET,KAAK;AACH,6BAAO;AAAA;AAAA,oBAET,KAAK;AACH,6BAAOF;AAAA;AAAA,oBAET,KAAK;AACH,2BAAK,KAAK,QAAQ,KAAK;AAAA,kBAE3B;AAAA,gBACF,OAAO;AACL,0BAAQ,MAAM;AAAA,oBACZ,KAAK;AACH,6BAAO;AAAA;AAAA,oBAET,KAAK;AACH,2BAAK,KAAK,QAAQ,KAAK;AAAA,kBAE3B;AAAA,gBACF;AAAA,cACF;AAAA,YACF;AAAA,UACF;AACA,iBAAO,gBAAgB,KAAK,WAAW,WAAW,WAAW;AAAA,QAC/D;AAAA,MACF;AACA,UAAI,iBAAiB;AAAA;AAAA;AAAA,QAGnB,SAAS,eAAe,CAAC;AAAA;AAAA;AAAA,QAGzB,KAAK,eAAe,CAAC;AAAA;AAAA;AAAA,QAGrB,QAAQ,eAAe,CAAC;AAAA;AAAA;AAAA,QAGxB,MAAM,eAAe,CAAC;AAAA;AAAA;AAAA,QAGtB,OAAO,eAAe,CAAC;AAAA;AAAA;AAAA,QAGvB,MAAM,eAAe,CAAC;AAAA;AAAA;AAAA,QAGtB,WAAW,eAAe,CAAC;AAAA;AAAA;AAAA,QAG3B,WAAW,eAAe,CAAC;AAAA,MAC7B;AACA,UAAI,mBAAmB,eAAe;AACtC,UAAI,mBAAmB,eAAe;AACtC,UAAI,mBAAmB,eAAe;AACtC,UAAI,mBAAmB,eAAe;AACtC,UAAI,mBAAmB,eAAe;AACtC,UAAI,mBAAmB,eAAe;AACtC,UAAI,mBAAmB,eAAe;AACtC,UAAI,mBAAmB,eAAe;AACtC;AACA,UAAI,QAAQ,eAAe;AAC3B,UAAI,OAAO;AACX,UAAI,cAAc;AAClB,UAAI,mBAAmB,wBAAwB,IAAI;AAGnD,UAAI,QAAQ,CAAC,GAAG;AACd,cAAM,CAAC,EAAE,IAAI,EAAE,WAAY;AACzB,wBAAc;AAAA,QAChB,CAAC;AAAA,MACH;AAIA,cAAQ;AAAA,QACN,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ,eAAe,CAAC;AAAA,MAC1B,GAAG;AAAA,QACD,MAAM,SAASS,MAAK,YAAqC;AACvD,iBAAO,MAAM,MAAM,YAAY,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,MAAS;AAAA,QAChF;AAAA,MACF,CAAC;AAGD,uBAAiB,IAAI;AACrB,UAAI,gBAAgB,CAAC;AACrB,UAAI,OAAO,YAAY,SAAS,MAAM;AACtC,UAAI,SAAS;AAGb,UAAI,iBAAiB,SAAU,mBAAmB;AAChD,eAAO,SAAU,OAAO,KAAK;AAC3B,cAAI,IAAI,OAAO,uBAAuB,KAAK,CAAC;AAC5C,cAAI,WAAW,UAAU,GAAG;AAC5B,cAAI,OAAO,EAAE;AACb,cAAI,OAAO;AACX,cAAI,WAAW,KAAK,YAAY,MAAM;AACpC,mBAAO,oBAAoB,KAAK;AAAA,UAClC;AACA,kBAAQ,EAAE,WAAW,QAAQ;AAC7B,iBAAO,QAAQ,SAAU,QAAQ,SAAU,WAAW,MAAM,SAAS,SAAS,EAAE,WAAW,WAAW,CAAC,KAAK,SAAU,SAAS,QAAS,oBAAoB,EAAE,OAAO,QAAQ,IAAI,QAAQ,oBAAoB,EAAE,MAAM,UAAU,WAAW,CAAC,KAAK,QAAQ,SAAU,OAAO,SAAS,SAAU;AAAA,QAC9R;AAAA,MACF;AACA,UAAI,kBAAkB;AAAA;AAAA;AAAA,QAGpB,QAAQ,eAAe,KAAK;AAAA;AAAA;AAAA,QAG5B,QAAQ,eAAe,IAAI;AAAA,MAC7B;AACA,UAAI,oBAAoB,gBAAgB;AACxC,UAAI,oBAAoB,gBAAgB;AACxC,UAAI,yBAAyB,CAAC,MAAM,WAAY;AAC9C,iBAAS,IAAI;AAAA,QAAY;AACzB,UAAE,UAAU,cAAc;AAC1B,eAAO,OAAO,eAAe,IAAI,EAAE,CAAC,MAAM,EAAE;AAAA,MAC9C,CAAC;AACD,UAAI,aAAa,UAAU,UAAU;AACrC,UAAI,kBAAkB,OAAO;AAI7B,UAAI,uBAAuB,yBAAyB,OAAO,iBAAiB,SAAU,GAAG;AACvF,YAAI,SAAS,CAAC;AACd,YAAI,IAAI,GAAG,UAAU,GAAG;AACtB,iBAAO,EAAE,UAAU;AAAA,QACrB;AACA,YAAI,OAAO,EAAE,eAAe,cAAc,aAAa,EAAE,aAAa;AACpE,iBAAO,EAAE,YAAY;AAAA,QACvB;AACA,eAAO,aAAa,SAAS,kBAAkB;AAAA,MACjD;AACA;AACA,UAAI,WAAW,gBAAgB,UAAU;AACzC,UAAI,yBAAyB;AAC7B,UAAI,aAAa,WAAY;AAC3B,eAAO;AAAA,MACT;AAIA,UAAI,mBAAmB,mCAAmC;AAC1D,UAAI,CAAC,EAAE,MAAM;AACX,wBAAgB,CAAC,EAAE,KAAK;AAExB,YAAI,EAAE,UAAU,gBAAgB;AAC9B,mCAAyB;AAAA,QAC3B,OAAO;AACL,8CAAoC,qBAAqB,qBAAqB,aAAa,CAAC;AAC5F,cAAI,sCAAsC,OAAO,WAAW;AAC1D,gCAAoB;AAAA,UACtB;AAAA,QACF;AAAA,MACF;AACA,UAAI,yBAAyB,qBAAqB,UAAa,MAAM,WAAY;AAC/E,YAAIC,QAAO,CAAC;AAEZ,eAAO,kBAAkB,QAAQ,EAAE,KAAKA,KAAI,MAAMA;AAAA,MACpD,CAAC;AACD,UAAI,wBAAwB;AAC1B,4BAAoB,CAAC;AAAA,MACvB;AAGA,WAAK,CAAC,UAAU,2BAA2B,CAAC,IAAI,mBAAmB,QAAQ,GAAG;AAC5E,oCAA4B,mBAAmB,UAAU,UAAU;AAAA,MACrE;AACA,UAAI,gBAAgB;AAAA,QAClB;AAAA,QACA;AAAA,MACF;AACA,UAAI,kBAAkB,cAAc;AACpC,UAAI,kBAAkB,cAAc;AACpC,UAAI,mBAAmB,qBAAqB;AAC5C,UAAI,gBAAgB,gBAAgB,aAAa;AACjD,UAAI,iBAAiB,SAAU,IAAI,KAAK,QAAQ;AAC9C,YAAI,MAAM,CAAC,IAAI,KAAK,SAAS,KAAK,GAAG,WAAW,aAAa,GAAG;AAC9D,2BAAiB,IAAI,eAAe;AAAA,YAClC,cAAc;AAAA,YACd,OAAO;AAAA,UACT,CAAC;AAAA,QACH;AAAA,MACF;AACA,UAAI,YAAY,CAAC;AACjB;AACA,UAAI,sBAAsB,cAAc;AACxC,UAAI,eAAe,WAAY;AAC7B,eAAO;AAAA,MACT;AACA,UAAI,4BAA4B,SAAU,qBAAqB,MAAM,MAAM;AACzE,YAAIC,iBAAgB,OAAO;AAC3B,4BAAoB,YAAY,aAAa,qBAAqB;AAAA,UAChE,MAAM,yBAAyB,GAAG,IAAI;AAAA,QACxC,CAAC;AACD,uBAAe,qBAAqBA,gBAAe,OAAO,IAAI;AAC9D,kBAAUA,cAAa,IAAI;AAC3B,eAAO;AAAA,MACT;AACA,UAAI,qBAAqB,SAAU,IAAI;AACrC,YAAI,CAAC,SAAS,EAAE,KAAK,OAAO,MAAM;AAChC,gBAAM,UAAU,eAAe,OAAO,EAAE,IAAI,iBAAiB;AAAA,QAC/D;AACA,eAAO;AAAA,MACT;AAMA,UAAI,uBAAuB,OAAO,mBAAmB,eAAe,CAAC,IAAI,WAAY;AACnF,YAAI,iBAAiB;AACrB,YAAID,QAAO,CAAC;AACZ,YAAI;AACJ,YAAI;AACF,mBAAS,OAAO,yBAAyB,OAAO,WAAW,WAAW,EAAE;AACxE,iBAAO,KAAKA,OAAM,CAAC,CAAC;AACpB,2BAAiBA,iBAAgB;AAAA,QACnC,SAAS,OAAO;AAAA,QAAY;AAC5B,eAAO,SAAS,eAAe,GAAG,OAAO;AACvC,mBAAS,CAAC;AACV,6BAAmB,KAAK;AACxB,cAAI,gBAAgB;AAClB,mBAAO,KAAK,GAAG,KAAK;AAAA,UACtB,OAAO;AACL,cAAE,YAAY;AAAA,UAChB;AACA,iBAAO;AAAA,QACT;AAAA,MACF,EAAE,IAAI;AACN;AACA,UAAI,sBAAsB,cAAc;AACxC,UAAI,2BAA2B,cAAc;AAC7C,UAAI,aAAa,gBAAgB,UAAU;AAC3C,UAAI,OAAO;AACX,UAAI,SAAS;AACb,UAAI,UAAU;AACd,UAAI,eAAe,WAAY;AAC7B,eAAO;AAAA,MACT;AACA,UAAI,iBAAiB,SAAU,UAAU,MAAM,qBAAqB,MAAM,SAAS,QAAQ,QAAQ;AACjG,kCAA0B,qBAAqB,MAAM,IAAI;AACzD,YAAI,qBAAqB,SAAU,MAAM;AACvC,cAAI,SAAS,WAAW,iBAAiB;AACvC,mBAAO;AAAA,UACT;AACA,cAAI,CAAC,4BAA4B,QAAQ,mBAAmB;AAC1D,mBAAO,kBAAkB,IAAI;AAAA,UAC/B;AACA,kBAAQ,MAAM;AAAA,YACZ,KAAK;AACH,qBAAO,SAASN,QAAO;AACrB,uBAAO,IAAI,oBAAoB,MAAM,IAAI;AAAA,cAC3C;AAAA,YACF,KAAK;AACH,qBAAO,SAASQ,UAAS;AACvB,uBAAO,IAAI,oBAAoB,MAAM,IAAI;AAAA,cAC3C;AAAA,YACF,KAAK;AACH,qBAAO,SAAS,UAAU;AACxB,uBAAO,IAAI,oBAAoB,MAAM,IAAI;AAAA,cAC3C;AAAA,UACJ;AACA,iBAAO,WAAY;AACjB,mBAAO,IAAI,oBAAoB,IAAI;AAAA,UACrC;AAAA,QACF;AACA,YAAID,iBAAgB,OAAO;AAC3B,YAAI,wBAAwB;AAC5B,YAAI,oBAAoB,SAAS;AACjC,YAAI,iBAAiB,kBAAkB,UAAU,KAAK,kBAAkB,YAAY,KAAK,WAAW,kBAAkB,OAAO;AAC7H,YAAI,kBAAkB,CAAC,4BAA4B,kBAAkB,mBAAmB,OAAO;AAC/F,YAAI,oBAAoB,QAAQ,UAAU,kBAAkB,WAAW,iBAAiB;AACxF,YAAI,0BAA0B,SAAS;AAGvC,YAAI,mBAAmB;AACrB,qCAA2B,qBAAqB,kBAAkB,KAAK,IAAI,SAAS,CAAC,CAAC;AACtF,cAAI,wBAAwB,OAAO,aAAa,yBAAyB,MAAM;AAC7E,gBAAI,CAAC,UAAU,qBAAqB,wBAAwB,MAAM,qBAAqB;AACrF,kBAAI,sBAAsB;AACxB,qCAAqB,0BAA0B,mBAAmB;AAAA,cACpE,WAAW,OAAO,yBAAyB,UAAU,KAAK,YAAY;AACpE,4CAA4B,0BAA0B,YAAY,YAAY;AAAA,cAChF;AAAA,YACF;AAEA,2BAAe,0BAA0BA,gBAAe,MAAM,IAAI;AAClE,gBAAI,QAAQ;AACV,wBAAUA,cAAa,IAAI;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAGA,YAAI,WAAW,UAAU,kBAAkB,eAAe,SAAS,QAAQ;AACzE,kCAAwB;AACxB,4BAAkB,SAASC,UAAS;AAClC,mBAAO,eAAe,KAAK,IAAI;AAAA,UACjC;AAAA,QACF;AAGA,aAAK,CAAC,UAAU,WAAW,kBAAkB,UAAU,MAAM,iBAAiB;AAC5E,sCAA4B,mBAAmB,YAAY,eAAe;AAAA,QAC5E;AACA,kBAAU,IAAI,IAAI;AAGlB,YAAI,SAAS;AACX,oBAAU;AAAA,YACR,QAAQ,mBAAmB,MAAM;AAAA,YACjC,MAAM,SAAS,kBAAkB,mBAAmB,IAAI;AAAA,YACxD,SAAS,mBAAmB,OAAO;AAAA,UACrC;AACA,cAAI,QAAQ;AACV,iBAAK,OAAO,SAAS;AACnB,kBAAI,4BAA4B,yBAAyB,EAAE,OAAO,oBAAoB;AACpF,yBAAS,mBAAmB,KAAK,QAAQ,GAAG,CAAC;AAAA,cAC/C;AAAA,YACF;AAAA,UACF,OAAO;AACL,oBAAQ;AAAA,cACN,QAAQ;AAAA,cACR,OAAO;AAAA,cACP,QAAQ,4BAA4B;AAAA,YACtC,GAAG,OAAO;AAAA,UACZ;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA;AACA,UAAI,SAAS,gBAAgB;AAC7B,UAAI,kBAAkB;AACtB,UAAI,mBAAmB,cAAc;AACrC,UAAI,mBAAmB,cAAc,UAAU,eAAe;AAI9D,qBAAe,QAAQ,UAAU,SAAU,UAAU;AACnD,yBAAiB,MAAM;AAAA,UACrB,MAAM;AAAA,UACN,QAAQ,OAAO,QAAQ;AAAA,UACvB,OAAO;AAAA,QACT,CAAC;AAAA,MAGH,GAAG,SAAS,OAAO;AACjB,YAAI,QAAQ,iBAAiB,IAAI;AACjC,YAAI,SAAS,MAAM;AACnB,YAAIZ,SAAQ,MAAM;AAClB,YAAIa;AACJ,YAAIb,UAAS,OAAO,QAAQ;AAC1B,iBAAO;AAAA,YACL,OAAO;AAAA,YACP,MAAM;AAAA,UACR;AAAA,QACF;AACA,QAAAa,SAAQ,OAAO,QAAQb,MAAK;AAC5B,cAAM,SAASa,OAAM;AACrB,eAAO;AAAA,UACL,OAAOA;AAAA,UACP,MAAM;AAAA,QACR;AAAA,MACF,CAAC;AACD,UAAI,qBAAqB,CAAC;AAC1B,UAAI,gBAAgB,SAAU,UAAU;AACtC,YAAI,eAAe,SAAS,QAAQ;AACpC,YAAI,iBAAiB,QAAW;AAC9B,iBAAO,SAAS,aAAa,KAAK,QAAQ,CAAC,EAAE;AAAA,QAC/C;AAAA,MACF;AAGA,UAAI,+BAA+B,SAAU,UAAUrB,KAAI,OAAOsB,UAAS;AACzE,YAAI;AACF,iBAAOA,WAAUtB,IAAG,SAAS,KAAK,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,IAAIA,IAAG,KAAK;AAAA,QAE9D,SAAS,OAAO;AACd,wBAAc,QAAQ;AACtB,gBAAM;AAAA,QACR;AAAA,MACF;AACA,UAAI,aAAa,gBAAgB,UAAU;AAC3C,UAAI,mBAAmB,MAAM;AAG7B,UAAI,wBAAwB,SAAU,IAAI;AACxC,eAAO,OAAO,WAAc,UAAU,UAAU,MAAM,iBAAiB,UAAU,MAAM;AAAA,MACzF;AACA;AACA,UAAI,iBAAiB,SAAU,QAAQ,KAAK,OAAO;AACjD,YAAI,cAAc,YAAY,GAAG;AACjC,YAAI,eAAe,QAAQ;AACzB,+BAAqB,EAAE,QAAQ,aAAa,yBAAyB,GAAG,KAAK,CAAC;AAAA,QAChF,OAAO;AACL,iBAAO,WAAW,IAAI;AAAA,QACxB;AAAA,MACF;AACA,UAAI,kBAAkB,gBAAgB,aAAa;AACnD,UAAI,OAAO,CAAC;AACZ,WAAK,eAAe,IAAI;AACxB,UAAI,qBAAqB,OAAO,IAAI,MAAM;AAC1C,UAAI,kBAAkB,gBAAgB,aAAa;AAEnD,UAAI,oBAAoB,WAAW,2BAAY;AAC7C,eAAO;AAAA,MACT,EAAE,CAAC,KAAK;AAGR,UAAI,SAAS,SAAU,IAAI,KAAK;AAC9B,YAAI;AACF,iBAAO,GAAG,GAAG;AAAA,QACf,SAAS,OAAO;AAAA,QAAY;AAAA,MAC9B;AAGA,UAAI,UAAU,qBAAqB,aAAa,SAAU,IAAI;AAC5D,YAAI,GAAG,KAAKU;AACZ,eAAO,OAAO,SAAY,cAAc,OAAO,OAAO,SAEpD,QAAQ,MAAM,OAAO,IAAI,OAAO,EAAE,GAAG,eAAe,MAAM,WAAW,MAErE,oBAAoB,WAAW,CAAC,KAE/BA,UAAS,WAAW,CAAC,MAAM,YAAY,OAAO,EAAE,UAAU,aAAa,cAAcA;AAAA,MAC1F;AACA,UAAI,aAAa,gBAAgB,UAAU;AAC3C,UAAI,oBAAoB,SAAU,IAAI;AACpC,YAAI,MAAM,QAAW;AACnB,iBAAO,GAAG,UAAU,KAAK,GAAG,YAAY,KAAK,UAAU,QAAQ,EAAE,CAAC;AAAA,QACpE;AAAA,MACF;AACA;AAIA,UAAI,YAAY,SAAS,KAAK,WAA0D;AACtF,YAAI,IAAI,SAAS,SAAS;AAC1B,YAAI,IAAI,OAAO,QAAQ,aAAa,OAAO;AAC3C,YAAI,kBAAkB,UAAU;AAChC,YAAI,QAAQ,kBAAkB,IAAI,UAAU,CAAC,IAAI;AACjD,YAAI,UAAU,UAAU;AACxB,YAAI,iBAAiB,kBAAkB,CAAC;AACxC,YAAIF,SAAQ;AACZ,YAAIC,SAAQC,SAAQ,MAAM,UAAU,MAAM;AAC1C,YAAI,SAAS;AACX,kBAAQ,oBAAoB,OAAO,kBAAkB,IAAI,UAAU,CAAC,IAAI,QAAW,CAAC;AAAA,QACtF;AAEA,YAAI,kBAAkB,UAAa,EAAE,KAAK,SAAS,sBAAsB,cAAc,IAAI;AACzF,qBAAW,eAAe,KAAK,CAAC;AAChC,iBAAO,SAAS;AAChB,UAAAA,UAAS,IAAI,EAAE;AACf,iBAAO,EAAE,OAAO,KAAK,KAAK,QAAQ,GAAG,MAAMF,UAAS;AAClD,oBAAQ,UAAU,6BAA6B,UAAU,OAAO,CAAC,KAAK,OAAOA,MAAK,GAAG,IAAI,IAAI,KAAK;AAClG,2BAAeE,SAAQF,QAAO,KAAK;AAAA,UACrC;AAAA,QACF,OAAO;AACL,UAAAC,UAAS,SAAS,EAAE,MAAM;AAC1B,UAAAC,UAAS,IAAI,EAAED,OAAM;AACrB,iBAAOA,UAASD,QAAOA,UAAS;AAC9B,oBAAQ,UAAU,MAAM,EAAEA,MAAK,GAAGA,MAAK,IAAI,EAAEA,MAAK;AAClD,2BAAeE,SAAQF,QAAO,KAAK;AAAA,UACrC;AAAA,QACF;AACA,QAAAE,QAAO,SAASF;AAChB,eAAOE;AAAA,MACT;AACA,UAAI,aAAa,gBAAgB,UAAU;AAC3C,UAAI,eAAe;AACnB,UAAI;AACF,YAAI,SAAS;AACb,YAAI,qBAAqB;AAAA,UACvB,MAAM,WAAY;AAChB,mBAAO;AAAA,cACL,MAAM,CAAC,CAAC;AAAA,YACV;AAAA,UACF;AAAA,UACA,UAAU,WAAY;AACpB,2BAAe;AAAA,UACjB;AAAA,QACF;AACA,2BAAmB,UAAU,IAAI,WAAY;AAC3C,iBAAO;AAAA,QACT;AAEA,cAAM,KAAK,oBAAoB,WAAY;AACzC,gBAAM;AAAA,QACR,CAAC;AAAA,MACH,SAAS,OAAO;AAAA,MAAY;AAC5B,UAAI,8BAA8B,SAAU,MAAM,cAAc;AAC9D,YAAI,CAAC,gBAAgB,CAAC,cAAc;AAClC,iBAAO;AAAA,QACT;AACA,YAAI,oBAAoB;AACxB,YAAI;AACF,cAAI,SAAS,CAAC;AACd,iBAAO,UAAU,IAAI,WAAY;AAC/B,mBAAO;AAAA,cACL,MAAM,WAAY;AAChB,uBAAO;AAAA,kBACL,MAAM,oBAAoB;AAAA,gBAC5B;AAAA,cACF;AAAA,YACF;AAAA,UACF;AACA,eAAK,MAAM;AAAA,QACb,SAAS,OAAO;AAAA,QAAY;AAC5B,eAAO;AAAA,MACT;AACA,UAAI,sBAAsB,CAAC,4BAA4B,SAAU,UAAU;AACzE,cAAM,KAAK,QAAQ;AAAA,MACrB,CAAC;AAID,cAAQ;AAAA,QACN,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,QAAQ;AAAA,MACV,GAAG;AAAA,QACD,MAAM;AAAA,MACR,CAAC;AACD,UAAI,gBAAgB,CAAC;AACrB,UAAI,SAAS,KAAK,MAAM;AACxB,UAAI,WAAW;AACf;AACA,UAAI,aAAa,eAAe;AAChC,UAAI,aAAa;AACjB,UAAI,gBAAgB;AACpB,UAAI,mBAAmB,wBAAwB,UAAU;AAGzD,UAAI,cAAc,CAAC,GAAG;AACpB,cAAM,CAAC,EAAE,UAAU,EAAE,WAAY;AAC/B,0BAAgB;AAAA,QAClB,CAAC;AAAA,MACH;AAIA,cAAQ;AAAA,QACN,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ,iBAAiB,CAAC;AAAA,MAC5B,GAAG;AAAA,QACD,WAAW,SAASa,WAAU,YAAqC;AACjE,iBAAO,WAAW,MAAM,YAAY,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,MAAS;AAAA,QACrF;AAAA,MACF,CAAC;AAGD,uBAAiB,UAAU;AAC3B,UAAI,qBAAqB,CAAC;AAC1B,UAAI,YAAY,YAAY,SAAS,WAAW;AAChD,UAAI,cAAc;AAClB,UAAI,SAAS,qBAAqB,SAAUtB,SAAQF,UAAS;AAC3D,SAAC,WAAY;AAMX,cAAI,SAAS,OAA0BA,WAAU;AACjD,cAAI,QAAQ;AACZ,mBAAS,sBAAsB,SAAS;AACtC,iBAAK,UAAU;AAAA,UACjB;AACA,gCAAsB,YAAY,IAAI,MAAM;AAC5C,gCAAsB,UAAU,OAAO;AAIvC,iBAAO,SAAS,OAAO,OAAO,SAAU,OAAO;AAC7C,gBAAI,MAAM,OAAO,KAAK;AACtB;AAAA,kBAEI,OAAO,UAAU,MAAM,GAAG,MAAM,OAAO,SAAS;AAAA;AAAA;AAAA;AAAA,cAIpD,IAAI,OAAO,MAAM,CAAC,MAAM,MAAM,KAAK,MAAM;AAAA;AAAA,cAEzC,UAAU,IAAI,OAAO,KAAK,SAAS,IAAI,MAAM,IAAI,CAAC;AAAA,cAAG;AACnD,yBAAW,IAAI,WAAW,OAAO,IAAI,CAAC;AACtC,kBAAI,WAAW,KAAM;AACnB,sBAAM,IAAI,sBAAsB,0FAA4F;AAAA,cAC9H;AACA,sBAAQ,SAAS,IAAI;AAAA,YACvB;AACA,mBAAO;AAAA,UACT;AAIA,iBAAO,SAAS,OAAO,OAAO,SAAU,OAAO;AAC7C,gBAAI,MAAM,OAAO,KAAK,EAAE,QAAQ,OAAO,EAAE;AACzC,gBAAI,IAAI,SAAS,KAAK,GAAG;AACvB,oBAAM,IAAI,sBAAsB,mEAAqE;AAAA,YACvG;AACA;AAAA,kBAEI,KAAK,GAAG,IAAI,QAAQ,MAAM,GAAG,SAAS;AAAA;AAAA;AAAA,cAG1C,SAAS,IAAI,OAAO,KAAK;AAAA;AAAA,cAEzB,CAAC,WAAW,KAAK,KAAK,IAAI,KAAK,KAAK,SAAS;AAAA;AAAA,cAG7C,OAAO,KAAK,UAAU,OAAO,aAAa,MAAM,OAAO,KAAK,KAAK,EAAE,IAAI;AAAA,cAAG;AAExE,uBAAS,MAAM,QAAQ,MAAM;AAAA,YAC/B;AACA,mBAAO;AAAA,UACT;AAAA,QACF,GAAG;AAAA,MACL,CAAC;AAID,cAAQ;AAAA,QACN,QAAQ;AAAA,QACR,MAAM;AAAA,MACR,GAAG;AAAA,QACD,OAAO,SAASyB,OAAM,QAAQ;AAE5B,iBAAO,UAAU;AAAA,QACnB;AAAA,MACF,CAAC;AACD,UAAI,kBAAkB,CAAC;AACvB,UAAI,QAAQ,KAAK,OAAO;AACxB,UAAI,UAAU;AACd,UAAI,iBAAiB,SAAS;AAI9B,UAAI,iBAAiB,OAAO,YAAY,SAASC,UAAS,IAAI;AAC5D,eAAO,OAAO,MAAM,YAAY,eAAe,EAAE;AAAA,MACnD;AAIA,cAAQ;AAAA,QACN,QAAQ;AAAA,QACR,MAAM;AAAA,MACR,GAAG;AAAA,QACD,UAAU;AAAA,MACZ,CAAC;AACD,UAAI,qBAAqB,CAAC;AAC1B,UAAI,YAAY,KAAK,OAAO;AAC5B,UAAI,cAAc;AAClB,UAAI,QAAQ,gBAAgB,OAAO;AAInC,UAAI,WAAW,SAAU,IAAI;AAC3B,YAAI;AACJ,eAAO,SAAS,EAAE,OAAO,WAAW,GAAG,KAAK,OAAO,SAAY,CAAC,CAAC,WAAW,WAAW,EAAE,KAAK;AAAA,MAChG;AACA,UAAI,aAAa,SAAU,IAAI;AAC7B,YAAI,SAAS,EAAE,GAAG;AAChB,gBAAM,UAAU,+CAA+C;AAAA,QACjE;AACA,eAAO;AAAA,MACT;AACA,UAAI,UAAU,gBAAgB,OAAO;AACrC,UAAI,uBAAuB,SAAU,aAAa;AAChD,YAAI,SAAS;AACb,YAAI;AACF,gBAAM,WAAW,EAAE,MAAM;AAAA,QAC3B,SAAS,QAAQ;AACf,cAAI;AACF,mBAAO,OAAO,IAAI;AAClB,mBAAO,MAAM,WAAW,EAAE,MAAM;AAAA,UAClC,SAAS,QAAQ;AAAA,UAAY;AAAA,QAC/B;AACA,eAAO;AAAA,MACT;AACA;AAIA,cAAQ;AAAA,QACN,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ,CAAC,qBAAqB,UAAU;AAAA,MAC1C,GAAG;AAAA,QACD,UAAU,SAASX,UAAS,cAAmC;AAC7D,iBAAO,CAAC,CAAC,CAAC,OAAO,uBAAuB,IAAI,CAAC,EAAE,QAAQ,WAAW,YAAY,GAAG,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,MAAS;AAAA,QAClI;AAAA,MACF,CAAC;AACD,UAAI,qBAAqB,CAAC;AAC1B,UAAI,aAAa,YAAY,UAAU,UAAU;AACjD,UAAI,aAAa;AACjB;AACA,UAAI,6BAA6B,+BAA+B;AAChE,UAAI,mBAAmB,GAAG;AAC1B,UAAI,QAAQ,KAAK;AACjB,UAAI,0BAA0B,qBAAqB,YAAY;AAE/D,UAAI,mBAAmB,CAAC,UAAU,CAAC,2BAA2B,CAAC,CAAC,WAAY;AAC1E,YAAI,aAAa,2BAA2B,OAAO,WAAW,YAAY;AAC1E,eAAO,cAAc,CAAC,WAAW;AAAA,MACnC,EAAE;AAIF,cAAQ;AAAA,QACN,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ,CAAC,oBAAoB,CAAC;AAAA,MAChC,GAAG;AAAA,QACD,YAAY,SAASY,YAAW,cAAmC;AACjE,cAAI,OAAO,OAAO,uBAAuB,IAAI,CAAC;AAC9C,qBAAW,YAAY;AACvB,cAAIlB,SAAQ,SAAS,MAAM,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,QAAW,KAAK,MAAM,CAAC;AACxF,cAAI,SAAS,OAAO,YAAY;AAChC,iBAAO,mBAAmB,iBAAiB,KAAK,MAAM,QAAQA,MAAK,IAAI,KAAK,MAAMA,QAAOA,SAAQ,OAAO,MAAM,MAAM;AAAA,QACtH;AAAA,MACF,CAAC;AACD,UAAI,uBAAuB,CAAC;AAC5B,UAAI,aAAa,YAAY,UAAU,YAAY;AACnD,UAAI,eAAe;AACnB,OAAC,WAAY;AACX,YAAI,OAAO,eAAe,eAAe,OAAO,WAAW,aAAa;AACtE;AAAA,QACF;AACA,iBAAS,SAAS,OAAO,KAAK;AAC5B,iBAAO,KAAK,MAAM,OAAO,GAAG;AAAA,QAC9B;AACA,iBAAS,KAAK,OAAO,QAAQ;AAC3B,cAAI,UAAU,SAAS,GAAG;AACxB,qBAAS;AAAA,UACX;AACA,mBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,EAAE,GAAG,EAAE,QAAQ;AACtD,iBAAK,MAAM,IAAI,MAAM,CAAC,IAAI;AAAA,UAC5B;AAAA,QACF;AAGA,iBAAS,WAAW,MAAM;AACxB,cAAIE;AACJ,cAAI,OAAO,SAAS,UAAU;AAC5B,YAAAA,UAAS,IAAI,MAAM,IAAI;AACvB,qBAAS,IAAI,GAAG,IAAI,MAAM,EAAE,GAAG;AAC7B,cAAAA,QAAO,CAAC,IAAI;AAAA,YACd;AAAA,UACF,OAAO;AACL,YAAAA,UAAS,KAAK,MAAM,CAAC;AAAA,UACvB;AACA,UAAAA,QAAO,WAAW;AAClB,UAAAA,QAAO,SAASA;AAChB,UAAAA,QAAO,aAAaA,QAAO;AAC3B,UAAAA,QAAO,MAAM;AACb,cAAI,OAAO,SAAS,YAAY,KAAK,QAAQ;AAC3C,YAAAA,QAAO,SAAS,KAAK;AAAA,UACvB;AACA,iBAAOA;AAAA,QACT;AACA,eAAO,aAAa;AACpB,eAAO,cAAc;AACrB,eAAO,aAAa;AAAA,MACtB,GAAG;AACH,UAAI,QAAQ;AAAA,QACV,GAAG;AAAA,QACH,GAAG;AAAA,QACH,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,SAAS;AAAA,QACT,UAAU;AAAA,MACZ;AACA,UAAI,YAAY,OAAO,KAAK,KAAK,EAAE,IAAI,SAAU,KAAK;AACpD,eAAO,MAAM,GAAG;AAAA,MAClB,CAAC,EAAE,KAAK,EAAE;AACV,UAAI,gBAAgB;AACpB,UAAI,kBAAkB;AACtB,UAAI,wBAAwB,IAAI,OAAO,OAAO,gBAAgB,YAAY,YAAY,SAAS,gBAAgB,iBAAiB,gBAAgB,OAAO,GAAG;AAC1J,eAAS,aAAa,YAAY;AAChC,cAAM,IAAI,MAAM,gCAAgC,UAAU;AAAA,MAC5D;AACA,eAAS,mBAAmB,YAAYiB,OAAM;AAC5C,YAAI,QAAQ,sBAAsB,KAAK,WAAW,QAAQ,iBAAiB,EAAE,CAAC;AAC9E,YAAI,CAAC,OAAO;AACV,uBAAa,UAAU;AAAA,QACzB;AACA,8BAAsB,YAAY;AAClC,YAAI,WAAW,MAAM,CAAC;AACtB,YAAIC,YAAW,MAAM,CAAC;AACtB,YAAI,SAAS,MAAM,CAAC;AACpB,YAAI,MAAM,MAAM,CAAC;AACjB,YAAI,IAAID,MAAK;AACb,YAAI,IAAIA,MAAK;AACb,YAAI,QAAQA,MAAK;AACjB,YAAI,SAASA,MAAK;AAClB,YAAI,QAAQ;AACZ,gBAAQC,WAAU;AAAA,UAChB,KAAK,MAAM,OACT;AACE,oBAAQ;AACR;AAAA,UACF;AAAA,UACF,KAAK,MAAM,QACT;AACE,oBAAQ;AACR;AAAA,UACF;AAAA,UACF,KAAK,MAAM,GACT;AACE,oBAAQ;AACR;AAAA,UACF;AAAA,UACF,KAAK,MAAM,GACT;AACE,oBAAQ;AACR;AAAA,UACF;AAAA,UACF,KAAK,MAAM,SACT;AACE,oBAAQ,KAAK,IAAI,QAAQ,KAAK;AAC9B;AAAA,UACF;AAAA,UACF,KAAK,MAAM,SACT;AACE,oBAAQ,KAAK,IAAI,QAAQ,KAAK;AAC9B;AAAA,UACF;AAAA,UACF,KAAK,MAAM,UACT;AACE,oBAAQ,KAAK,KAAK,SAAS,SAAS,QAAQ,KAAK;AACjD;AAAA,UACF;AAAA,QACJ;AACA,YAAI,UAAU;AAEZ,mBAAS,WAAW,QAAQ;AAAA,QAC9B;AACA,YAAI,QAAQ;AAEV,mBAAS,WAAW,OAAO,MAAM,CAAC,CAAC;AAAA,QACrC;AACA,YAAI,KAAK;AACP,mBAAS,kBAAkB,GAAG;AAAA,QAChC;AACA,eAAO;AAAA,MACT;AACA,eAAS,kBAAkB,eAAe;AACxC,YAAI,CAAC,eAAe;AAClB,iBAAO;AAAA,QACT;AACA,YAAI,OAAO,cAAc,CAAC;AAC1B,gBAAQ,MAAM;AAAA,UACZ,KAAK,KACH;AACE,mBAAO,WAAW,cAAc,OAAO,CAAC,CAAC;AAAA,UAC3C;AAAA,UACF,KAAK,KACH;AACE,mBAAO,CAAC,WAAW,cAAc,OAAO,CAAC,CAAC;AAAA,UAC5C;AAAA,QACJ;AACA,eAAO,WAAW,aAAa;AAAA,MACjC;AACA,eAAS,gBAAgB,OAAO;AAC9B,eAAO,OAAO,UAAU,YAAY,MAAM,SAAS,MAAM;AAAA,MAC3D;AACA,UAAI,YAAY;AAChB,UAAI,kBAAkB,UAAU;AAChC,eAAS,kBAAkB,gBAAgB,SAAS;AAClD,YAAI,QAAQ;AACZ,YAAI,mBAAmB;AACvB,WAAG;AACD,cAAI,YAAY,MAAM,QAAQ,WAAW,gBAAgB;AACzD,cAAI,cAAc,IAAI;AACpB,mBAAO;AAAA,UACT;AACA,cAAI,eAAe,YAAY;AAC/B,cAAI,WAAW;AACf,6BAAoB,IAAG;AACrB,oBAAQ,MAAM,YAAY,GAAG;AAAA,cAC3B,KAAK,KACH;AACE;AACA;AAAA,cACF;AAAA,cACF,KAAK,KACH;AACE;AACA,oBAAI,aAAa,GAAG;AAClB,wBAAM;AAAA,gBACR;AACA;AAAA,cACF;AAAA,cACF,KAAK,QACH;AAEE,6BAAa,KAAK;AAAA,cACpB;AAAA,YACJ;AACA;AAAA,UACF,SAAS;AAET,cAAI,aAAa,MAAM,MAAM,YAAY,iBAAiB,YAAY;AACtE,cAAI,gBAAgB,UAAU,GAAG;AAC/B,yBAAa,kBAAkB,YAAY,OAAO;AAAA,UACpD;AAEA,cAAI,YAAY,OAAO,mBAAmB,YAAY,OAAO,CAAC;AAE9D,kBAAQ,MAAM,MAAM,GAAG,SAAS,IAAI,YAAY,MAAM,MAAM,eAAe,CAAC;AAC5E,6BAAmB,YAAY,UAAU;AAAA,QAC3C,SAAS;AAAA,MACX;AAGA,UAAI,QAAQ,KAAK;AACjB,UAAI,UAAU,KAAK;AACnB,UAAI,KAAK,KAAK;AACd,UAAI,QAAQ;AAAA;AAAA,QAEV,QAAQ,SAAU,QAAQ,OAAO,OAAO;AACtC,cAAI,aAAa,OAAO,CAAC,IAAI,OAAO,CAAC;AACrC,cAAI,YAAY,MAAM,CAAC,IAAI,MAAM,CAAC;AAClC,kBAAQ,QAAQ,OAAO,CAAC,KAAK,aAAa,YAAY,MAAM,CAAC,KAAK;AAAA,QACpE;AAAA,MACF;AACA,UAAI,iBAAiB,SAAU,OAAO;AACpC,eAAO,QAAQ,OAAO,QAAQ,IAAI,MAAM;AAAA,MAC1C;AACA,UAAI,aAAa,SAAU,OAAO,UAAU;AAC1C,eAAO,WAAW,MAAM,QAAQ,QAAQ;AAAA,MAC1C;AACA,UAAI,QAAQ,SAAU,KAAK;AACzB,eAAO,MAAM,MAAM,KAAK;AAAA,MAC1B;AACA,UAAI,QAAQ,SAAU,KAAK,SAAS;AAClC,kBAAU,WAAW;AACrB,cAAM,UAAU,MAAM,MAAM;AAC5B,eAAO,MAAM,KAAK;AAAA,MACpB;AAGA,UAAI,SAAS,SAAUC,MAAKC,MAAK;AAC/B,YAAIA,SAAQ,QAAW;AAErB,UAAAA,OAAMD,SAAQ,SAAY,IAAIA;AAC9B,UAAAA,OAAM;AAAA,QACR,WAAWC,OAAMD,MAAK;AAEpB,cAAI,OAAOA;AACX,UAAAA,OAAMC;AACN,UAAAA,OAAM;AAAA,QACR;AACA,eAAO,QAAQ,KAAK,OAAO,KAAKA,OAAMD,OAAM,KAAKA,IAAG;AAAA,MACtD;AAIA,UAAI,MAAM,KAAK;AACf,UAAI,MAAM,KAAK;AACf,UAAI,QAAQ,KAAK;AACjB,UAAI,UAAU,SAAU,GAAG,GAAG;AAC5B,YAAI,OAAO,MAAM,EAAE,CAAC;AACpB,YAAI,OAAO,MAAM,EAAE,CAAC;AACpB,YAAI,OAAO,EAAE;AACb,YAAI,OAAO,EAAE;AACb,YAAI,OAAO,MAAM,OAAO,IAAI;AAC5B,YAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AAC5B,YAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AAChE,YAAI,OAAO,MAAM,MAAM,GAAG,CAAC,CAAC;AAC5B,YAAI,WAAW,CAAC,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,GAAG;AAC1D,YAAIrB,SAAQ,OAAO;AACnB,YAAIA,SAAQ,GAAG;AACb,UAAAA,UAAS;AAAA,QACX;AACA,QAAAA,SAAQ,SAASA,SAAQ,EAAE;AAC3B,eAAO,SAASA,MAAK;AAAA,MACvB;AAIA,UAAI,gBAAgB,SAAU,OAAO,KAAK;AACxC,YAAI,KAAK,MAAM;AACf,YAAI,KAAK,MAAM;AACf,YAAI,KAAK,IAAI;AACb,YAAI,KAAK,IAAI;AACb,gBAAQ,MAAM,MAAM,MAAM,MAAM,MAAM;AAAA,MACxC;AACA,UAAI,SAAS,SAAU,OAAO,KAAK;AACjC,eAAO,KAAK,KAAK,cAAc,OAAO,GAAG,CAAC;AAAA,MAC5C;AACA,UAAI,QAAQ;AAAA,QACV,OAAO;AAAA,QACP,MAAM;AAAA,QACN,SAAS;AAAA,QACT,MAAM;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,OAAO;AAAA,QACP,MAAM;AAAA,MACR;AAWA,UAAI,MAAM,KAAK;AACf,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,KAAK;AACjB,UAAI,OAAO,KAAK;AAChB,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,KAAK;AACjB,UAAI,UAAU,KAAK;AACnB,UAAI,UAAU,KAAK;AACnB,UAAI,MAAM,KAAK;AACf,UAAI,OAAO,KAAK;AAChB,UAAI,QAAQ,SAAU,GAAG,GAAG;AAC1B,YAAI,EAAE,gBAAgB,QAAQ;AAC5B,iBAAO,IAAI,MAAM,GAAG,CAAC;AAAA,QACvB;AACA,YAAI,OAAO,MAAM,UAAU;AACzB,cAAI,KAAK,EAAE,MAAM,EAAE,QAAQ,GAAG,MAAM,KAAK,MAAM,GAAG;AAClD,cAAI,WAAW,GAAG,CAAC,CAAC;AACpB,cAAI,WAAW,GAAG,CAAC,CAAC;AAAA,QACtB,WAAW,OAAO,CAAC,MAAM,GAAG;AAC1B,cAAI,EAAE;AACN,cAAI,EAAE;AAAA,QACR;AACA,aAAK,IAAI,MAAM,SAAY,IAAI;AAC/B,aAAK,IAAI,MAAM,SAAY,IAAI;AAAA,MACjC;AAMA,YAAM,YAAY,SAAU,UAAU,OAAO,QAAQ;AACnD,iBAAS,IAAI,MAAM,MAAM;AACzB,YAAI,IAAI,IAAI,WAAW,MAAM,KAAK,CAAC;AACnC,YAAI,IAAI,IAAI,WAAW,MAAM,KAAK,CAAC;AACnC,YAAI,MAAM,eAAe,MAAM,KAAK,CAAC;AACrC,YAAI,MAAM,IAAI;AACZ,cAAI,CAAC;AAAA,QACP,WAAW,MAAM,KAAK;AACpB,cAAI,CAAC;AACL,cAAI,CAAC;AAAA,QACP,WAAW,MAAM,KAAK;AACpB,cAAI,CAAC;AAAA,QACP;AACA,eAAO,IAAI,MAAM,OAAO,IAAI,GAAG,OAAO,IAAI,CAAC;AAAA,MAC7C;AAGA,YAAM,SAAS,SAAU,IAAI,IAAI,IAAI,IAAI;AACvC,eAAO,IAAI,MAAM,OAAO,IAAI,EAAE,GAAG,OAAO,IAAI,EAAE,CAAC;AAAA,MACjD;AACA,YAAM,YAAY;AAAA,QAChB,MAAM,MAAM;AAAA,QACZ,eAAe,SAAU,QAAQ;AAC/B,cAAI,IAAI,OAAO;AACf,cAAI,MAAM,GAAG;AACX,mBAAO,IAAI,MAAM,OAAO,CAAC,CAAC;AAAA,UAC5B;AACA,cAAI,UAAU;AACd,cAAI,iBAAiB;AACrB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAI,IAAI,IAAI,MAAM,OAAO,CAAC,CAAC;AAC3B,gBAAI,cAAc,KAAK,gBAAgB,CAAC;AACxC,gBAAI,cAAc,gBAAgB;AAChC,wBAAU;AACV,+BAAiB;AAAA,YACnB;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,cAAc,SAAU,GAAG;AACzB,cAAI,EAAE,cAAc,IAAI,GAAG;AACzB,mBAAO;AAAA,UACT;AACA,eAAK,IAAI,MAAM,MAAM,KAAK,GAAG,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK;AAChD,eAAK,IAAI,MAAM,MAAM,KAAK,GAAG,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,MAAM;AACjD,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,cAAc,SAAU,IAAI,IAAI;AAC9B,cAAI,eAAe,KAAK,OAAO,EAAE,KAAK,KAAK,OAAO,EAAE,IAAI,MAAM,KAAK,MAAM,EAAE,IAAI,KAAK,MAAM,EAAE;AAC5F,cAAI,eAAe,GAAG;AACpB,4BAAgB;AAAA,UAClB;AACA,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,SAAS,SAAUa,QAAO;AACxB,iBAAO,QAAQ,MAAMA,MAAK;AAAA,QAC5B;AAAA;AAAA;AAAA,QAGA,eAAe,SAAU,IAAI,IAAI,KAAK;AAEpC,iBAAO,KAAK,MAAM,EAAE,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,GAAG,IAAI,KAAK,MAAM,GAAG;AAAA,QAClE;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO,IAAI,MAAM,IAAI;AAAA,QACvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAUA,OAAO,SAAU,IAAI,IAAI;AACvB,iBAAO,MAAM,MAAM,GAAG,IAAI,KAAK,MAAM,GAAG,IAAI,KAAK,MAAM,GAAG,IAAI,KAAK,MAAM,GAAG,IAAI,KAAK,KAAK;AAAA,QAC5F;AAAA,QACA,YAAY,SAAU,IAAI,IAAI;AAC5B,cAAI,OAAO,EAAE,MAAM,IAAI;AACrB,iBAAK,GAAG;AACR,iBAAK,GAAG;AAAA,UACV;AACA,iBAAO,IAAI,MAAM,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,EAAE;AAAA,QACzD;AAAA;AAAA,QAEA,UAAU,SAAU,GAAG;AACrB,iBAAO,OAAO,MAAM,CAAC;AAAA,QACvB;AAAA;AAAA,QAEA,KAAK,SAAU,GAAG;AAChB,iBAAO,IAAI,KAAK,IAAI,EAAE,IAAI,KAAK,IAAI,EAAE,IAAI;AAAA,QAC3C;AAAA,QACA,QAAQ,SAAU,GAAG;AACnB,iBAAO,CAAC,CAAC,KAAK,KAAK,MAAM,EAAE,KAAK,KAAK,MAAM,EAAE;AAAA,QAC/C;AAAA;AAAA,QAEA,MAAM,SAAU,GAAG,GAAG;AACpB,cAAI,IAAI,KAAK;AACb,cAAI,IAAI,KAAK;AACb,iBAAO,IAAI,OAAO,IAAI,KAAK,IAAI,IAAI,EAAE,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE,CAAC;AAAA,QAC/D;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,CAAC,KAAK;AAAA,QACpD;AAAA;AAAA,QAEA,mBAAmB,SAAU,GAAG;AAC9B,iBAAO,IAAI,EAAE,IAAI,KAAK,CAAC,IAAI,IAAI,EAAE,IAAI,KAAK,CAAC;AAAA,QAC7C;AAAA;AAAA;AAAA,QAGA,MAAM,SAAU,KAAK,UAAU;AAC7B,cAAI,QAAQ,MAAM,IAAI,MAAM,GAAG,EAAE,MAAM,IAAI,CAAC;AAC5C,cAAI,SAAS,KAAK,OAAO,MAAM,KAAK,IAAI,UAAU,CAAC,MAAM,KAAK,IAAI,QAAQ;AAC1E,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,WAAW,SAAUZ,SAAQ;AAC3B,cAAIsB,UAAStB,WAAU,KAAK,KAAK,UAAU;AAC3C,iBAAO,KAAK,MAAMsB,QAAOA,MAAK;AAAA,QAChC;AAAA;AAAA,QAEA,QAAQ,SAAU,IAAI,IAAI;AACxB,cAAI,OAAO,EAAE,MAAM,IAAI;AACrB,iBAAK,GAAG;AACR,iBAAK,GAAG;AAAA,UACV;AACA,eAAK,KAAK,MAAM;AAChB,eAAK,KAAK,MAAM;AAChB,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,YAAY,SAAU,KAAK;AACzB,iBAAO,IAAI,MAAM,GAAG,EAAE,KAAK,MAAM,KAAK,SAAS,GAAG,CAAC;AAAA,QACrD;AAAA;AAAA;AAAA,QAGA,QAAQ,SAAU,QAAQ,OAAO;AAC/B,cAAI,UAAU,GAAG;AACf,mBAAO;AAAA,UACT;AACA,mBAAS,UAAU,IAAI,MAAM,GAAG,CAAC;AACjC,kBAAQ,MAAM,eAAe,CAAC,KAAK,CAAC;AACpC,cAAI,WAAW,MAAM,KAAK;AAC1B,cAAI,WAAW,MAAM,KAAK;AAC1B,cAAI,IAAI,YAAY,KAAK,IAAI,OAAO,KAAK,YAAY,KAAK,IAAI,OAAO,KAAK,OAAO;AACjF,cAAI,IAAI,YAAY,KAAK,IAAI,OAAO,KAAK,YAAY,KAAK,IAAI,OAAO,KAAK,OAAO;AACjF,eAAK,IAAI;AACT,eAAK,IAAI;AACT,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,WAAW;AAC1B,cAAIC,KAAI;AACR,cAAI,WAAW;AACb,oBAAQ,WAAW;AAAA,cACjB,KAAK;AACH,gBAAAA,KAAI;AACJ;AAAA,cACF,KAAK;AACH,gBAAAA,KAAI;AACJ;AAAA,cACF,KAAK;AACH,gBAAAA,KAAI;AACJ;AAAA,cACF;AACE,gBAAAA,KAAI,IAAI,IAAI,SAAS;AACrB;AAAA,YACJ;AAAA,UACF;AACA,eAAK,IAAI,QAAQ,KAAK,IAAIA,EAAC,IAAIA;AAC/B,eAAK,IAAI,QAAQ,KAAK,IAAIA,EAAC,IAAIA;AAC/B,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,OAAO,SAAU,IAAI,IAAI,QAAQ;AAC/B,mBAAS,UAAU,IAAI,MAAM,MAAM,KAAK,IAAI,MAAM,GAAG,CAAC;AACtD,eAAK,IAAI,OAAO,IAAI,MAAM,KAAK,IAAI,OAAO;AAC1C,eAAK,IAAI,OAAO,IAAI,MAAM,KAAK,IAAI,OAAO;AAC1C,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,IAAI,IAAI;AAC5B,eAAK,IAAI,WAAW,KAAK,GAAG,EAAE;AAC9B,eAAK,IAAI,WAAW,KAAK,GAAG,MAAM,EAAE;AACpC,iBAAO;AAAA,QACT;AAAA,QACA,iBAAiB,SAAU,GAAG;AAC5B,iBAAO,cAAc,MAAM,CAAC;AAAA,QAC9B;AAAA;AAAA;AAAA;AAAA,QAIA,OAAO,SAAU,GAAG;AAClB,cAAI,IAAI,MAAM,CAAC;AAGf,cAAI,IAAI,EAAE,EAAE,IAAI,KAAK;AACrB,cAAI,IAAI,EAAE,IAAI,KAAK;AACnB,cAAI,MAAM,QAAQ,GAAG,CAAC;AAGtB,cAAI,MAAM,GAAG;AACX,kBAAM,IAAI,OAAO;AAAA,UACnB;AACA,iBAAO,MAAM,MAAM;AAAA,QACrB;AAAA,QACA,QAAQ,WAAY;AAClB,iBAAO;AAAA,YACL,GAAG,KAAK;AAAA,YACR,GAAG,KAAK;AAAA,UACV;AAAA,QACF;AAAA;AAAA;AAAA,QAGA,SAAS,SAAU,GAAG;AACpB,cAAI,KAAK,IAAI,MAAM,CAAC,KAAK,IAAI,MAAM,GAAG,CAAC;AACvC,cAAI,IAAI,KAAK;AACb,cAAI,IAAI,KAAK;AACb,eAAK,IAAI,MAAM,IAAI,EAAE,MAAM,IAAI,EAAE,MAAM,IAAI,EAAE,MAAM,IAAI,EAAE,EAAE;AAC3D,eAAK,IAAI,MAAM,EAAE,MAAM,IAAI,MAAM,GAAG,CAAC,CAAC,CAAC;AACvC,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,IAAI,MAAM,KAAK;AAAA,QAC7B;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO,KAAK,IAAI,MAAM,KAAK;AAAA,QAC7B;AAAA,QACA,QAAQ,SAAU,GAAG,GAAG;AACtB,cAAI,OAAO,CAAC,MAAM,GAAG;AACnB,gBAAI,EAAE;AACN,gBAAI,EAAE;AAAA,UACR;AACA,eAAK,IAAI,KAAK;AACd,eAAK,IAAI,KAAK;AACd,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,aAAa,SAAU,GAAG;AACxB,cAAI,OAAO,IAAI,MAAM,GAAG,CAAC;AACzB,iBAAO,KAAK,aAAa,MAAM,CAAC;AAAA,QAClC;AAAA,MACF;AACA,YAAM,UAAU,YAAY,MAAM,UAAU;AAG5C,UAAI,QAAQ;AACZ,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,KAAK;AACjB,UAAI,OAAO,SAAU,IAAI,IAAI;AAC3B,YAAI,EAAE,gBAAgB,OAAO;AAC3B,iBAAO,IAAI,KAAK,IAAI,EAAE;AAAA,QACxB;AACA,YAAI,cAAc,MAAM;AACtB,iBAAO,IAAI,KAAK,GAAG,OAAO,GAAG,GAAG;AAAA,QAClC;AACA,aAAK,QAAQ,IAAI,MAAM,EAAE;AACzB,aAAK,MAAM,IAAI,MAAM,EAAE;AAAA,MACzB;AACA,WAAK,YAAY;AAAA,QACf,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO,WAAY;AACjB,cAAI,kBAAkB,IAAI,MAAM,KAAK,MAAM,IAAI,GAAG,KAAK,MAAM,CAAC;AAC9D,iBAAO,KAAK,MAAM,aAAa,KAAK,KAAK,eAAe;AAAA,QAC1D;AAAA,QACA,MAAM,WAAY;AAChB,cAAIC,QAAO,MAAM,KAAK,MAAM,GAAG,KAAK,IAAI,CAAC;AACzC,cAAIC,OAAM,MAAM,KAAK,MAAM,GAAG,KAAK,IAAI,CAAC;AACxC,cAAIC,SAAQ,MAAM,KAAK,MAAM,GAAG,KAAK,IAAI,CAAC;AAC1C,cAAIC,UAAS,MAAM,KAAK,MAAM,GAAG,KAAK,IAAI,CAAC;AAC3C,iBAAO,IAAI,KAAKH,OAAMC,MAAKC,SAAQF,OAAMG,UAASF,IAAG;AAAA,QACvD;AAAA;AAAA;AAAA,QAGA,SAAS,WAAY;AACnB,iBAAO,QAAQ,KAAK,OAAO,KAAK,GAAG;AAAA,QACrC;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO,IAAI,KAAK,KAAK,OAAO,KAAK,GAAG;AAAA,QACtC;AAAA;AAAA,QAEA,cAAc,SAAU,GAAG;AACzB,iBAAO,KAAK,QAAQ,KAAK,6BAA6B,CAAC,CAAC;AAAA,QAC1D;AAAA,QACA,oBAAoB,SAAU,GAAG;AAC/B,iBAAO,KAAK,6BAA6B,CAAC,IAAI,KAAK,OAAO;AAAA,QAC5D;AAAA;AAAA,QAEA,8BAA8B,SAAU,GAAG;AACzC,cAAI,UAAU,KAAK,OAAO,EAAE,IAAI,IAAI,KAAK,KAAK,OAAO,CAAC,EAAE,OAAO,CAAC;AAChE,cAAI,qBAAqB,MAAM,GAAG,MAAM,GAAG,UAAU,KAAK,cAAc,CAAC,CAAC;AAI1E,cAAI,uBAAuB,oBAAoB;AAC7C,mBAAO;AAAA,UACT;AAGA,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,SAAU,GAAG;AAChC,iBAAO,KAAK,UAAU,KAAK,6BAA6B,CAAC,CAAC;AAAA,QAC5D;AAAA;AAAA,QAEA,eAAe,SAAU,GAAG;AAC1B,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,KAAK;AACf,cAAI,MAAM,MAAM,GAAG,GAAG,MAAM,GAAG;AAC7B,mBAAO;AAAA,UACT;AAGA,cAAIzB,UAAS,KAAK,OAAO;AACzB,cAAI,IAAI,KAAK,OAAO,CAAC,EAAE,OAAO,IAAIA,SAAQ;AACxC,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,KAAK,GAAG,GAAG,EAAE,OAAO,IAAIA,SAAQ;AACtC,mBAAO;AAAA,UACT;AAGA,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,UAAU,SAAU,OAAO;AACzB,cAAI,eAAe,KAAK,QAAQ,KAAK;AAGrC,iBAAO,CAAC,IAAI,KAAK,KAAK,OAAO,YAAY,GAAG,IAAI,KAAK,cAAc,KAAK,GAAG,CAAC;AAAA,QAC9E;AAAA;AAAA,QAEA,gBAAgB,SAAUA,SAAQ;AAChC,cAAI,eAAe,KAAK,cAAcA,OAAM;AAG5C,iBAAO,CAAC,IAAI,KAAK,KAAK,OAAO,YAAY,GAAG,IAAI,KAAK,cAAc,KAAK,GAAG,CAAC;AAAA,QAC9E;AAAA,QACA,QAAQ,SAAU,GAAG;AACnB,iBAAO,CAAC,CAAC,KAAK,KAAK,MAAM,MAAM,EAAE,MAAM,KAAK,KAAK,MAAM,MAAM,EAAE,MAAM,KAAK,KAAK,IAAI,MAAM,EAAE,IAAI,KAAK,KAAK,IAAI,MAAM,EAAE,IAAI;AAAA,QAC3H;AAAA;AAAA;AAAA;AAAA,QAIA,WAAW,SAAU,OAAO,KAAK;AAC/B,cAAI,SAAS,MAAM,sBAAsB;AACvC,gBAAI4B,gBAAe,MAAM,qBAAqB,MAAM,GAAG;AAGvD,gBAAIA,iBAAgB,iBAAiB,MAAM;AACzC,cAAAA,gBAAeA,cAAa,CAAC;AAAA,YAC/B;AACA,mBAAOA;AAAA,UACT;AACA,iBAAO;AAAA,QACT;AAAA,QACA,sBAAsB,SAAUC,OAAM;AACpC,cAAI,SAAS,IAAI,MAAM,KAAK,IAAI,IAAI,KAAK,MAAM,GAAG,KAAK,IAAI,IAAI,KAAK,MAAM,CAAC;AAC3E,cAAI,SAAS,IAAI,MAAMA,MAAK,IAAI,IAAIA,MAAK,MAAM,GAAGA,MAAK,IAAI,IAAIA,MAAK,MAAM,CAAC;AAC3E,cAAI,MAAM,OAAO,IAAI,OAAO,IAAI,OAAO,IAAI,OAAO;AAClD,cAAI,UAAU,IAAI,MAAMA,MAAK,MAAM,IAAI,KAAK,MAAM,GAAGA,MAAK,MAAM,IAAI,KAAK,MAAM,CAAC;AAChF,cAAI,QAAQ,QAAQ,IAAI,OAAO,IAAI,QAAQ,IAAI,OAAO;AACtD,cAAI,OAAO,QAAQ,IAAI,OAAO,IAAI,QAAQ,IAAI,OAAO;AACrD,cAAI,QAAQ,KAAK,QAAQ,MAAM,KAAK,OAAO,MAAM,GAAG;AAElD,mBAAO;AAAA,UACT;AACA,cAAI,MAAM,GAAG;AACX,gBAAI,QAAQ,OAAO,OAAO,KAAK;AAC7B,qBAAO;AAAA,YACT;AAAA,UACF,OAAO;AACL,gBAAI,QAAQ,OAAO,OAAO,KAAK;AAC7B,qBAAO;AAAA,YACT;AAAA,UACF;AACA,iBAAO,CAAC,IAAI,MAAM,KAAK,MAAM,IAAI,QAAQ,OAAO,IAAI,KAAK,KAAK,MAAM,IAAI,QAAQ,OAAO,IAAI,GAAG,CAAC;AAAA,QACjG;AAAA,QACA,kBAAkB,WAAY;AAC5B,iBAAO,CAAC,KAAK,MAAM,OAAO,KAAK,GAAG;AAAA,QACpC;AAAA;AAAA,QAEA,QAAQ,WAAY;AAClB,iBAAO,OAAO,KAAK,OAAO,KAAK,GAAG;AAAA,QACpC;AAAA;AAAA,QAEA,UAAU,WAAY;AACpB,iBAAO,IAAI,OAAO,KAAK,MAAM,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,MAAM,IAAI,KAAK,IAAI,KAAK,CAAC;AAAA,QACnF;AAAA,QACA,UAAU,SAAU,UAAU;AAC5B,cAAI,IAAI,KAAK,MAAM;AACnB,cAAI,CAAC,KAAK,iBAAiB,GAAG;AAC5B,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,EAAE;AACd,cAAI,MAAM,EAAE;AACZ,cAAI,OAAO,MAAM,MAAM,EAAE,OAAO,KAAK,GAAG;AACxC,cAAI,OAAO,IAAI,MAAM,EAAE,OAAO,OAAO,EAAE;AACvC,gBAAM,KAAK,MAAM,QAAQ;AACzB,cAAI,KAAK,MAAM,QAAQ;AACvB,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,SAAS,SAAU,GAAG;AACpB,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,KAAK;AACf,cAAI,KAAK,GAAG;AACV,mBAAO,MAAM,MAAM;AAAA,UACrB;AACA,cAAI,KAAK,GAAG;AACV,mBAAO,IAAI,MAAM;AAAA,UACnB;AACA,iBAAO,MAAM,KAAK,KAAK,CAAC;AAAA,QAC1B;AAAA,QACA,eAAe,SAAU7B,SAAQ;AAC/B,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,KAAK;AACf,cAAI,YAAY;AAChB,cAAIA,UAAS,GAAG;AACd,wBAAY;AACZ,YAAAA,UAAS,CAACA;AAAA,UACZ;AACA,cAAI,aAAa,KAAK,OAAO;AAC7B,cAAIA,WAAU,YAAY;AACxB,mBAAO,YAAY,IAAI,MAAM,IAAI,MAAM,MAAM;AAAA,UAC/C;AACA,iBAAO,KAAK,SAAS,YAAYA,UAAS,aAAaA,WAAU,UAAU;AAAA,QAC7E;AAAA;AAAA,QAEA,aAAa,SAAU,GAAG;AAExB,cAAI,IAAI,MAAM,CAAC;AACf,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,KAAK;AACf,cAAI8B,gBAAe,IAAI,IAAI,MAAM,MAAM,EAAE,IAAI,MAAM,MAAM,IAAI,IAAI,MAAM,MAAM,EAAE,IAAI,MAAM;AACzF,iBAAOA,eAAc,KAAK,OAAO;AAAA,QACnC;AAAA,QACA,QAAQ,SAAU,QAAQ,OAAO;AAC/B,eAAK,MAAM,OAAO,QAAQ,KAAK;AAC/B,eAAK,IAAI,OAAO,QAAQ,KAAK;AAC7B,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,WAAW;AAC1B,eAAK,MAAM,MAAM,SAAS;AAC1B,eAAK,IAAI,MAAM,SAAS;AACxB,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,QAAQ;AAC/B,eAAK,MAAM,MAAM,IAAI,IAAI,MAAM;AAC/B,eAAK,IAAI,MAAM,IAAI,IAAI,MAAM;AAC7B,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,WAAW,SAAU9B,SAAQ;AAC3B,cAAI,gBAAgB,KAAK,OAAO;AAChC,cAAI,CAAC,eAAe;AAClB,mBAAO;AAAA,UACT;AACA,cAAI,cAAcA,UAAS;AAC3B,iBAAO,KAAK,MAAM,aAAa,aAAa,KAAK,KAAK;AAAA,QACxD;AAAA;AAAA;AAAA,QAGA,eAAe,WAAY;AACzB,iBAAO,cAAc,KAAK,OAAO,KAAK,GAAG;AAAA,QAC3C;AAAA,QACA,WAAW,SAAU,GAAG;AACtB,cAAI,CAAC,KAAK,iBAAiB,GAAG;AAC5B,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,KAAK;AACf,cAAI,eAAe,KAAK,QAAQ,CAAC;AAEjC,cAAI,cAAc,IAAI,KAAK,OAAO,GAAG;AACrC,sBAAY,UAAU,aAAa,IAAI,MAAM,GAAG,aAAa,IAAI,MAAM,CAAC;AAExE,iBAAO;AAAA,QACT;AAAA,QACA,iBAAiB,SAAUA,SAAQ;AACjC,cAAI,CAAC,KAAK,iBAAiB,GAAG;AAC5B,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,KAAK;AACf,cAAI,eAAe,KAAK,cAAcA,OAAM;AAC5C,cAAI,cAAc,IAAI,KAAK,OAAO,GAAG;AACrC,sBAAY,UAAU,aAAa,IAAI,MAAM,GAAG,aAAa,IAAI,MAAM,CAAC;AAExE,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,MAAM,SAAS,IAAI,MAAM,KAAK,IAAI,SAAS;AAAA,QACzD;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO,KAAK,MAAM,UAAU,IAAI,MAAM,KAAK,IAAI,UAAU;AAAA,QAC3D;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAC3B,eAAK,MAAM,UAAU,IAAI,EAAE;AAC3B,eAAK,IAAI,UAAU,IAAI,EAAE;AACzB,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,QAAQ,WAAY;AAClB,iBAAO,IAAI,MAAM,KAAK,IAAI,IAAI,KAAK,MAAM,GAAG,KAAK,IAAI,IAAI,KAAK,MAAM,CAAC;AAAA,QACvE;AAAA,MACF;AAGA,WAAK,UAAU,eAAe,KAAK,UAAU;AAG7C,UAAI,OAAO;AACX,UAAI,SAAS,KAAK;AAClB,UAAI,UAAU,KAAK;AACnB,UAAI,QAAQ,KAAK;AACjB,UAAI,UAAU,SAAU,GAAG,GAAG,GAAG;AAC/B,YAAI,EAAE,gBAAgB,UAAU;AAC9B,iBAAO,IAAI,QAAQ,GAAG,GAAG,CAAC;AAAA,QAC5B;AACA,YAAI,aAAa,SAAS;AACxB,iBAAO,IAAI,QAAQ,IAAI,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;AAAA,QAClD;AACA,YAAI,IAAI,MAAM,CAAC;AACf,aAAK,IAAI,EAAE;AACX,aAAK,IAAI,EAAE;AACX,aAAK,IAAI;AACT,aAAK,IAAI;AAAA,MACX;AACA,cAAQ,WAAW,SAAU+B,OAAM;AACjC,QAAAA,QAAO,IAAI,KAAKA,KAAI;AACpB,eAAO,IAAI,QAAQA,MAAK,OAAO,GAAGA,MAAK,QAAQ,GAAGA,MAAK,SAAS,CAAC;AAAA,MACnE;AACA,cAAQ,YAAY;AAAA,QAClB,MAAM,MAAM;AAAA,QACZ,MAAM,WAAY;AAChB,iBAAO,IAAI,KAAK,KAAK,IAAI,KAAK,GAAG,KAAK,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC;AAAA,QAC1E;AAAA;AAAA;AAAA;AAAA,QAIA,QAAQ,WAAY;AAClB,iBAAO,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC;AAAA,QACjC;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO,IAAI,QAAQ,IAAI;AAAA,QACzB;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,eAAe,SAAU,GAAG;AAC1B,iBAAO,KAAK,mBAAmB,CAAC,KAAK;AAAA,QACvC;AAAA,QACA,QAAQ,SAAUC,UAAS;AACzB,iBAAO,CAAC,CAACA,YAAWA,SAAQ,MAAM,KAAK,KAAKA,SAAQ,MAAM,KAAK,KAAKA,SAAQ,MAAM,KAAK,KAAKA,SAAQ,MAAM,KAAK;AAAA,QACjH;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,SAAS,SAAU,IAAI,IAAI;AACzB,cAAI,OAAO,QAAW;AACpB,iBAAK;AAAA,UACP;AACA,cAAI,OAAO,QAAW;AACpB,iBAAK;AAAA,UACP;AACA,eAAK,KAAK,IAAI;AACd,eAAK,KAAK,IAAI;AACd,iBAAO;AAAA,QACT;AAAA,QACA,sBAAsB,SAAUH,OAAM;AACpC,cAAI,gBAAgB,CAAC;AACrB,cAAI,KAAKA,MAAK;AACd,cAAI,KAAKA,MAAK;AACd,cAAI,KAAK,KAAK;AACd,cAAI,KAAK,KAAK;AACd,cAAI,MAAMA,MAAK,OAAO;AACtB,cAAII,QAAO,GAAG,WAAW,IAAI,MAAM,IAAI,CAAC;AACxC,cAAI,OAAO,IAAI,MAAM,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,GAAG;AACzD,cAAI,QAAQ,IAAI,MAAMA,MAAK,KAAK,KAAK,KAAKA,MAAK,KAAK,KAAK,GAAG;AAC5D,cAAI,IAAI,IAAI,IAAI,IAAI;AACpB,cAAI,IAAI,IAAI,IAAI,KAAK;AACrB,cAAI,IAAIA,MAAK,IAAI,KAAK,IAAI;AAC1B,cAAI,IAAI,IAAI,IAAI,IAAI;AACpB,cAAI,IAAI,GAAG;AACT,mBAAO;AAAA,UACT,WAAW,IAAI,GAAG;AAChB,gBAAI,OAAO,OAAO,CAAC;AACnB,gBAAI,MAAM,CAAC,IAAI,QAAQ;AACvB,gBAAI,MAAM,CAAC,IAAI,QAAQ;AACvB,iBAAK,KAAK,KAAK,IAAI,QAAQ,KAAK,KAAK,IAAI,KAAK;AAE5C,qBAAO;AAAA,YACT,OAAO;AACL,kBAAI,KAAK,MAAM,MAAM,GAAG;AACtB,8BAAc,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;AAAA,cACpC;AACA,kBAAI,KAAK,MAAM,MAAM,GAAG;AACtB,8BAAc,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;AAAA,cACpC;AAAA,YACF;AAAA,UACF,OAAO;AACL,gBAAI,IAAI,CAAC,IAAI;AACb,gBAAI,KAAK,KAAK,KAAK,GAAG;AACpB,4BAAc,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;AAAA,YACnC,OAAO;AAEL,qBAAO;AAAA,YACT;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,uCAAuC,SAAU,GAAG,OAAO;AACzD,cAAI,IAAI,MAAM,CAAC;AACf,cAAI,OAAO;AACT,cAAE,OAAO,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,KAAK;AAAA,UAC3C;AACA,cAAI,KAAK,EAAE,IAAI,KAAK;AACpB,cAAI,KAAK,EAAE,IAAI,KAAK;AACpB,cAAIhC;AACJ,cAAI,OAAO,GAAG;AACZ,YAAAA,UAAS,KAAK,KAAK,EAAE,oBAAoB,CAAC;AAC1C,gBAAI,OAAO;AACT,qBAAOA,QAAO,OAAO,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK;AAAA,YACxD;AACA,mBAAOA;AAAA,UACT;AACA,cAAI,IAAI,KAAK;AACb,cAAI,WAAW,IAAI;AACnB,cAAI,WAAW,KAAK,IAAI,KAAK;AAC7B,cAAI,WAAW,KAAK,IAAI,KAAK;AAC7B,cAAI,IAAI,OAAO,KAAK,IAAI,WAAW,WAAW,SAAS;AACvD,cAAI,KAAK,IAAI,CAAC,IAAI;AAClB,cAAI,IAAI,IAAI;AACZ,UAAAA,UAAS,IAAI,MAAM,KAAK,IAAI,GAAG,KAAK,IAAI,CAAC;AACzC,cAAI,OAAO;AACT,mBAAOA,QAAO,OAAO,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK;AAAA,UACxD;AACA,iBAAOA;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,oBAAoB,SAAUW,QAAO;AACnC,cAAI,KAAKA,OAAM;AACf,cAAI,KAAKA,OAAM;AACf,cAAI,IAAI,KAAK;AACb,cAAI,IAAI,KAAK;AACb,cAAI,IAAI,KAAK;AACb,cAAI,IAAI,KAAK;AACb,kBAAQ,KAAK,MAAM,KAAK,MAAM,IAAI,MAAM,KAAK,MAAM,KAAK,MAAM,IAAI;AAAA,QACpE;AAAA,QACA,OAAO,SAAU,WAAW;AAC1B,cAAIW,KAAI;AACR,cAAI,WAAW;AACb,oBAAQ,WAAW;AAAA,cACjB,KAAK;AACH,gBAAAA,KAAI;AACJ;AAAA,cACF,KAAK;AACH,gBAAAA,KAAI;AACJ;AAAA,cACF,KAAK;AACH,gBAAAA,KAAI;AACJ;AAAA,cACF;AACE,gBAAAA,KAAI,MAAM,IAAI,SAAS;AACvB;AAAA,YACJ;AAAA,UACF;AACA,eAAK,IAAI,QAAQ,KAAK,IAAIA,EAAC,IAAIA;AAC/B,eAAK,IAAI,QAAQ,KAAK,IAAIA,EAAC,IAAIA;AAC/B,eAAK,IAAI,QAAQ,KAAK,IAAIA,EAAC,IAAIA;AAC/B,eAAK,IAAI,QAAQ,KAAK,IAAIA,EAAC,IAAIA;AAC/B,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,cAAc,SAAU,GAAG;AACzB,cAAI,gBAAgB;AACpB,cAAI,KAAK,EAAE;AACX,cAAI,KAAK,EAAE;AACX,cAAI,IAAI,KAAK;AACb,cAAI,IAAI,KAAK;AACb,cAAIW,UAAS,KAAK,KAAK,EAAE,OAAO;AAChC,cAAI,IAAIA,QAAO;AACf,cAAI,IAAIA,QAAO;AACf,cAAI,KAAK,KAAKA,QAAO,IAAI,IAAI;AAC7B,cAAI,KAAK,KAAKA,QAAO,IAAI,IAAI;AAC7B,cAAI,GAAG;AACP,cAAI,MAAM,IAAI;AACZ,gBAAI,KAAKA,QAAO,IAAI,KAAK,gBAAgB,KAAK;AAC9C,gBAAI,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,MAAM,IAAI,MAAM,IAAI,KAAK,KAAK,MAAM;AAAA,UAC3E,OAAO;AACL,gBAAI,KAAKA,QAAO,IAAI,KAAK,gBAAgB,KAAK;AAC9C,gBAAI,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,MAAM,IAAI,MAAM,IAAI,KAAK,KAAK,MAAM;AAAA,UAC3E;AACA,iBAAO,IAAI,MAAM,GAAG,CAAC,EAAE,MAAM,CAAC;AAAA,QAChC;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,EAAE,SAAS,IAAI,MAAM,KAAK,IAAI,MAAM,KAAK;AAAA,QAC1E;AAAA,MACF;AAGA,UAAI,UAAU;AACd,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,KAAK;AACjB,UAAI,UAAU,KAAK;AACnB,UAAI,QAAQ,KAAK;AACjB,UAAI,OAAO,SAAU,GAAG,GAAG,GAAG,GAAG;AAC/B,YAAI,EAAE,gBAAgB,OAAO;AAC3B,iBAAO,IAAI,KAAK,GAAG,GAAG,GAAG,CAAC;AAAA,QAC5B;AACA,YAAI,OAAO,CAAC,MAAM,GAAG;AACnB,cAAI,EAAE;AACN,cAAI,EAAE;AACN,cAAI,EAAE;AACN,cAAI,EAAE;AAAA,QACR;AACA,aAAK,IAAI,MAAM,SAAY,IAAI;AAC/B,aAAK,IAAI,MAAM,SAAY,IAAI;AAC/B,aAAK,QAAQ,MAAM,SAAY,IAAI;AACnC,aAAK,SAAS,MAAM,SAAY,IAAI;AAAA,MACtC;AACA,WAAK,cAAc,SAAU,GAAG;AAC9B,YAAI,IAAI,QAAQ,CAAC;AACjB,eAAO,IAAI,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,IAAI,EAAE,GAAG,IAAI,EAAE,CAAC;AAAA,MACxD;AACA,WAAK,iBAAiB,WAAY;AAChC,YAAI,SAAS,CAAC,GACZ,MAAM,UAAU;AAClB,eAAO,MAAO,QAAO,GAAG,IAAI,UAAU,GAAG;AACzC,YAAI,OAAO,WAAW,GAAG;AACvB,iBAAO;AAAA,QACT;AACA,YAAI,IAAI,IAAI,MAAM;AAClB,YAAI,MAAM,MAAM,MAAM;AACtB,eAAO,OAAO;AACd,eAAO,OAAO;AACd,iBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,YAAE,OAAO,OAAO,CAAC,CAAC;AAClB,cAAI,IAAI,EAAE;AACV,cAAI,IAAI,EAAE;AACV,cAAI,IAAI,MAAM;AACZ,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,MAAM;AACZ,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,MAAM;AACZ,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,MAAM;AACZ,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO,IAAI,KAAK,MAAM,MAAM,OAAO,MAAM,OAAO,IAAI;AAAA,MACtD;AACA,WAAK,gBAAgB,WAAY;AAC/B,YAAI,QAAQ,CAAC,GACX,MAAM,UAAU;AAClB,eAAO,MAAO,OAAM,GAAG,IAAI,UAAU,GAAG;AACxC,YAAI,MAAM,WAAW,GAAG;AACtB,iBAAO;AAAA,QACT;AACA,YAAI,IAAI,IAAI,KAAK;AACjB,YAAI,MAAM,MAAM,MAAM;AACtB,eAAO,OAAO;AACd,eAAO,OAAO;AACd,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAE,OAAO,MAAM,CAAC,CAAC;AACjB,cAAI,IAAI,EAAE;AACV,cAAI,IAAI,EAAE;AACV,cAAI,KAAK,IAAI,EAAE;AACf,cAAI,KAAK,IAAI,EAAE;AACf,cAAI,IAAI,MAAM;AACZ,mBAAO;AAAA,UACT;AACA,cAAI,KAAK,MAAM;AACb,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,MAAM;AACZ,mBAAO;AAAA,UACT;AACA,cAAI,KAAK,MAAM;AACb,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO,IAAI,KAAK,MAAM,MAAM,OAAO,MAAM,OAAO,IAAI;AAAA,MACtD;AACA,WAAK,YAAY;AAAA,QACf,MAAM,MAAM;AAAA;AAAA;AAAA,QAGZ,MAAM,SAAU,OAAO;AACrB,iBAAO,KAAK,MAAM,EAAE,mBAAmB,KAAK;AAAA,QAC9C;AAAA,QACA,oBAAoB,SAAU,OAAO;AACnC,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AACA,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,SAAS,IAAI;AACjB,cAAI,QAAQ,MAAM,KAAK;AACvB,cAAI,KAAK,MAAM,MAAM,KAAK,CAAC;AAC3B,cAAI,KAAK,MAAM,MAAM,KAAK,CAAC;AAC3B,cAAI,IAAI,QAAQ,KAAK,SAAS;AAC9B,cAAI,IAAI,QAAQ,KAAK,SAAS;AAC9B,eAAK,MAAM,QAAQ,KAAK;AACxB,eAAK,MAAM,SAAS,KAAK;AACzB,eAAK,QAAQ;AACb,eAAK,SAAS;AACd,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,WAAY;AACtB,iBAAO,IAAI,MAAM,KAAK,GAAG,KAAK,IAAI,KAAK,MAAM;AAAA,QAC/C;AAAA,QACA,YAAY,WAAY;AACtB,iBAAO,IAAI,KAAK,KAAK,WAAW,GAAG,KAAK,YAAY,CAAC;AAAA,QACvD;AAAA,QACA,cAAc,WAAY;AACxB,iBAAO,IAAI,MAAM,KAAK,IAAI,KAAK,QAAQ,GAAG,KAAK,IAAI,KAAK,MAAM;AAAA,QAChE;AAAA,QACA,QAAQ,WAAY;AAClB,iBAAO,IAAI,MAAM,KAAK,IAAI,KAAK,QAAQ,GAAG,KAAK,IAAI,KAAK,SAAS,CAAC;AAAA,QACpE;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO,IAAI,KAAK,IAAI;AAAA,QACtB;AAAA;AAAA,QAEA,eAAe,SAAU,GAAG;AAC1B,cAAI,EAAE,aAAa,QAAQ;AACzB,gBAAI,IAAI,MAAM,CAAC;AAAA,UACjB;AACA,iBAAO,EAAE,KAAK,KAAK,KAAK,EAAE,KAAK,KAAK,IAAI,KAAK,SAAS,EAAE,KAAK,KAAK,KAAK,EAAE,KAAK,KAAK,IAAI,KAAK;AAAA,QAC9F;AAAA;AAAA,QAEA,cAAc,SAAU,GAAG;AACzB,cAAI,KAAK,IAAI,KAAK,IAAI,EAAE,UAAU;AAClC,cAAI,KAAK,IAAI,KAAK,CAAC,EAAE,UAAU;AAC/B,cAAI,KAAK,GAAG;AACZ,cAAI,KAAK,GAAG;AACZ,cAAI,KAAK,GAAG;AACZ,cAAI,KAAK,GAAG;AACZ,cAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI;AAE5B,mBAAO;AAAA,UACT;AACA,cAAI,KAAK,GAAG;AACZ,cAAI,KAAK,GAAG;AACZ,cAAI,KAAK,GAAG;AACZ,cAAI,KAAK,GAAG;AACZ,gBAAM;AACN,gBAAM;AACN,gBAAM;AACN,gBAAM;AACN,iBAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM;AAAA,QACnD;AAAA,QACA,QAAQ,WAAY;AAClB,iBAAO,IAAI,MAAM,KAAK,IAAI,KAAK,OAAO,KAAK,IAAI,KAAK,MAAM;AAAA,QAC5D;AAAA;AAAA,QAEA,QAAQ,SAAU,GAAG;AACnB,cAAI,KAAK,IAAI,KAAK,IAAI,EAAE,UAAU;AAClC,cAAI,KAAK,IAAI,KAAK,CAAC,EAAE,UAAU;AAC/B,iBAAO,GAAG,MAAM,GAAG,KAAK,GAAG,MAAM,GAAG,KAAK,GAAG,UAAU,GAAG,SAAS,GAAG,WAAW,GAAG;AAAA,QACrF;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,SAAS,SAAU,IAAI,IAAI;AACzB,cAAI,OAAO,QAAW;AACpB,iBAAK;AAAA,UACP;AACA,cAAI,OAAO,QAAW;AACpB,iBAAK;AAAA,UACP;AACA,eAAK,KAAK;AACV,eAAK,KAAK;AACV,eAAK,SAAS,IAAI;AAClB,eAAK,UAAU,IAAI;AACnB,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,WAAW,SAAU,GAAG;AACtB,cAAI,WAAW,KAAK,OAAO;AAC3B,cAAI,WAAW,KAAK,OAAO;AAC3B,cAAI,UAAU,EAAE,OAAO;AACvB,cAAI,UAAU,EAAE,OAAO;AAGvB,cAAI,QAAQ,KAAK,SAAS,KAAK,QAAQ,KAAK,SAAS,KAAK,QAAQ,KAAK,SAAS,KAAK,QAAQ,KAAK,SAAS,GAAG;AAC5G,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,MAAM,SAAS,GAAG,QAAQ,CAAC;AACnC,cAAI,IAAI,MAAM,SAAS,GAAG,QAAQ,CAAC;AACnC,iBAAO,IAAI,KAAK,GAAG,GAAG,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,GAAG,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;AAAA,QAC1F;AAAA,QACA,sBAAsB,SAAUL,OAAM;AACpC,cAAI,IAAI;AACR,cAAI,YAAY,CAAC,EAAE,QAAQ,GAAG,EAAE,UAAU,GAAG,EAAE,WAAW,GAAG,EAAE,SAAS,CAAC;AACzE,cAAI,SAAS,CAAC;AACd,cAAI,YAAY,CAAC;AACjB,cAAI,IAAI;AACR,cAAI,IAAI,UAAU;AAClB,eAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AACtB,iBAAKA,MAAK,UAAU,UAAU,CAAC,CAAC;AAChC,gBAAI,OAAO,QAAQ,UAAU,QAAQ,GAAG,SAAS,CAAC,IAAI,GAAG;AACvD,qBAAO,KAAK,EAAE;AACd,wBAAU,KAAK,GAAG,SAAS,CAAC;AAAA,YAC9B;AAAA,UACF;AACA,iBAAO,OAAO,SAAS,IAAI,SAAS;AAAA,QACtC;AAAA;AAAA;AAAA;AAAA,QAIA,uCAAuC,SAAU,GAAG,OAAO;AACzD,cAAI,IAAI,MAAM,CAAC;AACf,cAAIK,UAAS,IAAI,MAAM,KAAK,IAAI,KAAK,QAAQ,GAAG,KAAK,IAAI,KAAK,SAAS,CAAC;AACxE,cAAIjC;AACJ,cAAI,OAAO;AACT,cAAE,OAAOiC,SAAQ,KAAK;AAAA,UACxB;AAGA,cAAI,QAAQ,CAAC,KAAK,QAAQ,GAAG,KAAK,UAAU,GAAG,KAAK,WAAW,GAAG,KAAK,SAAS,CAAC;AACjF,cAAI,YAAY,IAAI,KAAKA,SAAQ,CAAC;AAClC,mBAAS,IAAI,MAAM,SAAS,GAAG,KAAK,GAAG,EAAE,GAAG;AAC1C,gBAAIN,gBAAe,MAAM,CAAC,EAAE,aAAa,SAAS;AAClD,gBAAIA,kBAAiB,MAAM;AACzB,cAAA3B,UAAS2B;AACT;AAAA,YACF;AAAA,UACF;AACA,cAAI3B,WAAU,OAAO;AACnB,YAAAA,QAAO,OAAOiC,SAAQ,CAAC,KAAK;AAAA,UAC9B;AACA,iBAAOjC;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,IAAI,KAAK,KAAK,QAAQ,GAAG,KAAK,WAAW,CAAC;AAAA,QACnD;AAAA,QACA,YAAY,WAAY;AACtB,iBAAO,IAAI,MAAM,KAAK,GAAG,KAAK,IAAI,KAAK,SAAS,CAAC;AAAA,QACnD;AAAA,QACA,mBAAmB,SAAU8B,OAAM,QAAQ;AACzC,UAAAA,QAAO,IAAI,KAAKA,KAAI;AACpB,qBAAW,SAASA,MAAK,OAAO;AAChC,cAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK;AACvC,cAAI,KAAK,OAAO;AAChB,cAAI,KAAK,OAAO;AAKhB,gBAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM;AAGhD,cAAI,KAAKA,MAAK,QAAQ;AACtB,cAAI,GAAG,IAAI,IAAI;AACb,mBAAO,KAAK,IAAI,OAAO,GAAG,IAAI;AAAA,UAChC;AACA,cAAI,GAAG,IAAI,IAAI;AACb,mBAAO,KAAK,IAAI,OAAO,GAAG,IAAI;AAAA,UAChC;AAEA,cAAI,KAAKA,MAAK,YAAY;AAC1B,cAAI,GAAG,IAAI,IAAI;AACb,mBAAO,KAAK,IAAI,KAAK,QAAQ,OAAO,GAAG,IAAI;AAAA,UAC7C;AACA,cAAI,GAAG,IAAI,IAAI;AACb,mBAAO,KAAK,IAAI,KAAK,SAAS,OAAO,GAAG,IAAI;AAAA,UAC9C;AAEA,cAAI,KAAKA,MAAK,SAAS;AACvB,cAAI,GAAG,IAAI,IAAI;AACb,mBAAO,KAAK,IAAI,KAAK,QAAQ,OAAO,GAAG,IAAI;AAAA,UAC7C;AACA,cAAI,GAAG,IAAI,IAAI;AACb,mBAAO,KAAK,IAAI,OAAO,GAAG,IAAI;AAAA,UAChC;AAEA,cAAI,KAAKA,MAAK,WAAW;AACzB,cAAI,GAAG,IAAI,IAAI;AACb,mBAAO,KAAK,IAAI,OAAO,GAAG,IAAI;AAAA,UAChC;AACA,cAAI,GAAG,IAAI,IAAI;AACb,mBAAO,KAAK,IAAI,KAAK,SAAS,OAAO,GAAG,IAAI;AAAA,UAC9C;AACA,iBAAO;AAAA,YACL,IAAI,MAAM,KAAK,KAAK,KAAK,GAAG;AAAA,YAC5B,IAAI,MAAM,KAAK,KAAK,KAAK,GAAG;AAAA,UAC9B;AAAA,QACF;AAAA,QACA,0BAA0B,SAAUA,OAAM,QAAQ;AAChD,cAAIT,SAAQ,KAAK,kBAAkBS,OAAM,MAAM;AAC/C,iBAAO,MAAMT,OAAM,IAAIA,OAAM,EAAE;AAAA,QACjC;AAAA;AAAA;AAAA,QAGA,eAAe,SAAU,GAAG;AAC1B,eAAK,KAAK,EAAE,KAAK;AACjB,eAAK,KAAK,EAAE,KAAK;AACjB,eAAK,SAAS,EAAE,SAAS;AACzB,eAAK,UAAU,EAAE,UAAU;AAC3B,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,WAAW,WAAY;AACrB,cAAI,OAAO,KAAK;AAChB,cAAI,OAAO,KAAK;AAChB,cAAI,WAAW,KAAK;AACpB,cAAI,YAAY,KAAK;AACrB,cAAI,KAAK,QAAQ,GAAG;AAClB,mBAAO,KAAK,IAAI,KAAK;AACrB,uBAAW,CAAC,KAAK;AAAA,UACnB;AACA,cAAI,KAAK,SAAS,GAAG;AACnB,mBAAO,KAAK,IAAI,KAAK;AACrB,wBAAY,CAAC,KAAK;AAAA,UACpB;AACA,eAAK,IAAI;AACT,eAAK,IAAI;AACT,eAAK,QAAQ;AACb,eAAK,SAAS;AACd,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,QAAQ,SAAU,IAAI,IAAI;AAGxB,iBAAO,MAAM,UAAU,OAAO,KAAK,MAAM,IAAI,EAAE;AAAA,QACjD;AAAA,QACA,QAAQ,WAAY;AAClB,iBAAO,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC;AAAA,QACjC;AAAA;AAAA;AAAA,QAGA,qBAAqB,SAAUV,QAAO;AACpC,UAAAA,SAAQ,IAAI,MAAMA,MAAK;AACvB,cAAI,KAAK,cAAcA,MAAK,GAAG;AAC7B,gBAAI,OAAO,KAAK,mBAAmBA,MAAK;AACxC,oBAAQ,MAAM;AAAA,cACZ,KAAK;AACH,uBAAO,IAAI,MAAM,KAAK,IAAI,KAAK,OAAOA,OAAM,CAAC;AAAA,cAC/C,KAAK;AACH,uBAAO,IAAI,MAAM,KAAK,GAAGA,OAAM,CAAC;AAAA,cAClC,KAAK;AACH,uBAAO,IAAI,MAAMA,OAAM,GAAG,KAAK,IAAI,KAAK,MAAM;AAAA,cAChD,KAAK;AACH,uBAAO,IAAI,MAAMA,OAAM,GAAG,KAAK,CAAC;AAAA,YACpC;AAAA,UACF;AACA,iBAAOA,OAAM,aAAa,IAAI;AAAA,QAChC;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO,IAAI,KAAK,KAAK,SAAS,GAAG,KAAK,YAAY,CAAC;AAAA,QACrD;AAAA,QACA,aAAa,WAAY;AACvB,iBAAO,IAAI,MAAM,KAAK,IAAI,KAAK,OAAO,KAAK,IAAI,KAAK,SAAS,CAAC;AAAA,QAChE;AAAA,QACA,OAAO,SAAU,WAAW;AAC1B,cAAIW,KAAI;AACR,cAAI,WAAW;AACb,oBAAQ,WAAW;AAAA,cACjB,KAAK;AACH,gBAAAA,KAAI;AACJ;AAAA,cACF,KAAK;AACH,gBAAAA,KAAI;AACJ;AAAA,cACF,KAAK;AACH,gBAAAA,KAAI;AACJ;AAAA,cACF;AACE,gBAAAA,KAAI,MAAM,IAAI,SAAS;AACvB;AAAA,YACJ;AAAA,UACF;AACA,eAAK,IAAI,QAAQ,KAAK,IAAIA,EAAC,IAAIA;AAC/B,eAAK,IAAI,QAAQ,KAAK,IAAIA,EAAC,IAAIA;AAC/B,eAAK,QAAQ,QAAQ,KAAK,QAAQA,EAAC,IAAIA;AACvC,eAAK,SAAS,QAAQ,KAAK,SAASA,EAAC,IAAIA;AACzC,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,OAAO,SAAU,IAAI,IAAI,QAAQ;AAC/B,mBAAS,KAAK,OAAO,EAAE,MAAM,IAAI,IAAI,MAAM;AAC3C,eAAK,IAAI,OAAO;AAChB,eAAK,IAAI,OAAO;AAChB,eAAK,SAAS;AACd,eAAK,UAAU;AACf,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,oBAAoB,SAAUX,QAAO;AACnC,UAAAA,SAAQ,IAAI,MAAMA,MAAK;AACvB,cAAI,aAAaA,OAAM,IAAI,KAAK;AAChC,cAAI,cAAc,KAAK,IAAI,KAAK,QAAQA,OAAM;AAC9C,cAAI,YAAYA,OAAM,IAAI,KAAK;AAC/B,cAAI,eAAe,KAAK,IAAI,KAAK,SAASA,OAAM;AAChD,cAAI,UAAU;AACd,cAAI,OAAO;AACX,cAAI,cAAc,SAAS;AACzB,sBAAU;AACV,mBAAO;AAAA,UACT;AACA,cAAI,YAAY,SAAS;AACvB,sBAAU;AACV,mBAAO;AAAA,UACT;AACA,cAAI,eAAe,SAAS;AAE1B,mBAAO;AAAA,UACT;AACA,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,IAAI,IAAI;AAC5B,cAAI,SAAS,KAAK,OAAO,EAAE,WAAW,IAAI,EAAE;AAC5C,cAAI,SAAS,KAAK,OAAO,EAAE,WAAW,IAAI,EAAE;AAC5C,eAAK,IAAI,OAAO;AAChB,eAAK,IAAI,OAAO;AAChB,eAAK,QAAQ,OAAO,IAAI,OAAO;AAC/B,eAAK,SAAS,OAAO,IAAI,OAAO;AAChC,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,WAAY;AAClB,iBAAO;AAAA,YACL,GAAG,KAAK;AAAA,YACR,GAAG,KAAK;AAAA,YACR,OAAO,KAAK;AAAA,YACZ,QAAQ,KAAK;AAAA,UACf;AAAA,QACF;AAAA,QACA,SAAS,WAAY;AACnB,iBAAO,IAAI,KAAK,KAAK,QAAQ,GAAG,KAAK,SAAS,CAAC;AAAA,QACjD;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO,IAAI,MAAM,KAAK,IAAI,KAAK,QAAQ,GAAG,KAAK,CAAC;AAAA,QAClD;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,IAAI,MAAM,KAAK,IAAI,KAAK,OAAO,KAAK,CAAC;AAAA,QAC9C;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,OAAO,EAAE,SAAS,IAAI,MAAM,KAAK,OAAO,EAAE,SAAS;AAAA,QACjE;AAAA;AAAA,QAEA,OAAO,SAAUmB,OAAM;AACrB,iBAAO,KAAK,cAAc,MAAMA,KAAI;AAAA,QACtC;AAAA,QACA,QAAQ,SAAU,GAAG,GAAG,GAAG,GAAG;AAC5B,cAAI,OAAO,CAAC,MAAM,GAAG;AACnB,gBAAI,EAAE;AACN,gBAAI,EAAE;AACN,gBAAI,EAAE;AACN,gBAAI,EAAE;AAAA,UACR;AACA,eAAK,IAAI,KAAK;AACd,eAAK,IAAI,KAAK;AACd,eAAK,QAAQ,KAAK;AAClB,eAAK,SAAS,KAAK;AACnB,iBAAO;AAAA,QACT;AAAA,MACF;AACA,WAAK,UAAU,cAAc,KAAK,UAAU;AAC5C,WAAK,UAAU,UAAU,KAAK,UAAU;AACxC,WAAK,UAAU,YAAY,KAAK,UAAU;AAG1C,UAAI,OAAO;AACX,eAAS,YAAY,WAAW;AAE9B,YAAI,gBAAgB,UAAU,KAAK;AACnC,YAAI,kBAAkB,IAAI;AACxB,iBAAO,CAAC;AAAA,QACV;AACA,YAAI,SAAS,CAAC;AAMd,YAAI,SAAS,cAAc,MAAM,oBAAoB;AACrD,YAAI,YAAY,OAAO;AACvB,iBAAS,IAAI,GAAG,IAAI,WAAW,KAAK,GAAG;AAKrC,iBAAO,KAAK;AAAA,YACV,GAAG,CAAC,OAAO,CAAC;AAAA,YACZ,GAAG,CAAC,OAAO,IAAI,CAAC;AAAA,UAClB,CAAC;AAAA,QACH;AACA,eAAO;AAAA,MACT;AACA,eAAS,YAAY,QAAQ;AAC3B,YAAI,YAAY,OAAO;AACvB,YAAI,cAAc,GAAG;AACnB,iBAAO,CAAC;AAAA,QACV;AACA,YAAI,YAAY,CAAC;AACjB,iBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,cAAInB,SAAQ,OAAO,CAAC,EAAE,MAAM;AAC5B,oBAAU,KAAKA,MAAK;AAAA,QACtB;AACA,eAAO;AAAA,MACT;AAMA,eAAS,WAAW,QAAQ;AAC1B,YAAIuB,OAAM,KAAK;AACf,YAAI;AACJ,YAAI;AACJ,YAAI,YAAY,OAAO;AACvB,YAAI,cAAc,GAAG;AACnB,iBAAO,CAAC;AAAA,QACV;AAGA,YAAI;AACJ,aAAK,IAAI,GAAG,IAAI,WAAW,KAAK;AAC9B,cAAI,eAAe,QAAW;AAE5B,yBAAa,OAAO,CAAC;AAAA,UACvB,WAAW,OAAO,CAAC,EAAE,IAAI,WAAW,GAAG;AAErC,yBAAa,OAAO,CAAC;AAAA,UACvB,WAAW,OAAO,CAAC,EAAE,MAAM,WAAW,KAAK,OAAO,CAAC,EAAE,IAAI,WAAW,GAAG;AAIrE,yBAAa,OAAO,CAAC;AAAA,UACvB;AAAA,QACF;AAMA,YAAI,qBAAqB,CAAC;AAC1B,aAAK,IAAI,GAAG,IAAI,WAAW,KAAK;AAC9B,cAAI,QAAQ,WAAW,MAAM,OAAO,CAAC,CAAC;AACtC,cAAI,UAAU,GAAG;AACf,oBAAQ;AAAA,UAGV;AACA,cAAI,QAAQ,CAAC,OAAO,CAAC,GAAG,GAAG,KAAK;AAChC,6BAAmB,KAAK,KAAK;AAAA,QAC/B;AAGA,2BAAmB,KAAK,SAAU,SAAS,SAAS;AAIlD,cAAI,aAAa,QAAQ,CAAC,IAAI,QAAQ,CAAC;AACvC,cAAI,eAAe,GAAG;AAEpB,yBAAa,QAAQ,CAAC,IAAI,QAAQ,CAAC;AAAA,UAGrC;AACA,iBAAO;AAAA,QACT,CAAC;AAGD,YAAI,mBAAmB,SAAS,GAAG;AACjC,cAAI,mBAAmB,mBAAmB,mBAAmB,SAAS,CAAC;AACvE,6BAAmB,QAAQ,gBAAgB;AAAA,QAC7C;AAIA,YAAI,eAAe,CAAC;AACpB,YAAI,mBAAmB,CAAC;AAExB,YAAI;AACJ,YAAI;AACJ,YAAI;AACJ,YAAI;AACJ,YAAI;AACJ,YAAI;AACJ,eAAO,mBAAmB,WAAW,GAAG;AACtC,+BAAqB,mBAAmB,IAAI;AAC5C,yBAAe,mBAAmB,CAAC;AAInC,cAAI,aAAa,eAAe,mBAAmB,CAAC,IAAI,OAAO,mBAAmB,CAAC,CAAC,GAAG;AAGrF;AAAA,UACF;AACA,cAAI,mBAAmB;AACvB,iBAAO,CAAC,kBAAkB;AACxB,gBAAI,iBAAiB,SAAS,GAAG;AAE/B,+BAAiB,KAAK,kBAAkB;AACxC,iCAAmB;AAAA,YACrB,OAAO;AACL,oCAAsB,iBAAiB,IAAI;AAC3C,8BAAgB,oBAAoB,CAAC;AACrC,0CAA4B,iBAAiB,IAAI;AACjD,oCAAsB,0BAA0B,CAAC;AACjD,kBAAI,eAAe,oBAAoB,MAAM,eAAe,YAAY;AACxE,kBAAI,eAAe,GAAG;AAEpB,iCAAiB,KAAK,yBAAyB;AAC/C,iCAAiB,KAAK,mBAAmB;AACzC,iCAAiB,KAAK,kBAAkB;AACxC,mCAAmB;AAAA,cACrB,WAAW,iBAAiB,GAAG;AAK7B,oBAAI,YAAY;AAChB,oBAAI,eAAe,cAAc,aAAa,qBAAqB,YAAY;AAC/E,oBAAIA,KAAI,eAAe,GAAG,IAAI,WAAW;AAKvC,+BAAa,oBAAoB,CAAC,IAAI,OAAO,oBAAoB,CAAC,CAAC,IAAI;AAEvE,mCAAiB,KAAK,yBAAyB;AAAA,gBAGjD,WAAW,cAAc,OAAO,YAAY,KAAK,oBAAoB,OAAO,aAAa,GAAG;AAI1F,+BAAa,oBAAoB,CAAC,IAAI,OAAO,oBAAoB,CAAC,CAAC,IAAI;AAEvE,mCAAiB,KAAK,yBAAyB;AAAA,gBAGjD,WAAWA,MAAK,eAAe,KAAK,MAAM,CAAC,IAAI,WAAW;AAKxD,mCAAiB,KAAK,yBAAyB;AAE/C,qCAAmB,KAAK,mBAAmB;AAAA,gBAG7C;AAAA,cACF,OAAO;AAIL,6BAAa,oBAAoB,CAAC,IAAI,OAAO,oBAAoB,CAAC,CAAC,IAAI;AAEvE,iCAAiB,KAAK,yBAAyB;AAAA,cAGjD;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAKA,YAAI,iBAAiB,SAAS,GAAG;AAC/B,2BAAiB,IAAI;AAAA,QACvB;AAGA,YAAI;AACJ,YAAI,+BAA+B;AACnC,YAAI,iBAAiB;AACrB,aAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AACtB,cAAI,mBAAmB,iBAAiB,CAAC,EAAE,CAAC;AAC5C,cAAI,oBAAoB,UAAa,mBAAmB,iBAAiB;AACvE,8BAAkB;AAClB,2CAA+B;AAAA,UACjC;AAAA,QACF;AACA,YAAI,4BAA4B,CAAC;AACjC,YAAI,+BAA+B,GAAG;AACpC,cAAI,gBAAgB,iBAAiB,MAAM,4BAA4B;AACvE,cAAI,iBAAiB,iBAAiB,MAAM,GAAG,4BAA4B;AAC3E,sCAA4B,cAAc,OAAO,cAAc;AAAA,QACjE,OAAO;AACL,sCAA4B;AAAA,QAC9B;AACA,YAAI,aAAa,CAAC;AAClB,YAAI,0BAA0B;AAC9B,aAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AACtB,qBAAW,KAAK,0BAA0B,CAAC,EAAE,CAAC,CAAC;AAAA,QACjD;AACA,eAAO;AAAA,MACT;AACA,UAAI,WAAW,SAAU,QAAQ;AAC/B,YAAI,EAAE,gBAAgB,WAAW;AAC/B,iBAAO,IAAI,SAAS,MAAM;AAAA,QAC5B;AACA,YAAI,OAAO,WAAW,UAAU;AAC9B,iBAAO,IAAI,SAAS,MAAM,MAAM;AAAA,QAClC;AACA,aAAK,SAAS,MAAM,QAAQ,MAAM,IAAI,OAAO,IAAI,KAAK,IAAI,CAAC;AAAA,MAC7D;AACA,eAAS,QAAQ,SAAU,WAAW;AACpC,eAAO,IAAI,SAAS,YAAY,SAAS,CAAC;AAAA,MAC5C;AACA,eAAS,WAAW,SAAUJ,OAAM;AAClC,eAAO,IAAI,SAAS,CAACA,MAAK,QAAQ,GAAGA,MAAK,SAAS,GAAGA,MAAK,YAAY,GAAGA,MAAK,WAAW,GAAGA,MAAK,QAAQ,CAAC,CAAC;AAAA,MAC9G;AACA,eAAS,YAAY;AAAA,QACnB,MAAM,MAAM;AAAA,QACZ,MAAM,WAAY;AAChB,cAAI,KAAK;AACT,cAAI,KAAK;AACT,cAAI,KAAK;AACT,cAAI,KAAK;AACT,cAAI,SAAS,KAAK;AAClB,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAEA,mBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,gBAAInB,SAAQ,OAAO,CAAC;AACpB,gBAAI,IAAIA,OAAM;AACd,gBAAI,IAAIA,OAAM;AACd,gBAAI,IAAI,IAAI;AACV,mBAAK;AAAA,YACP;AACA,gBAAI,IAAI,IAAI;AACV,mBAAK;AAAA,YACP;AACA,gBAAI,IAAI,IAAI;AACV,mBAAK;AAAA,YACP;AACA,gBAAI,IAAI,IAAI;AACV,mBAAK;AAAA,YACP;AAAA,UACF;AACA,iBAAO,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,EAAE;AAAA,QAC1C;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO,IAAI,SAAS,YAAY,KAAK,MAAM,CAAC;AAAA,QAC9C;AAAA,QACA,cAAc,SAAU,GAAG;AACzB,cAAI,WAAW,KAAK,mBAAmB,CAAC;AACxC,iBAAO,KAAK,cAAc,QAAQ;AAAA,QACpC;AAAA,QACA,oBAAoB,SAAU,GAAG;AAC/B,cAAI,SAAS,KAAK,aAAa;AAC/B,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AACA,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAEA,cAAI;AACJ,cAAI,iBAAiB;AACrB,cAAIZ,UAAS;AACb,cAAI,IAAI,YAAY;AACpB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAI6B,QAAO,IAAI,KAAK,OAAO,CAAC,GAAG,OAAO,IAAI,CAAC,CAAC;AAC5C,gBAAI,aAAaA,MAAK,OAAO;AAC7B,gBAAI,qBAAqBA,MAAK,6BAA6B,CAAC;AAC5D,gBAAI,KAAKA,MAAK,QAAQ,kBAAkB;AACxC,gBAAI,cAAc,GAAG,gBAAgB,CAAC;AACtC,gBAAI,cAAc,gBAAgB;AAChC,+BAAiB;AACjB,yBAAW7B,UAAS,qBAAqB;AAAA,YAC3C;AACA,YAAAA,WAAU;AAAA,UACZ;AACA,iBAAO;AAAA,QACT;AAAA,QACA,8BAA8B,SAAU,GAAG;AACzC,cAAI,WAAW,KAAK,mBAAmB,CAAC;AACxC,cAAI,aAAa,GAAG;AAClB,mBAAO;AAAA,UACT;AAEA,cAAIA,UAAS,KAAK,OAAO;AACzB,cAAIA,YAAW,GAAG;AAChB,mBAAO;AAAA,UACT;AAEA,iBAAO,WAAWA;AAAA,QACpB;AAAA,QACA,qBAAqB,SAAU,GAAG;AAChC,cAAI,WAAW,KAAK,mBAAmB,CAAC;AACxC,iBAAO,KAAK,gBAAgB,QAAQ;AAAA,QACtC;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,eAAe,SAAU,GAAG;AAC1B,cAAI,SAAS,KAAK;AAClB,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAEA,cAAI,IAAI,EAAE;AACV,cAAI,IAAI,EAAE;AAGV,cAAI,aAAa,YAAY;AAC7B,cAAI,WAAW;AACf,cAAI,mBAAmB;AACvB,cAAI,UAAU,IAAI,KAAK;AACvB,cAAI,MAAM,IAAI,KAAK;AACnB,cAAI,SAAS,IAAI,MAAM;AACvB,iBAAO,WAAW,WAAW,YAAY;AACvC,gBAAI,QAAQ,OAAO,UAAU;AAC7B,gBAAI,MAAM,OAAO,QAAQ;AACzB,gBAAI,EAAE,OAAO,KAAK,GAAG;AACnB,qBAAO;AAAA,YACT;AAEA,oBAAQ,QAAQ;AAChB,oBAAQ,MAAM;AACd,gBAAI,QAAQ,cAAc,CAAC,GAAG;AAC5B,qBAAO;AAAA,YACT;AAGA,gBAAI,KAAK,MAAM,KAAK,IAAI,IAAI,KAAK,IAAI,MAAM,KAAK,KAAK,IAAI,GAAG;AAO1D,kBAAI,cAAc,MAAM,IAAI,IAAI,IAAI,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,IAAI;AAClE,kBAAI,eAAe,GAAG;AAEpB,uBAAO,IAAI,IAAI;AACf,uBAAO,IAAI;AACX,oBAAI,QAAQ;AACZ,oBAAI,MAAM;AACV,oBAAI,QAAQ,UAAU,GAAG,GAAG;AAE1B;AAAA,gBACF;AAAA,cACF;AAAA,YACF;AAGA,yBAAa;AAAA,UACf;AAGA,iBAAO,mBAAmB,MAAM;AAAA,QAClC;AAAA,QACA,OAAO,WAAY;AACjB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,MAAM,IAAI;AACd,cAAI,SAAS,IAAI;AACjB,cAAI,SAAS,OAAO,CAAC,MAAM,OAAO,GAAG,GAAG;AACtC,mBAAO,KAAK,MAAM,MAAM,CAAC;AAAA,UAC3B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,WAAY;AACxB,iBAAO,KAAK;AAAA,QACd;AAAA,QACA,YAAY,WAAY;AACtB,iBAAO,IAAI,SAAS,WAAW,KAAK,MAAM,CAAC;AAAA,QAC7C;AAAA;AAAA;AAAA,QAGA,QAAQ,SAAU,GAAG;AACnB,cAAI,CAAC,GAAG;AACN,mBAAO;AAAA,UACT;AACA,cAAI,SAAS,KAAK;AAClB,cAAI,cAAc,EAAE;AACpB,cAAI,YAAY,OAAO;AACvB,cAAI,YAAY,WAAW,WAAW;AACpC,mBAAO;AAAA,UACT;AAEA,mBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,gBAAIY,SAAQ,OAAO,CAAC;AACpB,gBAAI,aAAa,EAAE,OAAO,CAAC;AAG3B,gBAAI,CAACA,OAAM,OAAO,UAAU,GAAG;AAC7B,qBAAO;AAAA,YACT;AAAA,UACF;AAGA,iBAAO;AAAA,QACT;AAAA,QACA,sBAAsB,SAAU,GAAG;AACjC,cAAIiB,QAAO,IAAI,KAAK,CAAC;AACrB,cAAI,gBAAgB,CAAC;AACrB,cAAI,SAAS,KAAK,aAAa;AAC/B,cAAI,KAAK,IAAI,KAAK;AAClB,mBAAS,IAAI,GAAG,IAAI,OAAO,SAAS,GAAG,IAAI,GAAG,KAAK;AACjD,eAAG,QAAQ,OAAO,CAAC;AACnB,eAAG,MAAM,OAAO,IAAI,CAAC;AACrB,gBAAI,MAAMA,MAAK,qBAAqB,EAAE;AACtC,gBAAI,KAAK;AACP,4BAAc,KAAK,IAAI,CAAC,CAAC;AAAA,YAC3B;AAAA,UACF;AACA,iBAAO,cAAc,SAAS,IAAI,gBAAgB;AAAA,QACpD;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,SAAS,KAAK;AAClB,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AACA,cAAIA,QAAO,IAAI,KAAK;AACpB,cAAI,IAAI,YAAY;AACpB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,YAAAA,MAAK,QAAQ,OAAO,CAAC;AACrB,YAAAA,MAAK,MAAM,OAAO,IAAI,CAAC;AAEvB,gBAAIA,MAAK,iBAAiB,GAAG;AAC3B,qBAAO;AAAA,YACT;AAAA,UACF;AAGA,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,WAAY;AAClB,cAAI,SAAS,KAAK,aAAa;AAC/B,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAEA,cAAI7B,UAAS;AACb,cAAI,IAAI,YAAY;AACpB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,YAAAA,WAAU,OAAO,CAAC,EAAE,SAAS,OAAO,IAAI,CAAC,CAAC;AAAA,UAC5C;AACA,iBAAOA;AAAA,QACT;AAAA,QACA,SAAS,SAAU,OAAO;AACxB,cAAI,SAAS,KAAK,aAAa;AAC/B,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AACA,cAAI,cAAc,GAAG;AACnB,mBAAO,OAAO,CAAC,EAAE,MAAM;AAAA,UACzB;AAEA,cAAI,SAAS,GAAG;AACd,mBAAO,OAAO,CAAC,EAAE,MAAM;AAAA,UACzB;AACA,cAAI,SAAS,GAAG;AACd,mBAAO,OAAO,YAAY,CAAC,EAAE,MAAM;AAAA,UACrC;AACA,cAAI,iBAAiB,KAAK,OAAO;AACjC,cAAIA,UAAS,iBAAiB;AAC9B,iBAAO,KAAK,cAAcA,OAAM;AAAA,QAClC;AAAA,QACA,eAAe,SAAUA,SAAQ;AAC/B,cAAI,SAAS,KAAK,aAAa;AAC/B,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AACA,cAAI,cAAc,GAAG;AACnB,mBAAO,OAAO,CAAC,EAAE,MAAM;AAAA,UACzB;AAEA,cAAI,YAAY;AAChB,cAAIA,UAAS,GAAG;AACd,wBAAY;AACZ,YAAAA,UAAS,CAACA;AAAA,UACZ;AACA,cAAI,IAAI;AACR,cAAI,IAAI,YAAY;AACpB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAID,SAAQ,YAAY,IAAI,IAAI,IAAI;AACpC,gBAAI,IAAI,OAAOA,MAAK;AACpB,gBAAI,IAAI,OAAOA,SAAQ,CAAC;AACxB,gBAAI8B,QAAO,IAAI,KAAK,GAAG,CAAC;AACxB,gBAAI,IAAI,EAAE,SAAS,CAAC;AACpB,gBAAI7B,WAAU,IAAI,GAAG;AACnB,qBAAO6B,MAAK,eAAe,YAAY,IAAI,OAAO7B,UAAS,EAAE;AAAA,YAC/D;AACA,iBAAK;AAAA,UACP;AAGA,cAAI,YAAY,YAAY,OAAO,YAAY,CAAC,IAAI,OAAO,CAAC;AAC5D,iBAAO,UAAU,MAAM;AAAA,QACzB;AAAA,QACA,OAAO,SAAU,WAAW;AAC1B,cAAI,SAAS,KAAK;AAClB,cAAI,YAAY,OAAO;AACvB,mBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,mBAAO,CAAC,EAAE,MAAM,SAAS;AAAA,UAC3B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,QAAQ;AAC/B,cAAI,SAAS,KAAK;AAClB,cAAI,YAAY,OAAO;AACvB,mBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,mBAAO,CAAC,EAAE,MAAM,IAAI,IAAI,MAAM;AAAA,UAChC;AACA,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,SAAS,KAAK;AAClB,cAAI,OAAO,SAAS,GAAG;AACrB,mBAAO;AAAA,UACT;AAMA,cAAI,YAAY,IAAI,aAAa;AAGjC,cAAI,eAAe;AAGnB,iBAAO,OAAO,eAAe,CAAC,GAAG;AAC/B,gBAAI,aAAa;AACjB,gBAAI,cAAc,eAAe;AACjC,gBAAI,YAAY,eAAe;AAC/B,gBAAI,aAAa,OAAO,UAAU;AAClC,gBAAI,cAAc,OAAO,WAAW;AACpC,gBAAI,YAAY,OAAO,SAAS;AAChC,gBAAI,QAAQ,IAAI,KAAK,YAAY,SAAS;AAC1C,gBAAI,eAAe,MAAM,aAAa,WAAW;AACjD,gBAAI,uBAAuB,aAAa,SAAS,WAAW;AAC5D,gBAAI,wBAAwB,WAAW;AAGrC,qBAAO,OAAO,aAAa,CAAC;AAAA,YAI9B,OAAO;AAIL,8BAAgB;AAAA,YAElB;AAAA,UACF;AAGA,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,OAAO;AAC1B,cAAI,SAAS,KAAK,aAAa;AAC/B,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AACA,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAEA,cAAI,QAAQ,GAAG;AACb,oBAAQ;AAAA,UACV;AACA,cAAI,QAAQ,GAAG;AACb,oBAAQ;AAAA,UACV;AACA,cAAI,iBAAiB,KAAK,OAAO;AACjC,cAAIA,UAAS,iBAAiB;AAC9B,iBAAO,KAAK,gBAAgBA,OAAM;AAAA,QACpC;AAAA,QACA,iBAAiB,SAAUA,SAAQ;AACjC,cAAI,SAAS,KAAK,aAAa;AAC/B,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AACA,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAEA,cAAI,YAAY;AAChB,cAAIA,UAAS,GAAG;AACd,wBAAY;AACZ,YAAAA,UAAS,CAACA;AAAA,UACZ;AACA,cAAI;AACJ,cAAI,IAAI;AACR,cAAI,IAAI,YAAY;AACpB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAID,SAAQ,YAAY,IAAI,IAAI,IAAI;AACpC,gBAAI,IAAI,OAAOA,MAAK;AACpB,gBAAI,IAAI,OAAOA,SAAQ,CAAC;AACxB,gBAAI8B,QAAO,IAAI,KAAK,GAAG,CAAC;AACxB,gBAAI,IAAI,EAAE,SAAS,CAAC;AACpB,gBAAIA,MAAK,iBAAiB,GAAG;AAE3B,kBAAI7B,WAAU,IAAI,GAAG;AACnB,uBAAO6B,MAAK,iBAAiB,YAAY,IAAI,OAAO7B,UAAS,EAAE;AAAA,cACjE;AACA,8BAAgB6B;AAAA,YAClB;AACA,iBAAK;AAAA,UACP;AAGA,cAAI,eAAe;AACjB,gBAAI,QAAQ,YAAY,IAAI;AAC5B,mBAAO,cAAc,UAAU,KAAK;AAAA,UACtC;AAGA,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,SAAS;AAAA,QACvB;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAC3B,cAAI,SAAS,KAAK;AAClB,cAAI,YAAY,OAAO;AACvB,mBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,mBAAO,CAAC,EAAE,UAAU,IAAI,EAAE;AAAA,UAC5B;AACA,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,WAAW,WAAY;AACrB,cAAI,SAAS,KAAK;AAClB,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAEA,cAAI,SAAS;AACb,mBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,gBAAIjB,SAAQ,OAAO,CAAC;AACpB,sBAAUA,OAAM,IAAI,MAAMA,OAAM,IAAI;AAAA,UACtC;AACA,iBAAO,OAAO,KAAK;AAAA,QACrB;AAAA,MACF;AACA,aAAO,eAAe,SAAS,WAAW,SAAS;AAAA;AAAA,QAGjD,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,cAAI,SAAS,KAAK;AAClB,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAEA,iBAAO,KAAK,OAAO,CAAC;AAAA,QACtB;AAAA,MACF,CAAC;AACD,aAAO,eAAe,SAAS,WAAW,OAAO;AAAA;AAAA,QAG/C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,cAAI,SAAS,KAAK;AAClB,cAAI,YAAY,OAAO;AACvB,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAEA,iBAAO,KAAK,OAAO,YAAY,CAAC;AAAA,QAClC;AAAA,MACF,CAAC;AACD,UAAI,QAAQ,KAAK;AACjB,UAAI,SAAS,KAAK;AAClB,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,KAAK;AACjB,UAAI,QAAQ,SAAU,IAAI,IAAI,IAAI,IAAI;AACpC,YAAI,EAAE,gBAAgB,QAAQ;AAC5B,iBAAO,IAAI,MAAM,IAAI,IAAI,IAAI,EAAE;AAAA,QACjC;AACA,YAAI,cAAc,OAAO;AACvB,iBAAO,IAAI,MAAM,GAAG,OAAO,GAAG,eAAe,GAAG,eAAe,GAAG,GAAG;AAAA,QACvE;AACA,aAAK,QAAQ,IAAI,MAAM,EAAE;AACzB,aAAK,gBAAgB,IAAI,MAAM,EAAE;AACjC,aAAK,gBAAgB,IAAI,MAAM,EAAE;AACjC,aAAK,MAAM,IAAI,MAAM,EAAE;AAAA,MACzB;AAMA,YAAM,gBAAgB,2BAAY;AAKhC,iBAAS,sBAAsB,OAAO;AACpC,cAAI,qBAAqB,CAAC;AAC1B,cAAI,sBAAsB,CAAC;AAC3B,cAAI,IAAI,MAAM,SAAS;AACvB,cAAI;AAGJ,cAAI,KAAK,GAAG;AAEV,+BAAmB,CAAC,IAAI,IAAI,OAAO,IAAI,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,KAAK,IAAI,IAAI,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,KAAK,CAAC;AAGtG,gCAAoB,CAAC,IAAI,IAAI,MAAM,IAAI,mBAAmB,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,GAAG,IAAI,mBAAmB,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC;AACrH,mBAAO,CAAC,oBAAoB,mBAAmB;AAAA,UACjD;AAIA,cAAI,MAAM,CAAC;AAGX,eAAK,IAAI,GAAG,IAAI,IAAI,GAAG,KAAK;AAC1B,gBAAI,CAAC,IAAI,IAAI,MAAM,CAAC,EAAE,IAAI,IAAI,MAAM,IAAI,CAAC,EAAE;AAAA,UAC7C;AACA,cAAI,CAAC,IAAI,MAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC,EAAE;AACnC,cAAI,IAAI,CAAC,KAAK,IAAI,MAAM,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,KAAK;AAGjD,cAAI,IAAI,sBAAsB,GAAG;AAGjC,eAAK,IAAI,GAAG,IAAI,IAAI,GAAG,EAAE,GAAG;AAC1B,gBAAI,CAAC,IAAI,IAAI,MAAM,CAAC,EAAE,IAAI,IAAI,MAAM,IAAI,CAAC,EAAE;AAAA,UAC7C;AACA,cAAI,CAAC,IAAI,MAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC,EAAE;AACnC,cAAI,IAAI,CAAC,KAAK,IAAI,MAAM,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,KAAK;AAGjD,cAAI,IAAI,sBAAsB,GAAG;AAGjC,eAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AAEtB,+BAAmB,KAAK,IAAI,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AAG7C,gBAAI,IAAI,IAAI,GAAG;AACb,kCAAoB,KAAK,IAAI,MAAM,IAAI,MAAM,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,IAAI,MAAM,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;AAAA,YAClG,OAAO;AACL,kCAAoB,KAAK,IAAI,OAAO,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;AAAA,YAC9F;AAAA,UACF;AACA,iBAAO,CAAC,oBAAoB,mBAAmB;AAAA,QACjD;AAKA,iBAAS,sBAAsB,KAAK;AAClC,cAAI,IAAI,IAAI;AAEZ,cAAI,IAAI,CAAC;AACT,cAAI,MAAM,CAAC;AACX,cAAI,IAAI;AACR,YAAE,CAAC,IAAI,IAAI,CAAC,IAAI;AAGhB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAI,CAAC,IAAI,IAAI;AACb,iBAAK,IAAI,IAAI,IAAI,IAAM,OAAO,IAAI,CAAC;AACnC,cAAE,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK;AAAA,UAC/B;AACA,eAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AAEtB,cAAE,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;AAAA,UACtC;AACA,iBAAO;AAAA,QACT;AACA,eAAO,SAAU,QAAQ;AACvB,cAAI,CAAC,UAAU,MAAM,QAAQ,MAAM,KAAK,OAAO,SAAS,GAAG;AACzD,kBAAM,IAAI,MAAM,gCAAgC;AAAA,UAClD;AACA,cAAI,gBAAgB,sBAAsB,MAAM;AAChD,cAAI,SAAS,CAAC;AACd,cAAI,IAAI,cAAc,CAAC,EAAE;AACzB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAI,gBAAgB,IAAI,MAAM,cAAc,CAAC,EAAE,CAAC,EAAE,GAAG,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC;AAC1E,gBAAI,gBAAgB,IAAI,MAAM,cAAc,CAAC,EAAE,CAAC,EAAE,GAAG,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC;AAC1E,mBAAO,KAAK,IAAI,MAAM,OAAO,CAAC,GAAG,eAAe,eAAe,OAAO,IAAI,CAAC,CAAC,CAAC;AAAA,UAC/E;AACA,iBAAO;AAAA,QACT;AAAA,MACF,EAAE;AACF,YAAM,YAAY;AAAA,QAChB,MAAM,MAAM;AAAA;AAAA,QAEZ,MAAM,WAAY;AAChB,cAAI,QAAQ,KAAK;AACjB,cAAI,gBAAgB,KAAK;AACzB,cAAI,gBAAgB,KAAK;AACzB,cAAI,MAAM,KAAK;AACf,cAAI,KAAK,MAAM;AACf,cAAI,KAAK,MAAM;AACf,cAAI,KAAK,cAAc;AACvB,cAAI,KAAK,cAAc;AACvB,cAAI,KAAK,cAAc;AACvB,cAAI,KAAK,cAAc;AACvB,cAAI,KAAK,IAAI;AACb,cAAI,KAAK,IAAI;AACb,cAAI,SAAS,IAAI,MAAM;AACvB,cAAI,UAAU,IAAI,MAAM;AACxB,cAAI,SAAS,CAAC,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACtC,cAAI,GAAG,GAAG,GAAG;AACb,cAAI,IAAI;AACR,cAAI,MAAM;AACV,mBAAS,IAAI,GAAG,IAAI,GAAG,EAAE,GAAG;AAC1B,gBAAI,MAAM,GAAG;AACX,kBAAI,IAAI,KAAK,KAAK,KAAK,IAAI;AAC3B,kBAAI,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI;AACpC,kBAAI,IAAI,KAAK,IAAI;AAAA,YACnB,OAAO;AACL,kBAAI,IAAI,KAAK,KAAK,KAAK,IAAI;AAC3B,kBAAI,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI;AACpC,kBAAI,IAAI,KAAK,IAAI;AAAA,YACnB;AACA,gBAAI,MAAM,CAAC,IAAI,OAAO;AAEpB,kBAAI,MAAM,CAAC,IAAI,OAAO;AAEpB;AAAA,cACF;AACA,kBAAI,CAAC,IAAI;AACT,kBAAI,IAAI,KAAK,IAAI,GAAG;AAClB,wBAAQ,KAAK,CAAC;AAAA,cAChB;AACA;AAAA,YACF;AACA,mBAAO,IAAI,IAAI,IAAI,IAAI;AACvB,uBAAW,OAAO,IAAI;AACtB,gBAAI,OAAO,GAAG;AACZ;AAAA,YACF;AACA,kBAAM,CAAC,IAAI,aAAa,IAAI;AAC5B,gBAAI,IAAI,MAAM,KAAK,GAAG;AACpB,sBAAQ,KAAK,EAAE;AAAA,YACjB;AACA,kBAAM,CAAC,IAAI,aAAa,IAAI;AAC5B,gBAAI,IAAI,MAAM,KAAK,GAAG;AACpB,sBAAQ,KAAK,EAAE;AAAA,YACjB;AAAA,UACF;AACA,cAAI,IAAI,QAAQ;AAChB,cAAI,OAAO;AACX,cAAI;AACJ,cAAI,GAAG;AACP,iBAAO,KAAK;AACV,gBAAI,QAAQ,CAAC;AACb,iBAAK,IAAI;AACT,gBAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI;AACjF,mBAAO,CAAC,EAAE,CAAC,IAAI;AACf,gBAAI,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI;AACjF,mBAAO,CAAC,EAAE,CAAC,IAAI;AACf,mBAAO,CAAC,IAAI;AAAA,cACV,GAAG;AAAA,cACH,GAAG;AAAA,YACL;AAAA,UACF;AACA,kBAAQ,IAAI,IAAI;AAChB,kBAAQ,OAAO,CAAC,IAAI;AACpB,iBAAO,IAAI,IAAI;AAAA,YACb,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AACA,iBAAO,OAAO,CAAC,IAAI;AAAA,YACjB,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AACA,iBAAO,CAAC,EAAE,IAAI,IAAI;AAClB,iBAAO,CAAC,EAAE,IAAI,IAAI;AAClB,iBAAO,CAAC,EAAE,OAAO,CAAC,IAAI;AACtB,iBAAO,CAAC,EAAE,OAAO,CAAC,IAAI;AACtB,kBAAQ,SAAS,OAAO;AACxB,iBAAO,CAAC,EAAE,SAAS,OAAO;AAC1B,iBAAO,CAAC,EAAE,SAAS,OAAO;AAC1B,iBAAO,SAAS,OAAO;AACvB,cAAIY,QAAO,MAAM,MAAM,MAAM,OAAO,CAAC,CAAC;AACtC,cAAIC,OAAM,MAAM,MAAM,MAAM,OAAO,CAAC,CAAC;AACrC,cAAIC,SAAQ,MAAM,MAAM,MAAM,OAAO,CAAC,CAAC;AACvC,cAAIC,UAAS,MAAM,MAAM,MAAM,OAAO,CAAC,CAAC;AACxC,iBAAO,IAAI,KAAKH,OAAMC,MAAKC,SAAQF,OAAMG,UAASF,IAAG;AAAA,QACvD;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO,IAAI,MAAM,KAAK,OAAO,KAAK,eAAe,KAAK,eAAe,KAAK,GAAG;AAAA,QAC/E;AAAA;AAAA,QAEA,cAAc,SAAU,GAAG,KAAK;AAC9B,iBAAO,KAAK,SAAS,KAAK,cAAc,GAAG,GAAG,CAAC;AAAA,QACjD;AAAA,QACA,oBAAoB,SAAU,GAAG,KAAK;AACpC,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,eAAe,IAAI,iBAAiB,SAAY,KAAK,gBAAgB;AAAA,YACvE;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,iBAAO,KAAK,UAAU,KAAK,cAAc,GAAG,QAAQ,GAAG,QAAQ;AAAA,QACjE;AAAA,QACA,8BAA8B,SAAU,GAAG,KAAK;AAC9C,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,eAAe,IAAI,iBAAiB,SAAY,KAAK,gBAAgB;AAAA,YACvE;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,cAAI,WAAW,KAAK,mBAAmB,GAAG,QAAQ;AAClD,cAAI,CAAC,UAAU;AACb,mBAAO;AAAA,UACT;AACA,cAAIzB,UAAS,KAAK,OAAO,QAAQ;AACjC,cAAIA,YAAW,GAAG;AAChB,mBAAO;AAAA,UACT;AACA,iBAAO,WAAWA;AAAA,QACpB;AAAA;AAAA,QAEA,eAAe,SAAU,GAAG,KAAK;AAC/B,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,eAAe,IAAI,iBAAiB,SAAY,KAAK,gBAAgB;AAAA,YACvE;AAAA,UACF,CAAC,IAAI,IAAI;AAIT,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,cAAI,IAAI,aAAa;AACrB,cAAI,kBAAkB,IAAI,IAAI,IAAI;AAClC,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAI,qBAAqB,aAAa,CAAC;AACvC,gBAAI,YAAY,mBAAmB,MAAM,SAAS,CAAC;AACnD,gBAAI,UAAU,mBAAmB,IAAI,SAAS,CAAC;AAC/C,gBAAI,UAAU,YAAY;AAG1B,gBAAI,CAAC,cAAc,UAAU,YAAY;AACvC,wCAA0B;AAC1B,8CAAgC,IAAI;AACpC,6CAA+B,IAAI,KAAK;AACxC,8BAAgB;AAChB,4BAAc;AACd,4BAAc,mBAAmB,MAAM,SAAS,mBAAmB,GAAG;AACtE,2BAAa;AAAA,YACf;AAAA,UACF;AACA,cAAI,iBAAiB,MAAM,IAAI,CAAC,SAAS;AAKzC,iBAAO,MAAM;AAMX,gBAAI,sBAAsB,gBAAgB,MAAM,gBAAgB,WAAW,IAAI,gBAAgB;AAC/F,gBAAI,oBAAoB,cAAc,MAAM,gBAAgB,WAAW,IAAI,cAAc;AACzF,gBAAI,uBAAuB,sBAAsB,kBAAkB,oBAAoB;AAMvF,gBAAI,0BAA0B,gBAAgB,gBAAgB,cAAc,iBAAiB;AAC7F,gBAAI,wBAAwB,cAAc,cAAc,cAAc,iBAAiB;AACvF,gBAAI,qBAAqB,2BAA2B;AAGpD,gBAAI,wBAAwB,oBAAoB;AAC9C,qBAAO,iBAAiB,cAAc,gCAAgC;AAAA,YACxE;AAGA,gBAAI,UAAU,wBAAwB,OAAO,GAAG;AAChD,+BAAmB;AACnB,gBAAI,aAAa,QAAQ,CAAC,EAAE,MAAM,SAAS,CAAC;AAC5C,gBAAI,WAAW,QAAQ,CAAC,EAAE,IAAI,SAAS,CAAC;AACxC,gBAAI,WAAW,aAAa;AAC5B,gBAAI,aAAa,QAAQ,CAAC,EAAE,MAAM,SAAS,CAAC;AAC5C,gBAAI,WAAW,QAAQ,CAAC,EAAE,IAAI,SAAS,CAAC;AACxC,gBAAI,WAAW,aAAa;AAC5B,gBAAI,YAAY,UAAU;AACxB,wCAA0B,QAAQ,CAAC;AACnC,6CAA+B;AAE/B,8BAAgB;AAChB,4BAAc;AAAA,YAChB,OAAO;AACL,wCAA0B,QAAQ,CAAC;AACnC,+CAAiC;AAEjC,8BAAgB;AAChB,4BAAc;AAAA,YAChB;AAAA,UACF;AAAA,QACF;AAAA,QACA,qBAAqB,SAAU,GAAG,KAAK;AACrC,iBAAO,KAAK,WAAW,KAAK,cAAc,GAAG,GAAG,CAAC;AAAA,QACnD;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,eAAe,SAAU,GAAG,KAAK;AAC/B,cAAI,WAAW,KAAK,WAAW,GAAG;AAClC,iBAAO,SAAS,cAAc,CAAC;AAAA,QACjC;AAAA;AAAA;AAAA,QAGA,UAAU,SAAU,OAAO,KAAK;AAC9B,cAAI,SAAS,GAAG;AACd,mBAAO,KAAK,UAAU,CAAC;AAAA,UACzB;AACA,cAAI,SAAS,GAAG;AACd,mBAAO,KAAK,UAAU,CAAC;AAAA,UACzB;AACA,cAAI,IAAI,KAAK,IAAI,OAAO,GAAG;AAC3B,iBAAO,KAAK,UAAU,CAAC;AAAA,QACzB;AAAA;AAAA,QAEA,gBAAgB,SAAUA,SAAQ,KAAK;AACrC,cAAI,IAAI,KAAK,UAAUA,SAAQ,GAAG;AAClC,iBAAO,KAAK,UAAU,CAAC;AAAA,QACzB;AAAA;AAAA;AAAA;AAAA,QAIA,WAAW,SAAU,GAAG;AACtB,cAAI,QAAQ,KAAK;AACjB,cAAI,gBAAgB,KAAK;AACzB,cAAI,gBAAgB,KAAK;AACzB,cAAI,MAAM,KAAK;AAGf,cAAI,KAAK,GAAG;AACV,mBAAO,CAAC,IAAI,MAAM,OAAO,OAAO,OAAO,KAAK,GAAG,IAAI,MAAM,OAAO,eAAe,eAAe,GAAG,CAAC;AAAA,UACpG;AACA,cAAI,KAAK,GAAG;AACV,mBAAO,CAAC,IAAI,MAAM,OAAO,eAAe,eAAe,GAAG,GAAG,IAAI,MAAM,KAAK,KAAK,KAAK,GAAG,CAAC;AAAA,UAC5F;AACA,cAAI,gBAAgB,KAAK,kBAAkB,CAAC;AAC5C,cAAI,gBAAgB,cAAc;AAClC,cAAI,gBAAgB,cAAc;AAClC,cAAI,UAAU,cAAc;AAC5B,cAAI,kBAAkB,cAAc;AACpC,cAAI,kBAAkB,cAAc;AAGpC,iBAAO,CAAC,IAAI,MAAM,OAAO,eAAe,eAAe,OAAO,GAAG,IAAI,MAAM,SAAS,iBAAiB,iBAAiB,GAAG,CAAC;AAAA,QAC5H;AAAA;AAAA,QAEA,kBAAkB,WAAY;AAC5B,iBAAO,KAAK,MAAM,SAAS,KAAK,GAAG;AAAA,QACrC;AAAA;AAAA,QAEA,QAAQ,SAAU,GAAG;AACnB,iBAAO,CAAC,CAAC,KAAK,KAAK,MAAM,MAAM,EAAE,MAAM,KAAK,KAAK,MAAM,MAAM,EAAE,MAAM,KAAK,KAAK,cAAc,MAAM,EAAE,cAAc,KAAK,KAAK,cAAc,MAAM,EAAE,cAAc,KAAK,KAAK,cAAc,MAAM,EAAE,cAAc,KAAK,KAAK,cAAc,MAAM,EAAE,cAAc,KAAK,KAAK,IAAI,MAAM,EAAE,IAAI,KAAK,KAAK,IAAI,MAAM,EAAE,IAAI;AAAA,QACnT;AAAA;AAAA,QAEA,mBAAmB,SAAU,GAAG;AAC9B,cAAI,QAAQ,KAAK;AACjB,cAAI,WAAW,KAAK;AACpB,cAAI,WAAW,KAAK;AACpB,cAAI,MAAM,KAAK;AAGf,cAAI,KAAK,GAAG;AACV,mBAAO;AAAA,cACL,oBAAoB,MAAM,MAAM;AAAA,cAChC,oBAAoB,MAAM,MAAM;AAAA,cAChC,SAAS,MAAM,MAAM;AAAA,cACrB,sBAAsB,SAAS,MAAM;AAAA,cACrC,sBAAsB,SAAS,MAAM;AAAA,YACvC;AAAA,UACF;AACA,cAAI,KAAK,GAAG;AACV,mBAAO;AAAA,cACL,oBAAoB,SAAS,MAAM;AAAA,cACnC,oBAAoB,SAAS,MAAM;AAAA,cACnC,SAAS,IAAI,MAAM;AAAA,cACnB,sBAAsB,IAAI,MAAM;AAAA,cAChC,sBAAsB,IAAI,MAAM;AAAA,YAClC;AAAA,UACF;AACA,cAAI,YAAY,IAAI,KAAK,OAAO,QAAQ,EAAE,QAAQ,CAAC;AACnD,cAAI,YAAY,IAAI,KAAK,UAAU,QAAQ,EAAE,QAAQ,CAAC;AACtD,cAAI,YAAY,IAAI,KAAK,UAAU,GAAG,EAAE,QAAQ,CAAC;AACjD,cAAI,cAAc,IAAI,KAAK,WAAW,SAAS,EAAE,QAAQ,CAAC;AAC1D,cAAI,cAAc,IAAI,KAAK,WAAW,SAAS,EAAE,QAAQ,CAAC;AAC1D,cAAI,UAAU,IAAI,KAAK,aAAa,WAAW,EAAE,QAAQ,CAAC;AAC1D,cAAI,SAAS;AAAA,YACX,oBAAoB;AAAA,YACpB,oBAAoB;AAAA,YACpB;AAAA,YACA,sBAAsB;AAAA,YACtB,sBAAsB;AAAA,UACxB;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAWA,iBAAiB,SAAU,KAAK;AAC9B,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AAInE,cAAI,QAAQ,KAAK;AACjB,cAAI,WAAW,KAAK;AACpB,cAAI,WAAW,KAAK;AACpB,cAAI,MAAM,KAAK;AACf,cAAI,eAAe,CAAC,IAAI,MAAM,OAAO,UAAU,UAAU,GAAG,CAAC;AAC7D,cAAI,cAAc,GAAG;AACnB,mBAAO;AAAA,UACT;AAIA,cAAI,UAAU,CAAC,KAAK,iBAAiB;AACrC,cAAI,SAAS;AACX,mBAAO;AAAA,UACT;AACA,cAAI,iBAAiB,KAAK,iBAAiB;AAC3C,cAAI,iBAAiB,MAAM,IAAI,CAAC,SAAS;AAOzC,cAAI,gBAAgB;AAKpB,cAAI,SAAS,SAAS,MAAM,OAAO,GAAG,MAAM,KAAK,SAAS,MAAM,OAAO,GAAG,MAAM;AAChF,cAAI,QAAQ;AACV,4BAAgB,IAAI;AAAA,UACtB;AAKA,cAAI,YAAY;AAChB,iBAAO,MAAM;AACX,yBAAa;AAGb,gBAAI,kBAAkB,CAAC;AACvB,gBAAI,kBAAkB,aAAa;AACnC,qBAAS,IAAI,GAAG,IAAI,iBAAiB,KAAK;AACxC,kBAAI,qBAAqB,aAAa,CAAC;AACvC,kBAAI,UAAU,mBAAmB,OAAO,GAAG;AAC3C,8BAAgB,KAAK,QAAQ,CAAC,GAAG,QAAQ,CAAC,CAAC;AAAA,YAC7C;AAGA,gBAAIA,UAAS;AACb,gBAAI,qBAAqB,gBAAgB;AACzC,qBAAS,IAAI,GAAG,IAAI,oBAAoB,KAAK;AAC3C,kBAAI,wBAAwB,gBAAgB,CAAC;AAC7C,cAAAA,WAAU,sBAAsB,iBAAiB;AAAA,YACnD;AAGA,gBAAI,aAAa,eAAe;AAE9B,kBAAI,yBAAyBA,YAAW,KAAKA,UAAS,kBAAkBA,UAAS;AACjF,kBAAI,yBAAyB,gBAAgB;AAC3C,uBAAO;AAAA,cACT;AAAA,YACF;AAGA,2BAAe;AACf,6BAAiBA;AAAA,UACnB;AAAA,QACF;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,QAAQ,KAAK;AACjB,cAAI,WAAW,KAAK;AACpB,cAAI,WAAW,KAAK;AACpB,cAAI,MAAM,KAAK;AACf,iBAAO,EAAE,MAAM,OAAO,QAAQ,KAAK,SAAS,OAAO,QAAQ,KAAK,SAAS,OAAO,GAAG;AAAA,QACrF;AAAA;AAAA,QAEA,QAAQ,SAAU,KAAK;AACrB,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,eAAe,IAAI,iBAAiB,SAAY,KAAK,gBAAgB;AAAA,YACvE;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAIA,UAAS;AACb,cAAI,IAAI,aAAa;AACrB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAI,qBAAqB,aAAa,CAAC;AACvC,YAAAA,WAAU,mBAAmB,iBAAiB;AAAA,UAChD;AACA,iBAAOA;AAAA,QACT;AAAA;AAAA,QAEA,WAAW,SAAU,GAAG,KAAK;AAC3B,cAAI,KAAK,GAAG;AACV,mBAAO;AAAA,UACT;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AAInE,cAAI,WAAW,KAAK,OAAO,CAAC,EAAE,CAAC;AAC/B,cAAI,iBAAiB,SAAS,OAAO;AAAA,YACnC;AAAA,UACF,CAAC;AACD,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,SAAS,SAAU,OAAO,KAAK;AAC7B,cAAI,SAAS,GAAG;AACd,mBAAO,KAAK,MAAM,MAAM;AAAA,UAC1B;AACA,cAAI,SAAS,GAAG;AACd,mBAAO,KAAK,IAAI,MAAM;AAAA,UACxB;AACA,cAAI,IAAI,KAAK,IAAI,OAAO,GAAG;AAC3B,iBAAO,KAAK,SAAS,CAAC;AAAA,QACxB;AAAA;AAAA,QAEA,eAAe,SAAUA,SAAQ,KAAK;AACpC,cAAI,IAAI,KAAK,UAAUA,SAAQ,GAAG;AAClC,iBAAO,KAAK,SAAS,CAAC;AAAA,QACxB;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,UAAU,SAAU,GAAG;AACrB,cAAI,KAAK,GAAG;AACV,mBAAO,KAAK,MAAM,MAAM;AAAA,UAC1B;AACA,cAAI,KAAK,GAAG;AACV,mBAAO,KAAK,IAAI,MAAM;AAAA,UACxB;AACA,iBAAO,KAAK,kBAAkB,CAAC,EAAE;AAAA,QACnC;AAAA;AAAA,QAEA,WAAW;AAAA,QACX,OAAO,SAAU,WAAW;AAC1B,eAAK,MAAM,MAAM,SAAS;AAC1B,eAAK,cAAc,MAAM,SAAS;AAClC,eAAK,cAAc,MAAM,SAAS;AAClC,eAAK,IAAI,MAAM,SAAS;AACxB,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,QAAQ;AAC/B,eAAK,MAAM,MAAM,IAAI,IAAI,MAAM;AAC/B,eAAK,cAAc,MAAM,IAAI,IAAI,MAAM;AACvC,eAAK,cAAc,MAAM,IAAI,IAAI,MAAM;AACvC,eAAK,IAAI,MAAM,IAAI,IAAI,MAAM;AAC7B,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,WAAW,SAAU,OAAO,KAAK;AAC/B,cAAI,CAAC,KAAK,iBAAiB,GAAG;AAC5B,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,GAAG;AACb,oBAAQ;AAAA,UACV,WAAW,QAAQ,GAAG;AACpB,oBAAQ;AAAA,UACV;AACA,cAAI,IAAI,KAAK,IAAI,OAAO,GAAG;AAC3B,iBAAO,KAAK,WAAW,CAAC;AAAA,QAC1B;AAAA;AAAA,QAEA,iBAAiB,SAAUA,SAAQ,KAAK;AACtC,cAAI,CAAC,KAAK,iBAAiB,GAAG;AAC5B,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,KAAK,UAAUA,SAAQ,GAAG;AAClC,iBAAO,KAAK,WAAW,CAAC;AAAA,QAC1B;AAAA;AAAA,QAEA,YAAY,SAAU,GAAG;AACvB,cAAI,CAAC,KAAK,iBAAiB,GAAG;AAC5B,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,GAAG;AACT,gBAAI;AAAA,UACN,WAAW,IAAI,GAAG;AAChB,gBAAI;AAAA,UACN;AACA,cAAI,iBAAiB,KAAK,kBAAkB,CAAC;AAC7C,cAAI,KAAK,eAAe;AACxB,cAAI,KAAK,eAAe;AACxB,cAAI,eAAe,eAAe;AAClC,cAAI,cAAc,IAAI,KAAK,IAAI,EAAE;AACjC,sBAAY,UAAU,aAAa,IAAI,GAAG,GAAG,aAAa,IAAI,GAAG,CAAC;AAElE,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,KAAK,SAAU,OAAO,KAAK;AACzB,cAAI,SAAS,GAAG;AACd,mBAAO;AAAA,UACT;AACA,cAAI,SAAS,GAAG;AACd,mBAAO;AAAA,UACT;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,eAAe,IAAI,iBAAiB,SAAY,KAAK,gBAAgB;AAAA,YACvE;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,cAAI,cAAc,KAAK,OAAO,QAAQ;AACtC,cAAIA,UAAS,cAAc;AAC3B,iBAAO,KAAK,UAAUA,SAAQ,QAAQ;AAAA,QACxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAUA,WAAW,SAAUA,SAAQ,KAAK;AAChC,cAAI,YAAY;AAChB,cAAIA,UAAS,GAAG;AACd,wBAAY;AACZ,YAAAA,UAAS,CAACA;AAAA,UACZ;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,eAAe,IAAI,iBAAiB,SAAY,KAAK,gBAAgB;AAAA,YACvE;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AAGA,cAAI;AACJ,cAAI;AACJ,cAAI;AAGJ,cAAI;AACJ,cAAI;AACJ,cAAI,IAAI;AACR,cAAI,IAAI,aAAa;AACrB,cAAI,kBAAkB,IAAI;AAC1B,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAID,SAAQ,YAAY,IAAI,IAAI,IAAI;AACpC,gBAAI,qBAAqB,aAAa,CAAC;AACvC,gBAAI,IAAI,mBAAmB,iBAAiB;AAE5C,gBAAIC,WAAU,IAAI,GAAG;AACnB,wCAA0B;AAC1B,8CAAgCD,SAAQ;AACxC,6CAA+BA,SAAQ,KAAK;AAC5C,2CAA6B,YAAYC,UAAS,IAAI,IAAI,IAAIA;AAC9D,yCAA2B,YAAY,IAAI,IAAIA,UAASA,UAAS;AACjE;AAAA,YACF;AACA,iBAAK;AAAA,UACP;AACA,cAAI,CAAC,yBAAyB;AAC5B,mBAAO,YAAY,IAAI;AAAA,UACzB;AAKA,cAAI,cAAc,KAAK,OAAO,QAAQ;AACtC,cAAI,iBAAiB,MAAM,IAAI,CAAC,SAAS;AAKzC,iBAAO,MAAM;AAEX,gBAAI;AACJ,qCAAyB,gBAAgB,IAAI,6BAA6B,cAAc;AACxF,gBAAI,yBAAyB,gBAAgB;AAC3C,qBAAO;AAAA,YACT;AACA,qCAAyB,gBAAgB,IAAI,2BAA2B,cAAc;AACtF,gBAAI,yBAAyB,gBAAgB;AAC3C,qBAAO;AAAA,YACT;AAGA,gBAAI;AACJ,gBAAI;AACJ,gBAAI,UAAU,wBAAwB,OAAO,GAAG;AAChD,+BAAmB;AACnB,gBAAI,kBAAkB,QAAQ,CAAC,EAAE,iBAAiB;AAClD,gBAAI,kBAAkB,QAAQ,CAAC,EAAE,iBAAiB;AAClD,gBAAI,8BAA8B,iBAAiB;AAEjD,wCAA0B,QAAQ,CAAC;AACnC,6CAA+B;AAE/B,8CAAgC;AAChC,4CAA8B,kBAAkB;AAAA,YAClD,OAAO;AAEL,wCAA0B,QAAQ,CAAC;AACnC,+CAAiC;AAEjC,8CAAgC,6BAA6B;AAC7D,4CAA8B,kBAAkB;AAAA,YAClD;AACA,yCAA6B;AAC7B,uCAA2B;AAAA,UAC7B;AAAA,QACF;AAAA;AAAA;AAAA,QAGA,UAAU,SAAU,KAAK;AACvB,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,eAAe,IAAI,iBAAiB,SAAY,KAAK,gBAAgB;AAAA,YACvE;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAI,SAAS,CAAC,aAAa,CAAC,EAAE,MAAM,MAAM,CAAC;AAC3C,cAAI,IAAI,aAAa;AACrB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAI,qBAAqB,aAAa,CAAC;AACvC,mBAAO,KAAK,mBAAmB,IAAI,MAAM,CAAC;AAAA,UAC5C;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,YAAY,SAAU,KAAK;AACzB,iBAAO,IAAI,SAAS,KAAK,SAAS,GAAG,CAAC;AAAA,QACxC;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,QAAQ,MAAM,KAAK,gBAAgB,MAAM,KAAK,gBAAgB,MAAM,KAAK;AAAA,QACvF;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAC3B,eAAK,MAAM,UAAU,IAAI,EAAE;AAC3B,eAAK,cAAc,UAAU,IAAI,EAAE;AACnC,eAAK,cAAc,UAAU,IAAI,EAAE;AACnC,eAAK,IAAI,UAAU,IAAI,EAAE;AACzB,iBAAO;AAAA,QACT;AAAA,MACF;AACA,YAAM,UAAU,SAAS,MAAM,UAAU;AAQzC,eAAS,OAAO,KAAK;AACnB,YAAI,cAAc;AA4BlB,YAAI;AACJ,YAAI;AACJ,YAAI,OAAO,CAAC;AACZ,YAAI,UAAU;AACd,aAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AAEtB,eAAK,KAAK,YAAY,CAAC,CAAC;AAAA,QAC1B;AACA,YAAI,CAAC,KAAK;AACR,gBAAM,IAAI,MAAM,0BAA0B;AAAA,QAC5C;AACA,YAAI,QAAQ,OAAO,OAAO,GAAG;AAC7B,YAAI,KAAK;AACT,aAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AACtB,cAAI,MAAM,KAAK,CAAC;AAChB,cAAI;AACJ,cAAI;AACJ,eAAK,OAAO,KAAK;AACf,gBAAI,IAAI,eAAe,GAAG,GAAG;AAC3B,qBAAO,MAAM,GAAG;AAChB,kCAAoB,OAAO,yBAAyB,KAAK,GAAG;AAC5D,qBAAO,eAAe,OAAO,KAAK,iBAAiB;AAAA,YACrD;AAAA,UACF;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAGA,UAAI,OAAO,SAAU,KAAK;AACxB,YAAI,EAAE,gBAAgB,OAAO;AAC3B,iBAAO,IAAI,KAAK,GAAG;AAAA,QACrB;AACA,YAAI,OAAO,QAAQ,UAAU;AAE3B,iBAAO,IAAI,KAAK,MAAM,GAAG;AAAA,QAC3B;AACA,aAAK,WAAW,CAAC;AACjB,YAAI;AACJ,YAAI;AACJ,YAAI,CAAC,KAAK;AAAA,QAEV,WAAW,MAAM,QAAQ,GAAG,KAAK,IAAI,WAAW,GAAG;AAIjD,gBAAM,IAAI,OAAO,SAAU,KAAK,KAAK;AACnC,mBAAO,IAAI,OAAO,GAAG;AAAA,UACvB,GAAG,CAAC,CAAC;AACL,cAAI,IAAI;AACR,cAAI,IAAI,CAAC,EAAE,WAAW;AAEpB,iBAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AACtB,kBAAI,UAAU,IAAI,CAAC;AACnB,mBAAK,cAAc,OAAO;AAAA,YAC5B;AAAA,UACF,OAAO;AAEL,gBAAI,cAAc;AAClB,iBAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AACtB,kBAAI,MAAM,IAAI,CAAC;AACf,kBAAI,EAAE,eAAe,QAAQ,eAAe,QAAQ;AAClD,sBAAM,IAAI,MAAM,2DAA2D;AAAA,cAC7E;AACA,kBAAI,MAAM,GAAG;AACX,qBAAK,cAAc,KAAK,cAAc,KAAK,IAAI,KAAK,CAAC;AAAA,cACvD;AAGA,kBAAI,eAAe,CAAC,YAAY,IAAI,OAAO,IAAI,KAAK,GAAG;AACrD,qBAAK,cAAc,KAAK,cAAc,KAAK,IAAI,KAAK,CAAC;AAAA,cACvD;AACA,kBAAI,eAAe,MAAM;AACvB,qBAAK,cAAc,KAAK,cAAc,KAAK,IAAI,GAAG,CAAC;AAAA,cACrD,WAAW,eAAe,OAAO;AAC/B,qBAAK,cAAc,KAAK,cAAc,KAAK,IAAI,eAAe,IAAI,eAAe,IAAI,GAAG,CAAC;AAAA,cAC3F;AACA,4BAAc;AAAA,YAChB;AAAA,UACF;AAAA,QACF,WAAW,IAAI,WAAW;AAExB,eAAK,cAAc,GAAG;AAAA,QACxB,WAAW,eAAe,MAAM;AAE9B,eAAK,cAAc,KAAK,cAAc,KAAK,IAAI,KAAK,CAAC;AACrD,eAAK,cAAc,KAAK,cAAc,KAAK,IAAI,GAAG,CAAC;AAAA,QACrD,WAAW,eAAe,OAAO;AAE/B,eAAK,cAAc,KAAK,cAAc,KAAK,IAAI,KAAK,CAAC;AACrD,eAAK,cAAc,KAAK,cAAc,KAAK,IAAI,eAAe,IAAI,eAAe,IAAI,GAAG,CAAC;AAAA,QAC3F,WAAW,eAAe,UAAU;AAElC,cAAI,EAAE,IAAI,UAAU,IAAI,OAAO,WAAW,IAAI;AAC5C;AAAA,UACF;AAEA,cAAI,IAAI,OAAO;AACf,eAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AACtB,gBAAIY,SAAQ,IAAI,OAAO,CAAC;AACxB,gBAAI,MAAM,GAAG;AACX,mBAAK,cAAc,KAAK,cAAc,KAAKA,MAAK,CAAC;AAAA,YACnD,OAAO;AACL,mBAAK,cAAc,KAAK,cAAc,KAAKA,MAAK,CAAC;AAAA,YACnD;AAAA,UACF;AAAA,QACF,OAAO;AAEL,gBAAM,IAAI,MAAM,mDAAmD;AAAA,QACrE;AAAA,MACF;AAQA,WAAK,QAAQ,SAAU,UAAU;AAC/B,YAAI,CAAC,UAAU;AACb,iBAAO,IAAI,KAAK;AAAA,QAClB;AACA,YAAIwB,QAAO,IAAI,KAAK;AACpB,YAAI,YAAY;AAChB,YAAI,WAAW,SAAS,MAAM,SAAS;AACvC,YAAI,cAAc,SAAS;AAC3B,iBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,cAAI,UAAU,SAAS,CAAC;AACxB,cAAI,QAAQ;AACZ,cAAI,OAAO,QAAQ,MAAM,KAAK;AAC9B,cAAI,UAAU,KAAK,cAAc,MAAM,MAAM,IAAI;AACjD,UAAAA,MAAK,cAAc,OAAO;AAAA,QAC5B;AACA,eAAOA;AAAA,MACT;AAIA,WAAK,gBAAgB,SAAU,MAAM;AACnC,YAAI,cAAc;AAClB,YAAI,CAAC,MAAM;AACT,gBAAM,IAAI,MAAM,wBAAwB;AAAA,QAC1C;AACA,YAAI,qBAAqB,KAAK,aAAa,IAAI;AAC/C,YAAI,CAAC,oBAAoB;AACvB,gBAAM,IAAI,MAAM,OAAO,yCAAyC;AAAA,QAClE;AACA,YAAI,OAAO,CAAC;AACZ,YAAI,IAAI,UAAU;AAClB,iBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAE1B,eAAK,KAAK,YAAY,CAAC,CAAC;AAAA,QAC1B;AACA,eAAO,WAAW,oBAAoB,IAAI;AAAA,MAC5C;AACA,WAAK,YAAY;AAAA,QACf,MAAM,MAAM;AAAA;AAAA;AAAA,QAGZ,eAAe,SAAU,KAAK;AAC5B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAG3B,cAAI;AACJ,cAAI,kBAAkB,gBAAgB,IAAI,SAAS,cAAc,CAAC,IAAI;AACtE,cAAI,cAAc;AAClB,cAAI,CAAC,MAAM,QAAQ,GAAG,GAAG;AAEvB,gBAAI,CAAC,OAAO,CAAC,IAAI,WAAW;AAC1B,oBAAM,IAAI,MAAM,mBAAmB;AAAA,YACrC;AACA,6BAAiB,KAAK,eAAe,KAAK,iBAAiB,WAAW;AACtE,qBAAS,KAAK,cAAc;AAAA,UAC9B,OAAO;AAIL,kBAAM,IAAI,OAAO,SAAU,KAAK,KAAK;AACnC,qBAAO,IAAI,OAAO,GAAG;AAAA,YACvB,GAAG,CAAC,CAAC;AACL,gBAAI,CAAC,IAAI,CAAC,EAAE,WAAW;AACrB,oBAAM,IAAI,MAAM,oBAAoB;AAAA,YACtC;AACA,gBAAI,IAAI,IAAI;AACZ,qBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,kBAAI,aAAa,IAAI,CAAC;AACtB,+BAAiB,KAAK,eAAe,YAAY,iBAAiB,WAAW;AAC7E,uBAAS,KAAK,cAAc;AAC5B,gCAAkB;AAAA,YACpB;AAAA,UACF;AAAA,QACF;AAAA;AAAA;AAAA;AAAA,QAIA,MAAM,WAAY;AAChB,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAIlB;AACJ,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,QAAQ,WAAW;AACrB,kBAAI,cAAc,QAAQ,KAAK;AAC/B,cAAAA,QAAOA,QAAOA,MAAK,MAAM,WAAW,IAAI;AAAA,YAC1C;AAAA,UACF;AACA,cAAIA,OAAM;AACR,mBAAOA;AAAA,UACT;AAGA,cAAI,cAAc,SAAS,cAAc,CAAC;AAC1C,iBAAO,IAAI,KAAK,YAAY,IAAI,GAAG,YAAY,IAAI,GAAG,GAAG,CAAC;AAAA,QAC5D;AAAA;AAAA,QAEA,OAAO,WAAY;AACjB,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAG3B,cAAIkB,QAAO,IAAI,KAAK;AACpB,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC,EAAE,MAAM;AAChC,YAAAA,MAAK,cAAc,OAAO;AAAA,UAC5B;AACA,iBAAOA;AAAA,QACT;AAAA,QACA,cAAc,SAAU,GAAG,KAAK;AAC9B,cAAI,IAAI,KAAK,cAAc,GAAG,GAAG;AACjC,cAAI,CAAC,GAAG;AACN,mBAAO;AAAA,UACT;AACA,iBAAO,KAAK,SAAS,CAAC;AAAA,QACxB;AAAA,QACA,oBAAoB,SAAU,GAAG,KAAK;AACpC,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,cAAI,IAAI,KAAK,cAAc,GAAG,QAAQ;AACtC,cAAI,CAAC,GAAG;AACN,mBAAO;AAAA,UACT;AACA,iBAAO,KAAK,UAAU,GAAG,QAAQ;AAAA,QACnC;AAAA,QACA,8BAA8B,SAAU,GAAG,KAAK;AAC9C,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,cAAI,WAAW,KAAK,mBAAmB,GAAG,QAAQ;AAClD,cAAI,aAAa,GAAG;AAClB,mBAAO;AAAA,UACT;AAEA,cAAIpC,UAAS,KAAK,OAAO,QAAQ;AACjC,cAAIA,YAAW,GAAG;AAChB,mBAAO;AAAA,UACT;AAEA,iBAAO,WAAWA;AAAA,QACpB;AAAA;AAAA,QAEA,eAAe,SAAU,GAAG,KAAK;AAC/B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAI;AACJ,cAAI,qBAAqB;AACzB,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,eAAe,oBAAoB,CAAC;AACxC,gBAAI,QAAQ,WAAW;AACrB,kBAAI,uBAAuB,QAAQ,cAAc,GAAG;AAAA,gBAClD;AAAA,gBACA;AAAA,cACF,CAAC;AACD,kBAAI,sBAAsB,QAAQ,SAAS,oBAAoB;AAC/D,kBAAI,kBAAkB,IAAI,KAAK,qBAAqB,CAAC,EAAE,cAAc;AACrE,kBAAI,kBAAkB,oBAAoB;AACxC,gCAAgB;AAAA,kBACd,cAAc;AAAA,kBACd,OAAO;AAAA,gBACT;AACA,qCAAqB;AAAA,cACvB;AAAA,YACF;AAAA,UACF;AACA,cAAI,eAAe;AACjB,mBAAO;AAAA,UACT;AAGA,iBAAO;AAAA,YACL,cAAc,cAAc;AAAA,YAC5B,OAAO;AAAA,UACT;AAAA,QACF;AAAA,QACA,qBAAqB,SAAU,GAAG,KAAK;AACrC,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAI;AACJ,cAAI,qBAAqB;AACzB,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,eAAe,oBAAoB,CAAC;AACxC,gBAAI,QAAQ,iBAAiB,GAAG;AAC9B,kBAAI,uBAAuB,QAAQ,cAAc,GAAG;AAAA,gBAClD;AAAA,gBACA;AAAA,cACF,CAAC;AACD,kBAAI,sBAAsB,QAAQ,SAAS,oBAAoB;AAC/D,kBAAI,kBAAkB,IAAI,KAAK,qBAAqB,CAAC,EAAE,cAAc;AACrE,kBAAI,kBAAkB,oBAAoB;AACxC,sCAAsB,QAAQ,WAAW,oBAAoB;AAC7D,qCAAqB;AAAA,cACvB;AAAA,YACF;AAAA,UACF;AACA,cAAI,qBAAqB;AACvB,mBAAO;AAAA,UACT;AAGA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,eAAe,SAAU,GAAG,KAAK;AAC/B,cAAI,YAAY,KAAK,YAAY,GAAG;AACpC,cAAI,CAAC,WAAW;AACd,mBAAO;AAAA,UACT;AAEA,cAAI,eAAe,UAAU;AAG7B,cAAI,mBAAmB;AACvB,mBAAS,IAAI,GAAG,IAAI,cAAc,KAAK;AACrC,gBAAI,WAAW,UAAU,CAAC;AAC1B,gBAAI,SAAS,cAAc,CAAC,GAAG;AAE7B;AAAA,YACF;AAAA,UACF;AAGA,iBAAO,mBAAmB,MAAM;AAAA,QAClC;AAAA;AAAA,QAEA,UAAU,SAAU,OAAO,KAAK;AAC9B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,QAAQ,GAAG;AACb,oBAAQ;AAAA,UACV;AACA,cAAI,QAAQ,GAAG;AACb,oBAAQ;AAAA,UACV;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,cAAI,aAAa,KAAK,OAAO,QAAQ;AACrC,cAAIA,UAAS,aAAa;AAC1B,iBAAO,KAAK,eAAeA,SAAQ,QAAQ;AAAA,QAC7C;AAAA;AAAA,QAEA,gBAAgB,SAAUA,SAAQ,KAAK;AACrC,cAAI,cAAc,KAAK,SAAS;AAChC,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,YAAY;AAChB,cAAIA,UAAS,GAAG;AACd,wBAAY;AACZ,YAAAA,UAAS,CAACA;AAAA,UACZ;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAI;AACJ,cAAI;AAIJ,cAAI,IAAI;AACR,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,eAAK,IAAI,GAAG,IAAI,aAAa,KAAK;AAChC,gBAAID,SAAQ,YAAY,IAAI,cAAc,IAAI;AAC9C,sBAAU,KAAK,WAAWA,MAAK;AAC/B,gBAAI,eAAe,oBAAoBA,MAAK;AAC5C,gBAAI,IAAI,QAAQ,OAAO;AAAA,cACrB;AAAA,cACA;AAAA,YACF,CAAC;AACD,gBAAI,QAAQ,iBAAiB,GAAG;AAE9B,iCAAmB;AACnB,sCAAwBA;AACxB,kBAAIC,WAAU,IAAI,GAAG;AACnB,sCAAsBD;AACtB,0BAAU,QAAQ,gBAAgB,YAAY,IAAI,OAAOC,UAAS,IAAI;AAAA,kBACpE;AAAA,kBACA;AAAA,gBACF,CAAC;AACD;AAAA,cACF;AAAA,YACF;AACA,iBAAK;AAAA,UACP;AACA,cAAI,CAAC,kBAAkB;AAErB,mBAAO;AAAA,UACT;AAIA,cAAI,CAAC,SAAS;AAEZ,kCAAsB;AACtB,gBAAI,YAAY,IAAI;AACpB,sBAAU,iBAAiB,UAAU,CAAC;AAAA,UACxC;AAIA,cAAI,WAAW,KAAK,MAAM;AAC1B,mBAAS,eAAe,qBAAqB,OAAO;AACpD,cAAI,qBAAqB;AACzB,cAAI,mBAAmB,sBAAsB;AAC7C,cAAI,mBAAmB,sBAAsB;AAG7C,cAAI,CAAC,QAAQ,CAAC,EAAE,iBAAiB,GAAG;AAClC,qBAAS,cAAc,kBAAkB;AACzC,gCAAoB;AACpB,gCAAoB;AAAA,UACtB;AAGA,cAAI,YAAY,SAAS,WAAW,gBAAgB,EAAE;AACtD,mBAAS,cAAc,kBAAkB,KAAK,cAAc,KAAK,SAAS,CAAC;AAC3E,8BAAoB;AAGpB,cAAI,CAAC,QAAQ,CAAC,EAAE,iBAAiB,GAAG;AAClC,qBAAS,cAAc,mBAAmB,CAAC;AAC3C,gCAAoB;AAAA,UACtB;AAIA,cAAI,mCAAmC,mBAAmB,qBAAqB;AAC/E,eAAK,IAAI,kBAAkB,IAAI,SAAS,SAAS,QAAQ,KAAK;AAC5D,gBAAI,kBAAkB,KAAK,WAAW,IAAI,gCAAgC;AAC1E,sBAAU,SAAS,WAAW,CAAC;AAC/B,gBAAI,QAAQ,SAAS,OAAO,CAAC,gBAAgB,oBAAoB,IAAI,OAAO,QAAQ,oBAAoB,GAAG,GAAG;AAG5G,kBAAI,mBAAmB,KAAK,cAAc,KAAK,gBAAgB,GAAG;AAClE,uBAAS,eAAe,GAAG,gBAAgB;AAAA,YAC7C;AAAA,UACF;AAIA,cAAI,YAAY,IAAI,KAAK,SAAS,SAAS,MAAM,GAAG,gBAAgB,CAAC;AACrE,cAAI,aAAa,IAAI,KAAK,SAAS,SAAS,MAAM,gBAAgB,CAAC;AACnE,iBAAO,CAAC,WAAW,UAAU;AAAA,QAC/B;AAAA;AAAA;AAAA,QAGA,QAAQ,SAAU,GAAG;AACnB,cAAI,CAAC,GAAG;AACN,mBAAO;AAAA,UACT;AACA,cAAI,WAAW,KAAK;AACpB,cAAI,gBAAgB,EAAE;AACtB,cAAI,cAAc,SAAS;AAC3B,cAAI,cAAc,WAAW,aAAa;AACxC,mBAAO;AAAA,UACT;AAEA,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,eAAe,cAAc,CAAC;AAGlC,gBAAI,QAAQ,SAAS,aAAa,QAAQ,CAAC,QAAQ,OAAO,YAAY,GAAG;AACvE,qBAAO;AAAA,YACT;AAAA,UACF;AAGA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,YAAY,SAAUD,QAAO;AAC3B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,kBAAM,IAAI,MAAM,uBAAuB;AAAA,UACzC;AACA,cAAIA,SAAQ,GAAG;AACb,YAAAA,SAAQ,cAAcA;AAAA,UACxB;AACA,cAAIA,UAAS,eAAeA,SAAQ,GAAG;AACrC,kBAAM,IAAI,MAAM,qBAAqB;AAAA,UACvC;AACA,iBAAO,SAASA,MAAK;AAAA,QACvB;AAAA;AAAA,QAEA,wBAAwB,SAAU,KAAK;AACrC,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAG3B,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AAInE,cAAI,sBAAsB,CAAC;AAC3B,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,eAAe,QAAQ,gBAAgB;AAAA,cACzC;AAAA,YACF,CAAC;AACD,gCAAoB,KAAK,YAAY;AAAA,UACvC;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,aAAa,WAAY;AACvB,cAAI,gBAAgB,KAAK,MAAM,EAAE,SAAS;AAC1C,cAAI,WAAW,cAAc;AAC7B,cAAI,cAAc,SAAS;AAC3B,cAAI,WAAW,CAAC;AAChB,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,QAAQ,gBAAgB;AAG1B,uBAAS,KAAK,IAAI,KAAK,OAAO,CAAC;AAAA,YACjC,OAAO;AAEL,uBAAS,SAAS,SAAS,CAAC,EAAE,cAAc,OAAO;AAAA,YACrD;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAQA,eAAe,SAAUA,QAAO,KAAK;AACnC,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAK3B,cAAIA,SAAQ,GAAG;AACb,YAAAA,SAAQ,cAAcA,SAAQ;AAAA,UAChC;AACA,cAAIA,SAAQ,eAAeA,SAAQ,GAAG;AACpC,kBAAM,IAAI,MAAM,qBAAqB;AAAA,UACvC;AACA,cAAI;AACJ,cAAI,kBAAkB;AACtB,cAAI,cAAc;AAClB,cAAI,gBAAgB,GAAG;AACrB,gBAAIA,UAAS,GAAG;AACd,gCAAkB,SAASA,SAAQ,CAAC;AACpC,4BAAc,gBAAgB;AAAA,YAChC,OAAO;AAGL,4BAAc,SAAS,CAAC;AAAA,YAC1B;AAAA,UACF;AACA,cAAI,CAAC,MAAM,QAAQ,GAAG,GAAG;AACvB,gBAAI,CAAC,OAAO,CAAC,IAAI,WAAW;AAC1B,oBAAM,IAAI,MAAM,mBAAmB;AAAA,YACrC;AACA,6BAAiB,KAAK,eAAe,KAAK,iBAAiB,WAAW;AACtE,qBAAS,OAAOA,QAAO,GAAG,cAAc;AAAA,UAC1C,OAAO;AAGL,kBAAM,IAAI,OAAO,SAAU,KAAK,KAAK;AACnC,qBAAO,IAAI,OAAO,GAAG;AAAA,YACvB,GAAG,CAAC,CAAC;AACL,gBAAI,CAAC,IAAI,CAAC,EAAE,WAAW;AACrB,oBAAM,IAAI,MAAM,oBAAoB;AAAA,YACtC;AACA,gBAAI,IAAI,IAAI;AACZ,qBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,kBAAI,aAAa,IAAI,CAAC;AACtB,+BAAiB,KAAK,eAAe,YAAY,iBAAiB,WAAW;AAC7E,uBAAS,OAAOA,SAAQ,GAAG,GAAG,cAAc;AAC5C,gCAAkB;AAAA,YACpB;AAAA,UACF;AAAA,QACF;AAAA,QACA,sBAAsB,SAAU8B,OAAM,KAAK;AACzC,cAAID,gBAAe;AACnB,cAAI,YAAY,KAAK,YAAY,GAAG;AACpC,cAAI,CAAC,WAAW;AACd,mBAAO;AAAA,UACT;AACA,mBAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,IAAI,GAAG,KAAK;AAChD,gBAAI,WAAW,UAAU,CAAC;AAC1B,gBAAI,uBAAuBC,MAAK,UAAU,QAAQ;AAClD,gBAAI,sBAAsB;AACxB,cAAAD,kBAAiBA,gBAAe,CAAC;AACjC,kBAAI,MAAM,QAAQ,oBAAoB,GAAG;AACvC,sBAAM,UAAU,KAAK,MAAMA,eAAc,oBAAoB;AAAA,cAC/D,OAAO;AACL,gBAAAA,cAAa,KAAK,oBAAoB;AAAA,cACxC;AAAA,YACF;AAAA,UACF;AACA,iBAAOA;AAAA,QACT;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AAExB,gBAAI,QAAQ,iBAAiB,GAAG;AAC9B,qBAAO;AAAA,YACT;AAAA,UACF;AAGA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,SAAS,WAAY;AACnB,cAAI,WAAW,KAAK;AACpB,cAAI,UAAU,SAAS,WAAW,KAAK,SAAS,CAAC,EAAE,SAAS;AAC5D,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,QAAQ,SAAU,KAAK;AACrB,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAI5B,UAAS;AACb,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,eAAe,oBAAoB,CAAC;AACxC,YAAAA,WAAU,QAAQ,OAAO;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,UACH;AACA,iBAAOA;AAAA,QACT;AAAA;AAAA,QAEA,WAAW,SAAU,GAAG,KAAK;AAC3B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,eAAe,EAAE;AACrB,cAAI,eAAe,GAAG;AACpB,mBAAO;AAAA,UACT;AAEA,cAAI,SAAS,EAAE;AACf,cAAI,gBAAgB,aAAa;AAC/B,2BAAe,cAAc;AAC7B,qBAAS;AAAA,UACX,WAAW,SAAS,GAAG;AACrB,qBAAS;AAAA,UACX,WAAW,SAAS,GAAG;AACrB,qBAAS;AAAA,UACX;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAI;AACJ,cAAIA,UAAS;AACb,mBAAS,IAAI,GAAG,IAAI,cAAc,KAAK;AACrC,gBAAI,UAAU,SAAS,CAAC;AACxB,2BAAe,oBAAoB,CAAC;AACpC,YAAAA,WAAU,QAAQ,OAAO;AAAA,cACvB,YAAY;AAAA,cACZ;AAAA,YACF,CAAC;AAAA,UACH;AACA,oBAAU,SAAS,YAAY;AAC/B,yBAAe,oBAAoB,YAAY;AAC/C,UAAAA,WAAU,QAAQ,UAAU,QAAQ;AAAA,YAClC,YAAY;AAAA,YACZ;AAAA,UACF,CAAC;AACD,iBAAOA;AAAA,QACT;AAAA;AAAA,QAEA,SAAS,SAAU,OAAO,KAAK;AAC7B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,SAAS,GAAG;AACd,mBAAO,KAAK,MAAM,MAAM;AAAA,UAC1B;AACA,cAAI,SAAS,GAAG;AACd,mBAAO,KAAK,IAAI,MAAM;AAAA,UACxB;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,cAAI,aAAa,KAAK,OAAO,QAAQ;AACrC,cAAIA,UAAS,aAAa;AAC1B,iBAAO,KAAK,cAAcA,SAAQ,QAAQ;AAAA,QAC5C;AAAA;AAAA;AAAA,QAGA,eAAe,SAAUA,SAAQ,KAAK;AACpC,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAIA,YAAW,GAAG;AAChB,mBAAO,KAAK,MAAM,MAAM;AAAA,UAC1B;AACA,cAAI,YAAY;AAChB,cAAIA,UAAS,GAAG;AACd,wBAAY;AACZ,YAAAA,UAAS,CAACA;AAAA,UACZ;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAI;AACJ,cAAI,IAAI;AACR,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAID,SAAQ,YAAY,IAAI,cAAc,IAAI;AAC9C,gBAAI,UAAU,SAASA,MAAK;AAC5B,gBAAI,eAAe,oBAAoBA,MAAK;AAC5C,gBAAI,IAAI,QAAQ,OAAO;AAAA,cACrB;AAAA,cACA;AAAA,YACF,CAAC;AACD,gBAAI,QAAQ,WAAW;AACrB,kBAAIC,WAAU,IAAI,GAAG;AACnB,uBAAO,QAAQ,eAAe,YAAY,IAAI,OAAOA,UAAS,IAAI;AAAA,kBAChE;AAAA,kBACA;AAAA,gBACF,CAAC;AAAA,cACH;AACA,mCAAqB;AAAA,YACvB;AACA,iBAAK;AAAA,UACP;AAGA,cAAI,oBAAoB;AACtB,mBAAO,YAAY,mBAAmB,MAAM,mBAAmB;AAAA,UACjE;AAGA,cAAI,cAAc,SAAS,cAAc,CAAC;AAC1C,iBAAO,YAAY,IAAI,MAAM;AAAA,QAC/B;AAAA;AAAA,QAEA,UAAU,SAAU,GAAG;AACrB,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,eAAe,EAAE;AACrB,cAAI,eAAe,GAAG;AACpB,mBAAO,SAAS,CAAC,EAAE,SAAS,CAAC;AAAA,UAC/B;AACA,cAAI,gBAAgB,aAAa;AAC/B,mBAAO,SAAS,cAAc,CAAC,EAAE,SAAS,CAAC;AAAA,UAC7C;AACA,cAAI,SAAS,EAAE;AACf,cAAI,SAAS,GAAG;AACd,qBAAS;AAAA,UACX,WAAW,SAAS,GAAG;AACrB,qBAAS;AAAA,UACX;AACA,iBAAO,SAAS,YAAY,EAAE,SAAS,MAAM;AAAA,QAC/C;AAAA;AAAA,QAEA,WAAW;AAAA;AAAA,QAEX,gBAAgB,SAAU,SAAS,iBAAiB,aAAa;AAE/D,kBAAQ,kBAAkB;AAC1B,kBAAQ,cAAc;AACtB,cAAI,iBAAiB;AACnB,4BAAgB,cAAc;AAAA,UAChC;AACA,cAAI,aAAa;AACf,wBAAY,kBAAkB;AAAA,UAChC;AACA,cAAI,qBAAqB;AACzB,cAAI,QAAQ,gBAAgB;AAC1B,oBAAQ,sBAAsB;AAC9B,iCAAqB;AAAA,UACvB;AAGA,cAAI,oBAAoB;AACtB,iBAAK,0BAA0B,kBAAkB;AAAA,UACnD;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,eAAe,SAAUD,QAAO;AAC9B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,kBAAM,IAAI,MAAM,uBAAuB;AAAA,UACzC;AACA,cAAIA,SAAQ,GAAG;AACb,YAAAA,SAAQ,cAAcA;AAAA,UACxB;AACA,cAAIA,UAAS,eAAeA,SAAQ,GAAG;AACrC,kBAAM,IAAI,MAAM,qBAAqB;AAAA,UACvC;AACA,cAAI,iBAAiB,SAAS,OAAOA,QAAO,CAAC,EAAE,CAAC;AAChD,cAAI,kBAAkB,eAAe;AACrC,cAAI,cAAc,eAAe;AAGjC,cAAI,iBAAiB;AACnB,4BAAgB,cAAc;AAAA,UAChC;AACA,cAAI,aAAa;AACf,wBAAY,kBAAkB;AAAA,UAChC;AAGA,cAAI,eAAe,kBAAkB,aAAa;AAChD,iBAAK,0BAA0B,WAAW;AAAA,UAC5C;AAAA,QACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,gBAAgB,SAAUA,QAAO,KAAK;AACpC,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,kBAAM,IAAI,MAAM,uBAAuB;AAAA,UACzC;AACA,cAAIA,SAAQ,GAAG;AACb,YAAAA,SAAQ,cAAcA;AAAA,UACxB;AACA,cAAIA,UAAS,eAAeA,SAAQ,GAAG;AACrC,kBAAM,IAAI,MAAM,qBAAqB;AAAA,UACvC;AACA,cAAI;AACJ,cAAI,kBAAkB,SAASA,MAAK;AACpC,cAAI,kBAAkB,gBAAgB;AACtC,cAAI,cAAc,gBAAgB;AAClC,cAAI,qBAAqB,gBAAgB;AAEzC,cAAI,CAAC,MAAM,QAAQ,GAAG,GAAG;AACvB,gBAAI,CAAC,OAAO,CAAC,IAAI,WAAW;AAC1B,oBAAM,IAAI,MAAM,mBAAmB;AAAA,YACrC;AACA,6BAAiB,KAAK,eAAe,KAAK,iBAAiB,WAAW;AACtE,qBAAS,OAAOA,QAAO,GAAG,cAAc;AAExC,gBAAI,sBAAsB,eAAe,gBAAgB;AACvD,mCAAqB;AAAA,YACvB;AAAA,UACF,OAAO;AAGL,kBAAM,IAAI,OAAO,SAAU,KAAK,KAAK;AACnC,qBAAO,IAAI,OAAO,GAAG;AAAA,YACvB,GAAG,CAAC,CAAC;AACL,gBAAI,CAAC,IAAI,CAAC,EAAE,WAAW;AACrB,oBAAM,IAAI,MAAM,oBAAoB;AAAA,YACtC;AACA,qBAAS,OAAOA,QAAO,CAAC;AACxB,gBAAI,IAAI,IAAI;AACZ,qBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,kBAAI,aAAa,IAAI,CAAC;AACtB,+BAAiB,KAAK,eAAe,YAAY,iBAAiB,WAAW;AAC7E,uBAAS,OAAOA,SAAQ,GAAG,GAAG,cAAc;AAC5C,gCAAkB;AAClB,kBAAI,sBAAsB,eAAe,gBAAgB;AACvD,qCAAqB;AAAA,cACvB;AAAA,YACF;AAAA,UACF;AAGA,cAAI,sBAAsB,aAAa;AACrC,iBAAK,0BAA0B,WAAW;AAAA,UAC5C;AAAA,QACF;AAAA,QACA,OAAO,SAAU,WAAW;AAC1B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,oBAAQ,MAAM,SAAS;AAAA,UACzB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,QAAQ;AAC/B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,oBAAQ,MAAM,IAAI,IAAI,MAAM;AAAA,UAC9B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,OAAO,KAAK;AAC/B,cAAIA,SAAQ,KAAK,eAAe,OAAO,GAAG;AAC1C,cAAI,CAACA,QAAO;AACV,mBAAO;AAAA,UACT;AACA,iBAAO,KAAK,WAAWA,MAAK;AAAA,QAC9B;AAAA;AAAA,QAEA,iBAAiB,SAAUC,SAAQ,KAAK;AACtC,cAAID,SAAQ,KAAK,qBAAqBC,SAAQ,GAAG;AACjD,cAAI,CAACD,QAAO;AACV,mBAAO;AAAA,UACT;AACA,iBAAO,KAAK,WAAWA,MAAK;AAAA,QAC9B;AAAA,QACA,gBAAgB,SAAU,OAAO,KAAK;AACpC,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,QAAQ,GAAG;AACb,oBAAQ;AAAA,UACV;AACA,cAAI,QAAQ,GAAG;AACb,oBAAQ;AAAA,UACV;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,cAAI,aAAa,KAAK,OAAO,QAAQ;AACrC,cAAIC,UAAS,aAAa;AAC1B,iBAAO,KAAK,qBAAqBA,SAAQ,QAAQ;AAAA,QACnD;AAAA;AAAA,QAEA,sBAAsB,SAAUA,SAAQ,KAAK;AAC3C,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,YAAY;AAChB,cAAIA,UAAS,GAAG;AACd,wBAAY;AACZ,YAAAA,UAAS,CAACA;AAAA,UACZ;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAI,0BAA0B;AAC9B,cAAI,IAAI;AACR,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAID,SAAQ,YAAY,IAAI,cAAc,IAAI;AAC9C,gBAAI,UAAU,SAASA,MAAK;AAC5B,gBAAI,eAAe,oBAAoBA,MAAK;AAC5C,gBAAI,IAAI,QAAQ,OAAO;AAAA,cACrB;AAAA,cACA;AAAA,YACF,CAAC;AACD,gBAAI,QAAQ,WAAW;AACrB,kBAAIC,WAAU,IAAI,GAAG;AACnB,uBAAOD;AAAA,cACT;AACA,wCAA0BA;AAAA,YAC5B;AACA,iBAAK;AAAA,UACP;AAIA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,WAAW,WAAY;AACrB,cAAI,CAAC,KAAK,QAAQ,GAAG;AACnB,kBAAM,IAAI,MAAM,wBAAwB;AAAA,UAC1C;AACA,iBAAO,KAAK,SAAS;AAAA,QACvB;AAAA;AAAA,QAEA,WAAW,SAAU,OAAO,KAAK;AAC/B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,QAAQ,GAAG;AACb,oBAAQ;AAAA,UACV;AACA,cAAI,QAAQ,GAAG;AACb,oBAAQ;AAAA,UACV;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,WAAW;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,cAAI,aAAa,KAAK,OAAO,QAAQ;AACrC,cAAIC,UAAS,aAAa;AAC1B,iBAAO,KAAK,gBAAgBA,SAAQ,QAAQ;AAAA,QAC9C;AAAA;AAAA;AAAA,QAGA,iBAAiB,SAAUA,SAAQ,KAAK;AACtC,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,YAAY;AAChB,cAAIA,UAAS,GAAG;AACd,wBAAY;AACZ,YAAAA,UAAS,CAACA;AAAA,UACZ;AACA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AAGT,cAAI;AACJ,cAAI,IAAI;AACR,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAID,SAAQ,YAAY,IAAI,cAAc,IAAI;AAC9C,gBAAI,UAAU,SAASA,MAAK;AAC5B,gBAAI,eAAe,oBAAoBA,MAAK;AAC5C,gBAAI,IAAI,QAAQ,OAAO;AAAA,cACrB;AAAA,cACA;AAAA,YACF,CAAC;AACD,gBAAI,QAAQ,iBAAiB,GAAG;AAC9B,kBAAIC,WAAU,IAAI,GAAG;AACnB,uBAAO,QAAQ,iBAAiB,YAAY,IAAI,OAAOA,UAAS,IAAI;AAAA,kBAClE;AAAA,kBACA;AAAA,gBACF,CAAC;AAAA,cACH;AACA,iCAAmB;AAAA,YACrB;AACA,iBAAK;AAAA,UACP;AAGA,cAAI,kBAAkB;AACpB,gBAAI,IAAI,YAAY,IAAI;AACxB,mBAAO,iBAAiB,WAAW,CAAC;AAAA,UACtC;AAGA,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,YAAY,SAAU,GAAG;AACvB,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,cAAI,eAAe,EAAE;AACrB,cAAI,eAAe,GAAG;AACpB,mBAAO,SAAS,CAAC,EAAE,WAAW,CAAC;AAAA,UACjC;AACA,cAAI,gBAAgB,aAAa;AAC/B,mBAAO,SAAS,cAAc,CAAC,EAAE,WAAW,CAAC;AAAA,UAC/C;AACA,cAAI,SAAS,EAAE;AACf,cAAI,SAAS,GAAG;AACd,qBAAS;AAAA,UACX,WAAW,SAAS,GAAG;AACrB,qBAAS;AAAA,UACX;AACA,iBAAO,SAAS,YAAY,EAAE,WAAW,MAAM;AAAA,QACjD;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,IAAI,cAAc,SAAY,KAAK,YAAY,IAAI;AACnE,cAAI,sBAAsB,IAAI,wBAAwB,SAAY,KAAK,uBAAuB;AAAA,YAC5F;AAAA,UACF,CAAC,IAAI,IAAI;AACT,cAAI,SAAS,CAAC;AACd,cAAI,gBAAgB,CAAC;AACrB,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,QAAQ,WAAW;AACrB,kBAAI,6BAA6B,oBAAoB,CAAC;AACtD,kBAAI,2BAA2B,SAAS,GAAG;AACzC,oBAAI,oBAAoB,2BAA2B,IAAI,SAAUqC,QAAO;AACtE,yBAAOA,OAAM;AAAA,gBACf,CAAC;AACD,sBAAM,UAAU,KAAK,MAAM,eAAe,iBAAiB;AAAA,cAC7D,OAAO;AACL,8BAAc,KAAK,QAAQ,KAAK;AAAA,cAClC;AAAA,YACF,WAAW,cAAc,SAAS,GAAG;AACnC,4BAAc,KAAK,SAAS,IAAI,CAAC,EAAE,GAAG;AACtC,qBAAO,KAAK,aAAa;AACzB,8BAAgB,CAAC;AAAA,YACnB;AAAA,UACF;AACA,cAAI,cAAc,SAAS,GAAG;AAC5B,0BAAc,KAAK,KAAK,GAAG;AAC3B,mBAAO,KAAK,aAAa;AAAA,UAC3B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,SAAU,KAAK;AAC1B,cAAI,YAAY,CAAC;AACjB,cAAI,SAAS,KAAK,SAAS,GAAG;AAC9B,cAAI,CAAC,QAAQ;AACX,mBAAO;AAAA,UACT;AACA,mBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,IAAI,GAAG,KAAK;AAC7C,sBAAU,KAAK,IAAI,SAAS,OAAO,CAAC,CAAC,CAAC;AAAA,UACxC;AACA,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AACpB,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,WAAW;AACf,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,wBAAY,QAAQ,UAAU,IAAI;AAAA,UACpC;AACA,iBAAO,SAAS,KAAK;AAAA,QACvB;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAC3B,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,oBAAQ,UAAU,IAAI,EAAE;AAAA,UAC1B;AACA,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,2BAA2B,SAAU,SAAS;AAC5C,cAAI,kBAAkB,QAAQ;AAC9B,iBAAO,WAAW,CAAC,QAAQ,gBAAgB;AAEzC,gBAAI,iBAAiB;AACnB,sBAAQ,sBAAsB,gBAAgB;AAAA,YAChD,OACK;AACH,sBAAQ,sBAAsB;AAAA,YAChC;AAEA,8BAAkB;AAClB,sBAAU,QAAQ;AAAA,UACpB;AAAA,QACF;AAAA;AAAA;AAAA,QAGA,UAAU,WAAY;AACpB,cAAI,CAAC,KAAK,QAAQ,GAAG;AACnB,iBAAK,cAAc,GAAG,KAAK,cAAc,KAAK,GAAG,CAAC,CAAC;AAAA,UACrD;AACA,iBAAO;AAAA,QACT;AAAA,MACF;AACA,aAAO,eAAe,KAAK,WAAW,SAAS;AAAA;AAAA,QAG7C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AACA,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,QAAQ,WAAW;AACrB,qBAAO,QAAQ;AAAA,YACjB;AAAA,UACF;AAGA,iBAAO,SAAS,cAAc,CAAC,EAAE;AAAA,QACnC;AAAA,MACF,CAAC;AACD,aAAO,eAAe,KAAK,WAAW,OAAO;AAAA;AAAA,QAG3C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,cAAI,WAAW,KAAK;AACpB,cAAI,cAAc,SAAS;AAC3B,cAAI,gBAAgB,GAAG;AACrB,mBAAO;AAAA,UACT;AACA,mBAAS,IAAI,cAAc,GAAG,KAAK,GAAG,KAAK;AACzC,gBAAI,UAAU,SAAS,CAAC;AACxB,gBAAI,QAAQ,WAAW;AACrB,qBAAO,QAAQ;AAAA,YACjB;AAAA,UACF;AAGA,iBAAO,SAAS,cAAc,CAAC,EAAE;AAAA,QACnC;AAAA,MACF,CAAC;AASD,eAAS,WAAW,aAAa,WAAW;AAiB1C,kBAAU,QAAQ,IAAI;AACtB,eAAO,KAAK,SAAS,UAAU,KAAK,MAAM,aAAa,SAAS,GAAG;AAAA,MACrE;AAGA,UAAI,mBAAmB;AAAA;AAAA,QAErB,MAAM,WAAY;AAChB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,OAAO,WAAY;AACjB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,cAAc,WAAY;AACxB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,oBAAoB,WAAY;AAC9B,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,8BAA8B,WAAY;AACxC,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,eAAe,SAAU,GAAG;AAC1B,cAAI,KAAK,8BAA8B;AACrC,mBAAO,KAAK,6BAA6B,CAAC;AAAA,UAC5C;AACA,gBAAM,IAAI,MAAM,qFAAqF;AAAA,QACvG;AAAA;AAAA,QAEA,qBAAqB,WAAY;AAC/B,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,UAAU,WAAY;AACpB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,gBAAgB,WAAY;AAC1B,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,WAAW,SAAU,GAAG;AACtB,cAAI,KAAK,UAAU;AACjB,mBAAO,KAAK,SAAS,CAAC;AAAA,UACxB;AACA,gBAAM,IAAI,MAAM,6DAA6D;AAAA,QAC/E;AAAA;AAAA,QAEA,QAAQ,WAAY;AAClB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,iBAAiB,WAAY;AAC3B,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,kBAAkB,WAAY;AAC5B,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA,QACA,WAAW;AAAA,QACX,gBAAgB;AAAA;AAAA,QAGhB,WAAW;AAAA;AAAA;AAAA,QAIX,QAAQ,WAAY;AAClB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,WAAW,SAAU,GAAG;AACtB,cAAI,KAAK,GAAG;AACV,mBAAO;AAAA,UACT;AACA,cAAIrC,UAAS,KAAK,OAAO;AACzB,cAAI,KAAK,GAAG;AACV,mBAAOA;AAAA,UACT;AACA,iBAAOA,UAAS;AAAA,QAClB;AAAA,QACA,aAAa;AAAA;AAAA;AAAA,QAIb,SAAS,WAAY;AACnB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,eAAe,WAAY;AACzB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,UAAU,SAAU,GAAG;AACrB,cAAI,KAAK,SAAS;AAChB,mBAAO,KAAK,QAAQ,CAAC;AAAA,UACvB;AACA,gBAAM,IAAI,MAAM,2DAA2D;AAAA,QAC7E;AAAA,QACA,iBAAiB;AAAA;AAAA;AAAA,QAIjB,OAAO,WAAY;AACjB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA,QACA,qBAAqB;AAAA;AAAA;AAAA,QAIrB,OAAO,WAAY;AACjB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,WAAW,WAAY;AACrB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,WAAW,WAAY;AACrB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,iBAAiB,WAAY;AAC3B,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,YAAY,SAAU,GAAG;AACvB,cAAI,KAAK,WAAW;AAClB,mBAAO,KAAK,UAAU,CAAC;AAAA,UACzB;AACA,gBAAM,IAAI,MAAM,+DAA+D;AAAA,QACjF;AAAA;AAAA,QAEA,UAAU,WAAY;AACpB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA;AAAA,QAEA,WAAW,WAAY;AACrB,gBAAM,IAAI,MAAM,2CAA2C;AAAA,QAC7D;AAAA,MACF;AAIA,aAAO,eAAe,kBAAkB,OAAO;AAAA,QAC7C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAID,aAAO,eAAe,kBAAkB,SAAS;AAAA;AAAA,QAG/C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,cAAI,CAAC,KAAK,iBAAiB;AACzB,kBAAM,IAAI,MAAM,8HAA8H;AAAA,UAChJ;AACA,iBAAO,KAAK,gBAAgB;AAAA,QAC9B;AAAA,MACF,CAAC;AAGD,aAAO,eAAe,kBAAkB,QAAQ;AAAA,QAC9C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,gBAAM,IAAI,MAAM,6CAA6C;AAAA,QAC/D;AAAA,MACF,CAAC;AAGD,UAAI,SAAS,WAAY;AACvB,YAAI,cAAc;AAClB,YAAI,OAAO,CAAC;AACZ,YAAI,IAAI,UAAU;AAClB,iBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,eAAK,KAAK,YAAY,CAAC,CAAC;AAAA,QAC1B;AACA,YAAI,EAAE,gBAAgB,SAAS;AAE7B,iBAAO,WAAW,QAAQ,IAAI;AAAA,QAChC;AACA,YAAI,MAAM,GAAG;AACX,gBAAM,IAAI,MAAM,+EAA+E;AAAA,QACjG;AACA,YAAI;AACJ,YAAI,KAAK,CAAC,aAAa,MAAM;AAE3B,cAAI,MAAM,GAAG;AACX,iBAAK,MAAM,KAAK,CAAC,EAAE,IAAI,MAAM;AAC7B,mBAAO;AAAA,UACT,OAAO;AACL,kBAAM,IAAI,MAAM,mEAAmE,IAAI,mBAAmB;AAAA,UAC5G;AAAA,QACF,WAAW,OAAO,KAAK,CAAC,MAAM,YAAY,OAAO,KAAK,CAAC,MAAM,UAAU;AAErE,cAAI,MAAM,GAAG;AACX,iBAAK,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACvC,mBAAO;AAAA,UACT,WAAW,IAAI,GAAG;AAChB,kBAAM,IAAI,MAAM,mEAAmE,IAAI,yBAAyB;AAAA,UAClH,OAAO;AAEL,gBAAI;AACJ,0BAAc,CAAC;AACf,iBAAK,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG;AAGzB,8BAAgB,KAAK,MAAM,GAAG,IAAI,CAAC;AACnC,0BAAY,KAAK,WAAW,QAAQ,aAAa,CAAC;AAAA,YACpD;AACA,mBAAO;AAAA,UACT;AAAA,QACF,OAAO;AAEL,cAAI,MAAM,GAAG;AACX,iBAAK,MAAM,IAAI,MAAM,KAAK,CAAC,CAAC;AAC5B,mBAAO;AAAA,UACT,OAAO;AAEL,gBAAI;AACJ,0BAAc,CAAC;AACf,iBAAK,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG;AACzB,6BAAe,KAAK,CAAC;AACrB,0BAAY,KAAK,IAAI,OAAO,YAAY,CAAC;AAAA,YAC3C;AACA,mBAAO;AAAA,UACT;AAAA,QACF;AAAA,MACF;AACA,UAAI,kBAAkB;AAAA,QACpB,OAAO,WAAY;AACjB,iBAAO,IAAI,OAAO,KAAK,GAAG;AAAA,QAC5B;AAAA,QACA,UAAU,SAAU,OAAO;AACzB,cAAI6B,QAAO,IAAI,KAAK,KAAK,OAAO,KAAK,GAAG;AACxC,cAAI,UAAUA,MAAK,SAAS,KAAK;AACjC,iBAAO,CAAC,IAAI,OAAO,QAAQ,CAAC,CAAC,GAAG,IAAI,OAAO,QAAQ,CAAC,CAAC,CAAC;AAAA,QACxD;AAAA,QACA,gBAAgB,SAAU7B,SAAQ;AAChC,cAAI6B,QAAO,IAAI,KAAK,KAAK,OAAO,KAAK,GAAG;AACxC,cAAI,UAAUA,MAAK,eAAe7B,OAAM;AACxC,iBAAO,CAAC,IAAI,OAAO,QAAQ,CAAC,CAAC,GAAG,IAAI,OAAO,QAAQ,CAAC,CAAC,CAAC;AAAA,QACxD;AAAA,QACA,iBAAiB,WAAY;AAC3B,iBAAO,CAAC;AAAA,QACV;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,CAAC,KAAK,iBAAiB;AACzB,mBAAO;AAAA,UACT;AACA,iBAAO,CAAC,KAAK,MAAM,OAAO,KAAK,GAAG;AAAA,QACpC;AAAA,QACA,OAAO,SAAU,WAAW;AAC1B,eAAK,IAAI,MAAM,SAAS;AACxB,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,QAAQ;AAC/B,eAAK,IAAI,MAAM,IAAI,IAAI,MAAM;AAC7B,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,MAAM,KAAK;AACf,iBAAO,KAAK,OAAO,MAAM,IAAI,IAAI,MAAM,IAAI;AAAA,QAC7C;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,OAAO,MAAM,KAAK,QAAQ,MAAM,KAAK;AAAA,QACnD;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAC3B,eAAK,IAAI,UAAU,IAAI,EAAE;AACzB,iBAAO;AAAA,QACT;AAAA,MACF;AACA,aAAO,eAAe,iBAAiB,QAAQ;AAAA,QAC7C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AACD,aAAO,YAAY,OAAO,kBAAkB,KAAK,WAAW,eAAe;AAC3E,UAAI,UAAU,WAAY;AACxB,YAAI,cAAc;AAClB,YAAI,OAAO,CAAC;AACZ,YAAI,IAAI,UAAU;AAClB,iBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,eAAK,KAAK,YAAY,CAAC,CAAC;AAAA,QAC1B;AACA,YAAI,EAAE,gBAAgB,UAAU;AAE9B,iBAAO,WAAW,SAAS,IAAI;AAAA,QACjC;AACA,YAAI,MAAM,GAAG;AACX,gBAAM,IAAI,MAAM,kFAAkF;AAAA,QACpG;AACA,YAAI;AACJ,YAAI,KAAK,CAAC,aAAa,OAAO;AAE5B,cAAI,MAAM,GAAG;AACX,iBAAK,gBAAgB,KAAK,CAAC,EAAE,cAAc,MAAM;AACjD,iBAAK,gBAAgB,KAAK,CAAC,EAAE,cAAc,MAAM;AACjD,iBAAK,MAAM,KAAK,CAAC,EAAE,IAAI,MAAM;AAC7B,mBAAO;AAAA,UACT,OAAO;AACL,kBAAM,IAAI,MAAM,sEAAsE,IAAI,oBAAoB;AAAA,UAChH;AAAA,QACF,WAAW,OAAO,KAAK,CAAC,MAAM,YAAY,OAAO,KAAK,CAAC,MAAM,UAAU;AAErE,cAAI,MAAM,GAAG;AACX,iBAAK,gBAAgB,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACjD,iBAAK,gBAAgB,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACjD,iBAAK,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACvC,mBAAO;AAAA,UACT,WAAW,IAAI,GAAG;AAChB,kBAAM,IAAI,MAAM,sEAAsE,IAAI,yBAAyB;AAAA,UACrH,OAAO;AAEL,gBAAI;AACJ,0BAAc,CAAC;AACf,iBAAK,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG;AAGzB,8BAAgB,KAAK,MAAM,GAAG,IAAI,CAAC;AACnC,0BAAY,KAAK,WAAW,SAAS,aAAa,CAAC;AAAA,YACrD;AACA,mBAAO;AAAA,UACT;AAAA,QACF,OAAO;AAEL,cAAI,MAAM,GAAG;AACX,iBAAK,gBAAgB,IAAI,MAAM,KAAK,CAAC,CAAC;AACtC,iBAAK,gBAAgB,IAAI,MAAM,KAAK,CAAC,CAAC;AACtC,iBAAK,MAAM,IAAI,MAAM,KAAK,CAAC,CAAC;AAC5B,mBAAO;AAAA,UACT,WAAW,IAAI,GAAG;AAChB,kBAAM,IAAI,MAAM,sEAAsE,IAAI,oBAAoB;AAAA,UAChH,OAAO;AAEL,gBAAI;AACJ,0BAAc,CAAC;AACf,iBAAK,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG;AAGzB,8BAAgB,KAAK,MAAM,GAAG,IAAI,CAAC;AACnC,0BAAY,KAAK,WAAW,SAAS,aAAa,CAAC;AAAA,YACrD;AACA,mBAAO;AAAA,UACT;AAAA,QACF;AAAA,MACF;AACA,UAAI,mBAAmB;AAAA,QACrB,OAAO,WAAY;AACjB,iBAAO,IAAI,QAAQ,KAAK,eAAe,KAAK,eAAe,KAAK,GAAG;AAAA,QACrE;AAAA,QACA,UAAU,SAAU,OAAO,KAAK;AAC9B,cAAIqC,SAAQ,IAAI,MAAM,KAAK,OAAO,KAAK,eAAe,KAAK,eAAe,KAAK,GAAG;AAClF,cAAI,UAAUA,OAAM,SAAS,OAAO,GAAG;AACvC,iBAAO,CAAC,IAAI,QAAQ,QAAQ,CAAC,CAAC,GAAG,IAAI,QAAQ,QAAQ,CAAC,CAAC,CAAC;AAAA,QAC1D;AAAA,QACA,gBAAgB,SAAUrC,SAAQ,KAAK;AACrC,cAAIqC,SAAQ,IAAI,MAAM,KAAK,OAAO,KAAK,eAAe,KAAK,eAAe,KAAK,GAAG;AAClF,cAAI,UAAUA,OAAM,eAAerC,SAAQ,GAAG;AAC9C,iBAAO,CAAC,IAAI,QAAQ,QAAQ,CAAC,CAAC,GAAG,IAAI,QAAQ,QAAQ,CAAC,CAAC,CAAC;AAAA,QAC1D;AAAA,QACA,WAAW,SAAU,GAAG;AACtB,cAAIqC,SAAQ,IAAI,MAAM,KAAK,OAAO,KAAK,eAAe,KAAK,eAAe,KAAK,GAAG;AAClF,cAAI,UAAUA,OAAM,UAAU,CAAC;AAC/B,iBAAO,CAAC,IAAI,QAAQ,QAAQ,CAAC,CAAC,GAAG,IAAI,QAAQ,QAAQ,CAAC,CAAC,CAAC;AAAA,QAC1D;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,CAAC,KAAK,iBAAiB;AACzB,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,KAAK;AACjB,cAAI,WAAW,KAAK;AACpB,cAAI,WAAW,KAAK;AACpB,cAAI,MAAM,KAAK;AACf,iBAAO,EAAE,MAAM,OAAO,QAAQ,KAAK,SAAS,OAAO,QAAQ,KAAK,SAAS,OAAO,GAAG;AAAA,QACrF;AAAA,QACA,OAAO,SAAU,WAAW;AAC1B,eAAK,cAAc,MAAM,SAAS;AAClC,eAAK,cAAc,MAAM,SAAS;AAClC,eAAK,IAAI,MAAM,SAAS;AACxB,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,QAAQ;AAC/B,eAAK,cAAc,MAAM,IAAI,IAAI,MAAM;AACvC,eAAK,cAAc,MAAM,IAAI,IAAI,MAAM;AACvC,eAAK,IAAI,MAAM,IAAI,IAAI,MAAM;AAC7B,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,KAAK,KAAK;AACd,cAAI,KAAK,KAAK;AACd,cAAI,MAAM,KAAK;AACf,iBAAO,KAAK,OAAO,MAAM,GAAG,IAAI,MAAM,GAAG,IAAI,MAAM,GAAG,IAAI,MAAM,GAAG,IAAI,MAAM,IAAI,IAAI,MAAM,IAAI;AAAA,QACjG;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,OAAO,MAAM,KAAK,QAAQ,MAAM,KAAK,gBAAgB,MAAM,KAAK,gBAAgB,MAAM,KAAK;AAAA,QACzG;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAC3B,eAAK,cAAc,UAAU,IAAI,EAAE;AACnC,eAAK,cAAc,UAAU,IAAI,EAAE;AACnC,eAAK,IAAI,UAAU,IAAI,EAAE;AACzB,iBAAO;AAAA,QACT;AAAA,MACF;AACA,aAAO,eAAe,kBAAkB,QAAQ;AAAA,QAC9C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AACD,cAAQ,YAAY,OAAO,kBAAkB,MAAM,WAAW,gBAAgB;AAC9E,UAAI,SAAS,WAAY;AACvB,YAAI,cAAc;AAClB,YAAI,OAAO,CAAC;AACZ,YAAI,IAAI,UAAU;AAClB,iBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,eAAK,KAAK,YAAY,CAAC,CAAC;AAAA,QAC1B;AACA,YAAI,EAAE,gBAAgB,SAAS;AAE7B,iBAAO,WAAW,QAAQ,IAAI;AAAA,QAChC;AACA,YAAI,MAAM,GAAG;AACX,gBAAM,IAAI,MAAM,wFAAwF;AAAA,QAC1G;AACA,YAAI;AACJ,YAAI,KAAK,CAAC,aAAa,MAAM;AAE3B,cAAI,MAAM,GAAG;AACX,iBAAK,MAAM,KAAK,CAAC,EAAE,IAAI,MAAM;AAC7B,mBAAO;AAAA,UACT,OAAO;AACL,kBAAM,IAAI,MAAM,4EAA4E,IAAI,mBAAmB;AAAA,UACrH;AAAA,QACF,WAAW,KAAK,CAAC,aAAa,OAAO;AAEnC,cAAI,MAAM,GAAG;AACX,iBAAK,MAAM,KAAK,CAAC,EAAE,IAAI,MAAM;AAC7B,mBAAO;AAAA,UACT,OAAO;AACL,kBAAM,IAAI,MAAM,4EAA4E,IAAI,oBAAoB;AAAA,UACtH;AAAA,QACF,WAAW,OAAO,KAAK,CAAC,MAAM,YAAY,OAAO,KAAK,CAAC,MAAM,UAAU;AAErE,cAAI,MAAM,GAAG;AACX,iBAAK,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACvC,mBAAO;AAAA,UACT,WAAW,IAAI,GAAG;AAChB,kBAAM,IAAI,MAAM,4EAA4E,IAAI,yBAAyB;AAAA,UAC3H,OAAO;AAEL,gBAAI;AACJ,0BAAc,CAAC;AACf,iBAAK,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG;AAGzB,8BAAgB,KAAK,MAAM,GAAG,IAAI,CAAC;AACnC,kBAAI,MAAM,GAAG;AACX,4BAAY,KAAK,WAAW,QAAQ,aAAa,CAAC;AAAA,cACpD,OAAO;AACL,4BAAY,KAAK,WAAW,QAAQ,aAAa,CAAC;AAAA,cACpD;AAAA,YACF;AACA,mBAAO;AAAA,UACT;AAAA,QACF,OAAO;AAEL,cAAI,MAAM,GAAG;AACX,iBAAK,MAAM,IAAI,MAAM,KAAK,CAAC,CAAC;AAC5B,mBAAO;AAAA,UACT,OAAO;AAEL,gBAAI;AACJ,0BAAc,CAAC;AACf,iBAAK,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG;AAGzB,6BAAe,KAAK,CAAC;AACrB,kBAAI,MAAM,GAAG;AACX,4BAAY,KAAK,IAAI,OAAO,YAAY,CAAC;AAAA,cAC3C,OAAO;AACL,4BAAY,KAAK,IAAI,OAAO,YAAY,CAAC;AAAA,cAC3C;AAAA,YACF;AACA,mBAAO;AAAA,UACT;AAAA,QACF;AAAA,MACF;AACA,UAAI,kBAAkB;AAAA,QACpB,MAAM,WAAY;AAChB,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO,IAAI,OAAO,KAAK,GAAG;AAAA,QAC5B;AAAA,QACA,cAAc,WAAY;AACxB,iBAAO,KAAK,IAAI,MAAM;AAAA,QACxB;AAAA,QACA,8BAA8B,WAAY;AACxC,iBAAO;AAAA,QACT;AAAA,QACA,oBAAoB,WAAY;AAC9B,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,WAAY;AACzB,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,WAAY;AAC/B,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,CAAC,KAAK,MAAM,GAAG,KAAK,MAAM,CAAC;AAAA,QACpC;AAAA,QACA,gBAAgB,WAAY;AAC1B,iBAAO,CAAC,KAAK,MAAM,GAAG,KAAK,MAAM,CAAC;AAAA,QACpC;AAAA,QACA,QAAQ,SAAU,GAAG;AACnB,iBAAO,KAAK,IAAI,OAAO,EAAE,GAAG;AAAA,QAC9B;AAAA,QACA,iBAAiB,WAAY;AAC3B,iBAAO,CAAC;AAAA,QACV;AAAA,QACA,kBAAkB,WAAY;AAC5B,iBAAO;AAAA,QACT;AAAA,QACA,gBAAgB;AAAA,QAChB,WAAW;AAAA,QACX,QAAQ,WAAY;AAClB,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO;AAAA,QACT;AAAA,QACA,SAAS,WAAY;AACnB,iBAAO,KAAK,IAAI,MAAM;AAAA,QACxB;AAAA,QACA,eAAe,WAAY;AACzB,iBAAO,KAAK,IAAI,MAAM;AAAA,QACxB;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,IAAI,MAAM;AAAA,QACxB;AAAA,QACA,OAAO,SAAU,WAAW;AAC1B,eAAK,IAAI,MAAM,SAAS;AACxB,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,QAAQ;AAC/B,eAAK,IAAI,MAAM,IAAI,IAAI,MAAM;AAC7B,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,MAAM,KAAK;AACf,iBAAO,KAAK,OAAO,MAAM,IAAI,IAAI,MAAM,IAAI;AAAA,QAC7C;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO;AAAA,QACT;AAAA,QACA,iBAAiB,WAAY;AAC3B,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,WAAY;AACtB,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,OAAO,MAAM,KAAK;AAAA,QAChC;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAC3B,eAAK,IAAI,UAAU,IAAI,EAAE;AACzB,iBAAO;AAAA,QACT;AAAA,MACF;AACA,aAAO,eAAe,iBAAiB,SAAS;AAAA,QAC9C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,gBAAM,IAAI,MAAM,mEAAmE;AAAA,QACrF;AAAA,MACF,CAAC;AACD,aAAO,eAAe,iBAAiB,QAAQ;AAAA,QAC7C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AACD,aAAO,YAAY,OAAO,kBAAkB,eAAe;AAE3D,UAAI,YAAY,WAAY;AAC1B,YAAI,cAAc;AAClB,YAAI,OAAO,CAAC;AACZ,YAAI,IAAI,UAAU;AAClB,iBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,eAAK,KAAK,YAAY,CAAC,CAAC;AAAA,QAC1B;AACA,YAAI,EAAE,gBAAgB,YAAY;AAEhC,iBAAO,WAAW,WAAW,IAAI;AAAA,QACnC;AACA,YAAI,IAAI,GAAG;AACT,gBAAM,IAAI,MAAM,6CAA6C;AAAA,QAC/D;AACA,eAAO;AAAA,MACT;AACA,UAAI,qBAAqB;AAAA,QACvB,OAAO,WAAY;AACjB,iBAAO,IAAI,UAAU;AAAA,QACvB;AAAA,QACA,UAAU,SAAU,OAAO;AACzB,cAAIR,QAAO,IAAI,KAAK,KAAK,OAAO,KAAK,GAAG;AACxC,cAAI,UAAUA,MAAK,SAAS,KAAK;AACjC,iBAAO;AAAA;AAAA,YAEP,QAAQ,CAAC,EAAE,iBAAiB,IAAI,IAAI,OAAO,QAAQ,CAAC,CAAC,IAAI,KAAK,MAAM;AAAA,YAAG,IAAI,OAAO,QAAQ,CAAC,CAAC;AAAA,UAAC;AAAA,QAC/F;AAAA,QACA,gBAAgB,SAAU7B,SAAQ;AAChC,cAAI6B,QAAO,IAAI,KAAK,KAAK,OAAO,KAAK,GAAG;AACxC,cAAI,UAAUA,MAAK,eAAe7B,OAAM;AACxC,iBAAO;AAAA;AAAA,YAEP,QAAQ,CAAC,EAAE,iBAAiB,IAAI,IAAI,OAAO,QAAQ,CAAC,CAAC,IAAI,KAAK,MAAM;AAAA,YAAG,IAAI,OAAO,QAAQ,CAAC,CAAC;AAAA,UAAC;AAAA,QAC/F;AAAA,QACA,iBAAiB,WAAY;AAC3B,iBAAO,CAAC;AAAA,QACV;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,CAAC,KAAK,mBAAmB,CAAC,KAAK,qBAAqB;AACtD,mBAAO;AAAA,UACT;AACA,iBAAO,CAAC,KAAK,MAAM,OAAO,KAAK,GAAG;AAAA,QACpC;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO,KAAK;AAAA,QACd;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,OAAO,MAAM,KAAK,QAAQ,MAAM,KAAK;AAAA,QACnD;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO;AAAA,QACT;AAAA,MACF;AACA,aAAO,eAAe,oBAAoB,OAAO;AAAA;AAAA,QAG/C,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,cAAI,CAAC,KAAK,qBAAqB;AAC7B,kBAAM,IAAI,MAAM,yIAAyI;AAAA,UAC3J;AACA,iBAAO,KAAK,oBAAoB;AAAA,QAClC;AAAA,MACF,CAAC;AACD,aAAO,eAAe,oBAAoB,QAAQ;AAAA,QAChD,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AACD,gBAAU,YAAY,OAAO,kBAAkB,KAAK,WAAW,kBAAkB;AACjF,UAAI,eAAe,KAAK,eAAe;AAAA,QACrC,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,MACL;AACA,WAAK,qBAAqB,IAAI,OAAO,aAAa,OAAO,KAAK,YAAY,EAAE,KAAK,EAAE,IAAI,OAAO;AAC9F,WAAK,kBAAkB,SAAUsC,OAAM;AACrC,YAAI,OAAOA,UAAS,UAAU;AAC5B,iBAAO;AAAA,QACT;AACA,eAAO,KAAK,mBAAmB,KAAKA,KAAI;AAAA,MAC1C;AACA,UAAI,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,QAKX,oBAAoB,SAAU,QAAQ;AACpC,kBAAQ,KAAK,YAAY;AACzB,iBAAO,IAAI,KAAK,MAAM,cAAc,MAAM,CAAC,EAAE,UAAU;AAAA,QACzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,uBAAuB,SAAU,OAAO;AACtC,kBAAQ,KAAK,YAAY;AACzB,cAAI,qBAAqB,CAAC;AAC1B,cAAI,sBAAsB,CAAC;AAC3B,cAAI,IAAI,MAAM,SAAS;AACvB,cAAI;AAGJ,cAAI,KAAK,GAAG;AAEV,+BAAmB,CAAC,IAAI,IAAI,OAAO,IAAI,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,KAAK,IAAI,IAAI,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,KAAK,CAAC;AAGtG,gCAAoB,CAAC,IAAI,IAAI,MAAM,IAAI,mBAAmB,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,GAAG,IAAI,mBAAmB,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC;AACrH,mBAAO,CAAC,oBAAoB,mBAAmB;AAAA,UACjD;AAIA,cAAI,MAAM,CAAC;AAGX,eAAK,IAAI,GAAG,IAAI,IAAI,GAAG,KAAK;AAC1B,gBAAI,CAAC,IAAI,IAAI,MAAM,CAAC,EAAE,IAAI,IAAI,MAAM,IAAI,CAAC,EAAE;AAAA,UAC7C;AACA,cAAI,CAAC,IAAI,MAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC,EAAE;AACnC,cAAI,IAAI,CAAC,KAAK,IAAI,MAAM,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,KAAK;AAGjD,cAAI,IAAI,KAAK,sBAAsB,GAAG;AAGtC,eAAK,IAAI,GAAG,IAAI,IAAI,GAAG,EAAE,GAAG;AAC1B,gBAAI,CAAC,IAAI,IAAI,MAAM,CAAC,EAAE,IAAI,IAAI,MAAM,IAAI,CAAC,EAAE;AAAA,UAC7C;AACA,cAAI,CAAC,IAAI,MAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC,EAAE;AACnC,cAAI,IAAI,CAAC,KAAK,IAAI,MAAM,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,KAAK;AAGjD,cAAI,IAAI,KAAK,sBAAsB,GAAG;AAGtC,eAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AAEtB,+BAAmB,KAAK,IAAI,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AAG7C,gBAAI,IAAI,IAAI,GAAG;AACb,kCAAoB,KAAK,IAAI,MAAM,IAAI,MAAM,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,IAAI,MAAM,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;AAAA,YAClG,OAAO;AACL,kCAAoB,KAAK,IAAI,OAAO,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;AAAA,YAC9F;AAAA,UACF;AACA,iBAAO,CAAC,oBAAoB,mBAAmB;AAAA,QACjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,iBAAiB,SAAU,IAAI,IAAI,IAAI,IAAI;AACzC,kBAAQ,KAAK,YAAY;AACzB,cAAID,SAAQ,IAAI,MAAM,IAAI,IAAI,IAAI,EAAE;AACpC,iBAAO,SAAS,YAAY,GAAG;AAC7B,gBAAI,UAAUA,OAAM,OAAO,CAAC;AAC5B,mBAAO,CAAC;AAAA,cACN,IAAI,QAAQ,CAAC,EAAE;AAAA,cACf,IAAI,QAAQ,CAAC,EAAE;AAAA,cACf,IAAI,QAAQ,CAAC,EAAE;AAAA,cACf,IAAI,QAAQ,CAAC,EAAE;AAAA,YACjB,GAAG;AAAA,cACD,IAAI,QAAQ,CAAC,EAAE;AAAA,cACf,IAAI,QAAQ,CAAC,EAAE;AAAA,cACf,IAAI,QAAQ,CAAC,EAAE;AAAA,cACf,IAAI,QAAQ,CAAC,EAAE;AAAA,YACjB,CAAC;AAAA,UACH;AAAA,QACF;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,uBAAuB,SAAU,KAAK;AACpC,kBAAQ,KAAK,YAAY;AACzB,cAAI,IAAI,IAAI;AAEZ,cAAI,IAAI,CAAC;AACT,cAAI,MAAM,CAAC;AACX,cAAI,IAAI;AACR,YAAE,CAAC,IAAI,IAAI,CAAC,IAAI;AAGhB,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAI,CAAC,IAAI,IAAI;AACb,iBAAK,IAAI,IAAI,IAAI,IAAM,OAAO,IAAI,CAAC;AACnC,cAAE,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK;AAAA,UAC/B;AACA,eAAK,IAAI,GAAG,IAAI,GAAG,KAAK;AAEtB,cAAE,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;AAAA,UACtC;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,oBAAoB,SAAU,IAAI,IAAI,IAAI,IAAI;AAC5C,kBAAQ,KAAK,YAAY;AACzB,cAAIA,SAAQ,IAAI,MAAM,IAAI,IAAI,IAAI,EAAE;AACpC,iBAAO,SAAS,eAAe,GAAG;AAChC,mBAAOA,OAAM,cAAc,CAAC;AAAA,UAC9B;AAAA,QACF;AAAA,MACF;AACA,UAAI,UAAU,SAAU,QAAQ;AAC9B,YAAI,EAAE,gBAAgB,UAAU;AAC9B,iBAAO,IAAI,QAAQ,MAAM;AAAA,QAC3B;AACA,YAAI,OAAO,WAAW,UAAU;AAC9B,iBAAO,IAAI,QAAQ,MAAM,MAAM;AAAA,QACjC;AACA,aAAK,SAAS,MAAM,QAAQ,MAAM,IAAI,OAAO,IAAI,KAAK,IAAI,CAAC;AAAA,MAC7D;AACA,cAAQ,QAAQ,SAAU,WAAW;AACnC,eAAO,IAAI,QAAQ,YAAY,SAAS,CAAC;AAAA,MAC3C;AACA,cAAQ,WAAW,SAAUN,OAAM;AACjC,eAAO,IAAI,QAAQ,CAACA,MAAK,QAAQ,GAAGA,MAAK,SAAS,GAAGA,MAAK,YAAY,GAAGA,MAAK,WAAW,CAAC,CAAC;AAAA,MAC7F;AACA,cAAQ,YAAY,OAAO,SAAS,WAAW;AAAA,QAC7C,MAAM,MAAM;AAAA,QACZ,OAAO,WAAY;AACjB,iBAAO,IAAI,QAAQ,YAAY,KAAK,MAAM,CAAC;AAAA,QAC7C;AAAA,QACA,YAAY,WAAY;AACtB,iBAAO,IAAI,QAAQ,WAAW,KAAK,MAAM,CAAC;AAAA,QAC5C;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,MAAM,IAAI;AACd,cAAI,SAAS,IAAI;AACjB,cAAI,OAAO,UAAU,KAAK,MAAM,OAAO,GAAG,GAAG;AAC3C,mBAAO;AAAA,UACT;AACA,iBAAO,OAAO,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;AAAA,QACtC;AAAA,MACF,CAAC;AACD,eAAS,OAAO,QAAQ,QAAQ,WAAW,WAAW;AACpD,gBAAQ,OAAO,MAAM;AAAA,UACnB,KAAK,MAAM,MACT;AACE,oBAAQ,OAAO,MAAM;AAAA,cACnB,KAAK,MAAM,MACT;AACE,uBAAO,aAAa,QAAQ,MAAM;AAAA,cACpC;AAAA,YACJ;AACA;AAAA,UACF;AAAA,UACF,KAAK,MAAM,SACT;AACE,oBAAQ,OAAO,MAAM;AAAA,cACnB,KAAK,MAAM,MACT;AACE,uBAAO,gBAAgB,QAAQ,MAAM;AAAA,cACvC;AAAA,cACF,KAAK,MAAM,SACT;AACE,uBAAO,mBAAmB,QAAQ,MAAM;AAAA,cAC1C;AAAA,YACJ;AACA;AAAA,UACF;AAAA,UACF,KAAK,MAAM,MACT;AACE,oBAAQ,OAAO,MAAM;AAAA,cACnB,KAAK,MAAM,MACT;AACE,uBAAO,aAAa,QAAQ,MAAM;AAAA,cACpC;AAAA,cACF,KAAK,MAAM,SACT;AACE,uBAAO,gBAAgB,QAAQ,MAAM;AAAA,cACvC;AAAA,cACF,KAAK,MAAM,MACT;AACE,uBAAO,aAAa,QAAQ,MAAM;AAAA,cACpC;AAAA,YACJ;AACA;AAAA,UACF;AAAA,UACF,KAAK,MAAM,UACT;AACE,oBAAQ,OAAO,MAAM;AAAA,cACnB,KAAK,MAAM,MACT;AACE,uBAAO,iBAAiB,QAAQ,MAAM;AAAA,cACxC;AAAA,cACF,KAAK,MAAM,SACT;AACE,uBAAO,oBAAoB,QAAQ,MAAM;AAAA,cAC3C;AAAA,cACF,KAAK,MAAM,MACT;AACE,uBAAO,iBAAiB,QAAQ,MAAM;AAAA,cACxC;AAAA,cACF,KAAK,MAAM,UACT;AACE,uBAAO,qBAAqB,QAAQ,MAAM;AAAA,cAC5C;AAAA,YACJ;AACA;AAAA,UACF;AAAA,UACF,KAAK,MAAM,SACT;AACE,oBAAQ,OAAO,MAAM;AAAA,cACnB,KAAK,MAAM,MACT;AACE,uBAAO,gBAAgB,QAAQ,MAAM;AAAA,cACvC;AAAA,cACF,KAAK,MAAM,SACT;AACE,uBAAO,mBAAmB,QAAQ,MAAM;AAAA,cAC1C;AAAA,cACF,KAAK,MAAM,MACT;AACE,uBAAO,gBAAgB,QAAQ,MAAM;AAAA,cACvC;AAAA,cACF,KAAK,MAAM,UACT;AACE,uBAAO,oBAAoB,QAAQ,MAAM;AAAA,cAC3C;AAAA,cACF,KAAK,MAAM,SACT;AACE,uBAAO,mBAAmB,QAAQ,MAAM;AAAA,cAC1C;AAAA,YACJ;AACA;AAAA,UACF;AAAA,UACF,KAAK,MAAM,MACT;AACE,oBAAQ,OAAO,MAAM;AAAA,cACnB,KAAK,MAAM,MACT;AACE,uBAAO,aAAa,QAAQ,QAAQ,SAAS;AAAA,cAC/C;AAAA,cACF,KAAK,MAAM,SACT;AACE,uBAAO,gBAAgB,QAAQ,QAAQ,SAAS;AAAA,cAClD;AAAA,cACF,KAAK,MAAM,MACT;AACE,uBAAO,aAAa,QAAQ,QAAQ,SAAS;AAAA,cAC/C;AAAA,cACF,KAAK,MAAM,UACT;AACE,uBAAO,iBAAiB,QAAQ,QAAQ,SAAS;AAAA,cACnD;AAAA,cACF,KAAK,MAAM,SACT;AACE,uBAAO,gBAAgB,QAAQ,QAAQ,SAAS;AAAA,cAClD;AAAA,cACF,KAAK,MAAM,MACT;AACE,uBAAO,aAAa,QAAQ,QAAQ,WAAW,SAAS;AAAA,cAC1D;AAAA,YACJ;AACA;AAAA,UACF;AAAA,QACJ;AAEA,gBAAQ,OAAO,MAAM;AAAA,UACnB,KAAK,MAAM;AAAA,UACX,KAAK,MAAM;AAAA,UACX,KAAK,MAAM;AAAA,UACX,KAAK,MAAM;AAAA,UACX,KAAK,MAAM,MACT;AACE,mBAAO,OAAO,QAAQ,QAAQ,WAAW,SAAS;AAAA,UACpD;AAAA,UACF,SACE;AACE,kBAAM,MAAM,0BAA0B,SAAS,UAAU,SAAS,sBAAsB;AAAA,UAC1F;AAAA,QACJ;AAAA,MACF;AAIA,eAAS,aAAa,OAAO,OAAO;AAClC,YAAI,KAAK,MAAM,MAAM;AACrB,YAAI,KAAK,MAAM,MAAM;AACrB,YAAI,KAAK,MAAM,IAAI;AACnB,YAAI,KAAK,MAAM,IAAI;AACnB,YAAI,KAAK,MAAM,MAAM;AACrB,YAAI,KAAK,MAAM,MAAM;AACrB,YAAI,KAAK,MAAM,IAAI;AACnB,YAAI,KAAK,MAAM,IAAI;AACnB,YAAI,MAAM,KAAK;AACf,YAAI,MAAM,KAAK;AACf,YAAI,MAAM,KAAK;AACf,YAAI,MAAM,KAAK;AACf,YAAI,MAAM,KAAK;AACf,YAAI,MAAM,KAAK;AACf,YAAI,IAAI,MAAM,MAAM,MAAM;AAC1B,YAAI,KAAK,MAAM,MAAM,MAAM,OAAO;AAClC,YAAI,KAAK,MAAM,MAAM,MAAM,OAAO;AAClC,eAAO,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK;AAAA,MAC5C;AAIA,eAAS,gBAAgBC,UAASH,OAAM;AACtC,YAAI,MAAMG,SAAQ;AAClB,YAAI,MAAMA,SAAQ;AAClB,YAAI,KAAKA,SAAQ;AACjB,YAAI,KAAKA,SAAQ;AACjB,YAAI,KAAKH,MAAK,MAAM,IAAI;AACxB,YAAI,KAAKA,MAAK,IAAI,IAAI;AACtB,YAAI,KAAKA,MAAK,MAAM,IAAI;AACxB,YAAI,KAAKA,MAAK,IAAI,IAAI;AACtB,YAAI,QAAQ,MAAM;AAClB,YAAI,QAAQ,MAAM;AAClB,YAAI,KAAK,KAAK;AACd,YAAI,KAAK,KAAK;AACd,YAAI,IAAI,KAAK,KAAK,QAAQ,KAAK,KAAK;AACpC,YAAI,IAAI,IAAI,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK;AAC5C,YAAI,IAAI,KAAK,KAAK,QAAQ,KAAK,KAAK,QAAQ;AAC5C,YAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AACxB,YAAI,MAAM,GAAG;AACX,cAAI,IAAI,CAAC,IAAI,IAAI;AACjB,iBAAO,KAAK,KAAK,KAAK;AAAA,QACxB,WAAW,IAAI,GAAG;AAChB,cAAIU,QAAO,KAAK,KAAK,CAAC;AACtB,cAAI,MAAM,CAAC,IAAIA,SAAQ,IAAI;AAC3B,cAAI,MAAM,CAAC,IAAIA,SAAQ,IAAI;AAC3B,iBAAO,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM;AAAA,QAChD;AACA,eAAO;AAAA,MACT;AACA,eAAS,mBAAmB,UAAU,UAAU;AAC9C,eAAO,sBAAsB,UAAU,GAAG,UAAU,CAAC;AAAA,MACvD;AAIA,eAAS,aAAaR,OAAMF,OAAM;AAChC,YAAI,QAAQA,MAAK;AACjB,YAAI,MAAMA,MAAK;AACf,YAAI,IAAIE,MAAK;AACb,YAAI,IAAIA,MAAK;AACb,YAAI,QAAQA,MAAK;AACjB,YAAI,SAASA,MAAK;AAClB,YAAI,MAAM,IAAI,IAAI,SAAS,IAAI,IAAI,IAAI,SAAS,MAAM,IAAI,KAAK,IAAI,IAAI,KAAK,MAAM,IAAI,IAAI,UAAU,IAAI,IAAI,IAAI,UAAU,MAAM,IAAI,KAAK,IAAI,IAAI,GAAG;AAClJ,iBAAO;AAAA,QACT;AACA,YAAIA,MAAK,cAAcF,MAAK,KAAK,KAAKE,MAAK,cAAcF,MAAK,GAAG,GAAG;AAClE,iBAAO;AAAA,QACT;AACA,eAAO,aAAaE,MAAK,QAAQ,GAAGF,KAAI,KAAK,aAAaE,MAAK,UAAU,GAAGF,KAAI,KAAK,aAAaE,MAAK,WAAW,GAAGF,KAAI,KAAK,aAAaE,MAAK,SAAS,GAAGF,KAAI;AAAA,MAClK;AACA,eAAS,gBAAgBE,OAAMC,UAAS;AACtC,YAAI,CAAC,aAAaD,OAAM,KAAK,YAAYC,QAAO,CAAC,GAAG;AAClD,iBAAO;AAAA,QACT;AACA,eAAO,mBAAmB,QAAQ,SAASD,KAAI,GAAGC,QAAO;AAAA,MAC3D;AACA,eAAS,aAAa,OAAO,OAAO;AAClC,eAAO,MAAM,IAAI,MAAM,IAAI,MAAM,SAAS,MAAM,IAAI,MAAM,QAAQ,MAAM,KAAK,MAAM,IAAI,MAAM,IAAI,MAAM,UAAU,MAAM,IAAI,MAAM,SAAS,MAAM;AAAA,MAClJ;AAIA,eAAS,iBAAiB,UAAUH,OAAM;AACxC,eAAO,kBAAkB,UAAUA,OAAM;AAAA,UACvC,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,eAAS,oBAAoB,UAAUG,UAAS;AAC9C,eAAO,qBAAqB,UAAUA,UAAS;AAAA,UAC7C,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,eAAS,iBAAiB,UAAUD,OAAM;AACxC,eAAO,kBAAkB,UAAUA,OAAM;AAAA,UACvC,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,eAAS,qBAAqB,WAAW,WAAW;AAClD,eAAO,sBAAsB,WAAW,WAAW;AAAA,UACjD,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AAIA,eAAS,gBAAgB,SAASF,OAAM;AACtC,eAAO,kBAAkB,SAASA,OAAM;AAAA,UACtC,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,eAAS,mBAAmB,SAASG,UAAS;AAC5C,eAAO,qBAAqB,SAASA,UAAS;AAAA,UAC5C,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,eAAS,gBAAgB,SAASD,OAAM;AACtC,eAAO,kBAAkB,SAASA,OAAM;AAAA,UACtC,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,eAAS,oBAAoB,SAAS,UAAU;AAC9C,eAAO,sBAAsB,SAAS,UAAU;AAAA,UAC9C,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,eAAS,mBAAmB,UAAU,UAAU;AAC9C,eAAO,qBAAqB,UAAU,UAAU;AAAA,UAC9C,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AAIA,eAAS,aAAaK,OAAMP,OAAM,SAAS;AACzC,eAAOO,MAAK,YAAY,EAAE,KAAK,SAAU,SAAS;AAChD,cAAI,MAAM,QAAQ,YAAY,OAAO;AACrC,cAAI,WAAW,IAAI,CAAC;AACpB,cAAI,QAAQ,QAAQ,WAAW,EAAE;AACjC,cAAI,OAAO,MAAM;AACjB,cAAI,SAAS,KAAK;AAChB,mBAAO,gBAAgB,UAAUP,KAAI;AAAA,UACvC,OAAO;AACL,mBAAO,iBAAiB,UAAUA,KAAI;AAAA,UACxC;AAAA,QACF,CAAC;AAAA,MACH;AACA,eAAS,gBAAgBO,OAAMJ,UAAS,SAAS;AAC/C,eAAOI,MAAK,YAAY,EAAE,KAAK,SAAU,SAAS;AAChD,cAAI,MAAM,QAAQ,YAAY,OAAO;AACrC,cAAI,WAAW,IAAI,CAAC;AACpB,cAAI,QAAQ,QAAQ,WAAW,EAAE;AACjC,cAAI,OAAO,MAAM;AACjB,cAAI,SAAS,KAAK;AAChB,mBAAO,mBAAmB,UAAUJ,QAAO;AAAA,UAC7C,OAAO;AACL,mBAAO,oBAAoB,UAAUA,QAAO;AAAA,UAC9C;AAAA,QACF,CAAC;AAAA,MACH;AACA,eAAS,aAAaI,OAAML,OAAM,SAAS;AACzC,eAAO,gBAAgBK,OAAM,QAAQ,SAASL,KAAI,GAAG,OAAO;AAAA,MAC9D;AACA,eAAS,iBAAiBK,OAAM,UAAU,SAAS;AACjD,eAAO,kBAAkBA,OAAM,UAAU,SAAS;AAAA,UAChD,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,eAAS,gBAAgBA,OAAM,SAAS,SAAS;AAC/C,eAAO,kBAAkBA,OAAM,SAAS,SAAS;AAAA,UAC/C,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,eAAS,aAAa,OAAO,OAAO,UAAU,UAAU;AACtD,eAAO,MAAM,YAAY,EAAE,KAAK,SAAU,SAAS;AACjD,cAAI,MAAM,QAAQ,YAAY,QAAQ;AACtC,cAAI,YAAY,IAAI,CAAC;AACrB,cAAI,QAAQ,QAAQ,WAAW,EAAE;AACjC,cAAI,OAAO,MAAM;AACjB,cAAI,SAAS,KAAK;AAChB,mBAAO,gBAAgB,OAAO,WAAW,QAAQ;AAAA,UACnD,OAAO;AACL,mBAAO,iBAAiB,OAAO,WAAW,QAAQ;AAAA,UACpD;AAAA,QACF,CAAC;AAAA,MACH;AACA,eAAS,kBAAkB,UAAUP,OAAM,KAAK;AAC9C,YAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,YAAI,WAAW,IAAI;AACnB,YAAI,aAAa,OAAQ,YAAW;AACpC,YAAI;AACJ,YAAI,UAAU;AACZ,cAAI,SAAS,cAAcA,MAAK,KAAK,GAAG;AAGtC,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,SAAS;AACrB,cAAI,MAAM,SAAS;AACnB,cAAI,SAAS,SAAS;AACtB,uBAAa,IAAI,OAAO,KAAK,IAAI,SAAS,OAAO,OAAO,CAAC,KAAK,CAAC;AAAA,QACjE,OAAO;AACL,uBAAa,SAAS;AAAA,QACxB;AACA,YAAI7B,UAAS,WAAW;AACxB,YAAI,UAAU,IAAI,KAAK;AACvB,iBAAS,IAAI,GAAG,IAAIA,UAAS,GAAG,KAAK;AACnC,kBAAQ,QAAQ,WAAW,CAAC;AAC5B,kBAAQ,MAAM,WAAW,IAAI,CAAC;AAC9B,cAAI,aAAa6B,OAAM,OAAO,GAAG;AAC/B,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,eAAS,qBAAqB,UAAUG,UAAS,KAAK;AACpD,YAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,YAAI,QAAQ,SAAS;AACrB,YAAI,MAAM,SAAS;AACnB,YAAI,SAAS,SAAS;AACtB,YAAIA,SAAQ,cAAc,KAAK,GAAG;AAChC,iBAAO;AAAA,QACT;AACA,YAAI;AACJ,YAAI,WAAW,IAAI;AACnB,YAAI,aAAa,OAAQ,YAAW;AACpC,YAAI,UAAU;AACZ,cAAI,SAAS,cAAcA,SAAQ,OAAO,CAAC,GAAG;AAG5C,mBAAO;AAAA,UACT;AACA,uBAAa,IAAI,OAAO,KAAK,IAAI,SAAS,OAAO,OAAO,CAAC,KAAK,CAAC;AAAA,QACjE,OAAO;AACL,uBAAa;AAAA,QACf;AACA,YAAIhC,UAAS,WAAW;AACxB,YAAI,UAAU,IAAI,KAAK;AACvB,iBAAS,IAAI,GAAG,IAAIA,UAAS,GAAG,KAAK;AACnC,kBAAQ,QAAQ,WAAW,CAAC;AAC5B,kBAAQ,MAAM,WAAW,IAAI,CAAC;AAC9B,cAAI,gBAAgBgC,UAAS,OAAO,GAAG;AACrC,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,eAAS,kBAAkB,UAAUD,OAAM,KAAK;AAC9C,YAAI,UAAU,QAAQ,SAASA,KAAI;AACnC,eAAO,qBAAqB,UAAU,SAAS,GAAG;AAAA,MACpD;AACA,eAAS,kBAAkBK,OAAM,WAAW,SAAS,KAAK;AACxD,eAAOA,MAAK,YAAY,EAAE,KAAK,SAAU,SAAS;AAChD,cAAI,MAAM,QAAQ,YAAY,OAAO;AACrC,cAAI,YAAY,IAAI,CAAC;AACrB,cAAI,QAAQ,QAAQ,WAAW,EAAE;AACjC,cAAI,OAAO,MAAM;AACjB,cAAI,SAAS,KAAK;AAChB,mBAAO,qBAAqB,WAAW,WAAW,GAAG;AAAA,UACvD,OAAO;AACL,mBAAO,sBAAsB,WAAW,WAAW,GAAG;AAAA,UACxD;AAAA,QACF,CAAC;AAAA,MACH;AACA,eAAS,sBAAsB,WAAW,WAAW,KAAK;AACxD,YAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,YAAI,WAAW,IAAI;AACnB,YAAI,aAAa,OAAQ,YAAW;AACpC,YAAI;AACJ,YAAI,UAAU;AACZ,cAAI,QAAQ,UAAU;AACtB,cAAI,UAAU,cAAc,KAAK,GAAG;AAGlC,mBAAO;AAAA,UACT;AACA,yBAAe,UAAU,MAAM,EAAE,MAAM;AAAA,QACzC,OAAO;AACL,yBAAe;AAAA,QACjB;AACA,YAAI,cAAc,UAAU;AAC5B,YAAIpC,UAAS,YAAY;AACzB,YAAI,UAAU,IAAI,KAAK;AACvB,iBAAS,IAAI,GAAG,IAAIA,UAAS,GAAG,KAAK;AACnC,kBAAQ,QAAQ,YAAY,CAAC;AAC7B,kBAAQ,MAAM,YAAY,IAAI,CAAC;AAC/B,cAAI,iBAAiB,cAAc,OAAO,GAAG;AAC3C,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,eAAS,qBAAqB,UAAU,SAAS,KAAK;AACpD,eAAO,QAAQ,cAAc,SAAS,KAAK,KAAK,sBAAsB,UAAU,QAAQ,MAAM,EAAE,MAAM,GAAG,GAAG;AAAA,MAC9G;AACA,eAAS,sBAAsB,IAAI,IAAI,IAAI,IAAI;AAC7C,YAAIwC,OAAM,KAAK;AACf,YAAIC,OAAM,KAAK;AACf,YAAI,QAAQA,KAAI,EAAE;AAClB,YAAI,QAAQD,KAAI,EAAE;AAClB,YAAI,QAAQC,KAAI,EAAE;AAClB,YAAI,QAAQD,KAAI,EAAE;AAClB,YAAI,SAAS,QAAQ;AACrB,YAAI,SAAS,QAAQ;AACrB,YAAI,UAAU,QAAQ;AACtB,YAAI,SAAS,QAAQ;AACrB,YAAI,SAAS,QAAQ;AACrB,YAAI,UAAU,QAAQ;AACtB,YAAI,MAAM,GAAG,IAAI,GAAG;AACpB,YAAI,MAAM,GAAG,IAAI,GAAG;AACpB,YAAI,MAAM,GAAG,IAAI,GAAG;AACpB,YAAI,MAAM,GAAG,IAAI,GAAG;AACpB,YAAI,KAAK,MAAM,SAAS,MAAM;AAC9B,YAAI,KAAK,MAAM,SAAS,MAAM;AAC9B,YAAI,KAAK,MAAM,SAAS,MAAM;AAC9B,YAAI,KAAK,MAAM,SAAS,MAAM;AAC9B,YAAI,KAAK,KAAK,MAAM,OAAO;AAC3B,YAAI,KAAK,KAAK,MAAM,OAAO;AAC3B,YAAI,KAAK,KAAK,KAAK,GAAG,IAAI,KAAK,GAAG;AAClC,YAAI,KAAK,KAAK,KAAK,GAAG,IAAI,KAAK,GAAG;AAClC,YAAI,KAAK,CAAC,KAAK,GAAG,IAAI,IAAI,KAAK,GAAG;AAClC,YAAI,KAAK,CAAC,KAAK,GAAG,IAAI,IAAI,KAAK,GAAG;AAClC,YAAI,KAAK,KAAK,GAAG,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM;AACxE,YAAI,KAAK,KAAK,GAAG,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM;AACxE,aAAK,KAAK;AACV,aAAK,KAAK;AACV,aAAK,KAAK;AACV,aAAK,KAAK;AACV,aAAK,KAAK;AACV,aAAK,KAAK;AACV,YAAI,KAAK,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;AACxD,YAAI,KAAK,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;AACxD,YAAI,KAAK,cAAc,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;AAC5K,YAAI,KAAK,cAAc,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;AAC5K,YAAI,SAAS,KAAK,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AACtC,YAAI,SAAS,KAAK,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AACtC,YAAI,SAAS,KAAK,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AACtC,YAAI,KAAK,KAAK,CAAC,CAAC,IAAI,QAAQ,MAAM,GAAG,CAAC,QAAQ,IAAI,MAAM,CAAC,CAAC;AAC1D,YAAI,KAAK,MAAM,KAAK,KAAK,KAAK,IAAI;AAChC,iBAAO;AAAA,QACT;AACA,eAAO;AAAA,MACT;AACA,eAAS,KAAK,GAAG;AACf,eAAO,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;AAAA,MAC7C;AACA,eAAS,KAAK,GAAG;AACf,eAAO,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;AAAA,MACzL;AACA,UAAI,gBAAgB;AAAA,QAClB;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAGA,UAAI,eAAe;AACnB,UAAIE,KAAI;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAIA,UAAIhD,KAAI,WAAY;AAClB,YAAI,SAAS,OAAO,WAAW,YAAY,CAAC,CAAC,OAAO;AAGpD,YAAI,CAAC,QAAQ;AAEX,iBAAO,WAAY;AACjB,kBAAM,IAAI,MAAM,oCAAoC;AAAA,UACtD;AAAA,QACF;AAGA,YAAI,KAAK;AAAA,UACP,KAAK;AAAA,UACL,OAAO;AAAA,UACP,KAAK;AAAA,UACL,OAAO;AAAA,UACP,OAAO;AAAA,QACT;AACA,YAAI,aAAa;AAGjB,YAAI,OAAO;AACX,YAAIiD,MAAK,KAAK;AACd,YAAIC,SAAQ,KAAK;AACjB,YAAIL,QAAO,KAAK;AAChB,YAAInB,OAAM,KAAK;AACf,YAAIC,OAAM,KAAK;AACf,YAAImB,OAAM,KAAK;AACf,YAAIC,OAAM,KAAK;AACf,YAAI/C,KAAI,SAAU,IAAI,OAAO,UAAU;AAErC,cAAI,EAAE,gBAAgBA,KAAI;AACxB,mBAAOA,GAAE,MAAM,OAAO,OAAOA,GAAE,SAAS,GAAG,SAAS;AAAA,UACtD;AACA,cAAI,CAAC,IAAI;AACP;AAAA,UACF;AACA,cAAIA,GAAE,IAAI,EAAE,GAAG;AACb,iBAAK,GAAG;AAAA,UACV;AACA,kBAAQ,SAAS,CAAC;AAClB,cAAIA,GAAE,SAAS,EAAE,GAAG;AAClB,iBAAK,GAAG,KAAK;AACb,gBAAI,GAAG,YAAY,MAAM,OAAO;AAE9B,mBAAKA,GAAE,kBAAkB;AAAA,YAC3B,WAAW,GAAG,CAAC,MAAM,KAAK;AAIxB,kBAAI,SAASA,GAAE,kBAAkB,EAAE;AAInC,kBAAI,OAAO,WAAW,SAAS,GAAG;AAEhC,oBAAI,cAAc,CAAC;AACnB,oBAAI,GAAG;AACP,qBAAK,IAAI,GAAG,MAAM,OAAO,WAAW,QAAQ,IAAI,KAAK,KAAK;AACxD,sBAAI,YAAY,OAAO,WAAW,CAAC;AACnC,8BAAY,KAAK,IAAIA,GAAE,SAAS,WAAW,WAAW,IAAI,CAAC,CAAC;AAAA,gBAC9D;AACA,uBAAO;AAAA,cACT;AACA,mBAAK,SAAS,WAAW,OAAO,YAAY,IAAI;AAAA,YAClD,OAAO;AACL,mBAAK,SAAS,gBAAgB,GAAG,KAAK,EAAE;AAAA,YAC1C;AACA,YAAAA,GAAE,SAAS,EAAE;AAAA,UACf;AACA,eAAK,OAAO;AACZ,eAAK,cAAc,KAAK;AACxB,cAAI,UAAU;AACZ,iBAAK,OAAO,QAAQ;AAAA,UACtB;AACA,iBAAO;AAAA,QACT;AACA,YAAI,aAAaA,GAAE;AACnB,eAAO,eAAe,YAAY,MAAM;AAAA,UACtC,YAAY;AAAA,UACZ,KAAK,WAAY;AACf,mBAAO,KAAK,KAAK;AAAA,UACnB;AAAA,UACA,KAAK,SAAUmD,KAAI;AACjB,iBAAK,KAAK,KAAKA;AAAA,UACjB;AAAA,QACF,CAAC;AAMD,mBAAW,wBAAwB,SAAU,QAAQ;AACnD,cAAI,OAAO,KAAK;AAChB,cAAInD,GAAE,qBAAqB,MAAM,KAAKA,GAAE,qBAAqB,IAAI,GAAG;AAClE,gBAAI,YAAYA,GAAE,OAAO,MAAM,EAAE,aAAa;AAC9C,gBAAI,UAAU,KAAK,aAAa;AAChC,gBAAI,aAAa,SAAS;AACxB,qBAAO,UAAU,QAAQ,EAAE,SAAS,OAAO;AAAA,YAC7C;AAAA,UACF;AAEA,iBAAOA,GAAE,gBAAgB;AAAA,QAC3B;AAOA,mBAAW,YAAY,SAAU,QAAQ,KAAK;AAC5C,cAAI,OAAO,KAAK;AAChB,cAAIA,GAAE,YAAY,MAAM,GAAG;AACzB,mBAAOA,GAAE,wBAAwB,KAAK,KAAK,WAAW,CAAC;AAAA,UACzD;AACA,cAAI,OAAO,IAAI,UAAU;AACvB,mBAAO,KAAK,KAAK,aAAaA,GAAE,wBAAwB,MAAM,CAAC;AAAA,UACjE;AACA,cAAI,eAAeA,GAAE,mBAAmB,MAAM;AAC9C,eAAK,UAAU,QAAQ,WAAW,YAAY;AAC9C,iBAAO;AAAA,QACT;AACA,mBAAW,YAAY,SAAU,IAAI,IAAI,KAAK;AAC5C,gBAAM,OAAO,CAAC;AACd,eAAK,MAAM;AACX,cAAI,gBAAgB,KAAK,KAAK,WAAW,KAAK;AAC9C,cAAI,YAAYA,GAAE,qBAAqB,aAAa;AACpD,0BAAgB,UAAU;AAE1B,cAAIA,GAAE,YAAY,EAAE,GAAG;AACrB,mBAAO,UAAU;AAAA,UACnB;AACA,0BAAgB,cAAc,QAAQ,uBAAuB,EAAE,EAAE,KAAK;AACtE,cAAI,QAAQ,IAAI,WAAW,KAAK,UAAU,UAAU,KAAK;AACzD,cAAI,QAAQ,IAAI,WAAW,KAAK,UAAU,UAAU,KAAK;AACzD,cAAI,eAAe,eAAe,QAAQ,MAAM,QAAQ;AAIxD,eAAK,KAAK,cAAc,eAAe,MAAM,eAAe,KAAK,CAAC;AAClE,iBAAO;AAAA,QACT;AACA,mBAAW,SAAS,SAAU,OAAO,IAAI,IAAI,KAAK;AAChD,gBAAM,OAAO,CAAC;AACd,cAAI,gBAAgB,KAAK,KAAK,WAAW,KAAK;AAC9C,cAAI,YAAYA,GAAE,qBAAqB,aAAa;AACpD,0BAAgB,UAAU;AAG1B,cAAIA,GAAE,YAAY,KAAK,GAAG;AACxB,mBAAO,UAAU;AAAA,UACnB;AACA,0BAAgB,cAAc,QAAQ,oBAAoB,EAAE,EAAE,KAAK;AACnE,mBAAS;AACT,cAAI,WAAW,IAAI,WAAW,QAAQ,UAAU,OAAO,QAAQ;AAC/D,cAAI,YAAY,OAAO,UAAa,OAAO,SAAY,MAAM,KAAK,MAAM,KAAK;AAC7E,cAAI,YAAY,YAAY,WAAW,YAAY;AACnD,eAAK,KAAK,cAAc,gBAAgB,MAAM,WAAW,KAAK,CAAC;AAC/D,iBAAO;AAAA,QACT;AAGA,mBAAW,QAAQ,SAAU,IAAI,IAAI;AACnC,eAAKA,GAAE,YAAY,EAAE,IAAI,KAAK;AAC9B,cAAI,gBAAgB,KAAK,KAAK,WAAW,KAAK;AAC9C,cAAI,YAAYA,GAAE,qBAAqB,aAAa;AACpD,0BAAgB,UAAU;AAG1B,cAAIA,GAAE,YAAY,EAAE,GAAG;AACrB,mBAAO,UAAU;AAAA,UACnB;AACA,0BAAgB,cAAc,QAAQ,mBAAmB,EAAE,EAAE,KAAK;AAClE,cAAI,WAAW,WAAW,KAAK,MAAM,KAAK;AAC1C,eAAK,KAAK,cAAc,gBAAgB,MAAM,UAAU,KAAK,CAAC;AAC9D,iBAAO;AAAA,QACT;AAKA,mBAAW,OAAO,SAAU,wBAAwB,QAAQ;AAC1D,cAAI;AACJ,cAAI,OAAO,KAAK;AAChB,cAAI,kBAAkB,KAAK;AAI3B,cAAI,CAAC,iBAAiB;AACpB,mBAAO,IAAI,KAAK,GAAG,GAAG,GAAG,CAAC;AAAA,UAC5B;AACA,cAAI;AACF,kBAAM,KAAK,QAAQ;AAAA,UACrB,SAAS,GAAG;AAEV,kBAAM;AAAA,cACJ,GAAG,KAAK;AAAA,cACR,GAAG,KAAK;AAAA,cACR,OAAO,KAAK;AAAA,cACZ,QAAQ,KAAK;AAAA,YACf;AAAA,UACF;AACA,cAAI,wBAAwB;AAC1B,mBAAO,IAAI,KAAK,GAAG;AAAA,UACrB;AACA,cAAI,SAAS,KAAK,sBAAsB,UAAU,eAAe;AACjE,iBAAOA,GAAE,cAAc,KAAK,MAAM;AAAA,QACpC;AAQA,mBAAW,UAAU,SAAU,KAAK;AAClC,cAAI,UAAU,CAAC;AACf,cAAI;AACJ,cAAI,OAAO,KAAK;AAChB,cAAI,kBAAkB,KAAK;AAK3B,cAAI,CAAC,mBAAmB,CAACA,GAAE,qBAAqB,IAAI,GAAG;AACrD,mBAAO,IAAI,KAAK,GAAG,GAAG,GAAG,CAAC;AAAA,UAC5B;AACA,cAAI,KAAK;AACP,gBAAI,IAAI,QAAQ;AAEd,sBAAQ,SAASA,GAAE,OAAO,IAAI,MAAM;AAAA,YACtC;AACA,gBAAI,IAAI,WAAW;AACjB,sBAAQ,YAAY,IAAI;AAAA,YAC1B;AAAA,UACF;AACA,cAAI,CAAC,QAAQ,WAAW;AACtB,gBAAI;AACF,2BAAa,KAAK,QAAQ;AAAA,YAC5B,SAAS,GAAG;AAEV,2BAAa;AAAA,gBACX,GAAG,KAAK;AAAA,gBACR,GAAG,KAAK;AAAA,gBACR,OAAO,KAAK;AAAA,gBACZ,QAAQ,KAAK;AAAA,cACf;AAAA,YACF;AACA,gBAAI,CAAC,QAAQ,QAAQ;AAEnB,qBAAO,IAAI,KAAK,UAAU;AAAA,YAC5B,OAAO;AAEL,kBAAI,SAAS,KAAK,sBAAsB,QAAQ,MAAM;AACtD,qBAAOA,GAAE,cAAc,YAAY,MAAM;AAAA,YAC3C;AAAA,UACF,OAAO;AAOL,gBAAI,WAAW,KAAK,SAAS;AAC7B,gBAAI,IAAI,SAAS;AACjB,gBAAI,MAAM,GAAG;AACX,qBAAO,KAAK,QAAQ;AAAA,gBAClB,QAAQ,QAAQ;AAAA,gBAChB,WAAW;AAAA,cACb,CAAC;AAAA,YACH;AAIA,gBAAI,CAAC,QAAQ,QAAQ;AAEnB,sBAAQ,SAAS;AAAA,YACnB;AAEA,qBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,kBAAI,eAAe,SAAS,CAAC;AAC7B,kBAAI;AAGJ,kBAAI,aAAa,SAAS,EAAE,WAAW,GAAG;AACxC,4BAAY,aAAa,QAAQ;AAAA,kBAC/B,QAAQ,QAAQ;AAAA,kBAChB,WAAW;AAAA,gBACb,CAAC;AAAA,cACH,OAAO;AAEL,4BAAY,aAAa,QAAQ;AAAA,kBAC/B,QAAQ,QAAQ;AAAA,kBAChB,WAAW;AAAA,gBACb,CAAC;AAAA,cACH;AACA,kBAAI,CAAC,YAAY;AAEf,6BAAa;AAAA,cACf,OAAO;AAEL,6BAAa,WAAW,MAAM,SAAS;AAAA,cACzC;AAAA,YACF;AACA,mBAAO;AAAA,UACT;AAAA,QACF;AAIA,iBAAS,mBAAmB,OAAO,KAAK;AACtC,oBAAU,QAAQ,CAAC;AACnB,cAAI,kBAAkBA,GAAE,UAAU;AAClC,cAAI,IAAI,MAAM;AACd,cAAI,KAAK,MAAM,YAAY,MAAM,QAAW;AAM1C,gBAAI,aAAaA,GAAE,MAAM,EAAE,KAAK,KAAK,CAAC,EAAE,SAAS,IAAI,KAAK,CAAC;AAC3D,4BAAgB,KAAK,cAAc,MAAM,WAAW,EAAE;AAAA,UACxD;AACA,cAAIA,GAAE,SAAS,KAAK,GAAG;AAOrB,4BAAgB,KAAK,KAAK;AAAA,UAC5B;AACA,iBAAO,gBAAgB;AAAA,QACzB;AACA,iBAAS,iBAAiB,UAAU,iBAAiB,KAAK;AACxD,kBAAQ,MAAM,CAAC;AACf,cAAI,2BAA2B,IAAI;AACnC,cAAI,MAAM,IAAI;AACd,cAAI,aAAa,IAAI;AACrB,cAAI,WAAW,IAAI;AACnB,cAAI,cAAc;AAClB,cAAI,cAAc,CAAC;AACnB,cAAI,QAAQ,gBAAgB,SAAS;AACrC,mBAAS,IAAI,GAAG,KAAK,OAAO,KAAK;AAC/B,gBAAI,aAAa,gBAAgB,CAAC;AAClC,gBAAI,WAAW;AACf,gBAAIA,GAAE,SAAS,UAAU,GAAG;AAC1B,kBAAI,kBAAkB,WAAW;AACjC,kBAAI,SAASA,GAAE,SAAS,eAAe;AACvC,kBAAI,YAAY,OAAO;AACvB,kBAAI,IAAI,WAAW;AACnB,kBAAI,OAAO,MAAM,OAAO;AACtB,qBAAK;AAAA,cACP;AACA,wBAAU,cAAc;AAExB,kBAAI,kBAAkB,gBAAgB,OAAO;AAC7C,kBAAI,iBAAiB;AACnB,uBAAO,SAAS,eAAe;AAAA,cACjC;AAKA,kBAAI,0BAA0B;AAC5B,uBAAO,KAAK,eAAe,WAAW,WAAW;AAAA,cACnD;AAEA,yBAAW,WAAW,gBAAgB,WAAW,CAAC;AAClD,kBAAI,CAAC,SAAS,QAAQ,GAAG;AACvB,2BAAW;AAAA,cACb;AACA,kBAAI,YAAY,WAAW,aAAa;AACtC,8BAAc;AAAA,cAChB;AAAA,YACF,OAAO;AACL,kBAAI,OAAO,MAAM,OAAO;AACtB,8BAAc;AAAA,cAChB;AACA,0BAAY,SAAS,eAAe,cAAc,GAAG;AACrD,kBAAI,YAAY,WAAW,aAAa;AACtC,8BAAc;AAAA,cAChB;AAAA,YACF;AACA,qBAAS,YAAY,SAAS;AAAA,UAChC;AACA,cAAI,aAAa;AACf,wBAAY,cAAc;AAAA,UAC5B;AACA,cAAI,YAAY;AACd,wBAAY,aAAa;AAAA,UAC3B,WAAW,aAAa;AACtB,wBAAY,aAAa,cAAc;AAAA,UACzC;AACA,iBAAO;AAAA,QACT;AACA,YAAI,UAAU;AACd,iBAAS,cAAc,IAAI,UAAU;AACnC,cAAI,YAAY,WAAW,EAAE;AAC7B,cAAI,QAAQ,KAAK,EAAE,GAAG;AACpB,mBAAO,YAAY;AAAA,UACrB;AACA,iBAAO;AAAA,QACT;AACA,iBAAS,YAAY,WAAW,cAAc,YAAY,YAAY;AACpE,cAAI,CAAC,MAAM,QAAQ,YAAY,GAAG;AAChC,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,aAAa;AACrB,cAAI,CAAC,GAAG;AACN,mBAAO;AAAA,UACT;AACA,cAAI,cAAc,aAAa,CAAC;AAChC,cAAI,YAAY,cAAc,YAAY,aAAa,UAAU,KAAK;AACtE,cAAI,eAAe;AACnB,cAAI,eAAe,cAAc,YAAY,UAAU;AACvD,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,0BAAc,aAAa,CAAC;AAC5B,gBAAI,cAAc,cAAc,YAAY,YAAY,UAAU,KAAK;AACvE,4BAAgB;AAAA,UAClB;AACA,cAAI,YAAY,cAAc,YAAY,aAAa,UAAU,KAAK;AACtE,cAAI;AACJ,kBAAQ,WAAW;AAAA,YACjB,KAAK;AACH,mBAAK,YAAY,IAAI,OAAO,YAAY,eAAe;AACvD;AAAA,YACF,KAAK;AACH,mBAAK,EAAE,OAAO,aAAa;AAC3B;AAAA,YACF;AAAA,YACA,KAAK;AACH,mBAAK,MAAM;AACX;AAAA,UACJ;AACA,iBAAO;AAAA,QACT;AACA,mBAAW,OAAO,SAAU,SAAS,KAAK;AACxC,cAAI,WAAW,OAAO,YAAY,UAAU;AAC1C,kBAAM,IAAI,MAAM,+DAA+D;AAAA,UACjF;AAIA,oBAAUA,GAAE,aAAa,OAAO;AAChC,kBAAQ,MAAM,CAAC;AAEf,cAAI,eAAe,IAAI;AAEvB,cAAI,MAAM,IAAI;AAEd,cAAI,WAAW,IAAI;AAEnB,cAAI,iBAAiB,IAAI;AACzB,cAAI,sBAAsB,mBAAmB,YAAY,mBAAmB,YAAY,mBAAmB;AAE3G,cAAI,IAAI,IAAI;AACZ,cAAI,MAAM,QAAW;AACnB,gBAAI,KAAK,KAAK,GAAG,KAAK;AAAA,UACxB;AAEA,cAAI,MAAM,IAAI;AACd,cAAI,cAAc,IAAI;AACtB,cAAI,eAAe,CAACA,GAAE,QAAQ,WAAW,GAAG;AAC1C,0BAAc,CAAC,WAAW;AAAA,UAC5B;AAEA,cAAI,oBAAoB,IAAI;AAC5B,cAAI,iBAAiB,sBAAsB;AAC3C,cAAI,aAAa,iBAAiB,UAAU,qBAAqB;AAEjE,eAAK,MAAM;AACX,eAAK,KAAK;AAAA;AAAA,YAER,aAAa;AAAA;AAAA;AAAA;AAAA,YAIb,WAAW,WAAW,eAAe,OAAO;AAAA,UAC9C,CAAC;AAGD,cAAI,WAAW,WAAW,KAAK,KAAK,WAAW,CAAC;AAChD,cAAI,CAAC,UAAU;AACb,uBAAW;AACX,gBAAI,uBAAuB,aAAa;AACtC,mBAAK,KAAK,aAAa,QAAQ;AAAA,YACjC;AAAA,UACF;AACA,cAAI,MAAM;AACV,cAAI;AACJ,cAAI,UAAU;AAEZ,gBAAI,OAAO,aAAa,UAAU;AAChC,yBAAW;AAAA,gBACT,GAAG;AAAA,cACL;AAAA,YACF;AACA,4BAAgB,mBAAmB,UAAU,IAAI;AAAA,UACnD,OAAO;AACL,4BAAgB,IAAI,uBAAuB;AAAA,UAC7C;AACA,cAAI,SAAS;AACb,cAAI,QAAQ,QAAQ,MAAM,IAAI;AAC9B,cAAI,eAAe,CAAC;AACpB,cAAI;AACJ,mBAAS,IAAI,GAAG,QAAQ,MAAM,SAAS,GAAG,KAAK,OAAO,KAAK;AACzD,gBAAI,KAAK;AACT,gBAAI,gBAAgB;AACpB,gBAAI,WAAW,IAAI,gBAAgB,GAAG,KAAK,OAAO;AAClD,gBAAImC,QAAO,MAAM,CAAC;AAClB,gBAAI;AACJ,gBAAIA,OAAM;AACR,kBAAI,aAAa;AAEf,oBAAI,kBAAkBnC,GAAE,eAAemC,OAAM,aAAa;AAAA,kBACxD,QAAQ,CAAC;AAAA,kBACT,0BAA0B;AAAA,gBAC5B,CAAC;AACD,8BAAc,iBAAiB,UAAU,iBAAiB;AAAA,kBACxD,0BAA0B;AAAA,kBAC1B,KAAK,MAAM,SAAS;AAAA,kBACpB,YAAY,iBAAiB,OAAO;AAAA,kBACpC,UAAU;AAAA,gBACZ,CAAC;AAED,oBAAI,cAAc,YAAY;AAC9B,oBAAI,eAAe,kBAAkB,MAAM,GAAG;AAC5C,uBAAK;AAAA,gBACP;AACA,oBAAI,MAAM,GAAG;AACX,+BAAa,YAAY,cAAc;AAAA,gBACzC;AAAA,cACF,OAAO;AACL,oBAAI,OAAO,MAAM,OAAO;AACtB,kBAAAA,SAAQ;AAAA,gBACV;AACA,yBAAS,cAAcA;AAAA,cACzB;AAAA,YACF,OAAO;AAIL,uBAAS,cAAc;AACvB,+BAAiB;AAGjB,kBAAI,gBAAgB,SAAS;AAC7B,4BAAc,cAAc;AAC5B,4BAAc,gBAAgB;AAC9B,kBAAI,aAAa;AAEf,8BAAc,CAAC;AACf,kCAAkBnC,GAAE,uBAAuB,aAAa,MAAM;AAC9D,oBAAI,eAAe;AAEnB,yBAAS,IAAI,gBAAgB,QAAQ,IAAI,GAAG,KAAK;AAC/C,sBAAI,QAAQ,gBAAgB,IAAI,CAAC,EAAE;AACnC,sBAAI,CAAC,SAAS,EAAE,eAAe,QAAQ;AACrC;AAAA,kBACF;AACA,sBAAI,KAAK,WAAW,MAAM,WAAW,CAAC;AACtC,sBAAI,SAAS,EAAE,GAAG;AAChB,mCAAe;AACf;AAAA,kBACF;AAAA,gBACF;AACA,oBAAI,gBAAgB;AAClB,sBAAI,IAAI,GAAG;AACT,yBAAK,eAAe;AAAA,kBACtB,OAAO;AACL,iCAAa,eAAe;AAAA,kBAC9B;AAAA,gBACF;AAEA,yBAAS,aAAa,aAAa,YAAY;AAC/C,4BAAY,cAAc;AAAA,cAC5B;AAAA,YACF;AACA,gBAAI,aAAa;AACf,2BAAa,KAAK,WAAW;AAAA,YAC/B;AACA,gBAAI,IAAI,GAAG;AACT,uBAAS,aAAa,MAAM,EAAE;AAAA,YAChC;AAEA,gBAAI,IAAI,KAAK,UAAU;AACrB,uBAAS,aAAa,KAAK,CAAC;AAAA,YAC9B;AACA,qBAAS,UAAU,UAAU;AAC7B,0BAAc,YAAY,QAAQ;AAClC,sBAAUmC,MAAK,SAAS;AAAA,UAC1B;AAEA,cAAI,qBAAqB;AACvB,gBAAI,aAAa;AACf,mBAAK,YAAY,gBAAgB,cAAc,UAAU,UAAU;AAAA,YACrE,WAAW,mBAAmB,OAAO;AAEnC,mBAAK;AAAA,YACP,OAAO;AACL,kBAAI;AACJ,kBAAI,QAAQ,GAAG;AACb,qBAAK,WAAW,UAAU,KAAK;AAC/B,sBAAM;AACN,oBAAI,CAAC,QAAQ,KAAK,UAAU,GAAG;AAC7B,wBAAM;AAAA,gBACR;AAAA,cACF,OAAO;AAEL,qBAAK;AAAA,cACP;AACA,sBAAQ,gBAAgB;AAAA,gBACtB,KAAK;AACH,uBAAK,MAAM,KAAK,IAAI;AACpB;AAAA,gBACF,KAAK;AACH,uBAAK,CAAC,KAAK,MAAM;AACjB;AAAA,cACJ;AAAA,YACF;AAAA,UACF,OAAO;AACL,gBAAI,mBAAmB,GAAG;AACxB,mBAAK;AAAA,YACP,WAAW,gBAAgB;AACzB,mBAAK;AAAA,YACP,OAAO;AAEL,mBAAK;AAEL,kBAAI,KAAK,KAAK,GAAG,MAAM,MAAM;AAC3B,qBAAK,KAAK,KAAK,cAAc,OAAO;AAAA,cACtC;AAAA,YACF;AAAA,UACF;AACA,wBAAc,WAAW,aAAa,MAAM,EAAE;AAE9C,eAAK,OAAO,aAAa;AACzB,iBAAO;AAAA,QACT;AAOA,mBAAW,aAAa,SAAU,MAAM;AACtC,cAAI,WAAW,eAAe,IAAI;AAClC,cAAI,MAAMnC,GAAE,YAAY,QAAQ;AAChC,cAAIoD,MAAK,IAAI;AACb,cAAI,QAAQ,IAAI;AAChB,cAAI,KAAK,KAAK;AACd,cAAIA,KAAI;AACN,gBAAI,GAAG,eAAeA,KAAI,KAAK,GAAG;AAChC,iBAAG,kBAAkBA,KAAI,KAAK;AAAA,YAChC;AAAA,UACF,WAAW,GAAG,aAAa,QAAQ,GAAG;AACpC,eAAG,gBAAgB,QAAQ;AAAA,UAC7B;AACA,iBAAO;AAAA,QACT;AACA,mBAAW,OAAO,SAAU,MAAM,OAAO;AACvC,cAAIpD,GAAE,YAAY,IAAI,GAAG;AAEvB,gBAAIqD,cAAa,KAAK,KAAK;AAC3B,gBAAI,QAAQ,CAAC;AACb,qBAAS,IAAI,GAAG,IAAIA,YAAW,QAAQ,KAAK;AAC1C,oBAAMA,YAAW,CAAC,EAAE,IAAI,IAAIA,YAAW,CAAC,EAAE;AAAA,YAC5C;AACA,mBAAO;AAAA,UACT;AACA,cAAIrD,GAAE,SAAS,IAAI,KAAKA,GAAE,YAAY,KAAK,GAAG;AAC5C,mBAAO,KAAK,KAAK,aAAa,eAAe,IAAI,CAAC;AAAA,UACpD;AACA,cAAI,OAAO,SAAS,UAAU;AAC5B,qBAAS,YAAY,MAAM;AACzB,kBAAI,KAAK,eAAe,QAAQ,GAAG;AACjC,qBAAK,aAAa,UAAU,KAAK,QAAQ,CAAC;AAAA,cAC5C;AAAA,YACF;AAAA,UACF,OAAO;AACL,iBAAK,aAAa,MAAM,KAAK;AAAA,UAC/B;AACA,iBAAO;AAAA,QACT;AACA,mBAAW,gBAAgB,WAAY;AACrC,cAAI,UAAU,KAAK,QAAQ;AAC3B,cAAI,YAAY,QAAQ;AACtB,iBAAK,KAAK,KAAKA,GAAE,kBAAkB,KAAK,KAAK,GAAG,CAAC,CAAC;AAAA,UACpD;AACA,iBAAO;AAAA,QACT;AACA,mBAAW,SAAS,WAAY;AAC9B,cAAI,KAAK,KAAK,YAAY;AACxB,iBAAK,KAAK,WAAW,YAAY,KAAK,IAAI;AAAA,UAC5C;AACA,iBAAO;AAAA,QACT;AACA,mBAAW,QAAQ,WAAY;AAC7B,iBAAO,KAAK,KAAK,YAAY;AAC3B,iBAAK,KAAK,YAAY,KAAK,KAAK,UAAU;AAAA,UAC5C;AACA,iBAAO;AAAA,QACT;AAOA,mBAAW,gBAAgB,SAAU,OAAO;AAC1C,mBAAS,OAAO,OAAO;AACrB,gBAAI,MAAM,eAAe,GAAG,GAAG;AAC7B,mBAAK,aAAa,KAAK,MAAM,GAAG,CAAC;AAAA,YACnC;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AACA,mBAAW,SAAS,SAAU,KAAK;AACjC,cAAI,CAACA,GAAE,QAAQ,GAAG,GAAG;AACnB,kBAAM,CAAC,GAAG;AAAA,UACZ;AACA,mBAAS,IAAI,GAAG,MAAM,IAAI,QAAQ,IAAI,KAAK,KAAK;AAC9C,iBAAK,KAAK,YAAYA,GAAE,OAAO,IAAI,CAAC,CAAC,CAAC;AAAA,UACxC;AACA,iBAAO;AAAA,QACT;AACA,mBAAW,UAAU,SAAU,KAAK;AAClC,cAAI,QAAQ,KAAK,KAAK;AACtB,iBAAO,QAAQA,GAAE,KAAK,EAAE,OAAO,GAAG,IAAI,KAAK,OAAO,GAAG;AAAA,QACvD;AACA,mBAAW,SAAS,SAAU,KAAK;AACjC,cAAI,OAAO,KAAK;AAChB,cAAIsD,UAAS,KAAK;AAClB,cAAIA,SAAQ;AACV,gBAAI,CAACtD,GAAE,QAAQ,GAAG,GAAG;AACnB,oBAAM,CAAC,GAAG;AAAA,YACZ;AACA,qBAAS,IAAI,GAAG,MAAM,IAAI,QAAQ,IAAI,KAAK,KAAK;AAC9C,cAAAsD,QAAO,aAAatD,GAAE,OAAO,IAAI,CAAC,CAAC,GAAG,IAAI;AAAA,YAC5C;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AACA,mBAAW,WAAW,SAAU,MAAM;AACpC,UAAAA,GAAE,OAAO,IAAI,EAAE,YAAY,KAAK,IAAI;AACpC,iBAAO;AAAA,QACT;AACA,mBAAW,MAAM,WAAY;AAC3B,iBAAO,KAAK,gBAAgB,OAAO,gBAAgB,OAAOA,GAAE,KAAK,KAAK,eAAe;AAAA,QACvF;AACA,mBAAW,UAAU,WAAY;AAC/B,iBAAO,KAAK,KAAK,QAAQ,YAAY;AAAA,QACvC;AACA,mBAAW,OAAO,WAAY;AAC5B,cAAI,UAAU,KAAK,IAAI,KAAK;AAC5B,cAAI,WAAW,QAAQ,KAAK,qBAAqB,MAAM,EAAE,CAAC;AAC1D,cAAI,UAAU;AACZ,mBAAOA,GAAE,QAAQ;AAAA,UACnB;AACA,iBAAOA,GAAE,MAAM,EAAE,SAAS,OAAO;AAAA,QACnC;AACA,mBAAW,QAAQ,WAAY;AAC7B,cAAIuD,SAAQvD,GAAE,KAAK,KAAK;AAAA,YAAU;AAAA;AAAA,UAAe,CAAC;AAElD,UAAAuD,OAAM,KAAK,KAAKvD,GAAE,SAAS;AAC3B,iBAAOuD;AAAA,QACT;AACA,mBAAW,UAAU,SAAU,UAAU;AACvC,cAAI,QAAQ,KAAK,KAAK,cAAc,QAAQ;AAC5C,iBAAO,QAAQvD,GAAE,KAAK,IAAI;AAAA,QAC5B;AACA,mBAAW,OAAO,SAAU,UAAU;AACpC,cAAI,OAAO,CAAC;AACZ,cAAI,QAAQ,KAAK,KAAK,iBAAiB,QAAQ;AAC/C,cAAI,OAAO;AAET,qBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,mBAAK,KAAKA,GAAE,MAAM,CAAC,CAAC,CAAC;AAAA,YACvB;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAGA,mBAAW,WAAW,WAAY;AAChC,cAAI,WAAW,KAAK,KAAK;AACzB,cAAI,cAAc,CAAC;AACnB,mBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,gBAAI,eAAe,SAAS,CAAC;AAC7B,gBAAI,aAAa,aAAa,GAAG;AAC/B,0BAAY,KAAKA,GAAE,SAAS,CAAC,CAAC,CAAC;AAAA,YACjC;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAGA,mBAAW,SAAS,WAAY;AAC9B,iBAAOA,GAAE,KAAK,KAAK,UAAU,KAAK;AAAA,QACpC;AAAA,QAEA,WAAW,QAAQ,WAAY;AAC7B,cAAIK,SAAQ;AACZ,cAAI,OAAO,KAAK,KAAK;AACrB,iBAAO,MAAM;AAEX,gBAAI,KAAK,aAAa,GAAG;AACvB,cAAAA;AAAA,YACF;AACA,mBAAO,KAAK;AAAA,UACd;AACA,iBAAOA;AAAA,QACT;AACA,mBAAW,oBAAoB,SAAUmD,YAAW,YAAY;AAC9D,cAAI,kBAAkB,KAAK,KAAK;AAChC,cAAI,OAAO,KAAK,KAAK;AACrB,iBAAO,QAAQ,SAAS,cAAc,SAAS,iBAAiB;AAC9D,gBAAI,MAAMxD,GAAE,IAAI;AAChB,gBAAI,IAAI,SAASwD,UAAS,GAAG;AAC3B,qBAAO;AAAA,YACT;AACA,mBAAO,KAAK;AAAA,UACd;AACA,iBAAO;AAAA,QACT;AAGA,mBAAW,WAAW,SAAU,IAAI;AAClC,cAAI,IAAI,KAAK;AACb,cAAI,IAAIxD,GAAE,OAAO,EAAE;AACnB,cAAI,MAAM,KAAK,EAAE;AACjB,iBAAO,MAAM,OAAO,CAAC,EAAE,OAAO,IAAI,aAAa,KAAK,EAAE,wBAAwB,GAAG,IAAI;AAAA,QACvF;AAGA,mBAAW,eAAe,SAAU,GAAG,GAAG;AACxC,cAAIyD,OAAM,KAAK,IAAI,EAAE;AACrB,cAAI,IAAIA,KAAI,eAAe;AAC3B,YAAE,IAAI;AACN,YAAE,IAAI;AACN,cAAI;AACF,gBAAI,cAAc,EAAE,gBAAgBA,KAAI,aAAa,EAAE,QAAQ,CAAC;AAChE,gBAAI,sBAAsB,KAAK,sBAAsBA,IAAG,EAAE,QAAQ;AAAA,UACpE,SAAS,GAAG;AAGV,mBAAO;AAAA,UACT;AACA,iBAAO,YAAY,gBAAgB,mBAAmB;AAAA,QACxD;AACA,mBAAW,yBAAyB,SAAU,GAAG;AAC/C,cAAIjC,QAAO,KAAK,QAAQ;AAAA,YACtB,QAAQ,KAAK,IAAI;AAAA,UACnB,CAAC;AACD,cAAIgB,UAAShB,MAAK,OAAO;AACzB,eAAK,UAAU,EAAE,IAAIgB,QAAO,GAAG,EAAE,IAAIA,QAAO,CAAC;AAC7C,iBAAO;AAAA,QACT;AAOA,mBAAW,yBAAyB,SAAU,UAAU,WAAW,QAAQ;AACzE,qBAAW,IAAI,MAAM,QAAQ;AAC7B,sBAAY,IAAI,MAAM,SAAS;AAC/B,qBAAW,SAAS,KAAK,IAAI;AAM7B,cAAIZ,SAAQ,KAAK,MAAM;AACvB,eAAK,KAAK,aAAa,EAAE;AACzB,cAAIJ,QAAO,KAAK,QAAQ;AAAA,YACtB;AAAA,UACF,CAAC,EAAE,MAAMI,OAAM,IAAIA,OAAM,EAAE;AAG3B,cAAI,oBAAoB5B,GAAE,mBAAmB;AAC7C,4BAAkB,aAAa,CAACwB,MAAK,IAAIA,MAAK,QAAQ,GAAG,CAACA,MAAK,IAAIA,MAAK,SAAS,CAAC;AAGlF,cAAI,qBAAqBxB,GAAE,mBAAmB;AAC9C,cAAI,QAAQ,SAAS,aAAa,WAAW,SAAS,MAAM,EAAE,OAAO,GAAG,CAAC,CAAC;AAC1E,cAAI,OAAO;AACT,+BAAmB,UAAU,OAAO,GAAG,CAAC;AAAA,UAC1C;AAGA,cAAI,sBAAsBA,GAAE,mBAAmB;AAC/C,cAAI,gBAAgB,SAAS,MAAM,EAAE,KAAK,WAAWwB,MAAK,QAAQ,CAAC;AACnE,8BAAoB,aAAa,IAAI,SAAS,IAAI,cAAc,GAAG,IAAI,SAAS,IAAI,cAAc,CAAC;AAGnG,cAAI,MAAM,KAAK,sBAAsB,MAAM;AAG3C,cAAI,YAAYxB,GAAE,mBAAmB;AACrC,oBAAU,UAAU,oBAAoB,OAAO,SAAS,mBAAmB,OAAO,SAAS,kBAAkB,OAAO,SAAS,IAAI,MAAM4B,OAAM,IAAIA,OAAM,EAAE,CAAC,CAAC,CAAC,CAAC;AAC7J,eAAK,KAAK,aAAa5B,GAAE,wBAAwB,UAAU,MAAM,CAAC;AAClE,iBAAO;AAAA,QACT;AACA,mBAAW,mBAAmB,SAAU,OAAO0C,OAAM;AACnD,UAAAA,QAAO1C,GAAE,OAAO0C,KAAI;AACpB,cAAIS,MAAKnD,GAAE,SAAS0C,KAAI;AACxB,cAAI,gBAAgB1C,GAAE,iBAAiB,KAAK;AAC5C,cAAI,QAAQA,GAAE,SAAS;AAAA,YACrB,cAAc,MAAMmD;AAAA,UACtB,CAAC;AACD,wBAAc,OAAO,KAAK;AAC1B,eAAK,OAAO,aAAa;AACzB,cAAI;AACF,0BAAc,KAAK,aAAa;AAAA,UAClC,SAAS,GAAG;AAGV,gBAAI,SAAS,gBAAgB,aAAa,SAAS,MAAM,QAAQ;AAG/D,kBAAI,YAAY,cAAc;AAC9B,wBAAU,YAAY,CAAC;AACvB,kBAAI,cAAc,UAAU,aAAa,IAAI;AAC7C,kBAAI,aAAa;AACf,wBAAQ,WAAW,IAAI;AAAA,cACzB;AACA,kBAAI,UAAU,WAAW,SAAS;AAClC,uBAAS,IAAI,GAAG,MAAM,QAAQ,QAAQ,IAAI,KAAK,KAAK;AAClD,oBAAI,SAAS,QAAQ,CAAC;AACtB,oBAAI,WAAW,IAAI,SAAS,WAAW,QAAQ,CAAC;AAChD,0BAAU,KAAK,QAAQ;AACvB,0BAAU,UAAU,CAAC,IAAI;AACzB,yBAAS,SAAS;AAAA,cACpB;AAAA,YACF;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAIA,YAAI,wBAAwB;AAC5B,iBAAS,aAAa,KAAK;AACzB,cAAI,CAACnD,GAAE,SAAS,GAAG,GAAG;AACpB,mBAAO,CAAC;AAAA,UACV;AACA,iBAAO,IAAI,KAAK,EAAE,MAAM,qBAAqB,KAAK,CAAC;AAAA,QACrD;AACA,mBAAW,WAAW,SAAUwD,YAAW;AACzC,cAAI,CAACxD,GAAE,SAASwD,UAAS,GAAG;AAC1B,mBAAO;AAAA,UACT;AACA,iBAAO,KAAK,KAAK,UAAU,SAASA,WAAU,KAAK,CAAC;AAAA,QACtD;AACA,mBAAW,WAAW,SAAUA,YAAW;AACzC,cAAI;AACJ,WAAC,MAAM,KAAK,KAAK,WAAW,IAAI,MAAM,KAAK,aAAaA,UAAS,CAAC;AAClE,iBAAO;AAAA,QACT;AACA,mBAAW,cAAc,SAAUA,YAAW;AAC5C,cAAI;AACJ,WAAC,MAAM,KAAK,KAAK,WAAW,OAAO,MAAM,KAAK,aAAaA,UAAS,CAAC;AACrE,iBAAO;AAAA,QACT;AACA,mBAAW,cAAc,SAAUA,YAAW,OAAO;AACnD,cAAI,SAAS,aAAaA,UAAS;AACnC,mBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,iBAAK,KAAK,UAAU,OAAO,OAAO,CAAC,GAAG,KAAK;AAAA,UAC7C;AACA,iBAAO;AAAA,QACT;AAQA,mBAAW,SAAS,SAAU,UAAU;AACtC,qBAAW,YAAY;AACvB,cAAI,OAAO,KAAK;AAChB,cAAIlD,UAAS,KAAK,eAAe;AACjC,cAAI,UAAU,CAAC;AACf,cAAI,WAAW;AACf,cAAI;AACJ,iBAAO,WAAWA,SAAQ;AACxB,qBAAS,KAAK,iBAAiB,QAAQ;AACvC,oBAAQ,KAAK;AAAA,cACX,GAAG,OAAO;AAAA,cACV,GAAG,OAAO;AAAA,cACV;AAAA,YACF,CAAC;AACD,wBAAY;AAAA,UACd;AACA,iBAAO;AAAA,QACT;AACA,mBAAW,gBAAgB,WAAY;AACrC,cAAIoC,QAAO1C,GAAE,MAAM;AACnB,UAAA0C,MAAK,KAAK,KAAK,KAAK,CAAC;AACrB,cAAI,IAAI,KAAK,kBAAkB;AAC/B,cAAI,GAAG;AACL,YAAAA,MAAK,KAAK,KAAK,CAAC;AAAA,UAClB;AACA,iBAAOA;AAAA,QACT;AACA,mBAAW,oBAAoB,WAAY;AACzC,cAAI,UAAU,KAAK,QAAQ;AAC3B,kBAAQ,SAAS;AAAA,YACf,KAAK;AACH,qBAAO,KAAK,KAAK,GAAG;AAAA,YACtB,KAAK;AACH,qBAAO1C,GAAE,sBAAsB,KAAK,IAAI;AAAA,YAC1C,KAAK;AACH,qBAAOA,GAAE,yBAAyB,KAAK,IAAI;AAAA,YAC7C,KAAK;AACH,qBAAOA,GAAE,0BAA0B,KAAK,IAAI;AAAA,YAC9C,KAAK;AACH,qBAAOA,GAAE,yBAAyB,KAAK,IAAI;AAAA,YAC7C,KAAK;AACH,qBAAOA,GAAE,wBAAwB,KAAK,IAAI;AAAA,YAC5C,KAAK;AACH,qBAAOA,GAAE,sBAAsB,KAAK,IAAI;AAAA,UAC5C;AACA,gBAAM,IAAI,MAAM,UAAU,+BAA+B;AAAA,QAC3D;AACA,QAAAA,GAAE,UAAU,kBAAkB,WAAY;AACxC,cAAI,GAAG,GAAG,OAAO,QAAQ,IAAI,IAAI,GAAG,IAAI,IAAI,QAAQ,GAAG,IAAI,IAAI,IAAI;AACnE,kBAAQ,KAAK,QAAQ,GAAG;AAAA,YACtB,KAAK;AACH,kBAAI,WAAW,KAAK,KAAK,GAAG,CAAC,KAAK;AAClC,kBAAI,WAAW,KAAK,KAAK,GAAG,CAAC,KAAK;AAClC,sBAAQ,WAAW,KAAK,KAAK,OAAO,CAAC,KAAK;AAC1C,uBAAS,WAAW,KAAK,KAAK,QAAQ,CAAC,KAAK;AAC5C,qBAAO,IAAI,KAAK,GAAG,GAAG,OAAO,MAAM;AAAA,YACrC,KAAK;AACH,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,kBAAI,WAAW,KAAK,KAAK,GAAG,CAAC,KAAK;AAClC,qBAAO,IAAI,QAAQ;AAAA,gBACjB,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG,GAAG,CAAC;AAAA,YACT,KAAK;AACH,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,qBAAO,IAAI,QAAQ;AAAA,gBACjB,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG,IAAI,EAAE;AAAA,YACX,KAAK;AACH,uBAASA,GAAE,qBAAqB,IAAI;AACpC,qBAAO,IAAI,SAAS,MAAM;AAAA,YAC5B,KAAK;AACH,uBAASA,GAAE,qBAAqB,IAAI;AACpC,kBAAI,OAAO,SAAS,GAAG;AACrB,uBAAO,KAAK,OAAO,CAAC,CAAC;AAAA,cACvB;AACA,qBAAO,IAAI,SAAS,MAAM;AAAA,YAC5B,KAAK;AACH,kBAAI,KAAK,KAAK,GAAG;AACjB,kBAAI,CAAC,KAAK,gBAAgB,CAAC,GAAG;AAC5B,oBAAIA,GAAE,kBAAkB,CAAC;AAAA,cAC3B;AACA,qBAAO,IAAI,KAAK,CAAC;AAAA,YACnB,KAAK;AACH,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,mBAAK,WAAW,KAAK,KAAK,IAAI,CAAC,KAAK;AACpC,qBAAO,IAAI,KAAK;AAAA,gBACd,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,CAAC;AAAA,UACL;AAGA,iBAAO,KAAK,QAAQ;AAAA,QACtB;AAQA,mBAAW,mBAAmB,SAAU,KAAK,QAAQ;AACnD,cAAIyD,OAAM,KAAK,IAAI,EAAE;AACrB,mBAAS,UAAUA;AACnB,cAAIjC,QAAO,KAAK,QAAQ;AAAA,YACtB;AAAA,UACF,CAAC;AACD,cAAIgB,UAAShB,MAAK,OAAO;AACzB,cAAI,CAACA,MAAK,sCAAsC,GAAG,GAAG;AACpD,mBAAO;AAAA,UACT;AACA,cAAI;AACJ,cAAI,UAAU,KAAK,QAAQ;AAK3B,cAAI,YAAY,QAAQ;AACtB,gBAAI,QAAQ,IAAI,KAAK,WAAW,KAAK,KAAK,GAAG,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,GAAG,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,OAAO,CAAC,GAAG,WAAW,KAAK,KAAK,QAAQ,CAAC,CAAC;AAEtJ,gBAAI,aAAa,KAAK,sBAAsB,MAAM;AAElD,gBAAI,uBAAuBxB,GAAE,gBAAgB,UAAU;AAGvD,gBAAI,gBAAgByD,KAAI,mBAAmB;AAC3C,0BAAc,UAAU,CAAC,qBAAqB,UAAUjB,QAAO,GAAGA,QAAO,CAAC;AAC1E,gBAAIH,QAAOrC,GAAE,cAAc,OAAO,cAAc,OAAO,SAAS,UAAU,CAAC;AAC3E,mBAAO,IAAI,KAAKqC,KAAI,EAAE,sCAAsC,KAAK,qBAAqB,QAAQ;AAAA,UAChG,WAAW,YAAY,UAAU,YAAY,aAAa,YAAY,cAAc,YAAY,YAAY,YAAY,WAAW;AACjI,gBAAI,WAAW,YAAY,SAAS,OAAO,KAAK,cAAc;AAC9D,gBAAI,UAAU,SAAS,OAAO;AAC9B,gBAAI,cAAc;AAClB,gBAAI,iBAAiB,CAAC;AACtB,gBAAI,GAAG,QAAQ,IAAI,gBAAgB,aAAa;AAChD,iBAAK,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACnC,uBAAS,QAAQ,CAAC;AAElB,mBAAKrC,GAAE,eAAe,OAAO,GAAG,OAAO,CAAC;AACxC,mBAAK,GAAG,gBAAgB,KAAK,sBAAsB,MAAM,CAAC;AAC1D,uBAAS,IAAI,MAAM,EAAE;AACrB,+BAAiB,OAAO,SAASwC,OAAM;AAIvC,4BAAc,OAAO,SAAS,GAAG,IAAI;AACrC,yBAAW,iBAAiB;AAC5B,kBAAI,WAAW,aAAa;AAC1B,8BAAc;AACd,iCAAiB,CAAC;AAAA,kBAChB;AAAA,kBACA;AAAA,gBACF,CAAC;AAAA,cACH,WAAW,WAAW,cAAc,GAAG;AACrC,+BAAe,KAAK;AAAA,kBAClB;AAAA,kBACA;AAAA,gBACF,CAAC;AAAA,cACH;AAAA,YACF;AACA,2BAAe,KAAK,SAAU,GAAG,GAAG;AAClC,qBAAO,EAAE,cAAc,EAAE;AAAA,YAC3B,CAAC;AACD,gBAAI,eAAe,CAAC,GAAG;AACrB,qBAAO,eAAe,CAAC,EAAE;AAAA,YAC3B;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAQA,mBAAW,eAAe,SAAU,MAAM,OAAO;AAC/C,cAAI,KAAK,KAAK;AACd,cAAI,UAAU,MAAM;AAClB,iBAAK,WAAW,IAAI;AACpB,mBAAO;AAAA,UACT;AACA,cAAI,WAAW,eAAe,IAAI;AAClC,cAAI,MAAMxC,GAAE,YAAY,QAAQ;AAChC,cAAIoD,MAAK,IAAI;AACb,cAAIA,KAAI;AAGN,eAAG,eAAeA,KAAI,UAAU,KAAK;AAAA,UACvC,WAAW,aAAa,MAAM;AAC5B,eAAG,KAAK;AAAA,UACV,OAAO;AACL,eAAG,aAAa,UAAU,KAAK;AAAA,UACjC;AACA,iBAAO;AAAA,QACT;AAIA,QAAApD,GAAE,oBAAoB,SAAU,SAAS;AACvC,cAAI,SAAS;AACX,gBAAI,YAAY,iBAAkB,GAAG,MAAM,oBAAsB,GAAG,QAAQ,gBAAkB,aAAa,OAAQ,UAAU;AAC7H,gBAAI,MAAMA,GAAE,SAAS,WAAW;AAAA,cAC9B,OAAO;AAAA,YACT,CAAC;AACD,gBAAI,kBAAkB,IAAI;AAC1B,mBAAO;AAAA,UACT;AACA,cAAIyD,OAAM,SAAS,gBAAgB,GAAG,KAAK,KAAK;AAChD,UAAAA,KAAI,eAAe,GAAG,OAAO,eAAe,GAAG,KAAK;AACpD,UAAAA,KAAI,aAAa,WAAW,UAAU;AACtC,iBAAOA;AAAA,QACT;AACA,QAAAzD,GAAE,iBAAiB,SAAU,YAAY;AACvC,cAAI,MAAMA,GAAE,SAAS;AAAA,YACnB,MAAM;AAAA,UACR,GAAG,CAACA,GAAE,mBAAmB,UAAU,CAAC,CAAC;AACrC,cAAI,OAAO,IAAI;AACf,iBAAO;AAAA,QACT,GAAGA,GAAE,qBAAqB,SAAU4C,OAAM;AACxC,cAAIA,UAAS,OAAQ,CAAAA,QAAO;AAC5B,cAAI,MAAM,SAAS,eAAe,eAAe,MAAM,OAAO,IAAI;AAClE,iBAAO,IAAI,mBAAmBA,KAAI;AAAA,QACpC;AACA,QAAA5C,GAAE,YAAY;AAGd,QAAAA,GAAE,WAAW,WAAY;AACvB,iBAAO,OAAO,EAAEA,GAAE;AAAA,QACpB;AACA,QAAAA,GAAE,SAAS,SAAU,IAAI;AACvB,iBAAOA,GAAE,IAAI,EAAE,IAAI,GAAG,OAAO,GAAG,YAAY,MAAM,GAAG,CAAC;AAAA,QACxD;AACA,QAAAA,GAAE,WAAW,SAAU,MAAM;AAC3B,iBAAOA,GAAE,OAAO,IAAI;AACpB,iBAAO,KAAK,OAAO,KAAK,KAAKA,GAAE,SAAS;AAAA,QAC1C;AAOA,QAAAA,GAAE,eAAe,SAAU,MAAM;AAC/B,kBAAQ,QAAQ,IAAI,QAAQ,MAAM,GAAQ;AAAA,QAC5C;AACA,QAAAA,GAAE,cAAc,SAAU,OAAO;AAC/B,iBAAO,OAAO,UAAU;AAAA,QAC1B;AACA,QAAAA,GAAE,WAAW,SAAU,OAAO;AAC5B,iBAAO,OAAO,UAAU;AAAA,QAC1B;AACA,QAAAA,GAAE,WAAW,SAAU,OAAO;AAC5B,iBAAO,SAAS,OAAO,UAAU;AAAA,QACnC;AACA,QAAAA,GAAE,UAAU,MAAM;AAClB,QAAAA,GAAE,WAAW,SAAU4C,OAAM,KAAK;AAChC,gBAAM,OAAO,CAAC;AACd,cAAI;AACJ,cAAI;AACF,gBAAI,SAAS,IAAI,UAAU;AAC3B,gBAAI,CAAC5C,GAAE,YAAY,IAAI,KAAK,GAAG;AAC7B,qBAAO,QAAQ,IAAI;AAAA,YACrB;AACA,kBAAM,OAAO,gBAAgB4C,OAAM,UAAU;AAAA,UAC/C,SAAS,OAAO;AACd,kBAAM;AAAA,UACR;AACA,cAAI,CAAC,OAAO,IAAI,qBAAqB,aAAa,EAAE,QAAQ;AAC1D,kBAAM,IAAI,MAAM,kBAAkBA,KAAI;AAAA,UACxC;AACA,iBAAO;AAAA,QACT;AAKA,YAAI,kBAAkB,uBAAO,OAAO,IAAI;AAIxC;AAAA,UAAC;AAAA,UAAiB;AAAA,UAAe;AAAA,UAAiB;AAAA,UAAqB;AAAA,UAAoB;AAAA,UAAmB;AAAA,UAAY;AAAA,UAA6B;AAAA;AAAA,UAEvJ;AAAA,UAAe;AAAA,UAAqB;AAAA,UAAiB;AAAA,UAAgB;AAAA,UAAoB;AAAA,UAAa;AAAA,UAAgB;AAAA,UAAqB;AAAA,UAAgB;AAAA,UAAe;AAAA,UAAe;AAAA,UAAoB;AAAA,UAAa;AAAA,UAAc;AAAA,UAAc;AAAA,UAAuB;AAAA,UAAoB;AAAA,UAAgB;AAAA,UAAa;AAAA,UAAa;AAAA,UAAa;AAAA,UAAiB;AAAA,UAAuB;AAAA,UAAkB;AAAA,UAAQ;AAAA,UAAQ;AAAA,UAAsB;AAAA,UAAoB;AAAA,UAAoB;AAAA,UAAoB;AAAA,UAAgB;AAAA,UAAe;AAAA,UAAgB;AAAA,UAAe;AAAA,UAAgB;AAAA,UAAkB;AAAA,UAAe;AAAA,UAAW;AAAA,UAAW;AAAA,UAAc;AAAA,UAAW;AAAA;AAAA,UAElpB;AAAA,UAAoB;AAAA,UAAoB;AAAA;AAAA,QACxC,EAAE,QAAQ,SAAU,MAAM;AACxB,iBAAO,gBAAgB,IAAI,IAAI;AAAA,QACjC,CAAC;AACD,YAAI,iBAAiB,IAAI,MAAM,iBAAiB;AAAA,UAC9C,KAAK,SAASc,KAAIC,QAAO,MAAM;AAK7B,gBAAI,CAAC3D,GAAE,4BAA4B;AACjC,qBAAO;AAAA,YACT;AACA,gBAAI,QAAQ2D,QAAO;AACjB,qBAAOA,OAAM,IAAI;AAAA,YACnB;AAEA,mBAAOA,OAAM,IAAI,IAAI,KAAK,QAAQ,UAAU,KAAK,EAAE,YAAY;AAAA,UACjE;AAAA,QACF,CAAC;AAMD,eAAO,eAAe3D,IAAG,kBAAkB;AAAA,UACzC,OAAO;AAAA,UACP,UAAU;AAAA,QACZ,CAAC;AAGD,eAAO,eAAeA,IAAG,8BAA8B;AAAA,UACrD,OAAO;AAAA,UACP,UAAU;AAAA,QACZ,CAAC;AAMD,QAAAA,GAAE,cAAc,SAAU,MAAM;AAC9B,cAAI,KAAK,QAAQ,GAAG,MAAM,IAAI;AAC5B,gBAAI,cAAc,KAAK,MAAM,GAAG;AAChC,mBAAO;AAAA,cACL,IAAI,GAAG,YAAY,CAAC,CAAC;AAAA,cACrB,OAAO,YAAY,CAAC;AAAA,YACtB;AAAA,UACF;AACA,iBAAO;AAAA,YACL,IAAI;AAAA,YACJ,OAAO;AAAA,UACT;AAAA,QACF;AAIA,QAAAA,GAAE,0BAA0B;AAM5B,QAAAA,GAAE,iBAAiB;AAEnB,QAAAA,GAAE,yBAAyB;AAC3B,QAAAA,GAAE,0BAA0B;AAC5B,QAAAA,GAAE,uBAAuB;AACzB,QAAAA,GAAE,sBAAsB;AACxB,QAAAA,GAAE,0BAA0B,SAAU,WAAW;AAE/C,cAAI,uBAAuBA,GAAE,gBAAgB;AAI7C,cAAI,mBAAmB,aAAa,UAAU,MAAMA,GAAE,cAAc;AACpE,cAAI,CAAC,kBAAkB;AAErB,mBAAO;AAAA,UACT;AACA,cAAI,aAAa,iBAAiB;AAClC,mBAAS,IAAI,GAAG,IAAI,YAAY,KAAK;AACnC,gBAAI,iBAAiB,iBAAiB,CAAC;AAGvC,gBAAI,yBAAyB,eAAe,MAAMA,GAAE,sBAAsB;AAC1E,gBAAI,wBAAwB;AAC1B,kBAAI,KAAK,QACP,KAAK,QACL,KAAK,QACL,KAAK,QACL,QAAQ;AACV,kBAAI,MAAMA,GAAE,gBAAgB;AAC5B,kBAAI,oBAAoB,uBAAuB,CAAC,EAAE,YAAY;AAC9D,kBAAI,OAAO,uBAAuB,CAAC,EAAE,MAAMA,GAAE,uBAAuB;AACpE,sBAAQ,mBAAmB;AAAA,gBACzB,KAAK;AACH,uBAAK,WAAW,KAAK,CAAC,CAAC;AACvB,uBAAK,KAAK,CAAC,MAAM,SAAY,KAAK,WAAW,KAAK,CAAC,CAAC;AACpD,wBAAM,IAAI,gBAAgB,IAAI,EAAE;AAChC;AAAA,gBACF,KAAK;AACH,uBAAK,WAAW,KAAK,CAAC,CAAC;AACvB,uBAAK,WAAW,KAAK,CAAC,CAAC;AACvB,wBAAM,IAAI,UAAU,IAAI,EAAE;AAC1B;AAAA,gBACF,KAAK;AACH,0BAAQ,WAAW,KAAK,CAAC,CAAC;AAC1B,uBAAK,WAAW,KAAK,CAAC,CAAC,KAAK;AAC5B,uBAAK,WAAW,KAAK,CAAC,CAAC,KAAK;AAC5B,sBAAI,OAAO,KAAK,OAAO,GAAG;AACxB,0BAAM,IAAI,UAAU,IAAI,EAAE,EAAE,OAAO,KAAK,EAAE,UAAU,CAAC,IAAI,CAAC,EAAE;AAAA,kBAC9D,OAAO;AACL,0BAAM,IAAI,OAAO,KAAK;AAAA,kBACxB;AACA;AAAA,gBACF,KAAK;AACH,0BAAQ,WAAW,KAAK,CAAC,CAAC;AAC1B,wBAAM,IAAI,MAAM,KAAK;AACrB;AAAA,gBACF,KAAK;AACH,0BAAQ,WAAW,KAAK,CAAC,CAAC;AAC1B,wBAAM,IAAI,MAAM,KAAK;AACrB;AAAA,gBACF,KAAK;AACH,sBAAI,IAAI,WAAW,KAAK,CAAC,CAAC;AAC1B,sBAAI,IAAI,WAAW,KAAK,CAAC,CAAC;AAC1B,sBAAI,IAAI,WAAW,KAAK,CAAC,CAAC;AAC1B,sBAAI,IAAI,WAAW,KAAK,CAAC,CAAC;AAC1B,sBAAI,IAAI,WAAW,KAAK,CAAC,CAAC;AAC1B,sBAAI,IAAI,WAAW,KAAK,CAAC,CAAC;AAC1B;AAAA,gBACF;AACE;AAAA,cACJ;AAGA,qCAAuB,qBAAqB,SAAS,GAAG;AAAA,YAC1D;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AACA,QAAAA,GAAE,0BAA0B,SAAU,QAAQ;AAC5C,qBAAW,SAAS;AACpB,iBAAO,aAAa,OAAO,MAAM,SAAY,OAAO,IAAI,KAAK,OAAO,OAAO,MAAM,SAAY,OAAO,IAAI,KAAK,OAAO,OAAO,MAAM,SAAY,OAAO,IAAI,KAAK,OAAO,OAAO,MAAM,SAAY,OAAO,IAAI,KAAK,OAAO,OAAO,MAAM,SAAY,OAAO,IAAI,KAAK,OAAO,OAAO,MAAM,SAAY,OAAO,IAAI,KAAK;AAAA,QAC/S;AACA,QAAAA,GAAE,uBAAuB,SAAU,WAAW;AAC5C,cAAI,WAAW,QAAQ4B;AACvB,cAAI,WAAW;AACb,gBAAI,YAAY5B,GAAE;AAGlB,gBAAI,UAAU,KAAK,EAAE,QAAQ,QAAQ,KAAK,GAAG;AAI3C,kBAAI,SAASA,GAAE,wBAAwB,SAAS;AAChD,kBAAI,mBAAmBA,GAAE,gBAAgB,MAAM;AAG/C,0BAAY,CAAC,iBAAiB,YAAY,iBAAiB,UAAU;AACrE,cAAA4B,SAAQ,CAAC,iBAAiB,QAAQ,iBAAiB,MAAM;AACzD,uBAAS,CAAC,iBAAiB,QAAQ;AAGnC,kBAAI,kBAAkB,CAAC;AACvB,kBAAI,UAAU,CAAC,MAAM,KAAK,UAAU,CAAC,MAAM,GAAG;AAC5C,gCAAgB,KAAK,eAAe,YAAY,GAAG;AAAA,cACrD;AACA,kBAAIA,OAAM,CAAC,MAAM,KAAKA,OAAM,CAAC,MAAM,GAAG;AACpC,gCAAgB,KAAK,WAAWA,SAAQ,GAAG;AAAA,cAC7C;AACA,kBAAI,OAAO,CAAC,MAAM,GAAG;AACnB,gCAAgB,KAAK,YAAY,SAAS,GAAG;AAAA,cAC/C;AACA,0BAAY,gBAAgB,KAAK,GAAG;AAAA,YACtC,OAAO;AAIL,kBAAI,iBAAiB,UAAU,MAAM5B,GAAE,uBAAuB;AAC9D,kBAAI,gBAAgB;AAClB,4BAAY,eAAe,CAAC,EAAE,MAAM,SAAS;AAAA,cAC/C;AACA,kBAAI,cAAc,UAAU,MAAMA,GAAE,oBAAoB;AACxD,kBAAI,aAAa;AACf,yBAAS,YAAY,CAAC,EAAE,MAAM,SAAS;AAAA,cACzC;AACA,kBAAI,aAAa,UAAU,MAAMA,GAAE,mBAAmB;AACtD,kBAAI,YAAY;AACd,gBAAA4B,SAAQ,WAAW,CAAC,EAAE,MAAM,SAAS;AAAA,cACvC;AAAA,YACF;AAAA,UACF;AACA,cAAI,KAAKA,UAASA,OAAM,CAAC,IAAI,WAAWA,OAAM,CAAC,CAAC,IAAI;AACpD,iBAAO;AAAA,YACL,OAAO;AAAA,YACP,WAAW;AAAA,cACT,IAAI,aAAa,UAAU,CAAC,IAAI,SAAS,UAAU,CAAC,GAAG,EAAE,IAAI;AAAA,cAC7D,IAAI,aAAa,UAAU,CAAC,IAAI,SAAS,UAAU,CAAC,GAAG,EAAE,IAAI;AAAA,YAC/D;AAAA,YACA,QAAQ;AAAA,cACN,OAAO,UAAU,OAAO,CAAC,IAAI,SAAS,OAAO,CAAC,GAAG,EAAE,IAAI;AAAA,cACvD,IAAI,UAAU,OAAO,CAAC,IAAI,SAAS,OAAO,CAAC,GAAG,EAAE,IAAI;AAAA,cACpD,IAAI,UAAU,OAAO,CAAC,IAAI,SAAS,OAAO,CAAC,GAAG,EAAE,IAAI;AAAA,YACtD;AAAA,YACA,OAAO;AAAA,cACL;AAAA,cACA,IAAIA,UAASA,OAAM,CAAC,IAAI,WAAWA,OAAM,CAAC,CAAC,IAAI;AAAA,YACjD;AAAA,UACF;AAAA,QACF;AACA,QAAA5B,GAAE,sBAAsB,SAAU,QAAQkB,QAAO;AAC/C,cAAI,KAAKA,OAAM,IAAI,OAAO,IAAIA,OAAM,IAAI,OAAO,IAAI;AACnD,cAAI,KAAKA,OAAM,IAAI,OAAO,IAAIA,OAAM,IAAI,OAAO,IAAI;AACnD,iBAAO;AAAA,YACL,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA,QACF;AACA,QAAAlB,GAAE,kBAAkB,SAAU,QAAQ;AAIpC,cAAI,KAAKA,GAAE,oBAAoB,QAAQ;AAAA,YACrC,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AACD,cAAI,KAAKA,GAAE,oBAAoB,QAAQ;AAAA,YACrC,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAGD,cAAI,QAAQ,MAAMiD,MAAKC,OAAM,GAAG,GAAG,GAAG,CAAC,IAAI;AAC3C,cAAI,QAAQ,MAAMD,MAAKC,OAAM,GAAG,GAAG,GAAG,CAAC;AACvC,iBAAO;AAAA,YACL,YAAY,OAAO;AAAA,YACnB,YAAY,OAAO;AAAA,YACnB,QAAQL,MAAK,OAAO,IAAI,OAAO,IAAI,OAAO,IAAI,OAAO,CAAC;AAAA,YACtD,QAAQA,MAAK,OAAO,IAAI,OAAO,IAAI,OAAO,IAAI,OAAO,CAAC;AAAA,YACtD;AAAA,YACA;AAAA,YACA,UAAU;AAAA;AAAA,UACZ;AAAA,QACF;AAIA,QAAA7C,GAAE,gBAAgB,SAAU,QAAQ;AAClC,cAAI,GAAG,GAAG,GAAG;AACb,cAAI,QAAQ;AACV,gBAAIA,GAAE,YAAY,OAAO,CAAC,IAAI,IAAI,OAAO;AACzC,gBAAIA,GAAE,YAAY,OAAO,CAAC,IAAI,IAAI,OAAO;AACzC,gBAAI,OAAO;AACX,gBAAI,OAAO;AAAA,UACb,OAAO;AACL,gBAAI,IAAI;AAAA,UACV;AACA,iBAAO;AAAA,YACL,IAAI,IAAI6C,MAAK,IAAI,IAAI,IAAI,CAAC,IAAI;AAAA,YAC9B,IAAI,IAAIA,MAAK,IAAI,IAAI,IAAI,CAAC,IAAI;AAAA,UAChC;AAAA,QACF;AAIA,QAAA7C,GAAE,iBAAiB,SAAU,QAAQ;AACnC,cAAI,IAAI;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AACA,cAAI,QAAQ;AACV,gBAAIA,GAAE,oBAAoB,QAAQ,CAAC;AAAA,UACrC;AACA,iBAAO;AAAA,YACL,OAAO,eAAe,MAAMkD,OAAM,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,EAAE;AAAA,UACnD;AAAA,QACF;AAIA,QAAAlD,GAAE,oBAAoB,SAAU,QAAQ;AACtC,iBAAO;AAAA,YACL,IAAI,UAAU,OAAO,KAAK;AAAA,YAC1B,IAAI,UAAU,OAAO,KAAK;AAAA,UAC5B;AAAA,QACF;AACA,QAAAA,GAAE,MAAM,SAAU,QAAQ;AACxB,iBAAO,kBAAkBA;AAAA,QAC3B;AAGA,QAAAA,GAAE,aAAaA,GAAE;AAIjB,QAAAA,GAAE,uBAAuB,SAAU,MAAM;AACvC,cAAI,CAAC,MAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAOA,GAAE,OAAO,IAAI;AAEpB,iBAAO,gBAAgB,cAAc,OAAO,KAAK,iBAAiB;AAAA,QACpE;AACA,YAAI,cAAcA,GAAE,KAAK,EAAE;AAC3B,QAAAA,GAAE,kBAAkB,SAAU,QAAQ;AACpC,cAAI,YAAY,YAAY,gBAAgB;AAC5C,mBAAS,aAAa,QAAQ;AAC5B,sBAAU,SAAS,IAAI,OAAO,SAAS;AAAA,UACzC;AACA,iBAAO;AAAA,QACT;AACA,QAAAA,GAAE,qBAAqB,SAAU,QAAQ;AACvC,cAAI,CAACA,GAAE,YAAY,MAAM,GAAG;AAC1B,gBAAI,EAAE,kBAAkB,YAAY;AAClC,uBAASA,GAAE,gBAAgB,MAAM;AAAA,YACnC;AACA,mBAAO,YAAY,6BAA6B,MAAM;AAAA,UACxD;AACA,iBAAO,YAAY,mBAAmB;AAAA,QACxC;AACA,QAAAA,GAAE,iBAAiB,SAAU,GAAG,GAAG;AACjC,cAAI,IAAI,YAAY,eAAe;AACnC,YAAE,IAAI;AACN,YAAE,IAAI;AACN,iBAAO;AAAA,QACT;AACA,QAAAA,GAAE,gBAAgB,SAAU,GAAG,QAAQ;AACrC,cAAI,IAAI,YAAY,eAAe;AACnC,YAAE,IAAI,EAAE;AACR,YAAE,IAAI,EAAE;AACR,cAAI,UAAU,EAAE,gBAAgB,MAAM;AACtC,YAAE,IAAI,EAAE,IAAI,EAAE;AACd,YAAE,IAAI,EAAE;AACR,cAAI,UAAU,EAAE,gBAAgB,MAAM;AACtC,YAAE,IAAI,EAAE,IAAI,EAAE;AACd,YAAE,IAAI,EAAE,IAAI,EAAE;AACd,cAAI,UAAU,EAAE,gBAAgB,MAAM;AACtC,YAAE,IAAI,EAAE;AACR,YAAE,IAAI,EAAE,IAAI,EAAE;AACd,cAAI,UAAU,EAAE,gBAAgB,MAAM;AACtC,cAAI,OAAO0B,KAAI,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;AACzD,cAAI,OAAOC,KAAI,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;AACzD,cAAI,OAAOD,KAAI,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;AACzD,cAAI,OAAOC,KAAI,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;AACzD,iBAAO,IAAI,KAAK,MAAM,MAAM,OAAO,MAAM,OAAO,IAAI;AAAA,QACtD;AACA,QAAA3B,GAAE,iBAAiB,SAAU,GAAG,QAAQ;AACtC,iBAAO,IAAI,MAAMA,GAAE,eAAe,EAAE,GAAG,EAAE,CAAC,EAAE,gBAAgB,MAAM,CAAC;AAAA,QACrE;AACA,QAAAA,GAAE,gBAAgB,SAAU,GAAG,QAAQ;AACrC,iBAAO,IAAI,KAAKA,GAAE,eAAe,EAAE,OAAO,MAAM,GAAGA,GAAE,eAAe,EAAE,KAAK,MAAM,CAAC;AAAA,QACpF;AACA,QAAAA,GAAE,oBAAoB,SAAU,GAAG,QAAQ;AACzC,cAAI,WAAW,aAAa,WAAW,EAAE,SAAS;AAClD,cAAI,CAACA,GAAE,QAAQ,QAAQ,GAAG;AACxB,uBAAW,CAAC;AAAA,UACd;AACA,cAAI,YAAY,CAAC;AACjB,mBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,GAAG,KAAK;AAC/C,sBAAU,CAAC,IAAIA,GAAE,eAAe,SAAS,CAAC,GAAG,MAAM;AAAA,UACrD;AACA,iBAAO,IAAI,SAAS,SAAS;AAAA,QAC/B;AAIA,QAAAA,GAAE,gBAAgB,SAAU,aAAa;AACvC,cAAI,MAAM,CAAC;AACX,cAAI,SAAS,YAAY,MAAM,GAAG;AAClC,mBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,gBAAI,QAAQ,OAAO,CAAC;AACpB,gBAAI,OAAO,MAAM,MAAM,GAAG;AAC1B,gBAAI,KAAK,CAAC,EAAE,KAAK,CAAC,IAAI,KAAK,CAAC,EAAE,KAAK;AAAA,UACrC;AACA,iBAAO;AAAA,QACT;AAGA,QAAAA,GAAE,sBAAsB,SAAU,aAAa,aAAa,YAAY,UAAU;AAChF,cAAI,YAAY,IAAIiD,MAAK;AACzB,cAAI,KAAK;AACT,cAAI,KAAK;AACT,cAAI,KAAK;AACT,cAAI,KAAK;AACT,cAAI,MAAM,KAAK,OAAO,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK;AACvD,cAAI,KAAK,KAAKA,MAAK,MAAM;AACzB,cAAI,KAAKH,KAAI,EAAE;AACf,cAAI,KAAKC,KAAI,EAAE;AACf,cAAI,KAAKD,KAAI,EAAE;AACf,cAAI,KAAKC,KAAI,EAAE;AACf,iBAAO,MAAM,YAAY,KAAK,QAAQ,KAAK,MAAM,KAAK,MAAM,KAAK,cAAc,CAAC,KAAK,MAAM,KAAK,MAAM,KAAK,cAAc,KAAK,QAAQ,KAAK,MAAM,KAAK,MAAM,KAAK,cAAc,CAAC,KAAK,MAAM,KAAK,MAAM,KAAK,cAAc,KAAK,MAAM,QAAQ,KAAK,MAAM,KAAK,MAAM,KAAK,cAAc,CAAC,KAAK,MAAM,KAAK,MAAM,KAAK,cAAc,KAAK,MAAM,KAAK,MAAM,KAAK,KAAK,MAAM,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,QAAQ,KAAK,QAAQ,KAAK,KAAK,MAAM,KAAK,KAAK,MAAM,KAAK,KAAK,MAAM,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,QAAQ,KAAK,QAAQ,KAAK,KAAK,MAAM,KAAK,KAAK,MAAM,MAAM,KAAK,KAAK,MAAM,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,QAAQ,KAAK,QAAQ,KAAK,KAAK,MAAM,KAAK,KAAK;AAAA,QACtoB;AAKA,QAAA/C,GAAE,aAAa,SAAU,GAAG,GAAG;AAC7B,mBAAS,QAAQ,GAAG;AAClB,gBAAI,SAAS,SAAS;AAEpB,gBAAE,IAAI,IAAI,EAAE,IAAI,IAAI,EAAE,IAAI,IAAI,MAAM,EAAE,IAAI,IAAI,EAAE,IAAI;AAAA,YACtD,WAAW,SAAS,SAAS;AAE3B,kBAAIA,GAAE,SAAS,EAAE,IAAI,CAAC,KAAKA,GAAE,SAAS,EAAE,IAAI,CAAC,GAAG;AAE9C,kBAAE,IAAI,IAAIA,GAAE,WAAW,EAAE,IAAI,GAAG,EAAE,IAAI,CAAC;AAAA,cACzC,WAAWA,GAAE,SAAS,EAAE,IAAI,CAAC,GAAG;AAG9B,kBAAE,IAAI,IAAIA,GAAE,WAAW,EAAE,IAAI,GAAGA,GAAE,cAAc,EAAE,IAAI,CAAC,CAAC;AAAA,cAC1D,WAAWA,GAAE,SAAS,EAAE,IAAI,CAAC,GAAG;AAE9B,kBAAE,IAAI,IAAIA,GAAE,WAAWA,GAAE,cAAc,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC;AAAA,cAC1D,OAAO;AAEL,kBAAE,IAAI,IAAIA,GAAE,WAAWA,GAAE,cAAc,EAAE,IAAI,CAAC,GAAGA,GAAE,cAAc,EAAE,IAAI,CAAC,CAAC;AAAA,cAC3E;AAAA,YACF,OAAO;AACL,gBAAE,IAAI,IAAI,EAAE,IAAI;AAAA,YAClB;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AACA,QAAAA,GAAE,iBAAiB,SAAU,GAAG,aAAa,KAAK;AAChD,wBAAc,eAAe,CAAC;AAC9B,gBAAM,OAAO,CAAC;AACd,cAAI,SAAS,IAAI,UAAU;AAC3B,cAAI,YAAY,CAAC;AACjB,cAAI;AACJ,cAAI,MAAM,CAAC;AACX,cAAI;AACJ,cAAI;AACJ,mBAAS,IAAI,GAAG,IAAI,EAAE,QAAQ,KAAK;AACjC,mBAAO,IAAI,CAAC,IAAI,EAAE,CAAC;AACnB,qBAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,KAAK;AAC3C,kBAAI,aAAa,YAAY,CAAC;AAC9B,kBAAI,QAAQ,WAAW,QAAQ;AAC/B,kBAAI,MAAM,WAAW,MAAM;AAC3B,kBAAI,KAAK,SAAS,IAAI,KAAK;AAEzB,oBAAIA,GAAE,SAAS,IAAI,GAAG;AAEpB,uBAAK,QAAQA,GAAE,WAAWA,GAAE,WAAW,CAAC,GAAG,KAAK,KAAK,GAAG,WAAW,KAAK;AAAA,gBAC1E,OAAO;AACL,yBAAO,IAAI,CAAC,IAAI;AAAA,oBACd,GAAG,EAAE,CAAC;AAAA,oBACN,OAAO,WAAW;AAAA,kBACpB;AAAA,gBACF;AACA,oBAAI,IAAI,0BAA0B;AAChC,mBAAC,KAAK,gBAAgB,KAAK,cAAc,CAAC,IAAI,KAAK,CAAC;AAAA,gBACtD;AAAA,cACF;AAAA,YACF;AACA,mBAAO,IAAI,IAAI,CAAC;AAChB,gBAAI,CAAC,MAAM;AACT,sBAAQ;AAAA,YACV,WAAWA,GAAE,SAAS,IAAI,KAAKA,GAAE,SAAS,IAAI,GAAG;AAG/C,kBAAI,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,KAAK,KAAK,GAAG;AAC7D,sBAAM,KAAK,KAAK;AAAA,cAClB,OAAO;AACL,0BAAU,KAAK,KAAK;AACpB,wBAAQ;AAAA,cACV;AAAA,YACF,WAAWA,GAAE,SAAS,IAAI,GAAG;AAE3B,wBAAU,KAAK,KAAK;AACpB,sBAAQ;AAAA,YACV,WAAWA,GAAE,SAAS,IAAI,GAAG;AAE3B,wBAAU,KAAK,KAAK;AACpB,sBAAQ;AAAA,YACV,OAAO;AAEL,uBAAS,SAAS,MAAM;AAAA,YAC1B;AAAA,UACF;AACA,cAAI,OAAO;AACT,sBAAU,KAAK,KAAK;AAAA,UACtB;AACA,iBAAO;AAAA,QACT;AACA,QAAAA,GAAE,yBAAyB,SAAU,aAAaK,QAAO;AACvD,cAAI,QAAQ,CAAC;AACb,cAAI,aAAa;AACf,wBAAY,QAAQ,SAAU,YAAY;AACxC,kBAAI,WAAW,QAAQA,UAASA,UAAS,WAAW,KAAK;AACvD,sBAAM,KAAK,UAAU;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,UACH;AACA,iBAAO;AAAA,QACT;AACA,QAAAL,GAAE,gCAAgC,SAAU,aAAa,OAAO,KAAK;AACnE,cAAI,QAAQ,CAAC;AACb,cAAI,aAAa;AACf,wBAAY,QAAQ,SAAU,YAAY;AACxC,kBAAI,SAAS,WAAW,SAAS,QAAQ,WAAW,OAAO,MAAM,WAAW,SAAS,OAAO,WAAW,OAAO,WAAW,SAAS,SAAS,WAAW,MAAM,KAAK;AAC/J,sBAAM,KAAK,UAAU;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,UACH;AACA,iBAAO;AAAA,QACT;AAGA,QAAAA,GAAE,mBAAmB,SAAU,aAAaK,QAAO,QAAQ;AACzD,cAAI,aAAa;AACf,wBAAY,QAAQ,SAAU,YAAY;AACxC,kBAAI,WAAW,QAAQA,UAAS,WAAW,OAAOA,QAAO;AACvD,2BAAW,OAAO;AAAA,cACpB,WAAW,WAAW,SAASA,QAAO;AACpC,2BAAW,SAAS;AACpB,2BAAW,OAAO;AAAA,cACpB;AAAA,YACF,CAAC;AAAA,UACH;AACA,iBAAO;AAAA,QACT;AACA,QAAAL,GAAE,wBAAwB,SAAUmC,OAAM;AACxC,UAAAA,QAAOnC,GAAEmC,KAAI;AACb,cAAI,IAAI,CAAC,KAAKA,MAAK,KAAK,IAAI,GAAGA,MAAK,KAAK,IAAI,GAAG,KAAKA,MAAK,KAAK,IAAI,GAAGA,MAAK,KAAK,IAAI,CAAC,EAAE,KAAK,GAAG;AAC/F,iBAAO;AAAA,QACT;AACA,QAAAnC,GAAE,2BAA2B,SAAU,SAAS;AAC9C,cAAI,SAASA,GAAE,qBAAqB,OAAO;AAC3C,cAAI,OAAO,WAAW,GAAG;AACvB,mBAAO;AAAA,UACT;AACA,iBAAOA,GAAE,gBAAgB,MAAM,IAAI;AAAA,QACrC;AACA,QAAAA,GAAE,4BAA4B,SAAU,UAAU;AAChD,cAAI,SAASA,GAAE,qBAAqB,QAAQ;AAC5C,cAAI,OAAO,WAAW,GAAG;AACvB,mBAAO;AAAA,UACT;AACA,iBAAOA,GAAE,gBAAgB,MAAM;AAAA,QACjC;AACA,QAAAA,GAAE,kBAAkB,SAAU,QAAQ;AACpC,mBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,IAAI,GAAG,KAAK;AAC7C,mBAAO,CAAC,IAAI,OAAO,CAAC,EAAE,IAAI,MAAM,OAAO,CAAC,EAAE;AAAA,UAC5C;AACA,iBAAO,OAAO,OAAO,KAAK,IAAI;AAAA,QAChC;AACA,QAAAA,GAAE,uBAAuB,SAAU,MAAM;AACvC,iBAAOA,GAAE,OAAO,IAAI;AACpB,cAAI,SAAS,CAAC;AACd,cAAI,aAAa,KAAK;AACtB,cAAI,YAAY;AACd,qBAAS,IAAI,GAAG,IAAI,WAAW,eAAe,IAAI,GAAG,KAAK;AACxD,qBAAO,KAAK,WAAW,QAAQ,CAAC,CAAC;AAAA,YACnC;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AACA,QAAAA,GAAE,QAAQ;AACV,QAAAA,GAAE,0BAA0B,SAAU,QAAQ;AAC5C,mBAASA,GAAE,MAAM;AACjB,cAAI,KAAK,WAAW,OAAO,KAAK,IAAI,CAAC,KAAK;AAC1C,cAAI,KAAK,WAAW,OAAO,KAAK,IAAI,CAAC,KAAK;AAC1C,cAAI,IAAI,WAAW,OAAO,KAAK,GAAG,CAAC;AACnC,cAAI,KAAK,IAAIA,GAAE;AAEf,cAAI,IAAI;AAAA,YAAC;AAAA,YAAK;AAAA,YAAI,KAAK;AAAA;AAAA,YAEvB;AAAA,YAAK,KAAK;AAAA,YAAI,KAAK;AAAA,YAAG,KAAK;AAAA,YAAG,KAAK;AAAA,YAAI,KAAK;AAAA,YAAG;AAAA;AAAA,YAE/C;AAAA,YAAK,KAAK;AAAA,YAAG,KAAK;AAAA,YAAI,KAAK;AAAA,YAAI,KAAK;AAAA,YAAG;AAAA,YAAI,KAAK;AAAA;AAAA,YAEhD;AAAA,YAAK,KAAK;AAAA,YAAI,KAAK;AAAA,YAAG,KAAK;AAAA,YAAG,KAAK;AAAA,YAAI,KAAK;AAAA,YAAG;AAAA;AAAA,YAE/C;AAAA,YAAK,KAAK;AAAA,YAAG,KAAK;AAAA,YAAI,KAAK;AAAA,YAAI,KAAK;AAAA,YAAG;AAAA,YAAI,KAAK;AAAA;AAAA,YAEhD;AAAA,UAAG,EAAE,KAAK,GAAG;AACb,iBAAO;AAAA,QACT;AACA,QAAAA,GAAE,2BAA2B,SAAUsC,UAAS;AAC9C,UAAAA,WAAUtC,GAAEsC,QAAO;AACnB,cAAI,KAAK,WAAWA,SAAQ,KAAK,IAAI,CAAC,KAAK;AAC3C,cAAI,KAAK,WAAWA,SAAQ,KAAK,IAAI,CAAC,KAAK;AAC3C,cAAI,KAAK,WAAWA,SAAQ,KAAK,IAAI,CAAC;AACtC,cAAI,KAAK,WAAWA,SAAQ,KAAK,IAAI,CAAC,KAAK;AAC3C,cAAI,MAAM,KAAKtC,GAAE;AACjB,cAAI,MAAM,KAAKA,GAAE;AAEjB,cAAI,IAAI;AAAA,YAAC;AAAA,YAAK;AAAA,YAAI,KAAK;AAAA;AAAA,YAEvB;AAAA,YAAK,KAAK;AAAA,YAAK,KAAK;AAAA,YAAI,KAAK;AAAA,YAAI,KAAK;AAAA,YAAK,KAAK;AAAA,YAAI;AAAA;AAAA,YAEpD;AAAA,YAAK,KAAK;AAAA,YAAI,KAAK;AAAA,YAAK,KAAK;AAAA,YAAK,KAAK;AAAA,YAAI;AAAA,YAAI,KAAK;AAAA;AAAA,YAEpD;AAAA,YAAK,KAAK;AAAA,YAAK,KAAK;AAAA,YAAI,KAAK;AAAA,YAAI,KAAK;AAAA,YAAK,KAAK;AAAA,YAAI;AAAA;AAAA,YAEpD;AAAA,YAAK,KAAK;AAAA,YAAI,KAAK;AAAA,YAAK,KAAK;AAAA,YAAK,KAAK;AAAA,YAAI;AAAA,YAAI,KAAK;AAAA;AAAA,YAEpD;AAAA,UAAG,EAAE,KAAK,GAAG;AACb,iBAAO;AAAA,QACT;AACA,QAAAA,GAAE,wBAAwB,SAAUqC,OAAM;AACxC,UAAAA,QAAOrC,GAAEqC,KAAI;AACb,iBAAOrC,GAAE,WAAW;AAAA,YAClB,GAAG,WAAWqC,MAAK,KAAK,GAAG,CAAC,KAAK;AAAA,YACjC,GAAG,WAAWA,MAAK,KAAK,GAAG,CAAC,KAAK;AAAA,YACjC,OAAO,WAAWA,MAAK,KAAK,OAAO,CAAC,KAAK;AAAA,YACzC,QAAQ,WAAWA,MAAK,KAAK,QAAQ,CAAC,KAAK;AAAA,YAC3C,IAAI,WAAWA,MAAK,KAAK,IAAI,CAAC,KAAK;AAAA,YACnC,IAAI,WAAWA,MAAK,KAAK,IAAI,CAAC,KAAK;AAAA,UACrC,CAAC;AAAA,QACH;AAOA,QAAArC,GAAE,aAAa,SAAU,GAAG;AAC1B,cAAI;AACJ,cAAI,IAAI,EAAE;AACV,cAAI,IAAI,EAAE;AACV,cAAI,QAAQ,EAAE;AACd,cAAI,SAAS,EAAE;AACf,cAAI,QAAQ0B,KAAI,EAAE,MAAM,EAAE,QAAQ,KAAK,GAAG,QAAQ,CAAC;AACnD,cAAI,WAAWA,KAAI,EAAE,MAAM,EAAE,WAAW,KAAK,GAAG,QAAQ,CAAC;AACzD,cAAI,QAAQA,KAAI,EAAE,MAAM,EAAE,QAAQ,KAAK,GAAG,SAAS,CAAC;AACpD,cAAI,WAAWA,KAAI,EAAE,MAAM,EAAE,WAAW,KAAK,GAAG,SAAS,CAAC;AAC1D,cAAI,SAAS,YAAY,SAAS,UAAU;AAC1C,gBAAI,CAAC,KAAK,GAAG,IAAI,OAAO,KAAK,SAAS,QAAQ,UAAU,KAAK,UAAU,UAAU,GAAG,GAAG,GAAG,UAAU,UAAU,KAAK,QAAQ,IAAI,UAAU,KAAK,UAAU,UAAU,GAAG,GAAG,GAAG,UAAU,CAAC,UAAU,KAAK,EAAE,SAAS,WAAW,QAAQ,KAAK,OAAO,OAAO,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,OAAO,KAAK,EAAE,QAAQ,IAAI,QAAQ,KAAK,OAAO,OAAO,GAAG,GAAG,GAAG,CAAC,OAAO,OAAO,GAAG;AAAA,UAC1V,OAAO;AACL,gBAAI,CAAC,KAAK,GAAG,GAAG,KAAK,IAAI,OAAO,KAAK,IAAI,QAAQ,KAAK,GAAG,KAAK,GAAG,GAAG;AAAA,UACtE;AACA,iBAAO,EAAE,KAAK,GAAG;AAAA,QACnB;AAOA,QAAA1B,GAAE,oBAAoB,WAAY;AAChC,cAAI,SAAS;AACb,cAAI,cAAc,IAAI,OAAO,aAAa,SAAS,0CAA0C,SAAS,UAAU,SAAS,SAAS,IAAI;AACtI,cAAI,aAAa,IAAI,OAAO,uCAAuC,SAAS,UAAU,SAAS,MAAM,IAAI;AACzG,cAAI4D,QAAO;AACX,cAAIX,MAAKW,MAAK;AACd,cAAIb,OAAMa,MAAK;AACf,cAAId,OAAMc,MAAK;AACf,cAAI,MAAMA,MAAK;AACf,cAAI,OAAOA,MAAK;AAChB,cAAIf,QAAOe,MAAK;AAChB,cAAInB,OAAMmB,MAAK;AACf,mBAAS,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AACnC,gBAAIC,OAAM,IAAI;AACd,gBAAIC,OAAM,IAAI;AACd,mBAAO,CAACD,OAAM,KAAKC,OAAM,IAAID,OAAM,KAAKC,OAAM,IAAID,OAAM,KAAKC,OAAM,IAAID,OAAM,KAAKC,OAAM,IAAI,IAAI,EAAE;AAAA,UACpG;AACA,mBAAS,OAAO,GAAG,GAAG,KAAK;AACzB,gBAAI,IAAI,IAAIhB,KAAI,GAAG,IAAI,IAAIC,KAAI,GAAG;AAClC,gBAAI,IAAI,IAAIA,KAAI,GAAG,IAAI,IAAID,KAAI,GAAG;AAClC,mBAAO;AAAA,cACL,GAAG;AAAA,cACH,GAAG;AAAA,YACL;AAAA,UACF;AACA,mBAAS,IAAI,IAAI,IAAI,IAAI,IAAI,OAAO,gBAAgB,YAAY,IAAI,IAAI,WAAW;AAGjF,gBAAI,OAAOG,MAAK,MAAM;AACtB,gBAAI,MAAMA,MAAK,OAAO,CAAC,SAAS;AAChC,gBAAI,MAAM,CAAC;AACX,gBAAI;AACJ,gBAAI,CAAC,WAAW;AACd,mBAAK,OAAO,IAAI,IAAI,CAAC,GAAG;AACxB,mBAAK,GAAG;AACR,mBAAK,GAAG;AACR,mBAAK,OAAO,IAAI,IAAI,CAAC,GAAG;AACxB,mBAAK,GAAG;AACR,mBAAK,GAAG;AACR,kBAAI,KAAK,KAAK,MAAM;AACpB,kBAAI,KAAK,KAAK,MAAM;AACpB,kBAAI,IAAI,IAAI,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK;AAC1C,kBAAI,IAAI,GAAG;AACT,oBAAIJ,MAAK,CAAC;AACV,qBAAK,IAAI;AACT,qBAAK,IAAI;AAAA,cACX;AACA,kBAAI,MAAM,KAAK;AACf,kBAAI,MAAM,KAAK;AACf,kBAAI,KAAK,kBAAkB,aAAa,KAAK,KAAKA,MAAKJ,MAAK,MAAM,MAAM,MAAM,IAAI,IAAI,MAAM,IAAI,MAAM,MAAM,IAAI,IAAI,MAAM,IAAI,EAAE,CAAC;AACjI,kBAAI,KAAK,IAAI,KAAK,IAAI,MAAM,KAAK,MAAM;AACvC,kBAAI,KAAK,IAAI,CAAC,KAAK,IAAI,MAAM,KAAK,MAAM;AACxC,kBAAI,KAAK,OAAO,KAAK,MAAM,IAAI,QAAQ,CAAC,CAAC;AACzC,kBAAI,KAAK,OAAO,KAAK,MAAM,IAAI,QAAQ,CAAC,CAAC;AACzC,mBAAK,KAAK,KAAKQ,MAAK,KAAK;AACzB,mBAAK,KAAK,KAAKA,MAAK,KAAK;AACzB,kBAAI,KAAK,GAAG;AACV,qBAAKA,MAAK,IAAI;AAAA,cAChB;AACA,kBAAI,KAAK,GAAG;AACV,qBAAKA,MAAK,IAAI;AAAA,cAChB;AACA,kBAAI,cAAc,KAAK,IAAI;AACzB,qBAAK,KAAKA,MAAK;AAAA,cACjB;AACA,kBAAI,CAAC,cAAc,KAAK,IAAI;AAC1B,qBAAK,KAAKA,MAAK;AAAA,cACjB;AAAA,YACF,OAAO;AACL,mBAAK,UAAU,CAAC;AAChB,mBAAK,UAAU,CAAC;AAChB,mBAAK,UAAU,CAAC;AAChB,mBAAK,UAAU,CAAC;AAAA,YAClB;AACA,gBAAI,KAAK,KAAK;AACd,gBAAIR,KAAI,EAAE,IAAI,MAAM;AAClB,kBAAI,QAAQ;AACZ,kBAAI,QAAQ;AACZ,kBAAI,QAAQ;AACZ,mBAAK,KAAK,QAAQ,cAAc,KAAK,KAAK,IAAI;AAC9C,mBAAK,KAAK,KAAKK,KAAI,EAAE;AACrB,mBAAK,KAAK,KAAKC,KAAI,EAAE;AACrB,oBAAM,IAAI,IAAI,IAAI,IAAI,IAAI,OAAO,GAAG,YAAY,OAAO,OAAO,CAAC,IAAI,OAAO,IAAI,EAAE,CAAC;AAAA,YACnF;AACA,iBAAK,KAAK;AACV,gBAAI,KAAKD,KAAI,EAAE;AACf,gBAAI,KAAKC,KAAI,EAAE;AACf,gBAAI,KAAKD,KAAI,EAAE;AACf,gBAAI,KAAKC,KAAI,EAAE;AACf,gBAAI,IAAI,IAAI,KAAK,CAAC;AAClB,gBAAI,KAAK,IAAI,KAAK,KAAK;AACvB,gBAAI,KAAK,IAAI,KAAK,KAAK;AACvB,gBAAI,KAAK,CAAC,IAAI,EAAE;AAChB,gBAAI,KAAK,CAAC,KAAK,KAAK,IAAI,KAAK,KAAK,EAAE;AACpC,gBAAI,KAAK,CAAC,KAAK,KAAK,IAAI,KAAK,KAAK,EAAE;AACpC,gBAAI,KAAK,CAAC,IAAI,EAAE;AAChB,eAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC;AACxB,eAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC;AACxB,gBAAI,WAAW;AACb,qBAAO,CAAC,IAAI,IAAI,EAAE,EAAE,OAAO,GAAG;AAAA,YAChC,OAAO;AACL,oBAAM,CAAC,IAAI,IAAI,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK,EAAE,MAAM,GAAG;AAC/C,kBAAI,SAAS,CAAC;AACd,kBAAI,KAAK,IAAI;AACb,uBAAS,IAAI,GAAG,IAAI,IAAI,KAAK;AAC3B,uBAAO,CAAC,IAAI,IAAI,IAAI,OAAO,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,EAAE,IAAI,OAAO,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,GAAG,EAAE;AAAA,cAC1F;AACA,qBAAO;AAAA,YACT;AAAA,UACF;AACA,mBAAS,gBAAgB,YAAY;AACnC,gBAAI,CAAC,YAAY;AACf,qBAAO;AAAA,YACT;AACA,gBAAI,cAAc;AAAA,cAChB,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,YACL;AACA,gBAAIH,QAAO,CAAC;AACZ,mBAAO,UAAU,EAAE,QAAQ,aAAa,SAAU,GAAG,GAAG,GAAG;AACzD,kBAAI,SAAS,CAAC;AACd,kBAAI,OAAO,EAAE,YAAY;AACzB,gBAAE,QAAQ,YAAY,SAAUmB,IAAGC,IAAG;AACpC,oBAAIA,IAAG;AACL,yBAAO,KAAK,CAACA,EAAC;AAAA,gBAChB;AAAA,cACF,CAAC;AACD,kBAAI,SAAS,OAAO,OAAO,SAAS,GAAG;AACrC,gBAAApB,MAAK,KAAK,CAAC,CAAC,EAAE,OAAO,OAAO,OAAO,GAAG,CAAC,CAAC,CAAC;AACzC,uBAAO;AACP,oBAAI,MAAM,MAAM,MAAM;AAAA,cACxB;AACA,qBAAO,OAAO,UAAU,YAAY,IAAI,GAAG;AACzC,gBAAAA,MAAK,KAAK,CAAC,CAAC,EAAE,OAAO,OAAO,OAAO,GAAG,YAAY,IAAI,CAAC,CAAC,CAAC;AACzD,oBAAI,CAAC,YAAY,IAAI,GAAG;AACtB;AAAA,gBACF;AAAA,cACF;AAAA,YACF,CAAC;AACD,mBAAOA;AAAA,UACT;AACA,mBAAS,eAAe,WAAW;AACjC,gBAAI,CAAC,MAAM,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,aAAa,UAAU,CAAC,CAAC,GAAG;AAE1E,0BAAY,gBAAgB,SAAS;AAAA,YACvC;AAGA,gBAAI,CAAC,aAAa,CAAC,UAAU,QAAQ;AACnC,qBAAO,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;AAAA,YACrB;AACA,gBAAI,MAAM,CAAC;AACX,gBAAI,IAAI;AACR,gBAAI,IAAI;AACR,gBAAI,KAAK;AACT,gBAAI,KAAK;AACT,gBAAI,QAAQ;AACZ,gBAAI;AACJ,gBAAI,KAAK,UAAU;AACnB,qBAAS,IAAI,OAAO,IAAI,IAAI,KAAK;AAC/B,kBAAI,IAAI,CAAC;AACT,kBAAI,KAAK,CAAC;AACV,kBAAI,KAAK,UAAU,CAAC;AACpB,oBAAM,GAAG,CAAC;AACV,kBAAI,OAAO,IAAI,YAAY,GAAG;AAC5B,kBAAE,CAAC,IAAI,IAAI,YAAY;AACvB,oBAAI;AACJ,oBAAI;AACJ,wBAAQ,EAAE,CAAC,GAAG;AAAA,kBACZ,KAAK;AACH,sBAAE,CAAC,IAAI,GAAG,CAAC;AACX,sBAAE,CAAC,IAAI,GAAG,CAAC;AACX,sBAAE,CAAC,IAAI,GAAG,CAAC;AACX,sBAAE,CAAC,IAAI,GAAG,CAAC;AACX,sBAAE,CAAC,IAAI,GAAG,CAAC;AACX,sBAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI;AAChB,sBAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI;AAChB;AAAA,kBACF,KAAK;AACH,sBAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI;AAChB;AAAA,kBACF,KAAK;AACH,sBAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI;AAChB;AAAA,kBACF,KAAK;AACH,yBAAK,CAAC,GAAG,CAAC,IAAI;AACd,yBAAK,CAAC,GAAG,CAAC,IAAI;AACd,yBAAK,GAAG;AACR,yBAAK,IAAI,GAAG,IAAI,IAAI,KAAK;AACvB,wBAAE,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,IAAI,IAAI;AAAA,oBAC/B;AACA;AAAA,kBACF;AACE,yBAAK,GAAG;AACR,yBAAK,IAAI,GAAG,IAAI,IAAI,KAAK;AACvB,wBAAE,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,IAAI,IAAI;AAAA,oBAC/B;AACA;AAAA,gBACJ;AAAA,cACF,OAAO;AACL,oBAAI,KAAK,GAAG;AACZ,yBAAS,IAAI,GAAG,IAAI,IAAI,KAAK;AAC3B,oBAAE,CAAC,IAAI,GAAG,CAAC;AAAA,gBACb;AAAA,cACF;AACA,sBAAQ,EAAE,CAAC,GAAG;AAAA,gBACZ,KAAK;AACH,sBAAI,CAAC;AACL,sBAAI,CAAC;AACL;AAAA,gBACF,KAAK;AACH,sBAAI,EAAE,CAAC;AACP;AAAA,gBACF,KAAK;AACH,sBAAI,EAAE,CAAC;AACP;AAAA,gBACF,KAAK;AACH,uBAAK,EAAE,EAAE,SAAS,CAAC;AACnB,uBAAK,EAAE,EAAE,SAAS,CAAC;AACnB,sBAAI,EAAE,EAAE,SAAS,CAAC;AAClB,sBAAI,EAAE,EAAE,SAAS,CAAC;AAClB;AAAA,gBACF;AACE,sBAAI,EAAE,EAAE,SAAS,CAAC;AAClB,sBAAI,EAAE,EAAE,SAAS,CAAC;AAClB;AAAA,cACJ;AAAA,YACF;AACA,mBAAO;AAAA,UACT;AACA,mBAASqB,WAAUvB,OAAM;AACvB,gBAAI,IAAI,eAAeA,KAAI;AAC3B,gBAAI,QAAQ;AAAA,cACV,GAAG;AAAA,cACH,GAAG;AAAA,cACH,IAAI;AAAA,cACJ,IAAI;AAAA,cACJ,GAAG;AAAA,cACH,GAAG;AAAA,cACH,IAAI;AAAA,cACJ,IAAI;AAAA,YACN;AACA,qBAAS,YAAYA,OAAM,GAAGwB,OAAM;AAClC,kBAAI,IAAI;AACR,kBAAI,CAACxB,OAAM;AACT,uBAAO,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AAAA,cAC3C;AACA,kBAAI,EAAEA,MAAK,CAAC,KAAK;AAAA,gBACf,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,IAAI;AACF,kBAAE,KAAK;AACP,kBAAE,KAAK;AAAA,cACT;AACA,sBAAQA,MAAK,CAAC,GAAG;AAAA,gBACf,KAAK;AACH,oBAAE,IAAIA,MAAK,CAAC;AACZ,oBAAE,IAAIA,MAAK,CAAC;AACZ;AAAA,gBACF,KAAK;AACH,sBAAI,WAAWA,MAAK,CAAC,CAAC,MAAM,KAAK,WAAWA,MAAK,CAAC,CAAC,MAAM,GAAG;AAI1D,oBAAAA,QAAO,CAAC,KAAKA,MAAK,CAAC,GAAGA,MAAK,CAAC,CAAC;AAAA,kBAC/B,OAAO;AACL,oBAAAA,QAAO,CAAC,GAAG,EAAE,OAAO,IAAI,MAAM,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,OAAOA,MAAK,MAAM,CAAC,CAAC,CAAC,CAAC;AAAA,kBACpE;AACA;AAAA,gBACF,KAAK;AACH,sBAAIwB,UAAS,OAAOA,UAAS,KAAK;AAEhC,yBAAK,EAAE,IAAI,IAAI,EAAE;AACjB,yBAAK,EAAE,IAAI,IAAI,EAAE;AAAA,kBACnB,OAAO;AAEL,yBAAK,EAAE;AACP,yBAAK,EAAE;AAAA,kBACT;AACA,kBAAAxB,QAAO,CAAC,KAAK,IAAI,EAAE,EAAE,OAAOA,MAAK,MAAM,CAAC,CAAC;AACzC;AAAA,gBACF,KAAK;AACH,sBAAIwB,UAAS,OAAOA,UAAS,KAAK;AAEhC,sBAAE,KAAK,EAAE,IAAI,IAAI,EAAE;AACnB,sBAAE,KAAK,EAAE,IAAI,IAAI,EAAE;AAAA,kBACrB,OAAO;AAEL,sBAAE,KAAK,EAAE;AACT,sBAAE,KAAK,EAAE;AAAA,kBACX;AACA,kBAAAxB,QAAO,CAAC,GAAG,EAAE,OAAO,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAIA,MAAK,CAAC,GAAGA,MAAK,CAAC,CAAC,CAAC;AAC/D;AAAA,gBACF,KAAK;AACH,oBAAE,KAAKA,MAAK,CAAC;AACb,oBAAE,KAAKA,MAAK,CAAC;AACb,kBAAAA,QAAO,CAAC,GAAG,EAAE,OAAO,IAAI,EAAE,GAAG,EAAE,GAAGA,MAAK,CAAC,GAAGA,MAAK,CAAC,GAAGA,MAAK,CAAC,GAAGA,MAAK,CAAC,CAAC,CAAC;AACrE;AAAA,gBACF,KAAK;AACH,kBAAAA,QAAO,CAAC,GAAG,EAAE,OAAOA,MAAK,CAAC,GAAG,EAAE,CAAC;AAChC;AAAA,gBACF,KAAK;AACH,kBAAAA,QAAO,CAAC,GAAG,EAAE,OAAO,EAAE,GAAGA,MAAK,CAAC,CAAC;AAChC;AAAA,gBACF,KAAK;AACH;AAAA,gBACF,KAAK;AACH;AAAA,cACJ;AACA,qBAAOA;AAAA,YACT;AACA,qBAAS,OAAO,IAAIyB,IAAG;AACrB,kBAAI,GAAGA,EAAC,EAAE,SAAS,GAAG;AACpB,mBAAGA,EAAC,EAAE,MAAM;AACZ,oBAAI,KAAK,GAAGA,EAAC;AACb,uBAAO,GAAG,QAAQ;AAChB,wBAAMA,EAAC,IAAI;AACX,qBAAG,OAAOA,MAAK,GAAG,CAAC,GAAG,EAAE,OAAO,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC;AAAA,gBACjD;AACA,mBAAG,OAAOA,IAAG,CAAC;AACd,qBAAK,EAAE;AAAA,cACT;AAAA,YACF;AACA,gBAAI,QAAQ,CAAC;AACb,gBAAI,SAAS;AACb,gBAAI,OAAO;AAEX,gBAAI,KAAK,EAAE;AACX,qBAAS,IAAI,GAAG,IAAI,IAAI,KAAK;AAC3B,kBAAI,EAAE,CAAC,GAAG;AACR,yBAAS,EAAE,CAAC,EAAE,CAAC;AAAA,cACjB;AAEA,kBAAI,WAAW,KAAK;AAElB,sBAAM,CAAC,IAAI;AACX,oBAAI,IAAI,GAAG;AACT,yBAAO,MAAM,IAAI,CAAC;AAAA,gBACpB;AAAA,cACF;AACA,gBAAE,CAAC,IAAI,YAAY,EAAE,CAAC,GAAG,OAAO,IAAI;AAEpC,kBAAI,MAAM,CAAC,MAAM,OAAO,WAAW,KAAK;AACtC,sBAAM,CAAC,IAAI;AAAA,cACb;AAIA,qBAAO,GAAG,CAAC;AAEX,kBAAI,MAAM,EAAE,CAAC;AACb,kBAAI,SAAS,IAAI;AACjB,oBAAM,IAAI,IAAI,SAAS,CAAC;AACxB,oBAAM,IAAI,IAAI,SAAS,CAAC;AACxB,oBAAM,KAAK,WAAW,IAAI,SAAS,CAAC,CAAC,KAAK,MAAM;AAChD,oBAAM,KAAK,WAAW,IAAI,SAAS,CAAC,CAAC,KAAK,MAAM;AAAA,YAClD;AAGA,gBAAI,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,MAAM,KAAK;AAC/B,gBAAE,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC;AAAA,YACvB;AACA,mBAAO;AAAA,UACT;AACA,iBAAO,SAAU,UAAU;AACzB,mBAAOF,WAAU,QAAQ,EAAE,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,KAAK,GAAG;AAAA,UAC1D;AAAA,QACF,EAAE;AACF,QAAAjE,GAAE,YAAY;AACd,QAAAA,GAAE,IAAIgD;AACN,eAAOhD;AAAA,MACT,EAAE;AACF,UAAI,SAAS;AAAA;AAAA;AAAA;AAAA,QAIX,iBAAiB;AAAA;AAAA;AAAA;AAAA;AAAA,QAKjB,iBAAiB;AAAA,QACjB,cAAc;AAAA;AAAA;AAAA,QAGd,mBAAmB;AAAA,MACrB;AAMA,UAAI,UAAU;AACd,UAAI,WAAW;AACf,UAAI,UAAU;AACd,UAAI,UAAU;AACd,UAAI,WAAW;AACf,UAAI,UAAU;AACd,UAAI,SAAS;AACb,UAAI,YAAY;AAChB,UAAI,UAAU;AACd,UAAI,YAAY;AAChB,UAAI,YAAY;AAChB,UAAI,SAAS;AACb,UAAI,YAAY;AAChB,UAAI,YAAY;AAChB,UAAI,eAAe;AACnB,UAAI,aAAa;AACjB,UAAI,iBAAiB;AACrB,UAAI,cAAc;AAClB,UAAI,aAAa;AACjB,UAAI,aAAa;AACjB,UAAI,UAAU;AACd,UAAI,WAAW;AACf,UAAI,WAAW;AACf,UAAI,WAAW;AACf,UAAI,kBAAkB;AACtB,UAAI,YAAY;AAChB,UAAI,YAAY;AAChB,UAAI,iBAAiB,CAAC;AACtB,qBAAe,OAAO,IAAI;AAC1B,qBAAe,QAAQ,IAAI;AAC3B,qBAAe,cAAc,IAAI;AACjC,qBAAe,WAAW,IAAI;AAC9B,qBAAe,OAAO,IAAI;AAC1B,qBAAe,OAAO,IAAI;AAC1B,qBAAe,UAAU,IAAI;AAC7B,qBAAe,UAAU,IAAI;AAC7B,qBAAe,OAAO,IAAI;AAC1B,qBAAe,QAAQ,IAAI;AAC3B,qBAAe,QAAQ,IAAI;AAC3B,qBAAe,MAAM,IAAI;AACzB,qBAAe,SAAS,IAAI;AAC5B,qBAAe,SAAS,IAAI;AAC5B,qBAAe,SAAS,IAAI;AAC5B,qBAAe,MAAM,IAAI;AACzB,qBAAe,SAAS,IAAI;AAC5B,qBAAe,SAAS,IAAI;AAC5B,qBAAe,QAAQ,IAAI;AAC3B,qBAAe,eAAe,IAAI;AAClC,qBAAe,SAAS,IAAI;AAC5B,qBAAe,SAAS,IAAI;AAC5B,qBAAe,QAAQ,IAAI;AAC3B,qBAAe,OAAO,IAAI;AAC1B,qBAAe,UAAU,IAAI;AAG7B,UAAI,gBAAgB;AACpB,UAAI,oBAAoB;AACxB,UAAI,wBAAwB;AAC5B,UAAI,sBAAsB;AAC1B,UAAI,4BAA4B;AAChC,UAAI,8BAA8B;AAClC,UAAI,eAAe,oBAAoB,wBAAwB,sBAAsB,4BAA4B;AACjH,UAAI,iBAAiB;AACrB,UAAI,eAAe;AACnB,UAAI,gBAAgB;AACpB,UAAI,iBAAiB;AACrB,UAAI,qBAAqB;AACzB,UAAI,eAAe;AACnB,UAAI,eAAe;AACnB,UAAI,aAAa;AACjB,UAAI,eAAe,gBAAgB,iBAAiB,qBAAqB;AAGzE,UAAI,SAAS;AACb,UAAI,UAAU,MAAM,eAAe;AACnC,UAAI,UAAU,MAAM,eAAe;AACnC,UAAI,UAAU;AACd,UAAI,YAAY,MAAM,iBAAiB;AACvC,UAAI,UAAU,MAAM,eAAe;AACnC,UAAI,SAAS,OAAO,iBAAiB,eAAe,UAAU,iBAAiB,eAAe,gBAAgB;AAC9G,UAAI,SAAS;AACb,UAAI,aAAa,QAAQ,UAAU,MAAM,SAAS;AAClD,UAAI,cAAc,OAAO,gBAAgB;AACzC,UAAI,aAAa;AACjB,UAAI,aAAa;AACjB,UAAI,UAAU,MAAM,eAAe;AACnC,UAAI,QAAQ;AAGZ,UAAI,cAAc,QAAQ,UAAU,MAAM,SAAS;AACnD,UAAI,cAAc,QAAQ,UAAU,MAAM,SAAS;AACnD,UAAI,kBAAkB,QAAQ,SAAS;AACvC,UAAI,kBAAkB,QAAQ,SAAS;AACvC,UAAI,WAAW,aAAa;AAC5B,UAAI,WAAW,MAAM,aAAa;AAClC,UAAI,YAAY,QAAQ,QAAQ,QAAQ,CAAC,aAAa,YAAY,UAAU,EAAE,KAAK,GAAG,IAAI,OAAO,WAAW,YAAY;AACxH,UAAI,aAAa;AACjB,UAAI,aAAa;AACjB,UAAI,QAAQ,WAAW,WAAW;AAClC,UAAI,UAAU,QAAQ,CAAC,WAAW,YAAY,UAAU,EAAE,KAAK,GAAG,IAAI,MAAM;AAC5E,UAAI,iBAAiB,OAAO,CAAC,UAAU,MAAM,UAAU,MAAM,kBAAkB,QAAQ,CAAC,SAAS,SAAS,GAAG,EAAE,KAAK,GAAG,IAAI,KAAK,cAAc,MAAM,kBAAkB,QAAQ,CAAC,SAAS,UAAU,aAAa,GAAG,EAAE,KAAK,GAAG,IAAI,KAAK,UAAU,MAAM,cAAc,MAAM,iBAAiB,UAAU,MAAM,iBAAiB,YAAY,YAAY,UAAU,KAAK,OAAO,EAAE,KAAK,GAAG,GAAG,GAAG;AACzX,UAAI,mBAAmB;AACvB,UAAI,iBAAiB;AAGrB,UAAI,aAAa;AAGjB,UAAI,WAAW,MAAM,gBAAgB;AAGrC,UAAI,mBAAmB,KAAK,cAAc,UAAU;AACpD,UAAI,WAAW,QAAQ,CAAC,kBAAkB,SAAS,YAAY,YAAY,QAAQ,EAAE,KAAK,GAAG,IAAI;AAGjG,UAAI,YAAY,OAAO,SAAS,QAAQ,SAAS,QAAQ,WAAW,QAAQ,GAAG;AAC/E,UAAI,eAAe;AACnB,UAAI,gBAAgB;AACpB,UAAI,gBAAgB,IAAI,WAAW,CAAC;AACpC,UAAI,eAAe;AACnB,UAAI,aAAa;AAAA;AAAA,QAEjB;AAAA,QAQsC;AAAA,MAAG;AACzC,UAAI,WAAW;AACf,UAAI,iBAAiB,OAAO,UAAU,KAAK,KAAK,oEAAoE;AACpH,UAAI,kBAAkB,aAAa;AAInC,UAAI,cAAc;AAGlB,UAAI,aAAa,SAAU,QAAQ;AACjC,eAAO,UAAU,KAAK,MAAM;AAAA,MAC9B;AACA,UAAI,iBAAiB,SAAU,QAAQ;AACrC,eAAO,OAAO,MAAM,SAAS,KAAK,CAAC;AAAA,MACrC;AACA,UAAI,eAAe,SAAU,QAAQ;AACnC,eAAO,OAAO,MAAM,EAAE;AAAA,MACxB;AACA,UAAI,gBAAgB,SAAU,QAAQ;AACpC,eAAO,WAAW,MAAM,IAAI,eAAe,MAAM,IAAI,aAAa,MAAM;AAAA,MAC1E;AACA,UAAI,SAAS,SAAU,QAAQ;AAC7B,YAAI,UAAU,MAAM;AAClB,iBAAO,CAAC;AAAA,QACV;AACA,eAAO,OAAO,MAAM,EAAE,IAAI,SAAU,KAAK;AACvC,iBAAO,OAAO,GAAG;AAAA,QACnB,CAAC;AAAA,MACH;AACA,UAAI,SAAS,SAAU,QAAQ;AAC7B,eAAO,YAAY,MAAM,IAAI,cAAc,MAAM,IAAI,OAAO,KAAK,OAAO,MAAM,CAAC;AAAA,MACjF;AACA,UAAI,WAAW,SAAU,QAAQ;AAC/B,YAAI,CAAC,YAAY,MAAM,GAAG;AACxB,iBAAO,OAAO,KAAK,MAAM;AAAA,QAC3B;AACA,YAAIO,UAAS,CAAC;AACd,iBAAS,OAAO,OAAO,MAAM,GAAG;AAC9B,cAAI,eAAe,KAAK,QAAQ,GAAG,KAAK,OAAO,eAAe;AAC5D,YAAAA,QAAO,KAAK,GAAG;AAAA,UACjB;AAAA,QACF;AACA,eAAOA;AAAA,MACT;AACA,UAAI,gBAAgB,SAAU,OAAO,WAAW;AAC9C,YAAI,QAAQ,MAAM,QAAQ,KAAK;AAC/B,YAAI,QAAQ,CAAC,SAAS,aAAa,KAAK,KAAK,OAAO,KAAK,MAAM;AAC/D,YAAI,SAAS,CAAC,SAAS,CAAC,SAAS,aAAa,KAAK;AACnD,YAAI,cAAc,SAAS,SAAS;AACpC,YAAID,UAAS,MAAM;AACnB,YAAIC,UAAS,IAAI,MAAM,cAAcD,UAAS,CAAC;AAC/C,YAAID,SAAQ,cAAc,KAAKC;AAC/B,eAAO,EAAED,SAAQC,SAAQ;AACvB,UAAAC,QAAOF,MAAK,IAAI,KAAKA;AAAA,QACvB;AACA,iBAAS,OAAO,OAAO;AACrB,eAAK,aAAa,eAAe,KAAK,OAAO,GAAG,MAAM,EAAE;AAAA,WAExD,QAAQ;AAAA,UAER,QAAQ,KAAKC,OAAM,KAAK;AACtB,YAAAC,QAAO,KAAK,GAAG;AAAA,UACjB;AAAA,QACF;AACA,eAAOA;AAAA,MACT;AACA,UAAI,eAAe,SAAU,OAAO,KAAK;AACvC,YAAID,UAAS,MAAM;AACnB,eAAOA,WAAU;AACf,cAAI,GAAG,MAAMA,OAAM,EAAE,CAAC,GAAG,GAAG,GAAG;AAC7B,mBAAOA;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,KAAK,SAAU,OAAO,OAAO;AAC/B,eAAO,UAAU,SAAS,UAAU,SAAS,UAAU;AAAA,MACzD;AACA,UAAI,eAAe,SAAU,OAAO;AAClC,eAAO,SAAS,QAAQ,OAAO,SAAS;AAAA,MAC1C;AACA,UAAI,iBAAiB,SAAU,OAAOD,QAAO,QAAQ;AACnD,YAAI,CAAC,WAAW,MAAM,GAAG;AACvB,iBAAO;AAAA,QACT;AACA,YAAI,OAAO,OAAOA;AAClB,YAAI,qBAAqB,QAAQ,WAAW,YAAY,MAAM,KAAKA,SAAQ,MAAMA,SAAQ,OAAO,SAAS,QAAQ,YAAYA,UAAS;AACtI,YAAI,oBAAoB;AACtB,iBAAO,GAAG,OAAOA,MAAK,GAAG,KAAK;AAAA,QAChC;AACA,eAAO;AAAA,MACT;AACA,UAAI,QAAQ,SAAU,OAAO;AAC3B,eAAO,aAAa,KAAK,KAAK,OAAO,KAAK,KAAK;AAAA,MACjD;AACA,UAAI,QAAQ,SAAU,OAAO;AAC3B,eAAO,aAAa,KAAK,KAAK,OAAO,KAAK,KAAK;AAAA,MACjD;AACA,UAAI,cAAc,SAAU,OAAO;AACjC,YAAI,OAAO,SAAS,MAAM;AAC1B,YAAI,QAAQ,OAAO,SAAS,cAAc,KAAK,aAAa,OAAO;AACnE,eAAO,UAAU;AAAA,MACnB;AACA,UAAI,cAAc,SAAU,QAAQ,KAAK,OAAO;AAC9C,YAAI,WAAW,OAAO,GAAG;AACzB,YAAI,EAAE,eAAe,KAAK,QAAQ,GAAG,KAAK,GAAG,UAAU,KAAK,MAAM,UAAU,UAAa,EAAE,OAAO,SAAS;AACzG,iBAAO,GAAG,IAAI;AAAA,QAChB;AAAA,MACF;AACA,UAAI,aAAa,SAAU,QAAQ+D,QAAO,QAAQ;AAChD,YAAI/D,SAAQ;AACZ,YAAIC,UAAS8D,OAAM;AACnB,eAAO,EAAE/D,SAAQC,SAAQ;AACvB,cAAI,MAAM8D,OAAM/D,MAAK;AACrB,sBAAY,QAAQ,KAAK,OAAO,GAAG,CAAC;AAAA,QACtC;AACA,eAAO;AAAA,MACT;AACA,UAAI,cAAc,SAAU,OAAO;AACjC,eAAO,SAAS,QAAQ,OAAO,UAAU,cAAc,OAAO,MAAM,WAAW,YAAY,MAAM,SAAS,MAAM,MAAM,SAAS,MAAM;AAAA,MACvI;AACA,UAAI,WAAW,SAAU,OAAO;AAC9B,eAAO,OAAO,SAAS,YAAY,aAAa,KAAK,KAAK,OAAO,KAAK,MAAM;AAAA,MAC9E;AACA,UAAI,iBAAiB,SAAU,OAAO;AACpC,YAAIC,UAAS,MAAM;AACnB,YAAIC,UAAS,IAAI,MAAM,YAAYD,OAAM;AACzC,YAAIA,WAAU,OAAO,MAAM,CAAC,KAAK,YAAY,eAAe,KAAK,OAAO,OAAO,GAAG;AAChF,UAAAC,QAAO,QAAQ,MAAM;AACrB,UAAAA,QAAO,QAAQ,MAAM;AAAA,QACvB;AACA,eAAOA;AAAA,MACT;AACA,UAAI,YAAY,SAAU,QAAQ,OAAO;AACvC,YAAIF,SAAQ;AACZ,YAAIC,UAAS,OAAO;AACpB,kBAAU,QAAQ,IAAI,MAAMA,OAAM;AAClC,eAAO,EAAED,SAAQC,SAAQ;AACvB,gBAAMD,MAAK,IAAI,OAAOA,MAAK;AAAA,QAC7B;AACA,eAAO;AAAA,MACT;AACA,UAAI,SAAS,SAAU,OAAO;AAC5B,YAAI,SAAS,MAAM;AACjB,iBAAO,UAAU,SAAY,eAAe;AAAA,QAC9C;AACA,eAAO,OAAO,UAAU,SAAS,KAAK,KAAK;AAAA,MAC7C;AACA,UAAI,mBAAmB,SAAU,aAAa;AAC5C,YAAIE,UAAS,IAAI,YAAY,YAAY,YAAY,UAAU;AAC/D,YAAI,WAAWA,OAAM,EAAE,IAAI,IAAI,WAAW,WAAW,CAAC;AACtD,eAAOA;AAAA,MACT;AACA,UAAI,kBAAkB,SAAU,YAAY,QAAQ;AAClD,YAAI,SAAS,SAAS,iBAAiB,WAAW,MAAM,IAAI,WAAW;AACvE,eAAO,IAAI,WAAW,YAAY,QAAQ,WAAW,YAAY,WAAW,MAAM;AAAA,MACpF;AACA,UAAI,cAAc,SAAU,QAAQ;AAClC,YAAIA,UAAS,IAAI,OAAO,YAAY,OAAO,QAAQ,OAAO,KAAK,MAAM,CAAC;AACtE,QAAAA,QAAO,YAAY,OAAO;AAC1B,eAAOA;AAAA,MACT;AACA,UAAI,kBAAkB,SAAU,QAAQ;AACtC,eAAO,OAAO,OAAO,eAAe,cAAc,CAAC,YAAY,MAAM,IAAI,OAAO,OAAO,OAAO,eAAe,MAAM,CAAC,IAAI,CAAC;AAAA,MAC3H;AACA,UAAI,aAAa,SAAU,QAAQ;AACjC,YAAI,UAAU,MAAM;AAClB,iBAAO,CAAC;AAAA,QACV;AACA,iBAAS,OAAO,MAAM;AACtB,YAAI,UAAU,OAAO,sBAAsB,MAAM;AACjD,eAAO,QAAQ,OAAO,SAAU,QAAQ;AACtC,iBAAO,qBAAqB,KAAK,QAAQ,MAAM;AAAA,QACjD,CAAC;AAAA,MACH;AACA,UAAI,cAAc,SAAU,QAAQ,QAAQ;AAC1C,eAAO,WAAW,QAAQ,WAAW,MAAM,GAAG,MAAM;AAAA,MACtD;AACA,eAAS,cAAc,UAAU,QAAQ;AACvC,YAAI,SAAS,SAAS,iBAAiB,SAAS,MAAM,IAAI,SAAS;AACnE,eAAO,IAAI,SAAS,YAAY,QAAQ,SAAS,YAAY,SAAS,UAAU;AAAA,MAClF;AACA,UAAI,iBAAiB,SAAU,QAAQ,KAAK,QAAQ;AAClD,YAAI,cAAc,OAAO;AACzB,gBAAQ,KAAK;AAAA,UACX,KAAK;AACH,mBAAO,iBAAiB,QAAQ,MAAM;AAAA,UACxC,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,IAAI,YAAY,CAAC,MAAM;AAAA,UAChC,KAAK;AACH,mBAAO,cAAc,QAAQ,MAAM;AAAA,UACrC,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,gBAAgB,QAAQ,MAAM;AAAA,UACvC,KAAK;AACH,mBAAO,IAAI,YAAY,MAAM;AAAA,UAC/B,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,IAAI,YAAY,MAAM;AAAA,UAC/B,KAAK;AACH,mBAAO,YAAY,MAAM;AAAA,UAC3B,KAAK;AACH,mBAAO,IAAI,YAAY;AAAA,UACzB,KAAK;AACH,mBAAO,OAAO,UAAU,UAAU,OAAO,OAAO,UAAU,QAAQ,KAAK,MAAM,CAAC,IAAI,CAAC;AAAA,QACvF;AAAA,MACF;AACA,UAAI,eAAe,SAAU,OAAO;AAClC,eAAO,aAAa,KAAK,KAAK,WAAW,KAAK,OAAO,KAAK,CAAC;AAAA,MAC7D;AACA,UAAI,aAAa,SAAU,QAAQ;AACjC,YAAIA,UAAS,OAAO,KAAK,MAAM;AAC/B,YAAI,CAAC,MAAM,QAAQ,MAAM,KAAK,UAAU,MAAM;AAC5C,UAAAA,QAAO,KAAK,MAAMA,SAAQ,WAAW,OAAO,MAAM,CAAC,CAAC;AAAA,QACtD;AACA,eAAOA;AAAA,MACT;AACA,UAAI,eAAe,SAAU,QAAQ;AACnC,YAAIA,UAAS,CAAC;AACd,eAAO,QAAQ;AACb,UAAAA,QAAO,KAAK,MAAMA,SAAQ,WAAW,MAAM,CAAC;AAC5C,mBAAS,OAAO,eAAe,OAAO,MAAM,CAAC;AAAA,QAC/C;AACA,eAAOA;AAAA,MACT;AACA,UAAI,eAAe,SAAU,QAAQ;AACnC,YAAIA,UAAS,CAAC;AACd,iBAAS,OAAO,QAAQ;AACtB,UAAAA,QAAO,KAAK,GAAG;AAAA,QACjB;AACA,YAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,UAAAA,QAAO,KAAK,MAAMA,SAAQ,aAAa,MAAM,CAAC;AAAA,QAChD;AACA,eAAOA;AAAA,MACT;AACA,UAAI,aAAa,SAAU,KAAK,KAAK;AACnC,YAAI,WAAW,IAAI;AACnB,YAAIqC,QAAO;AACX,eAAO,UAAU,GAAG,IAAIA,MAAK,OAAO,QAAQ,WAAW,WAAW,MAAM,IAAIA,MAAK;AAAA,MACnF;AACA,UAAI,eAAe,SAAU,QAAQ,OAAO,WAAW,OAAO;AAC5D,YAAI,WAAW,WAAW,MAAM;AAChC,YAAI,YAAY,SAAS;AACzB,YAAI,WAAW,WAAW,KAAK;AAC/B,YAAI,YAAY,SAAS;AACzB,YAAI,aAAa,WAAW;AAC1B,iBAAO;AAAA,QACT;AACA,YAAI;AACJ,YAAIvC,SAAQ;AACZ,eAAOA,UAAS;AACd,gBAAM,SAASA,MAAK;AACpB,cAAI,CAAC,eAAe,KAAK,OAAO,GAAG,GAAG;AACpC,mBAAO;AAAA,UACT;AAAA,QACF;AACA,YAAI,aAAa,MAAM,IAAI,MAAM;AACjC,YAAI,aAAa,MAAM,IAAI,KAAK;AAChC,YAAI,cAAc,YAAY;AAC5B,iBAAO,cAAc,SAAS,cAAc;AAAA,QAC9C;AACA,YAAIE,UAAS;AACb,cAAM,IAAI,QAAQ,KAAK;AACvB,cAAM,IAAI,OAAO,MAAM;AACvB,YAAI;AACJ,YAAI;AACJ,eAAO,EAAEF,SAAQ,WAAW;AAC1B,gBAAM,SAASA,MAAK;AACpB,cAAI,WAAW,OAAO,GAAG;AACzB,cAAI,WAAW,MAAM,GAAG;AACxB,cAAI,EAAE,aAAa,SAAY,aAAa,YAAY,UAAU,UAAU,UAAU,KAAK,IAAI,WAAW;AACxG,YAAAE,UAAS;AACT;AAAA,UACF;AACA,uBAAa,WAAW,OAAO;AAAA,QACjC;AACA,YAAIA,WAAU,CAAC,UAAU;AACvB,cAAI,UAAU,OAAO;AACrB,cAAI,UAAU,MAAM;AACpB,cAAI,WAAW,WAAW,iBAAiB,UAAU,iBAAiB,SAAS,EAAE,OAAO,YAAY,cAAc,mBAAmB,WAAW,OAAO,YAAY,cAAc,mBAAmB,UAAU;AAC5M,YAAAA,UAAS;AAAA,UACX;AAAA,QACF;AACA,cAAM,QAAQ,EAAE,MAAM;AACtB,cAAM,QAAQ,EAAE,KAAK;AACrB,eAAOA;AAAA,MACT;AACA,UAAI,cAAc,SAAU,OAAO,OAAO,OAAO;AAC/C,YAAI,UAAU,OAAO;AACnB,iBAAO;AAAA,QACT;AACA,YAAI,SAAS,QAAQ,SAAS,QAAQ,CAAC,aAAa,KAAK,KAAK,CAAC,aAAa,KAAK,GAAG;AAClF,iBAAO,UAAU,SAAS,UAAU;AAAA,QACtC;AACA,eAAO,gBAAgB,OAAO,OAAO,aAAa,KAAK;AAAA,MACzD;AACA,UAAI,kBAAkB,SAAU,QAAQ,OAAO,WAAW,OAAO;AAC/D,YAAI,WAAW,MAAM,QAAQ,MAAM;AACnC,YAAI,WAAW,MAAM,QAAQ,KAAK;AAClC,YAAI,SAAS,WAAW,WAAW,OAAO,MAAM;AAChD,YAAI,SAAS,WAAW,WAAW,OAAO,KAAK;AAC/C,iBAAS,UAAU,UAAU,YAAY;AACzC,iBAAS,UAAU,UAAU,YAAY;AACzC,YAAI,WAAW,UAAU;AACzB,YAAI,WAAW,UAAU;AACzB,YAAI,YAAY,UAAU;AAC1B,YAAI,aAAa,CAAC,UAAU;AAC1B,oBAAU,QAAQ,IAAI,MAAM;AAC5B,iBAAO,YAAY,aAAa,MAAM,IAAI,YAAY,QAAQ,OAAO,OAAO,WAAW,KAAK,IAAI,WAAW,QAAQ,OAAO,QAAQ,WAAW,KAAK;AAAA,QACpJ;AACA,YAAI,eAAe,YAAY,eAAe,KAAK,QAAQ,aAAa;AACxE,YAAI,eAAe,YAAY,eAAe,KAAK,OAAO,aAAa;AACvE,YAAI,gBAAgB,cAAc;AAChC,cAAI,eAAe,eAAe,OAAO,MAAM,IAAI;AACnD,cAAI,eAAe,eAAe,MAAM,MAAM,IAAI;AAClD,oBAAU,QAAQ,IAAI,MAAM;AAC5B,iBAAO,UAAU,cAAc,cAAc,KAAK;AAAA,QACpD;AACA,YAAI,CAAC,WAAW;AACd,iBAAO;AAAA,QACT;AACA,kBAAU,QAAQ,IAAI,MAAM;AAC5B,eAAO,aAAa,QAAQ,OAAO,WAAW,KAAK;AAAA,MACrD;AACA,UAAI,cAAc,SAAU,OAAO,OAAO,kBAAkB,WAAW,OAAO;AAC5E,YAAI,YAAY;AAChB,YAAI,YAAY,MAAM;AACtB,YAAI,YAAY,MAAM;AACtB,YAAI,aAAa,aAAa,EAAE,aAAa,YAAY,YAAY;AACnE,iBAAO;AAAA,QACT;AAEA,YAAI,aAAa,MAAM,IAAI,KAAK;AAChC,YAAI,aAAa,MAAM,IAAI,KAAK;AAChC,YAAI,cAAc,YAAY;AAC5B,iBAAO,cAAc,SAAS,cAAc;AAAA,QAC9C;AACA,YAAIF,SAAQ;AACZ,YAAIE,UAAS;AACb,YAAI,OAAO,mBAAmB,IAAI,SAAS,IAAI;AAC/C,cAAM,IAAI,OAAO,KAAK;AACtB,cAAM,IAAI,OAAO,KAAK;AACtB,YAAI,OAAO,WAAY;AACrB,cAAI,WAAW;AACf,cAAI,WAAW,MAAMF,MAAK;AAC1B,cAAI,WAAW,MAAMA,MAAK;AAC1B,cAAI,aAAa,QAAW;AAC1B,gBAAI,UAAU;AACZ;AAAA,YACF;AACA,YAAAE,UAAS;AACT,mBAAO;AAAA,UACT;AACA,cAAI,MAAM;AACR,gBAAI,CAAC,KAAK,OAAO,SAAU8D,WAAU,UAAU;AAC7C,kBAAI,CAAC,SAAS,MAAM,QAAQ,MAAM,aAAaA,aAAY,UAAU,UAAUA,WAAU,KAAK,IAAI;AAChG,uBAAO,KAAK,KAAK,QAAQ;AAAA,cAC3B;AAAA,YACF,CAAC,GAAG;AACF,cAAA9D,UAAS;AACT,qBAAO;AAAA,YACT;AAAA,UACF,WAAW,EAAE,aAAa,YAAY,UAAU,UAAU,UAAU,KAAK,IAAI;AAC3E,YAAAA,UAAS;AACT,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO,EAAEF,SAAQ,WAAW;AAC1B,cAAI,WAAW,KAAK;AACpB,cAAI,aAAa,QAAS;AAAA,QAC5B;AACA,cAAM,QAAQ,EAAE,KAAK;AACrB,cAAM,QAAQ,EAAE,KAAK;AACrB,eAAOE;AAAA,MACT;AACA,UAAI,OAAO,SAAU,OAAO,WAAW;AACrC,YAAIF,SAAQ;AACZ,YAAIC,UAAS,SAAS,OAAO,IAAI,MAAM;AACvC,eAAO,EAAED,SAAQC,SAAQ;AACvB,cAAI,UAAU,MAAMD,MAAK,GAAGA,QAAO,KAAK,GAAG;AACzC,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,WAAW,SAAUsD,QAAO,KAAK;AACnC,eAAOA,OAAM,IAAI,GAAG;AAAA,MACtB;AACA,UAAI,wBAAwB,SAAU,QAAQ,OAAO,WAAW,OAAO;AACrE,YAAI,OAAO,cAAc,MAAM,cAAc,CAAC,UAAU,IAAI,WAAW,MAAM,GAAG,IAAI,WAAW,KAAK,GAAG,KAAK,GAAG;AAC7G,iBAAO;AAAA,QACT;AACA,eAAO;AAAA,MACT;AACA,UAAI,aAAa,SAAU,QAAQ,OAAO,KAAK,WAAW,OAAO;AAC/D,gBAAQ,KAAK;AAAA,UACX,KAAK;AACH,gBAAI,OAAO,cAAc,MAAM,cAAc,OAAO,cAAc,MAAM,YAAY;AAClF,qBAAO;AAAA,YACT;AACA,qBAAS,OAAO;AAChB,oBAAQ,MAAM;AACd,mBAAO,sBAAsB,QAAQ,OAAO,WAAW,KAAK;AAAA,UAC9D,KAAK;AACH,mBAAO,sBAAsB,QAAQ,OAAO,WAAW,KAAK;AAAA,UAC9D,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,GAAG,CAAC,QAAQ,CAAC,KAAK;AAAA,UAC3B,KAAK;AACH,mBAAO,OAAO,QAAQ,MAAM,QAAQ,OAAO,WAAW,MAAM;AAAA,UAC9D,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,UAAU,KAAK;AAAA,UACxB,KAAK;AACH,gBAAI,UAAU;AAAA;AAAA;AAAA,UAGhB,KAAK;AACH,wBAAY,UAAU;AACtB,gBAAI,OAAO,QAAQ,MAAM,MAAM;AAC7B,qBAAO;AAAA,YACT;AAEA,gBAAI,UAAU,MAAM,IAAI,MAAM;AAC9B,gBAAI,SAAS;AACX,qBAAO,WAAW;AAAA,YACpB;AAGA,kBAAM,IAAI,QAAQ,KAAK;AACvB,gBAAIpD,UAAS,YAAY,QAAQ,MAAM,GAAG,QAAQ,KAAK,GAAG,MAAM,WAAW,KAAK;AAChF,kBAAM,QAAQ,EAAE,MAAM;AACtB,mBAAOA;AAAA,UACT,KAAK;AACH,mBAAO,OAAO,UAAU,QAAQ,KAAK,MAAM,KAAK,OAAO,UAAU,QAAQ,KAAK,KAAK;AAAA,QACvF;AACA,eAAO;AAAA,MACT;AACA,UAAI,aAAa,SAAU,KAAK;AAC9B,YAAIF,SAAQ;AACZ,YAAIE,UAAS,MAAM,IAAI,IAAI;AAC3B,YAAI,QAAQ,SAAU,OAAO,KAAK;AAChC,UAAAA,QAAO,EAAEF,MAAK,IAAI,CAAC,KAAK,KAAK;AAAA,QAC/B,CAAC;AACD,eAAOE;AAAA,MACT;AACA,UAAI,aAAa,SAAU+D,MAAK;AAC9B,YAAIjE,SAAQ;AACZ,YAAIE,UAAS,IAAI,MAAM+D,KAAI,IAAI;AAC/B,QAAAA,KAAI,QAAQ,SAAU,OAAO;AAC3B,UAAA/D,QAAO,EAAEF,MAAK,IAAI;AAAA,QACpB,CAAC;AACD,eAAOE;AAAA,MACT;AACA,UAAI,QAAQ,SAAU,OAAO,QAAQ;AACnC,YAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,iBAAO;AAAA,QACT;AACA,YAAI,OAAO,OAAO;AAClB,YAAI,SAAS,YAAY,SAAS,aAAa,SAAS,QAAQ,SAAS,KAAK,GAAG;AAC/E,iBAAO;AAAA,QACT;AACA,eAAO,cAAc,KAAK,KAAK,KAAK,CAAC,aAAa,KAAK,KAAK,KAAK,UAAU,QAAQ,SAAS,OAAO,MAAM;AAAA,MAC3G;AACA,UAAI,eAAe,SAAU,QAAQ;AACnC,YAAIA,UAAS,CAAC;AACd,YAAI,OAAO,WAAW,CAAC,MAAM,eAAe;AAC1C,UAAAA,QAAO,KAAK,EAAE;AAAA,QAChB;AACA,eAAO,QAAQ,YAAY,SAAU,OAAO,YAAY,OAAO,WAAW;AACxE,cAAI,MAAM;AACV,cAAI,OAAO;AACT,kBAAM,UAAU,QAAQ,cAAc,IAAI;AAAA,UAC5C,WAAW,YAAY;AACrB,kBAAM,WAAW,KAAK;AAAA,UACxB;AACA,UAAAA,QAAO,KAAK,GAAG;AAAA,QACjB,CAAC;AACD,eAAOA;AAAA,MACT;AACA,UAAI,WAAW,SAAUmC,OAAM,QAAQ;AACrC,YAAI,MAAM,QAAQA,KAAI,GAAG;AACvB,iBAAOA;AAAA,QACT;AACA,eAAO,MAAMA,OAAM,MAAM,IAAI,CAACA,KAAI,IAAI,aAAa,KAAKA,KAAI;AAAA,MAC9D;AACA,UAAI,QAAQ,SAAU,QAAQA,OAAM;AAClC,QAAAA,QAAO,SAASA,OAAM,MAAM;AAC5B,YAAIrC,SAAQ;AACZ,YAAIC,UAASoC,MAAK;AAClB,eAAO,UAAU,QAAQrC,SAAQC,SAAQ;AACvC,mBAAS,OAAO,MAAMoC,MAAKrC,MAAK,CAAC,CAAC;AAClC,UAAAA;AAAA,QACF;AACA,eAAOA,UAASA,UAASC,UAAS,SAAS;AAAA,MAC7C;AACA,eAAS,iBAAiB,OAAO,OAAO;AACtC,YAAI,UAAU,OAAO;AACnB,cAAI,eAAe,UAAU;AAC7B,cAAI,YAAY,UAAU;AAC1B,cAAI,iBAAiB,UAAU;AAC/B,cAAI,cAAc,SAAS,KAAK;AAChC,cAAI,eAAe,UAAU;AAC7B,cAAI,YAAY,UAAU;AAC1B,cAAI,iBAAiB,UAAU;AAC/B,cAAI,cAAc,SAAS,KAAK;AAChC,cAAI,CAAC,aAAa,CAAC,eAAe,CAAC,eAAe,QAAQ,SAAS,eAAe,gBAAgB,kBAAkB,CAAC,aAAa,CAAC,eAAe,aAAa,gBAAgB,kBAAkB,CAAC,gBAAgB,kBAAkB,CAAC,gBAAgB;AACnP,mBAAO;AAAA,UACT;AACA,cAAI,CAAC,aAAa,CAAC,eAAe,CAAC,eAAe,QAAQ,SAAS,eAAe,gBAAgB,kBAAkB,CAAC,aAAa,CAAC,eAAe,aAAa,gBAAgB,kBAAkB,CAAC,gBAAgB,kBAAkB,CAAC,gBAAgB;AACnP,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,eAAS,gBAAgB,QAAQ,OAAO,QAAQ;AAC9C,YAAID,SAAQ;AACZ,YAAI,cAAc,OAAO;AACzB,YAAI,cAAc,MAAM;AACxB,YAAIC,UAAS,YAAY;AACzB,YAAI,eAAe,OAAO;AAC1B,eAAO,EAAED,SAAQC,SAAQ;AACvB,cAAI,QAAQD,SAAQ,eAAe,OAAOA,MAAK,IAAI;AACnD,cAAI,QAAQ,SAAS,OAAO,UAAU,aAAa,QAAQ;AAC3D,cAAIE,UAAS,MAAM,YAAYF,MAAK,GAAG,YAAYA,MAAK,CAAC;AACzD,cAAIE,SAAQ;AACV,gBAAI,SAAS,OAAO,UAAU,YAAY;AACxC,qBAAOA,WAAU,SAAS,SAAS,KAAK;AAAA,YAC1C;AACA,mBAAOA;AAAA,UACT;AAAA,QACF;AACA,eAAO,OAAO,QAAQ,MAAM;AAAA,MAC9B;AACA,UAAI,OAAO,SAAU,OAAOU,SAAQ;AAClC,YAAIN,YAAW,SAAU4D,QAAOC,QAAO;AACrC,cAAIlE,UAASiE,UAAS,OAAO,IAAIA,OAAM;AACvC,iBAAO,CAAC,CAACjE,WAAUiE,OAAM,QAAQC,MAAK,IAAI;AAAA,QAC5C;AACA,YAAI,WAAW;AACf,YAAIjE,UAAS,CAAC;AACd,YAAI,eAAeU,QAAO;AAC1B,YAAI,CAAC,MAAM,QAAQ;AACjB,iBAAOV;AAAA,QACT;AACA,YAAIU,QAAO,UAAU,kBAAkB;AACrC,UAAAN,YAAW,SAAUgD,QAAOc,MAAK;AAC/B,mBAAOd,OAAM,IAAIc,IAAG;AAAA,UACtB;AACA,qBAAW;AACX,UAAAxD,UAAS,IAAI,SAASA,OAAM;AAAA,QAC9B;AACA,cAAO,UAAS,OAAO,OAAO;AAC5B,cAAI,QAAQ,MAAM,GAAG;AACrB,cAAI,WAAW;AACf,kBAAQ,UAAU,IAAI,QAAQ;AAC9B,cAAI,YAAY,aAAa,UAAU;AACrC,gBAAI,cAAc;AAClB,mBAAO,eAAe;AACpB,kBAAIA,QAAO,WAAW,MAAM,UAAU;AACpC,yBAAS;AAAA,cACX;AAAA,YACF;AACA,YAAAV,QAAO,KAAK,KAAK;AAAA,UACnB,WAAW,CAACI,UAASM,SAAQ,QAAQ,GAAG;AACtC,YAAAV,QAAO,KAAK,KAAK;AAAA,UACnB;AAAA,QACF;AACA,eAAOA;AAAA,MACT;AACA,UAAI,YAAY,SAAU,QAAQ;AAChC,YAAII,YAAW,SAAU4D,QAAOC,QAAO;AACrC,cAAIlE,UAASiE,UAAS,OAAO,IAAIA,OAAM;AACvC,iBAAO,CAAC,CAACjE,WAAUiE,OAAM,QAAQC,MAAK,IAAI;AAAA,QAC5C;AACA,YAAIE,YAAW,SAAUf,QAAO,KAAK;AACnC,iBAAOA,OAAM,IAAI,GAAG;AAAA,QACtB;AACA,YAAIrD,UAAS,OAAO,CAAC,EAAE;AACvB,YAAI,YAAY,OAAO;AACvB,YAAI,SAAS,IAAI,MAAM,SAAS;AAChC,YAAIC,UAAS,CAAC;AACd,YAAI;AACJ,YAAI,YAAY;AAChB,YAAI,WAAW;AACf,eAAO,YAAY;AACjB,kBAAQ,OAAO,QAAQ;AACvB,sBAAY,KAAK,IAAI,MAAM,QAAQ,SAAS;AAC5C,iBAAO,QAAQ,IAAID,WAAU,OAAO,MAAM,UAAU,MAAM,IAAI,SAAS,YAAY,KAAK,IAAI;AAAA,QAC9F;AACA,gBAAQ,OAAO,CAAC;AAChB,YAAID,SAAQ;AACZ,YAAI,OAAO,OAAO,CAAC;AACnB,cAAO,QAAO,EAAEA,SAAQC,WAAUC,QAAO,SAAS,WAAW;AAC3D,cAAI,QAAQ,MAAMF,MAAK;AACvB,cAAI,WAAW;AACf,kBAAQ,UAAU,IAAI,QAAQ;AAC9B,cAAI,EAAE,OAAOqE,UAAS,MAAM,QAAQ,IAAI/D,UAASJ,SAAQ,QAAQ,IAAI;AACnE,uBAAW;AACX,mBAAO,EAAE,UAAU;AACjB,kBAAIoD,SAAQ,OAAO,QAAQ;AAC3B,kBAAI,EAAEA,SAAQe,UAASf,QAAO,QAAQ,IAAIhD,UAAS,OAAO,QAAQ,GAAG,QAAQ,IAAI;AAC/E,yBAAS;AAAA,cACX;AAAA,YACF;AACA,gBAAI,MAAM;AACR,mBAAK,KAAK,QAAQ;AAAA,YACpB;AACA,YAAAJ,QAAO,KAAK,KAAK;AAAA,UACnB;AAAA,QACF;AACA,eAAOA;AAAA,MACT;AACA,UAAI,QAAQ,SAAU,OAAO;AAC3B,YAAI,OAAO,UAAU,YAAY,SAAS,KAAK,GAAG;AAChD,iBAAO;AAAA,QACT;AACA,YAAIA,UAAS,KAAK;AAClB,eAAOA,WAAU,OAAO,IAAI,SAAS,YAAY,OAAOA;AAAA,MAC1D;AACA,UAAI,YAAY,SAAU,OAAO,QAAQ,QAAQ,QAAQ,YAAY,KAAK,QAAQ,OAAO;AACvF,YAAI,WAAW,OAAQ,UAAS;AAChC,YAAI,WAAW,OAAQ,UAAS;AAChC,YAAI,WAAW,OAAQ,UAAS;AAChC,YAAIA;AACJ,YAAI,YAAY;AACd,UAAAA,UAAS,SAAS,WAAW,OAAO,KAAK,QAAQ,KAAK,IAAI,WAAW,KAAK;AAAA,QAC5E;AACA,YAAIA,YAAW,QAAW;AACxB,iBAAOA;AAAA,QACT;AACA,YAAI,CAAC,WAAW,KAAK,GAAG;AACtB,iBAAO;AAAA,QACT;AACA,YAAI,QAAQ,MAAM,QAAQ,KAAK;AAC/B,YAAI,MAAM,OAAO,KAAK;AACtB,YAAI,OAAO;AACT,UAAAA,UAAS,eAAe,KAAK;AAC7B,cAAI,CAAC,QAAQ;AACX,mBAAO,UAAU,OAAOA,OAAM;AAAA,UAChC;AAAA,QACF,OAAO;AACL,cAAI,SAAS,OAAO,UAAU;AAC9B,cAAI,QAAQ,aAAa,QAAQ,WAAW,UAAU,CAAC,QAAQ;AAC7D,YAAAA,UAAS,UAAU,SAAS,CAAC,IAAI,gBAAgB,KAAK;AACtD,gBAAI,CAAC,QAAQ;AACX,qBAAO,SAAS,cAAc,OAAO,WAAW,OAAO,OAAO,KAAK,KAAK,GAAGA,OAAM,CAAC,IAAI,YAAY,OAAO,OAAO,OAAOA,SAAQ,KAAK,CAAC;AAAA,YACvI;AAAA,UACF,OAAO;AACL,gBAAI,UAAU,CAAC,eAAe,GAAG,GAAG;AAClC,qBAAO,SAAS,QAAQ,CAAC;AAAA,YAC3B;AACA,YAAAA,UAAS,eAAe,OAAO,KAAK,MAAM;AAAA,UAC5C;AAAA,QACF;AACA,kBAAU,QAAQ,IAAI,MAAM;AAC5B,YAAI,UAAU,MAAM,IAAI,KAAK;AAC7B,YAAI,SAAS;AACX,iBAAO;AAAA,QACT;AACA,cAAM,IAAI,OAAOA,OAAM;AACvB,YAAI,MAAM,KAAK,GAAG;AAChB,gBAAM,QAAQ,SAAU,UAAUkE,MAAK;AACrC,YAAAlE,QAAO,IAAIkE,MAAK,UAAU,UAAU,QAAQ,QAAQ,QAAQ,YAAYA,MAAK,OAAO,KAAK,CAAC;AAAA,UAC5F,CAAC;AACD,iBAAOlE;AAAA,QACT;AACA,YAAI,MAAM,KAAK,GAAG;AAChB,gBAAM,QAAQ,SAAU,UAAU;AAChC,YAAAA,QAAO,IAAI,UAAU,UAAU,QAAQ,QAAQ,QAAQ,YAAY,UAAU,OAAO,KAAK,CAAC;AAAA,UAC5F,CAAC;AACD,iBAAOA;AAAA,QACT;AACA,YAAI,aAAa,KAAK,GAAG;AACvB,iBAAOA;AAAA,QACT;AACA,YAAI,WAAW,SAAS,SAAS,eAAe,aAAa,SAAS,SAAS;AAC/E,YAAI6D,SAAQ,QAAQ,SAAY,SAAS,KAAK;AAC9C,SAACA,UAAS,OAAO,QAAQ,SAAU,UAAUK,MAAK;AAChD,cAAIL,QAAO;AACT,YAAAK,OAAM;AACN,uBAAW,MAAMA,IAAG;AAAA,UACtB;AACA,sBAAYlE,SAAQkE,MAAK,UAAU,UAAU,QAAQ,QAAQ,QAAQ,YAAYA,MAAK,OAAO,KAAK,CAAC;AAAA,QACrG,CAAC;AACD,eAAOlE;AAAA,MACT;AACA,UAAI,gBAAgB,SAAU,QAAQ,QAAQ;AAC5C,eAAO,WAAW,QAAQ,aAAa,MAAM,GAAG,MAAM;AAAA,MACxD;AACA,UAAI,SAAS,SAAU,QAAQmC,OAAM;AACnC,eAAOA,MAAK,SAAS,IAAI,SAAS,MAAM,QAAQA,MAAK,MAAM,GAAG,EAAE,CAAC;AAAA,MACnE;AACA,UAAI,QAAQ,SAAU,QAAQA,OAAM,OAAO;AACzC,YAAI,CAAC,WAAW,MAAM,GAAG;AACvB,iBAAO;AAAA,QACT;AACA,QAAAA,QAAO,SAASA,OAAM,MAAM;AAC5B,YAAIpC,UAASoC,MAAK;AAClB,YAAI,YAAYpC,UAAS;AACzB,YAAID,SAAQ;AACZ,YAAI,SAAS;AACb,eAAO,UAAU,QAAQ,EAAEA,SAAQC,SAAQ;AACzC,cAAI,MAAM,MAAMoC,MAAKrC,MAAK,CAAC;AAC3B,cAAI,WAAW;AACf,cAAIA,UAAS,WAAW;AACtB,gBAAI,WAAW,OAAO,GAAG;AACzB,uBAAW;AACX,gBAAI,aAAa,QAAW;AAC1B,yBAAW,WAAW,QAAQ,IAAI,WAAW,QAAQqC,MAAKrC,SAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;AAAA,YAChF;AAAA,UACF;AACA,sBAAY,QAAQ,KAAK,QAAQ;AACjC,mBAAS,OAAO,GAAG;AAAA,QACrB;AACA,eAAO;AAAA,MACT;AACA,UAAI,UAAU,SAAU,OAAOC,SAAQ;AACrC,YAAI,OAAO,OAAO;AAClB,QAAAA,UAASA,WAAU,OAAO,OAAO,mBAAmBA;AACpD,eAAO,CAAC,CAACA,YAAW,SAAS,YAAY,SAAS,YAAY,SAAS,KAAK,KAAK,MAAM,QAAQ,MAAM,QAAQ,KAAK,KAAK,QAAQA;AAAA,MACjI;AACA,UAAI,QAAQ,SAAU,QAAQoC,OAAM;AAClC,QAAAA,QAAO,SAASA,OAAM,MAAM;AAC5B,iBAAS,OAAO,QAAQA,KAAI;AAC5B,YAAI,cAAcA,MAAKA,MAAK,SAAS,CAAC;AACtC,eAAO,UAAU,QAAQ,OAAO,OAAO,MAAM,WAAW,CAAC;AAAA,MAC3D;AACA,UAAI,YAAY,SAAU,OAAO;AAC/B,YAAI,OAAO,OAAO;AAClB,eAAO,SAAS,YAAY,SAAS,YAAY,SAAS,YAAY,SAAS,YAAY,UAAU,cAAc,UAAU;AAAA,MAC/H;AACA,UAAI,SAAS,SAAU,QAAQ;AAC7B,YAAInC,UAAS,CAAC;AACd,iBAAS,OAAO,QAAQ;AACtB,UAAAA,QAAO,KAAK,GAAG;AAAA,QACjB;AACA,eAAOA;AAAA,MACT;AACA,UAAI,gBAAgB,SAAU,OAAO;AACnC,gBAAQ,OAAO,KAAK;AACpB,YAAIA,UAAS,CAAC;AACd,iBAAS,OAAO,OAAO;AACrB,UAAAA,QAAO,GAAG,IAAI,MAAM,GAAG;AAAA,QACzB;AACA,eAAOA;AAAA,MACT;AACA,UAAI,UAAU,SAAU,QAAQ,KAAK;AACnC,YAAI,QAAQ,iBAAiB,OAAO,OAAO,GAAG,MAAM,YAAY;AAC9D;AAAA,QACF;AACA,YAAI,OAAO,aAAa;AACtB;AAAA,QACF;AACA,eAAO,OAAO,GAAG;AAAA,MACnB;AACA,eAAS,eAAe,UAAU,SAAS;AACzC,YAAI,YAAY,OAAQ,WAAU;AAClC,eAAO,SAAU,QAAQ;AACvB,cAAI,UAAU,CAAC,GACb,MAAM,UAAU,SAAS;AAC3B,iBAAO,QAAQ,EAAG,SAAQ,GAAG,IAAI,UAAU,MAAM,CAAC;AAClD,cAAIF,SAAQ;AACZ,cAAIC,UAAS,QAAQ;AACrB,cAAI,aAAaA,UAAS,IAAI,QAAQA,UAAS,CAAC,IAAI;AACpD,cAAI,QAAQA,UAAS,IAAI,QAAQ,CAAC,IAAI;AACtC,uBAAa,SAAS,SAAS,KAAK,OAAO,eAAe,cAAcA,WAAU,cAAc,UAAU,SAAU,GAAG,GAAG;AACxH,gBAAI,MAAM,QAAQ,CAAC,KAAK,CAAC,MAAM,QAAQ,CAAC,GAAG;AACzC,qBAAO;AAAA,YACT;AAAA,UACF,IAAI;AACJ,cAAI,SAAS,eAAe,QAAQ,CAAC,GAAG,QAAQ,CAAC,GAAG,KAAK,GAAG;AAC1D,yBAAaA,UAAS,IAAI,SAAY;AACtC,YAAAA,UAAS;AAAA,UACX;AACA,mBAAS,OAAO,MAAM;AACtB,iBAAO,EAAED,SAAQC,SAAQ;AACvB,gBAAI,SAAS,QAAQD,MAAK;AAC1B,gBAAI,QAAQ;AACV,uBAAS,QAAQ,QAAQA,QAAO,UAAU;AAAA,YAC5C;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,MACF;AACA,UAAI,YAAY,SAAU,QAAQ,QAAQ,UAAU,YAAY,OAAO;AACrE,YAAI,WAAW,QAAQ;AACrB;AAAA,QACF;AACA,cAAM,QAAQ,SAAU,UAAU,KAAK;AACrC,cAAI,WAAW,QAAQ,GAAG;AACxB,sBAAU,QAAQ,IAAI,MAAM;AAC5B,0BAAc,QAAQ,QAAQ,KAAK,UAAU,WAAW,YAAY,KAAK;AAAA,UAC3E,OAAO;AACL,gBAAI,WAAW,aAAa,WAAW,OAAO,GAAG,GAAG,UAAU,KAAK,KAAK,QAAQ,QAAQ,KAAK,IAAI;AACjG,gBAAI,aAAa,QAAW;AAC1B,yBAAW;AAAA,YACb;AACA,6BAAiB,QAAQ,KAAK,QAAQ;AAAA,UACxC;AAAA,QACF,GAAG,MAAM;AAAA,MACX;AACA,UAAI,gBAAgB,SAAU,QAAQ,QAAQ,KAAK,UAAU,WAAW,YAAY,OAAO;AACzF,YAAI,WAAW,QAAQ,QAAQ,GAAG;AAClC,YAAI,WAAW,QAAQ,QAAQ,GAAG;AAClC,YAAI,UAAU,MAAM,IAAI,QAAQ;AAChC,YAAI,SAAS;AACX,2BAAiB,QAAQ,KAAK,OAAO;AACrC;AAAA,QACF;AACA,YAAI,WAAW,aAAa,WAAW,UAAU,UAAU,KAAK,KAAK,QAAQ,QAAQ,KAAK,IAAI;AAC9F,YAAI,WAAW,aAAa;AAC5B,YAAI,UAAU;AACZ,cAAI,QAAQ,MAAM,QAAQ,QAAQ;AAClC,cAAI,UAAU,CAAC,SAAS,aAAa,QAAQ;AAC7C,qBAAW;AACX,cAAI,SAAS,SAAS;AACpB,gBAAI,MAAM,QAAQ,QAAQ,GAAG;AAC3B,yBAAW;AAAA,YACb,WAAW,aAAa,QAAQ,KAAK,YAAY,QAAQ,GAAG;AAC1D,yBAAW,UAAU,QAAQ;AAAA,YAC/B,WAAW,SAAS;AAClB,yBAAW;AACX,yBAAW,gBAAgB,UAAU,IAAI;AAAA,YAC3C,OAAO;AACL,yBAAW,CAAC;AAAA,YACd;AAAA,UACF,WAAW,cAAc,QAAQ,KAAK,YAAY,QAAQ,GAAG;AAC3D,uBAAW;AACX,gBAAI,YAAY,QAAQ,GAAG;AACzB,yBAAW,cAAc,QAAQ;AAAA,YACnC,WAAW,OAAO,aAAa,cAAc,CAAC,WAAW,QAAQ,GAAG;AAClE,yBAAW,gBAAgB,QAAQ;AAAA,YACrC;AAAA,UACF,OAAO;AACL,uBAAW;AAAA,UACb;AAAA,QACF;AACA,YAAI,UAAU;AAEZ,gBAAM,IAAI,UAAU,QAAQ;AAC5B,oBAAU,UAAU,UAAU,UAAU,YAAY,KAAK;AACzD,gBAAM,QAAQ,EAAE,QAAQ;AAAA,QAC1B;AACA,yBAAiB,QAAQ,KAAK,QAAQ;AAAA,MACxC;AACA,UAAI,mBAAmB,SAAU,QAAQ,KAAK,OAAO;AACnD,YAAI,UAAU,UAAa,CAAC,GAAG,OAAO,GAAG,GAAG,KAAK,KAAK,UAAU,UAAa,EAAE,OAAO,SAAS;AAC7F,sBAAY,QAAQ,KAAK,KAAK;AAAA,QAChC;AAAA,MACF;AACA,eAAS,QAAQ,QAAQ,UAAU,UAAU;AAC3C,YAAI,WAAW,OAAO,MAAM;AAC5B,YAAI+D,SAAQ,SAAS,MAAM;AAC3B,YAAI9D,UAAS8D,OAAM;AACnB,YAAI/D,SAAQ;AACZ,eAAOC,WAAU;AACf,cAAI,MAAM8D,OAAM,EAAE/D,MAAK;AACvB,cAAI,SAAS,SAAS,GAAG,GAAG,KAAK,QAAQ,MAAM,OAAO;AACpD;AAAA,UACF;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,aAAa,SAAU,QAAQ,UAAU;AAC3C,eAAO,UAAU,QAAQ,QAAQ,UAAU,MAAM;AAAA,MACnD;AACA,UAAI,WAAW,SAAU,YAAY,UAAU;AAC7C,YAAI,cAAc,MAAM;AACtB,iBAAO;AAAA,QACT;AACA,YAAI,CAAC,YAAY,UAAU,GAAG;AAC5B,iBAAO,WAAW,YAAY,QAAQ;AAAA,QACxC;AACA,YAAIC,UAAS,WAAW;AACxB,YAAI,WAAW,OAAO,UAAU;AAChC,YAAID,SAAQ;AACZ,eAAO,EAAEA,SAAQC,SAAQ;AACvB,cAAI,SAAS,SAASD,MAAK,GAAGA,QAAO,QAAQ,MAAM,OAAO;AACxD;AAAA,UACF;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,eAAS,KAAK,OAAO;AACnB,YAAIC,UAAS,SAAS,OAAO,IAAI,MAAM;AACvC,eAAOA,UAAS,MAAMA,UAAS,CAAC,IAAI;AAAA,MACtC;AACA,UAAI,YAAY,OAAO,IAAI,WAAW,oBAAI,IAAI,CAAC,QAAW,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,IAAI,SAAUW,SAAQ;AAC9F,eAAO,IAAI,IAAIA,OAAM;AAAA,MACvB,IAAI,WAAY;AAAA,MAAC;AACjB,eAAS,oBAAoB,UAAU,UAAU,KAAK,QAAQ,QAAQ,OAAO;AAC3E,YAAI,WAAW,QAAQ,KAAK,WAAW,QAAQ,GAAG;AAEhD,gBAAM,IAAI,UAAU,QAAQ;AAC5B,oBAAU,UAAU,UAAU,QAAW,qBAAqB,KAAK;AACnE,gBAAM,QAAQ,EAAE,QAAQ;AAAA,QAC1B;AACA,eAAO;AAAA,MACT;AACA,eAAS,YAAY,YAAY,WAAW,QAAQ;AAClD,YAAI,UAAU,QAAQ;AACpB,sBAAY,UAAU,IAAI,SAAU,UAAU;AAC5C,gBAAI,MAAM,QAAQ,QAAQ,GAAG;AAC3B,qBAAO,SAAU,OAAO;AACtB,uBAAO,MAAM,OAAO,SAAS,WAAW,IAAI,SAAS,CAAC,IAAI,QAAQ;AAAA,cACpE;AAAA,YACF;AACA,mBAAO;AAAA,UACT,CAAC;AAAA,QACH,OAAO;AACL,sBAAY,CAAC,SAAU,OAAO;AAC5B,mBAAO;AAAA,UACT,CAAC;AAAA,QACH;AACA,YAAI,gBAAgB;AACpB,YAAI,YAAY;AAChB,YAAIV,UAAS,YAAY,UAAU,IAAI,IAAI,MAAM,WAAW,MAAM,IAAI,CAAC;AACvE,iBAAS,YAAY,SAAU,OAAO;AACpC,cAAI,WAAW,UAAU,IAAI,SAAU,UAAU;AAC/C,mBAAO,SAAS,KAAK;AAAA,UACvB,CAAC;AACD,UAAAA,QAAO,EAAE,SAAS,IAAI;AAAA,YACpB;AAAA,YACA,OAAO,EAAE;AAAA,YACT;AAAA,UACF;AAAA,QACF,CAAC;AACD,eAAO,WAAWA,SAAQ,SAAU,QAAQ,OAAO;AACjD,iBAAO,gBAAgB,QAAQ,OAAO,MAAM;AAAA,QAC9C,CAAC;AAAA,MACH;AACA,eAAS,WAAW,OAAO,UAAU;AACnC,YAAID,UAAS,MAAM;AACnB,cAAM,KAAK,QAAQ;AACnB,eAAOA,WAAU;AACf,gBAAMA,OAAM,IAAI,MAAMA,OAAM,EAAE;AAAA,QAChC;AACA,eAAO;AAAA,MACT;AACA,eAAS,mBAAmB,OAAO;AACjC,eAAO,UAAU,SAAS,CAAC,WAAW,KAAK;AAAA,MAC7C;AACA,eAAS,wBAAwB,KAAK,UAAU;AAC9C,eAAO,SAAU,QAAQ;AACvB,cAAI,UAAU,MAAM;AAClB,mBAAO;AAAA,UACT;AACA,iBAAO,OAAO,GAAG,MAAM,aAAa,aAAa,UAAa,OAAO,OAAO,MAAM;AAAA,QACpF;AAAA,MACF;AACA,eAAS,MAAM,QAAQoC,OAAM;AAC3B,eAAO,UAAU,QAAQ,QAAQ,QAAQA,OAAM,SAAS;AAAA,MAC1D;AACA,eAAS,oBAAoBA,OAAM,UAAU;AAC3C,YAAI,MAAMA,KAAI,KAAK,mBAAmB,QAAQ,GAAG;AAC/C,iBAAO,wBAAwB,MAAMA,KAAI,GAAG,QAAQ;AAAA,QACtD;AACA,eAAO,SAAU,QAAQ;AACvB,cAAI,WAAW,MAAM,QAAQA,KAAI;AACjC,iBAAO,aAAa,UAAa,aAAa,WAAW,MAAM,QAAQA,KAAI,IAAI,YAAY,UAAU,QAAQ;AAAA,QAC/G;AAAA,MACF;AACA,eAAS,YAAY,QAAQ;AAC3B,YAAI,YAAY,aAAa,MAAM;AACnC,YAAI,UAAU,WAAW,KAAK,UAAU,CAAC,EAAE,CAAC,GAAG;AAC7C,iBAAO,wBAAwB,UAAU,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC;AAAA,QACjE;AACA,eAAO,SAAU,QAAQ;AACvB,iBAAO,WAAW,UAAU,YAAY,QAAQ,QAAQ,SAAS;AAAA,QACnE;AAAA,MACF;AACA,eAAS,aAAa,QAAQ;AAC5B,YAAInC,UAAS,OAAO,MAAM;AAC1B,YAAID,UAASC,QAAO;AACpB,eAAOD,WAAU;AACf,cAAI,MAAMC,QAAOD,OAAM;AACvB,cAAI,QAAQ,OAAO,GAAG;AACtB,UAAAC,QAAOD,OAAM,IAAI,CAAC,KAAK,OAAO,mBAAmB,KAAK,CAAC;AAAA,QACzD;AACA,eAAOC;AAAA,MACT;AACA,eAAS,YAAY,QAAQ,QAAQ,WAAW,YAAY;AAC1D,YAAIF,SAAQ,UAAU;AACtB,YAAIC,UAASD;AACb,YAAI,eAAe,CAAC;AACpB,YAAI,UAAU,MAAM;AAClB,iBAAO,CAACC;AAAA,QACV;AACA,YAAIsC;AACJ,YAAIrC;AACJ,iBAAS,OAAO,MAAM;AACtB,eAAOF,UAAS;AACd,UAAAuC,QAAO,UAAUvC,MAAK;AACtB,cAAI,gBAAgBuC,MAAK,CAAC,IAAIA,MAAK,CAAC,MAAM,OAAOA,MAAK,CAAC,CAAC,IAAI,EAAEA,MAAK,CAAC,KAAK,SAAS;AAChF,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO,EAAEvC,SAAQC,SAAQ;AACvB,UAAAsC,QAAO,UAAUvC,MAAK;AACtB,cAAI,MAAMuC,MAAK,CAAC;AAChB,cAAI,WAAW,OAAO,GAAG;AACzB,cAAI,WAAWA,MAAK,CAAC;AACrB,cAAI,gBAAgBA,MAAK,CAAC,GAAG;AAC3B,gBAAI,aAAa,UAAa,EAAE,OAAO,SAAS;AAC9C,qBAAO;AAAA,YACT;AAAA,UACF,OAAO;AACL,gBAAI,QAAQ,IAAI,MAAM;AACtB,gBAAI,YAAY;AACd,cAAArC,UAAS,WAAW,UAAU,UAAU,KAAK,QAAQ,QAAQ,KAAK;AAAA,YACpE;AACA,gBAAI,EAAEA,YAAW,SAAY,YAAY,UAAU,UAAU,KAAK,IAAIA,UAAS;AAC7E,qBAAO;AAAA,YACT;AAAA,UACF;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,eAAS,SAASmC,OAAM;AACtB,eAAO,MAAMA,KAAI,IAAI,aAAa,MAAMA,KAAI,CAAC,IAAI,iBAAiBA,KAAI;AAAA,MACxE;AACA,eAAS,aAAa,KAAK;AACzB,eAAO,SAAU,QAAQ;AACvB,iBAAO,UAAU,OAAO,SAAY,OAAO,GAAG;AAAA,QAChD;AAAA,MACF;AACA,eAAS,iBAAiBA,OAAM;AAC9B,eAAO,SAAU,QAAQ;AACvB,iBAAO,MAAM,QAAQA,KAAI;AAAA,QAC3B;AAAA,MACF;AACA,eAAS,aAAa,OAAO;AAC3B,YAAI,OAAO,SAAS,YAAY;AAC9B,iBAAO;AAAA,QACT;AACA,YAAI,SAAS,MAAM;AACjB,iBAAO,SAAU,KAAK;AACpB,mBAAO;AAAA,UACT;AAAA,QACF;AACA,YAAI,OAAO,SAAS,UAAU;AAC5B,iBAAO,MAAM,QAAQ,KAAK,IAAI,oBAAoB,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC,IAAI,YAAY,KAAK;AAAA,QAC3F;AACA,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,eAAS,cAAc;AACrB,YAAInC,UAAS;AACb,eAAO,UAAU,SAASA,QAAO,UAAU,CAAC,GAAG,UAAU,CAAC,CAAC,IAAIA;AAAA,MACjE;AACA,UAAI,cAAc,SAAU,OAAO,UAAU,aAAa,WAAW;AACnE,YAAIF,SAAQ;AACZ,YAAIC,UAAS,SAAS,OAAO,IAAI,MAAM;AACvC,YAAI,aAAaA,SAAQ;AACvB,wBAAc,MAAM,EAAED,MAAK;AAAA,QAC7B;AACA,eAAO,EAAEA,SAAQC,SAAQ;AACvB,wBAAc,SAAS,aAAa,MAAMD,MAAK,GAAGA,QAAO,KAAK;AAAA,QAChE;AACA,eAAO;AAAA,MACT;AACA,UAAI,aAAa,SAAU,YAAY,UAAU,aAAa,WAAW,UAAU;AACjF,iBAAS,YAAY,SAAU,OAAOA,QAAOsE,aAAY;AACvD,wBAAc,aAAa,YAAY,OAAO,SAAS,SAAS,aAAa,OAAOtE,QAAOsE,WAAU;AAAA,QACvG,CAAC;AACD,eAAO;AAAA,MACT;AACA,eAAS,OAAO,YAAY,UAAU,aAAa;AACjD,YAAI,OAAO,MAAM,QAAQ,UAAU,IAAI,cAAc;AACrD,YAAI,YAAY,UAAU,SAAS;AACnC,eAAO,KAAK,YAAY,UAAU,aAAa,WAAW,QAAQ;AAAA,MACpE;AACA,UAAI,gBAAgB,SAAU,OAAO;AACnC,eAAO,MAAM,QAAQ,KAAK,KAAK,YAAY,KAAK,KAAK,CAAC,EAAE,SAAS,MAAM,OAAO,kBAAkB;AAAA,MAClG;AACA,eAAS,YAAY,OAAO,OAAO,WAAW,UAAUpE,SAAQ;AAC9D,YAAIF,SAAQ;AACZ,YAAIC,UAAS,MAAM;AACnB,sBAAc,YAAY;AAC1B,QAAAC,YAAWA,UAAS,CAAC;AACrB,eAAO,EAAEF,SAAQC,SAAQ;AACvB,cAAI,QAAQ,MAAMD,MAAK;AACvB,cAAI,QAAQ,KAAK,UAAU,KAAK,GAAG;AACjC,gBAAI,QAAQ,GAAG;AAEb,0BAAY,OAAO,QAAQ,GAAG,WAAW,UAAUE,OAAM;AAAA,YAC3D,OAAO;AACL,cAAAA,QAAO,KAAK,MAAMA,SAAQ,KAAK;AAAA,YACjC;AAAA,UACF,WAAW,CAAC,UAAU;AACpB,YAAAA,QAAOA,QAAO,MAAM,IAAI;AAAA,UAC1B;AAAA,QACF;AACA,eAAOA;AAAA,MACT;AACA,UAAI,cAAc,SAAU,OAAO;AACjC,eAAO,aAAa,KAAK,KAAK,OAAO,KAAK,KAAK;AAAA,MACjD;AACA,UAAI,WAAW,SAAU,QAAQ,OAAO;AACtC,eAAO,WAAW,QAAQ,OAAO,SAAU,OAAOmC,OAAM;AACtD,iBAAO,MAAM,QAAQA,KAAI;AAAA,QAC3B,CAAC;AAAA,MACH;AACA,UAAI,aAAa,SAAU,QAAQ,OAAO,WAAW;AACnD,YAAIrC,SAAQ;AACZ,YAAIC,UAAS,MAAM;AACnB,YAAIC,UAAS,CAAC;AACd,eAAO,EAAEF,SAAQC,SAAQ;AACvB,cAAIoC,QAAO,MAAMrC,MAAK;AACtB,cAAI,QAAQ,MAAM,QAAQqC,KAAI;AAC9B,cAAI,UAAU,OAAOA,KAAI,GAAG;AAC1B,kBAAMnC,SAAQ,SAASmC,OAAM,MAAM,GAAG,KAAK;AAAA,UAC7C;AAAA,QACF;AACA,eAAOnC;AAAA,MACT;AACA,UAAI,WAAW,SAAU,OAAO;AAC9B,eAAO,OAAO,SAAS,YAAY,QAAQ,MAAM,QAAQ,KAAK,KAAK,SAAS,OAAO;AAAA,MACrF;AACA,UAAI,YAAY,SAAU,QAAQ,KAAK;AACrC,eAAO,UAAU,QAAQ,OAAO,OAAO,MAAM;AAAA,MAC/C;AACA,UAAI,UAAU,SAAU,QAAQmC,OAAM,SAAS;AAC7C,QAAAA,QAAO,SAASA,OAAM,MAAM;AAC5B,YAAIrC,SAAQ,IACVC,UAASoC,MAAK,QACdnC,UAAS;AACX,eAAO,EAAEF,SAAQC,SAAQ;AACvB,cAAI,MAAM,MAAMoC,MAAKrC,MAAK,CAAC;AAC3B,cAAI,EAAEE,UAAS,UAAU,QAAQ,QAAQ,QAAQ,GAAG,IAAI;AACtD;AAAA,UACF;AACA,mBAAS,OAAO,GAAG;AAAA,QACrB;AACA,YAAIA,WAAU,EAAEF,UAASC,SAAQ;AAC/B,iBAAOC;AAAA,QACT;AACA,QAAAD,UAAS,UAAU,OAAO,IAAI,OAAO;AACrC,eAAO,CAAC,CAACA,WAAU,SAASA,OAAM,KAAK,QAAQ,KAAKA,OAAM,MAAM,MAAM,QAAQ,MAAM,KAAK,YAAY,MAAM;AAAA,MAC7G;AACA,UAAI,aAAa,SAAU,QAAQ;AACjC,eAAO,OAAO,MAAM,WAAW;AAAA,MACjC;AACA,UAAI,eAAe,SAAU,QAAQ;AACnC,eAAO,OAAO,MAAM,cAAc;AAAA,MACpC;AACA,UAAI,QAAQ,SAAU,QAAQ,SAAS;AACrC,YAAI,YAAY,QAAW;AACzB,cAAIC,UAAS,eAAe,MAAM,IAAI,aAAa,MAAM,IAAI,WAAW,MAAM;AAC9E,iBAAOA,WAAU,CAAC;AAAA,QACpB;AACA,eAAO,OAAO,MAAM,OAAO,KAAK,CAAC;AAAA,MACnC;AACA,UAAI,YAAY,SAAU,OAAO,OAAO,KAAK;AAC3C,YAAID,UAAS,MAAM;AACnB,cAAM,QAAQ,SAAYA,UAAS;AACnC,eAAO,CAAC,SAAS,OAAOA,UAAS,QAAQ,MAAM,MAAM,OAAO,GAAG;AAAA,MACjE;AACA,UAAI,aAAa,gBAAgB,aAAa;AAC9C,eAAS,gBAAgB,YAAY;AACnC,eAAO,SAAU,QAAQ;AACvB,cAAI,CAAC,QAAQ;AACX,mBAAO;AAAA,UACT;AACA,cAAI,aAAa,WAAW,MAAM,IAAI,cAAc,MAAM,IAAI;AAC9D,cAAI,MAAM,aAAa,WAAW,CAAC,IAAI,OAAO,CAAC;AAC/C,cAAI,WAAW,aAAa,UAAU,YAAY,CAAC,EAAE,KAAK,EAAE,IAAI,OAAO,MAAM,CAAC;AAC9E,iBAAO,IAAI,UAAU,EAAE,IAAI;AAAA,QAC7B;AAAA,MACF;AAGA,UAAI,QAAQ,SAASsE,OAAM,SAAS;AAClC,YAAIhC,QAAO,KAAK,WAAW,IAAI,UAAU,OAAO;AAChD,aAAK,OAAOA,MAAK;AAAA,MACnB;AACA,YAAM,UAAU,QAAQ,SAAS,QAAQ;AACvC,aAAK,WAAW,IAAI,UAAU;AAC9B,aAAK,OAAO;AAAA,MACd;AACA,YAAM,UAAU,SAAS,SAAS,SAAS,KAAK;AAC9C,YAAIA,QAAO,KAAK;AAChB,YAAIrC,UAASqC,MAAK,QAAQ,EAAE,GAAG;AAC/B,aAAK,OAAOA,MAAK;AACjB,eAAOrC;AAAA,MACT;AACA,YAAM,UAAU,MAAM,SAASmD,KAAI,KAAK;AACtC,eAAO,KAAK,SAAS,IAAI,GAAG;AAAA,MAC9B;AACA,YAAM,UAAU,MAAM,SAASmB,KAAI,KAAK;AACtC,eAAO,KAAK,SAAS,IAAI,GAAG;AAAA,MAC9B;AACA,YAAM,UAAU,MAAM,SAASP,KAAI,KAAK,OAAO;AAC7C,YAAI1B,QAAO,KAAK;AAChB,YAAIA,iBAAgB,WAAW;AAC7B,cAAI,QAAQA,MAAK;AACjB,cAAI,MAAM,SAAS,mBAAmB,GAAG;AACvC,kBAAM,KAAK,CAAC,KAAK,KAAK,CAAC;AACvB,iBAAK,OAAO,EAAEA,MAAK;AACnB,mBAAO;AAAA,UACT;AACA,UAAAA,QAAO,KAAK,WAAW,IAAI,SAAS,KAAK;AAAA,QAC3C;AACA,QAAAA,MAAK,IAAI,KAAK,KAAK;AACnB,aAAK,OAAOA,MAAK;AACjB,eAAO;AAAA,MACT;AACA,UAAI,YAAY,SAASkC,WAAU,SAAS;AAC1C,YAAIzE,SAAQ;AACZ,YAAIC,UAAS,WAAW,OAAO,IAAI,QAAQ;AAC3C,aAAK,MAAM;AACX,eAAO,EAAED,SAAQC,SAAQ;AACvB,cAAI,QAAQ,QAAQD,MAAK;AACzB,eAAK,IAAI,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC;AAAA,QAC7B;AAAA,MACF;AACA,gBAAU,UAAU,QAAQ,SAAS,QAAQ;AAC3C,aAAK,WAAW,CAAC;AACjB,aAAK,OAAO;AAAA,MACd;AACA,gBAAU,UAAU,SAAS,SAAS,SAAS,KAAK;AAClD,YAAIuC,QAAO,KAAK;AAChB,YAAIvC,SAAQ,aAAauC,OAAM,GAAG;AAClC,YAAIvC,SAAQ,GAAG;AACb,iBAAO;AAAA,QACT;AACA,YAAI,YAAYuC,MAAK,SAAS;AAC9B,YAAIvC,UAAS,WAAW;AACtB,UAAAuC,MAAK,IAAI;AAAA,QACX,OAAO;AACL,UAAAA,MAAK,OAAOvC,QAAO,CAAC;AAAA,QACtB;AACA,UAAE,KAAK;AACP,eAAO;AAAA,MACT;AACA,gBAAU,UAAU,MAAM,SAASqD,KAAI,KAAK;AAC1C,YAAId,QAAO,KAAK;AAChB,YAAIvC,SAAQ,aAAauC,OAAM,GAAG;AAClC,eAAOvC,SAAQ,IAAI,SAAYuC,MAAKvC,MAAK,EAAE,CAAC;AAAA,MAC9C;AACA,gBAAU,UAAU,MAAM,SAASwE,KAAI,KAAK;AAC1C,eAAO,aAAa,KAAK,UAAU,GAAG,IAAI;AAAA,MAC5C;AACA,gBAAU,UAAU,MAAM,SAASP,KAAI,KAAK,OAAO;AACjD,YAAI1B,QAAO,KAAK;AAChB,YAAIvC,SAAQ,aAAauC,OAAM,GAAG;AAClC,YAAIvC,SAAQ,GAAG;AACb,YAAE,KAAK;AACP,UAAAuC,MAAK,KAAK,CAAC,KAAK,KAAK,CAAC;AAAA,QACxB,OAAO;AACL,UAAAA,MAAKvC,MAAK,EAAE,CAAC,IAAI;AAAA,QACnB;AACA,eAAO;AAAA,MACT;AACA,UAAI,WAAW,SAAS0E,UAAS,SAAS;AACxC,YAAI1E,SAAQ;AACZ,YAAIC,UAAS,WAAW,OAAO,IAAI,QAAQ;AAC3C,aAAK,MAAM;AACX,eAAO,EAAED,SAAQC,SAAQ;AACvB,cAAI,QAAQ,QAAQD,MAAK;AACzB,eAAK,IAAI,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC;AAAA,QAC7B;AAAA,MACF;AACA,eAAS,UAAU,QAAQ,SAAS,QAAQ;AAC1C,aAAK,OAAO;AACZ,aAAK,WAAW;AAAA,UACd,QAAQ,IAAI,KAAK;AAAA,UACjB,OAAO,oBAAI,IAAI;AAAA,UACf,UAAU,IAAI,KAAK;AAAA,QACrB;AAAA,MACF;AACA,eAAS,UAAU,SAAS,SAAS,SAAS,KAAK;AACjD,YAAIE,UAAS,WAAW,MAAM,GAAG,EAAE,QAAQ,EAAE,GAAG;AAChD,aAAK,QAAQA,UAAS,IAAI;AAC1B,eAAOA;AAAA,MACT;AACA,eAAS,UAAU,MAAM,SAASmD,KAAI,KAAK;AACzC,eAAO,WAAW,MAAM,GAAG,EAAE,IAAI,GAAG;AAAA,MACtC;AACA,eAAS,UAAU,MAAM,SAASmB,KAAI,KAAK;AACzC,eAAO,WAAW,MAAM,GAAG,EAAE,IAAI,GAAG;AAAA,MACtC;AACA,eAAS,UAAU,MAAM,SAASP,KAAI,KAAK,OAAO;AAChD,YAAI1B,QAAO,WAAW,MAAM,GAAG;AAC/B,YAAI,OAAOA,MAAK;AAChB,QAAAA,MAAK,IAAI,KAAK,KAAK;AACnB,aAAK,QAAQA,MAAK,QAAQ,OAAO,IAAI;AACrC,eAAO;AAAA,MACT;AACA,UAAI,OAAO,SAASoC,MAAK,SAAS;AAChC,YAAI3E,SAAQ;AACZ,YAAIC,UAAS,WAAW,OAAO,IAAI,QAAQ;AAC3C,aAAK,MAAM;AACX,eAAO,EAAED,SAAQC,SAAQ;AACvB,cAAI,QAAQ,QAAQD,MAAK;AACzB,eAAK,IAAI,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC;AAAA,QAC7B;AAAA,MACF;AACA,WAAK,UAAU,QAAQ,SAAS,QAAQ;AACtC,aAAK,WAAW,uBAAO,OAAO,IAAI;AAClC,aAAK,OAAO;AAAA,MACd;AACA,WAAK,UAAU,SAAS,SAAS,SAAS,KAAK;AAC7C,YAAIE,UAAS,KAAK,IAAI,GAAG,KAAK,OAAO,KAAK,SAAS,GAAG;AACtD,aAAK,QAAQA,UAAS,IAAI;AAC1B,eAAOA;AAAA,MACT;AACA,WAAK,UAAU,MAAM,SAASmD,KAAI,KAAK;AACrC,YAAId,QAAO,KAAK;AAChB,YAAIrC,UAASqC,MAAK,GAAG;AACrB,eAAOrC,YAAW,iBAAiB,SAAYA;AAAA,MACjD;AACA,WAAK,UAAU,MAAM,SAASsE,KAAI,KAAK;AACrC,YAAIjC,QAAO,KAAK;AAChB,eAAOA,MAAK,GAAG,MAAM;AAAA,MACvB;AACA,WAAK,UAAU,MAAM,SAAS0B,KAAI,KAAK,OAAO;AAC5C,YAAI1B,QAAO,KAAK;AAChB,aAAK,QAAQ,KAAK,IAAI,GAAG,IAAI,IAAI;AACjC,QAAAA,MAAK,GAAG,IAAI,UAAU,SAAY,iBAAiB;AACnD,eAAO;AAAA,MACT;AACA,UAAI,WAAW,SAASqC,UAAShE,SAAQ;AACvC,YAAIZ,SAAQ;AACZ,YAAIC,UAASW,WAAU,OAAO,IAAIA,QAAO;AACzC,aAAK,WAAW,IAAI,SAAS;AAC7B,eAAO,EAAEZ,SAAQC,SAAQ;AACvB,eAAK,IAAIW,QAAOZ,MAAK,CAAC;AAAA,QACxB;AAAA,MACF;AACA,eAAS,UAAU,MAAM,SAAS,IAAI,OAAO;AAC3C,aAAK,SAAS,IAAI,OAAO,cAAc;AACvC,eAAO;AAAA,MACT;AACA,eAAS,UAAU,MAAM,SAASwE,KAAI,OAAO;AAC3C,eAAO,KAAK,SAAS,IAAI,KAAK;AAAA,MAChC;AACA,eAAS,UAAU,OAAO,SAAS,UAAU;AAI7C,UAAI,YAAY,SAAU,OAAO;AAC/B,YAAIzE,YAAW,OAAO,UAAU;AAChC,eAAO,UAAU,QAAQ,UAAU,SAAS,CAAC,CAAC,SAAS,OAAO,UAAU,YAAYA,UAAS,KAAK,KAAK,MAAM;AAAA,MAC/G;AACA,UAAI,aAAa,SAAU,OAAO;AAChC,eAAO,CAAC,CAAC,UAAU,OAAO,UAAU,YAAY,OAAO,UAAU;AAAA,MACnE;AACA,UAAI,WAAW,SAAU,OAAO;AAC9B,YAAIA,YAAW,OAAO,UAAU;AAChC,eAAO,OAAO,UAAU,YAAY,CAAC,CAAC,SAAS,OAAO,UAAU,YAAYA,UAAS,KAAK,KAAK,MAAM;AAAA,MACvG;AACA,UAAI,WAAW,SAAU,OAAO;AAC9B,YAAIA,YAAW,OAAO,UAAU;AAChC,eAAO,OAAO,UAAU,YAAY,CAAC,CAAC,SAAS,OAAO,UAAU,YAAYA,UAAS,KAAK,KAAK,MAAM;AAAA,MACvG;AACA,UAAI,SAAS,eAAe,SAAU,QAAQ,QAAQ;AACpD,YAAI,YAAY,MAAM,KAAK,YAAY,MAAM,GAAG;AAC9C,qBAAW,QAAQ,OAAO,MAAM,GAAG,MAAM;AACzC;AAAA,QACF;AACA,iBAAS,OAAO,QAAQ;AACtB,cAAI,eAAe,KAAK,QAAQ,GAAG,GAAG;AACpC,wBAAY,QAAQ,KAAK,OAAO,GAAG,CAAC;AAAA,UACtC;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,QAAQ;AACZ,UAAI,YAAY;AAChB,UAAI,aAAa,SAAU,QAAQ;AACjC,YAAI,UAAU,CAAC,GACb,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,SAAQ,GAAG,IAAI,UAAU,MAAM,CAAC;AAClD,YAAIC,SAAQ;AACZ,YAAIC,UAAS,QAAQ;AACrB,YAAI,QAAQA,UAAS,IAAI,QAAQ,CAAC,IAAI;AACtC,YAAI,SAAS,eAAe,QAAQ,CAAC,GAAG,QAAQ,CAAC,GAAG,KAAK,GAAG;AAC1D,UAAAA,UAAS;AAAA,QACX;AACA,eAAO,EAAED,SAAQC,SAAQ;AACvB,cAAI,SAAS,QAAQD,MAAK;AAC1B,cAAI,UAAU,MAAM;AAClB;AAAA,UACF;AACA,cAAI+D,SAAQ,OAAO,KAAK,MAAM;AAC9B,cAAI,cAAcA,OAAM;AACxB,cAAI,aAAa;AACjB,iBAAO,EAAE,aAAa,aAAa;AACjC,gBAAI,MAAMA,OAAM,UAAU;AAC1B,gBAAI,QAAQ,OAAO,GAAG;AACtB,gBAAI,UAAU,UAAa,GAAG,OAAO,OAAO,UAAU,GAAG,CAAC,KAAK,CAAC,eAAe,KAAK,QAAQ,GAAG,GAAG;AAChG,qBAAO,GAAG,IAAI,OAAO,GAAG;AAAA,YAC1B;AAAA,UACF;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,WAAW;AACf,UAAI,iBAAiB,SAASc,gBAAe;AAC3C,YAAI,OAAO,CAAC,GACV,MAAM,UAAU;AAClB,eAAO,MAAO,MAAK,GAAG,IAAI,UAAU,GAAG;AACvC,aAAK,KAAK,QAAW,mBAAmB;AACxC,eAAO,MAAM,MAAM,QAAW,IAAI;AAAA,MACpC;AACA,UAAI,eAAe;AAGnB,UAAI,SAAS,SAAU,YAAYxC,OAAM;AACvC,YAAI,OAAO,CAAC,GACV,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,MAAK,GAAG,IAAI,UAAU,MAAM,CAAC;AAC/C,YAAIrC,SAAQ;AACZ,YAAI,SAAS,OAAOqC,UAAS;AAC7B,YAAInC,UAAS,YAAY,UAAU,IAAI,IAAI,MAAM,WAAW,MAAM,IAAI,CAAC;AACvE,iBAAS,YAAY,SAAU,OAAO;AACpC,UAAAA,QAAO,EAAEF,MAAK,IAAI,SAASqC,MAAK,MAAM,OAAO,IAAI,IAAI,eAAe,MAAM,QAAQ,CAAC,OAAOA,KAAI,EAAE,OAAO,IAAI,CAAC;AAAA,QAC9G,CAAC;AACD,eAAOnC;AAAA,MACT;AAGA,UAAI,iBAAiB,SAAU,QAAQmC,OAAM;AAC3C,YAAI,OAAO,CAAC,GACV,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,MAAK,GAAG,IAAI,UAAU,MAAM,CAAC;AAC/C,QAAAA,QAAO,SAASA,OAAM,MAAM;AAC5B,iBAAS,OAAO,QAAQA,KAAI;AAC5B,YAAI,OAAO,UAAU,OAAO,SAAS,OAAO,MAAM,KAAKA,KAAI,CAAC,CAAC;AAC7D,eAAO,QAAQ,OAAO,SAAY,KAAK,MAAM,QAAQ,IAAI;AAAA,MAC3D;AACA,UAAI,cAAc,SAAU,OAAO,OAAO,UAAU;AAClD,YAAI,MAAM;AACV,YAAI,OAAO,SAAS,OAAO,IAAI,MAAM;AACrC,YAAI,QAAQ,GAAG;AACb,iBAAO;AAAA,QACT;AACA,mBAAW,YAAY,UAAU,CAAC;AAClC,gBAAQ,SAAS,KAAK;AACtB,YAAI,WAAW,UAAU;AACzB,YAAI,YAAY,UAAU;AAC1B,YAAI,cAAc,SAAS,KAAK;AAChC,YAAI,iBAAiB,UAAU;AAC/B,eAAO,MAAM,MAAM;AACjB,cAAI,SAAS;AACb,cAAI,MAAM,KAAK,OAAO,MAAM,QAAQ,CAAC;AACrC,cAAI,WAAW,SAAS,MAAM,GAAG,CAAC;AAClC,cAAI,eAAe,aAAa;AAChC,cAAI,YAAY,aAAa;AAC7B,cAAI,iBAAiB,aAAa;AAClC,cAAI,cAAc,SAAS,QAAQ;AACnC,cAAI,UAAU;AACZ,qBAAS;AAAA,UACX,WAAW,gBAAgB;AACzB,qBAAS,kBAAkB;AAAA,UAC7B,WAAW,WAAW;AACpB,qBAAS,kBAAkB,gBAAgB,CAAC;AAAA,UAC9C,WAAW,aAAa;AACtB,qBAAS,kBAAkB,gBAAgB,CAAC,aAAa,CAAC;AAAA,UAC5D,WAAW,aAAa,aAAa;AACnC,qBAAS;AAAA,UACX,OAAO;AACL,qBAAS,WAAW;AAAA,UACtB;AACA,cAAI,QAAQ;AACV,kBAAM,MAAM;AAAA,UACd,OAAO;AACL,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO,KAAK,IAAI,MAAM,eAAe;AAAA,MACvC;AACA,UAAI,OAAO,SAAU,OAAO,UAAU;AACpC,YAAIrC,SAAQ;AACZ,YAAIM,YAAW,SAAU4D,QAAOC,QAAO;AACrC,cAAIlE,UAASiE,UAAS,OAAO,IAAIA,OAAM;AACvC,iBAAO,CAAC,CAACjE,WAAUiE,OAAM,QAAQC,MAAK,IAAI;AAAA,QAC5C;AACA,mBAAW,YAAY,UAAU,CAAC;AAClC,YAAI,WAAW;AACf,YAAIlE,UAAS,MAAM;AACnB,YAAIC,UAAS,CAAC;AACd,YAAI,OAAOA;AACX,YAAID,WAAU,kBAAkB;AAC9B,cAAIgE,OAAM,WAAW,OAAO,UAAU,KAAK;AAC3C,cAAIA,MAAK;AACP,mBAAO,WAAWA,IAAG;AAAA,UACvB;AACA,qBAAW;AACX,UAAA3D,YAAW,SAAUgD,QAAO,KAAK;AAC/B,mBAAOA,OAAM,IAAI,GAAG;AAAA,UACtB;AACA,iBAAO,IAAI,SAAS;AAAA,QACtB,OAAO;AACL,iBAAO,WAAW,CAAC,IAAIpD;AAAA,QACzB;AACA,cAAO,QAAO,EAAEF,SAAQC,SAAQ;AAC9B,cAAI,QAAQ,MAAMD,MAAK;AACvB,cAAI,WAAW,WAAW,SAAS,KAAK,IAAI;AAC5C,kBAAQ,UAAU,IAAI,QAAQ;AAC9B,cAAI,YAAY,aAAa,UAAU;AACrC,gBAAI,YAAY,KAAK;AACrB,mBAAO,aAAa;AAClB,kBAAI,KAAK,SAAS,MAAM,UAAU;AAChC,yBAAS;AAAA,cACX;AAAA,YACF;AACA,gBAAI,UAAU;AACZ,mBAAK,KAAK,QAAQ;AAAA,YACpB;AACA,YAAAE,QAAO,KAAK,KAAK;AAAA,UACnB,WAAW,CAACI,UAAS,MAAM,QAAQ,GAAG;AACpC,gBAAI,SAASJ,SAAQ;AACnB,mBAAK,KAAK,QAAQ;AAAA,YACpB;AACA,YAAAA,QAAO,KAAK,KAAK;AAAA,UACnB;AAAA,QACF;AACA,eAAOA;AAAA,MACT;AACA,UAAI,QAAQ,SAAU,OAAO;AAC3B,eAAO,UAAU,KAAK;AAAA,MACxB;AACA,UAAI,YAAY,SAAU,OAAO;AAC/B,eAAO,UAAU,OAAO,IAAI;AAAA,MAC9B;AACA,UAAI,UAAU,SAAU,OAAO;AAC7B,YAAI,SAAS,MAAM;AACjB,iBAAO;AAAA,QACT;AACA,YAAI,YAAY,KAAK,MAAM,MAAM,QAAQ,KAAK,KAAK,OAAO,UAAU,YAAY,OAAO,MAAM,WAAW,cAAc,aAAa,KAAK,KAAK,YAAY,KAAK,IAAI;AAChK,iBAAO,CAAC,MAAM;AAAA,QAChB;AACA,YAAI,MAAM,OAAO,KAAK;AACtB,YAAI,OAAO,kBAAkB,OAAO,gBAAgB;AAClD,iBAAO,CAAC,MAAM;AAAA,QAChB;AACA,YAAI,YAAY,KAAK,GAAG;AACtB,iBAAO,CAAC,SAAS,KAAK,EAAE;AAAA,QAC1B;AACA,iBAAS,OAAO,OAAO;AACrB,cAAI,eAAe,KAAK,OAAO,GAAG,GAAG;AACnC,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,UAAU,SAAU,QAAQ,OAAO;AACrC,eAAO,YAAY,QAAQ,KAAK;AAAA,MAClC;AACA,UAAI,aAAa,SAAU,OAAO;AAChC,eAAO,OAAO,UAAU;AAAA,MAC1B;AACA,UAAI,gBAAgB,SAAU,OAAO;AACnC,YAAI,CAAC,aAAa,KAAK,KAAK,OAAO,KAAK,KAAK,mBAAmB;AAC9D,iBAAO;AAAA,QACT;AACA,YAAI,OAAO,eAAe,KAAK,MAAM,MAAM;AACzC,iBAAO;AAAA,QACT;AACA,YAAI,QAAQ;AACZ,eAAO,OAAO,eAAe,KAAK,MAAM,MAAM;AAC5C,kBAAQ,OAAO,eAAe,KAAK;AAAA,QACrC;AACA,eAAO,OAAO,eAAe,KAAK,MAAM;AAAA,MAC1C;AACA,UAAI,UAAU,SAAU,OAAO;AAC7B,YAAI,CAAC,OAAO;AACV,iBAAO,CAAC;AAAA,QACV;AACA,YAAI,YAAY,KAAK,GAAG;AACtB,iBAAO,SAAS,KAAK,IAAI,cAAc,KAAK,IAAI,UAAU,KAAK;AAAA,QACjE;AACA,YAAI,OAAO,YAAY,OAAO,YAAY,OAAO,KAAK,GAAG;AACvD,cAAI,WAAW,MAAM,OAAO,QAAQ,EAAE;AACtC,cAAIqC;AACJ,cAAIrC,UAAS,CAAC;AACd,iBAAO,EAAEqC,QAAO,SAAS,KAAK,GAAG,MAAM;AACrC,YAAArC,QAAO,KAAKqC,MAAK,KAAK;AAAA,UACxB;AACA,iBAAOrC;AAAA,QACT;AACA,YAAI,MAAM,OAAO,KAAK;AACtB,YAAI,OAAO,OAAO,SAAS,aAAa,OAAO,SAAS,aAAa;AACrE,eAAO,KAAK,KAAK;AAAA,MACnB;AACA,eAAS,SAAS,MAAM,MAAM,KAAK;AACjC,YAAI,OAAO,SAAS,YAAY;AAC9B,gBAAM,IAAI,UAAU,qBAAqB;AAAA,QAC3C;AACA,YAAI;AACJ,YAAI;AACJ,YAAI;AACJ,YAAIA;AACJ,YAAI;AACJ,YAAI;AACJ,YAAI,iBAAiB;AACrB,YAAI,UAAU;AACd,YAAI,SAAS;AACb,YAAI,WAAW;AACf,YAAI,SAAS,CAAC,QAAQ,SAAS,KAAK,UAAU,OAAO,OAAO,0BAA0B;AACtF,eAAO,CAAC,QAAQ;AAChB,YAAI,WAAW,GAAG,GAAG;AACnB,oBAAU,CAAC,CAAC,IAAI;AAChB,mBAAS,aAAa;AACtB,oBAAU,SAAS,KAAK,IAAI,CAAC,IAAI,WAAW,GAAG,IAAI,IAAI;AACvD,qBAAW,cAAc,MAAM,CAAC,CAAC,IAAI,WAAW;AAAA,QAClD;AACA,iBAAS,WAAW,MAAM;AACxB,cAAI,OAAO;AACX,cAAI,UAAU;AACd,qBAAW,WAAW;AACtB,2BAAiB;AACjB,UAAAA,UAAS,KAAK,MAAM,SAAS,IAAI;AACjC,iBAAOA;AAAA,QACT;AACA,iBAAS,WAAW,aAAa4E,OAAM;AACrC,cAAI,QAAQ;AACV,mBAAO,qBAAqB,OAAO;AACnC,mBAAO,OAAO,sBAAsB,WAAW;AAAA,UACjD;AACA,iBAAO,WAAW,aAAaA,KAAI;AAAA,QACrC;AACA,iBAAS,YAAYhC,KAAI;AACvB,cAAI,QAAQ;AACV,mBAAO,OAAO,qBAAqBA,GAAE;AAAA,UACvC;AACA,uBAAaA,GAAE;AAAA,QACjB;AACA,iBAAS,YAAY,MAAM;AACzB,2BAAiB;AACjB,oBAAU,WAAW,cAAc,IAAI;AACvC,iBAAO,UAAU,WAAW,IAAI,IAAI5C;AAAA,QACtC;AACA,iBAAS,cAAc,MAAM;AAC3B,cAAI,oBAAoB,OAAO;AAC/B,cAAI,sBAAsB,OAAO;AACjC,cAAI,cAAc,OAAO;AACzB,iBAAO,SAAS,KAAK,IAAI,aAAa,UAAU,mBAAmB,IAAI;AAAA,QACzE;AACA,iBAAS,aAAa,MAAM;AAC1B,cAAI,oBAAoB,OAAO;AAC/B,cAAI,sBAAsB,OAAO;AACjC,iBAAO,iBAAiB,UAAa,qBAAqB,QAAQ,oBAAoB,KAAK,UAAU,uBAAuB;AAAA,QAC9H;AACA,iBAAS,eAAe;AACtB,cAAI,OAAO,KAAK,IAAI;AACpB,cAAI,aAAa,IAAI,GAAG;AACtB,mBAAO,aAAa,IAAI;AAAA,UAC1B;AACA,oBAAU,WAAW,cAAc,cAAc,IAAI,CAAC;AAAA,QACxD;AACA,iBAAS,aAAa,MAAM;AAC1B,oBAAU;AACV,cAAI,YAAY,UAAU;AACxB,mBAAO,WAAW,IAAI;AAAA,UACxB;AACA,qBAAW,WAAW;AACtB,iBAAOA;AAAA,QACT;AACA,iBAAS,YAAY;AACnB,cAAI,OAAO,CAAC,GACV,MAAM,UAAU;AAClB,iBAAO,MAAO,MAAK,GAAG,IAAI,UAAU,GAAG;AACvC,cAAI,OAAO,KAAK,IAAI;AACpB,cAAI,aAAa,aAAa,IAAI;AAClC,qBAAW;AACX,qBAAW;AACX,yBAAe;AACf,cAAI,YAAY;AACd,gBAAI,YAAY,QAAW;AACzB,qBAAO,YAAY,YAAY;AAAA,YACjC;AACA,gBAAI,QAAQ;AACV,wBAAU,WAAW,cAAc,IAAI;AACvC,qBAAO,WAAW,YAAY;AAAA,YAChC;AAAA,UACF;AACA,cAAI,YAAY,QAAW;AACzB,sBAAU,WAAW,cAAc,IAAI;AAAA,UACzC;AACA,iBAAOA;AAAA,QACT;AACA,kBAAU,SAAS,WAAY;AAC7B,cAAI,YAAY,QAAW;AACzB,wBAAY,OAAO;AAAA,UACrB;AACA,2BAAiB;AACjB,qBAAW,eAAe,WAAW,UAAU;AAAA,QACjD;AACA,kBAAU,QAAQ,WAAY;AAC5B,iBAAO,YAAY,SAAYA,UAAS,aAAa,KAAK,IAAI,CAAC;AAAA,QACjE;AACA,kBAAU,UAAU,WAAY;AAC9B,iBAAO,YAAY;AAAA,QACrB;AACA,eAAO;AAAA,MACT;AACA,UAAI,UAAU,SAAU,YAAY,UAAU;AAC5C,mBAAW,YAAY,UAAU,CAAC;AAClC,eAAO,OAAO,YAAY,SAAUA,SAAQ,OAAO,KAAK;AACtD,gBAAM,SAAS,KAAK;AACpB,cAAI,eAAe,KAAKA,SAAQ,GAAG,GAAG;AACpC,YAAAA,QAAO,GAAG,EAAE,KAAK,KAAK;AAAA,UACxB,OAAO;AACL,wBAAYA,SAAQ,KAAK,CAAC,KAAK,CAAC;AAAA,UAClC;AACA,iBAAOA;AAAA,QACT,GAAG,CAAC,CAAC;AAAA,MACP;AACA,UAAI,SAAS,SAAU,YAAY,WAAW;AAC5C,YAAI,cAAc,OAAQ,aAAY,CAAC;AACvC,YAAI,cAAc,MAAM;AACtB,iBAAO,CAAC;AAAA,QACV;AACA,YAAID,UAAS,UAAU;AACvB,YAAIA,UAAS,KAAK,eAAe,YAAY,UAAU,CAAC,GAAG,UAAU,CAAC,CAAC,GAAG;AACxE,sBAAY,CAAC;AAAA,QACf,WAAWA,UAAS,KAAK,eAAe,UAAU,CAAC,GAAG,UAAU,CAAC,GAAG,UAAU,CAAC,CAAC,GAAG;AACjF,sBAAY,CAAC,UAAU,CAAC,CAAC;AAAA,QAC3B;AACA,YAAI,CAAC,MAAM,QAAQ,SAAS,GAAG;AAC7B,sBAAY,CAAC,YAAY,WAAW,CAAC,CAAC;AAAA,QACxC;AACA,eAAO,YAAY,YAAY,UAAU,KAAK,CAAC,GAAG,CAAC,CAAC;AAAA,MACtD;AACA,UAAI,cAAc,SAAU,OAAO;AACjC,YAAIA,UAAS,SAAS,OAAO,IAAI,MAAM;AACvC,eAAOA,UAAS,YAAY,OAAO,QAAQ,IAAI,CAAC;AAAA,MAClD;AACA,UAAI,UAAU,SAAU,OAAO;AAC7B,YAAIW,UAAS,CAAC,GACZ,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,CAAAA,QAAO,GAAG,IAAI,UAAU,MAAM,CAAC;AACjD,eAAO,YAAY,KAAK,IAAI,KAAK,OAAOA,OAAM,IAAI,CAAC;AAAA,MACrD;AACA,UAAI,aAAa,SAAU,OAAO;AAChC,YAAIA,UAAS,CAAC,GACZ,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,CAAAA,QAAO,GAAG,IAAI,UAAU,MAAM,CAAC;AACjD,eAAO,aAAa,KAAK,KAAK,YAAY,KAAK,IAAI,KAAK,OAAOA,QAAO,KAAK,CAAC,CAAC,IAAI,CAAC;AAAA,MACpF;AACA,UAAI,iBAAiB,WAAY;AAC/B,YAAI,SAAS,CAAC,GACZ,MAAM,UAAU;AAClB,eAAO,MAAO,QAAO,GAAG,IAAI,UAAU,GAAG;AACzC,YAAI,SAAS,OAAO,IAAI,SAAU,OAAO;AACvC,iBAAO,aAAa,KAAK,KAAK,YAAY,KAAK,IAAI,QAAQ,CAAC;AAAA,QAC9D,CAAC;AACD,eAAO,OAAO,UAAU,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,UAAU,MAAM,IAAI,CAAC;AAAA,MACzE;AACA,UAAI,QAAQ,WAAY;AACtB,YAAI,SAAS,CAAC,GACZ,MAAM,UAAU;AAClB,eAAO,MAAO,QAAO,GAAG,IAAI,UAAU,GAAG;AACzC,YAAI,QAAQ,OAAO,KAAK,CAAC;AACzB,eAAO,KAAK,KAAK;AAAA,MACnB;AACA,UAAI,QAAQ,SAAU,QAAQ,KAAK;AACjC,YAAI,UAAU,MAAM;AAClB,iBAAO;AAAA,QACT;AACA,YAAI,OAAO,QAAQ,UAAU;AAC3B,gBAAM,IAAI,MAAM,GAAG;AAAA,QACrB;AACA,YAAIZ,SAAQ;AACZ,YAAI,QAAQ;AACZ,eAAO,EAAEA,SAAQ,IAAI,QAAQ;AAC3B,cAAI,CAAC,SAAS,CAAC,eAAe,KAAK,OAAO,IAAIA,MAAK,CAAC,GAAG;AACrD,mBAAO;AAAA,UACT;AACA,kBAAQ,MAAM,IAAIA,MAAK,CAAC;AAAA,QAC1B;AACA,eAAO;AAAA,MACT;AACA,UAAI,SAAS,SAAU,QAAQqC,OAAM,cAAc;AACjD,QAAAA,QAAO,SAASA,OAAM,MAAM;AAC5B,YAAIrC,SAAQ;AACZ,YAAIC,UAASoC,MAAK;AAClB,YAAI,CAACpC,SAAQ;AACX,UAAAA,UAAS;AACT,mBAAS;AAAA,QACX;AACA,eAAO,EAAED,SAAQC,SAAQ;AACvB,cAAI,QAAQ,UAAU,OAAO,SAAY,OAAO,MAAMoC,MAAKrC,MAAK,CAAC,CAAC;AAClE,cAAI,UAAU,QAAW;AACvB,YAAAA,SAAQC;AACR,oBAAQ;AAAA,UACV;AACA,mBAAS,OAAO,UAAU,aAAa,MAAM,KAAK,MAAM,IAAI;AAAA,QAC9D;AACA,eAAO;AAAA,MACT;AACA,UAAI,OAAO,SAAU,QAAQ;AAC3B,YAAI,QAAQ,CAAC,GACX,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,OAAM,GAAG,IAAI,UAAU,MAAM,CAAC;AAChD,YAAIC,UAAS,CAAC;AACd,YAAI,UAAU,MAAM;AAClB,iBAAOA;AAAA,QACT;AACA,YAAI,SAAS;AACb,gBAAQ,MAAM,KAAK,CAAC,EAAE,IAAI,SAAUmC,OAAM;AACxC,UAAAA,QAAO,SAASA,OAAM,MAAM;AAC5B,qBAAW,SAASA,MAAK,SAAS;AAClC,iBAAOA;AAAA,QACT,CAAC;AACD,mBAAW,QAAQ,aAAa,MAAM,GAAGnC,OAAM;AAC/C,YAAI,QAAQ;AACV,UAAAA,UAAS,UAAUA,SAAQ,MAAM,MAAM,MAAM,SAAU,OAAO;AAC5D,mBAAO,cAAc,KAAK,IAAI,SAAY;AAAA,UAC5C,CAAC;AAAA,QACH;AACA,YAAID,UAAS,MAAM;AACnB,eAAOA,WAAU;AACf,gBAAMC,SAAQ,MAAMD,OAAM,CAAC;AAAA,QAC7B;AACA,eAAOC;AAAA,MACT;AACA,UAAI,OAAO,SAAU,QAAQ;AAC3B,YAAI,QAAQ,CAAC,GACX,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,OAAM,GAAG,IAAI,UAAU,MAAM,CAAC;AAChD,eAAO,UAAU,OAAO,CAAC,IAAI,SAAS,QAAQ,MAAM,KAAK,QAAQ,CAAC;AAAA,MACpE;AACA,UAAI,UAAU,SAAU,QAAQ;AAC9B,YAAI,cAAc,CAAC,GACjB,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,aAAY,GAAG,IAAI,UAAU,MAAM,CAAC;AACtD,oBAAY,KAAK,CAAC,EAAE,QAAQ,SAAU,KAAK;AACzC,gBAAM,MAAM,GAAG;AACf,sBAAY,QAAQ,KAAK,OAAO,GAAG,EAAE,KAAK,MAAM,CAAC;AAAA,QACnD,CAAC;AACD,eAAO;AAAA,MACT;AACA,UAAI,QAAQ,SAAU,QAAQ,UAAU;AACtC,YAAI,aAAa,OAAQ,YAAW,SAAU,OAAO;AACnD,iBAAO;AAAA,QACT;AACA,YAAIF,SAAQ;AACZ,YAAI,WAAW,OAAO,MAAM;AAC5B,YAAI+D,SAAQ,YAAY,MAAM,IAAI,cAAc,QAAQ,IAAI,IAAI,OAAO,MAAM;AAC7E,YAAI9D,UAAS8D,OAAM;AACnB,eAAO9D,WAAU;AACf,cAAI,MAAM8D,OAAM,EAAE/D,MAAK;AACvB,cAAI,SAAS,SAAS,GAAG,GAAG,KAAK,QAAQ,MAAM,OAAO;AACpD;AAAA,UACF;AAAA,QACF;AAAA,MACF;AACA,UAAI,YAAY,SAAU,QAAQ;AAChC,YAAI,WAAW,OAAQ,UAAS;AAChC,eAAO,OAAO,KAAK,QAAQ,QAAQ,cAAc,EAAE,CAAC,EAAE,OAAO,SAAUE,SAAQ,MAAMF,QAAO;AAC1F,iBAAO,KAAK,YAAY;AACxB,iBAAOE,WAAUF,SAAQ,WAAW,IAAI,IAAI;AAAA,QAC9C,GAAG,EAAE;AAAA,MACP;AACA,UAAI,YAAY;AAChB,UAAI,WAAW,SAAU,QAAQ;AAC/B,YAAI,WAAW,OAAQ,UAAS;AAChC,YAAI8C,MAAK,EAAE;AACX,eAAO,KAAK,SAASA;AAAA,MACvB;AACA,UAAI,QAAQ,eAAe,SAAU,QAAQ,QAAQ,UAAU,YAAY;AACzE,kBAAU,QAAQ,QAAQ,UAAU,UAAU;AAAA,MAChD,GAAG,IAAI;AACP,UAAI,qBAAqB,SAAUK,YAAW;AAC5C,YAAI,CAACA,YAAW;AACd,iBAAOA;AAAA,QACT;AACA,eAAOA,WAAU,SAAS,EAAE,MAAM,GAAG,EAAE,IAAI,SAAU,YAAY;AAC/D,cAAI,WAAW,OAAO,GAAG,OAAO,gBAAgB,MAAM,MAAM,OAAO,iBAAiB;AAClF,yBAAa,OAAO,kBAAkB;AAAA,UACxC;AACA,iBAAO;AAAA,QACT,CAAC,EAAE,KAAK,GAAG;AAAA,MACb;AACA,UAAI,wBAAwB,SAAUA,YAAW;AAC/C,YAAI,CAACA,YAAW;AACd,iBAAOA;AAAA,QACT;AACA,eAAOA,WAAU,SAAS,EAAE,MAAM,GAAG,EAAE,IAAI,SAAU,YAAY;AAC/D,cAAI,WAAW,OAAO,GAAG,OAAO,gBAAgB,MAAM,MAAM,OAAO,iBAAiB;AAClF,yBAAa,WAAW,OAAO,OAAO,gBAAgB,MAAM;AAAA,UAC9D;AACA,iBAAO;AAAA,QACT,CAAC,EAAE,KAAK,GAAG;AAAA,MACb;AACA,UAAI,eAAe,SAAU,MAAM,WAAW;AAC5C,YAAI,YAAY,CAAC;AACjB,YAAI,iBAAiB,CAAC;AACtB,YAAI,eAAexD,GAAE,UAAU;AAC/B,YAAI,KAAK,aAAa;AACtB,YAAI,WAAW,SAAS,uBAAuB;AAC/C,YAAI,YAAY,SAAU,aAAa,YAAYoD,KAAI;AACrD,mBAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,KAAK;AAC3C,gBAAI,UAAU,YAAY,CAAC;AAG3B,gBAAI,OAAO,YAAY,UAAU;AAC/B,kBAAI,WAAW,SAAS,eAAe,OAAO;AAC9C,yBAAW,YAAY,QAAQ;AAC/B;AAAA,YACF;AAGA,gBAAI,CAAC,QAAQ,eAAe,SAAS,GAAG;AACtC,oBAAM,IAAI,MAAM,kCAAkC;AAAA,YACpD;AACA,gBAAI,UAAU,QAAQ;AACtB,gBAAI,OAAO;AAGX,gBAAI,QAAQ,eAAe,cAAc,GAAG;AAC1C,cAAAA,MAAK,QAAQ;AAAA,YACf;AACA,mBAAO,SAAS,gBAAgBA,KAAI,OAAO;AAC3C,gBAAIK,OAAML,QAAO;AACjB,gBAAI,UAAUK,OAAMzD,KAAI;AAExB,gBAAIqD,cAAa,QAAQ;AACzB,gBAAIA,aAAY;AACd,sBAAQ,IAAI,EAAE,KAAKA,WAAU;AAAA,YAC/B;AAEA,gBAAI,QAAQ,QAAQ;AACpB,gBAAI,OAAO;AACT,gBAAE,IAAI,EAAE,IAAI,KAAK;AAAA,YACnB;AAEA,gBAAI,QAAQ,eAAe,WAAW,GAAG;AACvC,kBAAIG,aAAY,QAAQ;AACxB,kBAAIC,MAAK;AACP,qBAAK,UAAU,UAAUD;AAAA,cAC3B,OAAO;AACL,qBAAK,YAAYA;AAAA,cACnB;AAAA,YACF;AAEA,gBAAI,QAAQ,eAAe,aAAa,GAAG;AACzC,mBAAK,cAAc,QAAQ;AAAA,YAC7B;AAEA,gBAAI,QAAQ,eAAe,UAAU,GAAG;AACtC,kBAAI,eAAe,QAAQ;AAC3B,kBAAI,UAAU,YAAY,GAAG;AAC3B,sBAAM,IAAI,MAAM,0CAA0C;AAAA,cAC5D;AACA,wBAAU,YAAY,IAAI;AAC1B,sBAAQ,IAAI,EAAE,KAAK,kBAAkB,YAAY;AAAA,YACnD;AAEA,gBAAI,QAAQ,eAAe,eAAe,GAAG;AAC3C,kBAAI,aAAa,QAAQ;AACzB,kBAAI,CAAC,MAAM,QAAQ,UAAU,GAAG;AAC9B,6BAAa,CAAC,UAAU;AAAA,cAC1B;AACA,uBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAC1C,oBAAI,YAAY,WAAW,CAAC;AAC5B,oBAAI,QAAQ,eAAe,SAAS;AACpC,oBAAI,CAAC,OAAO;AACV,0BAAQ,eAAe,SAAS,IAAI,CAAC;AAAA,gBACvC;AACA,sBAAM,KAAK,IAAI;AAAA,cACjB;AAAA,YACF;AACA,uBAAW,YAAY,IAAI;AAG3B,gBAAI,cAAc,QAAQ;AAC1B,gBAAI,MAAM,QAAQ,WAAW,GAAG;AAC9B,wBAAU,aAAa,MAAMJ,GAAE;AAAA,YACjC;AAAA,UACF;AAAA,QACF;AACA,kBAAU,MAAM,UAAU,EAAE;AAC5B,eAAO;AAAA,UACL;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAAA,MACF;AAGA,UAAI,WAAW,SAAU,KAAK;AAC5B,YAAI,OAAO;AACX,YAAI,IAAI,WAAW,GAAG;AACpB,iBAAO;AAAA,QACT;AACA,iBAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK;AACnC,cAAI,IAAI,IAAI,WAAW,CAAC;AACxB,kBAAQ,QAAQ,KAAK,OAAO;AAC5B,iBAAO,OAAO;AAAA,QAChB;AACA,eAAO;AAAA,MACT;AACA,UAAI,YAAY,SAAU,KAAKV,OAAM,WAAW;AAC9C,YAAIjC,QAAO,MAAM,QAAQiC,KAAI,IAAIA,QAAOA,MAAK,MAAM,aAAa,GAAG;AACnE,YAAI;AACJ,YAAI,IAAI;AACR,YAAIpC,UAASG,MAAK;AAClB,eAAO,IAAIH,SAAQ;AACjB,gBAAMG,MAAK,GAAG;AACd,cAAI,OAAO,GAAG,MAAM,OAAO,OAAO,KAAK;AACrC,kBAAM,IAAI,GAAG;AAAA,UACf,OAAO;AACL,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,YAAY,SAAU,KAAK,KAAK;AAGlC,YAAI,OAAO,QAAQ,YAAY,OAAO,QAAQ,UAAU;AACtD,gBAAM,OAAO,GAAG;AAAA,QAClB;AACA,YAAI,QAAQ,iBAAiB,OAAO,IAAI,GAAG,MAAM,YAAY;AAC3D,iBAAO;AAAA,QACT;AACA,YAAI,QAAQ,aAAa;AACvB,iBAAO;AAAA,QACT;AACA,eAAO;AAAA,MACT;AACA,UAAI,YAAY,SAAU,KAAKiC,OAAM,OAAO,WAAW;AACrD,YAAIjC,QAAO,MAAM,QAAQiC,KAAI,IAAIA,QAAOA,MAAK,MAAM,aAAa,GAAG;AACnE,YAAI0C,QAAO3E,MAAK,SAAS;AACzB,YAAI,QAAQ;AACZ,YAAI,IAAI;AACR,eAAO,IAAI2E,OAAM,KAAK;AACpB,cAAI,MAAM3E,MAAK,CAAC;AAChB,cAAI,CAAC,UAAU,OAAO,GAAG,GAAG;AAC1B,mBAAO;AAAA,UACT;AACA,cAAI,UAAU,MAAM,GAAG;AAGvB,kBAAQ,YAAY,MAAM,GAAG,IAAI,CAAC;AAAA,QACpC;AACA,cAAMA,MAAK2E,KAAI,CAAC,IAAI;AACpB,eAAO;AAAA,MACT;AACA,UAAI,cAAc,SAAU,KAAK1C,OAAM,WAAW;AAChD,YAAIjC,QAAO,MAAM,QAAQiC,KAAI,IAAIA,QAAOA,MAAK,MAAM,aAAa,GAAG;AACnE,YAAI0C,QAAO3E,MAAK,SAAS;AACzB,YAAI,QAAQ;AACZ,YAAI,IAAI;AACR,eAAO,IAAI2E,OAAM,KAAK;AACpB,cAAI,MAAM3E,MAAK,CAAC;AAChB,cAAI,CAAC,UAAU,OAAO,GAAG,GAAG;AAC1B,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,MAAM,GAAG;AACrB,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AACA,kBAAQ;AAAA,QACV;AACA,eAAO,MAAMA,MAAK2E,KAAI,CAAC;AACvB,eAAO;AAAA,MACT;AACA,UAAI,gBAAgB,SAAU,KAAK,OAAO,MAAM;AAC9C,gBAAQ,SAAS;AACjB,YAAI,MAAM,CAAC;AACX,iBAAS,OAAO,KAAK;AACnB,cAAI,CAAC,IAAI,eAAe,GAAG,GAAG;AAC5B;AAAA,UACF;AACA,cAAI,iBAAiB,OAAO,IAAI,GAAG,MAAM;AACzC,cAAI,kBAAkB,QAAQ,KAAK,IAAI,GAAG,CAAC,GAAG;AAC5C,6BAAiB;AAAA,UACnB;AACA,cAAI,gBAAgB;AAClB,gBAAI,aAAa,cAAc,IAAI,GAAG,GAAG,OAAO,IAAI;AACpD,qBAAS,WAAW,YAAY;AAC9B,kBAAI,CAAC,WAAW,eAAe,OAAO,GAAG;AACvC;AAAA,cACF;AACA,kBAAI,MAAM,QAAQ,OAAO,IAAI,WAAW,OAAO;AAAA,YACjD;AAAA,UACF,OAAO;AACL,gBAAI,GAAG,IAAI,IAAI,GAAG;AAAA,UACpB;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,OAAO,WAAY;AAGrB,eAAO,uCAAuC,QAAQ,SAAS,SAAU,GAAG;AAC1E,cAAI,IAAI,KAAK,OAAO,IAAI,KAAK;AAC7B,cAAI,IAAI,MAAM,MAAM,IAAI,IAAI,IAAM;AAClC,iBAAO,EAAE,SAAS,EAAE;AAAA,QACtB,CAAC;AAAA,MACH;AAGA,UAAI,OAAO,SAAU,KAAK;AACxB,aAAK,KAAK,KAAK,MAAM;AACrB,YAAI,QAAQ,QAAW;AACrB,iBAAO,OAAO,KAAK;AAAA,QACrB;AACA,YAAI,KAAK,IAAI,OAAO,SAAY,OAAO,KAAK,OAAO,IAAI;AACvD,eAAO,IAAI;AAAA,MACb;AACA,UAAI,cAAc,SAAU,QAAQ;AAClC,eAAO,OAAO,QAAQ,UAAU,KAAK,EAAE,YAAY;AAAA,MACrD;AACA,UAAI,iBAAiB,SAAU,KAAK;AAClC,YAAI,IAAI,YAAY;AAClB,iBAAO;AAAA,QACT;AACA,YAAI,gBAAgB,IAAI;AACxB,YAAI,SAAS,IAAI;AAGjB,YAAI,QAAQ,iBAAiB,cAAc,kBAAkB,cAAc,eAAe,CAAC;AAC3F,YAAI,OAAO;AACT,mBAAS3D,aAAY,OAAO;AAG1B,gBAAI,IAAIA,SAAQ,MAAM,QAAW;AAC/B,kBAAIA,SAAQ,IAAI,MAAMA,SAAQ;AAAA,YAChC;AAAA,UACF;AAAA,QACF;AAEA,YAAI,QAAQ;AACV,cAAI,aAAa,OAAO;AACxB,cAAI,YAAY;AACd,gBAAI,SAAS;AAAA,UACf;AAAA,QACF;AACA,YAAI,aAAa;AACjB,eAAO;AAAA,MACT;AACA,UAAI,iBAAiB,SAAU,KAAK;AAElC,YAAI,aAAa;AACjB,YAAI,cAAc;AAClB,YAAI,cAAc;AAClB,YAAI,KAAK,GACP,KAAK,GACL,KAAK,GACL,KAAK;AAGP,YAAI,YAAY,KAAK;AACnB,eAAK,IAAI;AAAA,QACX;AACA,YAAI,gBAAgB,KAAK;AACvB,eAAK,CAAC,IAAI,aAAa;AAAA,QACzB;AACA,YAAI,iBAAiB,KAAK;AACxB,eAAK,CAAC,IAAI,cAAc;AAAA,QAC1B;AACA,YAAI,iBAAiB,KAAK;AACxB,eAAK,CAAC,IAAI,cAAc;AAAA,QAC1B;AAGA,YAAI,UAAU,OAAO,IAAI,SAAS,IAAI,iBAAiB;AACrD,eAAK;AACL,eAAK;AAAA,QACP;AACA,aAAK,YAAY,MAAM,IAAI,SAAS,KAAK;AACzC,aAAK,YAAY,MAAM,IAAI,SAAS,KAAK;AACzC,aAAK,MAAM,OAAO,IAAI,WAAW;AAC/B,cAAI,IAAI,aAAa,GAAG;AACtB,kBAAM;AACN,kBAAM;AAAA,UACR,OAAO;AACL,kBAAM;AACN,kBAAM;AAAA,UACR;AAAA,QACF;AAGA,YAAI,IAAI,WAAW,KAAK,IAAI,WAAW,KAAK,IAAI,UAAU;AACxD,eAAK;AACL,eAAK;AACL,eAAK;AACL,eAAK;AAAA,QACP;AAGA,YAAI,MAAM,CAAC,IAAI;AACb,eAAK,KAAK,IAAI,KAAK;AAAA,QACrB;AACA,YAAI,MAAM,CAAC,IAAI;AACb,eAAK,KAAK,IAAI,KAAK;AAAA,QACrB;AACA,eAAO;AAAA,UACL,OAAO;AAAA,UACP,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,QAAQ;AAAA,QACV;AAAA,MACF;AACA,UAAI,MAAM,SAAU,KAAKE,MAAK;AAC5B,eAAO,MAAMA,OAAMA,OAAM,MAAM,CAACA,OAAM,CAACA,OAAM;AAAA,MAC/C;AACA,UAAI,YAAY,WAAY;AAC1B,YAAI;AACJ,YAAI,OAAO,WAAW,aAAa;AACjC,gBAAM,OAAO,yBAAyB,OAAO,+BAA+B,OAAO,4BAA4B,OAAO,0BAA0B,OAAO;AAAA,QACzJ;AACA,YAAI,CAAC,KAAK;AACR,cAAI,WAAW;AACf,gBAAM,SAAU,UAAU;AACxB,gBAAI,YAAW,oBAAI,KAAK,GAAE,QAAQ;AAClC,gBAAI,aAAa,KAAK,IAAI,GAAG,MAAM,WAAW,SAAS;AACvD,gBAAIwB,MAAK,WAAW,WAAY;AAC9B,uBAAS,WAAW,UAAU;AAAA,YAChC,GAAG,UAAU;AACb,uBAAW,WAAW;AACtB,mBAAOA;AAAA,UACT;AAAA,QACF;AACA,eAAO,SAAU,UAAU,SAAS;AAClC,cAAI,OAAO,CAAC,GACV,MAAM,UAAU,SAAS;AAC3B,iBAAO,QAAQ,EAAG,MAAK,GAAG,IAAI,UAAU,MAAM,CAAC;AAC/C,iBAAO,YAAY,SAAY,IAAI,SAAS,KAAK,MAAM,UAAU,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,CAAC,IAAI,IAAI,QAAQ;AAAA,QAC1G;AAAA,MACF,EAAE;AACF,UAAI,cAAc,WAAY;AAC5B,YAAI;AACJ,YAAI,SAAS,OAAO,UAAU;AAC9B,YAAI,QAAQ;AACV,gBAAM,OAAO,wBAAwB,OAAO,8BAA8B,OAAO,qCAAqC,OAAO,0BAA0B,OAAO,iCAAiC,OAAO,yBAAyB,OAAO,gCAAgC,OAAO,2BAA2B,OAAO;AAAA,QACjT;AACA,cAAM,OAAO;AACb,eAAO,SAAS,IAAI,KAAK,MAAM,IAAI;AAAA,MACrC,EAAE;AAKF,UAAI,gCAAgC,SAAU,UAAU,MAAM,QAAQ,WAAW;AAC/E,YAAI3B;AACJ,YAAI;AACJ,YAAI,CAAC,QAAQ;AAaX,cAAI,WAAW,KAAK,EAAE,WAAW,EAAE,CAAC;AACpC,cAAI,YAAY,KAAK,EAAE,YAAY,EAAE,CAAC;AACtC,cAAI,YAAY,SAAS,YAAY;AACnC,qBAAS,SAAS;AAAA,UACpB,WAAW,aAAa,UAAU,YAAY;AAC5C,qBAAS,UAAU;AAAA,UACrB;AAAA,QACF;AACA,YAAI,QAAQ;AACV,iBAAOxB,GAAE,MAAM,EAAE,iBAAiB,WAAW,SAAS,MAAM,KAAK;AACjE,cAAI,CAAC,MAAM;AACT,YAAAwB,QAAOxB,GAAE,MAAM,EAAE,QAAQ;AAAA,cACvB,QAAQ,SAAS,MAAM;AAAA,YACzB,CAAC;AAAA,UACH;AAAA,QACF,OAAO;AACL,UAAAwB,QAAO,KAAK,MAAM,QAAQ;AAC1B,iBAAOA,MAAK,sCAAsC,SAAS;AAAA,QAC7D;AACA,eAAO,QAAQA,MAAK,OAAO;AAAA,MAC7B;AACA,UAAI,eAAe,SAAU,KAAK;AAChC,eAAO,SAAS,GAAG,KAAK,IAAI,MAAM,EAAE,MAAM;AAAA,MAC5C;AACA,UAAI,kBAAkB,SAAU,KAAK,eAAe;AAClD,iBAAS,QAAQ6D,eAAc;AAQ7B,cAAI,UAAU,IAAI,OAAO,0BAA0BA,gBAAe,IAAI,EAAE,KAAK,GAAG;AAChF,cAAI,CAAC,SAAS;AACZ,mBAAO;AAAA,UACT;AACA,iBAAO,QAAQ,CAAC;AAAA,QAClB;AACA,YAAI,SAAS,WAAW,GAAG;AAG3B,YAAI,OAAO,MAAM,MAAM,GAAG;AACxB,iBAAO;AAAA,QACT;AAGA,YAAI,SAAS,CAAC;AACd,eAAO,QAAQ;AAGf,YAAI;AACJ,YAAI,iBAAiB,MAAM;AAGzB,yBAAe;AAAA,QACjB,WAAW,MAAM,QAAQ,aAAa,GAAG;AAEvC,cAAI,cAAc,WAAW,GAAG;AAC9B,mBAAO;AAAA,UACT;AAGA,yBAAe,cAAc,KAAK,GAAG;AAAA,QACvC,WAAW,SAAS,aAAa,GAAG;AAElC,yBAAe;AAAA,QACjB;AACA,YAAI,OAAO,QAAQ,YAAY;AAG/B,YAAI,SAAS,MAAM;AACjB,iBAAO;AAAA,QACT;AAGA,eAAO,OAAO;AACd,eAAO;AAAA,MACT;AACA,UAAI,WAAW;AACf,eAAS,iBAAiB,MAAM,KAAK;AACnC,YAAI,WAAW,KAAK,MAAM,GAAG;AAC7B,YAAI,IAAI;AACR,iBAAS,IAAI,GAAG,KAAK,SAAS,SAAS,GAAG,IAAI,IAAI,KAAK;AACrD,cAAIC,eAAc,CAAC;AACnB,cAAI,IAAI,KAAK,SAAS,CAAC,MAAM,IAAI;AAC/B,YAAAA,aAAY,KAAK,QAAQ;AAAA,UAC3B;AACA,UAAAA,aAAY,KAAK,GAAG;AACpB,cAAI,IAAI,KAAK,KAAK,SAAS,EAAE,MAAM,IAAI;AACrC,YAAAA,aAAY,KAAK,QAAQ;AAAA,UAC3B;AACA,mBAAS,OAAO,MAAM,UAAU,CAAC,GAAG,CAAC,EAAE,OAAOA,YAAW,CAAC;AAC1D,eAAKA,aAAY,SAAS;AAAA,QAC5B;AACA,eAAO,SAAS,OAAO,SAAUC,OAAM;AACrC,iBAAOA,UAAS;AAAA,QAClB,CAAC;AAAA,MACH;AACA,eAAS,cAAc,aAAa,aAAa;AAC/C,YAAI,gBAAgB,MAAM;AAExB,iBAAO,YAAY,QAAQ,EAAE;AAAA,QAC/B;AACA,gBAAQ,YAAY,MAAM;AAAA,UACxB,KAAK;AACH,mBAAO,YAAY,QAAQ,EAAE,SAAS,YAAY;AAAA,UACpD,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,YAAY;AAAA,QACvB;AAAA,MACF;AACA,UAAI,YAAY,SAAU,MAAM,MAAM,QAAQ,KAAK;AACjD,YAAI,WAAW,OAAQ,UAAS,CAAC;AACjC,YAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,YAAI,QAAQ,KAAK;AACjB,YAAI,SAAS,KAAK;AAClB,YAAI,cAAc,IAAI,eAAevF,GAAE,KAAK,EAAE;AAC9C,YAAI,WAAWA,GAAE,OAAO,EAAE;AAC1B,YAAI,cAAcA,GAAE,MAAM,EAAE,KAAK,MAAM,EAAE,OAAO,QAAQ,EAAE;AAC1D,YAAI,WAAW,SAAS,eAAe,EAAE;AAGzC,oBAAY,MAAM,UAAU;AAO5B,oBAAY,MAAM,UAAU;AAC5B,iBAAS,MAAM,UAAU;AACzB,iBAAS,YAAY,QAAQ;AAC7B,oBAAY,YAAY,WAAW;AAEnC,YAAI,CAAC,IAAI,aAAa;AACpB,mBAAS,KAAK,YAAY,WAAW;AAAA,QACvC;AACA,YAAI,iBAAiB,IAAI;AACzB,YAAI,QAAQ;AACZ,YAAI,YAAY,IAAI,aAAa,IAAI,cAAc,KAAK,IAAI,YAAY;AAExE,YAAI,gBAAgB,OAAO,cAAc,WAAW,YAAY;AAChE,YAAI,MAAM,IAAI,OAAO;AACrB,YAAI,SAAS,IAAI,SAAS,IAAI,OAAO,IAAI,MAAM,IAAI;AACnD,YAAI,eAAe,IAAI;AACvB,YAAI,CAAC,SAAS,YAAY,GAAG;AAC3B,yBAAe;AAAA,QACjB;AACA,YAAIwF,SAAQ,KAAK,MAAM,SAAS;AAChC,YAAI,OAAO,CAAC;AACZ,YAAI,QAAQ,CAAC;AACb,YAAI,GAAG;AACP,YAAI;AACJ,YAAI,gBAAgB;AAClB,UAAAxF,GAAE,QAAQ,EAAE,KAAK,aAAa,UAAU;AAAA,QAC1C;AACA,iBAAS,IAAI,GAAG,IAAI,GAAG,MAAMwF,OAAM,QAAQ,IAAI,KAAK,KAAK;AACvD,cAAI,OAAOA,OAAM,CAAC;AAClB,cAAI,CAAC,QAAQ,CAAC,gBAAgB;AAC5B;AAAA,UACF;AACA,cAAI,OAAO,SAAS,UAAU;AAC5B;AAAA,UACF;AACA,cAAI,QAAQ;AACZ,cAAI,OAAO,KAAK,QAAQ,GAAG,KAAK,GAAG;AAEjC,gBAAI,KAAK,SAAS,GAAG;AAEnB,kBAAI,WAAW,iBAAiBA,OAAM,CAAC,GAAG,GAAG;AAC7C,cAAAA,OAAM,OAAO,MAAMA,QAAO,CAAC,GAAG,CAAC,EAAE,OAAO,QAAQ,CAAC;AACjD;AACA,oBAAMA,OAAM;AACZ;AAAA,YACF,OAAO;AAEL,kBAAI,kBAAkB,OAAOA,OAAM,IAAI,CAAC,MAAM,UAAU;AACtD,gBAAAA,OAAM,OAAO,GAAG,UAAU,IAAI,QAAQ;AACtC,uBAAO;AACP;AACA;AAAA,cACF;AACA,oBAAM,EAAE,CAAC,IAAI,CAAC,kBAAkB,OAAOA,OAAM,IAAI,CAAC,MAAM,WAAW,KAAK;AACxE,sBAAQ;AAAA,YACV;AAAA,UACF;AACA,cAAI,CAAC,OAAO;AACV,gBAAI5C,QAAO;AACX,gBAAI,gBAAgB;AAClB,cAAAA,QAAO,MAAM,CAAC,MAAM,SAAY,MAAM,CAAC,IAAI,gBAAgB,OAAO;AAAA,YACpE,OAAO;AACL,cAAAA,QAAO,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,gBAAgB,OAAO;AAAA,YACtD;AACA,qBAAS,OAAOA;AAChB,gBAAI,SAAS,sBAAsB,KAAK,OAAO;AAE7C,oBAAM,CAAC,IAAIA;AACX,kBAAI,KAAK,GAAG;AAEV,qBAAK,GAAG,IAAI;AAGZ,oBAAI;AACJ,oBAAI;AAAA,cACN;AAAA,YACF,OAAO;AACL,kBAAI,CAAC,MAAM,CAAC,KAAK,GAAG;AAClB,oBAAI,YAAY,CAAC,CAAC;AAClB,oBAAI,KAAK,SAAS;AAClB,oBAAI,aAAa,CAAC,GAAG;AAEnB,sBAAI,CAAC,GAAG;AACN,wBAAI,CAAC,MAAM,CAAC,GAAG;AAEb,8BAAQ,CAAC;AACT;AAAA,oBACF;AAMA,oBAAA4C,OAAM,OAAO,GAAG,GAAG,OAAOA,OAAM,IAAI,CAAC,CAAC;AAGtC;AACA,yBAAK,GAAG,IAAI;AACZ;AACA;AAAA,kBACF;AAGA,kBAAAA,OAAM,CAAC,IAAI,KAAK,UAAU,GAAG,CAAC;AAC9B,sBAAI,WAAWA,OAAM,IAAI,CAAC;AAC1B,kBAAAA,OAAM,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,KAAK,aAAa,UAAa,aAAa,WAAW,KAAK;AAAA,gBAC7F,OAAO;AACL,sBAAI,GAAG;AAEL,oBAAAA,OAAM,OAAO,GAAG,GAAGA,OAAM,CAAC,IAAIA,OAAM,IAAI,CAAC,CAAC;AAC1C,wBAAI;AAAA,kBACN,OAAO;AACL,wBAAI,cAAc,KAAK,OAAO,MAAM;AACpC,wBAAI,cAAc,MAAM,gBAAgB,KAAK,SAAS,KAAK,gBAAgB,GAAG;AAC5E,0BAAI,cAAc;AAClB,0BAAI;AAAA,oBACN;AAIA,oBAAAA,OAAM,OAAO,GAAG,GAAG,KAAK,UAAU,GAAG,KAAK,CAAC,GAAG,KAAK,UAAU,KAAK,CAAC,CAAC;AAEpE;AAAA,kBACF;AACA,sBAAI,KAAK,CAAC,KAAK,IAAI,CAAC,GAAG;AAGrB;AAAA,kBACF;AAAA,gBACF;AACA,oBAAI,CAAC,kBAAkB,MAAM,CAAC,MAAM,IAAI;AACtC;AAAA,gBACF;AACA;AAAA,cACF;AACA;AACA;AAAA,YACF;AAAA,UACF;AACA,cAAI,QAAQ;AACZ,cAAI,MAAM,SAAS,cAAc;AAC/B,oBAAQ,eAAe;AAAA,UACzB,WAAW,WAAW,QAAW;AAI/B,gBAAI,eAAe,UAAa,SAAS,SAAS,IAAI;AAEpD,kBAAI,OAAO,eAAe,QAAQ;AAChC,6BAAa,cAAc;AAAA,kBACzB,OAAO;AAAA,kBACP,MAAM;AAAA,gBACR,GAAG,WAAW;AAAA,cAChB,OAAO;AACL,oBAAI,SAAS,gBAAgB,OAAO,YAAY,CAAC,MAAM,MAAM,EAAE,CAAC;AAChE,6BAAa,cAAc,QAAQ,WAAW;AAAA,cAChD;AAAA,YACF;AACA,gBAAI,aAAa,MAAM,SAAS,QAAQ;AAEtC,sBAAQ,KAAK,MAAM,SAAS,UAAU,IAAI;AAAA,YAC5C;AAAA,UACF;AACA,cAAI,UAAU,MAAM;AAClB,kBAAM,OAAO,QAAQ,CAAC;AAGtB,gBAAI,WAAW,IAAI;AACnB,gBAAI,CAAC,YAAY,QAAQ,GAAG;AAC1B;AAAA,YACF;AACA,gBAAI,OAAO,aAAa,UAAU;AAChC,yBAAW;AAAA,YACb;AACA,gBAAI,WAAW,MAAM,KAAK;AAC1B,gBAAI,CAAC,YAAY,CAAC,OAAO;AACvB;AAAA,YACF;AACA,gBAAI,IAAI,SAAS;AACjB,gBAAI,sBAAsB;AAC1B,eAAG;AACD,yBAAW,SAAS,CAAC;AACrB,qCAAuB,SAAS,UAAU,GAAG,CAAC;AAC9C,kBAAI,CAAC,UAAU;AACb,wCAAwB;AAAA,cAC1B,WAAW,SAAS,MAAM,SAAS,GAAG;AACpC,wCAAwB;AAAA,cAC1B;AACA,sCAAwB;AACxB,uBAAS,OAAO;AAChB,kBAAI,SAAS,sBAAsB,KAAK,OAAO;AAC7C,sBAAM,KAAK,IAAI;AACf;AAAA,cACF;AACA;AAAA,YACF,SAAS,KAAK;AACd;AAAA,UACF;AAAA,QACF;AACA,YAAI,IAAI,aAAa;AAEnB,sBAAY,YAAY,WAAW;AAAA,QACrC,OAAO;AAEL,mBAAS,KAAK,YAAY,WAAW;AAAA,QACvC;AACA,eAAO,MAAM,KAAK,GAAG;AAAA,MACvB;AAMA,UAAI,eAAe,SAAUC,OAAM;AAOjC,YAAI,SAAS,EAAE,EAAE,UAAU,UAAUA,QAAO,UAAU,MAAM,KAAK,CAAC;AAClE,eAAO,KAAK,GAAG,EAAE,KAAK,WAAY;AAEhC,cAAI,cAAc;AAClB,YAAE,KAAK,YAAY,YAAY,WAAY;AAEzC,gBAAI,mBAAmB;AACvB,gBAAI,WAAW,iBAAiB;AAChC,gBAAI,YAAY,iBAAiB;AAIjC,gBAAI,SAAS,WAAW,IAAI,KAAK,UAAU,WAAW,aAAa,KAAK,UAAU,WAAW,OAAO,KAAK,UAAU,WAAW,WAAW,GAAG;AAC1I,gBAAE,WAAW,EAAE,WAAW,QAAQ;AAAA,YACpC;AAAA,UACF,CAAC;AAAA,QACH,CAAC;AACD,eAAO,OAAO,KAAK;AAAA,MACrB;AAIA,UAAI,eAAe,SAAU,MAAM,UAAU;AAC3C,YAAI,OAAO,UAAU,YAAY;AAG/B,iBAAO,UAAU,WAAW,MAAM,QAAQ;AAAA,QAC5C,OAAO;AAQL,cAAI,MAAM,OAAO,IAAI,gBAAgB,IAAI;AACzC,cAAI,OAAO,SAAS,cAAc,GAAG;AACrC,eAAK,OAAO;AACZ,eAAK,WAAW;AAChB,mBAAS,KAAK,YAAY,IAAI;AAC9B,eAAK,MAAM;AACX,mBAAS,KAAK,YAAY,IAAI;AAC9B,iBAAO,IAAI,gBAAgB,GAAG;AAAA,QAChC;AAAA,MACF;AAIA,UAAI,kBAAkB,SAAU,SAAS,UAAU;AACjD,YAAI,OAAO,cAAc,OAAO;AAChC,qBAAa,MAAM,QAAQ;AAAA,MAC7B;AAGA,UAAI,gBAAgB,SAAU,SAAS;AAErC,kBAAU,QAAQ,QAAQ,OAAO,EAAE;AACnC,kBAAU,mBAAmB,OAAO;AACpC,YAAI,kBAAkB,QAAQ,QAAQ,GAAG;AAEzC,YAAI,iBAAiB,QAAQ,MAAM,GAAG,eAAe;AACrD,YAAI,aAAa,eAAe,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC;AAE1D,YAAI7C,QAAO,QAAQ,MAAM,kBAAkB,CAAC;AAC5C,YAAI;AACJ,YAAI,eAAe,QAAQ,QAAQ,KAAK,GAAG;AAEzC,0BAAgB,KAAKA,KAAI;AAAA,QAC3B,OAAO;AAEL,0BAAgB,SAAS,mBAAmBA,KAAI,CAAC;AAAA,QACnD;AAEA,YAAI,KAAK,IAAI,WAAW,cAAc,MAAM;AAC5C,iBAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,KAAK;AAC7C,aAAG,CAAC,IAAI,cAAc,WAAW,CAAC;AAAA,QACpC;AACA,eAAO,IAAI,KAAK,CAAC,EAAE,GAAG;AAAA,UACpB,MAAM;AAAA,QACR,CAAC;AAAA,MACH;AAOA,UAAI,iBAAiB,SAAU,KAAK,UAAU;AAC5C,YAAI,CAAC,OAAO,IAAI,OAAO,GAAG,QAAQ,MAAM,MAAM,SAAS;AAUrD,iBAAO,WAAW,WAAY;AAC5B,qBAAS,MAAM,GAAG;AAAA,UACpB,GAAG,CAAC;AAAA,QACN;AAGA,YAAI,gBAAgB,SAAU8C,MAAKC,WAAU;AAC3C,cAAID,KAAI,WAAW,KAAK;AACtB,gBAAI,SAAS,IAAI,WAAW;AAC5B,mBAAO,SAAS,SAAU,KAAK;AAC7B,kBAAI,UAAU,IAAI,OAAO;AACzB,cAAAC,UAAS,MAAM,OAAO;AAAA,YACxB;AACA,mBAAO,UAAU,WAAY;AAC3B,cAAAA,UAAS,IAAI,MAAM,0BAA0B,GAAG,CAAC;AAAA,YACnD;AACA,mBAAO,cAAcD,KAAI,QAAQ;AAAA,UACnC,OAAO;AACL,YAAAC,UAAS,IAAI,MAAM,0BAA0B,GAAG,CAAC;AAAA,UACnD;AAAA,QACF;AACA,YAAI,gBAAgB,SAAUD,MAAKC,WAAU;AAC3C,cAAI,gBAAgB,SAAU,KAAK;AACjC,gBAAI,WAAW;AACf,gBAAI,IAAI,CAAC;AACT,qBAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK,UAAU;AAC7C,gBAAE,KAAK,OAAO,aAAa,MAAM,MAAM,IAAI,SAAS,GAAG,IAAI,QAAQ,CAAC,CAAC;AAAA,YACvE;AACA,mBAAO,EAAE,KAAK,EAAE;AAAA,UAClB;AACA,cAAID,KAAI,WAAW,KAAK;AACtB,gBAAI,QAAQ,IAAI,WAAWA,KAAI,QAAQ;AACvC,gBAAI,SAAS,IAAI,MAAM,GAAG,EAAE,IAAI,KAAK;AACrC,gBAAI,MAAM;AAAA,cACR,OAAO;AAAA,YACT;AACA,gBAAI,OAAO,iBAAiB,IAAI,MAAM,KAAK,UAAU;AACrD,gBAAI,aAAa,OAAO,KAAK,cAAc,KAAK,CAAC;AACjD,YAAAC,UAAS,MAAM,UAAU;AAAA,UAC3B,OAAO;AACL,YAAAA,UAAS,IAAI,MAAM,0BAA0B,GAAG,CAAC;AAAA,UACnD;AAAA,QACF;AACA,YAAI,MAAM,IAAI,eAAe;AAC7B,YAAI,KAAK,OAAO,KAAK,IAAI;AACzB,YAAI,iBAAiB,SAAS,WAAY;AACxC,mBAAS,IAAI,MAAM,0BAA0B,GAAG,CAAC;AAAA,QACnD,CAAC;AACD,YAAI,eAAe,OAAO,aAAa,SAAS;AAChD,YAAI,iBAAiB,QAAQ,WAAY;AACvC,cAAI,OAAO,YAAY;AACrB,0BAAc,KAAK,QAAQ;AAAA,UAC7B,OAAO;AACL,0BAAc,KAAK,QAAQ;AAAA,UAC7B;AAAA,QACF,CAAC;AACD,YAAI,KAAK;AAAA,MACX;AACA,UAAI,iBAAiB,SAAU,IAAI;AACjC,YAAI,MAAM,EAAE,EAAE;AACd,YAAI,IAAI,WAAW,GAAG;AACpB,gBAAM,IAAI,MAAM,mBAAmB;AAAA,QACrC;AACA,YAAI,UAAU,IAAI,CAAC;AACnB,YAAI,MAAM,QAAQ;AAClB,YAAI,aAAa,QAAQ,sBAAsB;AAC/C,YAAI,eAAe;AACnB,YAAI,eAAe;AAGnB,YAAI,QAAQ,iBAAiB;AAC3B,cAAI,MAAM3F,GAAE,OAAO;AACnB,cAAIwB,QAAO,IAAI,QAAQ;AAAA,YACrB,QAAQ,IAAI,IAAI;AAAA,UAClB,CAAC;AAID,yBAAe,WAAW,QAAQA,MAAK;AACvC,yBAAe,WAAW,SAASA,MAAK;AAAA,QAC1C;AACA,eAAO;AAAA,UACL,GAAG,WAAW,OAAO,OAAO,cAAc,IAAI,gBAAgB,aAAa,eAAe;AAAA,UAC1F,GAAG,WAAW,MAAM,OAAO,cAAc,IAAI,gBAAgB,YAAY,eAAe;AAAA,UACxF,OAAO,WAAW,QAAQ;AAAA,UAC1B,QAAQ,WAAW,SAAS;AAAA,QAC9B;AAAA,MACF;AAIA,UAAI,eAAe,SAAU,UAAU,YAAY;AACjD,YAAI,YAAY,EAAE,QAAQ;AAC1B,YAAI,aAAa,UAAU,IAAI,WAAY;AACzC,cAAI,cAAc;AAClB,cAAI,aAAa,YAAY;AAI7B,cAAI,cAAc,WAAW,aAAa,SAAS,eAAe,EAAE,GAAG,YAAY,WAAW;AAC9F,iBAAO,WAAY;AACjB,gBAAI,eAAe,MAAM;AACvB,oBAAM,IAAI,MAAM,gEAAiE;AAAA,YACnF;AAGA,uBAAW,aAAa,MAAM,WAAW;AAEzC,uBAAW,YAAY,WAAW;AAAA,UACpC;AAAA,QACF,CAAC;AACD,eAAO,MAAM,UAAU,KAAK,KAAK,WAAW,UAAU,EAAE,KAAK,SAAU,GAAG;AACxE,qBAAW,CAAC,EAAE,KAAK,IAAI;AAAA,QACzB,CAAC;AAAA,MACH;AAIA,UAAI,0BAA0B,SAAU,SAAS,OAAO;AACtD,YAAI,WAAW,EAAE,OAAO;AACxB,cAAM,OAAO,SAAUoE,QAAO,UAAU;AACtC,cAAI,YAAY,SAAS,KAAK,QAAQ,EAAE,QAAQ,EAAE,OAAO,QAAQ;AAGjE,cAAI,MAAMA,QAAO,OAAO,GAAG;AACzB,sBAAU,SAASA,OAAM,OAAO,CAAC;AACjC,YAAAA,SAAQ,KAAKA,QAAO,OAAO;AAAA,UAC7B;AACA,oBAAU,KAAKA,MAAK;AAAA,QACtB,CAAC;AAAA,MACH;AAWA,UAAI,iBAAiB,SAAU,KAAK;AAClC,YAAI,OAAO,GAAG,MAAM,KAAK;AAEvB,cAAI,MAAM;AACV,cAAI,SAAS,GAAG,GAAG;AACjB,kBAAM,CAAC;AAAA,UACT;AAEA,iBAAO;AAAA,YACL,KAAK;AAAA,YACL,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,QACF;AAGA,YAAI7D,MAAKC,QAAOC,SAAQH;AACxB,QAAAC,OAAMC,SAAQC,UAASH,QAAO;AAC9B,YAAI,SAAS,IAAI,QAAQ,GAAG;AAC1B,UAAAC,OAAME,UAAS,CAAC,IAAI;AAAA,QACtB;AACA,YAAI,SAAS,IAAI,UAAU,GAAG;AAC5B,UAAAD,SAAQF,QAAO,CAAC,IAAI;AAAA,QACtB;AACA,YAAI,SAAS,IAAI,GAAG,GAAG;AACrB,UAAAC,OAAM,CAAC,IAAI;AAAA,QACb;AACA,YAAI,SAAS,IAAI,KAAK,GAAG;AACvB,UAAAC,SAAQ,CAAC,IAAI;AAAA,QACf;AACA,YAAI,SAAS,IAAI,MAAM,GAAG;AACxB,UAAAC,UAAS,CAAC,IAAI;AAAA,QAChB;AACA,YAAI,SAAS,IAAI,IAAI,GAAG;AACtB,UAAAH,QAAO,CAAC,IAAI;AAAA,QACd;AAEA,eAAO;AAAA,UACL,KAAKC;AAAA,UACL,OAAOC;AAAA,UACP,QAAQC;AAAA,UACR,MAAMH;AAAA,QACR;AAAA,MACF;AACA,UAAI,SAAS;AAAA,QACX,QAAQ,SAAU,GAAG;AACnB,iBAAO;AAAA,QACT;AAAA,QACA,MAAM,SAAU,GAAG;AACjB,iBAAO,IAAI;AAAA,QACb;AAAA,QACA,OAAO,SAAU,GAAG;AAClB,iBAAO,IAAI,IAAI;AAAA,QACjB;AAAA,QACA,OAAO,SAAU,GAAG;AAClB,cAAI,KAAK,GAAG;AACV,mBAAO;AAAA,UACT;AACA,cAAI,KAAK,GAAG;AACV,mBAAO;AAAA,UACT;AACA,cAAI,KAAK,IAAI;AACb,cAAI,KAAK,KAAK;AACd,iBAAO,KAAK,IAAI,MAAK,KAAK,KAAK,IAAI,MAAM,KAAK;AAAA,QAChD;AAAA,QACA,aAAa,SAAU,GAAG;AACxB,iBAAO,KAAK,IAAI,GAAG,MAAM,IAAI,EAAE;AAAA,QACjC;AAAA,QACA,QAAQ,SAAU,GAAG;AACnB,mBAAS,IAAI,GAAG,IAAI,GAAG,GAAG,KAAK,GAAG,KAAK,GAAG;AACxC,gBAAI,MAAM,IAAI,IAAI,KAAK,IAAI;AACzB,kBAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK;AAChC,qBAAO,CAAC,IAAI,IAAI,IAAI;AAAA,YACtB;AAAA,UACF;AAAA,QACF;AAAA,QACA,SAAS,SAAUD,IAAG;AACpB,iBAAO,SAAU,GAAG;AAClB,mBAAO,IAAIA,GAAE,IAAI,CAAC;AAAA,UACpB;AAAA,QACF;AAAA,QACA,SAAS,SAAUA,IAAG;AACpB,iBAAO,SAAU,GAAG;AAClB,mBAAO,OAAM,IAAI,MAAKA,GAAE,IAAI,CAAC,IAAI,IAAIA,GAAE,IAAI,IAAI,CAAC;AAAA,UAClD;AAAA,QACF;AAAA,QACA,OAAO,SAAUA,IAAG,GAAG,GAAG;AACxB,cAAI,KAAK;AACT,cAAI,KAAK;AACT,iBAAO,SAAU,GAAG;AAClB,gBAAI,IAAIA,GAAE,CAAC;AACX,mBAAO,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AAAA,UACjC;AAAA,QACF;AAAA,QACA,MAAM,SAAU,GAAG;AACjB,cAAI,CAAC,GAAG;AACN,gBAAI;AAAA,UACN;AACA,iBAAO,SAAU,GAAG;AAClB,mBAAO,IAAI,MAAM,IAAI,KAAK,IAAI;AAAA,UAChC;AAAA,QACF;AAAA,QACA,SAAS,SAAU,GAAG;AACpB,cAAI,CAAC,GAAG;AACN,gBAAI;AAAA,UACN;AACA,iBAAO,SAAU,GAAG;AAClB,mBAAO,KAAK,IAAI,GAAG,MAAM,IAAI,EAAE,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,IAAI,IAAI,CAAC;AAAA,UACtE;AAAA,QACF;AAAA,MACF;AACA,UAAI,cAAc;AAAA,QAChB,QAAQ,SAAU,GAAG,GAAG;AACtB,cAAI,IAAI,IAAI;AACZ,iBAAO,SAAU,GAAG;AAClB,mBAAO,IAAI,IAAI;AAAA,UACjB;AAAA,QACF;AAAA,QACA,QAAQ,SAAU,GAAG,GAAG;AACtB,cAAI,IAAI,OAAO,KAAK,CAAC;AACrB,iBAAO,SAAU,GAAG;AAClB,gBAAI,GAAG;AACP,gBAAI,IAAI,CAAC;AACT,iBAAK,IAAI,EAAE,SAAS,GAAG,KAAK,IAAI,KAAK;AACnC,kBAAI,EAAE,CAAC;AACP,gBAAE,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK;AAAA,YAChC;AACA,mBAAO;AAAA,UACT;AAAA,QACF;AAAA,QACA,UAAU,SAAU,GAAG,GAAG;AACxB,cAAI,KAAK,SAAS,EAAE,MAAM,CAAC,GAAG,EAAE;AAChC,cAAI,KAAK,SAAS,EAAE,MAAM,CAAC,GAAG,EAAE;AAChC,cAAI,KAAK,KAAK;AACd,cAAI,MAAM,KAAK,OAAY;AAC3B,cAAI,KAAK,KAAK;AACd,cAAI,MAAM,KAAK,SAAY;AAC3B,cAAI,KAAK,KAAK;AACd,cAAI,MAAM,KAAK,YAAY;AAC3B,iBAAO,SAAU,GAAG;AAClB,gBAAI,IAAI,KAAK,KAAK,IAAI;AACtB,gBAAImB,KAAI,KAAK,KAAK,IAAI;AACtB,gBAAIgB,KAAI,KAAK,KAAK,IAAI;AACtB,mBAAO,OAAO,KAAK,KAAK,IAAIhB,KAAIgB,IAAG,SAAS,EAAE,EAAE,MAAM,CAAC;AAAA,UACzD;AAAA,QACF;AAAA,QACA,MAAM,SAAU,GAAG,GAAG;AACpB,cAAI,IAAI;AACR,cAAI,KAAK,EAAE,KAAK,CAAC;AACjB,cAAI,KAAK,EAAE,KAAK,CAAC;AACjB,cAAI,IAAI,GAAG,CAAC,EAAE,QAAQ,GAAG;AACzB,cAAInC,KAAI,IAAI,IAAI,GAAG,CAAC,EAAE,SAAS,IAAI,IAAI;AACvC,cAAI,CAAC,GAAG,CAAC;AACT,cAAI,IAAI,CAAC,GAAG,CAAC,IAAI;AACjB,cAAI,IAAI,GAAG,CAAC;AACZ,iBAAO,SAAU,GAAG;AAClB,oBAAQ,IAAI,IAAI,GAAG,QAAQA,EAAC,IAAI;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAIA,UAAI,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,QAKX,SAAS,SAAU,MAAM;AACvB,cAAI,MAAM;AACV,cAAI,SAAS,OAAO,SAAS,KAAK,MAAM,IAAI,KAAK,SAAS;AAC1D,cAAI,QAAQ,OAAO,SAAS,KAAK,KAAK,IAAI,KAAK,QAAQ;AACvD,iBAAO,SAAS,GAAG,EAAE;AAAA,YACnB,OAAO,KAAK,SAAS;AAAA,YACrB,SAAS,OAAO,SAAS,KAAK,OAAO,IAAI,KAAK,UAAU;AAAA,YACxD,aAAa,SAAS;AAAA,YACtB,aAAa;AAAA,UACf,CAAC;AAAA,QACH;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,WAAW,SAAU,MAAM;AACzB,cAAI,MAAM;AACV,iBAAO,SAAS,GAAG,EAAE;AAAA,YACnB,OAAO,KAAK,SAAS;AAAA,YACrB,OAAO,OAAO,SAAS,KAAK,KAAK,IAAI,KAAK,QAAQ;AAAA,YAClD,MAAM,OAAO,SAAS,KAAK,IAAI,IAAI,KAAK,OAAO;AAAA,YAC/C,SAAS,OAAO,SAAS,KAAK,OAAO,IAAI,KAAK,UAAU;AAAA,UAC1D,CAAC;AAAA,QACH;AAAA;AAAA;AAAA,QAGA,MAAM,SAAU,MAAM;AACpB,cAAI,IAAI,OAAO,SAAS,KAAK,CAAC,IAAI,KAAK,IAAI;AAC3C,iBAAO,SAAS,mEAAmE,EAAE;AAAA,YACnF,cAAc,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,IAAI;AAAA,UACxD,CAAC;AAAA,QACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,YAAY,SAAU,MAAM;AAC1B,cAAI,MAAM,4BAA4B,SAAS,oIAAoI;AACnL,iBAAO,SAAS,GAAG,EAAE;AAAA,YACnB,IAAI,KAAK,MAAM;AAAA,YACf,IAAI,KAAK,MAAM;AAAA,YACf,SAAS,OAAO,SAAS,KAAK,OAAO,IAAI,KAAK,UAAU;AAAA,YACxD,OAAO,KAAK,SAAS;AAAA,YACrB,MAAM,OAAO,SAAS,KAAK,IAAI,IAAI,KAAK,OAAO;AAAA,UACjD,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,WAAW,SAAU,MAAM;AACzB,cAAI,SAAS,OAAO,SAAS,KAAK,MAAM,IAAI,KAAK,SAAS;AAC1D,iBAAO,SAAS,6HAA6H,EAAE;AAAA,YAC7I,GAAG,SAAS,UAAU,IAAI;AAAA,YAC1B,GAAG,SAAS,UAAU,IAAI;AAAA,YAC1B,GAAG,SAAS,UAAU,IAAI;AAAA,YAC1B,GAAG,SAAS,UAAU,IAAI;AAAA,YAC1B,GAAG,SAAS,UAAU,IAAI;AAAA,YAC1B,GAAG,SAAS,UAAU,IAAI;AAAA,YAC1B,GAAG,SAAS,UAAU,IAAI;AAAA,YAC1B,GAAG,SAAS,UAAU,IAAI;AAAA,UAC5B,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,OAAO,SAAU,MAAM;AACrB,cAAI,SAAS,OAAO,SAAS,KAAK,MAAM,IAAI,KAAK,SAAS;AAC1D,iBAAO,SAAS,6HAA6H,EAAE;AAAA,YAC7I,GAAG,QAAQ,SAAS,IAAI;AAAA,YACxB,GAAG,QAAQ,SAAS,IAAI;AAAA,YACxB,GAAG,QAAQ,SAAS,IAAI;AAAA,YACxB,GAAG,QAAQ,SAAS,IAAI;AAAA,YACxB,GAAG,QAAQ,SAAS,IAAI;AAAA,YACxB,GAAG,QAAQ,SAAS,IAAI;AAAA,YACxB,GAAG,QAAQ,SAAS,IAAI;AAAA,YACxB,GAAG,QAAQ,SAAS,IAAI;AAAA,YACxB,GAAG,QAAQ,SAAS,IAAI;AAAA,UAC1B,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,UAAU,SAAU,MAAM;AACxB,cAAI,SAAS,OAAO,SAAS,KAAK,MAAM,IAAI,KAAK,SAAS;AAC1D,iBAAO,SAAS,sEAAsE,EAAE;AAAA,YACtF,QAAQ,IAAI;AAAA,UACd,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,WAAW,SAAU,MAAM;AACzB,iBAAO,SAAS,sEAAsE,EAAE;AAAA,YACtF,OAAO,KAAK,SAAS;AAAA,UACvB,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,QAAQ,SAAU,MAAM;AACtB,cAAI,SAAS,OAAO,SAAS,KAAK,MAAM,IAAI,KAAK,SAAS;AAC1D,iBAAO,SAAS,4OAA4O,EAAE;AAAA,YAC5P;AAAA,YACA,SAAS,IAAI;AAAA,UACf,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,YAAY,SAAU,MAAM;AAC1B,iBAAO,SAAS,4LAA4L,EAAE;AAAA,YAC5M,QAAQ,OAAO,SAAS,KAAK,MAAM,IAAI,KAAK,SAAS;AAAA,UACvD,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,UAAU,SAAU,MAAM;AACxB,cAAI,SAAS,OAAO,SAAS,KAAK,MAAM,IAAI,KAAK,SAAS;AAC1D,iBAAO,SAAS,iQAAiQ,EAAE;AAAA,YACjR;AAAA,YACA,SAAS,MAAK,SAAS;AAAA,UACzB,CAAC;AAAA,QACH;AAAA,MACF;AACA,UAAI,SAAS;AAAA;AAAA;AAAA;AAAA,QAIX,QAAQ,SAAU,WAAW,OAAO,QAAQ;AAC1C,mBAAS,UAAU;AAAA,YACjB,UAAU,CAAC,KAAK,EAAE;AAAA,YAClB,SAAS;AAAA,YACT,WAAW;AAAA,YACX,UAAU,CAAC,CAAC;AAAA,UACd;AAIA,cAAI,KAAK;AACT,cAAI,QAAQ,GAAG,KAAK,SAAS;AAC7B,cAAI,OAAO,MAAM,CAAC,KAAK;AACvB,cAAIgE,SAAQ,MAAM,CAAC,KAAK;AACxB,cAAI,OAAO,MAAM,CAAC,KAAK;AACvB,cAAI,SAAS,MAAM,CAAC,KAAK;AACzB,cAAI,QAAQ,MAAM,CAAC;AACnB,cAAI,QAAQ,CAAC,MAAM,CAAC;AACpB,cAAI,QAAQ,MAAM,CAAC;AACnB,cAAI,YAAY,MAAM,CAAC;AACvB,cAAI,OAAO,MAAM,CAAC;AAClB,cAAIjE,SAAQ;AACZ,cAAI,SAAS;AACb,cAAI,SAAS;AACb,cAAI,UAAU;AACd,cAAI,WAAW;AACb,wBAAY,CAAC,UAAU,UAAU,CAAC;AAAA,UACpC;AACA,cAAI,SAAS,SAAS,OAAOiE,WAAU,KAAK;AAC1C,oBAAQ,OAAO;AACf,YAAAA,SAAQ;AACR,gBAAI,OAAO;AACT,uBAAS,KAAK,OAAO,QAAQ,KAAK,CAAC;AAAA,YACrC;AAAA,UACF;AACA,kBAAQ,MAAM;AAAA,YACZ,KAAK;AACH,sBAAQ;AACR,qBAAO;AACP;AAAA,YACF,KAAK;AACH,cAAAjE,SAAQ;AACR,uBAAS;AACT,qBAAO;AACP;AAAA,YACF,KAAK;AACH,cAAAA,SAAQ;AACR,uBAAS;AACT,qBAAO;AACP;AAAA,YACF,KAAK;AAAA,YACL,KAAK;AAAA,YACL,KAAK;AAAA,YACL,KAAK;AACH,kBAAI,WAAW,KAAK;AAClB,yBAAS,MAAM,KAAK,YAAY;AAAA,cAClC;AACA;AAAA,YACF,KAAK;AAAA,YACL,KAAK;AACH,wBAAU;AACV,0BAAY;AACZ;AAAA,YACF,KAAK;AACH,cAAAA,SAAQ;AACR,qBAAO;AACP;AAAA,UACJ;AACA,cAAI,WAAW,KAAK;AAClB,qBAAS,OAAO,SAAS,CAAC;AAC1B,qBAAS,OAAO,SAAS,CAAC;AAAA,UAC5B;AAGA,cAAI,QAAQ,OAAO,CAAC,WAAW;AAC7B,mBAAO;AAAA,UACT;AAGA,cAAI,aAAa,MAAM;AACrB,gBAAI,QAAQ,KAAK;AACf,0BAAY,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,SAAS,CAAC;AAAA,YACjD,WAAW,QAAQ,OAAO,QAAQ,KAAK;AACrC,0BAAY,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,SAAS,CAAC;AAAA,YACjD;AAAA,UACF;AACA,cAAI,SAAS,SAAS;AAGtB,cAAI,WAAW,QAAQ,GAAG;AACxB,mBAAO;AAAA,UACT;AAGA,cAAI,WAAW,QAAQ,KAAK,UAAU,KAAK,IAAI,QAAQ,KAAK,QAAQ,CAAC,OAAO,OAAO;AACnF,cAAI,aAAa;AAIjB,cAAIA,SAAQ,GAAG;AACb,gBAAI,OAAO,KAAK,OAAO,OAAO,SAAS;AACvC,oBAAQ,KAAK,MAAM,KAAK;AACxB,yBAAa,KAAK,SAAS;AAAA,UAC7B,OAAO;AACL,qBAASA;AAAA,UACX;AAGA,kBAAQ,KAAK,QAAQ,MAAM,OAAO,SAAS;AAG3C,cAAI,IAAI,MAAM,YAAY,GAAG;AAC7B,cAAI,SAAS,IAAI,IAAI,QAAQ,MAAM,UAAU,GAAG,CAAC;AACjD,cAAI,QAAQ,IAAI,IAAI,KAAK,OAAO,UAAU,MAAM,UAAU,IAAI,CAAC;AAC/D,mBAAS,YAAY4C,QAAO;AAC1B,gBAAIL,KAAIK,OAAM;AACd,gBAAI,IAAI,CAAC;AACT,gBAAI,IAAI;AACR,gBAAIxB,KAAI,OAAO,SAAS,CAAC;AACzB,mBAAOmB,KAAI,KAAKnB,KAAI,GAAG;AACrB,gBAAE,KAAKwB,OAAM,UAAUL,MAAKnB,IAAGmB,KAAInB,EAAC,CAAC;AACrC,cAAAA,KAAI,OAAO,SAAS,KAAK,IAAI,KAAK,OAAO,SAAS,MAAM;AAAA,YAC1D;AACA,mBAAO,EAAE,QAAQ,EAAE,KAAK,OAAO,SAAS;AAAA,UAC1C;AAGA,cAAI,CAAC,SAAS,SAAS,OAAO,UAAU;AACtC,qBAAS,YAAY,MAAM;AAAA,UAC7B;AACA,cAAI1C,UAAS,OAAO,SAAS,OAAO,SAAS,MAAM,UAAU,SAAS,IAAI,SAAS;AACnF,cAAI,UAAUA,UAAS,QAAQ,IAAI,MAAMA,UAAS,QAAQA,UAAS,CAAC,EAAE,KAAK,IAAI,IAAI;AAGnF,cAAI,QAAQ;AACV,qBAAS,YAAY,UAAU,MAAM;AAAA,UACvC;AAGA,sBAAY;AAGZ,kBAAQ,SAAS;AACjB,kBAAQuF,WAAU,MAAM,WAAW,QAAQ,UAAUA,WAAU,MAAM,UAAU,WAAW,QAAQA,WAAU,MAAM,QAAQ,UAAU,GAAGvF,YAAW,CAAC,IAAI,WAAW,QAAQ,QAAQ,UAAUA,OAAM,IAAI,YAAY,SAAS,QAAQ,UAAU,UAAU;AAAA,QACzP;AAAA;AAAA;AAAA,QAGA,QAAQ,SAAU,cAAc,OAAO;AACrC,cAAI;AACJ,cAAI,iBAAiB;AACrB,cAAI,iBAAiB;AACrB,cAAI,uBAAuB,CAAC;AAC5B,kBAAQ,sBAAsB,aAAa,QAAQ,cAAc,OAAO,IAAI;AAC1E,gBAAI,sBAAsB,YAAY;AACtC,mCAAuB,aAAa,MAAM,GAAG,mBAAmB;AAChE,gBAAI,gBAAgB;AAClB,2BAAa,qBAAqB,MAAM,GAAG;AAC3C,0BAAY,WAAW,MAAM,EAAE,MAAM,GAAG;AACxC,qCAAuB;AACvB,uBAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AACzC,uCAAuB,qBAAqB,UAAU,CAAC,CAAC;AAAA,cAC1D;AACA,kBAAI,WAAW,QAAQ;AACrB,uCAAuB,KAAK,OAAO,YAAY,oBAAoB;AAAA,cACrE;AAAA,YACF;AACA,iCAAqB,KAAK,oBAAoB;AAC9C,2BAAe,aAAa,MAAM,sBAAsB,CAAC;AACzD,6BAAiB,CAAC;AAClB,6BAAiB,iBAAiB,MAAM;AAAA,UAC1C;AACA,+BAAqB,KAAK,YAAY;AACtC,iBAAO,qBAAqB,KAAK,EAAE;AAAA,QACrC;AAAA,QACA,SAAS,SAAU,MAAM,OAAO,WAAW;AACzC,kBAAQ,MAAM;AAAA,YACZ,KAAK;AACH,qBAAO,MAAM,SAAS,CAAC;AAAA,YACzB,KAAK;AACH,qBAAO,OAAO,aAAa,KAAK;AAAA,YAClC,KAAK;AACH,qBAAO,MAAM,SAAS,CAAC;AAAA,YACzB,KAAK;AACH,qBAAO,MAAM,SAAS,EAAE;AAAA,YAC1B,KAAK;AACH,qBAAO,MAAM,SAAS,EAAE,EAAE,YAAY;AAAA,YACxC,KAAK;AACH,qBAAO,MAAM,YAAY,SAAS;AAAA,YACpC,KAAK;AACH,qBAAO,MAAM,cAAc,SAAS;AAAA,YACtC,KAAK;AACH,qBAAO,MAAM,QAAQ,SAAS;AAAA,YAChC,KAAK;AACH,sBAAQ,QAAQ,KAAK,MAAM,OAAO,KAAK,UAAU,OAAO,SAAS,CAAC,GAAG,QAAQ,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,UAAU,SAAS,IAAI,QAAQ,SAAS,CAAC,CAAC,CAAC;AAAA,YACxJ;AACE,qBAAO,QAAQ;AAAA,UACnB;AAAA,QACF;AAAA,QACA,OAAO,SAAU,OAAO,WAAW;AACjC,iBAAO,YAAY,KAAK,MAAM,SAAS,YAAY,KAAK,IAAI,IAAI,SAAS,EAAE,IAAI,YAAY,KAAK,MAAM,KAAK;AAAA,QAC7G;AAAA,QACA,WAAW,SAAU,OAAO,WAAW;AACrC,iBAAO,aAAa,QAAQ,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI;AAAA,QACvE;AAAA,QACA,QAAQ,SAAU,OAAO,WAAW;AAClC,cAAI,WAAW,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,GAAG,EAAE,IAAI,SAAU,GAAG6D,IAAG;AACtH,gBAAI,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAIA,EAAC,IAAI,CAAC;AACxC,mBAAO;AAAA,cACL,OAAOA,KAAI,IAAI,SAAU2B,IAAG;AAC1B,uBAAOA,KAAI;AAAA,cACb,IAAI,SAAUA,IAAG;AACf,uBAAOA,KAAI;AAAA,cACb;AAAA,cACA,QAAQ;AAAA,YACV;AAAA,UACF,CAAC;AACD,cAAI,IAAI;AACR,cAAI,OAAO;AACT,gBAAI,QAAQ,GAAG;AACb,uBAAS;AAAA,YACX;AACA,gBAAI,WAAW;AACb,sBAAQ,KAAK,MAAM,OAAO,KAAK,UAAU,OAAO,SAAS,CAAC;AAAA,YAC5D;AACA,gBAAI,IAAI,KAAK,MAAM,QAAQ,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI;AACtD,gBAAI,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,OAAO,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC;AAAA,UAC9E;AACA,iBAAO,SAAS,IAAI,IAAI,CAAC;AAAA,QAC3B;AAAA,MACF;AAKA,UAAI,WAAW,SAAUL,OAAM;AAK7B,YAAI,QAAQ;AACZ,eAAO,SAAU7C,OAAM;AACrB,UAAAA,QAAOA,SAAQ,CAAC;AAChB,iBAAO6C,MAAK,QAAQ,OAAO,SAAU,OAAO;AAC1C,gBAAI,OAAO,MAAM,KAAK,SAAS;AAC/B,gBAAI,OAAO,KAAK,MAAM,GAAG,CAAC,EAAE,KAAK,SAAU,OAAO;AAChD,qBAAO,CAAC,CAAC;AAAA,YACX,CAAC;AACD,gBAAI,YAAY,KAAK,MAAM,GAAG;AAC9B,gBAAI,QAAQ7C,MAAK,UAAU,MAAM,CAAC;AAClC,mBAAO,UAAU,UAAa,UAAU,QAAQ;AAC9C,sBAAQ,MAAM,UAAU,MAAM,CAAC;AAAA,YACjC;AACA,mBAAO,UAAU,SAAY,QAAQ;AAAA,UACvC,CAAC;AAAA,QACH;AAAA,MACF;AAKA,UAAI,mBAAmB,SAAU,IAAI;AACnC,YAAI,cAAc,OAAO,IAAI;AAC7B,aAAK,MAAM,YAAY;AACvB,iBAAS,eAAemD,KAAI,MAAM;AAChC,cAAI,WAAW,CAAC,UAAU,OAAO,MAAM,KAAK,EAAE;AAC9C,mBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,gBAAI,SAAS,SAAS,CAAC;AACvB,gBAAI,WAAW,SAAS,SAAS,OAAO,KAAK,OAAO,GAAG,CAAC,EAAE,YAAY,IAAI,KAAK,OAAO,CAAC;AACvF,gBAAIA,IAAG,QAAQ,MAAM,QAAW;AAC9B,qBAAO,WAAWA,IAAG,QAAQ,CAAC,IAAIA,IAAG,QAAQ,EAAE,IAAIA,IAAG,QAAQ;AAAA,YAChE;AAAA,UACF;AAAA,QACF;AACA,YAAI,eAAe,aAAa,mBAAmB,KAAK,eAAe,aAAa,mBAAmB,GAAG;AACxG,yBAAe,aAAa,gBAAgB;AAAA,UAE5C,eAAe,aAAa,kBAAkB;AAAA,QAChD,OAAO;AACL,yBAAe,IAAI,mBAAmB;AAAA,UAEtC,eAAe,IAAI,mBAAmB;AAAA,QACxC;AAAA,MACF;AACA,UAAI,OAAO,WAAY;AAAA,MAAC;AAWxB,eAAS,WAAW,OAAO;AACzB,gBAAQ,KAAK,KAAK;AAKlB,YAAI,WAAW,QAAQ,KAAK,EAAE,OAAO,SAAU,KAAK,MAAM;AACxD,cAAI,KAAK,EAAE,IAAI,KAAK,MAAM;AAC1B,iBAAO;AAAA,QACT,GAAG,CAAC,CAAC;AACL,gBAAQ,KAAK,EAAE,QAAQ,SAAU,MAAM;AACrC,cAAIxC,SAAQ,SAAS,KAAK,EAAE;AAG5B,cAAIA,OAAM,OAAO,GAAG;AAClB,gBAAI,SAASA,OAAM,OAAO;AAC1B,gBAAI,SAASA,OAAM,OAAO;AAC1B,gBAAI,OAAO,MAAM,SAAS,OAAO,EAAE,GAAG;AAGpC,cAAAA,OAAM,KAAK,aAAa,SAAS,OAAO,EAAE,EAAE,EAAE;AAAA,YAChD;AACA,gBAAI,OAAO,MAAM,SAAS,OAAO,EAAE,GAAG;AAGpC,cAAAA,OAAM,KAAK,aAAa,SAAS,OAAO,EAAE,EAAE,EAAE;AAAA,YAChD;AAAA,UACF;AAGA,cAAID,UAAS,KAAK,IAAI,QAAQ;AAC9B,cAAIA,WAAU,SAASA,OAAM,GAAG;AAC9B,YAAAC,OAAM,IAAI,UAAU,SAASD,OAAM,EAAE,EAAE;AAAA,UACzC;AAGA,cAAI,SAAS,QAAQ,KAAK,IAAI,QAAQ,CAAC,EAAE,OAAO,SAAU,WAAW,OAAO;AAG1E,gBAAI,SAAS,KAAK,GAAG;AACnB,wBAAU,KAAK,SAAS,KAAK,EAAE,EAAE;AAAA,YACnC;AACA,mBAAO;AAAA,UACT,GAAG,CAAC,CAAC;AACL,cAAI,CAAC,QAAQ,MAAM,GAAG;AACpB,YAAAC,OAAM,IAAI,UAAU,MAAM;AAAA,UAC5B;AAAA,QACF,CAAC;AACD,eAAO;AAAA,MACT;AACA,UAAI,sBAAsB,CAAC,WAAW,YAAY,YAAY,YAAY,mBAAmB,SAAS,eAAe;AACrH,UAAI,kBAAkB,oBAAoB,OAAO,SAAU,KAAK,KAAK;AACnE,YAAI,GAAG,IAAI;AACX,eAAO;AAAA,MACT,GAAG,CAAC,CAAC;AACL,UAAI,UAAU;AAAA,QACZ,SAAS,SAAU,YAAY;AAC7B,iBAAO,cAAc,UAAU;AAAA,QACjC;AAAA,QACA,KAAK,SAAU,YAAY,GAAG,MAAM;AAClC,iBAAO,KAAK,UAAU,EAAE,QAAQ,SAAU,KAAK;AAC7C,gBAAI,gBAAgB,GAAG,KAAK,OAAO,MAAM;AACvC,kBAAI,QAAQ,WAAW,GAAG;AAC1B,kBAAI,KAAK,YAAY,YAAY,MAAM,QAAQ,KAAK,GAAG;AACrD,sBAAM,KAAK,KAAK,OAAO,EAAE,QAAQ,SAAU,QAAQlD,QAAO;AACxD,yBAAO,WAAW,MAAM,SAAS,OAAO,KAAK;AAAA,gBAC/C,CAAC;AAAA,cACH,OAAO;AACL,qBAAK,GAAG,IAAI;AAAA,cACd;AAAA,YACF;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF;AACA,eAAS,WAAW,UAAU,WAAW;AACvC,eAAO,SAAU,OAAO,SAAS;AAC/B,cAAI,oBAAoB,aAAa,KAAK;AAC1C,kBAAQ,WAAW,KAAK;AACxB,cAAI,mBAAmB;AACrB,qBAAS;AAAA,UACX;AACA,cAAI,QAAQ,CAAC;AACb,cAAI,SAAS,KAAK,GAAG;AACnB,gBAAI,YAAY,qBAAqB,SAAS,KAAK,SAAS,IAAI,QAAQ,QAAQ,SAAS,IAAI,KAAK,IAAI,QAAQ,QAAQ,SAAS,GAAG,CAAC;AACnI,kBAAM,QAAQ,IAAI;AAAA,UACpB;AACA,iBAAO;AAAA,QACT;AAAA,MACF;AACA,eAAS,gBAAgB,MAAM,WAAW,QAAQ;AAChD,eAAO,SAAU,OAAO,SAAS;AAC/B,cAAI,kBAAkB,aAAa,KAAK;AACxC,kBAAQ,WAAW,KAAK;AACxB,cAAI,iBAAiB;AACnB,qBAAS;AAAA,UACX;AACA,cAAI;AACJ,cAAI,SAAS,KAAK,GAAG;AACnB,gBAAI,YAAY,QAAQ,MAAM,EAAE;AAChC,gBAAI,mBAAmB,QAAQ,KAAK,QAAQ,GAAG;AAC7C,sBAAQ,UAAU,IAAI,IAAI,QAAQ,SAAS,IAAI;AAAA,YACjD,OAAO;AACL,sBAAQ,UAAU,IAAI,IAAI;AAAA,YAC5B;AAAA,UACF;AACA,cAAIa,SAAQ,MAAM;AAClB,UAAAA,OAAM,IAAI,IAAI,SAAS;AACvB,iBAAOA;AAAA,QACT;AAAA,MACF;AACA,eAAS,cAAc,MAAM,WAAW,QAAQ;AAC9C,eAAO,SAAU,OAAO,UAAU;AAChC,cAAI;AACJ,cAAI,UAAU,UAAU;AACtB,oBAAQ,SAAS,SAAS,IAAI;AAAA,UAChC,WAAW,UAAU,QAAQ;AAC3B,oBAAQ,SAAS,SAAS;AAAA,UAC5B,WAAW,SAAS,KAAK,GAAG;AAE1B,oBAAQ,QAAQ,MAAM,QAAQ,IAAI,CAAC,SAAS,SAAS,IAAI,QAAQ,CAAC;AAAA,UACpE,WAAW,aAAa,KAAK,GAAG;AAC9B,oBAAQ,SAAS,SAAS,IAAI,WAAW,KAAK,IAAI;AAAA,UACpD,OAAO;AACL,oBAAQ;AAAA,UACV;AACA,cAAIA,SAAQ,MAAM;AAClB,UAAAA,OAAM,IAAI,IAAI,EAAE,SAAS,IAAI,IAAI;AACjC,iBAAOA;AAAA,QACT;AAAA,MACF;AACA,eAAS,aAAa,kBAAkB,KAAK;AAC3C,YAAI,YAAY;AAChB,YAAI,cAAc,OAAO,IAAI;AAC7B,eAAO,SAAU,OAAO,SAAS,MAAM;AACrC,cAAI,QAAQ,EAAE,IAAI;AAClB,cAAIyC,SAAQ,MAAM,KAAK,SAAS;AAChC,cAAI,CAACA,UAASA,OAAM,UAAU,OAAO;AAEnC,gBAAI,cAAc,iBAAiB,KAAK;AACxC,YAAAA,SAAQ;AAAA,cACN;AAAA,cACA,OAAO;AAAA,cACP,WAAW,YAAY,KAAK;AAAA,YAC9B;AACA,kBAAM,KAAK,WAAWA,MAAK;AAAA,UAC7B;AACA,cAAI,QAAQA,OAAM,MAAM,MAAM;AAC9B,cAAI,YAAYA,OAAM,UAAU,MAAM;AACtC,cAAI,cAAc,UAAU,OAAO;AACnC,cAAI,YAAY,QAAQ,OAAO;AAC/B,oBAAU,IAAI,UAAU;AACxB,oBAAU,IAAI,UAAU;AACxB,cAAI,WAAW,QAAQ,kBAAkB,WAAW,SAAS;AAE7D,cAAI,KAAK,UAAU,UAAU,KAAK,QAAQ,UAAU,IAAI,IAAI,SAAS;AACrE,cAAI,KAAK,UAAU,WAAW,KAAK,QAAQ,WAAW,IAAI,IAAI,SAAS;AACvE,gBAAM,MAAM,IAAI,IAAI,WAAW;AAC/B,cAAI,aAAa;AACf,kBAAM,UAAU,CAAC,YAAY,GAAG,CAAC,YAAY,CAAC;AAAA,UAChD;AACA,iBAAO;AAAA,QACT;AAAA,MACF;AAGA,eAAS,SAAS,KAAK;AACrB,iBAAS,gBAAgB,OAAO;AAC9B,iBAAO,IAAI,KAAK3D,GAAE,kBAAkB,KAAK,CAAC;AAAA,QAC5C;AACA,YAAI,QAAQ,aAAa,iBAAiB,GAAG;AAC7C,eAAO,SAAU,OAAO,SAAS,MAAM;AACrC,cAAI0C,QAAO,MAAM,OAAO,SAAS,IAAI;AACrC,iBAAO;AAAA,YACL,GAAGA,MAAK,UAAU;AAAA,UACpB;AAAA,QACF;AAAA,MACF;AAGA,eAAS,cAAc,KAAK;AAC1B,YAAI,QAAQ,aAAa,UAAU,GAAG;AACtC,eAAO,SAAU,OAAO,SAAS,MAAM;AACrC,cAAI,WAAW,MAAM,OAAO,SAAS,IAAI;AACzC,iBAAO;AAAA,YACL,QAAQ,SAAS,UAAU;AAAA,UAC7B;AAAA,QACF;AAAA,MACF;AACA,eAAS,oBAAoB,QAAQ,KAAK;AACxC,YAAI,aAAa,IAAI,MAAM,GAAG,CAAC;AAC/B,eAAO,SAAU,OAAO;AACtB,cAAI,GAAG;AACP,cAAI,UAAU,KAAK,MAAM,EAAE,KAAK;AAChC,cAAI,SAAS;AACX,oBAAQ,IAAI,SAAS,QAAQ,OAAO,EAAE,YAAY,UAAU,IAAI;AAChE,gBAAI,QAAQ;AAAA,UACd,OAAO;AACL,gBAAI,KAAK,KAAK;AACd,oBAAQ;AAAA,UACV;AACA,cAAI,UAAU,GAAG;AACf,mBAAO;AAAA,cACL,WAAW,eAAe,EAAE,IAAI,MAAM,EAAE,IAAI;AAAA,YAC9C;AAAA,UACF;AACA,iBAAO;AAAA,YACL,WAAW,eAAe,EAAE,IAAI,MAAM,EAAE,IAAI,cAAc,QAAQ;AAAA,UACpE;AAAA,QACF;AAAA,MACF;AACA,eAAS,oBAAoB,WAAW;AACtC,eAAO,SAAS,aAAa,OAAO,GAAG,MAAM;AAC3C,cAAI,MAAM1C,GAAE,IAAI;AAChB,cAAI,IAAI,KAAK,SAAS,MAAM,OAAO;AACjC;AAAA,UACF;AACA,cAAI,KAAK,WAAW,KAAK;AAAA,QAC3B;AAAA,MACF;AACA,eAAS,YAAY,QAAQ,OAAO,OAAO;AACzC,eAAO,MAAM,SAAS;AAAA,MACxB;AACA,eAAS,aAAa;AACpB,eAAO,KAAK,MAAM,OAAO;AAAA,MAC3B;AACA,eAAS,cAAc,SAAS;AAC9B,YAAI,SAAS,CAAC;AAId,YAAIgG,UAAS,QAAQ;AACrB,YAAI,OAAOA,YAAW,UAAU;AAC9B,iBAAO,QAAQ,IAAIA;AACnB,iBAAO,MAAM,IAAIA;AAAA,QACnB;AAGA,YAAI,gBAAgB,QAAQ;AAC5B,YAAI,kBAAkB,QAAW;AAC/B,0BAAgB,QAAQ,gBAAgB;AAAA,QAC1C;AACA,YAAI,kBAAkB,QAAW;AAC/B,0BAAgB,QAAQ;AAAA,QAC1B;AACA,YAAI,kBAAkB,QAAW;AAC/B,iBAAO,gBAAgB,IAAI;AAC3B,iBAAO,cAAc,IAAI;AAAA,QAC3B;AACA,eAAO;AAAA,MACT;AACA,eAAS,YAAY,KAAK;AACxB,YAAI,MAAM;AACV,YAAI,QAAQ,IAAI;AAChB,YAAI,MAAM,IAAI,SAAS,YAAY,MAAM,cAAc,GAAG,IAAI,MAAM,eAAe,GAAG;AACtF,eAAO,UAAU,MAAM;AAAA,MACzB;AACA,UAAI,eAAe;AAAA,QACjB,WAAW;AAAA,UACT,KAAK;AAAA,QACP;AAAA,QACA,WAAW;AAAA,UACT,KAAK;AAAA,QACP;AAAA,QACA,WAAW;AAAA,UACT,KAAK;AAAA,QACP;AAAA,QACA,cAAc;AAAA,UACZ,KAAK;AAAA,QACP;AAAA,QACA,YAAY;AAAA,UACV,KAAK;AAAA,QACP;AAAA,QACA,cAAc;AAAA,UACZ,KAAK;AAAA,QACP;AAAA,QACA,UAAU;AAAA,UACR,KAAK;AAAA,QACP;AAAA,QACA,SAAS;AAAA,UACP,KAAK;AAAA,QACP;AAAA,QACA,SAAS;AAAA,UACP,KAAK;AAAA,QACP;AAAA,QACA,qBAAqB;AAAA,UACnB,KAAK;AAAA,QACP;AAAA,QACA,mBAAmB;AAAA,UACjB,KAAK;AAAA,QACP;AAAA,QACA,kBAAkB;AAAA,UAChB,KAAK;AAAA,QACP;AAAA,QACA,gBAAgB;AAAA,UACd,KAAK;AAAA,QACP;AAAA,QACA,2BAA2B;AAAA,UACzB,KAAK;AAAA,QACP;AAAA,QACA,MAAM;AAAA,UACJ,KAAK,oBAAoB,MAAM;AAAA,QACjC;AAAA,QACA,WAAW;AAAA,UACT,KAAK,oBAAoB,YAAY;AAAA,QACvC;AAAA,QACA,QAAQ;AAAA,UACN,SAAS;AAAA,UACT,KAAK,SAAUC,SAAQ;AACrB,mBAAO,UAAU,KAAK,MAAM,aAAaA,OAAM,IAAI;AAAA,UACrD;AAAA,QACF;AAAA,QACA,MAAM;AAAA,UACJ,SAAS;AAAA,UACT,KAAK;AAAA,QACP;AAAA,QACA,QAAQ;AAAA,UACN,SAAS;AAAA,UACT,KAAK;AAAA,QACP;AAAA,QACA,cAAc;AAAA,UACZ,SAAS;AAAA,UACT,KAAK,SAAU,QAAQ,SAAS,MAAM,OAAO;AAC3C,qBAAS,OAAO,cAAc,KAAK,GAAG,MAAM;AAC5C,mBAAO;AAAA,cACL,gBAAgB,UAAU,KAAK,MAAM,aAAa,MAAM,IAAI;AAAA,YAC9D;AAAA,UACF;AAAA,QACF;AAAA,QACA,cAAc;AAAA,UACZ,SAAS;AAAA,UACT,KAAK,SAAU,QAAQ,SAAS,MAAM,OAAO;AAC3C,qBAAS,OAAO,cAAc,KAAK,GAAG;AAAA,cACpC,aAAa;AAAA,YACf,GAAG,MAAM;AACT,mBAAO;AAAA,cACL,cAAc,UAAU,KAAK,MAAM,aAAa,MAAM,IAAI;AAAA,YAC5D;AAAA,UACF;AAAA,QACF;AAAA,QACA,cAAc;AAAA,UACZ,SAAS;AAAA,UACT,KAAK,SAAU,QAAQ,SAAS,MAAM,OAAO;AAC3C,qBAAS,OAAO,cAAc,KAAK,GAAG,MAAM;AAC5C,mBAAO;AAAA,cACL,cAAc,UAAU,KAAK,MAAM,aAAa,MAAM,IAAI;AAAA,YAC5D;AAAA,UACF;AAAA,QACF;AAAA,QACA,MAAM;AAAA,UACJ,SAAS,SAAU,OAAO,OAAO,OAAO;AACtC,mBAAO,CAAC,MAAM,YAAY,CAAC,cAAc,MAAM,QAAQ;AAAA,UACzD;AAAA,UACA,KAAK,SAAU,MAAM,SAAS,MAAM,OAAO;AACzC,gBAAI,QAAQ,EAAE,IAAI;AAClB,gBAAI,YAAY;AAChB,gBAAItC,SAAQ,MAAM,KAAK,SAAS;AAChC,gBAAI,aAAa,MAAM;AACvB,gBAAI,cAAc,MAAM;AACxB,gBAAI,qBAAqB,MAAM;AAC/B,gBAAI,MAAM,MAAM;AAChB,gBAAI,eAAe,MAAM;AACzB,gBAAI,WAAW,MAAM;AAErB,gBAAI,IAAI,MAAM;AACd,gBAAI,gBAAgB,CAAC,GAAG;AACtB,kBAAI,kBAAkB,GAAG,OAAO;AAAA,YAClC;AAEA,gBAAI,WAAW,MAAM,WAAW,KAAK,MAAM,UAAU;AACrD,gBAAI,gBAAgB,QAAQ,GAAG;AAC7B,yBAAW,kBAAkB,UAAU,OAAO;AAAA,YAChD;AAGA,gBAAI,WAAW,KAAK,UAAU,CAAC,MAAM,YAAY,aAAa,oBAAoB,KAAK,cAAc,UAAU,GAAG,QAAQ,CAAC;AAC3H,gBAAIA,WAAU,UAAaA,WAAU,UAAU;AAI7C,kBAAI,UAAU;AACZ,qBAAK,aAAa,aAAa,QAAQ;AAAA,cACzC;AAEA,kBAAI,WAAW,QAAQ,GAAG;AACxB,oBAAI,eAAe,SAAS;AAC5B,oBAAI,OAAO,iBAAiB,UAAU;AACpC,sBAAI,MAAM,KAAK,eAAe,YAAY;AAC1C,sBAAI,WAAW,IAAI,CAAC;AACpB,sBAAI,oBAAoB,gBAAgB;AACtC,+BAAW,OAAO;AAAA,sBAChB,cAAc,MAAM,SAAS;AAAA,oBAC/B,GAAG,QAAQ;AAAA,kBACb;AAAA,gBACF;AAAA,cACF;AACA,cAAA3D,GAAE,IAAI,EAAE,KAAK,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,cACF,CAAC;AACD,oBAAM,KAAK,WAAW,QAAQ;AAAA,YAChC;AAAA,UACF;AAAA,QACF;AAAA,QACA,UAAU;AAAA,UACR,SAAS;AAAA,UACT,KAAK,SAAU,OAAO,SAAS,MAAM,OAAO;AAC1C,gBAAI,OAAO,CAAC;AAEZ,gBAAI,QAAQ,MAAM,SAAS;AAC3B,gBAAI,aAAa,KAAK,GAAG;AACvB,mBAAK,QAAQ,QAAQ,QAAQ,WAAW,KAAK,IAAI;AAAA,YACnD,WAAW,gBAAgB,KAAK,GAAG;AACjC,mBAAK,QAAQ,OAAO,kBAAkB,OAAO,OAAO,CAAC;AAAA,YACvD,OAAO;AACL,kBAAI,MAAM,UAAU,MAAM;AAExB,qBAAK,QAAQ;AAAA,cACf,WAAW,SAAS,GAAG;AACrB,qBAAK,QAAQ,QAAQ,QAAQ;AAAA,cAC/B,OAAO;AACL,qBAAK,QAAQ;AAAA,cACf;AAAA,YACF;AAEA,gBAAI,SAAS,MAAM,UAAU;AAC7B,gBAAI,aAAa,MAAM,GAAG;AACxB,mBAAK,SAAS,QAAQ,SAAS,WAAW,MAAM,IAAI;AAAA,YACtD,WAAW,gBAAgB,MAAM,GAAG;AAClC,mBAAK,SAAS,OAAO,kBAAkB,QAAQ,OAAO,CAAC;AAAA,YACzD,OAAO;AACL,kBAAI,MAAM,WAAW,MAAM;AAAA,cAG3B,WAAW,UAAU,GAAG;AACtB,qBAAK,SAAS,QAAQ,SAAS;AAAA,cACjC,OAAO;AACL,qBAAK,SAAS;AAAA,cAChB;AAAA,YACF;AAEA,gBAAI;AACJ,gBAAI,OAAO,MAAM;AACjB,gBAAI,SAAS,QAAW;AACtB,qBAAO,MAAM;AAAA,YACf;AACA,gBAAI,SAAS,QAAW;AACtB,kBAAI,cAAc,MAAM,aAAa;AACrC,kBAAI,eAAe,MAAM,WAAW,KAAK,MAAM;AAC/C,4BAAc,YAAY,KAAK,MAAM,MAAM;AAAA,gBACzC,eAAe,MAAM,aAAa,KAAK,MAAM;AAAA,gBAC7C,aAAa,gBAAgB,YAAY,IAAI,kBAAkB,cAAc,OAAO,IAAI;AAAA,gBACxF,eAAe,MAAM,aAAa,KAAK,MAAM;AAAA,gBAC7C,cAAc,MAAM;AAAA,gBACpB,kBAAkB,oBAAoB,QAAQ,MAAM,gBAAgB,IAAI,MAAM;AAAA,cAChF,GAAG;AAAA;AAAA;AAAA,gBAGD,aAAa,KAAK,MAAM;AAAA,gBACxB,UAAU,MAAM;AAAA,gBAChB,QAAQ,MAAM;AAAA,gBACd,WAAW,MAAM;AAAA,gBACjB,cAAc,MAAM;AAAA,gBACpB,gBAAgB,MAAM;AAAA,cACxB,CAAC;AAAA,YACH,OAAO;AACL,4BAAc;AAAA,YAChB;AACA,yBAAa,KAAK,IAAI,KAAK,MAAM,aAAa,SAAS,MAAM,KAAK;AAAA,UACpE;AAAA,QACF;AAAA,QACA,OAAO;AAAA,UACL,SAAS,SAAU,OAAO,MAAM;AAE9B,mBAAO,gBAAgB;AAAA,UACzB;AAAA,UACA,KAAK,SAAU,OAAO,SAAS,MAAM;AACnC,gBAAI,QAAQ,EAAE,IAAI;AAClB,gBAAI,YAAY;AAChB,gBAAI2D,SAAQ,MAAM,KAAK,SAAS;AAChC,gBAAIA,WAAU,UAAaA,WAAU,OAAO;AAC1C,oBAAM,KAAK,WAAW,KAAK;AAC3B,kBAAI,KAAK,YAAY,SAAS;AAE5B,qBAAK,cAAc;AACnB;AAAA,cACF;AAEA,kBAAI,aAAa,KAAK;AACtB,kBAAI,cAAc,WAAW,YAAY,SAAS;AAEhD,2BAAW,cAAc;AAAA,cAC3B,OAAO;AAEL,oBAAI,YAAY,SAAS,gBAAgB,KAAK,cAAc,OAAO;AACnE,0BAAU,cAAc;AACxB,qBAAK,aAAa,WAAW,UAAU;AAAA,cACzC;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,QACA,YAAY;AAAA,UACV,SAAS;AAAA,QACX;AAAA,QACA,oBAAoB;AAAA,UAClB,SAAS;AAAA,QACX;AAAA,QACA,UAAU;AAAA,UACR,SAAS;AAAA,QACX;AAAA,QACA,aAAa;AAAA,UACX,SAAS;AAAA,QACX;AAAA,QACA,KAAK;AAAA,UACH,SAAS;AAAA,QACX;AAAA,QACA,cAAc;AAAA,UACZ,SAAS;AAAA,QACX;AAAA;AAAA,QAEA,MAAM;AAAA,UACJ,KAAK,SAAU,MAAM;AACnB,mBAAO,SAAS,QAAQ,KAAK,OAAO,SAAY,OAAO,KAAK;AAAA,UAC9D;AAAA,QACF;AAAA;AAAA,QAEA,OAAO;AAAA,UACL,SAAS;AAAA,UACT,KAAK,SAAU,QAAQ,SAAS,MAAM;AACpC,cAAE,IAAI,EAAE,IAAI,MAAM;AAAA,UACpB;AAAA,QACF;AAAA,QACA,MAAM;AAAA,UACJ,KAAK,SAAU8B,OAAM,SAAS,MAAM;AAClC,cAAE,IAAI,EAAE,KAAKA,QAAO,EAAE;AAAA,UACxB;AAAA,QACF;AAAA;AAAA,QAEA,OAAO;AAAA,QACP,KAAK;AAAA;AAAA;AAAA,QAGL;AAAA;AAAA;AAAA;AAAA,QAKA,MAAM;AAAA,UACJ,UAAU,gBAAgB,KAAK,SAAS,QAAQ;AAAA,QAClD;AAAA,QACA,MAAM;AAAA,UACJ,UAAU,gBAAgB,KAAK,UAAU,QAAQ;AAAA,QACnD;AAAA;AAAA;AAAA,QAIA,OAAO;AAAA,UACL,UAAU,gBAAgB,KAAK,SAAS,QAAQ;AAAA,QAClD;AAAA,QACA,OAAO;AAAA,UACL,UAAU,gBAAgB,KAAK,UAAU,QAAQ;AAAA,QACnD;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,UAAU;AAAA,UACR,KAAK,WAAW,SAAS,OAAO;AAAA,QAClC;AAAA,QACA,WAAW;AAAA,UACT,KAAK,WAAW,UAAU,QAAQ;AAAA,QACpC;AAAA,QACA,OAAO;AAAA,UACL,KAAK,WAAW,MAAM,OAAO;AAAA,QAC/B;AAAA,QACA,OAAO;AAAA,UACL,KAAK,WAAW,MAAM,QAAQ;AAAA,QAChC;AAAA,QACA,eAAe;AAAA,UACb,KAAK,SAAU,UAAU;AACvB,gBAAI,UAAU,WAAW,UAAU,OAAO;AAC1C,gBAAI,WAAW,WAAW,UAAU,QAAQ;AAC5C,mBAAO,SAAU,OAAO,SAAS;AAC/B,kBAAI5F,MAAK,QAAQ,SAAS,QAAQ,QAAQ,UAAU;AACpD,qBAAOA,IAAG,OAAO,OAAO;AAAA,YAC1B;AAAA,UACF,EAAE,GAAG;AAAA,QACP;AAAA,QACA,mBAAmB;AAAA,UACjB,KAAK,SAAU,OAAO,SAAS;AAC7B,gBAAI,oBAAoB,aAAa,KAAK;AAC1C,oBAAQ,WAAW,KAAK;AACxB,gBAAI,mBAAmB;AACrB,uBAAS;AAAA,YACX;AACA,gBAAI,iBAAiB,KAAK,KAAK,QAAQ,SAAS,QAAQ,SAAS,QAAQ,QAAQ,QAAQ,KAAK;AAC9F,gBAAI;AACJ,gBAAI,SAAS,KAAK,GAAG;AACnB,kBAAI,qBAAqB,SAAS,KAAK,SAAS,GAAG;AACjD,yBAAS,QAAQ;AAAA,cACnB,OAAO;AACL,yBAAS,KAAK,IAAI,QAAQ,gBAAgB,CAAC;AAAA,cAC7C;AAAA,YACF;AACA,mBAAO;AAAA,cACL,GAAG;AAAA,YACL;AAAA,UACF;AAAA,QACF;AAAA,QACA,OAAO;AAAA,UACL,KAAK,WAAW,MAAM,OAAO;AAAA,QAC/B;AAAA,QACA,OAAO;AAAA,UACL,KAAK,WAAW,MAAM,QAAQ;AAAA,QAChC;AAAA;AAAA;AAAA,QAIA,YAAY;AAAA,UACV,QAAQ,cAAc,KAAK,SAAS,OAAO;AAAA,QAC7C;AAAA;AAAA;AAAA,QAIA,YAAY;AAAA,UACV,QAAQ,cAAc,KAAK,UAAU,QAAQ;AAAA,QAC/C;AAAA,QACA,aAAa;AAAA,UACX,QAAQ,SAAU,KAAK,UAAU;AAC/B,mBAAO,MAAM;AAAA,cACX,GAAG,CAAC,SAAS;AAAA,cACb,GAAG,CAAC,SAAS;AAAA,YACf,IAAI;AAAA,cACF,GAAG;AAAA,cACH,GAAG;AAAA,YACL;AAAA,UACF;AAAA,QACF;AAAA,QACA,iBAAiB;AAAA,UACf,KAAK,SAAS;AAAA,YACZ,aAAa;AAAA,UACf,CAAC;AAAA,QACH;AAAA,QACA,gBAAgB;AAAA,UACd,KAAK,SAAS;AAAA,YACZ,aAAa;AAAA,UACf,CAAC;AAAA,QACH;AAAA,QACA,sBAAsB;AAAA,UACpB,KAAK,cAAc;AAAA,YACjB,aAAa;AAAA,UACf,CAAC;AAAA,QACH;AAAA,QACA,qBAAqB;AAAA,UACnB,KAAK,cAAc;AAAA,YACjB,aAAa;AAAA,UACf,CAAC;AAAA,QACH;AAAA;AAAA,QAGA,YAAY;AAAA,UACV,SAAS;AAAA,UACT,KAAK,SAAU,KAAK;AAClB,gBAAI,QAAQ,IAAI;AAChB,gBAAI,UAAU,OAAQ,SAAQ;AAC9B,gBAAI;AACJ,gBAAI,SAAS,KAAK,KAAK,UAAU,GAAG;AAClC,kBAAI;AACJ,kBAAI,QAAQ,GAAG;AACb,0BAAU,KAAK,oBAAoB,IAAI,SAAS;AAAA,cAClD,OAAO;AACL,yBAAS;AAAA,cACX;AACA,kBAAI6C,QAAO,KAAK,cAAc;AAC9B,kBAAI,sBAAsB,KAAK,0BAA0B;AACzD,kBAAI,cAAcA,MAAK,eAAe,QAAQ;AAAA,gBAC5C;AAAA,cACF,CAAC;AACD,kBAAI,cAAcA,MAAK,eAAe,CAAC,QAAQ;AAAA,gBAC7C;AAAA,cACF,CAAC;AACD,kBAAI,eAAe,aAAa;AAC9B,oBAAI,YAAY,CAAC,EAAE,UAAU,IAAI,MAAM,YAAY,CAAC,EAAE,UAAU;AAAA,cAClE;AAAA,YACF;AACA,mBAAO;AAAA,cACL,GAAG,KAAK,KAAK,wBAAwB;AAAA,YACvC;AAAA,UACF;AAAA,QACF;AAAA,QACA,gCAAgC;AAAA,UAC9B,SAAS;AAAA,UACT,KAAK,oBAAoB,sBAAsB;AAAA,YAC7C,QAAQ;AAAA,UACV,CAAC;AAAA,QACH;AAAA,QACA,kCAAkC;AAAA,UAChC,SAAS;AAAA,UACT,KAAK,oBAAoB,sBAAsB;AAAA,YAC7C,QAAQ;AAAA,UACV,CAAC;AAAA,QACH;AAAA,QACA,+BAA+B;AAAA,UAC7B,SAAS;AAAA,UACT,KAAK,oBAAoB,qBAAqB;AAAA,YAC5C,QAAQ;AAAA,UACV,CAAC;AAAA,QACH;AAAA,QACA,iCAAiC;AAAA,UAC/B,SAAS;AAAA,UACT,KAAK,oBAAoB,qBAAqB;AAAA,YAC5C,QAAQ;AAAA,UACV,CAAC;AAAA,QACH;AAAA,MACF;AACA,mBAAa,YAAY,IAAI,aAAa;AAG1C;AAAA,QAAC;AAAA;AAAA,QAED;AAAA;AAAA,QAEA;AAAA;AAAA,QAEA;AAAA,QAAM;AAAA;AAAA,QAEN;AAAA,QAAM;AAAA,QAAM;AAAA,QAAM;AAAA;AAAA,QAElB;AAAA,QAAK;AAAA;AAAA,QAEL;AAAA,QAAM;AAAA;AAAA,MACN,EAAE,QAAQ,SAAU,WAAW;AAC7B,qBAAa,SAAS,IAAI;AAAA,UACxB,SAAS;AAAA,UACT,KAAK,SAAS,iBAAiB,OAAO,SAAS;AAC7C,gBAAI;AACJ,mBAAO,MAAM,CAAC,GAAG,IAAI,SAAS,IAAI,kBAAkB,OAAO,OAAO,GAAG;AAAA,UACvE;AAAA,QACF;AAAA,MACF,CAAC;AAGD;AAAA,QAAC;AAAA,QAAS;AAAA;AAAA,QAEV;AAAA;AAAA,QAEA;AAAA,QAAM;AAAA;AAAA,QAEN;AAAA;AAAA,QAEA;AAAA;AAAA,MACA,EAAE,QAAQ,SAAU,WAAW;AAC7B,qBAAa,SAAS,IAAI;AAAA,UACxB,SAAS;AAAA,UACT,KAAK,SAAS,iBAAiB,OAAO,SAAS;AAC7C,gBAAI;AACJ,mBAAO,MAAM,CAAC,GAAG,IAAI,SAAS,IAAI,KAAK,IAAI,GAAG,kBAAkB,OAAO,OAAO,CAAC,GAAG;AAAA,UACpF;AAAA,QACF;AAAA,MACF,CAAC;AAGD,mBAAa,OAAO,aAAa;AACjC,mBAAa,OAAO,aAAa;AACjC,mBAAa,YAAY,aAAa;AACtC,mBAAa,qBAAqB,aAAa;AAC/C,mBAAa,oBAAoB,aAAa;AAC9C,mBAAa,WAAW,aAAa,WAAW;AAChD,mBAAa,cAAc,aAAa,cAAc;AAItD,mBAAa,QAAQ,aAAa;AAClC,mBAAa,QAAQ,aAAa;AAClC,mBAAa,YAAY,aAAa;AACtC,mBAAa,aAAa,aAAa;AAGvC,mBAAa,OAAO,IAAI,aAAa;AACrC,mBAAa,OAAO,IAAI,aAAa;AACrC,mBAAa,QAAQ,IAAI,aAAa;AACtC,mBAAa,QAAQ,IAAI,aAAa;AACtC,mBAAa,WAAW,IAAI,aAAa;AACzC,mBAAa,YAAY,IAAI,aAAa;AAC1C,mBAAa,aAAa,IAAI,aAAa;AAC3C,mBAAa,aAAa,IAAI,aAAa;AAC3C,UAAI,aAAa;AAKjB,UAAI,OAAO,SAAS,MAAM,OAAO;AAAA;AAAA;AAAA,QAG/B,aAAa,SAAUW,aAAY,SAAS;AAC1C,cAAI6C;AACJ,cAAI,QAAQ7C,eAAc,CAAC;AAC3B,cAAI,OAAO,KAAK,kBAAkB,YAAY;AAE5C,iBAAK,cAAc,MAAM,MAAM,SAAS;AAAA,UAC1C;AACA,eAAK,MAAM,SAAS,GAAG;AACvB,eAAK,aAAa,CAAC;AACnB,cAAI,WAAW,QAAQ,YAAY;AACjC,iBAAK,aAAa,QAAQ;AAAA,UAC5B;AACA,cAAI,WAAW,QAAQ,OAAO;AAC5B,oBAAQ,KAAK,MAAM,OAAO,OAAO,KAAK,CAAC;AAAA,UACzC;AACA,cAAI6C,YAAW,OAAO,MAAM,UAAU,GAAG;AAGvC,oBAAQ,MAAM,CAAC,GAAGA,WAAU,KAAK;AAAA,UAEnC;AACA,eAAK,IAAI,OAAO,OAAO;AACvB,eAAK,UAAU,CAAC;AAChB,eAAK,WAAW,MAAM,MAAM,SAAS;AAAA,QACvC;AAAA,QACA,WAAW,SAAU,IAAI,IAAI,KAAK;AAChC,gBAAM,IAAI,MAAM,mCAAmC;AAAA,QACrD;AAAA,QACA,QAAQ,WAAY;AAClB,cAAIA,YAAW,OAAO,KAAK,YAAY,WAAW,UAAU;AAC5D,cAAI,eAAeA,UAAS,SAAS,CAAC;AACtC,cAAI,QAAQ,KAAK,WAAW;AAC5B,cAAI,aAAa,CAAC;AAIlB,gBAAM,OAAO,SAAU,MAAM,UAAU;AACrC,gBAAI,cAAc,aAAa,QAAQ;AACvC,kBAAM,MAAM,SAAU,OAAO,MAAM;AAGjC,kBAAI,WAAW,KAAK,KAAK,CAAC,MAAM,QAAQ,KAAK,GAAG;AAC9C,sBAAM,OAAO,SAAU,QAAQ,OAAO;AACpC,sBAAI,CAAC,eAAe,CAAC,YAAY,IAAI,KAAK,CAAC,QAAQ,YAAY,IAAI,EAAE,KAAK,GAAG,MAAM,GAAG;AACpF,+BAAW,QAAQ,IAAI,WAAW,QAAQ,KAAK,CAAC;AAChD,qBAAC,WAAW,QAAQ,EAAE,IAAI,MAAM,WAAW,QAAQ,EAAE,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI;AAAA,kBAC7E;AAAA,gBACF,CAAC;AAAA,cACH,WAAW,CAAC,eAAe,CAAC,QAAQ,YAAY,IAAI,GAAG,KAAK,GAAG;AAI7D,2BAAW,QAAQ,IAAI,WAAW,QAAQ,KAAK,CAAC;AAChD,2BAAW,QAAQ,EAAE,IAAI,IAAI;AAAA,cAC/B;AAAA,YACF,CAAC;AAAA,UACH,CAAC;AACD,cAAI7C,cAAa,UAAU,KAAK,KAAK,YAAY,OAAO,CAAC;AACzD,UAAAA,YAAW,QAAQ;AACnB,iBAAOA;AAAA,QACT;AAAA,QACA,YAAY,SAAU,SAAS;AAC7B,cAAI,cAAc,KAAK,eAAe;AACtC,cAAI,CAAC,WAAW,QAAQ,WAAW,MAAM,QAAW;AAClD,iBAAK,IAAI,aAAa,KAAK,WAAW,GAAG;AAAA,cACvC,QAAQ;AAAA,YACV,CAAC;AAAA,UACH;AACA,eAAK,iBAAiB,CAAC;AACvB,eAAK,0BAA0B,CAAC;AAGhC,eAAK,aAAa;AAClB,eAAK,GAAG,gBAAgB,KAAK,cAAc,IAAI;AAAA,QACjD;AAAA,QACA,gBAAgB,WAAY;AAC1B,iBAAO,KAAK,eAAe;AAAA,QAC7B;AAAA,QACA,YAAY,WAAY;AACtB,iBAAO,KAAK;AAAA,QACd;AAAA;AAAA;AAAA;AAAA,QAIA,cAAc,WAAY;AAMxB,cAAI,gBAAgB,KAAK;AAGzB,cAAI,QAAQ,CAAC;AACb,gBAAM,KAAK,IAAI,OAAO,GAAG,SAAU,OAAO,UAAU;AAClD,gBAAI,SAAS,MAAM,MAAM;AAEvB,kBAAI,MAAM,KAAK,OAAO,QAAW;AAC/B,sBAAM,MAAM,KAAK,EAAE,IAAI,MAAM;AAAA,cAC/B,OAAO;AACL,sBAAM,MAAM,IAAI,IAAI;AAAA,kBAClB,IAAI,MAAM;AAAA,gBACZ;AAAA,cACF;AAAA,YACF;AAAA,UACF,CAAC;AAID,cAAI,eAAe,CAAC;AACpB,gBAAM,eAAe,SAAU,MAAMF,KAAI;AACvC,gBAAI,CAAC,MAAMA,GAAE,GAAG;AACd,2BAAaA,GAAE,IAAI;AAAA,YACrB;AAAA,UACF,CAAC;AAGD,cAAI,KAAK,SAAS,CAAC,QAAQ,YAAY,GAAG;AACxC,gBAAI,eAAe,KAAK,MAAM,kBAAkB,MAAM;AAAA,cACpD,SAAS;AAAA,YACX,CAAC;AACD,yBAAa,QAAQ,SAAU,MAAM;AACnC,kBAAI,aAAa,KAAK,IAAI,QAAQ,EAAE,IAAI,GAAG;AACzC,qBAAK,OAAO;AAAA,cACd;AAAA,YACF,CAAC;AACD,gBAAI,gBAAgB,KAAK,MAAM,kBAAkB,MAAM;AAAA,cACrD,UAAU;AAAA,YACZ,CAAC;AACD,0BAAc,QAAQ,SAAU,MAAM;AACpC,kBAAI,aAAa,KAAK,IAAI,QAAQ,EAAE,IAAI,GAAG;AACzC,qBAAK,OAAO;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAGA,eAAK,QAAQ;AAAA,QACf;AAAA,QACA,QAAQ,SAAU,KAAK;AACrB,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAI3B,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,aAAa,IAAI;AACrB,cAAI,CAAC,OAAO;AAEV,gBAAI,YAAY;AACd,yBAAW,OAAO,MAAM,GAAG;AAAA,YAC7B;AACA,mBAAO;AAAA,UACT;AACA,gBAAM,WAAW,QAAQ;AAGzB,cAAI,aAAa,KAAK,cAAc;AACpC,cAAI,YAAY;AACd,uBAAW,QAAQ,MAAM,GAAG;AAAA,UAC9B;AAGA,cAAI,gBAAgB,KAAK,iBAAiB;AAC1C,mBAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,IAAI,GAAG,KAAK;AACpD,gBAAI,QAAQ,cAAc,CAAC;AAC3B,gBAAI,OAAO;AACT,oBAAM,OAAO,GAAG;AAAA,YAClB;AAAA,UACF;AACA,eAAK,QAAQ,UAAU,MAAM,MAAM,WAAW,OAAO,GAAG;AACxD,gBAAM,UAAU,QAAQ;AACxB,iBAAO;AAAA,QACT;AAAA,QACA,SAAS,SAAU,KAAK;AACtB,cAAI,QAAQ,KAAK;AACjB,cAAI,OAAO;AACT,kBAAM,SAAS,OAAO,CAAC,GAAG;AAAA,cACxB,kBAAkB;AAAA,YACpB,CAAC;AACD,gBAAI;AACJ,gBAAI,IAAI,MAAM;AACZ,sBAAQ,KAAK,iBAAiB;AAAA,gBAC5B,MAAM;AAAA,gBACN,cAAc,IAAI,iBAAiB;AAAA,gBACnC,cAAc,IAAI;AAAA,cACpB,CAAC;AACD,oBAAM,QAAQ,IAAI;AAAA,YACpB,OAAO;AACL,sBAAQ,CAAC,IAAI;AAAA,YACf;AACA,gBAAI,cAAc,IAAI,mBAAmB,QAAQ,OAAO,OAAO,SAAU,MAAM;AAC7E,qBAAO,KAAK,EAAE;AAAA,YAChB,CAAC;AACD,gBAAI,OAAO,MAAM,UAAU;AAC3B,gBAAI,IAAI,OAAO,MAAM,SAAS;AAC9B,gBAAI,aAAa,MAAM,IAAI,OAAO;AAClC,gBAAI,eAAe,WAAW,QAAQ,YAAY,CAAC,CAAC,MAAM,WAAW,SAAS,MAAM;AACpF,gBAAI,CAAC,cAAc;AACjB,6BAAe,YAAY,KAAK,SAAU,MAAM9C,QAAO;AACrD,uBAAO,KAAK,EAAE,MAAM,IAAIA;AAAA,cAC1B,CAAC;AAAA,YACH;AACA,gBAAI,cAAc;AAChB,mBAAK,WAAW,UAAU;AAC1B,kBAAI,IAAI,MAAM;AACd,0BAAY,QAAQ,SAAU,MAAMA,QAAO;AACzC,qBAAK,IAAI,KAAK,IAAIA,QAAO,GAAG;AAAA,cAC9B,CAAC;AACD,mBAAK,UAAU,UAAU;AAAA,YAC3B;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,SAAU,KAAK;AACrB,cAAI,QAAQ,KAAK;AACjB,cAAI,OAAO;AACT,kBAAM,SAAS,OAAO,CAAC,GAAG;AAAA,cACxB,kBAAkB;AAAA,YACpB,CAAC;AACD,gBAAI;AACJ,gBAAI,IAAI,MAAM;AACZ,sBAAQ,KAAK,iBAAiB;AAAA,gBAC5B,MAAM;AAAA,gBACN,cAAc,IAAI,iBAAiB;AAAA,gBACnC,cAAc,IAAI;AAAA,cACpB,CAAC;AACD,oBAAM,QAAQ,IAAI;AAAA,YACpB,OAAO;AACL,sBAAQ,CAAC,IAAI;AAAA,YACf;AACA,gBAAI,cAAc,IAAI,mBAAmB,QAAQ,OAAO,OAAO,SAAU,MAAM;AAC7E,qBAAO,KAAK,EAAE;AAAA,YAChB,CAAC;AACD,gBAAI,IAAI,MAAM,UAAU;AACxB,gBAAI,aAAa,MAAM,IAAI,OAAO;AAClC,gBAAI,eAAe,WAAW,QAAQ,YAAY,CAAC,CAAC,MAAM;AAC1D,gBAAI,CAAC,cAAc;AACjB,6BAAe,YAAY,KAAK,SAAU,MAAMA,QAAO;AACrD,uBAAO,KAAK,EAAE,MAAM,IAAIA;AAAA,cAC1B,CAAC;AAAA,YACH;AACA,gBAAI,cAAc;AAChB,mBAAK,WAAW,SAAS;AACzB,mBAAK,MAAM;AACX,0BAAY,QAAQ,SAAU,MAAMA,QAAO;AACzC,qBAAK,IAAI,KAAK,IAAIA,QAAO,GAAG;AAAA,cAC9B,CAAC;AACD,mBAAK,UAAU,SAAS;AAAA,YAC1B;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,SAAUiD,SAAQ,KAAK;AAE7B,cAAIA,YAAW,QAAW;AACxB,mBAAO,KAAK,IAAI,QAAQ;AAAA,UAC1B;AAEA,iBAAO,KAAK,IAAI,UAAUA,SAAQ,GAAG;AAAA,QACvC;AAAA,QACA,OAAO,SAAU,MAAM,KAAK;AAC1B,cAAI,SAAS;AACb,cAAI,QAAQ,MAAM,QAAQ,IAAI,IAAI,OAAO,CAAC,IAAI;AAC9C,cAAI,CAAC,KAAK,SAAS,KAAK,GAAG;AACzB,kBAAM,IAAI,MAAM,kCAAkC;AAAA,UACpD;AACA,cAAI,MAAM,KAAK,SAAU,GAAG;AAC1B,mBAAO,EAAE,WAAW,KAAK,OAAO,OAAO,EAAE,OAAO;AAAA,UAClD,CAAC,GAAG;AACF,kBAAM,IAAI,MAAM,qDAAqD;AAAA,UACvE;AACA,eAAK,YAAY,OAAO,GAAG;AAC3B,iBAAO;AAAA,QACT;AAAA,QACA,SAAS,SAAU,MAAM,KAAK;AAC5B,cAAI,QAAQ,MAAM,QAAQ,IAAI,IAAI,OAAO,CAAC,IAAI;AAC9C,eAAK,cAAc,OAAO,GAAG;AAC7B,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,SAAU,MAAM;AACxB,cAAI,SAAS;AACb,cAAI,QAAQ,MAAM,QAAQ,IAAI,IAAI,OAAO,CAAC,IAAI;AAC9C,iBAAO,MAAM,MAAM,SAAU,GAAG;AAC9B,mBAAO,WAAW,KAAK,CAAC,OAAO,aAAa,CAAC;AAAA,UAC/C,CAAC;AAAA,QACH;AAAA,QACA,aAAa,SAAU,OAAO,KAAK;AACjC,cAAI,SAAS;AACb,cAAI,YAAY;AAChB,eAAK,WAAW,SAAS;AACzB,cAAI,SAAS,OAAO,CAAC,GAAG,KAAK,IAAI,QAAQ,CAAC;AAC1C,gBAAM,QAAQ,SAAU,MAAM;AAE5B,mBAAO,KAAK,OAAO,IAAI,YAAY,MAAM,EAAE,KAAK,EAAE;AAClD,iBAAK,OAAO,OAAO,IAAI,GAAG;AAAA,UAC5B,CAAC;AACD,eAAK,IAAI,UAAU,KAAK,MAAM,GAAG,GAAG;AACpC,eAAK,UAAU,SAAS;AAAA,QAC1B;AAAA,QACA,eAAe,SAAU,OAAO,KAAK;AACnC,cAAI,YAAY;AAChB,eAAK,WAAW,SAAS;AACzB,gBAAM,QAAQ,SAAU,MAAM;AAC5B,mBAAO,KAAK,MAAM,UAAU,GAAG;AAAA,UACjC,CAAC;AACD,eAAK,IAAI,UAAU,QAAQ,MAAM,QAAQ,CAAC,KAAK,IAAI,QAAQ,CAAC,EAAE,OAAO,MAAM,IAAI,SAAU,MAAM;AAC7F,mBAAO,KAAK;AAAA,UACd,CAAC,CAAC,CAAC,GAAG,GAAG;AACT,eAAK,UAAU,SAAS;AAAA,QAC1B;AAAA,QACA,eAAe,WAAY;AAEzB,cAAI,WAAW,KAAK,OAAO;AAC3B,cAAI,QAAQ,KAAK;AACjB,iBAAO,YAAY,SAAS,MAAM,QAAQ,QAAQ,KAAK;AAAA,QACzD;AAAA;AAAA;AAAA;AAAA,QAIA,cAAc,WAAY;AACxB,cAAI,YAAY,CAAC;AACjB,cAAI,CAAC,KAAK,OAAO;AACf,mBAAO;AAAA,UACT;AACA,cAAI,aAAa,KAAK,cAAc;AACpC,iBAAO,YAAY;AACjB,sBAAU,KAAK,UAAU;AACzB,yBAAa,WAAW,cAAc;AAAA,UACxC;AACA,iBAAO;AAAA,QACT;AAAA,QACA,kBAAkB,SAAU,KAAK;AAC/B,gBAAM,OAAO,CAAC;AAMd,cAAI,CAAC,KAAK,OAAO;AACf,mBAAO,CAAC;AAAA,UACV;AACA,cAAI,IAAI,MAAM;AACZ,gBAAI,IAAI,cAAc;AACpB,qBAAO,KAAK,qBAAqB,IAAI,YAAY;AAAA,YACnD,OAAO;AACL,qBAAO,KAAK,qBAAqB,IAAI,YAAY;AAAA,YACnD;AAAA,UACF;AACA,cAAI,cAAc,KAAK,IAAI,QAAQ;AACnC,cAAI,QAAQ,WAAW,GAAG;AACxB,mBAAO,CAAC;AAAA,UACV;AACA,cAAI,QAAQ,YAAY,IAAI,KAAK,MAAM,SAAS,KAAK,KAAK;AAC1D,cAAI,IAAI,cAAc;AACpB,oBAAQ,OAAO,OAAO,SAAU,MAAM;AACpC,qBAAO,KAAK,EAAE;AAAA,YAChB,CAAC;AAAA,UACH;AACA,iBAAO;AAAA,QACT;AAAA,QACA,sBAAsB,SAAU,cAAc;AAC5C,cAAI,QAAQ,CAAC;AACb,cAAI,QAAQ,CAAC;AACb,gBAAM,KAAK,IAAI;AACf,iBAAO,MAAM,SAAS,GAAG;AACvB,gBAAI,UAAU,MAAM,MAAM;AAC1B,kBAAM,KAAK,OAAO;AAClB,gBAAI,gBAAgB,QAAQ,iBAAiB;AAAA,cAC3C;AAAA,YACF,CAAC;AACD,kBAAM,KAAK,MAAM,OAAO,aAAa;AAAA,UACvC;AACA,gBAAM,MAAM;AACZ,iBAAO;AAAA,QACT;AAAA,QACA,sBAAsB,SAAU,cAAc;AAC5C,cAAI,QAAQ,CAAC;AACb,cAAI,QAAQ,CAAC;AACb,gBAAM,KAAK,IAAI;AACf,iBAAO,MAAM,SAAS,GAAG;AACvB,gBAAI,UAAU,MAAM,IAAI;AACxB,kBAAM,KAAK,OAAO;AAClB,gBAAI,gBAAgB,QAAQ,iBAAiB;AAAA,cAC3C;AAAA,YACF,CAAC;AAID,qBAAS,IAAI,cAAc,SAAS,GAAG,KAAK,GAAG,EAAE,GAAG;AAClD,oBAAM,KAAK,cAAc,CAAC,CAAC;AAAA,YAC7B;AAAA,UACF;AACA,gBAAM,MAAM;AACZ,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,SAAU,MAAM,KAAK;AACjC,cAAI,SAAS,SAAS,IAAI,IAAI,OAAO,KAAK;AAC1C,cAAI,WAAW,KAAK,OAAO;AAC3B,gBAAM,OAAO;AAAA,YACX,MAAM;AAAA,UACR,GAAG,GAAG;AAGN,cAAI,KAAK,SAAS,IAAI,MAAM;AAC1B,mBAAO,UAAU;AACf,kBAAI,aAAa,QAAQ;AACvB,uBAAO;AAAA,cACT;AACA,yBAAW,KAAK,MAAM,QAAQ,QAAQ,EAAE,OAAO;AAAA,YACjD;AACA,mBAAO;AAAA,UACT,OAAO;AAGL,mBAAO,aAAa;AAAA,UACtB;AAAA,QACF;AAAA;AAAA,QAEA,YAAY,WAAY;AACtB,iBAAO,CAAC,CAAC,KAAK,OAAO;AAAA,QACvB;AAAA;AAAA;AAAA;AAAA,QAIA,OAAO,SAAU,KAAK;AACpB,gBAAM,OAAO,CAAC;AACd,cAAI,CAAC,IAAI,MAAM;AAGb,gBAAIC,SAAQ,SAAS,MAAM,UAAU,MAAM,MAAM,MAAM,SAAS;AAEhE,YAAAA,OAAM,IAAI,KAAK,eAAe,GAAG,KAAK,WAAW,CAAC;AAElD,YAAAA,OAAM,MAAM,QAAQ;AAGpB,YAAAA,OAAM,MAAM,QAAQ;AACpB,mBAAOA;AAAA,UACT,OAAO;AAIL,mBAAO,QAAQ,WAAW,CAAC,IAAI,EAAE,OAAO,KAAK,iBAAiB;AAAA,cAC5D,MAAM;AAAA,YACR,CAAC,CAAC,CAAC,CAAC;AAAA,UACN;AAAA,QACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAYA,MAAM,SAAUa,QAAO,OAAO,KAAK;AACjC,cAAI,QAAQ;AACZ,cAAI,YAAY,SAASA,MAAK;AAC9B,cAAI,aAAa,MAAM,QAAQA,MAAK,GAAG;AAIrC,gBAAI,UAAU,SAAS,GAAG;AACxB,kBAAI1B;AACJ,kBAAI;AACJ,kBAAI,WAAW;AACb,gBAAAA,QAAO0B;AACP,4BAAY1B,MAAK,MAAM,GAAG;AAAA,cAC5B,OAAO;AACL,gBAAAA,QAAO0B,OAAM,KAAK,KAAK;AACvB,4BAAYA,OAAM,MAAM;AAAA,cAC1B;AACA,kBAAI3C,YAAW,UAAU,CAAC;AAC1B,kBAAI,kBAAkB,UAAU;AAChC,kBAAI,YAAY,OAAO,CAAC;AACxB,wBAAU,eAAeiB;AACzB,wBAAU,gBAAgB;AAC1B,wBAAU,oBAAoB;AAC9B,kBAAI,EAAE,aAAa,YAAY;AAC7B,0BAAU,UAAU;AAAA,cACtB;AACA,kBAAI,SAAS,CAAC;AAKd,kBAAI,cAAc;AAClB,kBAAI,eAAejB;AACnB,uBAAS,IAAI,GAAG,IAAI,iBAAiB,KAAK;AACxC,oBAAI,WAAW,UAAU,CAAC;AAC1B,oBAAI,eAAe,OAAO,SAAS,YAAY,OAAO,QAAQ,IAAI,QAAQ;AAC1E,8BAAc,YAAY,YAAY,IAAI,eAAe,CAAC,IAAI,CAAC;AAC/D,+BAAe;AAAA,cACjB;AAGA,uBAAS,UAAU,QAAQ,WAAW,OAAO,GAAG;AAChD,kBAAI,iBAAiB,MAAM,CAAC,GAAG,KAAK,UAAU;AAG9C,wBAAU,WAAW,YAAY,gBAAgBiB,OAAM,GAAG;AAG1D,kBAAIW,cAAa,MAAM,gBAAgB,MAAM;AAE7C,qBAAO,KAAK,IAAI5B,WAAU4B,YAAW5B,SAAQ,GAAG,SAAS;AAAA,YAC3D,OAAO;AACL,qBAAO,UAAU,KAAK,YAAY2C,QAAO,KAAK;AAAA,YAChD;AAAA,UACF;AACA,cAAI,UAAU,SAAS,CAAC;AAExB,kBAAQ,eAAe;AACvB,kBAAQ,gBAAgBA;AACxB,kBAAQ,oBAAoB,CAAC;AAC7B,cAAI,EAAE,aAAa,UAAU;AAC3B,oBAAQ,UAAU;AAAA,UACpB;AAGA,cAAI,oBAAoB,CAAC;AACzB,mBAAS,OAAOA,QAAO;AAErB,gBAAI,MAAM,MAAM,CAAC,GAAG;AAAA,cAClB,cAAc,KAAK,WAAW,GAAG;AAAA,YACnC,GAAG;AAAA,cACD,cAAcA,OAAM,GAAG;AAAA,YACzB,CAAC;AACD,gBAAI,eAAe,IAAI;AACvB,8BAAkB,GAAG,IAAI;AAAA,UAC3B;AACA,iBAAO,KAAK,IAAI,mBAAmB,OAAO;AAAA,QAC5C;AAAA;AAAA,QAEA,YAAY,SAAU1B,OAAM,KAAK;AAC/B,gBAAM,OAAO,CAAC;AACd,cAAI,YAAY,MAAM,QAAQA,KAAI,IAAIA,QAAOA,MAAK,MAAM,GAAG;AAK3D,cAAIjB,YAAW,UAAU,CAAC;AAC1B,cAAIA,cAAa,SAAS;AACxB,gBAAI,QAAQ;AAAA,UACd;AACA,cAAI,UAAU,WAAW,GAAG;AAE1B,mBAAO,KAAK,MAAMiB,OAAM,GAAG;AAAA,UAC7B;AAGA,cAAI,aAAa,UAAU,MAAM,CAAC;AAClC,cAAI,gBAAgB,KAAK,IAAIjB,SAAQ;AACrC,cAAI,kBAAkB,UAAa,kBAAkB,MAAM;AACzD,mBAAO;AAAA,UACT;AACA,0BAAgB,UAAU,aAAa;AACvC,sBAAY,eAAe,YAAY,GAAG;AAC1C,iBAAO,KAAK,IAAIA,WAAU,eAAe,GAAG;AAAA,QAC9C;AAAA;AAAA,QAEA,MAAM,SAAU,OAAO,OAAO,KAAK;AACjC,cAAI,OAAO,MAAM,KAAK,SAAS;AAC/B,cAAI,KAAK,WAAW,GAAG;AACrB,mBAAO,KAAK,IAAI,OAAO;AAAA,UACzB;AACA,cAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,iBAAK,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,KAAK;AAAA,UAClC,WAAW,SAAS,KAAK,GAAG;AAG1B,iBAAK,CAAC,IAAI,WAAW;AAAA,UACvB,OAAO;AACL,iBAAK,CAAC,IAAI;AAAA,cACR,SAAS;AAAA,YACX;AAAA,UACF;AACA,iBAAO,KAAK,KAAK,MAAM,MAAM,IAAI;AAAA,QACnC;AAAA;AAAA,QAEA,YAAY,SAAUiB,OAAM,KAAK;AAC/B,cAAI,MAAM,QAAQA,KAAI,GAAG;AACvB,mBAAO,KAAK,WAAW,CAAC,OAAO,EAAE,OAAOA,KAAI,CAAC;AAAA,UAC/C;AACA,iBAAO,KAAK,WAAW,WAAWA,OAAM,GAAG;AAAA,QAC7C;AAAA,QACA,YAAY,SAAUA,OAAM,OAAO,KAAK,OAAO;AAC7C,cAAI,SAAS;AACb,kBAAQ,SAAS;AACjB,cAAIwD,YAAW;AAAA,YACb,UAAU;AAAA,YACV,OAAO;AAAA,YACP,gBAAgB,OAAO;AAAA,YACvB,eAAe,YAAY;AAAA,UAC7B;AACA,gBAAM,OAAOA,WAAU,GAAG;AAC1B,cAAI,iBAAiB;AACrB,cAAI;AACJ,cAAI,SAAS,SAAU,SAAS;AAC9B,gBAAI/C,KAAI,UAAU;AAClB,6BAAiB,kBAAkB;AACnC,uBAAW;AACX,uBAAW,UAAU,IAAI;AACzB,gBAAI,WAAW,GAAG;AAChB,mBAAK,eAAeT,KAAI,IAAIS,MAAK,UAAU,MAAM;AAAA,YACnD,OAAO;AACL,yBAAW;AACX,qBAAO,KAAK,eAAeT,KAAI;AAAA,YACjC;AACA,4BAAgB,sBAAsB,IAAI,eAAe,QAAQ,CAAC;AAClE,gBAAI,eAAeS;AACnB,iBAAK,KAAKT,OAAM,eAAe,GAAG;AAClC,gBAAI,CAACS,KAAI;AACP,mBAAK,QAAQ,kBAAkB,MAAMT,KAAI;AAAA,YAC3C;AAAA,UACF,EAAE,KAAK,IAAI;AACX,cAAI,MAAM;AACV,cAAI,0BAA0B,IAAI;AAClC,cAAI;AACJ,cAAI,YAAY,SAAU,UAAU;AAClC,gBAAI,wBAAwBA,KAAI,GAAG;AACjC,sCAAwBA,KAAI,IAAI,QAAQ,wBAAwBA,KAAI,GAAG,SAAS;AAChF,kBAAI,wBAAwBA,KAAI,EAAE,WAAW,GAAG;AAC9C,uBAAO,wBAAwBA,KAAI;AAAA,cACrC;AAAA,YACF;AACA,mBAAO,uBAAuBA,OAAM,KAAK;AACzC,oCAAwB,IAAI,cAAc,UAAU,OAAO,YAAYA,OAAM,KAAK,GAAG,KAAK;AAC1F,mBAAO,eAAeA,KAAI,IAAI,UAAU,QAAQ;AAChD,mBAAO,QAAQ,oBAAoB,QAAQA,KAAI;AAAA,UACjD;AACA,sBAAY,WAAW,WAAW,IAAI,OAAO,MAAM;AACnD,kCAAwBA,KAAI,MAAM,wBAAwBA,KAAI,IAAI,CAAC;AACnE,kCAAwBA,KAAI,EAAE,KAAK,SAAS;AAC5C,iBAAO;AAAA,QACT;AAAA,QACA,gBAAgB,WAAY;AAC1B,iBAAO,MAAM,OAAO,KAAK,KAAK,cAAc,GAAG,OAAO,KAAK,KAAK,uBAAuB,CAAC;AAAA,QAC1F;AAAA,QACA,0BAA0B,SAAUA,OAAM,OAAO;AAC/C,cAAI,UAAU,OAAQ,SAAQ;AAC9B,cAAI,MAAM;AACV,cAAI,0BAA0B,IAAI;AAClC,cAAI,4BAA4B,OAAQ,2BAA0B,CAAC;AACnE,cAAI,cAAc,OAAO,KAAK,uBAAuB;AACrD,cAAIA,OAAM;AACR,gBAAI,YAAYA,MAAK,MAAM,KAAK;AAChC,0BAAc,YAAY,OAAO,SAAU,KAAK;AAC9C,qBAAO,QAAQ,WAAW,IAAI,MAAM,KAAK,EAAE,MAAM,GAAG,UAAU,MAAM,CAAC;AAAA,YACvE,CAAC;AAAA,UACH;AACA,sBAAY,QAAQ,SAAU,KAAK;AACjC,gBAAI,gBAAgB,wBAAwB,GAAG;AAE/C,0BAAc,QAAQ,SAAU,cAAc;AAC5C,qBAAO,aAAa,YAAY;AAAA,YAClC,CAAC;AACD,mBAAO,wBAAwB,GAAG;AAAA,UAEpC,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,QACA,wBAAwB,SAAS,uBAAuBA,OAAM,OAAO;AACnE,cAAI,SAAS;AACb,cAAI,UAAU,OAAQ,SAAQ;AAC9B,cAAI,MAAM;AACV,cAAI,iBAAiB,IAAI;AACzB,cAAI,mBAAmB,OAAQ,kBAAiB,CAAC;AACjD,cAAI,cAAc,OAAO,KAAK,cAAc;AAC5C,cAAIA,OAAM;AACR,gBAAI,YAAYA,MAAK,MAAM,KAAK;AAChC,0BAAc,YAAY,OAAO,SAAU,KAAK;AAC9C,qBAAO,QAAQ,WAAW,IAAI,MAAM,KAAK,EAAE,MAAM,GAAG,UAAU,MAAM,CAAC;AAAA,YACvE,CAAC;AAAA,UACH;AACA,sBAAY,QAAQ,SAAU,KAAK;AACjC,gBAAI,eAAe,eAAe,GAAG;AAErC,wBAAY,YAAY;AACxB,mBAAO,eAAe,GAAG;AACzB,mBAAO,QAAQ,kBAAkB,QAAQ,GAAG;AAAA,UAC9C,CAAC;AAAA,QACH;AAAA,QACA,iBAAiB,SAAUA,OAAM,OAAO;AACtC,cAAI,UAAU,OAAQ,SAAQ;AAC9B,eAAK,yBAAyBA,OAAM,KAAK;AACzC,eAAK,uBAAuBA,OAAM,KAAK;AACvC,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,OAAO,SAAU,OAAO,KAAK;AAC3B,gBAAM,QAAQ,MAAM,GAAG;AACvB,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,UAAU,SAAU,OAAO;AACzB,iBAAO,MAAM,gBAAgB,IAAI;AAAA,QACnC;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,WAAY;AAClB,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,MAAM,KAAK;AAC/B,cAAI,KAAK,OAAO;AACd,iBAAK,MAAM,WAAW,MAAM,OAAO,CAAC,GAAG,KAAK;AAAA,cAC1C,MAAM;AAAA,YACR,CAAC,CAAC;AAAA,UACJ;AACA,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,MAAM,KAAK;AAC9B,cAAI,KAAK,OAAO;AACd,iBAAK,MAAM,UAAU,MAAM,OAAO,CAAC,GAAG,KAAK;AAAA,cACzC,MAAM;AAAA,YACR,CAAC,CAAC;AAAA,UACJ;AACA,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,SAAUW,aAAY;AACnC,cAAI,OAAO;AACX,cAAI,CAACA,aAAY;AACf,mBAAO;AAAA,UACT;AACA,mBAAS,OAAOA,aAAY;AAC1B,gBAAI,CAACA,YAAW,eAAe,GAAG,KAAK,CAAC,KAAK,WAAW,GAAG,GAAG;AAC5D;AAAA,YACF;AACA,oBAAQA,YAAW,GAAG;AAAA,UACxB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,WAAY;AAEjB,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AAEpB,iBAAO,IAAI,MAAM,GAAG,CAAC;AAAA,QACvB;AAAA,QACA,GAAG,WAAY;AACb,iBAAO,KAAK,IAAI,GAAG,KAAK;AAAA,QAC1B;AAAA,QACA,2BAA2B,WAAY;AAErC,iBAAO,IAAI,MAAM;AAAA,QACnB;AAAA,QACA,SAAS,WAAY;AAEnB,iBAAO,IAAI,KAAK,GAAG,GAAG,GAAG,CAAC;AAAA,QAC5B;AAAA,QACA,6BAA6B,SAAS,4BAA4B,OAAO,GAAG,GAAG;AAC7E,cAAInC,SAAQ,IAAI,MAAM,GAAG,CAAC;AAC1B,cAAI,OAAO;AACT,YAAAA,OAAM,OAAO,KAAK,QAAQ,EAAE,OAAO,GAAG,KAAK;AAAA,UAC7C;AACA,iBAAOA;AAAA,QACT;AAAA,QACA,8BAA8B,SAAS,6BAA6B,GAAG,GAAG;AAExE,iBAAO,KAAK;AAAA,YAA4B,CAAC,KAAK,MAAM;AAAA;AAAA,YAEpD,KAAK,SAAS,EAAE,OAAO,GAAG,CAAC;AAAA,UAAC;AAAA,QAC9B;AAAA,QACA,8BAA8B,SAAS,6BAA6B,GAAG,GAAG;AACxE,iBAAO,KAEN,4BAA4B,KAAK,MAAM,GAAG,GAAG,CAAC,EAE9C,WAAW,KAAK,SAAS,CAAC;AAAA,QAC7B;AAAA,MACF,GAAG;AAAA,QACD,wBAAwB,SAAU,UAAU;AAC1C,cAAI,QAAQ,KAAK;AACjB,cAAI,cAAc;AAClB,iBAAO,SAAS,MAAM,QAAQ,KAAK,YAAY,QAAQ;AAAA,QACzD;AAAA,QACA,QAAQ,SAAU,MAAMgF,WAAU,YAAY,aAAa;AACzD,uBAAa,OAAO;AAAA,YAClB,UAAU,aAAa;AAAA,cACrB;AAAA,YACF,GAAGA,WAAU,KAAK,UAAU,QAAQ;AAAA,UACtC,GAAG,UAAU;AACb,cAAIC,QAAO,KAAK,OAAO,YAAY,WAAW;AAG9C,cAAI,OAAO,UAAU,eAAe,MAAM,OAAO,QAAQ,GAAG;AAC1D,sBAAU,MAAM,QAAQ,MAAMA,OAAM,GAAG;AAAA,UACzC;AAEA,iBAAOA;AAAA,QACT;AAAA,MACF,CAAC;AACD,UAAI,WAAW,SAAU,QAAQ,SAAS,SAAS;AACjD,YAAI,SAAS,OAAO,GAAG;AACrB,cAAI,CAAC,SAAS,OAAO,GAAG;AACtB,kBAAM,IAAI,MAAM,uBAAuB,UAAU,GAAG;AAAA,UACtD;AACA,oBAAU,SAAS,OAAO;AAAA,QAC5B;AACA,YAAI,CAAC,WAAW,OAAO,GAAG;AACxB,gBAAM,IAAI,MAAM,6BAA6B;AAAA,QAC/C;AACA,gBAAQ,OAAO,EAAE,QAAQ,SAAU,QAAQ;AACzC,iBAAO,MAAM,IAAI,QAAQ,OAAO,MAAM,CAAC;AAAA,QACzC,CAAC;AAAA,MACH;AACA,UAAI,WAAW;AAAA,QACb,OAAO,SAAUtG,KAAI;AACnB,iBAAO,WAAY;AACjB,gBAAI,OAAO,MAAM,KAAK,SAAS;AAC/B,gBAAI,IAAI,KAAK;AACb,gBAAI,QAAQ,IAAI,KAAK,KAAK,CAAC,KAAK,CAAC;AACjC,gBAAI,MAAM,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC;AACnC,gBAAI,CAAC,MAAM,QAAQ,KAAK,GAAG;AACzB,kBAAI,eAAe,MAAM;AACvB,wBAAQ;AAAA,cACV,WAAW,iBAAiB,MAAM;AAChC,oBAAI,KAAK,SAAS,GAAG;AACnB,uBAAK,IAAI;AAAA,gBACX;AACA,wBAAQ;AAAA,cACV;AAAA,YACF;AACA,gBAAI,eAAe,MAAM;AACvB,oBAAM,CAAC;AAAA,YACT;AACA,mBAAOA,IAAG,KAAK,MAAM,OAAO,GAAG;AAAA,UACjC;AAAA,QACF;AAAA,MACF;AACA,eAAS,IAAI,SAAS;AACpB,YAAI,cAAc,CAAC,GACjB,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,aAAY,GAAG,IAAI,UAAU,MAAM,CAAC;AACtD,YAAI,WAAW,CAAC;AAChB,gBAAQ,QAAQ,SAAU,MAAMQ,QAAO;AACrC,mBAAS,KAAK,IAAI;AAClB,cAAIA,UAAS,aAAa;AACxB,qBAAS,KAAK,YAAYA,MAAK,CAAC;AAAA,UAClC;AAAA,QACF,CAAC;AACD,YAAI,SAAS,mBAAmB,SAAS,KAAK,EAAE,CAAC;AACjD,eAAO;AAAA,MACT;AACA,eAAS,mBAAmB,KAAK;AAC/B,YAAI,SAAS,IAAI,UAAU;AAC3B,YAAI,eAAe,UAAU,IAAI,KAAK,IAAI;AAC1C,YAAI,cAAc,OAAO,gBAAgB,aAAa,QAAQ,MAAM,EAAE,GAAG,iBAAiB;AAC1F,YAAI,YAAY,qBAAqB,aAAa,EAAE,CAAC,GAAG;AACtD,gBAAM,IAAI,MAAM,oBAAoB;AAAA,QACtC;AACA,YAAI+F,YAAW,OAAO,gBAAgB,cAAc,WAAW;AAC/D,YAAI3C,OAAM2C,UAAS,cAAc,KAAK;AACtC,eAAO,MAAM3C,IAAG;AAAA,MAClB;AACA,eAAS,UAAU,MAAM;AACvB,YAAI,aAAa,CAAC;AAClB,YAAI,UAAU,KAAK;AACnB,YAAIJ,cAAa,KAAK;AACtB,YAAI,eAAe,KAAK;AACxB,YAAI,QAAQ,KAAK;AACjB,YAAI,aAAa,KAAK;AACtB,mBAAW,eAAe;AAC1B,mBAAW,UAAU,iBAAiBrD,GAAE,UAAU,QAIhD,QAAQ,YAAY,IAAI;AAC1B,YAAI,eAAe,CAAC;AACpB,iBAAS,IAAI,MAAM,QAAQ,OAAM;AAC/B,cAAI,aAAa,MAAM,CAAC;AACxB,uBAAa,UAAU,IAAI,MAAM,iBAAiB,UAAU;AAAA,QAC9D;AACA,mBAAW,QAAQ;AAGnB,YAAI,oBAAoBqD,YAAW,aAAa,WAAW;AAC3D,YAAI,mBAAmB;AACrB,qBAAW,WAAW,kBAAkB;AACxC,UAAAA,YAAW,gBAAgB,WAAW;AAAA,QACxC;AACA,YAAI,yBAAyBA,YAAW,aAAa,iBAAiB;AACtE,YAAI,wBAAwB;AAC1B,cAAI,iBAAiB,uBAAuB,MAAM,MAAM,GAAG;AAC3D,qBAAW,gBAAgB,eAAe,IAAI,SAAU,GAAG;AACzD,mBAAO,EAAE,KAAK;AAAA,UAChB,CAAC;AACD,UAAAA,YAAW,gBAAgB,iBAAiB;AAAA,QAC9C;AACA,YAAIG,aAAYH,YAAW,aAAa,OAAO;AAC/C,YAAIG,YAAW;AACb,qBAAW,YAAYA,WAAU;AAAA,QACnC;AACA,YAAI,WAAW,CAAC;AAChB,mBAAW,QAAQ,SAAU6C,OAAM;AACjC,kBAAQA,MAAK,UAAU;AAAA,YACrB,KAAK,KAAK,WACR;AACE,kBAAI,cAAcA,MAAK,KAAK,QAAQ,UAAU,GAAG;AACjD,kBAAI,YAAY,KAAK,GAAG;AACtB,yBAAS,KAAK,WAAW;AAAA,cAC3B;AACA;AAAA,YACF;AAAA,YACF,KAAK,KAAK,cACR;AACE,uBAAS,KAAK,UAAUA,KAAI,CAAC;AAC7B;AAAA,YACF;AAAA,YACF;AACE;AAAA,UACJ;AAAA,QACF,CAAC;AACD,YAAI,SAAS,QAAQ;AACnB,qBAAW,WAAW;AAAA,QACxB;AACA,YAAI,YAAY,CAAC;AACjB,cAAM,KAAKhD,WAAU,EAAE,QAAQ,SAAU,eAAe;AACtD,cAAI,OAAO,cAAc;AACzB,cAAI,QAAQ,cAAc;AAC1B,oBAAU,IAAI,IAAI;AAAA,QACpB,CAAC;AACD,YAAI,OAAO,KAAK,SAAS,EAAE,SAAS,GAAG;AACrC,qBAAW,aAAa;AAAA,QAC1B;AACA,eAAO;AAAA,MACT;AACA,eAAS,MAAM,MAAM;AACnB,YAAI,SAAS,CAAC;AACd,cAAM,KAAK,KAAK,QAAQ,EAAE,QAAQ,SAAU,MAAM;AAChD,iBAAO,KAAK,UAAU,IAAI,CAAC;AAAA,QAC7B,CAAC;AACD,eAAO;AAAA,MACT;AACA,UAAI,YAAY;AAAA,QACd,KAAK;AAAA,QACL,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,UAAU;AAAA,QACV,WAAW;AAAA,QACX,aAAa;AAAA,QACb,cAAc;AAAA,QACd,QAAQ;AAAA,MACV;AACA,eAAS,aAAahB,OAAM,UAAU;AACpC,YAAI,IAAI,IAAI,KAAKA,KAAI;AACrB,gBAAQ,UAAU;AAAA,UAChB,KAAK;AACH,kBAAM,IAAI,MAAM,mBAAmB;AAAA;AAAA,UAGrC,KAAK,UAAU;AAAA,UACf,KAAK;AACH,mBAAO,EAAE,WAAW;AAAA,UACtB,KAAK,UAAU;AAAA,UACf,KAAK;AACH,mBAAO,EAAE,YAAY;AAAA,UACvB,KAAK,UAAU;AAAA,UACf,KAAK;AACH,mBAAO,EAAE,UAAU;AAAA,UACrB,KAAK,UAAU;AAAA,UACf,KAAK;AACH,mBAAO,EAAE,aAAa;AAAA;AAAA,UAGxB,KAAK,UAAU;AAAA,UACf,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,EAAE,QAAQ;AAAA,UACnB,KAAK,UAAU;AAAA,UACf,KAAK;AACH,mBAAO,EAAE,SAAS;AAAA,UACpB,KAAK,UAAU;AAAA,UACf,KAAK;AACH,mBAAO,EAAE,WAAW;AAAA,UACtB,KAAK,UAAU;AAAA,UACf,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,EAAE,YAAY;AAAA;AAAA,UAGvB,KAAK,UAAU;AACb,mBAAO,EAAE,OAAO;AAAA;AAAA,UAGlB;AACE,kBAAM,IAAI,MAAM,uBAAuB,QAAQ;AAAA,QACnD;AAAA,MACF;AACA,UAAI,QAAQ;AAAA,QACV;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,UAAU;AAAA,QACV;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,cAAc;AAAA,QACd;AAAA,QACA,KAAK;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,eAAS,mBAAmBnB,QAAO,OAAO,KAAK;AAC7C,YAAI,QAAQA,OAAM,OAAO;AACzB,cAAM,QAAQ,SAAS;AACvB,eAAO,SAAS,CAAC,GAAG,KAAK,KAAK;AAAA,MAChC;AACA,eAAS,WAAW,OAAO,IAAI,IAAI,QAAQ;AACzC,eAAO,MAAM,IAAI,SAAU,MAAMb,QAAOiG,QAAO;AAC7C,cAAI,IAAI,KAAK,SAASjG,SAAQ,OAAOiG,OAAM,MAAM;AAEjD,cAAI,KAAK,MAAM,KAAK,IAAI;AACtB,cAAE,OAAO,KAAK,MAAM,GAAG,KAAK,MAAM,CAAC;AAAA,UACrC;AACA,iBAAO,mBAAmB,EAAE,MAAM,GAAG,GAAG,aAAa,QAAQ,IAAI,CAAC;AAAA,QACpE,GAAG,KAAK,IAAI,EAAE,CAAC;AAAA,MACjB;AACA,eAAS,cAAc,OAAO,QAAQ,YAAY,QAAQ;AACxD,YAAI9D,UAAS,OAAO,OAAO;AAC3B,YAAI,QAAQ,OAAO,QAAQ,OAAO;AAClC,YAAI,KAAK,OAAO,UAAU;AAC1B,YAAIF,WAAU,QAAQ,SAAS,MAAM;AACrC,eAAO,MAAM,IAAI,SAAU,MAAMjC,QAAOiG,QAAO;AAC7C,cAAI,QAAQ,aAAa,OAAOjG,QAAOiG,OAAM,MAAM;AACnD,cAAI,KAAK,GAAG,MAAM,EAAE,OAAO9D,SAAQ,CAAC,KAAK,EAAE,MAAM,OAAO,GAAGA,OAAM;AACjE,cAAI,QAAQ,KAAK,qBAAqB,CAACF,SAAQ,aAAa,EAAE,IAAI;AAGlE,cAAI,KAAK,MAAM,KAAK,IAAI;AACtB,eAAG,OAAO,KAAK,MAAM,GAAG,KAAK,MAAM,CAAC;AAAA,UACtC;AAGA,cAAI,KAAK,IAAI;AACX,eAAG,KAAKE,SAAQ,KAAK,EAAE;AAAA,UACzB;AACA,iBAAO,mBAAmB,GAAG,MAAM,GAAG,OAAO,aAAa,QAAQ,IAAI,CAAC;AAAA,QACzE,CAAC;AAAA,MACH;AACA,eAAS,aAAahB,OAAM,MAAM;AAChC,YAAI,IAAI,KAAK;AACb,YAAI,IAAI,KAAK;AACb,YAAI,QAAQ,KAAK;AACjB,YAAI,aAAa,CAAC,GAAG;AACnB,cAAI,WAAW,CAAC,IAAI,MAAMA,MAAK;AAAA,QACjC,WAAW,gBAAgB,CAAC,GAAG;AAC7B,cAAI,OAAO,kBAAkB,GAAGA,KAAI,CAAC;AAAA,QACvC;AACA,YAAI,aAAa,CAAC,GAAG;AACnB,cAAI,WAAW,CAAC,IAAI,MAAMA,MAAK;AAAA,QACjC,WAAW,gBAAgB,CAAC,GAAG;AAC7B,cAAI,OAAO,kBAAkB,GAAGA,KAAI,CAAC;AAAA,QACvC;AACA,eAAO;AAAA,UACL;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAAA,MACF;AAGA,eAAS,SAASA,OAAM,MAAM;AAC5B,YAAI,MAAM,aAAaA,OAAM,IAAI;AACjC,YAAI,IAAI,IAAI;AACZ,YAAI,IAAI,IAAI;AACZ,eAAO,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC;AAAA,MACjC;AAQA,UAAI,WAAW,SAAU,OAAO,QAAQ;AACtC,eAAO,MAAM,IAAI,SAAU,MAAM;AAC/B,cAAI,iBAAiB,SAAS,QAAQ,IAAI,EAAE,MAAM,EAAE,OAAO;AAC3D,yBAAe,QAAQ,KAAK,SAAS;AACrC,iBAAO;AAAA,QACT,CAAC;AAAA,MACH;AAQA,UAAI,KAAK,SAAU,OAAO,QAAQ,KAAK;AACrC,eAAO,IAAI,GAAG,OAAO,QAAQ,GAAG;AAAA,MAClC;AAQA,UAAI,SAAS,SAAU,OAAO,QAAQ,KAAK;AACzC,YAAI,QAAQ,SAAS,QAAQ,IAAI,SAAS,OAAO,OAAO,CAAC;AACzD,YAAI,MAAM,SAAS,QAAQ,IAAI,OAAO,OAAO,OAAO,CAAC;AACrD,eAAO,WAAW,OAAO,OAAO,KAAK,MAAM;AAAA,MAC7C;AAQA,UAAI,OAAO,SAAU,OAAO,QAAQ,KAAK;AACvC,eAAO,WAAW,OAAO,OAAO,OAAO,GAAG,OAAO,WAAW,GAAG,MAAM;AAAA,MACvE;AAQA,UAAI,QAAQ,SAAU,OAAO,QAAQ,KAAK;AACxC,eAAO,WAAW,OAAO,OAAO,SAAS,GAAG,OAAO,OAAO,GAAG,MAAM;AAAA,MACrE;AAQA,UAAI,MAAM,SAAU,OAAO,QAAQ,KAAK;AACtC,eAAO,WAAW,OAAO,OAAO,OAAO,GAAG,OAAO,SAAS,GAAG,MAAM;AAAA,MACrE;AAQA,UAAI,SAAS,SAAU,OAAO,QAAQ,KAAK;AACzC,eAAO,WAAW,OAAO,OAAO,WAAW,GAAG,OAAO,OAAO,GAAG,MAAM;AAAA,MACvE;AAQA,UAAI,gBAAgB,SAAU,OAAO,QAAQ,KAAK;AAChD,YAAI,aAAa,IAAI,cAAc;AACnC,YAAI,YAAY,IAAI,QAAQ,MAAM,MAAM;AACxC,eAAO,cAAc,OAAO,QAAQ,YAAY,SAAUnB,QAAO;AAC/D,iBAAOA,SAAQ;AAAA,QACjB,CAAC;AAAA,MACH;AAQA,UAAI,YAAY,SAAU,OAAO,QAAQ,KAAK;AAC5C,YAAI,aAAa,IAAI,cAAc;AACnC,YAAI,YAAY,IAAI,QAAQ;AAC5B,eAAO,cAAc,OAAO,QAAQ,YAAY,SAAUA,QAAO,OAAO;AACtE,kBAAQA,SAAQ,MAAM,QAAQ,KAAK;AAAA,QACrC,CAAC;AAAA,MACH;AACA,UAAI,OAAO;AAAA,QACT;AAAA,QACA;AAAA,QACA,MAAM;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,SAAS;AAAA,MACX;AACA,eAAS,gBAAgB,MAAM,MAAM;AAGnC,eAAO,aAAa,CAAC,GAAG,MAAM,MAAM;AAAA,UAClC,GAAG;AAAA,UACH,GAAG;AAAA,UACH,OAAO;AAAA,UACP,OAAO,CAAC;AAAA,QACV,CAAC;AAAA,MACH;AACA,eAAS,cAAc,QAAQ;AAC7B,YAAImC,UAAS,OAAO,OAAO;AAC3B,YAAI,KAAKA,QAAO,MAAM,OAAO,OAAO,CAAC;AACrC,YAAI,KAAKA,QAAO,MAAM,OAAO,WAAW,CAAC;AACzC,YAAI,KAAKA,QAAO,MAAM,OAAO,OAAO,CAAC;AACrC,YAAI,KAAKA,QAAO,MAAM,OAAO,SAAS,CAAC;AACvC,eAAO,CAAC,IAAI,IAAI,IAAI,EAAE;AAAA,MACxB;AACA,eAAS,cAAc,cAAc,QAAQ,YAAY,KAAK;AAC5D,cAAM,SAAS,CAAC,GAAG,KAAK;AAAA,UACtB,QAAQ;AAAA,QACV,CAAC;AACD,YAAI,QAAQ,OAAO,OAAO,EAAE,MAAM,YAAY;AAC9C,YAAI,IAAI,IAAI,GAAG;AACf,YAAI,SAAS,IAAI;AACjB,YAAI,cAAc;AAClB,YAAI,MAAM,cAAc,MAAM;AAC9B,YAAI,eAAe,IAAI,CAAC;AACxB,YAAI,kBAAkB,IAAI,CAAC;AAC3B,YAAI,mBAAmB,IAAI,CAAC;AAC5B,YAAI,gBAAgB,IAAI,CAAC;AACzB,YAAI,QAAQ,mBAAmB,QAAQ,kBAAkB;AACvD,cAAI;AACJ,eAAK;AACL,eAAK;AACL,uBAAa;AAAA,QACf,WAAW,QAAQ,cAAc;AAC/B,eAAK;AACL,eAAK,CAAC;AACN,cAAI,YAAY;AACd,0BAAc;AACd,yBAAa;AACb,gBAAI;AAAA,UACN,OAAO;AACL,yBAAa;AACb,gBAAI;AAAA,UACN;AAAA,QACF,WAAW,QAAQ,eAAe;AAChC,cAAI;AACJ,eAAK,CAAC;AACN,eAAK;AACL,uBAAa;AAAA,QACf,OAAO;AACL,eAAK;AACL,eAAK;AACL,cAAI,YAAY;AACd,0BAAc;AACd,yBAAa;AACb,gBAAI;AAAA,UACN,OAAO;AACL,yBAAa;AACb,gBAAI;AAAA,UACN;AAAA,QACF;AACA,YAAI+D,SAAQ,KAAK;AACjB,eAAO,gBAAgB,KAAK;AAAA,UAC1B,GAAGA,OAAM,EAAE;AAAA,UACX,GAAGA,OAAM,EAAE;AAAA,UACX,OAAO;AAAA,UACP,OAAO;AAAA,YACL,WAAW;AAAA,cACT;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AACA,eAAS,aAAa,cAAc,QAAQ,YAAY,KAAK;AAC3D,cAAM,SAAS,CAAC,GAAG,KAAK;AAAA,UACtB,QAAQ;AAAA,QACV,CAAC;AACD,YAAI,QAAQ,OAAO,OAAO,EAAE,MAAM,YAAY;AAC9C,YAAI,IAAI,IAAI,GAAG;AACf,YAAI,SAAS,IAAI;AACjB,YAAI,cAAc;AAClB,YAAI,MAAM,cAAc,MAAM;AAC9B,YAAI,eAAe,IAAI,CAAC;AACxB,YAAI,kBAAkB,IAAI,CAAC;AAC3B,YAAI,mBAAmB,IAAI,CAAC;AAC5B,YAAI,gBAAgB,IAAI,CAAC;AACzB,YAAI,QAAQ,mBAAmB,QAAQ,kBAAkB;AACvD,cAAI;AACJ,eAAK,CAAC;AACN,eAAK;AACL,uBAAa;AAAA,QACf,WAAW,QAAQ,cAAc;AAC/B,eAAK;AACL,eAAK;AACL,cAAI,YAAY;AACd,0BAAc;AACd,yBAAa;AACb,gBAAI;AAAA,UACN,OAAO;AACL,yBAAa;AACb,gBAAI;AAAA,UACN;AAAA,QACF,WAAW,QAAQ,eAAe;AAChC,cAAI;AACJ,eAAK;AACL,eAAK;AACL,uBAAa;AAAA,QACf,OAAO;AACL,eAAK;AACL,eAAK,CAAC;AACN,cAAI,YAAY;AACd,0BAAc;AACd,yBAAa;AACb,gBAAI;AAAA,UACN,OAAO;AACL,yBAAa;AACb,gBAAI;AAAA,UACN;AAAA,QACF;AACA,YAAIA,SAAQ,KAAK;AACjB,eAAO,gBAAgB,KAAK;AAAA,UAC1B,GAAGA,OAAM,EAAE;AAAA,UACX,GAAGA,OAAM,EAAE;AAAA,UACX,OAAO;AAAA,UACP,OAAO;AAAA,YACL,WAAW;AAAA,cACT;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AACA,eAAS,aAAa,kBAAkB,YAAY,KAAK;AACvD,cAAM,SAAS,CAAC,GAAG,KAAK;AAAA,UACtB,QAAQ;AAAA,QACV,CAAC;AACD,YAAI,SAAS,MAAM,GAAG,CAAC;AACvB,YAAI,QAAQ,CAAC,iBAAiB,MAAM,MAAM;AAC1C,YAAI,cAAc;AAClB,YAAI,SAAS,iBAAiB,MAAM,EAAE,KAAK,QAAQ,IAAI,MAAM,EAAE,WAAW,gBAAgB,EAAE,MAAM;AAClG,YAAI,IAAI;AACR,YAAI;AACJ,aAAK,QAAQ,MAAM,QAAQ,GAAG;AAC5B,uBAAa,aAAa,QAAQ;AAClC,cAAI,CAAC,cAAc,UAAU,MAAM;AACjC,gBAAI;AAAA,UACN;AAAA,QACF,WAAW,QAAQ,QAAQ,QAAQ,KAAK;AACtC,uBAAa;AACb,wBAAc,QAAQ;AAAA,QACxB,OAAO;AACL,uBAAa;AAAA,QACf;AACA,YAAIA,SAAQ,KAAK;AACjB,eAAO,gBAAgB,KAAK;AAAA,UAC1B,GAAGA,OAAM,OAAO,CAAC;AAAA,UACjB,GAAGA,OAAM,OAAO,CAAC;AAAA,UACjB,OAAO,aAAa,cAAc;AAAA,UAClC,OAAO;AAAA,YACL,WAAW;AAAA,cACT;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AACA,UAAI,SAAS,SAAU,eAAe,SAAS,KAAK;AAClD,eAAO,gBAAgB,GAAG;AAAA,MAC5B;AACA,UAAI,SAAS,SAAU,cAAc,QAAQ,KAAK;AAChD,eAAO,gBAAgB,KAAK;AAAA,UAC1B,GAAG;AAAA,UACH,OAAO;AAAA,YACL,WAAW;AAAA,cACT,GAAG;AAAA,cACH,YAAY;AAAA,YACd;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AACA,UAAI,UAAU,SAAU,cAAc,QAAQ,KAAK;AACjD,eAAO,gBAAgB,KAAK;AAAA,UAC1B,GAAG;AAAA,UACH,OAAO;AAAA,YACL,WAAW;AAAA,cACT,GAAG;AAAA,cACH,YAAY;AAAA,YACd;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AACA,UAAI,QAAQ,SAAU,cAAc,QAAQ,KAAK;AAC/C,eAAO,gBAAgB,KAAK;AAAA,UAC1B,GAAG;AAAA,UACH,OAAO;AAAA,YACL,WAAW;AAAA,cACT,GAAG;AAAA,cACH,YAAY;AAAA,YACd;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AACA,UAAI,WAAW,SAAU,cAAc,QAAQ,KAAK;AAClD,eAAO,gBAAgB,KAAK;AAAA,UAC1B,GAAG;AAAA,UACH,OAAO;AAAA,YACL,WAAW;AAAA,cACT,GAAG;AAAA,cACH,YAAY;AAAA,YACd;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AACA,UAAI,kBAAkB,SAAU,cAAc,QAAQ,KAAK;AACzD,eAAO,cAAc,cAAc,QAAQ,MAAM,GAAG;AAAA,MACtD;AACA,UAAI,UAAU,SAAU,cAAc,QAAQ,KAAK;AACjD,eAAO,cAAc,cAAc,QAAQ,OAAO,GAAG;AAAA,MACvD;AACA,UAAI,iBAAiB,SAAU,cAAc,QAAQ,KAAK;AACxD,eAAO,aAAa,cAAc,QAAQ,MAAM,GAAG;AAAA,MACrD;AACA,UAAI,SAAS,SAAU,cAAc,QAAQ,KAAK;AAChD,eAAO,aAAa,cAAc,QAAQ,OAAO,GAAG;AAAA,MACtD;AACA,UAAI,SAAS,SAAU,cAAc,QAAQ,KAAK;AAChD,eAAO,aAAa,aAAa,WAAW,OAAO,OAAO,CAAC,GAAG,OAAO,GAAG;AAAA,MAC1E;AACA,UAAI,iBAAiB,SAAU,cAAc,QAAQ,KAAK;AACxD,eAAO,aAAa,aAAa,WAAW,OAAO,OAAO,CAAC,GAAG,MAAM,GAAG;AAAA,MACzE;AACA,UAAI,YAAY;AAAA,QACd;AAAA,QACA,MAAM;AAAA,QACN,OAAO;AAAA,QACP,KAAK;AAAA,QACL,QAAQ;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAKA,UAAI,OAAO,KAAK,OAAO;AAAA;AAAA,QAErB,QAAQ,CAAC,2DAA2D,2EAA2E,2EAA2E,iDAAiD,uBAAuB,gCAAgC,kCAAkC,yBAAyB,EAAE,KAAK,EAAE;AAAA,QACtY,YAAY,CAAC,yBAAyB,0CAA0C,qBAAqB,gOAAgO,+BAA+B,QAAQ,iDAAiD,8CAA8C,klCAAklC,gCAAgC,QAAQ,MAAM,EAAE,KAAK,EAAE;AAAA,QACplD,kBAAkB;AAAA;AAAA;AAAA;AAAA,QAIlB,cAAc,CAAC,6EAA6E,4DAA4D,uRAAuR,4QAA4Q,iCAAiC,WAAW,MAAM,EAAE,KAAK,EAAE;AAAA,QACtvB,iBAAiB,CAAC,wEAAwE,kFAAkF,MAAM,EAAE,KAAK,EAAE;AAAA;AAAA,QAE3L,cAAc;AAAA;AAAA;AAAA;AAAA,QAId,aAAa;AAAA;AAAA,QAEb,WAAW;AAAA,UACT,cAAc;AAAA;AAAA;AAAA;AAAA,YAIZ,QAAQ,CAAC;AAAA,cACP,SAAS;AAAA,cACT,UAAU;AAAA;AAAA,YACZ,GAAG;AAAA,cACD,SAAS;AAAA,cACT,UAAU;AAAA;AAAA,YACZ,CAAC;AAAA;AAAA;AAAA,YAGD,OAAO;AAAA,cACL,MAAM;AAAA,gBACJ,MAAM;AAAA,gBACN,UAAU;AAAA,gBACV,YAAY;AAAA,gBACZ,YAAY;AAAA,gBACZ,eAAe;AAAA,cACjB;AAAA,cACA,MAAM;AAAA,gBACJ,KAAK;AAAA,gBACL,MAAM;AAAA,gBACN,IAAI;AAAA,gBACJ,IAAI;AAAA,gBACJ,UAAU;AAAA,gBACV,WAAW;AAAA,gBACX,MAAM;AAAA,gBACN,MAAM;AAAA,cACR;AAAA,YACF;AAAA;AAAA;AAAA;AAAA,YAIA,UAAU;AAAA,cACR,UAAU;AAAA,YACZ;AAAA,UACF;AAAA,QACF;AAAA,QACA,UAAU;AAAA,UACR,MAAM;AAAA,UACN,QAAQ,CAAC;AAAA,UACT,QAAQ,CAAC;AAAA,QACX;AAAA,QACA,QAAQ,WAAY;AAClB,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,KAAK;AACzB,iBAAO,KAAK,IAAI;AAAA,YACd,QAAQ;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL;AAAA,YACA,QAAQ;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL;AAAA,UACF,GAAG,GAAG;AAAA,QACR;AAAA,QACA,QAAQ,SAAU,QAAQ,MAAM,KAAK;AAEnC,cAAI,WAAW,QAAW;AACxB,mBAAO,MAAM,KAAK,IAAI,QAAQ,CAAC;AAAA,UACjC;AAGA,cAAI;AACJ,cAAI;AAIJ,cAAI,iBAAiB,kBAAkB;AACvC,cAAI,gBAAgB;AAElB,wBAAY,MAAM,IAAI,KAAK,CAAC;AAC5B,sBAAU,KAAK,OAAO;AACtB,qBAAS;AACT,mBAAO,KAAK,IAAI,UAAU,WAAW,MAAM;AAAA,UAC7C;AAKA,cAAI,kBAAkB,CAAC,cAAc,MAAM;AAC3C,cAAI,iBAAiB;AAEnB,wBAAY,MAAM,IAAI,KAAK,CAAC;AAC5B,sBAAU,IAAI,OAAO;AACrB,sBAAU,IAAI,OAAO;AACrB,qBAAS;AACT,mBAAO,KAAK,IAAI,UAAU,WAAW,MAAM;AAAA,UAC7C;AAKA,sBAAY;AACZ,mBAAS;AACT,iBAAO,KAAK,IAAI,UAAU,WAAW,MAAM;AAAA,QAC7C;AAAA,QACA,QAAQ,SAAU,QAAQ,MAAM,KAAK;AAEnC,cAAI,WAAW,QAAW;AACxB,mBAAO,MAAM,KAAK,IAAI,QAAQ,CAAC;AAAA,UACjC;AAGA,cAAI;AACJ,cAAI;AAIJ,cAAI,iBAAiB,kBAAkB;AACvC,cAAI,gBAAgB;AAElB,wBAAY,MAAM,IAAI,KAAK,CAAC;AAC5B,sBAAU,KAAK,OAAO;AACtB,qBAAS;AACT,mBAAO,KAAK,IAAI,UAAU,WAAW,MAAM;AAAA,UAC7C;AAKA,cAAI,kBAAkB,CAAC,cAAc,MAAM;AAC3C,cAAI,iBAAiB;AAEnB,wBAAY,MAAM,IAAI,KAAK,CAAC;AAC5B,sBAAU,IAAI,OAAO;AACrB,sBAAU,IAAI,OAAO;AACrB,qBAAS;AACT,mBAAO,KAAK,IAAI,UAAU,WAAW,MAAM;AAAA,UAC7C;AAKA,sBAAY;AACZ,mBAAS;AACT,iBAAO,KAAK,IAAI,UAAU,WAAW,MAAM;AAAA,QAC7C;AAAA,QACA,QAAQ,SAAU,MAAM,MAAM,KAAK;AAEjC,cAAI,SAAS,QAAW;AACtB,gBAAIC,UAAS,KAAK,IAAI,QAAQ;AAC9B,gBAAI,CAACA,SAAQ;AACX,kBAAI,KAAK,IAAI,WAAW,GAAG;AACzB,uBAAO;AAAA,kBACL,MAAM;AAAA,gBACR;AAAA,cACF;AACA,qBAAO;AAAA,YACT;AACA,gBAAI,OAAOA,YAAW,UAAU;AAC9B,qBAAO,MAAMA,OAAM;AAAA,YACrB;AACA,mBAAOA;AAAA,UACT;AAGA,cAAI,mBAAmB,OAAO,SAAS,YAAY,OAAO,SAAS;AACnE,cAAI,cAAc,mBAAmB,OAAO;AAAA,YAC1C;AAAA,YACA;AAAA,UACF;AACA,cAAI,WAAW,mBAAmB,OAAO;AACzC,iBAAO,KAAK,IAAI,UAAU,aAAa,QAAQ;AAAA,QACjD;AAAA,QACA,WAAW,SAAU,MAAM,MAAM,KAAK;AAEpC,cAAI,SAAS,QAAW;AACtB,gBAAI,YAAY,KAAK,IAAI,WAAW;AACpC,gBAAI,CAAC,WAAW;AACd,kBAAI,KAAK,IAAI,QAAQ,GAAG;AACtB,uBAAO;AAAA,kBACL,MAAM;AAAA,gBACR;AAAA,cACF;AACA,qBAAO;AAAA,YACT;AACA,gBAAI,OAAO,cAAc,UAAU;AACjC,qBAAO,MAAM,SAAS;AAAA,YACxB;AACA,mBAAO;AAAA,UACT;AAGA,cAAI,sBAAsB,OAAO,SAAS,YAAY,OAAO,SAAS;AACtE,cAAI,iBAAiB,sBAAsB,OAAO;AAAA,YAChD;AAAA,YACA;AAAA,UACF;AACA,cAAI,WAAW,sBAAsB,OAAO;AAC5C,iBAAO,KAAK,IAAI,aAAa,gBAAgB,QAAQ;AAAA,QACvD;AAAA;AAAA;AAAA,QAIA,OAAO,SAAU,KAAK,OAAO,KAAK;AAChC,cAAI,SAAS,KAAK,OAAO;AACzB,gBAAM,SAAS,GAAG,KAAK,QAAQ,OAAO,MAAM,IAAI;AAChD,cAAI,MAAM,GAAG;AACX,kBAAM,OAAO,SAAS;AAAA,UACxB;AAGA,cAAI,UAAU,UAAU,GAAG;AACzB,mBAAO,KAAK,KAAK,CAAC,UAAU,GAAG,CAAC;AAAA,UAClC;AAEA,iBAAO,KAAK,KAAK,CAAC,UAAU,GAAG,GAAG,OAAO,GAAG;AAAA,QAC9C;AAAA,QACA,QAAQ,SAAU,QAAQ,KAAK;AAE7B,cAAI,UAAU,WAAW,GAAG;AAC1B,qBAAS,KAAK,IAAI,QAAQ;AAC1B,gBAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,qBAAO,CAAC;AAAA,YACV;AACA,mBAAO,OAAO,MAAM;AAAA,UACtB;AAEA,cAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,qBAAS,CAAC;AAAA,UACZ;AACA,iBAAO,KAAK,IAAI,UAAU,QAAQ,GAAG;AAAA,QACvC;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,MAAM,KAAK;AACf,cAAI,SAAS,IAAI;AACjB,iBAAO,MAAM,QAAQ,MAAM,KAAK,OAAO,SAAS;AAAA,QAClD;AAAA,QACA,aAAa,SAAU,KAAK,OAAO,KAAK;AACtC,cAAI,CAAC,OAAO;AACV,kBAAM,IAAI,MAAM,6BAA6B;AAAA,UAC/C;AACA,cAAI,SAAS,KAAK,OAAO;AACzB,cAAI,IAAI,OAAO;AACf,gBAAM,SAAS,GAAG,KAAK,QAAQ,OAAO,MAAM,IAAI;AAChD,cAAI,MAAM,GAAG;AACX,kBAAM,IAAI,MAAM;AAAA,UAClB;AACA,iBAAO,OAAO,KAAK,GAAG,KAAK;AAC3B,iBAAO,KAAK,OAAO,QAAQ,GAAG;AAAA,QAChC;AAAA;AAAA;AAAA,QAGA,aAAa,SAAU,OAAO,KAAK;AACjC,iBAAO,KAAK,YAAY,IAAI,OAAO,GAAG;AAAA,QACxC;AAAA,QACA,aAAa,SAAU,KAAK,KAAK;AAC/B,cAAI,SAAS,KAAK,OAAO;AACzB,gBAAM,SAAS,GAAG,KAAK,QAAQ,OAAO,MAAM,IAAI;AAChD,iBAAO,OAAO,KAAK,CAAC;AACpB,iBAAO,KAAK,OAAO,QAAQ,GAAG;AAAA,QAChC;AAAA;AAAA,QAGA,QAAQ,SAAU,KAAK,QAAQ,KAAK;AAClC,cAAI,WAAW,KAAK,SAAS;AAC7B,gBAAM,SAAS,GAAG,KAAK,QAAQ,OAAO,MAAM,IAAI;AAChD,cAAI,MAAM,GAAG;AACX,kBAAM,SAAS,SAAS;AAAA,UAC1B;AAGA,cAAI,UAAU,UAAU,GAAG;AACzB,mBAAO,KAAK,KAAK,CAAC,YAAY,GAAG,CAAC;AAAA,UACpC;AAGA,cAAI,YAAY,KAAK,iBAAiB,MAAM;AAC5C,iBAAO,KAAK,KAAK,CAAC,YAAY,GAAG,GAAG,WAAW,GAAG;AAAA,QACpD;AAAA,QACA,UAAU,SAAU,UAAU,KAAK;AAEjC,cAAI,UAAU,WAAW,GAAG;AAC1B,uBAAW,KAAK,IAAI,UAAU;AAC9B,gBAAI,CAAC,MAAM,QAAQ,QAAQ,GAAG;AAC5B,qBAAO,CAAC;AAAA,YACV;AACA,mBAAO,SAAS,MAAM;AAAA,UACxB;AAGA,cAAI,CAAC,MAAM,QAAQ,QAAQ,GAAG;AAC5B,uBAAW,CAAC;AAAA,UACd;AACA,cAAI,cAAc,CAAC;AACnB,mBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,gBAAI,SAAS,SAAS,CAAC;AACvB,gBAAI,YAAY,KAAK,iBAAiB,MAAM;AAC5C,wBAAY,KAAK,SAAS;AAAA,UAC5B;AACA,iBAAO,KAAK,IAAI,YAAY,aAAa,GAAG;AAAA,QAC9C;AAAA,QACA,cAAc,SAAU,KAAK,QAAQ,KAAK;AACxC,cAAI,CAAC,QAAQ;AACX,kBAAM,IAAI,MAAM,8BAA8B;AAAA,UAChD;AACA,cAAI,WAAW,KAAK,SAAS;AAC7B,cAAI,IAAI,SAAS;AACjB,gBAAM,SAAS,GAAG,KAAK,QAAQ,OAAO,MAAM,IAAI;AAChD,cAAI,MAAM,GAAG;AACX,kBAAM,IAAI,MAAM;AAAA,UAClB;AACA,cAAI,YAAY,KAAK,iBAAiB,MAAM;AAC5C,mBAAS,OAAO,KAAK,GAAG,SAAS;AACjC,iBAAO,KAAK,SAAS,UAAU,GAAG;AAAA,QACpC;AAAA,QACA,cAAc,SAAU,KAAK,KAAK;AAChC,cAAI,WAAW,KAAK,SAAS;AAC7B,gBAAM,SAAS,GAAG,KAAK,QAAQ,OAAO,MAAM,IAAI;AAChD,mBAAS,OAAO,KAAK,CAAC;AACtB,iBAAO,KAAK,SAAS,UAAU,GAAG;AAAA,QACpC;AAAA,QACA,kBAAkB,SAAU,QAAQ;AAGlC,cAAI,kBAAkB,CAAC,cAAc,MAAM;AAC3C,cAAI,iBAAiB;AACnB,mBAAO;AAAA,cACL,GAAG,OAAO;AAAA,cACV,GAAG,OAAO;AAAA,YACZ;AAAA,UACF;AAGA,iBAAO;AAAA,QACT;AAAA;AAAA,QAGA,WAAW,SAAU,IAAI,IAAI,KAAK;AAEhC,gBAAM,OAAO,CAAC;AACd,cAAI,cAAc,IAAI,eAAe,KAAK;AAC1C,cAAI,KAAK;AACT,cAAI,KAAK;AACT,iBAAO,KAAK,cAAc,SAAU,GAAG;AACrC,mBAAO;AAAA,cACL,IAAI,EAAE,KAAK,KAAK;AAAA,cAChB,IAAI,EAAE,KAAK,KAAK;AAAA,YAClB;AAAA,UACF,GAAG,GAAG;AAAA,QACR;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,QAAQ,KAAK;AACpC,iBAAO,KAAK,cAAc,SAAU,GAAG;AACrC,mBAAO,MAAM,CAAC,EAAE,MAAM,IAAI,IAAI,MAAM,EAAE,OAAO;AAAA,UAC/C,GAAG,GAAG;AAAA,QACR;AAAA,QACA,eAAe,SAAU3G,KAAI,KAAK;AAChC,cAAI,CAAC,WAAWA,GAAE,GAAG;AACnB,kBAAM,IAAI,UAAU,uEAAuE;AAAA,UAC7F;AACA,cAAI,QAAQ,CAAC;AACb,cAAI,MAAM,KAAK;AACf,cAAI,SAAS,IAAI;AACjB,cAAI,SAAS,IAAI;AACjB,cAAI,CAAC,OAAO,IAAI;AACd,kBAAM,SAASA,IAAG,MAAM;AAAA,UAC1B;AACA,cAAI,CAAC,OAAO,IAAI;AACd,kBAAM,SAASA,IAAG,MAAM;AAAA,UAC1B;AACA,cAAI,WAAW,KAAK,SAAS;AAC7B,cAAI,SAAS,SAAS,GAAG;AACvB,kBAAM,WAAW,SAAS,IAAIA,GAAE;AAAA,UAClC;AACA,iBAAO,KAAK,IAAI,OAAO,GAAG;AAAA,QAC5B;AAAA,QACA,gBAAgB,WAAY;AAC1B,cAAI,aAAa,KAAK,cAAc;AACpC,cAAI,CAAC,YAAY;AACf,mBAAO,IAAI,MAAM,KAAK,OAAO,CAAC;AAAA,UAChC;AACA,iBAAO,WAAW,0BAA0B,MAAM,QAAQ;AAAA,QAC5D;AAAA,QACA,gBAAgB,WAAY;AAC1B,cAAI,aAAa,KAAK,cAAc;AACpC,cAAI,CAAC,YAAY;AACf,mBAAO,IAAI,MAAM,KAAK,OAAO,CAAC;AAAA,UAChC;AACA,iBAAO,WAAW,0BAA0B,MAAM,QAAQ;AAAA,QAC5D;AAAA,QACA,2BAA2B,WACxB;AACD,iBAAO,KAAK,YAAY,EAAE,QAAQ,GAAG;AAAA,QACvC;AAAA,QACA,aAAa,WAAY;AACvB,cAAI,SAAS,CAAC,KAAK,eAAe,CAAC,EAAE,OAAO,KAAK,SAAS,EAAE,IAAI,KAAK,GAAG,CAAC,KAAK,eAAe,CAAC,CAAC;AAC/F,iBAAO,IAAI,SAAS,MAAM;AAAA,QAC5B;AAAA,QACA,SAAS,WAAY;AACnB,iBAAO,KAAK,YAAY,EAAE,KAAK;AAAA,QACjC;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,cAAI;AACJ,cAAI,KAAK,OAAO;AACd,gBAAI,SAAS,KAAK,iBAAiB;AACnC,gBAAI,SAAS,KAAK,iBAAiB;AACnC,gBAAI,aAAa,KAAK,cAAc;AACpC,gBAAI,UAAU,QAAQ;AACpB,kBAAI,WAAW,UAAU,OAAO,aAAa,MAAM,GAAG;AACpD,4BAAY;AAAA,cACd,WAAW,OAAO,aAAa,MAAM,GAAG;AACtC,4BAAY;AAAA,cACd,OAAO;AACL,4BAAY,KAAK,MAAM,kBAAkB,QAAQ,MAAM;AAAA,cACzD;AAAA,YACF;AACA,gBAAI,eAAe,CAAC,aAAa,UAAU,OAAO,WAAW,KAAK;AAGhE,yBAAW,QAAQ,MAAM,GAAG;AAAA,YAC9B;AACA,gBAAI,WAAW;AACb,wBAAU,MAAM,MAAM,GAAG;AAAA,YAC3B;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,SAAS,SAAU,KAAK;AACtB,gBAAM,OAAO,CAAC;AACd,cAAI,MAAM,KAAK;AACf,cAAI,SAAS,IAAI;AACjB,cAAI,SAAS,IAAI;AACjB,cAAI,WAAW,OAAO;AACtB,cAAI,WAAW,OAAO;AACtB,cAAI,CAAC,YAAY,CAAC,UAAU;AAE1B,mBAAO;AAAA,UACT;AACA,cAAI,OAAO,aAAa;AAKxB,cAAI,CAAC,QAAQ,IAAI,QAAQ,KAAK,OAAO;AACnC,gBAAI,gBAAgB,KAAK,cAAc;AACvC,gBAAI,gBAAgB,KAAK,cAAc;AACvC,mBAAO,cAAc,aAAa,aAAa,KAAK,cAAc,aAAa,aAAa;AAAA,UAC9F;AACA,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,eAAe,WAAY;AACzB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAIwD,cAAa,IAAI;AACrB,cAAI,SAASA,YAAW;AACxB,iBAAO,UAAU,OAAO,MAAM,SAAS,MAAM,QAAQ,OAAO,EAAE,KAAK;AAAA,QACrE;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,OAAO;AACX,cAAI,UAAU,CAAC;AACf,aAAG;AACD,gBAAI,QAAQ,KAAK,EAAE,GAAG;AACpB,qBAAO;AAAA,YACT;AACA,oBAAQ,KAAK,EAAE,IAAI;AACnB,mBAAO,KAAK,cAAc;AAAA,UAC5B,SAAS,QAAQ,KAAK,OAAO;AAC7B,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,eAAe,WAAY;AACzB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAIA,cAAa,IAAI;AACrB,cAAI,SAASA,YAAW;AACxB,iBAAO,UAAU,OAAO,MAAM,SAAS,MAAM,QAAQ,OAAO,EAAE,KAAK;AAAA,QACrE;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,OAAO;AACX,cAAI,UAAU,CAAC;AACf,aAAG;AACD,gBAAI,QAAQ,KAAK,EAAE,GAAG;AACpB,qBAAO;AAAA,YACT;AACA,oBAAQ,KAAK,EAAE,IAAI;AACnB,mBAAO,KAAK,cAAc;AAAA,UAC5B,SAAS,QAAQ,KAAK,OAAO;AAC7B,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,yBAAyB,WAAY;AACnC,cAAI;AACJ,cAAI,KAAK,OAAO;AACd,gBAAI,QAAQ;AAAA,cAAC;AAAA,cAAM,KAAK,iBAAiB;AAAA;AAAA,cAEzC,KAAK,iBAAiB;AAAA;AAAA,YACtB,EAAE,OAAO,SAAU,MAAM;AACvB,qBAAO,CAAC,CAAC;AAAA,YACX,CAAC;AACD,iCAAqB,KAAK,MAAM,kBAAkB,MAAM,KAAK,OAAO,KAAK;AAAA,UAC3E;AACA,iBAAO,sBAAsB;AAAA,QAC/B;AAAA;AAAA,QAEA,0BAA0B,SAAU,MAAM;AACxC,cAAI,SAAS,SAAS,IAAI,KAAK,SAAS,IAAI,IAAI,OAAO,KAAK;AAC5D,cAAI,WAAW,KAAK,wBAAwB;AAC5C,iBAAO,CAAC,CAAC,aAAa,SAAS,OAAO,UAAU,SAAS,aAAa,MAAM;AAAA,QAC9E;AAAA;AAAA,QAEA,kBAAkB,WAAY;AAC5B,cAAI,eAAe,KAAK,IAAI,cAAc,KAAK,KAAK,gBAAgB,CAAC;AACrE,cAAI,QAAQ,CAAC;AACb,gBAAM,SAAS,aAAa,UAAU,KAAK,IAAI,aAAa,KAAK,KAAK;AACtE,gBAAM,WAAW,aAAa;AAC9B,gBAAM,QAAQ,aAAa;AAC3B,gBAAM,OAAO,aAAa;AAC1B,iBAAO;AAAA,QACT;AAAA,MACF,GAAG;AAAA,QACD,WAAW,SAAU,GAAG,GAAG;AACzB,cAAI,aAAa,EAAE,SAAS,EAAE,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE;AACpD,iBAAO,EAAE,OAAO,EAAE,MAAM;AAAA,QAC1B;AAAA,MACF,CAAC;AACD,UAAI,WAAW,SAAUT,OAAM;AAC7B,YAAI,aAAa,UAAUA,KAAI,KAAK,CAAC;AACrC,aAAK,QAAQ,CAAC;AACd,aAAK,SAAS,CAAC;AACf,aAAK,sBAAsB;AAC3B,aAAK,2BAA2B;AAChC,aAAK,MAAM,UAAU;AAAA,MACvB;AACA,eAAS,YAAY;AAAA,QACnB,UAAU,WAAY;AACpB,iBAAO,KAAK;AAAA,QACd;AAAA,QACA,UAAU,SAAU,MAAM;AACxB,iBAAO,KAAK,OAAO,IAAI,KAAK,CAAC;AAAA,QAC/B;AAAA,QACA,iBAAiB,SAAU,WAAW;AACpC,iBAAO,KAAK,MAAM,OAAO,SAAU,MAAM;AACvC,mBAAO,KAAK,UAAU;AAAA,UACxB,CAAC;AAAA,QACH;AAAA,QACA,sBAAsB,SAAU,WAAW,QAAQ;AACjD,cAAI,QAAQ,KAAK,SAAS,SAAS;AACnC,cAAI,QAAQ,KAAK,gBAAgB,SAAS;AAC1C,cAAI,gBAAgB,MAAM,YAAY,CAAC;AACvC,cAAI,oBAAoB,cAAc;AACtC,cAAI,YAAY,KAAK;AACrB,cAAI,CAAC,UAAU,iBAAiB,GAAG;AACjC,gCAAoB;AAAA,UACtB;AACA,cAAI,YAAY,cAAc,QAAQ,CAAC;AACvC,cAAI,YAAY,MAAM,IAAI,SAAU,MAAM;AACxC,mBAAO,QAAQ,KAAK,YAAY,KAAK,SAAS;AAAA,UAChD,CAAC;AACD,cAAI,2BAA2B,UAAU,iBAAiB,EAAE,WAAW,QAAQ,SAAS;AACxF,cAAI,cAAc;AAAA,YAChB;AAAA,YACA,QAAQ,CAAC;AAAA,UACX;AACA,kBAAQ,wBAAwB,EAAE,OAAO,SAAU,KAAK,oBAAoBvC,QAAO;AACjF,gBAAI,OAAO,IAAI,MAAMA,MAAK;AAC1B,gBAAI,OAAO,KAAK;AAAA,cACd,QAAQ,KAAK;AAAA,cACb;AAAA,cACA,qBAAqB,KAAK,oBAAoB,MAAM,MAAM,kBAAkB,GAAG,MAAM;AAAA,cACrF,WAAW,KAAK;AAAA,cAChB,UAAU,KAAK;AAAA,cACf,WAAW,KAAK,MAAM;AAAA,YACxB,CAAC;AACD,mBAAO;AAAA,UACT,EAAE,KAAK,IAAI,GAAG,WAAW;AACzB,iBAAO,YAAY;AAAA,QACrB;AAAA,QACA,qBAAqB,SAAU,MAAM,cAAc,QAAQ;AACzD,cAAI,YAAY,KAAK;AACrB,cAAI,gBAAgB,KAAK,MAAM,SAAS,QAAQ;AAChD,cAAI,UAAU,aAAa,GAAG;AAC5B,mBAAO,UAAU,aAAa,EAAE,cAAc,QAAQ,KAAK,MAAM,SAAS,IAAI;AAAA,UAChF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAUuC,OAAM;AAErB,cAAI,WAAWA,MAAK,MAAM,GAAG;AAC3B,gBAAI,SAAS,OAAO,KAAKA,MAAK,MAAM;AACpC,qBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,IAAI,GAAG,KAAK;AAC7C,kBAAI,MAAM,OAAO,CAAC;AAClB,mBAAK,OAAO,GAAG,IAAI,KAAK,eAAeA,MAAK,OAAO,GAAG,CAAC;AAAA,YACzD;AAAA,UACF;AAGA,cAAI,QAAQ,QAAQA,MAAK,KAAK;AAC9B,mBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,iBAAK,MAAM,KAAK,KAAK,cAAc,MAAM,CAAC,CAAC,CAAC;AAAA,UAC9C;AAAA,QACF;AAAA,QACA,gBAAgB,SAAU,OAAO;AAC/B,iBAAO,MAAM,OAAO;AAAA,YAClB,UAAU,KAAK,aAAa,MAAM,UAAU,IAAI;AAAA,YAChD,OAAO,KAAK,UAAU,OAAO,IAAI;AAAA,UACnC,CAAC;AAAA,QACH;AAAA,QACA,eAAe,SAAU,MAAM;AAC7B,cAAI,YAAY,OAAO,CAAC,GAAG,IAAI;AAC/B,cAAI,QAAQ,KAAK,SAAS,KAAK,KAAK;AACpC,oBAAU,SAAS,UAAU,UAAU,MAAM;AAC7C,oBAAU,QAAQ,MAAM,CAAC,GAAG,MAAM,OAAO,UAAU,KAAK;AACxD,oBAAU,WAAW,KAAK,oBAAoB,OAAO,SAAS;AAC9D,oBAAU,QAAQ,MAAM,CAAC,GAAG,MAAM,OAAO,KAAK,UAAU,SAAS,CAAC;AAClE,oBAAU,IAAI,KAAK,WAAW,OAAO,SAAS;AAC9C,oBAAU,OAAO,OAAO,CAAC,GAAG,MAAM,MAAM,UAAU,IAAI;AACtD,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,OAAO,MAAM;AACjC,cAAI,SAAS,KAAK,CAAC,GAAG;AACpB,mBAAO,KAAK;AAAA,UACd;AACA,cAAI,SAAS,MAAM,CAAC,KAAK,MAAM,MAAM,QAAQ;AAC3C,mBAAO,MAAM;AAAA,UACf;AACA,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,SAAU,OAAO,MAAM;AAC1C,iBAAO,MAAM;AAAA,YACX,MAAM;AAAA,YACN,MAAM,CAAC;AAAA,UACT,GAAG,MAAM,UAAU;AAAA,YACjB,MAAM,KAAK;AAAA,UACb,CAAC;AAAA,QACH;AAAA,QACA,cAAc,SAAU,UAAU,YAAY;AAC5C,cAAI,OAAO,CAAC;AACZ,cAAI;AACJ,cAAI,WAAW,QAAQ,GAAG;AACxB,2BAAe;AACf,iBAAK,KAAK;AAAA,UACZ,WAAW,SAAS,QAAQ,GAAG;AAC7B,2BAAe;AAAA,UACjB,WAAW,aAAa,QAAW;AACjC,2BAAe,aAAa,SAAS;AAAA,UACvC,WAAW,MAAM,QAAQ,QAAQ,GAAG;AAClC,2BAAe;AACf,iBAAK,IAAI,SAAS,CAAC;AACnB,iBAAK,IAAI,SAAS,CAAC;AAAA,UACrB,WAAW,WAAW,QAAQ,GAAG;AAC/B,2BAAe,SAAS;AACxB,mBAAO,MAAM,SAAS,IAAI;AAAA,UAC5B;AACA,cAAIrC,UAAS;AAAA,YACX;AAAA,UACF;AACA,cAAI,cAAc;AAChB,YAAAA,QAAO,OAAO;AAAA,UAChB;AACA,iBAAOA;AAAA,QACT;AAAA,QACA,WAAW,SAAU,MAAM,aAAa;AACtC,cAAI,QAAQ,KAAK,SAAS,CAAC;AAC3B,cAAI,MAAM;AACV,cAAI,WAAW,KAAK,aAAa,MAAM,UAAU,WAAW;AAC5D,iBAAO;AAAA,QACT;AAAA,MACF;AACA,UAAI,uBAAuB;AAAA,QACzB,kBAAkB,WAAY;AAC5B,eAAK,gBAAgB;AACrB,eAAK,GAAG,gBAAgB,WAAY;AAClC,iBAAK,oBAAoB;AACzB,iBAAK,gBAAgB;AAAA,UACvB,GAAG,IAAI;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,qBAAqB,WAAY;AAC/B,cAAI,UAAU,KAAK,IAAI,OAAO,KAAK,CAAC;AACpC,cAAI,kBAAkB,CAAC;AACvB,kBAAQ,QAAQ,KAAK,EAAE,QAAQ,SAAU,MAAM;AAC7C,4BAAgB,KAAK,EAAE,IAAI;AAAA,UAC7B,CAAC;AACD,cAAI,WAAW,KAAK,SAAS,OAAO,KAAK,CAAC;AAC1C,cAAI,UAAU,CAAC;AACf,kBAAQ,SAAS,KAAK,EAAE,QAAQ,SAAU,MAAM;AAC9C,gBAAI,CAAC,gBAAgB,KAAK,EAAE,GAAG;AAC7B,sBAAQ,KAAK,EAAE,IAAI;AAAA,YACrB;AAAA,UACF,CAAC;AACD,cAAI,QAAQ,KAAK;AACjB,cAAI,SAAS,CAAC,QAAQ,OAAO,GAAG;AAC9B,gBAAI,eAAe,MAAM,kBAAkB,MAAM;AAAA,cAC/C,SAAS;AAAA,YACX,CAAC;AACD,yBAAa,QAAQ,SAAU,MAAM;AACnC,kBAAI,QAAQ,KAAK,IAAI,QAAQ,EAAE,IAAI,GAAG;AACpC,qBAAK,OAAO;AAAA,cACd;AAAA,YACF,CAAC;AACD,gBAAI,gBAAgB,MAAM,kBAAkB,MAAM;AAAA,cAChD,UAAU;AAAA,YACZ,CAAC;AACD,0BAAc,QAAQ,SAAU,MAAM;AACpC,kBAAI,QAAQ,KAAK,IAAI,QAAQ,EAAE,IAAI,GAAG;AACpC,qBAAK,OAAO;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA,QACF;AAAA;AAAA;AAAA;AAAA,QAIA,UAAU,WAAY;AACpB,cAAI,QAAQ,KAAK,KAAK,aAAa;AACnC,iBAAO,MAAM,QAAQ,KAAK,KAAK,MAAM,SAAS;AAAA,QAChD;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,SAAS,SAAU4C,KAAI;AACrB,iBAAO,KAAK,aAAaA,GAAE,MAAM;AAAA,QACnC;AAAA;AAAA;AAAA;AAAA,QAIA,UAAU,WAAY;AACpB,iBAAO,UAAU,KAAK,KAAK,aAAa,CAAC,KAAK,CAAC;AAAA,QACjD;AAAA;AAAA;AAAA;AAAA,QAIA,eAAe,SAAU,WAAW;AAClC,cAAI,aAAa,QAAQ,KAAK,KAAK,CAAC,SAAS,OAAO,CAAC,CAAC,EAAE,OAAO,SAAU,MAAM;AAC7E,mBAAO,KAAK,UAAU;AAAA,UACxB,CAAC;AACD,iBAAO,UAAU,UAAU;AAAA,QAC7B;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,SAAS,SAAUA,KAAI;AACrB,iBAAO,UAAU,QAAQ,KAAK,KAAK,aAAa,CAAC,EAAE,KAAK,SAAU,MAAM;AACtE,mBAAO,KAAK,MAAM,KAAK,OAAOA;AAAA,UAChC,CAAC,CAAC;AAAA,QACJ;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,mBAAmB,SAAU,WAAW;AACtC,cAAI,eAAe,KAAK,kBAAkB,qBAAqB,WAAW,KAAK,KAAK,KAAK,CAAC,CAAC;AAC3F,iBAAO,aAAa,OAAO,SAAU,WAAW,SAAS;AACvD,gBAAI,iBAAiB,QAAQ;AAC7B,sBAAU,QAAQ,MAAM,IAAI;AAAA,cAC1B,GAAG,eAAe;AAAA,cAClB,GAAG,eAAe;AAAA,cAClB,OAAO,eAAe;AAAA,YACxB;AACA,mBAAO;AAAA,UACT,GAAG,CAAC,CAAC;AAAA,QACP;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,cAAc,SAAU,MAAM;AAC5B,cAAIA,MAAK,WAAW,IAAI,IAAI,KAAK,KAAK;AACtC,cAAI,CAAC,KAAK,eAAeA,GAAE,GAAG;AAC5B,mBAAO;AAAA,UACT;AACA,iBAAO,QAAQ,KAAK,KAAK,aAAa,CAAC,EAAE,UAAU,SAAU,MAAM;AACjE,mBAAO,KAAK,OAAOA;AAAA,UACrB,CAAC;AAAA,QACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,SAAS,SAAU,MAAM,KAAK;AAC5B,cAAI,CAAC,WAAW,IAAI,KAAK,MAAM,QAAQ,IAAI,GAAG;AAC5C,kBAAM,IAAI,MAAM,sCAAsC;AAAA,UACxD;AACA,cAAI,QAAQ,OAAO,CAAC,GAAG,KAAK,KAAK,aAAa,CAAC;AAC/C,gBAAM,KAAK,IAAI;AACf,eAAK,KAAK,eAAe,OAAO,GAAG;AACnC,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,YAAY,SAAU,QAAQ,MAAM,KAAK;AACvC,cAAIsD,WAAU,OAAO,WAAW,WAAW,SAAS,KAAK,aAAa,MAAM;AAC5E,cAAI,CAAC,WAAW,IAAI,KAAK,MAAM,QAAQ,IAAI,GAAG;AAC5C,kBAAM,IAAI,MAAM,6CAA6C;AAAA,UAC/D;AACA,cAAI,QAAQ,OAAO,CAAC,GAAG,KAAK,KAAK,aAAa,CAAC;AAC/C,gBAAM,OAAOA,UAAS,GAAG,IAAI;AAC7B,eAAK,KAAK,eAAe,OAAO,GAAG;AACnC,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAQA,UAAU,SAAU,QAAQ/D,OAAM,OAAO,KAAK;AAC5C,cAAI+D,WAAU,KAAK,aAAa,MAAM;AACtC,cAAIA,aAAY,IAAI;AAClB,kBAAM,IAAI,MAAM,0CAA0C,MAAM;AAAA,UAClE;AACA,cAAI,OAAO,MAAM,UAAU,MAAM,KAAK,WAAW,CAAC;AAClD,cAAI,MAAM,QAAQ/D,KAAI,GAAG;AACvB,iBAAK,CAAC,IAAI,CAAC,SAAS,SAAS+D,QAAO,EAAE,OAAO/D,KAAI;AAAA,UACnD,WAAW,SAASA,KAAI,GAAG;AAGzB,iBAAK,CAAC,IAAI,CAAC,gBAAgB+D,UAAS,KAAK/D,KAAI,EAAE,KAAK,EAAE;AAAA,UACxD,OAAO;AACL,mBAAO,CAAC,iBAAiB+D,QAAO;AAChC,gBAAI,cAAc/D,KAAI,GAAG;AACvB,mBAAK,KAAKA,KAAI;AACd,mBAAK,KAAK,KAAK;AAAA,YACjB;AAAA,UACF;AACA,iBAAO,KAAK,KAAK,MAAM,MAAM,IAAI;AAAA,QACnC;AAAA,QACA,gBAAgB,WAAY;AAC1B,cAAI,YAAY,KAAK,IAAI,OAAO,KAAK,CAAC;AACtC,cAAI,gBAAgB,CAAC;AACrB,sBAAY,aAAa,CAAC;AAC1B,cAAI,QAAQ,QAAQ,UAAU,KAAK;AACnC,gBAAM,QAAQ,SAAU,GAAG;AACzB,gBAAI,OAAO,MAAM,UAAU;AACzB,4BAAc,KAAK,0BAA0B,CAAC;AAAA,YAChD;AACA,gBAAI,CAAC,KAAK,eAAe,EAAE,EAAE,GAAG;AAC9B,gBAAE,KAAK,KAAK,eAAe;AAAA,YAC7B;AAAA,UACF,GAAG,IAAI;AACP,cAAI,KAAK,OAAO,IAAI,EAAE,WAAW,MAAM,QAAQ;AAC7C,0BAAc,KAAK,yCAAyC;AAAA,UAC9D;AACA,iBAAO;AAAA,QACT;AAAA,QACA,gBAAgB,WAAY;AAC1B,iBAAO,KAAK,WAAW;AAAA,QACzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,gBAAgB,SAAUS,KAAI;AAC5B,iBAAOA,QAAO,QAAQA,QAAO,UAAa,CAAC,WAAWA,GAAE;AAAA,QAC1D;AAAA,QACA,UAAU,SAAU,OAAO,KAAK;AAC9B,cAAI,MAAM,QAAQ;AAChB,iBAAK,KAAK,eAAe,OAAO,CAAC,GAAG,KAAK,KAAK,aAAa,CAAC,EAAE,OAAO,KAAK,GAAG,GAAG;AAAA,UAClF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,MAAM,KAAK;AAC/B,cAAI,UAAU,OAAO,CAAC;AACtB,cAAIsD,WAAU,KAAK,aAAa,IAAI;AACpC,cAAIA,aAAY,IAAI;AAClB,gBAAI,QAAQ,OAAO,CAAC,GAAG,KAAK,KAAK,CAAC,SAAS,OAAO,CAAC,CAAC;AACpD,kBAAM,OAAOA,UAAS,CAAC;AACvB,oBAAQ,UAAU;AAClB,iBAAK,WAAW,aAAa;AAC7B,iBAAK,KAAK,CAAC,SAAS,OAAO,GAAG,OAAO,OAAO;AAC5C,iBAAK,UAAU,aAAa;AAAA,UAC9B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,SAAU,iBAAiB,KAAK;AAC3C,cAAI,SAAS;AACb,cAAI,MAAM,QAAQ,eAAe,GAAG;AAClC,sBAAU,OAAO,CAAC;AAClB,gBAAI,gBAAgB,WAAW,GAAG;AAChC,qBAAO,KAAK;AAAA,YACd;AACA,gBAAI,eAAe,OAAO,CAAC,GAAG,KAAK,KAAK,CAAC,SAAS,OAAO,CAAC,CAAC;AAC3D,uBAAW,aAAa,OAAO,SAAU,IAAI;AAC3C,qBAAO,CAAC,gBAAgB,KAAK,SAAU,IAAI;AACzC,oBAAI,OAAO,WAAW,EAAE,IAAI,GAAG,KAAK;AACpC,uBAAO,GAAG,OAAO;AAAA,cACnB,CAAC;AAAA,YACH,CAAC;AAAA,UACH,OAAO;AACL,sBAAU,mBAAmB,CAAC;AAC9B,uBAAW,CAAC;AAAA,UACd;AACA,eAAK,WAAW,aAAa;AAC7B,kBAAQ,UAAU;AAClB,eAAK,KAAK,CAAC,SAAS,OAAO,GAAG,UAAU,OAAO;AAC/C,eAAK,UAAU,aAAa;AAC5B,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,iBAAiB,WAAY;AAC3B,cAAI,MAAM,KAAK,eAAe;AAC9B,cAAI,IAAI,SAAS,GAAG;AAClB,iBAAK,IAAI,SAAS,KAAK,SAAS,OAAO,CAAC;AACxC,kBAAM,IAAI,MAAM,IAAI,KAAK,GAAG,CAAC;AAAA,UAC/B;AACA,cAAI;AACJ,cAAI,KAAK,mBAAmB;AAC1B,2BAAe,KAAK,kBAAkB,SAAS;AAAA,UACjD;AACA,eAAK,oBAAoB,IAAI,SAAS,KAAK,IAAI,OAAO,CAAC;AACvD,cAAI,cAAc,KAAK,kBAAkB,SAAS;AAClD,cAAI,cAAc;AAChB,gBAAI,QAAQ,YAAY,OAAO,SAAU,MAAM;AAC7C,kBAAI,CAAC,aAAa,KAAK,SAAU,UAAU;AACzC,uBAAO,SAAS,OAAO,KAAK;AAAA,cAC9B,CAAC,GAAG;AACF,uBAAO;AAAA,cACT;AAAA,YACF,CAAC;AACD,gBAAI,UAAU,aAAa,OAAO,SAAU,MAAM;AAChD,kBAAI,CAAC,YAAY,KAAK,SAAU,SAAS;AACvC,uBAAO,QAAQ,OAAO,KAAK;AAAA,cAC7B,CAAC,GAAG;AACF,uBAAO;AAAA,cACT;AAAA,YACF,CAAC;AACD,gBAAI,QAAQ,SAAS,GAAG;AACtB,mBAAK,QAAQ,gBAAgB,MAAM,OAAO;AAAA,YAC5C;AACA,gBAAI,MAAM,SAAS,GAAG;AACpB,mBAAK,QAAQ,aAAa,MAAM,KAAK;AAAA,YACvC;AAAA,UACF;AAAA,QACF;AAAA,MACF;AACA,UAAI,2BAA2B;AAAA,QAC7B,qBAAqB;AAAA,QACrB,YAAY,CAAC;AAAA,UACX,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,UAAU;AAAA,UACZ;AAAA,QACF,CAAC;AAAA,QACD,iBAAiB,CAAC;AAAA,UAChB,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,QAAQ;AAAA,UACV;AAAA,QACF,CAAC;AAAA;AAAA,QAED,oBAAoB;AAAA;AAAA;AAAA;AAAA,QAIpB,kBAAkB,WAAY;AAC5B,eAAK,iBAAiB;AAAA,QACxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAeA,eAAe,WAAY;AACzB,eAAK,aAAa;AAClB,eAAK,iBAAiB;AACtB,eAAK,aAAa;AAAA,QACpB;AAAA,QACA,kBAAkB,WAAY;AAC5B,eAAK,qBAAqB,CAAC;AAAA,QAC7B;AAAA;AAAA;AAAA;AAAA,QAIA,cAAc,WAAY;AAExB,cAAI,oBAAoB,CAAC;AACzB,cAAI,OAAO,KAAK,qBAAqB;AACrC,mBAAS,IAAI,GAAG,QAAQ,KAAK,KAAK,WAAW,QAAQ,IAAI,OAAO,KAAK;AACnE,8BAAkB,KAAK,KAAK,KAAK,WAAW,CAAC,CAAC;AAAA,UAChD;AACA,cAAI,gBAAgB,QAAQ,KAAK,MAAM,kBAAkB,SAAS,GAAG,GAAG;AACxE,cAAI,cAAc;AAGlB,kBAAQ,cAAc,WAAW,CAAC,EAAE,QAAQ,SAAU,MAAM;AAC1D,gBAAI,cAAc,KAAK,gBAAgB,IAAI;AAC3C,iBAAK,OAAO,WAAW;AACvB,8BAAkB,KAAK,WAAW;AAAA,UACpC,GAAG,IAAI;AACP,cAAI,aAAa,OAAO,KAAK,aAAa;AAC1C,mBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAC1C,gBAAI,YAAY,WAAW,CAAC;AAC5B,gBAAI,cAAc,aAAa;AAC7B,kBAAI,IAAI,SAAS,WAAW,EAAE;AAC9B,mBAAK,aAAa,cAAc,SAAS,GAAG,GAAG,iBAAiB;AAAA,YAClE;AAAA,UACF;AACA,eAAK,aAAa;AAAA,QACpB;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,sBAAsB,WAAY;AAChC,iBAAO,KAAK,iBAAiB,KAAK;AAAA,QACpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,cAAc,SAAU,OAAO,GAAG,MAAM;AACtC,cAAI,mBAAmB,KAAK,qBAAqB;AACjD,cAAI,eAAe,QAAQ,KAAK,EAAE,IAAI,KAAK,iBAAiB,IAAI;AAChE,cAAI,KAAK,CAAC,KAAK,IAAI,GAAG;AACpB,YAAAzG,GAAE,KAAK,KAAK,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE,OAAO,YAAY;AAAA,UAC7C,OAAO;AACL,6BAAiB,OAAO,YAAY;AAAA,UACtC;AAAA,QACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,iBAAiB,SAAU,MAAM;AAC/B,cAAI,KAAK,mBAAmB,KAAK,EAAE,GAAG;AACpC,mBAAO,KAAK,mBAAmB,KAAK,EAAE,EAAE;AAAA,UAC1C;AACA,iBAAO,KAAK,mBAAmB,IAAI;AAAA,QACrC;AAAA,QACA,cAAc,SAAU,QAAQ,UAAU;AACxC,cAAI,YAAY,KAAK,mBAAmB,MAAM;AAC9C,cAAI,CAAC,WAAW;AACd,mBAAO;AAAA,UACT;AACA,cAAI,CAAC,UAAU;AACb,mBAAO,UAAU,mBAAmB;AAAA,UACtC;AACA,cAAI,WAAW,UAAU,YAAY;AACrC,cAAI,gBAAgB,UAAU;AAC9B,cAAI,MAAM,KAAK,eAAe,UAAU,UAAU,aAAa;AAC/D,cAAI,OAAO,IAAI,CAAC;AAChB,cAAI,SAAS,OAAQ,QAAO;AAC5B,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,cAAc,WAAY;AAExB,eAAK,iBAAiB,MAAS;AAE/B,cAAI,cAAc,OAAO,KAAK,KAAK,MAAM,kBAAkB,MAAM;AACjE,sBAAY,QAAQ,KAAK,kBAAkB,IAAI;AAAA,QACjD;AAAA;AAAA;AAAA;AAAA,QAIA,cAAc,WAAY;AACxB,iBAAO,KAAK,oBAAoB,oBAAoB;AAAA,QACtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,oBAAoB,SAAU,MAAM;AAClC,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,cAAI;AACJ,cAAI,uBAAuBA,GAAE,KAAK,mBAAmB,EAAE,SAAS,YAAY;AAC5E,cAAI,aAAa,KAAK,eAAe,IAAI;AACzC,cAAI,MAAM,QAAQ,UAAU,GAAG;AAC7B,gBAAI,UAAU,KAAK,aAAa,YAAY,qBAAqB,IAAI;AACrE,gBAAI,eAAe,QAAQ;AAC3B,gBAAI,aAAa,WAAW,SAAS,GAAG;AACtC,4BAAcA,GAAE,GAAG,EAAE,OAAO,YAAY;AAAA,YAC1C,OAAO;AACL,4BAAcA,GAAE,aAAa,UAAU;AAAA,YACzC;AACA,4BAAgB,QAAQ;AAAA,UAC1B,OAAO;AACL,0BAAcA,GAAE,UAAU;AAC1B,gBAAI,MAAM,QAAQ,WAAW,GAAG;AAC9B,4BAAcA,GAAE,GAAG,EAAE,OAAO,WAAW;AAAA,YACzC;AAAA,UACF;AACA,cAAI,CAAC,aAAa;AAChB,kBAAM,IAAI,MAAM,mCAAmC;AAAA,UACrD;AACA,sBAAY,KAAK;AAAA,YACf,QAAQ,KAAK;AAAA,YACb,cAAc,KAAK;AAAA,UACrB,CAAC;AACD,cAAI,iBAAiB,KAAK,oBAAoB,KAAK,KAAK;AACxD,cAAI,MAAM,QAAQ,cAAc,GAAG;AAEjC,gBAAI,MAAM,KAAK,aAAa,gBAAgB,qBAAqB,IAAI;AACrE,gBAAI,WAAW,IAAI;AACnB,gBAAI,YAAY,IAAI;AACpB,gBAAI,aAAa,SAAS,WAAW;AACrC,gBAAI,aAAa,GAAG;AAClB,+BAAiB;AACjB,6BAAe,eAAe,IAAIA,GAAE,SAAS,UAAU,IAAIA,GAAE,GAAG,EAAE,OAAO,QAAQ;AAAA,YACnF;AAAA,UACF,OAAO;AAEL,2BAAeA,GAAE,cAAc;AAC/B,gBAAI,MAAM,QAAQ,YAAY,GAAG;AAC/B,6BAAeA,GAAE,GAAG,EAAE,OAAO,YAAY;AAAA,YAC3C;AAAA,UACF;AACA,cAAI;AACJ,cAAI,iBAAiB,gBAAgB;AACnC,qBAAS,OAAO,gBAAgB;AAC9B,kBAAI,cAAc,GAAG,KAAK,QAAQ,KAAK,UAAU;AAC/C,sBAAM,IAAI,MAAM,oDAAoD;AAAA,cACtE;AAAA,YACF;AACA,qCAAyB,OAAO,CAAC,GAAG,eAAe,cAAc;AAAA,UACnE,OAAO;AACL,qCAAyB,iBAAiB,kBAAkB,CAAC;AAAA,UAC/D;AAKA,cAAI,mBAAmB;AAEvB,cAAI,oBAAoB;AAExB,cAAI,oBAAoB;AACxB,cAAI,EAAE,oBAAoB,yBAAyB;AACjD,mCAAuB,gBAAgB,IAAI,YAAY;AAAA,UACzD;AACA,cAAI,cAAc;AAChB,gBAAI,YAAY,aAAa;AAC7B,gBAAI,EAAE,qBAAqB,yBAAyB;AAClD,qCAAuB,iBAAiB,IAAI;AAAA,YAC9C;AACA,gBAAI,EAAE,qBAAqB,yBAAyB;AAGlD,kBAAI,gBAAgB,aAAa,QAAQ,MAAM,SAAS,YAAY,MAAM,KAAK,UAAU,iBAAiB,MAAM,CAAC;AACjH,qCAAuB,iBAAiB,IAAI;AAC5C,kBAAI,CAAC,gBAAgB;AACnB,iCAAiB,CAAC;AAAA,cACpB;AACA,6BAAe,iBAAiB,IAAI;AAAA,YACtC;AAAA,UACF;AACA,+BAAqB,OAAO,YAAY,SAAS,iBAAiB,CAAC;AACnE,cAAI,cAAc;AAChB,iCAAqB,OAAO,aAAa,SAAS,kBAAkB,CAAC;AAAA,UACvE;AACA,eAAK,mBAAmB,KAAK,EAAE,IAAI;AAAA,YACjC,aAAa;AAAA,YACb,kBAAkB;AAAA,YAClB,eAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,oBAAoB;AAAA,YACpB,sBAAsB;AAAA,UACxB;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,kBAAkB,SAAU,WAAW;AACrC,cAAI,cAAc,KAAK,KAAK,MAAM,KAAK,CAAC;AACxC,cAAI,eAAe,KAAK,MAAM,kBAAkB,qBAAqB,WAAW,WAAW;AAC3F,mBAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,IAAI,GAAG,KAAK;AACnD,gBAAI,UAAU,aAAa,CAAC;AAC5B,gBAAI,SAAS,QAAQ;AACrB,gBAAI,SAAS,KAAK,mBAAmB,MAAM,KAAK,CAAC;AACjD,gBAAI,qBAAqB,QAAQ;AACjC,gBAAI,sBAAsB,QAAQ;AAClC,gBAAI,uBAAuB,OAAO,kBAAkB;AAClD,mBAAK,2BAA2B,OAAO,iBAAiB,MAAM,oBAAoB,OAAO;AAAA,gBACvF,UAAU,IAAI,KAAK,QAAQ,SAAS;AAAA,gBACpC,WAAW,OAAO;AAAA,cACpB,CAAC;AACD,mBAAK,mBAAmB,OAAO,kBAAkB,qBAAqB,CAAC,mBAAmB,SAAS,CAAC;AAAA,YACtG;AACA,iBAAK,2BAA2B,OAAO,YAAY,MAAM,QAAQ,WAAW;AAAA,cAC1E,UAAU,IAAI,KAAK,QAAQ,QAAQ;AAAA,cACnC,WAAW,OAAO;AAAA,YACpB,CAAC;AACD,iBAAK,mBAAmB,OAAO,aAAa,kBAAkB;AAAA,UAChE;AAAA,QACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,oBAAoB,SAAU,SAAS,eAAe,cAAc;AAClE,cAAI,SAASA,GAAE,gBAAgB,EAAE,OAAO,gBAAgB,CAAC,EAAE,UAAU,cAAc,KAAK,GAAG,cAAc,KAAK,CAAC,EAAE,OAAO,cAAc,SAAS,CAAC;AAChJ,kBAAQ,UAAU,QAAQ;AAAA,YACxB,UAAU;AAAA,UACZ,CAAC;AAAA,QACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,gBAAgB,SAAU,MAAM;AAC9B,iBAAO,KAAK,UAAU,KAAK,MAAM,IAAI,YAAY,KAAK,KAAK,MAAM,cAAc,KAAK;AAAA,QACtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,qBAAqB,SAAU,OAAO;AACpC,iBAAO,MAAM,UAAU,KAAK,MAAM,IAAI,iBAAiB,KAAK,KAAK,MAAM,mBAAmB,KAAK;AAAA,QACjG;AAAA,MACF;AAKA,UAAI,YAAY,KAAK,OAAO;AAAA,QAC1B,UAAU;AAAA,UACR,UAAU;AAAA,YACR,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA,UACA,MAAM;AAAA,YACJ,OAAO;AAAA,YACP,QAAQ;AAAA,UACV;AAAA,UACA,OAAO;AAAA,QACT;AAAA,QACA,YAAY,WAAY;AACtB,eAAK,iBAAiB;AACtB,eAAK,UAAU,WAAW,MAAM,MAAM,SAAS;AAAA,QACjD;AAAA;AAAA;AAAA;AAAA,QAIA,kBAAkB,WAAY;AAAA,QAE9B;AAAA,QACA,eAAe,WAAY;AAAA,QAE3B;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,SAAU,GAAG,GAAG,KAAK;AAC7B,cAAI,WAAW,SAAS,CAAC;AACzB,iBAAO,WAAW,MAAM,MAAM,CAAC;AAC/B,cAAI,iBAAiB,IAAI;AACzB,cAAI,OAAO,IAAI;AACf,cAAI,iBAAiB,IAAI;AAGzB,cAAI;AACJ,cAAI,gBAAgB;AAGlB,gBAAI,CAAC,KAAK,OAAO;AACf,oBAAM,IAAI,MAAM,kCAAkC;AAAA,YACpD;AACA,gBAAIsD,UAAS,KAAK,cAAc;AAChC,gBAAIA,WAAU,CAACA,QAAO,OAAO,GAAG;AAC9B,+BAAiBA,QAAO,IAAI,UAAU;AAAA,YACxC;AAAA,UACF;AACA,cAAI,UAAU;AACZ,gBAAI,gBAAgB;AAClB,mBAAK,eAAe;AACpB,mBAAK,eAAe;AAAA,YACtB;AACA,gBAAI,QAAQ,gBAAgB;AAC1B,kBAAI,MAAM,KAAK,IAAI,UAAU;AAC7B,kBAAI,KAAK,IAAI;AACb,kBAAI,KAAK,IAAI;AACb,mBAAK,UAAU,IAAI,IAAI,IAAI,IAAI,GAAG;AAAA,YACpC,OAAO;AACL,mBAAK,IAAI,YAAY;AAAA,gBACnB;AAAA,gBACA;AAAA,cACF,GAAG,GAAG;AAAA,YACR;AACA,mBAAO;AAAA,UACT,OAAO;AAGL,gBAAI,kBAAkB,MAAM,KAAK,IAAI,UAAU,CAAC;AAChD,mBAAO,iBAAiB,gBAAgB,WAAW,cAAc,IAAI;AAAA,UACvE;AAAA,QACF;AAAA,QACA,WAAW,SAAU,IAAI,IAAI,KAAK;AAChC,eAAK,MAAM;AACX,eAAK,MAAM;AACX,cAAI,OAAO,KAAK,OAAO,GAAG;AAExB,mBAAO;AAAA,UACT;AACA,gBAAM,OAAO,CAAC;AAEd,cAAI,cAAc,IAAI,eAAe,KAAK;AAC1C,cAAI,WAAW,KAAK,IAAI,UAAU,KAAK;AAAA,YACrC,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AACA,cAAI,KAAK,IAAI;AACb,cAAI,MAAM,IAAI,gBAAgB,KAAK,IAAI;AACrC,gBAAI,OAAO,OAAO,YAAY;AAC5B,kBAAI,cAAc,GAAG,KAAK,MAAM,SAAS,IAAI,IAAI,SAAS,IAAI,IAAI,GAAG;AACrE,mBAAK,YAAY,IAAI,SAAS;AAC9B,mBAAK,YAAY,IAAI,SAAS;AAAA,YAChC,OAAO;AAIL,kBAAI9B,QAAO,KAAK,QAAQ;AAAA,gBACtB,MAAM;AAAA,cACR,CAAC;AAYD,kBAAI,KAAK,SAAS,IAAIA,MAAK;AAC3B,kBAAI,KAAK,SAAS,IAAIA,MAAK;AAG3B,kBAAI,IAAI,KAAK,IAAI,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,QAAQ,KAAKA,MAAK,OAAO,SAAS,IAAI,EAAE,CAAC;AACxF,kBAAI,IAAI,KAAK,IAAI,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,SAAS,KAAKA,MAAK,QAAQ,SAAS,IAAI,EAAE,CAAC;AAE1F,mBAAK,IAAI,SAAS;AAClB,mBAAK,IAAI,SAAS;AAAA,YACpB;AAAA,UACF;AACA,cAAI,qBAAqB;AAAA,YACvB,GAAG,SAAS,IAAI;AAAA,YAChB,GAAG,SAAS,IAAI;AAAA,UAClB;AAGA,cAAI,KAAK;AACT,cAAI,KAAK;AACT,cAAI,IAAI,YAAY;AAClB,gBAAI,CAAC,WAAW,IAAI,UAAU,GAAG;AAC/B,kBAAI,aAAa,CAAC;AAAA,YACpB;AACA,iBAAK,WAAW,YAAY,oBAAoB,OAAO,CAAC,GAAG,IAAI,YAAY;AAAA,cACzE,eAAe,YAAY;AAAA,YAC7B,CAAC,CAAC;AAGF,mBAAO,KAAK,iBAAiB,GAAG,aAAa,IAAI,IAAI,GAAG;AAAA,UAC1D,OAAO;AACL,iBAAK,WAAW,aAAa,GAAG;AAChC,iBAAK,IAAI,YAAY,oBAAoB,GAAG;AAC5C,mBAAO,KAAK,iBAAiB,GAAG,aAAa,IAAI,IAAI,GAAG;AACxD,iBAAK,UAAU,aAAa,GAAG;AAAA,UACjC;AACA,iBAAO;AAAA,QACT;AAAA,QACA,MAAM,SAAU,OAAO,QAAQ,KAAK;AAClC,cAAI,cAAc,KAAK,IAAI,MAAM;AAGjC,cAAI,UAAU,QAAW;AACvB,mBAAO;AAAA,cACL,OAAO,YAAY;AAAA,cACnB,QAAQ,YAAY;AAAA,YACtB;AAAA,UACF;AAGA,cAAI,WAAW,KAAK,GAAG;AACrB,kBAAM;AACN,qBAAS,SAAS,MAAM,MAAM,IAAI,MAAM,SAAS,YAAY;AAC7D,oBAAQ,SAAS,MAAM,KAAK,IAAI,MAAM,QAAQ,YAAY;AAAA,UAC5D;AACA,iBAAO,KAAK,OAAO,OAAO,QAAQ,GAAG;AAAA,QACvC;AAAA,QACA,QAAQ,SAAU,OAAO,QAAQ,KAAK;AACpC,gBAAM,OAAO,CAAC;AACd,eAAK,WAAW,UAAU,GAAG;AAC7B,cAAI,IAAI,WAAW;AACjB,gBAAI,cAAc,KAAK,IAAI,MAAM;AACjC,oBAAQ,IAAI,WAAW;AAAA,cACrB,KAAK;AAAA,cACL,KAAK;AAEH,yBAAS,YAAY;AACrB;AAAA,cACF,KAAK;AAAA,cACL,KAAK;AAEH,wBAAQ,YAAY;AACpB;AAAA,YACJ;AAGA,gBAAI,QAAQ,eAAe,KAAK,IAAI,OAAO,KAAK,CAAC;AAGjD,gBAAIA,QAAO,KAAK,QAAQ;AACxB,gBAAI;AACJ,gBAAI,OAAO;AACT,kBAAI,WAAW;AAAA,gBACb,aAAa;AAAA,gBACb,SAAS;AAAA,gBACT,YAAY;AAAA,gBACZ,OAAO;AAAA,gBACP,eAAe;AAAA,gBACf,QAAQ;AAAA,gBACR,gBAAgB;AAAA,gBAChB,UAAU;AAAA,cACZ,EAAE,IAAI,SAAS;AACf,kBAAI,IAAI,UAAU;AAEhB,4BAAY,KAAK,OAAO,QAAQ,MAAM,EAAE;AACxC,4BAAY;AAAA,cACd;AAIA,kBAAI,aAAaA,MAAK,CAAC,cAAc,UAAU,YAAY,QAAQ,EAAE,QAAQ,CAAC,EAAE;AAIhF,kBAAI,kBAAkB,MAAM,UAAU,EAAE,OAAOA,MAAK,OAAO,GAAG,CAAC,KAAK;AAQpE,kBAAI,SAAS,KAAK,KAAK,QAAQ,QAAQ,SAAS,MAAM,IAAI;AAY1D,kBAAI,QAAQ,WAAW,KAAK,KAAK;AAKjC,uBAAS,KAAK,KAAK,WAAW,KAAK,IAAI,SAAS,QAAQ,QAAQ,MAAM;AAGtE,uBAAS,MAAM,KAAK;AAIpB,kBAAIgB,UAAS,MAAM,UAAU,QAAQ,OAAO,eAAe;AAK3D,uBAAS,MAAMA,OAAM,EAAE,OAAO,QAAQ,IAAI,SAAS,EAAE;AAAA,YACvD,OAAO;AAEL,uBAAShB,MAAK,QAAQ;AACtB,sBAAQ,IAAI,WAAW;AAAA,gBACrB,KAAK;AAAA,gBACL,KAAK;AACH,yBAAO,OAAO,GAAGA,MAAK,SAAS,MAAM;AACrC;AAAA,gBACF,KAAK;AAAA,gBACL,KAAK;AACH,yBAAO,OAAOA,MAAK,QAAQ,OAAO,CAAC;AACnC;AAAA,gBACF,KAAK;AACH,yBAAO,OAAOA,MAAK,QAAQ,OAAOA,MAAK,SAAS,MAAM;AACtD;AAAA,cACJ;AAAA,YACF;AAGA,iBAAK,IAAI,QAAQ;AAAA,cACf;AAAA,cACA;AAAA,YACF,GAAG,GAAG;AAGN,iBAAK,SAAS,OAAO,GAAG,OAAO,GAAG,GAAG;AAAA,UACvC,OAAO;AAEL,iBAAK,IAAI,QAAQ;AAAA,cACf;AAAA,cACA;AAAA,YACF,GAAG,GAAG;AAAA,UACR;AACA,eAAK,UAAU,UAAU,GAAG;AAC5B,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,QAAQ,KAAK;AACpC,cAAI,aAAa,KAAK,QAAQ,EAAE,MAAM,IAAI,IAAI,MAAM;AACpD,eAAK,WAAW,SAAS,GAAG;AAC5B,eAAK,SAAS,WAAW,GAAG,WAAW,GAAG,GAAG;AAC7C,eAAK,OAAO,WAAW,OAAO,WAAW,QAAQ,GAAG;AACpD,eAAK,UAAU,OAAO;AACtB,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,KAAK;AACxB,iBAAO,KAAK,cAAc,GAAG;AAAA,QAC/B;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAI3B,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,CAAC,OAAO;AACV,kBAAM,IAAI,MAAM,kCAAkC;AAAA,UACpD;AACA,cAAI,gBAAgB,KAAK,iBAAiB,EAAE,OAAO,SAAU,MAAM;AACjE,mBAAO,KAAK,UAAU;AAAA,UACxB,CAAC;AACD,cAAI,cAAc,WAAW,GAAG;AAC9B,mBAAO;AAAA,UACT;AACA,eAAK,WAAW,cAAc,GAAG;AACjC,cAAI,IAAI,MAAM;AAIZ,mBAAO,eAAe,iBAAiB,GAAG;AAAA,UAC5C;AAKA,eAAK,eAAe,OAAO,OAAO;AAAA,YAChC,UAAU;AAAA,UACZ,GAAG,GAAG,CAAC;AACP,eAAK,UAAU,YAAY;AAC3B,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,KAAK;AACxB,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,CAAC,OAAO;AACV,kBAAM,IAAI,MAAM,kCAAkC;AAAA,UACpD;AAIA,cAAI,IAAI,QAAQ,IAAI,eAAe,IAAI,eAAe,QAAQ,IAAI,eAAe,KAAK,KAAK;AACzF,mBAAO;AAAA,UACT;AACA,cAAI,gBAAgB,KAAK,cAAc;AACvC,cAAI,CAAC,iBAAiB,CAAC,cAAc,UAAU,GAAG;AAChD,mBAAO;AAAA,UACT;AAGA,cAAI,kBAAkB,cAAc,iBAAiB,EAAE,OAAO,SAAU,MAAM;AAC5E,mBAAO,KAAK,UAAU;AAAA,UACxB,CAAC;AACD,cAAI,gBAAgB,WAAW,GAAG;AAChC,mBAAO;AAAA,UACT;AACA,eAAK,WAAW,cAAc,GAAG;AAKjC,wBAAc,eAAe,OAAO,OAAO;AAAA,YACzC,UAAU;AAAA,UACZ,GAAG,GAAG,CAAC;AACP,cAAI,IAAI,MAAM;AAIZ,0BAAc,UAAU,GAAG;AAAA,UAC7B;AACA,eAAK,UAAU,YAAY;AAC3B,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,gBAAgB,SAAU,KAAK;AAC7B,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,eAAe,KAAK,MAAM,aAAa,IAAI,QAAQ;AAEvD,cAAI,CAAC,cAAc;AACjB;AAAA,UACF;AACA,cAAI,aAAa,IAAI;AACrB,cAAI,aAAa,IAAI;AAErB,cAAI,cAAc,YAAY;AAC5B;AAAA,UACF;AAKA,cAAI,IAAI,aAAa;AACrB,cAAI,IAAI,aAAa;AACrB,cAAI,QAAQ,aAAa;AACzB,cAAI,SAAS,aAAa;AAC1B,cAAI,MAAM,eAAe,IAAI,OAAO;AACpC,cAAIM,QAAO,IAAI;AACf,cAAIE,SAAQ,IAAI;AAChB,cAAID,OAAM,IAAI;AACd,cAAIE,UAAS,IAAI;AACjB,eAAKH;AACL,eAAKC;AACL,mBAASD,QAAOE;AAChB,oBAAUC,UAASF;AACnB,cAAI,aAAa,IAAI,KAAK,GAAG,GAAG,OAAO,MAAM;AAC7C,cAAI,YAAY;AAEd,yBAAa,KAAK,QAAQ,EAAE,MAAM,UAAU;AAAA,UAC9C,WAAW,YAAY;AAErB,gBAAI,mBAAmB,KAAK,QAAQ,EAAE,UAAU,UAAU;AAE1D,gBAAI,CAAC,kBAAkB;AACrB;AAAA,YACF;AACA,yBAAa;AAAA,UACf;AAGA,eAAK,IAAI;AAAA,YACP,UAAU;AAAA,cACR,GAAG,WAAW;AAAA,cACd,GAAG,WAAW;AAAA,YAChB;AAAA,YACA,MAAM;AAAA,cACJ,OAAO,WAAW;AAAA,cAClB,QAAQ,WAAW;AAAA,YACrB;AAAA,UACF,GAAG,GAAG;AAAA,QACR;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,QAAQ,SAAU,OAAO2E,WAAU,QAAQ,KAAK;AAC9C,cAAI,QAAQ;AACV,gBAAIlE,UAAS,KAAK,QAAQ,EAAE,OAAO;AACnC,gBAAI,OAAO,KAAK,IAAI,MAAM;AAC1B,gBAAI,WAAW,KAAK,IAAI,UAAU;AAClC,YAAAA,QAAO,OAAO,QAAQ,KAAK,IAAI,OAAO,IAAI,KAAK;AAC/C,gBAAI,KAAKA,QAAO,IAAI,KAAK,QAAQ,IAAI,SAAS;AAC9C,gBAAI,KAAKA,QAAO,IAAI,KAAK,SAAS,IAAI,SAAS;AAC/C,iBAAK,WAAW,UAAU;AAAA,cACxB;AAAA,cACA,UAAUkE;AAAA,cACV;AAAA,YACF,CAAC;AACD,iBAAK,SAAS,SAAS,IAAI,IAAI,SAAS,IAAI,IAAI,GAAG;AACnD,iBAAK,OAAO,OAAOA,WAAU,MAAM,GAAG;AACtC,iBAAK,UAAU,QAAQ;AAAA,UACzB,OAAO;AACL,iBAAK,IAAI,SAASA,YAAW,SAAS,KAAK,IAAI,OAAO,IAAI,SAAS,KAAK,GAAG;AAAA,UAC7E;AACA,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,WAAY;AACjB,iBAAO,eAAe,KAAK,IAAI,OAAO,KAAK,CAAC;AAAA,QAC9C;AAAA,QACA,SAAS,SAAU,KAAK;AACtB,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAIrD,cAAa,IAAI;AACrB,cAAI,OAAO,IAAI;AACf,cAAI,SAAS,IAAI;AACjB,cAAI,QAAQ,OAAO;AAEjB,gBAAI,WAAW,KAAK,iBAAiB;AAAA,cACnC,MAAM;AAAA,cACN,cAAc;AAAA,YAChB,CAAC;AAED,qBAAS,KAAK,IAAI;AAGlB,mBAAO,MAAM,aAAa,UAAU,GAAG;AAAA,UACzC;AACA,cAAI,QAAQA,YAAW;AACvB,cAAI,UAAU,OAAQ,SAAQ;AAC9B,cAAI,sBAAsBA,YAAW;AACrC,cAAI,IAAI,oBAAoB;AAC5B,cAAI,IAAI,oBAAoB;AAC5B,cAAI,kBAAkBA,YAAW;AACjC,cAAI,QAAQ,gBAAgB;AAC5B,cAAI,SAAS,gBAAgB;AAC7B,cAAI7B,QAAO,IAAI,KAAK,GAAG,GAAG,OAAO,MAAM;AACvC,cAAI,QAAQ;AACV,YAAAA,MAAK,mBAAmB,KAAK;AAAA,UAC/B;AACA,iBAAOA;AAAA,QACT;AAAA,QACA,2BAA2B,SAAU,MAAM,SAAS;AAElD,cAAIA,QAAO,KAAK,QAAQ;AACxB,cAAIgB,UAAShB,MAAK,OAAO;AAEzB,cAAI,SAAS,KAAK,IAAI,OAAO;AAC7B,cAAI,CAAC,QAAQ;AACX,mBAAOgB;AAAA,UACT;AACA,cAAI,SAAS,OAAO;AACpB,cAAI,CAAC,UAAU,CAAC,KAAK,QAAQ,MAAM,GAAG;AACpC,mBAAOA;AAAA,UACT;AACA,cAAI,YAAY,KAAK,SAAS,QAAQ,CAAC,OAAO,CAAC;AAC/C,cAAI,iBAAiB,KAAK,kBAAkB,SAAS;AACrD,cAAI,aAAa,IAAI,MAAM,eAAe,MAAM,CAAC,EAAE,OAAOhB,MAAK,OAAO,CAAC;AACvE,cAAI,QAAQ,KAAK,MAAM;AACvB,cAAI,OAAO;AACT,uBAAW,OAAOgB,SAAQ,CAAC,KAAK;AAAA,UAClC;AACA,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AACD,aAAO,UAAU,WAAW,oBAAoB;AAChD,UAAI,aAAa,SAAS,WAAW,OAAO;AAAA,QAC1C,YAAY,SAAU,QAAQ,KAAK;AAEjC,cAAI,IAAI,eAAe;AACrB,iBAAK,gBAAgB,IAAI;AAAA,UAC3B,OAAO;AAEL,iBAAK,gBAAgB,OAAO,UAAU,eAAe,MAAM,OAAO,QAAQ,IAAI,MAAM,SAAS;AAAA,UAE/F;AACA,eAAK,QAAQ,IAAI;AAAA,QACnB;AAAA,QACA,OAAO,SAAU,OAAO,KAAK;AAC3B,cAAI,aAAa,IAAI;AACrB,cAAI,YAAY,WAAW;AAG3B,cAAI,aAAa,MAAM,SAAS,SAAS,OAAO,UAAU,WAAW,MAAM,MAAM,GAAG,KAAK;AACzF,cAAI,OAAO,IAAI,WAAW,OAAO,GAAG;AAGpC,cAAI,CAAC,IAAI,KAAK;AACZ,iBAAK,QAAQ,WAAW;AAAA,UAC1B;AACA,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,YAAY,SAAU,OAAO;AAC3B,iBAAO,MAAM,IAAI,GAAG,KAAK;AAAA,QAC3B;AAAA,MACF,CAAC;AACD,UAAI,QAAQ,SAAS,MAAM,OAAO;AAAA,QAChC,YAAY,SAAU,OAAO,KAAK;AAChC,gBAAM,OAAO,CAAC;AAKd,cAAI,QAAQ,IAAI,WAAW,CAAC,GAAG;AAAA,YAC7B,OAAO,IAAI;AAAA,YACX,eAAe,IAAI;AAAA,YACnB,OAAO;AAAA,UACT,CAAC;AACD,mBAAS,MAAM,UAAU,IAAI,KAAK,MAAM,SAAS,KAAK;AAItD,gBAAM,GAAG,OAAO,KAAK,SAAS,IAAI;AAIlC,eAAK,GAAG,YAAY,KAAK,gBAAgB,IAAI;AAW7C,eAAK,OAAO,CAAC;AAGb,eAAK,MAAM,CAAC;AAIZ,eAAK,SAAS,CAAC;AAIf,eAAK,SAAS,CAAC;AACf,eAAK,WAAW,CAAC;AACjB,gBAAM,GAAG,OAAO,KAAK,mBAAmB,IAAI;AAC5C,gBAAM,GAAG,UAAU,KAAK,sBAAsB,IAAI;AAClD,gBAAM,GAAG,SAAS,KAAK,qBAAqB,IAAI;AAChD,gBAAM,GAAG,iBAAiB,KAAK,4BAA4B,IAAI;AAC/D,gBAAM,GAAG,iBAAiB,KAAK,4BAA4B,IAAI;AAC/D,gBAAM,GAAG,UAAU,KAAK,aAAa,IAAI;AAAA,QAC3C;AAAA,QACA,gBAAgB,WAAY;AAC1B,eAAK,IAAI,OAAO,EAAE,KAAK;AAAA,QACzB;AAAA,QACA,mBAAmB,SAAU,MAAM;AACjC,cAAI,KAAK,OAAO,GAAG;AACjB,iBAAK,OAAO,KAAK,EAAE,IAAI;AACvB,gBAAI,MAAM,KAAK;AACf,gBAAI,SAAS,IAAI;AACjB,gBAAI,SAAS,IAAI;AACjB,gBAAI,OAAO,IAAI;AACb,eAAC,KAAK,KAAK,OAAO,EAAE,MAAM,KAAK,KAAK,OAAO,EAAE,IAAI,CAAC,IAAI,KAAK,EAAE,IAAI;AAAA,YACnE;AACA,gBAAI,OAAO,IAAI;AACb,eAAC,KAAK,IAAI,OAAO,EAAE,MAAM,KAAK,IAAI,OAAO,EAAE,IAAI,CAAC,IAAI,KAAK,EAAE,IAAI;AAAA,YACjE;AAAA,UACF,OAAO;AACL,iBAAK,OAAO,KAAK,EAAE,IAAI;AAAA,UACzB;AAAA,QACF;AAAA,QACA,sBAAsB,SAAU,MAAM;AACpC,cAAI,KAAK,OAAO,GAAG;AACjB,mBAAO,KAAK,OAAO,KAAK,EAAE;AAC1B,gBAAI,MAAM,KAAK;AACf,gBAAI,SAAS,IAAI;AACjB,gBAAI,SAAS,IAAI;AACjB,gBAAI,OAAO,MAAM,KAAK,KAAK,OAAO,EAAE,KAAK,KAAK,KAAK,OAAO,EAAE,EAAE,KAAK,EAAE,GAAG;AACtE,qBAAO,KAAK,KAAK,OAAO,EAAE,EAAE,KAAK,EAAE;AAAA,YACrC;AACA,gBAAI,OAAO,MAAM,KAAK,IAAI,OAAO,EAAE,KAAK,KAAK,IAAI,OAAO,EAAE,EAAE,KAAK,EAAE,GAAG;AACpE,qBAAO,KAAK,IAAI,OAAO,EAAE,EAAE,KAAK,EAAE;AAAA,YACpC;AAAA,UACF,OAAO;AACL,mBAAO,KAAK,OAAO,KAAK,EAAE;AAAA,UAC5B;AAAA,QACF;AAAA,QACA,qBAAqB,SAAU,OAAO;AAEpC,kBAAQ,MAAM;AACd,eAAK,OAAO,CAAC;AACb,eAAK,MAAM,CAAC;AACZ,eAAK,SAAS,CAAC;AACf,eAAK,SAAS,CAAC;AACf,gBAAM,QAAQ,KAAK,mBAAmB,IAAI;AAAA,QAC5C;AAAA,QACA,4BAA4B,SAAU,MAAM;AAC1C,cAAI,aAAa,KAAK,SAAS,QAAQ;AACvC,cAAI,WAAW,MAAM,KAAK,KAAK,WAAW,EAAE,GAAG;AAC7C,mBAAO,KAAK,KAAK,WAAW,EAAE,EAAE,KAAK,EAAE;AAAA,UACzC;AACA,cAAI,SAAS,KAAK,WAAW;AAC7B,cAAI,OAAO,IAAI;AACb,aAAC,KAAK,KAAK,OAAO,EAAE,MAAM,KAAK,KAAK,OAAO,EAAE,IAAI,CAAC,IAAI,KAAK,EAAE,IAAI;AAAA,UACnE;AAAA,QACF;AAAA,QACA,4BAA4B,SAAU,MAAM;AAC1C,cAAI,aAAa,KAAK,SAAS,QAAQ;AACvC,cAAI,WAAW,MAAM,KAAK,IAAI,WAAW,EAAE,GAAG;AAC5C,mBAAO,KAAK,IAAI,WAAW,EAAE,EAAE,KAAK,EAAE;AAAA,UACxC;AACA,cAAI,SAAS,KAAK,IAAI,QAAQ;AAC9B,cAAI,OAAO,IAAI;AACb,aAAC,KAAK,IAAI,OAAO,EAAE,MAAM,KAAK,IAAI,OAAO,EAAE,IAAI,CAAC,IAAI,KAAK,EAAE,IAAI;AAAA,UACjE;AAAA,QACF;AAAA;AAAA;AAAA,QAGA,kBAAkB,SAAU,MAAM;AAChC,iBAAO,KAAK,QAAQ,KAAK,KAAK,IAAI,KAAK,CAAC;AAAA,QAC1C;AAAA;AAAA;AAAA,QAGA,iBAAiB,SAAU,MAAM;AAC/B,iBAAO,KAAK,OAAO,KAAK,IAAI,IAAI,KAAK,CAAC;AAAA,QACxC;AAAA,QACA,QAAQ,WAAY;AAGlB,cAAI,OAAO,SAAS,MAAM,UAAU,OAAO,MAAM,MAAM,SAAS;AAChE,eAAK,QAAQ,KAAK,IAAI,OAAO,EAAE,OAAO;AACtC,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,SAAU,MAAM,KAAK;AAC7B,cAAI,CAAC,KAAK,OAAO;AACf,kBAAM,IAAI,MAAM,sCAAsC;AAAA,UACxD;AACA,iBAAO,KAAK,IAAI,MAAM,GAAG;AAAA,QAC3B;AAAA,QACA,KAAK,SAAU,KAAK,KAAK,KAAK;AAC5B,cAAI;AAGJ,cAAI,OAAO,QAAQ,UAAU;AAC3B,oBAAQ;AACR,kBAAM;AAAA,UACR,OAAO;AACL,aAAC,QAAQ,CAAC,GAAG,GAAG,IAAI;AAAA,UACtB;AAGA,cAAI,MAAM,eAAe,OAAO,GAAG;AACjC,iBAAK,WAAW,MAAM,OAAO,GAAG;AAChC,oBAAQ,KAAK,OAAO,OAAO;AAAA,UAC7B;AAGA,iBAAO,SAAS,MAAM,UAAU,IAAI,KAAK,MAAM,OAAO,GAAG;AAAA,QAC3D;AAAA,QACA,OAAO,SAAU,KAAK;AACpB,gBAAM,OAAO,CAAC,GAAG,KAAK;AAAA,YACpB,OAAO;AAAA,UACT,CAAC;AACD,cAAI,aAAa,KAAK,IAAI,OAAO;AACjC,cAAI,WAAW,WAAW,GAAG;AAC3B,mBAAO;AAAA,UACT;AACA,eAAK,WAAW,SAAS,GAAG;AAG5B,cAAI,QAAQ,WAAW,OAAO,SAAU,MAAM;AAC5C,mBAAO,KAAK,OAAO,IAAI,IAAI;AAAA,UAC7B,CAAC;AACD,aAAG;AAKD,kBAAM,MAAM,EAAE,OAAO,GAAG;AAAA,UAC1B,SAAS,MAAM,SAAS;AACxB,eAAK,UAAU,OAAO;AACtB,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,SAAU,MAAM,KAAK;AACjC,cAAI;AACJ,cAAI,gBAAgB,SAAS,OAAO;AAClC,oBAAQ,KAAK;AACb,gBAAI,CAAC,KAAK,UAAU,CAAC,OAAO,CAAC,IAAI,MAAM;AAGrC,mBAAK,QAAQ;AAAA,YACf;AAAA,UACF,OAAO;AAIL,oBAAQ;AAAA,UACV;AACA,cAAI,CAAC,SAAS,MAAM,IAAI,GAAG;AACzB,kBAAM,IAAI,UAAU,wCAAwC;AAAA,UAC9D;AACA,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,YAAY,KAAK,IAAI,OAAO,EAAE,MAAM;AACxC,iBAAO,YAAY,UAAU,IAAI,GAAG,KAAK,IAAI;AAAA,QAC/C;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,WAAW,KAAK,IAAI,OAAO,EAAE,KAAK;AACtC,iBAAO,WAAW,SAAS,IAAI,GAAG,KAAK,IAAI;AAAA,QAC7C;AAAA,QACA,SAAS,SAAU,MAAM,KAAK;AAC5B,cAAI,MAAM,QAAQ,IAAI,GAAG;AACvB,mBAAO,KAAK,SAAS,MAAM,GAAG;AAAA,UAChC;AACA,cAAI,gBAAgB,SAAS,OAAO;AAClC,gBAAI,CAAC,KAAK,IAAI,GAAG,GAAG;AAClB,mBAAK,IAAI,KAAK,KAAK,UAAU,IAAI,CAAC;AAAA,YACpC;AAAA,UACF,WAAW,KAAK,MAAM,QAAW;AAC/B,iBAAK,IAAI,KAAK,UAAU,IAAI;AAAA,UAC9B;AACA,eAAK,IAAI,OAAO,EAAE,IAAI,KAAK,aAAa,MAAM,GAAG,GAAG,OAAO,CAAC,CAAC;AAC7D,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,SAAU,OAAO,KAAK;AAC9B,cAAI,MAAM,WAAW,GAAG;AACtB,mBAAO;AAAA,UACT;AACA,kBAAQ,YAAY,KAAK;AACzB,cAAI,cAAc,IAAI,WAAW,MAAM,SAAS;AAChD,eAAK,WAAW,OAAO,GAAG;AAC1B,gBAAM,QAAQ,SAAU,MAAM;AAC5B,iBAAK,QAAQ,MAAM,GAAG;AACtB,gBAAI;AAAA,UACN,GAAG,IAAI;AACP,eAAK,UAAU,OAAO,GAAG;AACzB,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,YAAY,SAAU,OAAO,KAAK;AAChC,cAAI,gBAAgB,QAAQ,KAAK,EAAE,IAAI,SAAU,MAAM;AACrD,mBAAO,KAAK,aAAa,MAAM,GAAG;AAAA,UACpC,GAAG,IAAI;AACP,eAAK,IAAI,OAAO,EAAE,MAAM,eAAe,GAAG;AAC1C,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,SAAU,OAAO,KAAK;AACjC,cAAI,MAAM,QAAQ;AAChB,iBAAK,WAAW,QAAQ;AACxB,mBAAO,OAAO,UAAU,GAAG;AAC3B,iBAAK,UAAU,QAAQ;AAAA,UACzB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,SAAU,MAAM,YAAY,SAAS;AAChD,oBAAU,WAAW,CAAC;AACtB,cAAI,CAAC,QAAQ,OAAO;AAIlB,gBAAI,QAAQ,iBAAiB;AAC3B,mBAAK,gBAAgB,MAAM,OAAO;AAAA,YACpC,OAAO;AACL,mBAAK,YAAY,MAAM,OAAO;AAAA,YAChC;AAAA,UACF;AAKA,eAAK,IAAI,OAAO,EAAE,OAAO,MAAM;AAAA,YAC7B,QAAQ;AAAA,UACV,CAAC;AACD,cAAI,KAAK,UAAU,MAAM;AAEvB,iBAAK,QAAQ;AAAA,UACf;AAAA,QACF;AAAA;AAAA,QAEA,SAAS,SAAUW,KAAI;AACrB,iBAAO,KAAK,IAAI,OAAO,EAAE,IAAIA,GAAE;AAAA,QACjC;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,IAAI,OAAO,EAAE,QAAQ;AAAA,QACnC;AAAA,QACA,aAAa,WAAY;AACvB,iBAAO,KAAK,IAAI,OAAO,EAAE,OAAO,SAAU,MAAM;AAC9C,mBAAO,KAAK,UAAU;AAAA,UACxB,CAAC;AAAA,QACH;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,KAAK,IAAI,OAAO,EAAE,OAAO,SAAU,MAAM;AAC9C,mBAAO,KAAK,OAAO;AAAA,UACrB,CAAC;AAAA,QACH;AAAA,QACA,cAAc,WAAY;AACxB,iBAAO,KAAK,IAAI,OAAO,EAAE,MAAM;AAAA,QACjC;AAAA,QACA,aAAa,WAAY;AACvB,iBAAO,KAAK,IAAI,OAAO,EAAE,KAAK;AAAA,QAChC;AAAA;AAAA,QAEA,mBAAmB,SAAU,OAAO,KAAK;AACvC,gBAAM,OAAO,CAAC;AACd,cAAI,WAAW,IAAI;AACnB,cAAI,UAAU,IAAI;AAClB,cAAI,WAAW,IAAI;AACnB,cAAI,YAAY,UAAa,aAAa,QAAW;AACnD,sBAAU,WAAW;AAAA,UACvB;AAGA,cAAI,QAAQ,CAAC;AAGb,cAAI,QAAQ,CAAC;AACb,cAAI,UAAU;AACZ,yBAAa,MAAM,KAAK;AAAA,UAC1B;AACA,cAAI,SAAS;AACX,wBAAY,MAAM,KAAK;AAAA,UACzB;AACA,mBAAS,aAAa,OAAOwD,QAAO;AAClC,kBAAM,MAAM,iBAAiBA,OAAM,EAAE,GAAG,SAAU,GAAG,MAAM;AAIzD,kBAAI,MAAM,IAAI,GAAG;AACf;AAAA,cACF;AACA,kBAAI,OAAO,MAAM,QAAQ,IAAI;AAC7B,oBAAM,KAAK,IAAI;AACf,oBAAM,IAAI,IAAI;AACd,kBAAI,UAAU;AACZ,oBAAI,SAAS;AACX,8BAAY,OAAO,IAAI;AAAA,gBACzB;AACA,oBAAI,UAAU;AACZ,+BAAa,OAAO,IAAI;AAAA,gBAC1B;AAAA,cACF;AAAA,YACF,EAAE,KAAK,KAAK,CAAC;AACb,gBAAI,YAAYA,OAAM,OAAO,GAAG;AAC9B,kBAAI,UAAUA,OAAM,cAAc;AAClC,kBAAI,WAAW,QAAQ,OAAO,GAAG;AAC/B,oBAAI,CAAC,MAAM,QAAQ,EAAE,GAAG;AACtB,wBAAM,KAAK,OAAO;AAClB,+BAAa,OAAO,OAAO;AAAA,gBAC7B;AAAA,cACF;AAAA,YACF;AAAA,UACF;AACA,mBAAS,YAAY,OAAOA,QAAO;AACjC,kBAAM,MAAM,gBAAgBA,OAAM,EAAE,GAAG,SAAU,GAAG,MAAM;AAIxD,kBAAI,MAAM,IAAI,GAAG;AACf;AAAA,cACF;AACA,kBAAI,OAAO,MAAM,QAAQ,IAAI;AAC7B,oBAAM,KAAK,IAAI;AACf,oBAAM,IAAI,IAAI;AACd,kBAAI,UAAU;AACZ,oBAAI,SAAS;AACX,8BAAY,OAAO,IAAI;AAAA,gBACzB;AACA,oBAAI,UAAU;AACZ,+BAAa,OAAO,IAAI;AAAA,gBAC1B;AAAA,cACF;AAAA,YACF,EAAE,KAAK,KAAK,CAAC;AACb,gBAAI,YAAYA,OAAM,OAAO,GAAG;AAC9B,kBAAI,SAASA,OAAM,cAAc;AACjC,kBAAI,UAAU,OAAO,OAAO,GAAG;AAC7B,oBAAI,CAAC,MAAM,OAAO,EAAE,GAAG;AACrB,wBAAM,KAAK,MAAM;AACjB,8BAAY,OAAO,MAAM;AAAA,gBAC3B;AAAA,cACF;AAAA,YACF;AAAA,UACF;AAGA,cAAI,IAAI,MAAM;AACZ,gBAAI,gBAAgB,MAAM,iBAAiB;AAAA,cACzC,MAAM;AAAA,YACR,CAAC;AAGD,gBAAI,mBAAmB,CAAC;AACxB,0BAAc,QAAQ,SAAU,MAAM;AACpC,kBAAI,KAAK,UAAU,GAAG;AACpB,iCAAiB,KAAK,EAAE,IAAI;AAAA,cAC9B;AAAA,YACF,CAAC;AACD,0BAAc,QAAQ,SAAU,MAAM;AACpC,kBAAI,KAAK,OAAO,GAAG;AACjB;AAAA,cACF;AACA,kBAAI,UAAU;AACZ,sBAAM,KAAK,iBAAiB,KAAK,EAAE,GAAG,SAAUC,SAAQ,MAAM;AAC5D,sBAAI,CAAC,MAAM,IAAI,GAAG;AAChB,wBAAI,WAAW,KAAK,QAAQ,IAAI;AAChC,wBAAI,MAAM,SAAS;AACnB,wBAAI,SAAS,IAAI;AACjB,wBAAI,SAAS,IAAI;AACjB,wBAAI,WAAW,OAAO;AACtB,wBAAI,WAAW,OAAO;AAGtB,wBAAI,CAAC,IAAI,mBAAmB,YAAY,iBAAiB,QAAQ,KAAK,YAAY,iBAAiB,QAAQ,GAAG;AAC5G;AAAA,oBACF;AACA,0BAAM,KAAK,KAAK,QAAQ,IAAI,CAAC;AAC7B,0BAAM,IAAI,IAAI;AAAA,kBAChB;AAAA,gBACF,EAAE,KAAK,IAAI,CAAC;AAAA,cACd;AACA,kBAAI,SAAS;AACX,sBAAM,KAAK,gBAAgB,KAAK,EAAE,GAAG,SAAUA,SAAQ,MAAM;AAC3D,sBAAI,CAAC,MAAM,IAAI,GAAG;AAChB,wBAAI,WAAW,KAAK,QAAQ,IAAI;AAChC,wBAAI,MAAM,SAAS;AACnB,wBAAI,SAAS,IAAI;AACjB,wBAAI,SAAS,IAAI;AACjB,wBAAI,WAAW,OAAO;AACtB,wBAAI,WAAW,OAAO;AAGtB,wBAAI,CAAC,IAAI,mBAAmB,YAAY,iBAAiB,QAAQ,KAAK,YAAY,iBAAiB,QAAQ,GAAG;AAC5G;AAAA,oBACF;AACA,0BAAM,KAAK,KAAK,QAAQ,IAAI,CAAC;AAC7B,0BAAM,IAAI,IAAI;AAAA,kBAChB;AAAA,gBACF,EAAE,KAAK,IAAI,CAAC;AAAA,cACd;AAAA,YACF,GAAG,IAAI;AAAA,UACT;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,SAAU,OAAO,KAAK;AAClC,kBAAQ,MAAM,CAAC;AACf,cAAI,UAAU,IAAI;AAClB,cAAI,WAAW,IAAI;AACnB,cAAI,YAAY,UAAa,aAAa,QAAW;AACnD,sBAAU,WAAW;AAAA,UACvB;AACA,cAAI,YAAY,KAAK,kBAAkB,OAAO,GAAG,EAAE,OAAO,SAAU,KAAK,MAAM;AAC7E,gBAAI,MAAM,KAAK;AACf,gBAAI,SAAS,IAAI;AACjB,gBAAI,SAAS,IAAI;AACjB,gBAAI,OAAO,KAAK,QAAQ,GAAG;AAG3B,gBAAI,WAAW,MAAM,QAAQ,IAAI,KAAK,CAAC,IAAI,OAAO,EAAE,GAAG;AACrD,kBAAI,gBAAgB,KAAK,QAAQ,OAAO,EAAE;AAC1C,kBAAI,cAAc,UAAU,GAAG;AAC7B,oBAAI,QAAQ,iBAAiB,kBAAkB,UAAU,CAAC,IAAI,QAAQ,CAAC,cAAc,aAAa,KAAK,IAAI;AACzG,sBAAI,OAAO,EAAE,IAAI;AAAA,gBACnB;AAAA,cACF;AAAA,YACF;AAGA,gBAAI,YAAY,MAAM,QAAQ,IAAI,KAAK,CAAC,IAAI,OAAO,EAAE,GAAG;AACtD,kBAAI,gBAAgB,KAAK,QAAQ,OAAO,EAAE;AAC1C,kBAAI,cAAc,UAAU,GAAG;AAC7B,oBAAI,QAAQ,iBAAiB,kBAAkB,UAAU,CAAC,IAAI,QAAQ,CAAC,cAAc,aAAa,KAAK,IAAI;AACzG,sBAAI,OAAO,EAAE,IAAI;AAAA,gBACnB;AAAA,cACF;AAAA,YACF;AACA,mBAAO;AAAA,UACT,EAAE,KAAK,IAAI,GAAG,CAAC,CAAC;AAChB,cAAI,MAAM,OAAO,GAAG;AAClB,gBAAI,SAAS;AACX,kBAAI,aAAa,MAAM,cAAc;AACrC,kBAAI,cAAc,WAAW,UAAU,KAAK,CAAC,UAAU,WAAW,EAAE,GAAG;AACrE,0BAAU,WAAW,EAAE,IAAI;AAAA,cAC7B;AAAA,YACF;AACA,gBAAI,UAAU;AACZ,kBAAI,aAAa,MAAM,cAAc;AACrC,kBAAI,cAAc,WAAW,UAAU,KAAK,CAAC,UAAU,WAAW,EAAE,GAAG;AACrE,0BAAU,WAAW,EAAE,IAAI;AAAA,cAC7B;AAAA,YACF;AAAA,UACF;AACA,iBAAO,QAAQ,SAAS;AAAA,QAC1B;AAAA,QACA,mBAAmB,WAChB;AACD,cAAI,iBAAiB,MAAM,KAAK,SAAS,EAAE,IAAI,SAAU,MAAM;AAC7D,gBAAI,YAAY,CAAC;AACjB,gBAAI,WAAW,KAAK,IAAI,QAAQ;AAChC,mBAAO,UAAU;AACf,wBAAU,KAAK,QAAQ;AACvB,yBAAW,KAAK,QAAQ,QAAQ,EAAE,IAAI,QAAQ;AAAA,YAChD;AACA,mBAAO;AAAA,UACT,GAAG,IAAI;AACP,2BAAiB,eAAe,KAAK,SAAU,GAAG,GAAG;AACnD,mBAAO,EAAE,SAAS,EAAE;AAAA,UACtB,CAAC;AACD,cAAI,iBAAiB,QAAQ,eAAe,MAAM,CAAC,EAAE,KAAK,SAAU,UAAU;AAC5E,mBAAO,eAAe,MAAM,SAAU,eAAe;AACnD,qBAAO,cAAc,SAAS,QAAQ;AAAA,YACxC,CAAC;AAAA,UACH,CAAC;AACD,iBAAO,KAAK,QAAQ,cAAc;AAAA,QACpC;AAAA;AAAA;AAAA;AAAA,QAIA,eAAe,SAAU,SAAS,KAAK;AACrC,gBAAM,OAAO,CAAC;AACd,cAAI,MAAM,CAAC;AAEX,eAAK,OAAO,SAAS,SAAU,IAAI;AACjC,gBAAI,OAAO,SAAS;AAClB,kBAAI,KAAK,EAAE;AAAA,YACb;AAAA,UACF,GAAG,OAAO,CAAC,GAAG,KAAK;AAAA,YACjB,UAAU;AAAA,UACZ,CAAC,CAAC;AACF,iBAAO;AAAA,QACT;AAAA,QACA;AAAA;AAAA;AAAA;AAAA,QAIA,eAAe,SAAU,OAAO,KAAK;AACnC,cAAI,WAAW,KAAK,YAAY,OAAO,GAAG;AAC1C,iBAAO,KAAK,WAAW,QAAQ;AAAA,QACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,aAAa,SAAU,OAAO,KAAK;AACjC,gBAAM,OAAO,CAAC;AACd,cAAI,WAAW,CAAC;AAEhB,cAAI,UAAU,CAAC;AACf,cAAI,WAAW,CAAC;AAChB,cAAI,QAAQ,CAAC;AACb,kBAAQ,KAAK,EAAE,QAAQ,SAAU,MAAM;AACrC,gBAAI,CAAC,QAAQ,KAAK,EAAE,GAAG;AACrB,uBAAS,KAAK,IAAI;AAClB,sBAAQ,KAAK,EAAE,IAAI;AACnB,kBAAI,KAAK,OAAO,GAAG;AACjB,sBAAM,KAAK,IAAI;AAAA,cACjB,OAAO;AACL,yBAAS,KAAK,IAAI;AAAA,cACpB;AAAA,YACF;AACA,gBAAI,IAAI,MAAM;AACZ,kBAAI,SAAS,KAAK,iBAAiB;AAAA,gBACjC,MAAM;AAAA,cACR,CAAC;AACD,qBAAO,QAAQ,SAAU,OAAO;AAC9B,oBAAI,CAAC,QAAQ,MAAM,EAAE,GAAG;AACtB,2BAAS,KAAK,KAAK;AACnB,0BAAQ,MAAM,EAAE,IAAI;AACpB,sBAAI,MAAM,OAAO,GAAG;AAClB,0BAAM,KAAK,KAAK;AAAA,kBAClB,OAAO;AACL,6BAAS,KAAK,KAAK;AAAA,kBACrB;AAAA,gBACF;AAAA,cACF,CAAC;AAAA,YACH;AAAA,UACF,CAAC;AACD,gBAAM,QAAQ,SAAU,MAAM;AAE5B,gBAAI,MAAM,KAAK;AACf,gBAAI,SAAS,IAAI;AACjB,gBAAI,SAAS,IAAI;AACjB,gBAAI,OAAO,MAAM,CAAC,QAAQ,OAAO,EAAE,GAAG;AACpC,kBAAI,gBAAgB,KAAK,QAAQ,OAAO,EAAE;AAC1C,uBAAS,KAAK,aAAa;AAC3B,sBAAQ,cAAc,EAAE,IAAI;AAC5B,uBAAS,KAAK,aAAa;AAAA,YAC7B;AACA,gBAAI,OAAO,MAAM,CAAC,QAAQ,OAAO,EAAE,GAAG;AACpC,kBAAI,gBAAgB,KAAK,QAAQ,OAAO,EAAE;AAC1C,uBAAS,KAAK,KAAK,QAAQ,OAAO,EAAE,CAAC;AACrC,sBAAQ,cAAc,EAAE,IAAI;AAC5B,uBAAS,KAAK,aAAa;AAAA,YAC7B;AAAA,UACF,GAAG,IAAI;AACP,mBAAS,QAAQ,SAAU,SAAS;AAElC,gBAAIC,SAAQ,KAAK,kBAAkB,SAAS,GAAG;AAC/C,YAAAA,OAAM,QAAQ,SAAU,MAAM;AAC5B,kBAAI,MAAM,KAAK;AACf,kBAAI,SAAS,IAAI;AACjB,kBAAI,SAAS,IAAI;AACjB,kBAAI,CAAC,QAAQ,KAAK,EAAE,KAAK,OAAO,MAAM,QAAQ,OAAO,EAAE,KAAK,OAAO,MAAM,QAAQ,OAAO,EAAE,GAAG;AAC3F,yBAAS,KAAK,IAAI;AAClB,wBAAQ,KAAK,EAAE,IAAI;AAAA,cACrB;AAAA,YACF,CAAC;AAAA,UACH,GAAG,IAAI;AACP,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,iBAAiB,SAAU,SAAS,KAAK;AACvC,gBAAM,OAAO,CAAC;AACd,cAAI,MAAM,CAAC;AAEX,eAAK,OAAO,SAAS,SAAU,IAAI;AACjC,gBAAI,OAAO,SAAS;AAClB,kBAAI,KAAK,EAAE;AAAA,YACb;AAAA,UACF,GAAG,OAAO,CAAC,GAAG,KAAK;AAAA,YACjB,SAAS;AAAA,UACX,CAAC,CAAC;AACF,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,QAAQ,SAAU,SAAS,UAAU,KAAK;AACxC,gBAAM,OAAO,CAAC;AACd,cAAI,IAAI,cAAc;AACpB,iBAAK,IAAI,SAAS,UAAU,GAAG;AAAA,UACjC,OAAO;AACL,iBAAK,IAAI,SAAS,UAAU,GAAG;AAAA,UACjC;AAAA,QACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAUA,KAAK,SAAU,SAAS,UAAU,KAAK;AACrC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,UAAU,CAAC;AACf,cAAI,WAAW,CAAC;AAChB,cAAI,QAAQ,CAAC;AACb,gBAAM,KAAK,OAAO;AAClB,mBAAS,QAAQ,EAAE,IAAI;AACvB,iBAAO,MAAM,SAAS,GAAG;AACvB,gBAAI,OAAO,MAAM,MAAM;AACvB,gBAAI,QAAQ,KAAK,EAAE,GAAG;AACpB;AAAA,YACF;AACA,oBAAQ,KAAK,EAAE,IAAI;AACnB,gBAAI,SAAS,KAAK,MAAM,MAAM,SAAS,KAAK,EAAE,CAAC,MAAM,OAAO;AAC1D;AAAA,YACF;AACA,gBAAI,YAAY,KAAK,aAAa,MAAM,GAAG;AAC3C,qBAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,IAAI,GAAG,KAAK;AAChD,kBAAI,WAAW,UAAU,CAAC;AAC1B,uBAAS,SAAS,EAAE,IAAI,SAAS,KAAK,EAAE,IAAI;AAC5C,oBAAM,KAAK,QAAQ;AAAA,YACrB;AAAA,UACF;AAAA,QACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,KAAK,SAAU,SAAS,UAAU,KAAK;AACrC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,UAAU,CAAC;AACf,cAAI,WAAW,CAAC;AAChB,cAAI,QAAQ,CAAC;AACb,gBAAM,KAAK,OAAO;AAClB,mBAAS,QAAQ,EAAE,IAAI;AACvB,iBAAO,MAAM,SAAS,GAAG;AACvB,gBAAI,OAAO,MAAM,IAAI;AACrB,gBAAI,QAAQ,KAAK,EAAE,GAAG;AACpB;AAAA,YACF;AACA,oBAAQ,KAAK,EAAE,IAAI;AACnB,gBAAI,SAAS,KAAK,MAAM,MAAM,SAAS,KAAK,EAAE,CAAC,MAAM,OAAO;AAC1D;AAAA,YACF;AACA,gBAAI,YAAY,KAAK,aAAa,MAAM,GAAG;AAC3C,gBAAI,YAAY,MAAM;AACtB,qBAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,IAAI,GAAG,KAAK;AAChD,kBAAI,WAAW,UAAU,CAAC;AAC1B,uBAAS,SAAS,EAAE,IAAI,SAAS,KAAK,EAAE,IAAI;AAC5C,oBAAM,OAAO,WAAW,GAAG,QAAQ;AAAA,YACrC;AAAA,UACF;AAAA,QACF;AAAA;AAAA,QAEA,YAAY,WAAY;AACtB,cAAI,UAAU,CAAC;AACf,gBAAM,KAAK,QAAQ,SAAUD,SAAQ,MAAM;AACzC,gBAAI,CAAC,KAAK,IAAI,IAAI,KAAK,QAAQ,KAAK,IAAI,IAAI,CAAC,GAAG;AAC9C,sBAAQ,KAAK,KAAK,QAAQ,IAAI,CAAC;AAAA,YACjC;AAAA,UACF,EAAE,KAAK,IAAI,CAAC;AACZ,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,UAAU,WAAY;AACpB,cAAI,QAAQ,CAAC;AACb,gBAAM,KAAK,QAAQ,SAAUA,SAAQ,MAAM;AACzC,gBAAI,CAAC,KAAK,KAAK,IAAI,KAAK,QAAQ,KAAK,KAAK,IAAI,CAAC,GAAG;AAChD,oBAAM,KAAK,KAAK,QAAQ,IAAI,CAAC;AAAA,YAC/B;AAAA,UACF,EAAE,KAAK,IAAI,CAAC;AACZ,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,UAAU,SAAU,SAAS;AAC3B,iBAAO,CAAC,KAAK,IAAI,QAAQ,EAAE,KAAK,QAAQ,KAAK,IAAI,QAAQ,EAAE,CAAC;AAAA,QAC9D;AAAA;AAAA,QAEA,QAAQ,SAAU,SAAS;AACzB,iBAAO,CAAC,KAAK,KAAK,QAAQ,EAAE,KAAK,QAAQ,KAAK,KAAK,QAAQ,EAAE,CAAC;AAAA,QAChE;AAAA;AAAA,QAEA,aAAa,SAAU,UAAU,UAAU;AACzC,cAAI,cAAc;AAClB,eAAK,OAAO,UAAU,SAAU,SAAS;AACvC,gBAAI,YAAY,YAAY,YAAY,UAAU;AAChD,4BAAc;AACd,qBAAO;AAAA,YACT;AAAA,UACF,GAAG;AAAA,YACD,UAAU;AAAA,UACZ,CAAC;AACD,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,eAAe,SAAU,UAAU,UAAU;AAC3C,cAAI,gBAAgB;AACpB,eAAK,OAAO,UAAU,SAAU,SAAS;AACvC,gBAAI,YAAY,YAAY,YAAY,UAAU;AAChD,8BAAgB;AAChB,qBAAO;AAAA,YACT;AAAA,UACF,GAAG;AAAA,YACD,SAAS;AAAA,UACX,CAAC;AACD,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,YAAY,SAAU,UAAU,UAAU,KAAK;AAC7C,gBAAM,OAAO,CAAC;AACd,cAAI,UAAU,IAAI;AAClB,cAAI,WAAW,IAAI;AACnB,cAAI,YAAY,UAAa,aAAa,QAAW;AACnD,sBAAU,WAAW;AAAA,UACvB;AACA,cAAI,aAAa;AACjB,eAAK,kBAAkB,UAAU,GAAG,EAAE,QAAQ,SAAU,MAAM;AAC5D,gBAAI,MAAM,KAAK;AACf,gBAAI,SAAS,IAAI;AACjB,gBAAI,SAAS,IAAI;AAGjB,gBAAI,WAAW,MAAM,QAAQ,IAAI,KAAK,OAAO,OAAO,SAAS,IAAI;AAC/D,2BAAa;AACb,qBAAO;AAAA,YACT;AAGA,gBAAI,YAAY,MAAM,QAAQ,IAAI,KAAK,OAAO,OAAO,SAAS,IAAI;AAChE,2BAAa;AACb,qBAAO;AAAA,YACT;AAAA,UACF,CAAC;AACD,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,iBAAiB,SAAU,OAAO,KAAK;AACrC,eAAK,kBAAkB,KAAK,EAAE,QAAQ,SAAU,MAAM;AACpD,iBAAK,IAAI,KAAK,WAAW,OAAO,OAAO,MAAM,KAAK,WAAW,UAAU;AAAA,cACrE,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG,GAAG;AAAA,UACR,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,aAAa,SAAU,OAAO,KAAK;AACjC,iBAAO,KAAK,kBAAkB,KAAK,GAAG,UAAU,GAAG;AAAA,QACrD;AAAA;AAAA,QAEA,qBAAqB,SAAU,GAAG;AAChC,iBAAO,KAAK,YAAY,EAAE,OAAO,SAAU,IAAI;AAC7C,mBAAO,GAAG,QAAQ;AAAA,cAChB,QAAQ;AAAA,YACV,CAAC,EAAE,cAAc,CAAC;AAAA,UACpB,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,kBAAkB,SAAUvE,OAAM,KAAK;AACrC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,IAAI,IAAI,KAAKA,KAAI;AACrB,cAAI,SAAS,IAAI;AACjB,cAAI,WAAW,OAAQ,UAAS;AAChC,cAAI,SAAS,SAAS,iBAAiB;AACvC,iBAAO,KAAK,YAAY,EAAE,OAAO,SAAU,IAAI;AAC7C,mBAAO,EAAE,MAAM,EAAE,GAAG,QAAQ;AAAA,cAC1B,QAAQ;AAAA,YACV,CAAC,CAAC;AAAA,UACJ,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,wBAAwB,SAAU,SAAS,KAAK;AAC9C,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,WAAW,IAAI;AACnB,cAAI,aAAa,OAAQ,YAAW;AACpC,cAAIb,QAAO,QAAQ,QAAQ,EAAE,mBAAmB,QAAQ,MAAM,CAAC;AAC/D,cAAI,WAAW,aAAa,SAAS,KAAK,iBAAiBA,KAAI,IAAI,KAAK,oBAAoB,aAAaA,OAAM,QAAQ,CAAC;AAExH,iBAAO,SAAS,OAAO,SAAU,IAAI;AACnC,mBAAO,QAAQ,OAAO,GAAG,MAAM,CAAC,GAAG,aAAa,OAAO;AAAA,UACzD,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,SAAS,WAAY;AACnB,iBAAO,KAAK,aAAa,KAAK,SAAS,CAAC;AAAA,QAC1C;AAAA;AAAA,QAEA,cAAc,SAAU,OAAO,KAAK;AAClC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,SAAS,IAAI;AACjB,cAAI,WAAW,OAAQ,UAAS;AAChC,iBAAO,QAAQ,KAAK,EAAE,OAAO,SAAU,MAAM,MAAM;AACjD,gBAAIa,QAAO,KAAK,QAAQ;AAAA,cACtB;AAAA,YACF,CAAC;AACD,gBAAI,CAACA,OAAM;AACT,qBAAO;AAAA,YACT;AACA,gBAAI,MAAM;AACR,qBAAO,KAAK,MAAMA,KAAI;AAAA,YACxB;AACA,mBAAOA;AAAA,UACT,GAAG,IAAI;AAAA,QACT;AAAA,QACA,WAAW,SAAU,IAAI,IAAI,KAAK;AAEhC,cAAI,QAAQ,KAAK,SAAS,EAAE,OAAO,SAAU,MAAM;AACjD,mBAAO,CAAC,KAAK,WAAW;AAAA,UAC1B,CAAC;AACD,iBAAO,OAAO,aAAa,IAAI,IAAI,GAAG;AACtC,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,SAAU,OAAO,QAAQ,KAAK;AACpC,iBAAO,KAAK,YAAY,OAAO,QAAQ,KAAK,SAAS,GAAG,GAAG;AAAA,QAC7D;AAAA,QACA,aAAa,SAAU,OAAO,QAAQ,OAAO,KAAK;AAGhD,cAAIb,QAAO,KAAK,aAAa,KAAK;AAClC,cAAIA,OAAM;AACR,gBAAI,KAAK,KAAK,IAAI,QAAQA,MAAK,OAAO,CAAC;AACvC,gBAAI,KAAK,KAAK,IAAI,SAASA,MAAK,QAAQ,CAAC;AACzC,mBAAO,OAAO,SAAS,IAAI,IAAIA,MAAK,OAAO,GAAG,GAAG;AAAA,UACnD;AACA,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,MAAMoB,OAAM;AAChC,UAAAA,QAAOA,SAAQ,CAAC;AAChB,eAAK,SAAS,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK;AACnD,iBAAO,KAAK,QAAQ,eAAe,OAAO,CAAC,GAAGA,OAAM;AAAA,YAClD,WAAW;AAAA,UACb,CAAC,CAAC;AAAA,QACJ;AAAA,QACA,WAAW,SAAU,MAAMA,OAAM;AAC/B,UAAAA,QAAOA,SAAQ,CAAC;AAChB,eAAK,SAAS,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK;AACnD,iBAAO,KAAK,QAAQ,cAAc,OAAO,CAAC,GAAGA,OAAM;AAAA,YACjD,WAAW;AAAA,UACb,CAAC,CAAC;AAAA,QACJ;AAAA,QACA,gBAAgB,SAAU,MAAM;AAC9B,cAAI,UAAU,KAAK;AACnB,cAAI;AACJ,cAAI,UAAU,WAAW,GAAG;AAC1B,oBAAQ,OAAO,KAAK,OAAO;AAAA,UAC7B,WAAW,MAAM,QAAQ,IAAI,GAAG;AAC9B,oBAAQ;AAAA,UACV,OAAO;AACL,oBAAQ,CAAC,IAAI;AAAA,UACf;AACA,iBAAO,MAAM,KAAK,SAAU,OAAO;AACjC,mBAAO,QAAQ,KAAK,IAAI;AAAA,UAC1B,CAAC;AAAA,QACH;AAAA,MACF,GAAG;AAAA,QACD,aAAa;AAAA,UACX,YAAY,SAAU,OAAO,MAAM;AAEjC,gBAAI,MAAM,KAAK;AACf,gBAAI,SAAS,IAAI;AACjB,gBAAI,SAAS,IAAI;AACjB,gBAAI,OAAO,MAAM,OAAO,IAAI;AAC1B,kBAAI,cAAc,KAAK,cAAc;AACrC,kBAAI,aAAa;AACf,oBAAI,iBAAiB,MAAM,kBAAkB,aAAa;AAAA,kBACxD,UAAU;AAAA,gBACZ,CAAC;AACD,oBAAI,YAAY,eAAe,OAAO,SAAU,OAAO;AACrD,sBAAIkE,OAAM,MAAM;AAChB,sBAAI,UAAUA,KAAI;AAClB,sBAAI,UAAUA,KAAI;AAClB,yBAAO,WAAW,QAAQ,OAAO,OAAO,OAAO,CAAC,QAAQ,QAAQ,QAAQ,SAAS,OAAO,SAAS,WAAW,QAAQ,OAAO,OAAO,OAAO,CAAC,QAAQ,QAAQ,QAAQ,SAAS,OAAO;AAAA,gBACpL,CAAC;AACD,oBAAI,UAAU,SAAS,GAAG;AACxB,yBAAO;AAAA,gBACT;AAAA,cACF;AAAA,YACF;AACA,mBAAO;AAAA,UACT;AAAA,UACA,aAAa,SAAU,QAAQ,MAAM;AACnC,gBAAI,MAAM,KAAK;AACf,gBAAI,SAAS,IAAI;AACjB,gBAAI,SAAS,IAAI;AACjB,mBAAO,OAAO,MAAM,OAAO;AAAA,UAC7B;AAAA,QACF;AAAA,MACF,CAAC;AACD,eAAS,MAAM,WAAW,CAAC,cAAc,YAAY,aAAa,GAAG,SAAS,KAAK;AACnF,UAAI,QAAQ,CAAC;AACb,UAAI,OAAO,SAAS,KAAK,OAAO;AAAA,QAC9B,SAAS,CAAC;AAAA,QACV,OAAO;AAAA,QACP,sBAAsB,mBAAmB,QAAQ;AAAA,QACjD,yBAAyB;AAAA,QACzB,cAAc,OAAO;AAAA,QACrB,UAAU;AAAA,QACV,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,iBAAiB;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,aAAa,KAAK;AAAA,QAClB,WAAW,KAAK;AAAA,QAChB,aAAa,SAAU,SAAS;AAC9B,eAAK,0BAA0B,WAAW,CAAC,CAAC,QAAQ;AACpD,eAAK,UAAU,OAAO,CAAC,GAAG,KAAK,SAAS,OAAO;AAC/C,mBAAS,KAAK,KAAK,MAAM,OAAO;AAAA,QAClC;AAAA,QACA,YAAY,WAAY;AACtB,gBAAM,KAAK,GAAG,IAAI;AAClB,eAAK,SAAS,KAAK,QAAQ,SAAS,KAAK,YAAY;AACrD,eAAK,KAAK;AAAA,QACZ;AAAA,QACA,SAAS,WAAY;AACnB,cAAI,KAAK,YAAY;AACnB,iBAAK,IAAI,OAAO;AAAA,UAClB,OAAO;AACL,iBAAK,IAAI,OAAO;AAAA,UAClB;AAAA,QACF;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO,KAAK,GAAG,eAAe;AAAA,QAChC;AAAA,QACA,gBAAgB,SAAU,UAAU;AAClC,uBAAa,WAAW,OAAO,MAAM,UAAU;AAC/C,cAAI,UAAU;AACZ,gBAAI,QAAQ,KAAK;AACjB,gBAAI,YAAY9G,GAAE,UAAU,QAAQ,QAAQ,OAAO;AACnD,gBAAI,MAAM,aAAa,UAAU,SAAS;AAC1C,aAAC,QAAQ,KAAK,MAAM,KAAK,KAAK,MAAM,EAAE,OAAO,IAAI,QAAQ;AACzD,iBAAK,aAAa,IAAI;AAAA,UACxB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,SAAU,eAAe,MAAM;AAC5C,cAAI,cAAc;AAClB,iBAAO,eAAe,YAAY,aAAa,GAAG;AAChD,gBAAI,iBAAiB,YAAY,aAAa,aAAa;AAE3D,gBAAI,gBAAgB;AAClB,qBAAO;AAAA,YACT;AAEA,gBAAI,gBAAgB,KAAK,IAAI;AAC3B,qBAAO;AAAA,YACT;AAEA,0BAAc,YAAY;AAAA,UAC5B;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,gBAAgB,WAAY;AAC1B,cAAI,CAAC,KAAK,IAAI;AACZ,gBAAI,UAAU,OAAO,MAAM,SAAS;AACpC,gBAAI,QAAQ,OAAO,CAAC,GAAG,OAAO,MAAM,YAAY,CAAC;AACjD,gBAAI,QAAQ,OAAO,CAAC,GAAG,OAAO,MAAM,OAAO,CAAC;AAC5C,gBAAI,KAAK,IAAI;AACX,oBAAM,KAAK,OAAO,MAAM,IAAI;AAAA,YAC9B;AACA,iBAAK,WAAW,KAAK,eAAe,OAAO,CAAC;AAC5C,iBAAK,eAAe,KAAK;AACzB,iBAAK,UAAU,KAAK;AAAA,UACtB,OAAO;AACL,iBAAK,WAAW,OAAO,MAAM,IAAI,CAAC;AAAA,UACpC;AACA,eAAK,mBAAmB;AAAA,QAC1B;AAAA,QACA,gBAAgB,SAAU,OAAO;AAC/B,cAAI,KAAK,YAAY;AACnB,iBAAK,IAAI,KAAK,KAAK;AAAA,UACrB,OAAO;AACL,iBAAK,IAAI,KAAK,KAAK;AAAA,UACrB;AAAA,QACF;AAAA,QACA,WAAW,SAAU,OAAO;AAC1B,eAAK,IAAI,IAAI,KAAK;AAAA,QACpB;AAAA,QACA,gBAAgB,SAAU,SAAS;AACjC,cAAI,KAAK,YAAY;AACnB,mBAAO,SAAS,gBAAgBA,GAAE,UAAU,KAAK,OAAO;AAAA,UAC1D,OAAO;AACL,mBAAO,SAAS,cAAc,OAAO;AAAA,UACvC;AAAA,QACF;AAAA;AAAA;AAAA,QAGA,aAAa,SAAU,IAAI;AACzB,eAAK,MAAM,cAAc,SAAS,IAAI,KAAK,SAAS,EAAE,EAAE;AACxD,eAAK,KAAK,KAAK,IAAI,CAAC;AACpB,cAAI,KAAK,YAAY;AACnB,iBAAK,MAAMA,GAAE,KAAK,EAAE;AAAA,UACtB;AAAA,QACF;AAAA,QACA,oBAAoB,WAAY;AAC9B,cAAIwD,aAAY,OAAO,MAAM,WAAW;AACxC,cAAI,CAACA,YAAW;AACd;AAAA,UACF;AACA,cAAI,oBAAoB,mBAAmBA,UAAS;AAEpD,cAAI,KAAK,YAAY;AACnB,iBAAK,IAAI,YAAYA,UAAS,EAAE,SAAS,iBAAiB;AAAA,UAC5D,OAAO;AACL,iBAAK,IAAI,YAAYA,UAAS,EAAE,SAAS,iBAAiB;AAAA,UAC5D;AAAA,QACF;AAAA,QACA,MAAM,WAAY;AAAA,QAGlB;AAAA,QACA,UAAU,WAAY;AAAA,QAGtB;AAAA,QACA,eAAe,WAAY;AAGzB,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,SAAU,OAAO,KAAK;AAC9B,gBAAM,OAAO,CAAC;AAId,cAAI,KAAK,SAAS,KAAK,2BAA2B,CAAC,IAAI,UAAU;AAC/D,mBAAO;AAAA,UACT;AACA,eAAK,qBAAqB;AAC1B,eAAK,kBAAkB,KAAK;AAC5B,eAAK;AAAA,YAAW,KAAK;AAAA,YAAsB;AAAA;AAAA,UAAoB;AAC/D,eAAK,QAAQ;AACb,iBAAO;AAAA,QACT;AAAA,QACA,mBAAmB,SAAU,OAAO;AAClC,kBAAQ,SAAS,KAAK;AACtB,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AACA,cAAIA,aAAY,KAAK,uBAAuB;AAC5C,cAAI,KAAK,YAAY;AACnB,iBAAK,IAAI,SAASA,UAAS;AAAA,UAC7B,OAAO;AACL,iBAAK,IAAI,SAASA,UAAS;AAAA,UAC7B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,sBAAsB,SAAU,OAAO;AACrC,kBAAQ,SAAS,KAAK;AACtB,cAAIA,aAAY,KAAK,uBAAuB;AAC5C,cAAI,KAAK,YAAY;AACnB,iBAAK,IAAI,YAAYA,UAAS;AAAA,UAChC,OAAO;AACL,iBAAK,IAAI,YAAYA,UAAS;AAAA,UAChC;AACA,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,UAAU,UAAU;AAAA,QAG1C;AAAA,QACA,QAAQ,WAAY;AAClB,eAAK,SAAS;AACd,eAAK,yBAAyB;AAC9B,gBAAM,KAAK,GAAG,IAAI;AAClB,mBAAS,KAAK,UAAU,OAAO,MAAM,MAAM,SAAS;AACpD,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AAAA,QAGtB;AAAA,QACA,mBAAmB,WAAY;AAE7B,iBAAO,qBAAqB,KAAK;AAAA,QACnC;AAAA,QACA,uBAAuB,SAAU,SAAS,QAAQZ,OAAM;AACtD,cAAI,CAAC,QAAQ;AACX,mBAAO;AAAA,UACT;AACA,UAAAA,UAASA,QAAO,CAAC;AACjB,cAAI,UAAU,KAAK,kBAAkB;AACrC,mBAAS,aAAa,QAAQ;AAC5B,gBAAI,SAAS,OAAO,SAAS;AAC7B,gBAAI,OAAO,WAAW,YAAY;AAChC,uBAAS,KAAK,MAAM;AAAA,YACtB;AACA,gBAAI,CAAC,QAAQ;AACX;AAAA,YACF;AACA,cAAE,OAAO,EAAE,GAAG,YAAY,SAASA,OAAM,OAAO,KAAK,IAAI,CAAC;AAAA,UAC5D;AACA,iBAAO;AAAA,QACT;AAAA,QACA,yBAAyB,SAAU,SAAS;AAC1C,YAAE,OAAO,EAAE,IAAI,KAAK,kBAAkB,CAAC;AACvC,iBAAO;AAAA,QACT;AAAA,QACA,wBAAwB,SAAU,QAAQA,OAAM;AAC9C,qBAAW,SAAS,OAAO,MAAM,gBAAgB;AACjD,iBAAO,KAAK,sBAAsB,UAAU,QAAQA,KAAI;AAAA,QAC1D;AAAA,QACA,0BAA0B,WAAY;AACpC,iBAAO,KAAK,wBAAwB,QAAQ;AAAA,QAC9C;AAAA,QACA,WAAW,SAAU,KAAKA,OAAM;AAC9B,cAAI,CAAC,KAAK;AACR,kBAAM,IAAI,MAAM,qCAAqC;AAAA,UACvD;AACA,cAAI,cAAc,IAAI;AACtB,cAAI,MAAM,OAAO,KAAK,MAAM;AAC5B,cAAIA,UAAS,QAAW;AACtB,gBAAI,CAAC,aAAa;AAChB,qBAAO,CAAC;AAAA,YACV;AACA,mBAAO,YAAY,GAAG,KAAK,CAAC;AAAA,UAC9B;AACA,0BAAgB,cAAc,IAAI,OAAO,CAAC;AAC1C,sBAAY,GAAG,MAAM,YAAY,GAAG,IAAI,CAAC;AACzC,iBAAO,YAAY,GAAG,GAAGA,KAAI;AAC7B,iBAAO;AAAA,QACT;AAAA,QACA,iBAAiB,SAAU,KAAK;AAC9B,eAAK,UAAU,KAAK;AAAA,YAClB,oBAAoB;AAAA,UACtB,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,QACA,sBAAsB,SAAU,KAAK;AACnC,iBAAO,CAAC,CAAC,KAAK,UAAU,GAAG,EAAE;AAAA,QAC/B;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,WAAY;AAClB,cAAI,OAAO,MAAM,KAAK,SAAS;AAI/B,cAAI,aAAa,KAAK,CAAC,KAAK,OAAO,CAAC,GAAG,KAAK,CAAC,CAAC,KAAK,CAAC;AACpD,cAAI,cAAc,KAAK,CAAC,KAAK,OAAO,CAAC,GAAG,KAAK,CAAC,CAAC,KAAK,CAAC;AAGrD,cAAI,WAAW,WAAW,UAAU,KAAK,aAAa,KAAK,UAAU,UAAU;AAO/E,qBAAW,SAAS,WAAY;AAC9B,gBAAI,OAAO,aAAa,YAAY;AAElC,uBAAS,MAAM,MAAM,SAAS;AAAA,YAChC;AACA,gBAAI,KAAK,OAAO,eAAe,UAAU;AAGvC,mBAAK,SAAS;AAAA,YAChB;AAGA,mBAAO;AAAA,UACT;AACA,qBAAW,OAAO,aAAa;AAC/B,iBAAO,SAAS,KAAK,OAAO,KAAK,MAAM,YAAY,WAAW;AAAA,QAChE;AAAA,MACF,CAAC;AACD,UAAI,qBAAqB;AACzB,UAAI,EAAE,SAAS,EAAE,sBAAsB,EAAE,MAAM,UAAU;AACvD,YAAI,WAAW,OAAO;AACtB,YAAI,WAAW;AACf,UAAE,MAAM,QAAQ,kBAAkB,IAAI;AAAA,UACpC,UAAU;AAAA,UACV,cAAc;AAAA,UACd,QAAQ,SAAU,OAAO;AACvB,gBAAI;AACJ,gBAAI,OAAO,CAAC,GACV,MAAM,UAAU,SAAS;AAC3B,mBAAO,QAAQ,EAAG,MAAK,GAAG,IAAI,UAAU,MAAM,CAAC;AAC/C,gBAAI,YAAY,MAAM;AACtB,gBAAI,SAAS,MAAM;AACnB,gBAAI,aAAa,EAAE,KAAK,MAAM;AAC9B,gBAAI,OAAM,oBAAI,KAAK,GAAE,QAAQ;AAC7B,gBAAI,QAAQ,eAAe,aAAa,MAAM,WAAW,YAAY;AACrE,gBAAI,QAAQ,YAAY,QAAQ,UAAU;AACxC,yBAAW,YAAY;AACvB,oBAAM,OAAO,UAAU;AAEvB,eAAC,MAAM,UAAU,SAAS,KAAK,MAAM,KAAK,CAAC,MAAM,KAAK,EAAE,OAAO,IAAI,CAAC;AAAA,YACtE,OAAO;AACL,yBAAW,YAAY;AAAA,YACzB;AAAA,UACF;AAAA,QACF;AAAA,MACF;AACA,UAAI,WAAW,SAASmE,YAAW;AACjC,YAAI,oBAAoB,CAAC,GACvB,MAAM,UAAU;AAClB,eAAO,MAAO,mBAAkB,GAAG,IAAI,UAAU,GAAG;AACpD,aAAK,oBAAoB;AAAA,MAC3B;AACA,eAAS,UAAU,WAAW,SAAS,SAAS,QAAQ,KAAK;AAC3D,YAAI,SAAS;AACb,YAAI,OAAO,CAAC,GACV,MAAM,UAAU,SAAS;AAC3B,eAAO,QAAQ,EAAG,MAAK,GAAG,IAAI,UAAU,MAAM,CAAC;AAC/C,YAAI,MAAM;AACV,YAAI,oBAAoB,IAAI;AAE5B,YAAI/G,GAAE,SAAS,GAAG,GAAG;AACnB,cAAI,UAAU,KAAK,CAAC;AACpB,cAAI,YAAY,OAAQ,WAAU;AAClC,iBAAO,QAAQ,GAAG,EAAE,QAAQ,SAAU8G,MAAK;AACzC,gBAAI,YAAYA,KAAI,CAAC;AACrB,gBAAIE,MAAKF,KAAI,CAAC;AACd,gBAAI,OAAOE,QAAO,YAAY;AAC5B;AAAA,YACF;AAEA,gBAAI,WAAW,kBAAkB,SAAS,GAAG;AAC3C,cAAAA,MAAKA,IAAG,KAAK,MAAMA,KAAI,CAAC,OAAO,EAAE,OAAO,iBAAiB,CAAC;AAAA,YAC5D;AACA,qBAAS,OAAO,SAAS,KAAK,QAAQ,QAAQ,WAAWA,GAAE;AAAA,UAC7D,CAAC;AAAA,QACH,WAES,OAAO,QAAQ,YAAY,OAAO,KAAK,CAAC,MAAM,YAAY;AACjE,cAAI,KAAK,KAAK,CAAC;AACf,cAAI,YAAY,KAAK,CAAC;AACtB,cAAI,cAAc,OAAQ,aAAY;AAEtC,cAAI,aAAa,kBAAkB,SAAS,GAAG;AAC7C,iBAAK,GAAG,KAAK,MAAM,IAAI,CAAC,SAAS,EAAE,OAAO,iBAAiB,CAAC;AAAA,UAC9D;AACA,mBAAS,OAAO,SAAS,KAAK,MAAM,QAAQ,KAAK,EAAE;AAAA,QACrD;AAAA,MACF;AACA,eAAS,UAAU,gBAAgB,SAAS,gBAAgB;AAC1D,iBAAS,OAAO,cAAc,KAAK,IAAI;AAAA,MACzC;AACA,UAAI,UAAU;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,UAAI,cAAc;AAAA,QAChB,OAAO;AAAA,QACP,MAAM;AAAA,QACN,OAAO;AAAA,QACP,OAAO;AAAA,QACP,QAAQ;AAAA,MACV;AACA,UAAI,aAAa,KAAK,OAAO;AAAA,QAC3B,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,cAAc;AAAA,QACd,SAAS;AAAA,UACP,MAAM;AAAA,QACR;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO,mBAAmB,KAAK,QAAQ,OAAO,QAAQ;AAAA,QACxD;AAAA,QACA,MAAM,WAAY;AAChB,eAAK,aAAa,CAAC;AAAA,QACrB;AAAA,QACA,kBAAkB,SAAU,MAAM,GAAG;AACnC,eAAK,GAAG,aAAa,MAAM,KAAK,YAAY,CAAC,CAAC;AAAA,QAChD;AAAA,QACA,YAAY,SAAU,MAAM;AAC1B,cAAI,MAAM;AACV,cAAI,KAAK,IAAI;AACb,cAAI,KAAK,eAAe,IAAI;AAC1B,eAAG,YAAY,IAAI;AAAA,UACrB;AAAA,QACF;AAAA,QACA,aAAa,SAAU,GAAG;AACxB,cAAI,MAAM;AACV,cAAI,KAAK,IAAI;AACb,cAAI,aAAa,IAAI;AACrB,cAAI,CAAC;AACL,gBAAM,IAAI;AACV,cAAI,YAAY,WAAW,CAAC;AAC5B,cAAI,WAAW;AACb,mBAAO;AAAA,UACT;AACA,sBAAY,WAAW,CAAC,IAAI,SAAS,cAAc,cAAc,IAAI,EAAE;AACvE,cAAI,YAAY;AAChB,mBAAS,YAAY,YAAY;AAC/B,uBAAW,CAAC;AACZ,gBAAI,WAAW,KAAK,WAAW,WAAW;AACxC,0BAAY;AACZ,kBAAI,cAAc,IAAI,GAAG;AACvB;AAAA,cACF;AAAA,YACF;AAAA,UACF;AACA,cAAI,cAAc,WAAW;AAC3B,gBAAI,gBAAgB,WAAW,SAAS;AAExC,eAAG,aAAa,WAAW,cAAc,WAAW;AAAA,UACtD,OAAO;AAEL,eAAG,aAAa,WAAW,GAAG,UAAU;AAAA,UAC1C;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,MAAM;AACV,cAAI,KAAK,IAAI;AACb,cAAI,aAAa,IAAI;AACrB,mBAAS,KAAK,YAAY;AACxB,eAAG,YAAY,WAAW,CAAC,CAAC;AAAA,UAC9B;AACA,eAAK,aAAa,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AACD,eAAS,UAAU,KAAK;AACtB,YAAI,CAAC,KAAK;AACR,iBAAO,CAAC;AAAA,QACV;AACA,YAAI,MAAM,QAAQ,GAAG,GAAG;AACtB,iBAAO;AAAA,QACT;AACA,eAAO,CAAC,GAAG;AAAA,MACb;AACA,UAAI,kBAAkB,KAAK,OAAO;AAAA,QAChC,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,WAAW;AAAA,QACX,gBAAgB;AAAA,QAChB,iBAAiB;AAAA,QACjB,YAAY;AAAA,QACZ,WAAW;AAAA,QACX,WAAW;AAAA,QACX,UAAU;AAAA,QACV,cAAc;AAAA,QACd,MAAM;AAAA,QACN,iBAAiB;AAAA,QACjB,iBAAiB;AAAA,QACjB,gBAAgB;AAAA,QAChB,wBAAwB;AAAA,QACxB,eAAe,SAAS,cAAc,UAAU,cAAc;AAC5D,cAAI,QAAQ,SAAS;AACrB,eAAK,WAAW;AAChB,eAAK,eAAe;AACpB,cAAI,OAAO;AACT,iBAAK,kBAAkB;AACvB,kBAAM,kBAAkB,MAAM,KAAK,gBAAgB,KAAK,eAAe;AAAA,UACzE;AAAA,QACF;AAAA,QACA,eAAe,SAAS,gBAAgB;AAEtC,eAAK,kBAAkB;AACvB,cAAI,MAAM;AACV,cAAI,WAAW,IAAI;AACnB,cAAI,eAAe,IAAI;AACvB,cAAI,CAAC,SAAS,UAAU,GAAG;AACzB,iBAAK,kBAAkB;AACvB,mBAAO;AAAA,UACT;AACA,eAAK,OAAO,UAAU,YAAY;AAClC,eAAK,MAAM;AACX,eAAK,UAAU;AACf,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,SAAS,SAAS,UAAU,cAAc;AAClD,cAAIC,SAAQ;AACZ,cAAI,iBAAiB,OAAQ,gBAAe;AAC5C,cAAI;AACJ,cAAI,OAAO,iBAAiB,UAAU;AACpC,YAAAA,UAAS,SAAS,eAAe,YAAY,GAAG,KAAKA,QAAO,CAAC;AAAA,UAC/D,WAAW,cAAc,YAAY,GAAG;AACtC,gBAAI,SAAS,SAAS,MAAM,OAAO;AACnC,gBAAI,QAAQ,aAAa;AACzB,gBAAI,UAAU,OAAQ,SAAQ;AAC9B,gBAAI,OAAO,aAAa;AACxB,gBAAI,WAAW,aAAa;AAC5B,gBAAI,UAAU,UAAU,MAAM;AAE5B,mBAAK,SAAS,cAAc,OAAO,QAAQ;AAAA,YAC7C,WAAW,CAAC,UAAU,MAAM;AAE1B,mBAAK,SAAS,aAAa,MAAM,QAAQ;AAAA,YAC3C,OAAO;AAEL,yBAAW,SAAS,eAAe,QAAQ,GAAG,KAAK,SAAS,CAAC;AAAA,YAC/D;AAAA,UACF,WAAW,cAAc;AACvB,iBAAKjH,GAAE,OAAO,YAAY;AAC1B,gBAAI,EAAE,cAAc,aAAa;AAC/B,mBAAK;AAAA,YACP;AAAA,UACF;AACA,iBAAO,KAAK,KAAK;AAAA,QACnB;AAAA,QACA,eAAe,SAAS,cAAc,UAAU,MAAM;AACpD,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,QAAQ,QAAQ;AACpB,cAAI,gBAAgB,SAAS;AAC7B,cAAI,aAAa,SAAS,cAAc,IAAI;AAC5C,cAAI,eAAe;AACjB,gBAAI,OAAO;AACT,kBAAI,cAAc,SAAS,IAAI,GAAG;AAChC,uBAAO;AAAA,cACT;AAGA,qBAAO,SAAS,oBAAoB,EAAE,QAAQ,EAAE,SAAS,UAAU;AAAA,YACrE,OAAO;AACL,qBAAO,SAAS,oBAAoB,IAAI,EAAE,SAAS,UAAU;AAAA,YAC/D;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,OAAO,SAAS,QAAQ;AACtB,cAAI,MAAM;AACV,cAAI,YAAY,IAAI;AACpB,cAAI,WAAW,IAAI;AACnB,cAAI,KAAK,IAAI;AACb,cAAI,UAAU,IAAI;AAClB,cAAI,iBAAiB,IAAI;AACzB,cAAI,yBAAyB,IAAI;AACjC,cAAI,kBAAkB,IAAI;AAC1B,cAAI,eAAe,IAAI;AACvB,cAAI,CAAC,aAAa,gBAAgB;AAChC;AAAA,UACF;AACA,cAAI,iBAAiB;AAGnB,iBAAK,OAAO,UAAU,YAAY;AAClC,iBAAK,UAAU;AACf;AAAA,UACF;AACA,cAAI,eAAe,SAAS;AAC5B,cAAI,QAAQ,SAAS;AACrB,cAAI,YAAY,QAAQ;AACxB,cAAI,WAAW;AACb,gBAAI;AACJ,gBAAI,wBAAwB;AAC1B,uBAAS;AACT,mBAAK,yBAAyB;AAAA,YAChC,OAAO;AACL,uBAASA,GAAE,GAAG,EAAE,SAAS,qBAAqB,EAAE,OAAO,EAAE;AAAA,YAC3D;AACA,iBAAK,iBAAiB;AACtB,kBAAM,aAAa,SAAS,EAAE,iBAAiB,OAAO,MAAM,QAAQ,CAAC;AAAA,UACvE,OAAO;AAEL,gBAAI,CAAC,GAAG,cAAc,GAAG,aAAa;AAEpC,2BAAa,OAAO,EAAE;AAAA,YACxB;AAAA,UACF;AAAA,QACF;AAAA,QACA,SAAS,SAAS,UAAU;AAC1B,cAAI,MAAM;AACV,cAAI,YAAY,IAAI;AACpB,cAAI,iBAAiB,IAAI;AACzB,cAAI,MAAM,IAAI;AACd,cAAI,CAAC,WAAW;AACd;AAAA,UACF;AACA,cAAI,gBAAgB;AAClB,iBAAK,iBAAiB;AACtB,iBAAK,yBAAyB;AAC9B,2BAAe,OAAO;AAAA,UACxB,OAAO;AACL,gBAAI,OAAO;AAAA,UACb;AAAA,QACF;AAAA,QACA,WAAW,SAAS,YAAY;AAC9B,cAAI,MAAM;AACV,cAAI,iBAAiB,IAAI;AACzB,cAAI,WAAW,IAAI;AACnB,cAAI,kBAAkB,IAAI;AAC1B,cAAI,CAAC,kBAAkB,SAAS,MAAM,OAAO,KAAK,iBAAiB;AACjE;AAAA,UACF;AACA,cAAI,kBAAkB,SAAS,uBAAuB;AACtD,cAAI,eAAe,SAAS,oBAAoB;AAChD,cAAI,kBAAkB,gBAAgB,SAAS,YAAY;AAC3D,yBAAe,KAAK,aAAaA,GAAE,wBAAwB,eAAe,CAAC;AAAA,QAC7E;AAAA,QACA,QAAQ,SAAS,SAAS;AACxB,cAAI,MAAM;AACV,cAAI,WAAW,IAAI;AACnB,cAAI,WAAW,IAAI;AACnB,cAAI,eAAe,IAAI;AACvB,cAAI,kBAAkB,IAAI;AAC1B,cAAImD,MAAK,IAAI;AACb,cAAI,iBAAiB;AACnB;AAAA,UACF;AACA,eAAK,kBAAkB;AACvB,cAAI,OAAO,KAAK,OAAO,KAAK,SAAS,UAAU,YAAY;AAC3D,cAAI,UAAU;AACZ,iBAAK,YAAY,UAAU,QAAQ;AAAA,UACrC;AACA,cAAI,MAAM;AACR,iBAAK,UAAU,UAAU,IAAI;AAC7B,iBAAK,MAAM;AAAA,UACb,OAAO;AACL,iBAAK,QAAQ;AACb,qBAAS,OAAO,0BAA0BA,KAAI,IAAI;AAAA,UACpD;AAAA,QACF;AAAA,QACA,UAAU,SAAS,WAAW;AAC5B,cAAI,MAAM;AACV,cAAI,OAAO,IAAI;AACf,cAAI,WAAW,IAAI;AACnB,cAAIA,MAAK,IAAI;AACb,cAAI,cAAc,IAAI;AACtB,cAAI,MAAM;AACR,iBAAK,YAAY,UAAU,IAAI;AAAA,UACjC;AACA,eAAK,QAAQ;AACb,sBAAY,WAAW,UAAUA,GAAE;AAAA,QACrC;AAAA,QACA,WAAW,SAAS,UAAU,WAAW,OAAO;AAAA,QAEhD;AAAA,QACA,aAAa,SAAS,YAAY,WAAW,OAAO;AAAA,QAEpD;AAAA;AAAA,QAGA,0BAA0B,SAAS,yBAAyB,UAAU;AACpE,cAAIE,cAAa,OAAO,MAAM,mBAAmB;AACjD,cAAI,CAAC,MAAM,QAAQA,WAAU,KAAKA,YAAW,WAAW,GAAG;AACzD;AAAA,UACF;AACA,eAAK,SAAS,SAAS,OAAO,UAAU,KAAK,qBAAqB;AAAA,QACpE;AAAA,QACA,uBAAuB,SAAS,wBAAwB;AACtD,cAAI,MAAM;AACV,cAAI,WAAW,IAAI;AACnB,cAAI,CAAC,UAAU;AACb;AAAA,UACF;AACA,cAAI,QAAQ,SAAS;AACrB,cAAI,QAAQ,SAAS;AACrB,cAAIA,cAAa,OAAO,MAAM,mBAAmB;AACjD,cAAI,CAACA,YAAW,KAAK,SAAU,WAAW;AACxC,mBAAO,MAAM,WAAW,SAAS;AAAA,UACnC,CAAC,GAAG;AACF;AAAA,UACF;AACA,gBAAM,kBAAkB,MAAM,KAAK,gBAAgB,KAAK,eAAe;AAAA,QACzE;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA;AAAA,QAET,WAAW,SAAU,UAAU,MAAM,KAAK;AACxC,cAAIF,MAAK,KAAK,SAAS,MAAM,GAAG;AAChC,eAAK,IAAI,UAAU,MAAMA,KAAI,GAAG;AAAA,QAClC;AAAA;AAAA,QAEA,aAAa,SAAU,UAAU,MAAM,KAAK;AAC1C,cAAIA,MAAK,KAAK,SAAS,MAAM,GAAG;AAChC,eAAK,OAAO,UAAUA,GAAE;AAAA,QAC1B;AAAA,QACA,KAAK,SAASO,KAAI,UAAUP,KAAI;AAC9B,cAAIA,QAAO,OAAQ,CAAAA,MAAK;AACxB,cAAI,MAAM,SAAS;AACnB,cAAI,QAAQ;AACZ,cAAI,SAAS,MAAM;AACnB,cAAI,OAAO,OAAO,GAAG;AACrB,cAAIA,QAAO,MAAM;AAEf,gBAAI+D,SAAQ,CAAC;AACb,gBAAI,CAAC,MAAM;AACT,qBAAOA;AAAA,YACT;AACA,qBAAS,OAAO,MAAM;AACpB,kBAAI,MAAM,KAAK,GAAG;AAClB,kBAAI,eAAe,MAAM;AACvB,gBAAAA,OAAM,KAAK,GAAG;AAAA,cAChB;AAAA,YACF;AACA,mBAAOA;AAAA,UACT,OAAO;AAEL,gBAAI,CAAC,MAAM;AACT,qBAAO;AAAA,YACT;AACA,gBAAI/D,OAAM,MAAM;AACd,kBAAI,QAAQ,KAAKA,GAAE;AACnB,kBAAI,iBAAiB,MAAM;AACzB,uBAAO;AAAA,cACT;AAAA,YACF;AACA,mBAAO;AAAA,UACT;AAAA,QACF;AAAA,QACA,KAAK,SAAS,IAAI,UAAU,cAAcA,KAAI,KAAK;AACjD,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,CAACA,KAAI;AACP,kBAAM,IAAI,MAAM,sCAAsC;AAAA,UACxD;AAEA,cAAI,eAAe,gBAAgB,IAAI,UAAUA,GAAE;AACnD,cAAI,cAAc;AAChB,yBAAa,OAAO;AAAA,UACtB;AACA,cAAI,OAAO,IAAI,KAAK,GAAG;AACvB,eAAK,KAAKA;AACV,eAAK,QAAQ,UAAUA,KAAI,IAAI;AAC/B,eAAK,cAAc,UAAU,YAAY;AACzC,eAAK,yBAAyB,QAAQ;AACtC,iBAAO;AAAA,QACT;AAAA,QACA,SAAS,SAAS,QAAQ,UAAUA,KAAI,MAAM;AAC5C,cAAI,MAAM,SAAS;AACnB,cAAI,MAAM;AACV,cAAI,SAAS,IAAI;AACjB,cAAI,OAAO,OAAO,GAAG;AACrB,cAAI,CAAC,MAAM;AACT,mBAAO,OAAO,GAAG,IAAI,CAAC;AAAA,UACxB;AACA,eAAKA,GAAE,IAAI;AAAA,QACb;AAAA,QACA,YAAY,SAAS,WAAW,UAAUA,KAAI;AAC5C,cAAI,MAAM,SAAS;AACnB,cAAI,MAAM;AACV,cAAI,SAAS,IAAI;AACjB,cAAI,OAAO,OAAO,GAAG;AACrB,cAAI,CAAC,MAAM;AACT;AAAA,UACF;AACA,cAAIA,KAAI;AACN,mBAAO,KAAKA,GAAE;AAAA,UAChB;AACA,mBAAS,KAAK,MAAM;AAClB;AAAA,UACF;AACA,iBAAO,OAAO,GAAG;AAAA,QACnB;AAAA,QACA,QAAQ,SAAS,OAAO,UAAUA,KAAI;AACpC,cAAIA,QAAO,OAAQ,CAAAA,MAAK;AACxB,oBAAU,KAAK,IAAI,UAAUA,GAAE,CAAC,EAAE,QAAQ,SAAU,MAAM;AACxD,iBAAK,OAAO;AAAA,UACd,CAAC;AAAA,QACH;AAAA,QACA,WAAW,SAAS,UAAU,OAAOA,KAAI;AACvC,cAAIA,QAAO,OAAQ,CAAAA,MAAK;AACxB,cAAI,MAAM;AACV,cAAI,SAAS,IAAI;AACjB,mBAAS,OAAO,QAAQ;AACtB,qBAAS,OAAO,OAAO,GAAG,GAAG;AAC3B,kBAAI,OAAO,OAAO,GAAG,EAAE,GAAG;AAC1B,kBAAI,KAAK,SAAS,UAAU,SAAS,gBAAgB,SAASA,QAAO,QAAQ,QAAQA,MAAK;AACxF,qBAAK,OAAO;AAAA,cACd;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,QACA,QAAQ,SAAS,OAAO,UAAUA,KAAI,OAAO;AAC3C,cAAIA,QAAO,OAAQ,CAAAA,MAAK;AACxB,cAAI,UAAU,OAAQ,SAAQ;AAC9B,oBAAU,KAAK,IAAI,UAAUA,GAAE,CAAC,EAAE,QAAQ,SAAU,MAAM;AACxD,gBAAI,SAAS,KAAK,WAAW;AAC3B,mBAAK,OAAO;AAAA,YACd;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,WAAW,SAAS,UAAU,UAAUA,KAAI;AAC1C,cAAIA,QAAO,OAAQ,CAAAA,MAAK;AACxB,oBAAU,KAAK,IAAI,UAAUA,GAAE,CAAC,EAAE,QAAQ,SAAU,MAAM;AACxD,gBAAI,KAAK,WAAW;AAClB,mBAAK,UAAU;AAAA,YACjB;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,SAAS,SAAS,QAAQ,UAAUA,KAAI;AACtC,cAAIA,QAAO,OAAQ,CAAAA,MAAK;AACxB,oBAAU,KAAK,IAAI,UAAUA,GAAE,CAAC,EAAE,QAAQ,SAAU,MAAM;AACxD,mBAAO,KAAK,QAAQ;AAAA,UACtB,CAAC;AAAA,QACH;AAAA,QACA,OAAO,SAAS,MAAM,UAAUA,KAAI;AAClC,cAAIA,QAAO,OAAQ,CAAAA,MAAK;AACxB,oBAAU,KAAK,IAAI,UAAUA,GAAE,CAAC,EAAE,QAAQ,SAAU,MAAM;AACxD,mBAAO,KAAK,MAAM;AAAA,UACpB,CAAC;AAAA,QACH;AAAA,QACA,UAAU,SAASgE,UAAS,MAAM,KAAK;AACrC,cAAI,QAAQ,OAAQ,OAAM;AAC1B,iBAAOnH,GAAE,SAAS,IAAI,IAAI,KAAK,UAAU,GAAG;AAAA,QAC9C;AAAA,MACF,CAAC;AACD,UAAI,oBAAoB;AAAA,QACtB,SAAS;AAAA,QACT,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,qBAAqB;AAAA,QACrB,sBAAsB;AAAA,MACxB;AACA,UAAI,QAAQ;AAAA,QACV,OAAO;AAAA,MACT;AAMA,UAAI,WAAW,KAAK,OAAO;AAAA,QACzB,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,SAAS;AAAA,QACT,WAAW,WAAY;AACrB,cAAI,aAAa,CAAC,MAAM;AACxB,cAAI,OAAO,KAAK,MAAM,IAAI,MAAM;AAChC,cAAI,MAAM;AACR,iBAAK,YAAY,EAAE,MAAM,GAAG,EAAE,QAAQ,SAAU,OAAOK,QAAO+G,OAAM;AAClE,yBAAW,KAAK,UAAUA,MAAK,MAAM,GAAG/G,SAAQ,CAAC,EAAE,KAAK,GAAG,CAAC;AAAA,YAC9D,CAAC;AAAA,UACH;AACA,iBAAO,WAAW,KAAK,GAAG;AAAA,QAC5B;AAAA,QACA,yBAAyB;AAAA,QACzB,QAAQ;AAAA,QACR,UAAU,WAAY;AACpB,cAAI,QAAQ,CAAC;AACb,cAAIgD,cAAa,CAAC;AAClB,cAAI,QAAQ;AACZ,cAAI,GAAG,GAAG;AACV,cAAI,yBAAyB,OAAO,MAAM,wBAAwB;AAClE,mBAAS,aAAa,wBAAwB;AAC5C,gBAAI,CAAC,uBAAuB,eAAe,SAAS,GAAG;AACrD;AAAA,YACF;AACA,gBAAI,SAAS,uBAAuB,SAAS;AAC7C,gBAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,uBAAS,CAAC,MAAM;AAAA,YAClB;AACA,iBAAK,IAAI,GAAG,IAAI,OAAO,QAAQ,IAAI,GAAG,KAAK;AACzC,sBAAQ,OAAO,CAAC;AAChB,kBAAI,OAAO,MAAM,KAAK;AACtB,kBAAI,CAAC,MAAM;AACT,uBAAO,MAAM,KAAK,IAAI,KAAK;AAAA,cAC7B;AACA,cAAAA,YAAW,SAAS,KAAK;AAAA,YAC3B;AAAA,UACF;AACA,cAAI,WAAW,OAAO,MAAM,UAAU;AACtC,cAAI,CAAC,MAAM,QAAQ,QAAQ,GAAG;AAC5B,uBAAW,CAAC,QAAQ;AAAA,UACtB;AACA,eAAK,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,GAAG,KAAK;AAC3C,oBAAQ,SAAS,CAAC;AAClB,gBAAI,CAAC,MAAM,KAAK,GAAG;AACjB,oBAAM,KAAK,IAAI,KAAK;AAAA,YACtB;AAAA,UACF;AAIA,cAAI,QAAQ,IAAI;AACd,kBAAM,IAAI,MAAM,iDAAiD;AAAA,UACnE;AACA,eAAK,SAAS;AACd,eAAK,0BAA0BA;AAAA,QACjC;AAAA,QACA,SAAS,SAAU,MAAM,OAAO;AAC9B,iBAAO,OAAO,KAAK,QAAQ,KAAK;AAAA,QAClC;AAAA,QACA,YAAY,SAAU,MAAM,OAAO;AACjC,iBAAO,OAAO,OAAO,KAAK,QAAQ,KAAK;AAAA,QACzC;AAAA,QACA,SAAS,SAAU,OAAO;AACxB,cAAI,QAAQ,KAAK;AACjB,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AACA,cAAI,OAAO;AACX,cAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,qBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,sBAAQ,MAAM,MAAM,CAAC,CAAC;AAAA,YACxB;AAAA,UACF,OAAO;AACL,oBAAQ,MAAM,KAAK;AAAA,UACrB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,WAAY;AACtB,cAAI,OAAO,KAAK;AAChB,iBAAO;AAAA,YACL,YAAY,KAAK;AAAA,YACjB,aAAa,KAAK,WAAW;AAAA,UAC/B;AAAA,QACF;AAAA,QACA,aAAa,SAAU,SAAS;AAK9B,kBAAQ,KAAK,QAAQ,MAAM,KAAK,IAAI;AACpC,eAAK,KAAK,MAAM,OAAO;AAAA,QACzB;AAAA,QACA,YAAY,WAAY;AACtB,eAAK,SAAS;AACd,eAAK,UAAU,WAAW,MAAM,MAAM,SAAS;AAC/C,eAAK,gBAAgB;AAGrB,eAAK,IAAI,KAAK,QAAQ,IAAI;AAC1B,eAAK,eAAe;AAAA,QACtB;AAAA,QACA,gBAAgB,WAAY;AAC1B,eAAK,SAAS,KAAK,OAAO,UAAU,KAAK,kBAAkB;AAAA,QAC7D;AAAA,QACA,oBAAoB,SAAU,OAAO,KAAK;AACxC,cAAI,OAAO,MAAM,cAAc,KAAK,uBAAuB;AAC3D,cAAI,IAAI,iBAAiB,CAAC,MAAM;AAC9B;AAAA,UACF;AACA,cAAI,IAAI,SAAS,KAAK,QAAQ,MAAM,QAAQ,GAAG;AAC7C,oBAAQ,KAAK,QAAQ,QAAQ;AAAA,UAC/B;AAGA,cAAI,IAAI,MAAM;AACZ,gBAAI,QAAQ;AAAA,UACd;AACA,eAAK,cAAc,MAAM,GAAG;AAAA,QAC9B;AAAA,QACA,eAAe,SAAU,OAAO,KAAK;AACnC,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,SAAS,QAAQ,GAAG;AACtB,kBAAM,kBAAkB,MAAM,OAAO,KAAK,iBAAiB,GAAG;AAAA,UAChE;AAAA,QACF;AAAA,QACA,cAAc,SAAU,QAAQ,MAAM;AACpC,cAAI,MAAM,aAAa,MAAM;AAC7B,cAAI,YAAY,IAAI;AACpB,cAAI,SAAS,IAAI;AACjB,mBAAS,SAAS,QAAQ;AACxB,gBAAI,UAAU,KAAK,GAAG;AACpB,oBAAM,IAAI,MAAM,wCAAwC;AAAA,YAC1D;AACA,sBAAU,KAAK,IAAI,OAAO,KAAK;AAAA,UACjC;AACA,cAAI,MAAM;AACR,gBAAI,eAAe,KAAK;AACxB,gBAAI,UAAU,YAAY,GAAG;AAC3B,oBAAM,IAAI,MAAM,wCAAwC;AAAA,YAC1D;AACA,sBAAU,YAAY,IAAI;AAAA,UAC5B;AACA,iBAAO;AAAA,YACL,UAAU,IAAI;AAAA,YACd;AAAA,UACF;AAAA,QACF;AAAA;AAAA;AAAA,QAGA,KAAK,SAAU,SAAS;AACtB,cAAI,cAAc,WAAW,KAAK,QAAQ,WAAW,IAAI,KAAK,QAAQ,YAAY,IAAI,IAAI,KAAK,QAAQ;AACvG,iBAAO,WAAW,WAAW,KAAK,YAAY,OAAO,MAAM,SAAS,UAAU,WAAW,KAAK,gBAAgB;AAAA,QAChH;AAAA,QACA,gBAAgB,SAAU,UAAU,MAAM,WAAW;AACnD,mBAAS,OAAO,KAAK;AACrB,wBAAc,YAAY,KAAK;AAI/B,cAAI,CAAC,YAAY,aAAa,KAAK;AACjC,mBAAO,CAAC,IAAI;AAAA,UACd;AACA,cAAI,WAAW;AACb,gBAAI,QAAQ,UAAU,QAAQ;AAC9B,gBAAI,OAAO;AACT,kBAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,uBAAO;AAAA,cACT;AACA,qBAAO,CAAC,KAAK;AAAA,YACf;AAAA,UACF;AAIA,cAAI,OAAO,iBAAiB;AAC1B,mBAAO,EAAE,IAAI,EAAE,KAAK,QAAQ,EAAE,QAAQ;AAAA,UACxC;AACA,iBAAO,CAAC;AAAA,QACV;AAAA,QACA,QAAQ,SAAU,WAAW;AAC3B,cAAI,KAAK,OAAO;AACd,gBAAI,OAAO,MAAM,UAAU,MAAM,KAAK,WAAW,CAAC;AAGlD,iBAAK,QAAQ,MAAM,MAAM,CAAC,SAAS,EAAE,OAAO,IAAI,CAAC;AAGjD,iBAAK,MAAM,QAAQ,MAAM,KAAK,OAAO,CAAC,WAAW,IAAI,EAAE,OAAO,IAAI,CAAC;AAAA,UACrE;AAAA,QACF;AAAA,QACA,SAAS,SAAU,KAAK;AACtB,cAAI7B;AACJ,cAAI,OAAO,IAAI,kBAAkB;AAC/B,gBAAI,QAAQ,KAAK;AACjB,YAAAA,QAAO,MAAM,QAAQ,EAAE,KAAK,MAAM,MAAM,CAAC;AAAA,UAC3C,OAAO;AACL,YAAAA,QAAO,KAAK,YAAY,KAAK,EAAE;AAAA,UACjC;AACA,iBAAO,KAAK,MAAM,iBAAiBA,KAAI;AAAA,QACzC;AAAA,QACA,aAAa,SAAU,QAAQ;AAC7B,cAAIa,QAAO,KAAK,oBAAoB,MAAM;AAC1C,cAAI,kBAAkB,KAAK,uBAAuB,EAAE,SAAS,KAAK,oBAAoB,MAAM,CAAC;AAC7F,cAAI,eAAe,KAAK,cAAc,MAAM;AAC5C,iBAAOrC,GAAE,cAAcqC,OAAM,gBAAgB,SAAS,YAAY,CAAC;AAAA,QACrE;AAAA,QACA,qBAAqB,SAAS,oBAAoB,MAAM;AACtD,cAAI,CAAC,KAAK,iBAAiB,KAAK,cAAc,SAAS,IAAI,GAAG;AAG5D,mBAAO,KAAK,oBAAoB;AAAA,UAClC;AAEA,iBAAOrC,GAAE,gBAAgB;AAAA,QAC3B;AAAA,QACA,sBAAsB,SAAU,QAAQ;AACtC,cAAIqC,QAAO,KAAK,oBAAoB,MAAM;AAC1C,cAAI,eAAe,KAAK,cAAc,MAAM;AAC5C,cAAI,kBAAkB,KAAK,uBAAuB;AAClD,iBAAOrC,GAAE,cAAcqC,OAAM,gBAAgB,SAAS,YAAY,CAAC;AAAA,QACrE;AAAA,QACA,wBAAwB,WAAY;AAClC,cAAI,QAAQ,KAAK;AACjB,cAAI,WAAW,MAAM,SAAS;AAC9B,cAAI,KAAKrC,GAAE,gBAAgB,EAAE,UAAU,SAAS,GAAG,SAAS,CAAC;AAC7D,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,WAAY;AAC/B,cAAI,KAAKA,GAAE,gBAAgB;AAC3B,cAAI,QAAQ,KAAK;AACjB,cAAI,QAAQ,MAAM,MAAM;AACxB,cAAI,OAAO;AACT,gBAAIwB,QAAO,MAAM,QAAQ;AACzB,gBAAI,KAAKA,MAAK,QAAQ;AACtB,gBAAI,KAAKA,MAAK,SAAS;AACvB,iBAAK,GAAG,UAAU,IAAI,EAAE,EAAE,OAAO,KAAK,EAAE,UAAU,CAAC,IAAI,CAAC,EAAE;AAAA,UAC5D;AACA,iBAAO;AAAA,QACT;AAAA,QACA,kBAAkB,SAAU,WAAW,IAAI,KAAK;AAC9C,cAAIyF,SAAQ;AACZ,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,MAAM;AACV,cAAI,WAAW,IAAI;AACnB,cAAI;AACJ,cAAI,OAAO,OAAO,UAAU;AAC1B,YAAAA,UAAS,KAAK,eAAe,EAAE,GAAG,OAAOA,QAAO,CAAC,GAAG,OAAO,SAAS,SAAS,WAAW;AAAA,UAC1F,OAAO;AACL,uBAAW,KAAK,EAAE,EAAE,GAAG,OAAO,SAAS,CAAC,GAAG,OAAO,SAAS,SAAS,WAAW;AAAA,UACjF;AAEA,cAAI,UAAU,SAAS;AAEvB,cAAI,IAAI,SAAS,QAAW;AAC1B,gBAAI;AACJ,oBAAQ,MAAM;AAAA,cACZ,KAAK,IAAI;AACP,uBAAO,kBAAkB;AACzB;AAAA,cACF,KAAK,IAAI;AACP,uBAAO,kBAAkB;AACzB;AAAA,cACF,KAAK,IAAI;AACP,uBAAO,kBAAkB;AACzB;AAAA,cACF,KAAK,IAAI;AACP,uBAAO,kBAAkB;AACzB;AAAA,cACF;AACE,uBAAO,kBAAkB;AACzB;AAAA,YACJ;AACA,gBAAI,OAAO;AAAA,UACb;AACA,eAAK,OAAO,WAAW,MAAM,GAAG;AAChC,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,IAAI,KAAK;AAC5B,iBAAO,KAAK,iBAAiB,kBAAkB,IAAI,GAAG;AAAA,QACxD;AAAA,QACA,aAAa,SAAU,IAAI,KAAK;AAC9B,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,iBAAO,KAAK,iBAAiB,oBAAoB,IAAI,GAAG;AAAA,QAC1D;AAAA;AAAA;AAAA,QAGA,YAAY,SAAU,IAAI;AACxB,cAAI,OAAO,KAAK;AAChB,cAAI,SAAS,KAAK,EAAE,EAAE,EAAE,CAAC;AACzB,cAAI,CAAC,QAAQ;AACX,qBAAS;AAAA,UACX;AACA,aAAG;AACD,gBAAI,kBAAkB,OAAO,aAAa,QAAQ;AAClD,gBAAI,eAAe,WAAW;AAC9B,iBAAK,mBAAmB,iBAAiB,oBAAoB,SAAS;AACpE,qBAAO;AAAA,YACT;AACA,gBAAI,cAAc;AAKhB,qBAAO;AAAA,YACT;AACA,qBAAS,OAAO;AAAA,UAClB,SAAS;AACT,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,SAAU,IAAI,MAAM;AACjC,iBAAO,KAAK,KAAK;AACjB,cAAI,eAAe,GAAG,aAAa,OAAO,WAAW;AACrD,cAAI,cAAc;AAChB,gBAAI,MAAM,KAAK,eAAe,YAAY;AAC1C,gBAAI,YAAY,IAAI,CAAC;AACrB,gBAAI,WAAW;AACb,qBAAO;AAAA,YACT;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,aAAa,SAAU,IAAI,cAAc;AACvC,cAAI;AACJ,cAAI,OAAO,KAAK,IAAI;AAClB,gBAAI,OAAO,iBAAiB,UAAU;AACpC,yBAAW,OAAO;AAAA,YACpB;AACA,mBAAO;AAAA,UACT;AACA,cAAI,IAAI;AACN,gBAAI,WAAWjH,GAAE,EAAE,EAAE,MAAM,IAAI;AAC/B,uBAAW,GAAG,UAAU,gBAAgB,WAAW;AACnD,gBAAI,cAAc;AAChB,0BAAY,QAAQ;AAAA,YACtB;AACA,uBAAW,KAAK,YAAY,GAAG,YAAY,QAAQ;AAAA,UACrD;AACA,iBAAO;AAAA,QACT;AAAA,QACA,mBAAmB,SAAU,QAAQ,GAAG,GAAG;AACzC,cAAI,QAAQ,KAAK;AACjB,cAAI,QAAQ,MAAM;AAClB,cAAI,OAAO,MAAM,eAAe,MAAM,MAAM;AAC5C,eAAK,IAAI;AAAA,YACP,QAAQ,KAAK,WAAW,QAAQ,GAAG,GAAG,MAAM,QAAQ;AAAA,YACpD,QAAQ;AAAA,cACN;AAAA,cACA;AAAA,YACF;AAAA,UACF,CAAC,EAAE,MAAM,OAAO;AAAA,YACd,OAAO;AAAA,YACP,IAAI;AAAA,UACN,CAAC;AACD,iBAAO,KAAK,SAAS,KAAK;AAAA,QAC5B;AAAA,QACA,YAAY,SAAU,QAAQ;AAC5B,cAAI;AACJ,cAAI,OAAO,CAAC,GACV,MAAM,UAAU,SAAS;AAC3B,iBAAO,QAAQ,EAAG,MAAK,GAAG,IAAI,UAAU,MAAM,CAAC;AAC/C,cAAI,QAAQ,KAAK;AACjB,cAAImD,MAAK,MAAM;AACf,cAAI,OAAO,KAAK,cAAc,QAAQ,MAAM;AAE5C,cAAI,WAAW,OAAO,aAAa,gBAAgB;AACnD,cAAI,MAAM;AAAA,YACR,IAAIA;AAAA,UACN;AACA,cAAI,YAAY,MAAM;AACpB,gBAAI,SAAS;AAAA,UACf;AACA,cAAI,QAAQ,MAAM;AAChB,gBAAI,OAAO;AACX,gBAAI,CAAC,MAAM,QAAQ,IAAI,KAAK,CAAC,UAAU;AAErC,kBAAI,WAAW,KAAK,YAAY,MAAM;AAAA,YACxC;AAAA,UACF,WAAW,YAAY,QAAQ,KAAK,OAAO,QAAQ;AACjD,gBAAI,WAAW,KAAK,YAAY,MAAM;AAAA,UACxC;AACA,kBAAQ,MAAM,MAAM,iBAAiB,MAAM,KAAK,CAAC,KAAK,MAAM,EAAE,OAAO,IAAI,CAAC;AAAA,QAC5E;AAAA,QACA,kBAAkB,SAAU,KAAK,QAAQ,GAAG,GAAG,MAAM,SAAS;AAC5D,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,MAAM;AAClB,cAAI,qBAAqB,MAAM;AAC/B,cAAI,OAAO,uBAAuB,YAAY;AAC5C,gBAAI,WAAW,mBAAmB,KAAK,OAAO,KAAK,MAAM,QAAQ,IAAI,MAAM,GAAG,CAAC,GAAG,MAAM,SAAS,KAAK;AACtG,gBAAI,UAAU;AACZ,qBAAO;AAAA,YACT;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,sBAAsB,SAAU,KAAK;AACnC,cAAI,OAAO,KAAK;AAChB,cAAI,OAAO,IAAI;AACf,cAAI,WAAW,IAAI;AACnB,cAAI,QAAQ,KAAK;AACjB,cAAI;AACJ,cAAI,QAAQ,QAAQ,MAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,GAAG;AAC5D,qBAAS,KAAK,aAAa,MAAM,QAAQ,KAAK;AAAA,UAChD,OAAO;AACL,gBAAI,CAAC,UAAU;AACb,yBAAW,IAAI;AAAA,YACjB;AACA,gBAAI,CAAC,YAAY,QAAQ,MAAM;AAG7B,yBAAW,YAAY,OAAO;AAAA,YAChC;AACA,qBAAS,KAAK,eAAe,UAAU,MAAM,KAAK,SAAS,EAAE,CAAC;AAAA,UAChE;AACA,iBAAO,KAAK,cAAc,QAAQ,QAAQ;AAAA,QAC5C;AAAA,QACA,eAAe,SAAU,KAAK,QAAQ,GAAG,GAAG;AAC1C,eAAK,MAAM,WAAW,UAAU;AAChC,cAAI,WAAW,KAAK,kBAAkB,QAAQ,GAAG,CAAC;AAElD,mBAAS,kBAAkB,KAAK,GAAG,CAAC;AACpC,mBAAS,UAAU,KAAK,SAAS,mBAAmB,UAAU;AAAA,YAC5D,gBAAgB;AAAA,UAClB,CAAC,CAAC;AACF,eAAK,UAAU,KAAK;AAAA,YAClB;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,UAAU,SAAU,KAAK,GAAG,GAAG;AAC7B,cAAIP,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,WAAWA,MAAK;AACpB,cAAI,UAAU;AACZ,qBAAS,YAAY,KAAK,GAAG,CAAC;AAAA,UAChC,OAAO;AACL,gBAAI,QAAQ,KAAK;AACjB,gBAAI,kBAAkB,MAAM,QAAQ;AACpC,gBAAI,gBAAgB,KAAK,eAAe,GAAG;AAC3C,gBAAI,eAAeA,MAAK;AACxB,gBAAI,oBAAoB,WAAW;AAEjC,kBAAI,iBAAiB,iBAAiB5C,GAAE,YAAY,EAAE,SAAS,aAAa,GAAG;AAC7E;AAAA,cACF;AAAA,YACF,OAAO;AAEL,kBAAI,MAAM,UAAU,GAAG,EAAE,cAAc,iBAAiB;AACtD;AAAA,cACF;AAAA,YACF;AACA,iBAAK,cAAc,KAAK,cAAc,GAAG,CAAC;AAAA,UAC5C;AAAA,QACF;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAChC,cAAI4C,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,WAAWA,MAAK;AACpB,cAAI,CAAC,UAAU;AACb;AAAA,UACF;AACA,mBAAS,UAAU,KAAK,GAAG,CAAC;AAC5B,eAAK,MAAM,UAAU,UAAU;AAAA,QACjC;AAAA,QACA,wBAAwB,SAAU,UAAU;AAC1C,iBAAO,KAAK,MAAM,YAAY,uBAAuB,QAAQ;AAAA,QAC/D;AAAA,QACA,mBAAmB,SAAU,MAAM,OAAO;AACxC,cAAI,CAAC,QAAQ,KAAK,GAAG;AACnB,gBAAI,gBAAgB,YAAY;AAC9B,cAAA5C,GAAE,IAAI,EAAE,KAAK,KAAK;AAAA,YACpB,OAAO;AACL,gBAAE,IAAI,EAAE,KAAK,KAAK;AAAA,YACpB;AAAA,UACF;AAAA,QACF;AAAA,QACA,uBAAuB,SAAU,MAAM,OAAO;AAC5C,cAAI,UAAU,SAAS,KAAK,GAAG;AAC/B,cAAI,aAAa,UAAU,eAAe;AAC1C,cAAI,YAAY,CAAC;AAEjB,eAAK,YAAY,OAAO;AACtB,gBAAI,CAAC,MAAM,eAAe,QAAQ,GAAG;AACnC;AAAA,YACF;AACA,sBAAU,MAAM,QAAQ;AACxB,kBAAM,KAAK,uBAAuB,QAAQ;AAC1C,gBAAI,QAAQ,CAAC,WAAW,IAAI,OAAO,KAAK,IAAI,QAAQ,KAAK,MAAM,SAAS,MAAM,OAAO,IAAI,IAAI;AAC3F,kBAAI,SAAS,IAAI,GAAG,GAAG;AACrB,gCAAgB,cAAc,CAAC;AAC/B,4BAAY,IAAI,GAAG,IAAI;AAAA,cACzB;AACA,kBAAI,YAAY,MAAM;AACpB,0BAAU,KAAK,UAAU,GAAG;AAAA,cAC9B;AAAA,YACF,OAAO;AACL,8BAAgB,cAAc,CAAC;AAC/B,0BAAY,YAAY,QAAQ,CAAC,IAAI;AAAA,YACvC;AAAA,UACF;AAIA,eAAK,IAAI,GAAG,IAAI,UAAU,QAAQ,IAAI,GAAG,KAAK,GAAG;AAC/C,uBAAW,UAAU,CAAC;AACtB,kBAAM,UAAU,IAAI,CAAC;AACrB,sBAAU,MAAM,QAAQ;AACxB,gBAAI,WAAW,IAAI,GAAG,GAAG;AACvB,2BAAa,WAAW,CAAC;AACzB,uBAAS,QAAQ,IAAI;AAAA,YACvB;AACA,gBAAI,WAAW,IAAI,QAAQ,GAAG;AAC5B,gCAAkB,gBAAgB,CAAC;AACnC,4BAAc,QAAQ,IAAI;AAAA,YAC5B;AACA,gBAAI,WAAW,IAAI,MAAM,GAAG;AAC1B,8BAAgB,cAAc,CAAC;AAC/B,0BAAY,QAAQ,IAAI;AAAA,YAC1B;AAAA,UACF;AACA,iBAAO;AAAA,YACL,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,KAAK;AAAA,YACL,UAAU;AAAA,YACV,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,QACA,0BAA0B,SAAU,MAAM,OAAO,SAAS,KAAK;AAC7D,kBAAQ,MAAM,CAAC;AACf,cAAI,UAAU,SAAS;AACvB,cAAI,WAAW,MAAM,OAAO,CAAC;AAC7B,cAAI,YAAY,MAAM,UAAU,CAAC;AACjC,cAAI,WAAW,MAAM;AACrB,cAAI,gBAAgB,MAAM;AAC1B,cAAI,cAAc,MAAM;AACxB,eAAK,YAAY,UAAU;AACzB,sBAAU,SAAS,QAAQ;AAC3B,kBAAM,KAAK,uBAAuB,QAAQ;AAI1C,gBAAI,YAAY,IAAI,IAAI,KAAK,MAAM,SAAS,QAAQ,MAAM,GAAG,MAAM,UAAU,IAAI;AACjF,gBAAI,WAAW,SAAS,GAAG;AACzB,qBAAO,WAAW,SAAS;AAAA,YAC7B,WAAW,cAAc,QAAW;AAClC,wBAAU,QAAQ,IAAI;AAAA,YACxB;AAAA,UACF;AACA,cAAI,gBAAgB,aAAa;AAI/B,iBAAK,kBAAkB,MAAM,SAAS;AACtC;AAAA,UACF;AAGA,cAAI,gBAAgB,UAAU;AAC9B,cAAI,aAAaA,GAAE,wBAAwB,aAAa;AACxD,cAAI,eAAe,MAAM,WAAW,GAAG,WAAW,CAAC;AACnD,cAAI,eAAe;AACjB,wBAAY,KAAK,WAAW,WAAW;AACvC,uBAAW,IAAI,WAAW,IAAI;AAAA,UAChC;AAIA,cAAI,IAAI,IAAI;AACZ,cAAI,iBAAiB,aAAa;AAChC,gBAAI,YAAY,KAAK,aAAa,MAAM,IAAI,YAAY;AACxD,iBAAK,UAAU;AACf,iBAAK,UAAU;AAAA,UACjB;AACA,cAAI,aAAa;AACjB,eAAK,YAAY,eAAe;AAC9B,sBAAU,cAAc,QAAQ;AAChC,kBAAM,KAAK,uBAAuB,QAAQ;AAK1C,0BAAc,IAAI,SAAS,KAAK,MAAM,SAAS,QAAQ,MAAM,GAAG,MAAM,UAAU,IAAI;AACpF,gBAAI,aAAa;AACf,2BAAa,OAAO,MAAM,WAAW,EAAE,MAAM,IAAI,EAAE,CAAC;AACpD,6BAAe,aAAa;AAAA,YAC9B;AAAA,UACF;AAIA,eAAK,kBAAkB,MAAM,SAAS;AACtC,cAAI,WAAW;AACf,cAAI,aAAa;AAEf,gBAAI,mBAAmB,KAAK,oBAAoB,IAAI;AACpD,gBAAI,iBAAiB,QAAQ,KAAK,iBAAiB,SAAS,GAAG;AAC7D,kBAAI,WAAWA,GAAE,cAAc,kBAAkB,UAAU,EAAE,MAAM,IAAI,IAAI,IAAI,EAAE;AACjF,mBAAK,YAAY,aAAa;AAC5B,0BAAU,YAAY,QAAQ;AAC9B,sBAAM,KAAK,uBAAuB,QAAQ;AAI1C,8BAAc,IAAI,OAAO,KAAK,MAAM,SAAS,UAAU,MAAM,UAAU,IAAI;AAC3E,oBAAI,aAAa;AACf,+BAAa,OAAO,MAAM,WAAW,EAAE,MAAM,IAAI,EAAE,CAAC;AACpD,+BAAa,WAAW;AAAA,gBAC1B;AAAA,cACF;AAAA,YACF;AAAA,UACF;AAGA,cAAI,kBAAkB,UAAa,cAAc,UAAU;AAEzD,yBAAa,MAAM,CAAC;AACpB,uBAAW,IAAI,aAAa;AAC5B,uBAAW,IAAI,aAAa;AAC5B,iBAAK,aAAa,aAAaA,GAAE,wBAAwB,UAAU,CAAC;AAAA,UAEtE;AAAA,QACF;AAAA,QACA,cAAc,SAAU,MAAM,cAAc;AAE1C,cAAI,IAAI;AACR,cAAI,gBAAgB,aAAa,SAAS,IAAI,GAAG;AAC/C,gBAAI4B,SAAQ,aAAa,MAAM;AAC/B,iBAAK,IAAIA,OAAM;AACf,iBAAK,IAAIA,OAAM;AAAA,UACjB,OAAO;AACL,iBAAK;AACL,iBAAK;AAAA,UACP;AACA,iBAAO;AAAA,YACL;AAAA,YACA;AAAA,UACF;AAAA,QACF;AAAA,QACA,iBAAiB,WAAY;AAC3B,eAAK,UAAU,CAAC;AAAA,QAClB;AAAA,QACA,WAAW,SAAU,QAAQ;AAC3B,cAAI,UAAU,KAAK;AAEnB,cAAI,CAAC,SAAS;AACZ,mBAAO,CAAC;AAAA,UACV;AACA,cAAIuB,MAAKnD,GAAE,SAAS,MAAM;AAC1B,cAAI,QAAQ,QAAQmD,GAAE;AACtB,cAAI,CAAC,OAAO;AACV,oBAAQ,QAAQA,GAAE,IAAI,CAAC;AAAA,UACzB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,SAAU,QAAQ;AAC7B,cAAI,UAAU,KAAK,UAAU,MAAM;AACnC,cAAI,CAAC,QAAQ,MAAM;AACjB,oBAAQ,OAAO,CAAC;AAAA,UAClB;AACA,iBAAO,QAAQ;AAAA,QACjB;AAAA,QACA,qBAAqB,SAAU,QAAQ;AACrC,cAAI,UAAU,KAAK,UAAU,MAAM;AACnC,cAAI,QAAQ,iBAAiB,QAAW;AACtC,oBAAQ,eAAenD,GAAE,MAAM,EAAE,QAAQ;AAAA,UAC3C;AACA,iBAAO,IAAI,KAAK,QAAQ,YAAY;AAAA,QACtC;AAAA,QACA,eAAe,SAAU,QAAQ;AAC/B,cAAI,UAAU,KAAK,UAAU,MAAM;AACnC,cAAI,QAAQ,iBAAiB,QAAW;AACtC,gBAAI,MAAM;AACV,gBAAI,gBAAgB,IAAI;AACxB,gBAAI,KAAK,IAAI;AACb,gBAAI;AACJ,gBAAI,iBAAiB,cAAc,SAAS,MAAM,GAAG;AACnD,uBAAS;AAAA,YACX,OAAO;AACL,uBAAS;AAAA,YACX;AACA,oBAAQ,eAAeA,GAAE,MAAM,EAAE,sBAAsB,MAAM;AAAA,UAC/D;AACA,iBAAOA,GAAE,gBAAgB,QAAQ,YAAY;AAAA,QAC/C;AAAA,QACA,cAAc,SAAU,QAAQ;AAC9B,cAAI,UAAU,KAAK,UAAU,MAAM;AACnC,cAAI,QAAQ,kBAAkB,QAAW;AACvC,oBAAQ,gBAAgBA,GAAE,MAAM,EAAE,gBAAgB;AAAA,UACpD;AACA,iBAAO,QAAQ,cAAc,MAAM;AAAA,QACrC;AAAA,QACA,kBAAkB,SAAU,MAAM;AAChC,iBAAO,KAAK,MAAM,OAAO,MAAM,CAAC,QAAQ,SAAS,KAAK;AAAA,QACxD;AAAA,QACA,qBAAqB,SAAU,OAAO,MAAM,eAAe,WAAW;AACpE,cAAI,GAAG,GAAG,WAAW;AACrB,cAAI,aAAa,CAAC;AAClB,cAAI,WAAW,CAAC;AAChB,mBAAS,YAAY,OAAO;AAC1B,gBAAI,CAAC,MAAM,eAAe,QAAQ,GAAG;AACnC;AAAA,YACF;AACA,wBAAY,MAAM,QAAQ;AAC1B,gBAAI,CAAC,cAAc,SAAS,GAAG;AAC7B;AAAA,YACF;AACA,gBAAI,WAAW,cAAc,QAAQ,IAAI,KAAK,eAAe,UAAU,MAAM,SAAS;AACtF,iBAAK,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,GAAG,KAAK;AAC3C,kBAAI,OAAO,SAAS,CAAC;AACrB,uBAASA,GAAE,SAAS,IAAI;AAGxB,kBAAI,SAAS,aAAa,UAAU,QAAQ,MAAM;AAClD,kBAAI,gBAAgB,WAAW,MAAM;AACrC,kBAAI,eAAe;AAGjB,oBAAI,CAAC,cAAc,OAAO;AACxB,2BAAS,KAAK,MAAM;AACpB,gCAAc,QAAQ;AACtB,gCAAc,aAAa,CAAC,cAAc,UAAU;AACpD,gCAAc,iBAAiB,CAAC,cAAc,cAAc;AAAA,gBAC9D;AACA,oBAAIqD,cAAa,cAAc;AAC/B,oBAAI,iBAAiB,cAAc;AACnC,oBAAI,QAAQ;AAEV,kBAAAA,YAAW,QAAQ,SAAS;AAC5B,iCAAe,QAAQ,EAAE;AAAA,gBAC3B,OAAO;AAEL,sBAAI,YAAY,YAAY,gBAAgB,CAAC;AAC7C,kBAAAA,YAAW,OAAO,WAAW,GAAG,SAAS;AACzC,iCAAe,OAAO,WAAW,GAAG,CAAC;AAAA,gBACvC;AAAA,cACF,OAAO;AACL,2BAAW,MAAM,IAAI;AAAA,kBACnB,YAAY;AAAA,kBACZ,gBAAgB,SAAS,KAAK;AAAA,kBAC9B;AAAA,kBACA,OAAO;AAAA,gBACT;AAAA,cACF;AAAA,YACF;AAAA,UACF;AACA,eAAK,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,GAAG,KAAK;AAC3C,qBAAS,SAAS,CAAC;AACnB,wBAAY,WAAW,MAAM;AAC7B,sBAAU,aAAa,MAAM,MAAM,QAAQ,CAAC,CAAC,CAAC,EAAE,OAAO,UAAU,WAAW,QAAQ,CAAC,CAAC;AAAA,UACxF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,gBAAgB,SAAU,KAAK,KAAK;AAClC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,SAAS,IAAI;AACjB,cAAI,OAAO,IAAI;AACf,cAAI,UAAU,IAAI;AAClB,cAAI,YAAY,OAAQ,WAAU;AAClC,cAAI,UAAU,IAAI;AAClB,cAAI,YAAY,OAAQ,WAAU;AAClC;AAAA;AAAA,YAEA,IAAI;AAAA;AAAA,YAGJ,SAAS,eAAe,SAAS;AAAA,YAEjC,eAAe,OAAO,OAAO,kBAAkB,IAAI,SAAS;AAAA,YAAG;AAC7D,mBAAO,SAAS,iBAAiB,SAAS,OAAO;AAAA,UACnD;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,4BAA4B,SAAU,UAAU,OAAO,KAAK;AAC1D,kBAAQ,MAAM,CAAC;AACf,cAAI,aAAa,IAAI,WAAW,KAAK;AACrC,cAAI,cAAc,IAAI,YAAY,KAAK;AAOvC,cAAI,gBAAgB,CAAC;AACrB,cAAI,YAAY,CAAC;AACjB,cAAI,gBAAgB,CAAC;AACrB,cAAI,mBAAmB,CAAC;AACxB,cAAI,MAAM,MAAM,WAAW,UAAU;AACrC,cAAI,UAAU,IAAI;AAClB,cAAI,aAAa,KAAK,oBAAoB,WAAW,OAAO,UAAU,eAAe,IAAI,SAAS;AAGlG,cAAI,gBAAgB,UAAU,KAAK,oBAAoB,OAAO,UAAU,eAAe,IAAI,SAAS,IAAI;AACxG,mBAAS,UAAU,YAAY;AAC7B,uBAAW,WAAW,MAAM;AAC5B,wBAAY,SAAS;AACrB,mBAAO,SAAS;AAChB,6BAAiB,KAAK,sBAAsB,MAAM,SAAS;AAC3D,gBAAI,CAAC,eAAe,OAAO,CAAC,eAAe,YAAY,CAAC,eAAe,QAAQ;AAE7E,mBAAK,kBAAkB,MAAM,eAAe,MAAM;AAAA,YACpD,OAAO;AACL,kBAAI,eAAe,cAAc,MAAM,KAAK,cAAc,MAAM,EAAE;AAClE,kBAAI,cAAc,gBAAgB,UAAU,QAAQ,SAAY,aAAa,MAAM,UAAU;AAC7F,kBAAI;AACJ,kBAAI,aAAa;AACf,2BAAW,cAAc,WAAW,KAAK,KAAK,eAAe,aAAa,UAAU,IAAI,SAAS,GAAG,CAAC;AACrG,oBAAI,CAAC,SAAS;AACZ,wBAAM,IAAI,MAAM,oBAAoB,cAAc,6BAA6B;AAAA,gBACjF;AAAA,cACF,OAAO;AACL,0BAAU;AAAA,cACZ;AACA,qBAAO;AAAA,gBACL;AAAA,gBACA;AAAA,gBACA,qBAAqB;AAAA,gBACrB,eAAe;AAAA,cACjB;AACA,kBAAI,SAAS;AAGX,oBAAI,YAAY,iBAAiB,UAAU,SAAUgE,OAAM;AACzD,yBAAOA,MAAK,YAAY;AAAA,gBAC1B,CAAC;AACD,oBAAI,YAAY,IAAI;AAClB,mCAAiB,OAAO,WAAW,GAAG,IAAI;AAAA,gBAC5C,OAAO;AACL,mCAAiB,KAAK,IAAI;AAAA,gBAC5B;AAAA,cACF,OAAO;AAGL,8BAAc,KAAK,IAAI;AAAA,cACzB;AAAA,YACF;AAAA,UACF;AACA,wBAAc,KAAK,MAAM,eAAe,gBAAgB;AACxD,mBAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,IAAI,GAAG,KAAK;AACpD,mBAAO,cAAc,CAAC;AACtB,mBAAO,KAAK;AACZ,sBAAU,KAAK;AAIf,gBAAI,YAAY,UAAUrH,GAAE,SAAS,OAAO,IAAI;AAChD,gBAAI,UAAU,UAAU,SAAS;AACjC,gBAAI,CAAC,SAAS;AAyBZ,wBAAU,UAAU,SAAS,IAAI,UAAUA,GAAE,OAAO,EAAE,QAAQ;AAAA,gBAC5D,QAAQ,sBAAsB,MAAM,OAAO;AAAA,cAC7C,CAAC,IAAI,IAAI;AAAA,YACX;AACA,gBAAI,SAAS;AAIX,+BAAiB,KAAK,sBAAsB,MAAM,KAAK,aAAa;AACpE,mBAAK,yBAAyB,gBAAgB,KAAK,mBAAmB;AAAA,YACxE,OAAO;AACL,+BAAiB,KAAK;AAAA,YACxB;AACA,iBAAK,yBAAyB,MAAM,gBAAgB,SAAS,GAAG;AAAA,UAClE;AAAA,QACF;AAAA,QACA,0BAA0B,SAAU,gBAAgB,kBAAkB;AACpE,yBAAe,QAAQ,eAAe,MAAM,CAAC;AAC7C,yBAAe,aAAa,eAAe,WAAW,CAAC;AACvD,yBAAe,WAAW,eAAe,SAAS,CAAC;AACnD,iBAAO,eAAe,KAAK,iBAAiB,GAAG;AAC/C,iBAAO,eAAe,UAAU,iBAAiB,QAAQ;AACzD,iBAAO,eAAe,QAAQ,iBAAiB,MAAM;AAGrD,cAAI,YAAY,eAAe,UAAU,eAAe,OAAO;AAC/D,cAAI,cAAc,UAAa,iBAAiB,QAAQ;AACtD,6BAAiB,OAAO,YAAY;AAAA,UACtC;AACA,yBAAe,SAAS,iBAAiB;AAAA,QAC3C;AAAA;AAAA;AAAA;AAAA;AAAA,QAMA,SAAS,SAAS,QAAQ,gBAAgB;AACxC,cAAI,gBAAgB;AAClB;AAAA,UACF;AACA,eAAK,WAAW;AAChB,0BAAgB,MAAM,IAAI;AAAA,QAC5B;AAAA;AAAA;AAAA,QAGA,UAAU,SAAS,WAAW;AAC5B,eAAK,aAAa;AAClB,0BAAgB,QAAQ,IAAI;AAAA,QAC9B;AAAA;AAAA;AAAA,QAGA,UAAU,WAAY;AACpB,eAAK,YAAY;AACjB,eAAK,mBAAmB;AAAA,QAC1B;AAAA,QACA,YAAY;AAAA,QACZ,UAAU,SAAU,MAAM;AACxB,cAAI,YAAY,KAAK;AACrB,cAAI,CAAC,WAAW;AACd,mBAAO;AAAA,UACT;AACA,cAAI,CAAC,MAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAO,UAAU,QAAQ,MAAM;AAAA,QACjC;AAAA,QACA,UAAU,SAAU,WAAW;AAC7B,eAAK,YAAY;AACjB,cAAI,WAAW;AACb,iBAAK,aAAa;AAClB,sBAAU,UAAU;AAAA,cAClB,aAAa;AAAA,YACf,CAAC;AACD,sBAAU,SAAS,KAAK,OAAO,eAAe,KAAK,YAAY,KAAK,IAAI,CAAC;AAAA,UAC3E;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,SAAS,eAAe;AACpC,cAAI,YAAY,KAAK;AACrB,cAAI,WAAW;AACb,sBAAU,QAAQ;AAAA,UACpB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAS,aAAa;AAChC,cAAI,YAAY,KAAK;AAErB,cAAI,aAAa,CAAC,UAAU,UAAU,GAAG;AACvC,sBAAU,MAAM;AAAA,UAClB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,SAAU,KAAK;AAC1B,cAAI,YAAY,KAAK;AACrB,cAAI,WAAW;AACb,sBAAU,OAAO,GAAG;AAAA,UACtB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,WAAY;AACvB,cAAI,YAAY,KAAK;AACrB,cAAI,WAAW;AACb,sBAAU,OAAO;AACjB,iBAAK,aAAa;AAAA,UACpB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,YAAY,KAAK;AACrB,cAAI,WAAW;AACb,sBAAU,KAAK;AAAA,UACjB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,YAAY,KAAK;AACrB,cAAI,WAAW;AACb,sBAAU,KAAK;AAAA,UACjB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,SAAU,OAAO;AAC5B,kBAAQ,OAAO;AAAA,YACb,KAAK;AACH,mBAAK,YAAY;AACjB;AAAA,YACF,KAAK;AACH,mBAAK,UAAU;AACf;AAAA,YACF,KAAK;AACH,mBAAK,UAAU;AACf;AAAA,UACJ;AAAA,QACF;AAAA,QACA,oBAAoB,WAAY;AAC9B,0BAAgB,OAAO,IAAI;AAAA,QAC7B;AAAA,QACA,oBAAoB,SAAU,OAAO;AACnC,cAAI,UAAU,OAAQ,SAAQ;AAC9B,0BAAgB,OAAO,MAAM,MAAM,KAAK;AAAA,QAC1C;AAAA,QACA,uBAAuB,WAAY;AACjC,0BAAgB,UAAU,IAAI;AAAA,QAChC;AAAA;AAAA;AAAA,QAIA,2BAA2B,SAAS,0BAA0B,KAAK;AACjE,eAAK,UAAU,KAAK;AAAA,YAClB,6BAA6B;AAAA,UAC/B,CAAC;AAAA,QACH;AAAA,QACA,+BAA+B,SAAS,8BAA8B,KAAK;AACzE,cAAI,MAAM,KAAK,UAAU,GAAG;AAC5B,cAAI,8BAA8B,IAAI;AACtC,cAAI,gCAAgC,OAAQ,+BAA8B;AAC1E,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAQA,iBAAiB,SAAU,KAAK,GAAG,GAAG;AACpC,eAAK,OAAO,wBAAwB,KAAK,GAAG,CAAC;AAAA,QAC/C;AAAA,QACA,cAAc,SAAU,KAAK,GAAG,GAAG;AACjC,eAAK,OAAO,qBAAqB,KAAK,GAAG,CAAC;AAAA,QAC5C;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAChC,eAAK,OAAO,oBAAoB,KAAK,GAAG,CAAC;AAAA,QAC3C;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAChC,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,MAAM;AAClB,cAAI,OAAO;AACT,kBAAM,WAAW,SAAS;AAC1B,iBAAK,UAAU,KAAK;AAAA,cAClB;AAAA,YACF,CAAC;AAAA,UACH;AACA,eAAK,OAAO,oBAAoB,KAAK,GAAG,CAAC;AAAA,QAC3C;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAChC,eAAK,OAAO,oBAAoB,KAAK,GAAG,CAAC;AAAA,QAC3C;AAAA,QACA,WAAW,SAAU,KAAK,GAAG,GAAG;AAC9B,cAAI,MAAM,KAAK,UAAU,GAAG;AAC5B,cAAI,QAAQ,IAAI;AAChB,eAAK,OAAO,kBAAkB,KAAK,GAAG,CAAC;AACvC,cAAI,OAAO;AAGT,kBAAM,UAAU,WAAW;AAAA,cACzB,MAAM,KAAK;AAAA,YACb,CAAC;AAAA,UACH;AAAA,QACF;AAAA,QACA,WAAW,SAAU,KAAK;AACxB,eAAK,OAAO,kBAAkB,GAAG;AAAA,QACnC;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,eAAK,OAAO,iBAAiB,GAAG;AAAA,QAClC;AAAA,QACA,YAAY,SAAU,KAAK;AACzB,eAAK,OAAO,mBAAmB,GAAG;AAAA,QACpC;AAAA,QACA,YAAY,SAAU,KAAK;AACzB,eAAK,OAAO,mBAAmB,GAAG;AAAA,QACpC;AAAA,QACA,YAAY,SAAU,KAAK,GAAG,GAAG,OAAO;AACtC,eAAK,OAAO,mBAAmB,KAAK,GAAG,GAAG,KAAK;AAAA,QACjD;AAAA,QACA,SAAS,SAAU,KAAK,WAAW,GAAG,GAAG;AACvC,eAAK,OAAO,WAAW,KAAK,GAAG,CAAC;AAAA,QAClC;AAAA,QACA,UAAU,WAAY;AAAA,QAGtB;AAAA,QACA,uBAAuB,WAAY;AAAA,QAGnC;AAAA,QACA,mBAAmB,WAAY;AAAA,QAG/B;AAAA,QACA,iBAAiB,SAAS,gBAAgB,KAAK;AAC7C,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,IAAI;AAChB,cAAI,MAAM,QAAQ,GAAG;AAMnB,gBAAI,MAAM,OAAO,GAAG;AAGlB,kBAAI,gBAAgB,MAAM,iBAAiB;AAC3C,kBAAI,eAAe;AACjB,oBAAI,aAAa,MAAM,gBAAgB,aAAa;AACpD,oBAAI,YAAY;AACd,wBAAM,SAAS,UAAU;AACzB,wBAAM,oBAAoB,UAAU;AAAA,gBACtC;AAAA,cACF;AACA,kBAAI,gBAAgB,MAAM,iBAAiB;AAC3C,kBAAI,eAAe;AACjB,oBAAI,aAAa,MAAM,gBAAgB,aAAa;AACpD,oBAAI,YAAY;AACd,wBAAM,SAAS,UAAU;AACzB,wBAAM,oBAAoB,UAAU;AAAA,gBACtC;AAAA,cACF;AAAA,YACF;AAEA,kBAAM,SAAS,IAAI;AACnB,kBAAM,oBAAoB,IAAI;AAAA,UAChC;AACA,cAAI,SAAS,KAAK,eAAe,KAAK;AAAA,YACpC,WAAW;AAAA,UACb,CAAC;AACD,cAAI,OAAO,MAAM,SAAS,MAAM;AAChC,cAAI,SAAS,MAAM;AACjB;AAAA,UACF;AAEA,eAAK,WAAW,GAAG;AACnB,cAAI,CAAC,MAAM;AACT;AAAA,UACF;AAEA,eAAK,WAAW,GAAG;AAAA,QACrB;AAAA,QACA,kBAAkB,SAAU,OAAO;AACjC,eAAK,QAAQ,cAAc;AAAA,QAC7B;AAAA,MACF,GAAG;AAAA,QACD;AAAA,QACA,cAAc;AAAA,QACd,2BAA2B,SAAU,wBAAwB;AAC3D,iBAAO,MAAM,CAAC,GAAG,OAAO,KAAK,WAAW,wBAAwB,GAAG,wBAAwB,SAAU,GAAG,GAAG;AACzG,gBAAI,CAAC,KAAK,CAAC,GAAG;AACZ;AAAA,YACF;AACA,gBAAI,OAAO,MAAM,UAAU;AACzB,kBAAI,CAAC,CAAC;AAAA,YACR;AACA,gBAAI,OAAO,MAAM,UAAU;AACzB,kBAAI,CAAC,CAAC;AAAA,YACR;AACA,gBAAI,MAAM,QAAQ,CAAC,KAAK,MAAM,QAAQ,CAAC,GAAG;AACxC,qBAAO,KAAK,EAAE,OAAO,CAAC,CAAC;AAAA,YACzB;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AAGD,eAAS,sBAAsB,OAAO,OAAO;AAC3C,YAAIsD,UAAS;AACb,WAAG;AACD,cAAIA,QAAO,SAAS,KAAK,GAAG;AAC1B,mBAAOA;AAAA,UACT;AACA,UAAAA,UAASA,QAAO;AAAA,QAClB,SAASA;AACT,eAAO;AAAA,MACT;AACA,UAAI,UAAU;AAAA,QACZ,OAAO,SAAS,MAAM;AAAA,QACtB,QAAQ;AAAA,QACR,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AACA,UAAI,cAAc;AAAA,QAChB,MAAM;AAAA,QACN,QAAQ;AAAA,MACV;AAIA,UAAI,cAAc,SAAS,OAAO;AAAA;AAAA;AAAA;AAAA,QAIhC,cAAc,WAAY;AAAA,QAE1B;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,cAAc,WAAY;AAAA,QAE1B;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,aAAa,SAAS,UAAU,UAAU,MAAM,IAAI,EAAE,MAAM,GAAG;AACnE,qBAAW,KAAK,SAAS;AACzB,iBAAO,WAAW,KAAK,GAAG;AAAA,QAC5B;AAAA,QACA,YAAY,WAAY;AACtB,mBAAS,UAAU,WAAW,MAAM,MAAM,SAAS;AACnD,eAAK,iBAAiB;AAAA,QACxB;AAAA,QACA,wBAAwB;AAAA,UACtB,SAAS,CAAC,QAAQ,MAAM;AAAA,UACxB,YAAY,CAAC,QAAQ,WAAW,QAAQ,KAAK;AAAA,UAC7C,QAAQ,CAAC,QAAQ,QAAQ,QAAQ,OAAO,QAAQ,KAAK;AAAA,UACrD,SAAS,CAAC,QAAQ,QAAQ,QAAQ,KAAK;AAAA,UACvC,UAAU,CAAC,QAAQ,MAAM;AAAA,UACzB,SAAS,CAAC,QAAQ,KAAK;AAAA,QACzB;AAAA,QACA,UAAU,CAAC,QAAQ,MAAM;AAAA,QACzB,iBAAiB;AAAA,QACjB,eAAe,SAAU,MAAM,KAAK;AAClC,cAAI,kBAAkB,OAAO;AAC7B,cAAI,KAAK,QAAQ,MAAM,QAAQ,KAAK,GAAG;AACrC,iBAAK,aAAa;AAClB,iBAAK,iBAAiB;AAAA,UACxB;AACA,cAAI,wBAAwB;AAC5B,cAAI,KAAK,QAAQ,MAAM,QAAQ,MAAM,GAAG;AACtC,iBAAK,OAAO;AACZ,iBAAK,YAAY,GAAG;AACpB,iBAAK,mBAAmB,IAAI;AAC5B,oCAAwB;AACxB,mBAAO,KAAK,WAAW,MAAM,CAAC,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,WAAW,QAAQ,QAAQ,QAAQ,OAAO,QAAQ,KAAK,CAAC;AAAA,UAChJ,OAAO;AACL,gBAAI,qBAAqB;AAGzB,gBAAI,KAAK,QAAQ,MAAM,QAAQ,MAAM,GAAG;AACtC,mBAAK,OAAO,GAAG;AACf,mCAAqB;AAErB,qBAAO,KAAK,WAAW,MAAM,CAAC,QAAQ,QAAQ,QAAQ,MAAM,CAAC;AAC7D,kBAAI,iBAAiB;AAEnB,uBAAO,KAAK,WAAW,MAAM,QAAQ,KAAK;AAAA,cAC5C;AAAA,YACF;AACA,gBAAI,KAAK,QAAQ,MAAM,QAAQ,MAAM,GAAG;AACtC,mBAAK,OAAO,KAAK,OAAO,MAAM,GAAG;AACjC,qBAAO,KAAK,WAAW,MAAM,QAAQ,MAAM;AAC3C,mCAAqB;AACrB,kBAAI,iBAAiB;AAEnB,uBAAO,KAAK,WAAW,MAAM,QAAQ,KAAK;AAAA,cAC5C;AAAA,YACF;AACA,gBAAI,KAAK,QAAQ,MAAM,QAAQ,SAAS,GAAG;AACzC,mBAAK,UAAU;AACf,qBAAO,KAAK,WAAW,MAAM,QAAQ,SAAS;AAC9C,sCAAwB;AAAA,YAC1B;AACA,gBAAI,KAAK,QAAQ,MAAM,QAAQ,MAAM,GAAG;AACtC,mBAAK,OAAO;AACZ,qBAAO,KAAK,WAAW,MAAM,QAAQ,MAAM;AAC3C,sCAAwB;AAAA,YAC1B;AACA,gBAAI,KAAK,QAAQ,MAAM,QAAQ,KAAK,GAAG;AACrC,mBAAK,aAAa;AAClB,mCAAqB;AACrB,qBAAO,KAAK,WAAW,MAAM,QAAQ,KAAK;AAAA,YAC5C;AACA,gBAAI,oBAAoB;AACtB,mBAAK,mBAAmB,KAAK;AAAA,YAC/B;AAAA,UACF;AACA,cAAI,uBAAuB;AACzB,iBAAK,sBAAsB;AAAA,UAC7B;AACA,cAAI,KAAK,QAAQ,MAAM,QAAQ,KAAK,GAAG;AACrC,iBAAK,YAAY,GAAG;AACpB,mBAAO,KAAK,WAAW,MAAM,QAAQ,KAAK;AAAA,UAC5C;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA,QAIA,kBAAkB,WAAY;AAAA,QAAC;AAAA,QAC/B,QAAQ,SAAU,GAAG,oBAAoB;AACvC,eAAK,gBAAgB;AAGrB,cAAI,kBAAkB,OAAO;AAC7B,cAAI,iBAAiB;AACnB,iBAAK,aAAa;AAAA,UACpB;AACA,cAAI,QAAQ,KAAK;AACjB,cAAI,aAAa,MAAM,KAAK;AAC5B,eAAK,2BAA2B,KAAK,IAAI,YAAY;AAAA,YACnD,UAAU,IAAI,KAAK,MAAM,KAAK,CAAC;AAAA,YAC/B,WAAW,KAAK;AAAA,YAChB,cAAc,KAAK;AAAA,YACnB,eAAe,KAAK;AAAA;AAAA,YAEpB,cAAc,uBAAuB,aAAa,OAAO;AAAA,UAC3D,CAAC;AACD,cAAI,iBAAiB;AACnB,iBAAK,aAAa;AAAA,UACpB;AAAA,QACF;AAAA,QACA,mBAAmB;AAAA,QACnB,kBAAkB;AAAA,QAClB,cAAc;AAAA,QACd,eAAe;AAAA;AAAA;AAAA,QAGf,cAAc,WAAY;AACxB,cAAI,UAAU,KAAK;AACnB,cAAI,SAAS,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAC9C,cAAI,CAAC,QAAQ;AACX,kBAAM,IAAI,MAAM,kCAAkC;AAAA,UACpD;AACA,cAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,mBAAO,KAAK,iBAAiB,MAAM;AAAA,UACrC;AACA,cAAI,OAAO,WAAW,UAAU;AAC9B,mBAAO,KAAK,mBAAmB,MAAM;AAAA,UACvC;AACA,gBAAM,IAAI,MAAM,iCAAiC;AAAA,QACnD;AAAA,QACA,kBAAkB,SAAU,QAAQ;AAClC,cAAI,MAAM,KAAK,aAAa,QAAQ,KAAK,EAAE;AAC3C,cAAI,YAAY,KAAK,YAAY,IAAI;AACrC,eAAK,gBAAgBtD,GAAE,UAAU,KAAK,iBAAiB,CAAC,KAAK;AAC7D,eAAK,eAAeA,GAAE,UAAU,KAAK,gBAAgB,CAAC,KAAK;AAE3D,eAAK,IAAI,OAAO,IAAI,QAAQ;AAAA,QAC9B;AAAA,QACA,oBAAoB,SAAU,QAAQ;AACpC,cAAI,MAAM,KAAK;AACf,cAAI,OAAOA,GAAE,MAAM,CAAC;AAEpB,eAAK,gBAAgB,IAAI,QAAQ,YAAY;AAC7C,eAAK,eAAe,IAAI,QAAQ,WAAW;AAC3C,cAAI,YAAY,KAAK,YAAY,CAAC;AAClC,oBAAU,KAAK,QAAQ,IAAI,KAAK;AAAA,QAClC;AAAA,QACA,QAAQ,WAAY;AAClB,eAAK,IAAI,MAAM;AACf,eAAK,aAAa;AAClB,cAAI,KAAK,cAAc;AAGrB,iBAAK,OAAO;AAAA,UACd;AACA,eAAK,OAAO;AACZ,cAAI,KAAK,eAAe;AAGtB,iBAAK,OAAO;AACZ,iBAAK,UAAU;AAAA,UACjB,OAAO;AACL,iBAAK,qBAAqB;AAAA,UAC5B;AACA,cAAI,CAAC,OAAO,iBAAiB;AAC3B,iBAAK,aAAa;AAAA,UACpB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,SAAU,KAAK;AACrB,cAAI,KAAK,cAAc;AACrB,mBAAO,KAAK,SAAS,GAAG;AAAA,UAC1B;AACA,cAAI,KAAK,MAAM,WAAW,OAAO;AAC/B,iBAAK,OAAO;AAAA,UACd;AACA,eAAK,OAAO;AAAA,QACd;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,KAAK,eAAe;AACtB,mBAAO,KAAK,YAAY;AAAA,UAC1B;AACA,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QACA,QAAQ,WAAY;AAClB,cAAI,KAAK,eAAe;AACtB,iBAAK,SAAS;AAGd,iBAAK,OAAO;AACZ;AAAA,UACF;AACA,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QACA,sBAAsB,WAAY;AAChC,cAAI,iBAAiB,KAAK,mBAAmB;AAC7C,cAAI,eAAe,KAAK,gBAAgB;AACxC,cAAI,cAAc;AAChB,8BAAkB,MAAM;AAAA,UAC1B;AACA,eAAK,IAAI,KAAK,aAAa,cAAc;AAAA,QAC3C;AAAA,QACA,oBAAoB,WAAY;AAC9B,cAAI,WAAW,KAAK,MAAM,WAAW;AACrC,iBAAO,eAAe,SAAS,IAAI,MAAM,SAAS,IAAI;AAAA,QACxD;AAAA,QACA,iBAAiB,WAAY;AAC3B,cAAIqD,cAAa,KAAK,MAAM;AAC5B,cAAI,QAAQA,YAAW;AACvB,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AACA,cAAI,OAAOA,YAAW;AACtB,iBAAO,YAAY,QAAQ,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK,SAAS,IAAI;AAAA,QAC5E;AAAA;AAAA;AAAA,QAIA,UAAU,WAAY;AACpB,eAAK,cAAc,KAAK,aAAa,KAAK,gBAAgB,CAAC;AAAA,QAC7D;AAAA,QACA,aAAa,WAAY;AACvB,eAAK,IAAI,KAAK,aAAa,KAAK,mBAAmB,CAAC;AAAA,QACtD;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,cAAI,QAAQ,KAAK;AACjB,cAAI,QAAQ,MAAM,MAAM;AACxB,cAAI,OAAO,MAAM,KAAK;AACtB,cAAI,WAAW,KAAK;AAKpB,cAAI,YAAY;AAChB,cAAI,SAAS,KAAK,qBAAqB,MAAM,EAAE,SAAS,GAAG;AAGzD,wBAAY;AAAA,UACd;AACA,cAAI,eAAe,SAAS,QAAQ;AAAA,YAClC;AAAA,UACF,CAAC;AAID,cAAI,KAAK,KAAK,SAAS,aAAa,SAAS;AAC7C,cAAI,KAAK,KAAK,UAAU,aAAa,UAAU;AAC/C,mBAAS,KAAK,aAAa,WAAW,KAAK,MAAM,KAAK,GAAG;AAWzD,cAAI,YAAY,KAAK;AACrB,cAAI,WAAW,aAAa,UAAU,KAAK,WAAW;AACtD,cAAI,UAAU;AACZ,sBAAU,KAAK,aAAa,WAAW,aAAa,CAAC,QAAQ,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK,SAAS,IAAI,GAAG;AAC/G,gBAAI,gBAAgB,SAAS,QAAQ;AAAA,cACnC,QAAQ,KAAK,MAAM;AAAA,YACrB,CAAC;AAGD,kBAAM,IAAI,YAAY;AAAA,cACpB,GAAG,cAAc;AAAA,cACjB,GAAG,cAAc;AAAA,YACnB,GAAG,OAAO;AAAA,cACR,eAAe;AAAA,YACjB,GAAG,GAAG,CAAC;AACP,iBAAK,UAAU;AACf,iBAAK,OAAO;AAAA,UACd;AAIA,eAAK,OAAO;AAAA,QACd;AAAA;AAAA;AAAA,QAIA,kBAAkB,SAAUT,OAAM;AAChC,cAAIA,UAAS,OAAQ,CAAAA,QAAO,CAAC;AAC7B,cAAI,UAAUA,MAAK,SAAS,KAAK;AACjC,cAAI,QAAQA,MAAK,SAAS,KAAK;AAC/B,cAAI,QAAQ,MAAM;AAClB,cAAI,kBAAkBA,MAAK,kBAAkB,CAAC;AAC9C,cAAI,gBAAgB,QAAQ,iBAAiB;AAAA,YAC3C,MAAM;AAAA,UACR,CAAC;AACD,cAAI,iBAAiB,MAAM,kBAAkB,SAAS;AAAA,YACpD,MAAM;AAAA,YACN,iBAAiB;AAAA,UACnB,CAAC;AAID,WAAC,OAAO,EAAE,OAAO,eAAe,cAAc,EAAE,QAAQ,SAAU,MAAM;AACtE,mBAAO,gBAAgB,KAAK,EAAE,IAAI,KAAK,WAAW;AAAA,UACpD,CAAC;AACD,kBAAQ,WAAW,UAAU;AAG7B,kBAAQ,QAAQ;AAAA,YACd,MAAM;AAAA,YACN,IAAI;AAAA,UACN,CAAC;AAID,cAAI,OAAO,MAAM,YAAY,EAAE,OAAO,SAAUjB,MAAK,MAAM;AACzD,mBAAO,KAAK,IAAIA,MAAK,KAAK,WAAW,KAAK,CAAC;AAAA,UAC7C,GAAG,CAAC;AAKJ,yBAAe,QAAQ,SAAU,MAAM;AACrC,gBAAI,KAAK,WAAW,KAAK,MAAM;AAC7B,mBAAK,IAAI,KAAK,OAAO,GAAG;AAAA,gBACtB,IAAI;AAAA,cACN,CAAC;AAAA,YACH;AAAA,UACF,CAAC;AACD,kBAAQ,UAAU,UAAU;AAG5B,cAAI,WAAW,QAAQ,OAAO;AAC9B,cAAI,UAAU;AACZ,gBAAI2B,UAAS,MAAM,QAAQ,QAAQ;AACnC,YAAAA,QAAO,QAAQ,SAAS;AAAA,cACtB,IAAI;AAAA,YACN,CAAC;AACD,YAAAV,MAAK,kBAAkB;AAAA,UACzB,OAAO;AACL,YAAAA,MAAK,kBAAkB;AAAA,UACzB;AAAA,QACF;AAAA,QACA,kBAAkB,SAAUA,OAAM,KAAK,GAAG,GAAG;AAC3C,cAAIA,UAAS,OAAQ,CAAAA,QAAO,CAAC;AAC7B,cAAI,QAAQA,MAAK,SAAS,KAAK;AAC/B,cAAI,QAAQA,MAAK,SAAS,KAAK;AAC/B,cAAI,QAAQ,MAAM;AAClB,cAAI,MAAM,MAAM;AAChB,cAAI,eAAe,IAAI;AACvB,cAAI,kBAAkB,IAAI;AAC1B,cAAI,oBAAoB,IAAI;AAC5B,cAAI;AACJ,cAAI,WAAW,YAAY,GAAG;AAC5B,yBAAa,QAAQ,aAAa,KAAK,OAAO,MAAM,KAAK,GAAG,CAAC,CAAC;AAAA,UAChE,WAAW,iBAAiB,WAAW;AACrC,yBAAa,QAAQ,MAAM,oBAAoB;AAAA,cAC7C;AAAA,cACA;AAAA,YACF,CAAC,CAAC;AAAA,UACJ,OAAO;AACL,yBAAa,MAAM,uBAAuB,OAAO;AAAA,cAC/C,UAAU;AAAA,YACZ,CAAC;AAAA,UACH;AACA,uBAAa,WAAW,OAAO,SAAU,IAAI;AAC3C,mBAAO,cAAc,QAAQ,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,aAAa,KAAK;AAAA,UAC3E,CAAC;AACD,cAAI,iBAAiB;AAEnB,yBAAa,WAAW,MAAM,EAAE;AAAA,UAClC;AACA,cAAI,mBAAmB;AACvB,cAAI,oBAAoBA,MAAK;AAG7B,mBAAS,IAAI,WAAW,SAAS,GAAG,KAAK,GAAG,KAAK;AAC/C,gBAAI,YAAY,WAAW,CAAC;AAC5B,gBAAI,qBAAqB,kBAAkB,MAAM,MAAM,UAAU,IAAI;AAEnE,iCAAmB;AACnB;AAAA,YACF,OAAO;AACL,kBAAI,OAAO,UAAU,SAAS,KAAK;AACnC,kBAAI,CAAC,WAAW,iBAAiB,KAAK,kBAAkB,KAAK,OAAO,MAAM,IAAI,GAAG;AAE/E,mCAAmB;AACnB;AAAA,cACF;AAAA,YACF;AAAA,UACF;AACA,cAAI,oBAAoB,oBAAoB,mBAAmB;AAE7D,iBAAK,eAAeA,KAAI;AACxB,YAAAA,MAAK,qBAAqB,iBAAiB,UAAU,iBAAiB,cAAc,MAAM,WAAW,GAAG;AAAA,cACtG,WAAW;AAAA,YACb,CAAC;AAAA,UACH;AACA,cAAI,CAAC,oBAAoB,mBAAmB;AAE1C,iBAAK,eAAeA,KAAI;AAAA,UAC1B;AAAA,QACF;AAAA,QACA,gBAAgB,SAAUA,OAAM;AAC9B,UAAAA,UAASA,QAAO,CAAC;AACjB,cAAI,gBAAgBA,MAAK;AACzB,cAAI,eAAe;AAEjB,0BAAc,YAAY,cAAc,cAAc,MAAM,WAAW,GAAG;AAAA,cACxE,WAAW;AAAA,YACb,CAAC;AACD,YAAAA,MAAK,qBAAqB;AAAA,UAC5B;AAAA,QACF;AAAA,QACA,mBAAmB,SAAUA,OAAM;AACjC,cAAIA,UAAS,OAAQ,CAAAA,QAAO,CAAC;AAC7B,cAAI,gBAAgBA,MAAK;AACzB,cAAI,UAAUA,MAAK,SAAS,KAAK;AACjC,cAAI,QAAQA,MAAK,SAAS,KAAK;AAC/B,cAAI,eAAe;AAEjB,0BAAc,MAAM,MAAM,SAAS;AAAA,cACjC,IAAI;AAAA,YACN,CAAC;AACD,0BAAc,YAAY,cAAc,cAAc,MAAM,WAAW,GAAG;AAAA,cACxE,WAAW;AAAA,YACb,CAAC;AACD,YAAAA,MAAK,qBAAqB;AAAA,UAC5B,OAAO;AACL,gBAAI,MAAM,MAAM;AAChB,gBAAI,sBAAsB,IAAI;AAC9B,gBAAI,kBAAkBA,MAAK;AAI3B,gBAAI,mBAAmB,OAAO,wBAAwB,cAAc,CAAC,oBAAoB,KAAK,OAAO,IAAI,GAAG;AAC1G,mBAAK,iBAAiBA,KAAI;AAC1B;AAAA,YACF;AAAA,UACF;AACA,gBAAM,MAAM,kBAAkB,SAAS;AAAA,YACrC,MAAM;AAAA,UACR,CAAC,EAAE,QAAQ,SAAU,MAAM;AACzB,iBAAK,SAAS;AAAA,cACZ,IAAI;AAAA,YACN,CAAC;AAAA,UACH,CAAC;AAAA,QACH;AAAA,QACA,kBAAkB,SAAUA,OAAM;AAChC,cAAI,QAAQA,MAAK;AACjB,cAAI,iBAAiBA,MAAK;AAC1B,cAAI,mBAAmB,OAAQ,kBAAiB;AAChD,cAAI,UAAU,SAAS,KAAK;AAC5B,cAAI,QAAQA,MAAK,SAAS,KAAK;AAC/B,cAAI,QAAQ,MAAM;AAClB,kBAAQ,gBAAgB;AAAA,YACtB,KAAK,UACH;AACE,sBAAQ,OAAO;AAAA,gBACb,IAAI;AAAA,cACN,CAAC;AACD;AAAA,YACF;AAAA,YACF,KAAK,UACH;AACE,kBAAI,kBAAkBA,MAAK;AAC3B,kBAAI,kBAAkBA,MAAK;AAC3B,kBAAI,kBAAkBA,MAAK;AAE3B,kBAAI,iBAAiB;AACnB,oBAAI,IAAI,gBAAgB;AACxB,oBAAI,IAAI,gBAAgB;AACxB,wBAAQ,SAAS,GAAG,GAAG;AAAA,kBACrB,MAAM;AAAA,kBACN,IAAI;AAAA,gBACN,CAAC;AAAA,cACH;AAEA,kBAAI,iBAAiB;AACnB,uBAAO,KAAK,eAAe,EAAE,QAAQ,SAAUO,KAAI;AACjD,sBAAI,OAAO,MAAM,QAAQA,GAAE;AAC3B,sBAAI,MAAM;AACR,yBAAK,IAAI,KAAK,gBAAgBA,GAAE,GAAG;AAAA,sBACjC,IAAI;AAAA,oBACN,CAAC;AAAA,kBACH;AAAA,gBACF,CAAC;AAAA,cACH;AAEA,kBAAIG,UAAS,MAAM,QAAQ,eAAe;AAC1C,kBAAIA,SAAQ;AACV,gBAAAA,QAAO,MAAM,SAAS;AAAA,kBACpB,IAAI;AAAA,gBACN,CAAC;AAAA,cACH;AACA;AAAA,YACF;AAAA,UACJ;AAAA,QACF;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,OAAO;AACX,cAAI,QAAQ,KAAK;AACjB,cAAI,QAAQ,KAAK;AACjB,iBAAO,MAAM;AACX,gBAAI,MAAM,OAAO,GAAG;AAClB;AAAA,YACF;AACA,gBAAI,CAAC,MAAM,WAAW,KAAK,KAAK,IAAI,gBAAgB,GAAG;AACrD,qBAAO;AAAA,YACT;AACA,oBAAQ,MAAM,cAAc;AAC5B,mBAAO,MAAM,gBAAgB,KAAK;AAAA,UACpC;AACA,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,SAAU,IAAI,MAAM;AACjC,iBAAO,KAAK,KAAK;AACjB,cAAI,eAAe,GAAG,aAAa,OAAO,WAAW;AACrD,cAAI,cAAc;AAChB,gBAAI,OAAO,KAAK,cAAc,QAAQ,EAAE;AACxC,gBAAI,MAAM;AACR,kBAAI,gBAAgB,KAAK,aAAa,MAAM,YAAY;AACxD,kBAAI,eAAe;AACjB,uBAAO;AAAA,cACT;AAAA,YACF,OAAO;AACL,kBAAI,MAAM,KAAK,eAAe,YAAY;AAC1C,kBAAI,YAAY,IAAI,CAAC;AACrB,kBAAI,WAAW;AACb,uBAAO;AAAA,cACT;AAAA,YACF;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAIA,mBAAmB,SAAS,kBAAkB,KAAK,GAAG,GAAG;AACvD,mBAAS,UAAU,YAAY,KAAK,MAAM,KAAK,GAAG,CAAC;AACnD,eAAK,OAAO,uBAAuB,KAAK,GAAG,CAAC;AAAA,QAC9C;AAAA,QACA,mBAAmB,SAAS,kBAAkB,KAAK,GAAG,GAAG;AACvD,mBAAS,UAAU,YAAY,KAAK,MAAM,KAAK,GAAG,CAAC;AACnD,eAAK,OAAO,uBAAuB,KAAK,GAAG,CAAC;AAAA,QAC9C;AAAA,QACA,iBAAiB,SAAS,gBAAgB,KAAK,GAAG,GAAG;AACnD,eAAK,OAAO,qBAAqB,KAAK,GAAG,CAAC;AAC1C,mBAAS,UAAU,UAAU,KAAK,MAAM,KAAK,GAAG,CAAC;AAAA,QACnD;AAAA,QACA,iBAAiB,SAAU,KAAK,GAAG,GAAG;AACpC,mBAAS,UAAU,gBAAgB,MAAM,MAAM,SAAS;AACxD,eAAK,OAAO,2BAA2B,KAAK,GAAG,CAAC;AAAA,QAClD;AAAA,QACA,cAAc,SAAU,KAAK,GAAG,GAAG;AACjC,mBAAS,UAAU,aAAa,MAAM,MAAM,SAAS;AACrD,eAAK,OAAO,wBAAwB,KAAK,GAAG,CAAC;AAAA,QAC/C;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAChC,mBAAS,UAAU,YAAY,MAAM,MAAM,SAAS;AACpD,eAAK,OAAO,uBAAuB,KAAK,GAAG,CAAC;AAAA,QAC9C;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAChC,eAAK,kBAAkB,KAAK,GAAG,CAAC;AAChC,eAAK,UAAU,KAAK,GAAG,CAAC;AAAA,QAC1B;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAChC,cAAIV,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,eAAeA,MAAK;AACxB,cAAI,SAASA,MAAK;AAClB,cAAI,gBAAgBA,MAAK;AACzB,cAAI,cAAc;AAChB,iBAAK,kBAAkB,KAAK,cAAc,GAAG,CAAC;AAAA,UAChD;AACA,kBAAQ,QAAQ;AAAA,YACd,KAAK,YAAY;AACf,mBAAK,WAAW,KAAK,GAAG,CAAC;AACzB;AAAA,YACF,KAAK,YAAY;AACf,eAAC,iBAAiB,MAAM,KAAK,KAAK,GAAG,CAAC;AAAA;AAAA,YAExC;AACE,kBAAIA,MAAK,sBAAsB;AAC7B;AAAA,cACF;AACA,mBAAK,kBAAkB,KAAK,GAAG,CAAC;AAChC;AAAA,UACJ;AAIA,eAAK,UAAU,KAAKA,KAAI;AAAA,QAC1B;AAAA,QACA,WAAW,SAAU,KAAK,GAAG,GAAG;AAC9B,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,eAAeA,MAAK;AACxB,cAAI,SAASA,MAAK;AAClB,cAAI,gBAAgBA,MAAK;AACzB,cAAI,cAAc;AAChB,iBAAK,gBAAgB,KAAK,cAAc,GAAG,CAAC;AAAA,UAC9C;AACA,kBAAQ,QAAQ;AAAA,YACd,KAAK,YAAY;AACf,mBAAK,cAAc,KAAK,GAAG,CAAC;AAC5B;AAAA,YACF,KAAK,YAAY;AACf,eAAC,iBAAiB,MAAM,QAAQ,KAAK,GAAG,CAAC;AAAA;AAAA,YAE3C;AACE,kBAAIA,MAAK,sBAAsB;AAC7B;AAAA,cACF;AACA,mBAAK,gBAAgB,KAAK,GAAG,CAAC;AAAA,UAClC;AACA,cAAI,cAAc;AAChB,iBAAK,mBAAmB,KAAK,cAAc,GAAG,CAAC;AAAA,UACjD;AACA,eAAK,gBAAgB,GAAG;AAAA,QAC1B;AAAA,QACA,WAAW,SAAU,KAAK;AACxB,mBAAS,UAAU,UAAU,MAAM,MAAM,SAAS;AAClD,eAAK,OAAO,qBAAqB,GAAG;AAAA,QACtC;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,mBAAS,UAAU,SAAS,MAAM,MAAM,SAAS;AACjD,eAAK,OAAO,oBAAoB,GAAG;AAAA,QACrC;AAAA,QACA,YAAY,SAAU,KAAK;AACzB,mBAAS,UAAU,WAAW,MAAM,MAAM,SAAS;AACnD,eAAK,OAAO,sBAAsB,GAAG;AAAA,QACvC;AAAA,QACA,YAAY,SAAU,KAAK;AACzB,mBAAS,UAAU,WAAW,MAAM,MAAM,SAAS;AACnD,eAAK,OAAO,sBAAsB,GAAG;AAAA,QACvC;AAAA,QACA,YAAY,SAAU,KAAK,GAAG,GAAG,OAAO;AACtC,mBAAS,UAAU,WAAW,MAAM,MAAM,SAAS;AACnD,eAAK,OAAO,sBAAsB,KAAK,GAAG,GAAG,KAAK;AAAA,QACpD;AAAA,QACA,UAAU,SAAU,KAAK,GAAG,GAAG;AAC7B,cAAI,eAAe,IAAI;AACvB,eAAK,kBAAkB,KAAK,cAAc,GAAG,CAAC;AAC9C,eAAK,UAAU,KAAK;AAAA,YAClB;AAAA,UACF,CAAC;AACD,eAAK,gBAAgB,KAAK,GAAG,CAAC;AAAA,QAChC;AAAA,QACA,mBAAmB,SAAU,KAAK,QAAQ,GAAG,GAAG;AAC9C,eAAK,OAAO,8BAA8B,KAAK,QAAQ,GAAG,CAAC;AAAA,QAC7D;AAAA,QACA,mBAAmB,SAAU,KAAK,QAAQ,GAAG,GAAG;AAC9C,eAAK,OAAO,8BAA8B,KAAK,QAAQ,GAAG,CAAC;AAAA,QAC7D;AAAA,QACA,iBAAiB,SAAU,KAAK,QAAQ,GAAG,GAAG;AAC5C,eAAK,OAAO,4BAA4B,KAAK,QAAQ,GAAG,CAAC;AAAA,QAC3D;AAAA,QACA,uBAAuB,SAAU,KAAK,QAAQ,GAAG,GAAG;AAClD,eAAK,OAAO,kCAAkC,KAAK,QAAQ,GAAG,CAAC;AAAA,QACjE;AAAA,QACA,mBAAmB,SAAU,KAAK,QAAQ,GAAG,GAAG;AAC9C,eAAK,OAAO,8BAA8B,KAAK,QAAQ,GAAG,CAAC;AAAA,QAC7D;AAAA;AAAA,QAGA,WAAW,SAAU,KAAK,GAAG,GAAG;AAC9B,cAAI,KAAK,8BAA8B,GAAG,GAAG;AAC3C;AAAA,UACF;AACA,cAAI,OAAO,KAAK,iBAAiB;AACjC,cAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,aAAa,GAAG;AACrC;AAAA,UACF;AACA,eAAK,UAAU,KAAK;AAAA,YAClB,QAAQ,YAAY;AAAA,YACpB,eAAe;AAAA,UACjB,CAAC;AACD,cAAI,WAAW,KAAK,MAAM,SAAS;AACnC,eAAK,UAAU,KAAK;AAAA,YAClB,iBAAiB;AAAA,YACjB,eAAe,SAAS,WAAW,GAAG,CAAC;AAAA,YACvC,gBAAgB,KAAK,MAAM,kBAAkB,MAAM,GAAG,CAAC;AAAA,UACzD,CAAC;AAAA,QACH;AAAA,QACA,iBAAiB,SAAU,KAAK,GAAG,GAAG;AACpC,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,8BAA8B,IAAI,qBAAqB;AAC3D,cAAI,6BAA6B;AAK/B,iBAAK,UAAU,KAAK;AAAA,cAClB,sBAAsB;AAAA,YACxB,CAAC;AAAA,UACH;AACA,cAAI,KAAK,8BAA8B,GAAG,KAAK,CAAC,KAAK,IAAI,mBAAmB,GAAG;AAE7E;AAAA,UACF;AACA,cAAI,QAAQ,KAAK,UAAU,GAAG;AAC9B,cAAI,eAAe,MAAM;AACzB,cAAI,iBAAiB,OAAQ,gBAAe,IAAI;AAChD,cAAI,gBAAgB;AAGpB,cAAI,CAAC,MAAM,QAAQ,eAAe,KAAK,OAAO,MAAM,cAAc,GAAG,GAAG;AACtE,gBAAI,6BAA6B;AAG/B,mBAAK,UAAU,KAAK,GAAG,CAAC;AAAA,YAG1B,OAAO;AAGL,mBAAK,YAAY,KAAK,GAAG,CAAC;AAAA,YAC5B;AACA;AAAA,UACF;AAGA,cAAI,MAAM,QAAQ,mBAAmB,GAAG;AACtC,iBAAK,cAAc,KAAK,cAAc,GAAG,CAAC;AAAA,UAC5C;AACA,eAAK,UAAU,KAAK;AAAA,YAClB,QAAQ,YAAY;AAAA,UACtB,CAAC;AAAA,QACH;AAAA;AAAA,QAGA,MAAM,SAAU,KAAK,GAAG,GAAG;AACzB,cAAI,QAAQ,KAAK;AACjB,cAAI,OAAO,MAAM,QAAQ;AACzB,cAAI,UAAU,KAAK;AACnB,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,gBAAgBA,MAAK;AACzB,cAAI,iBAAiBA,MAAK;AAC1B,cAAI,YAAYA,MAAK;AAGrB,cAAI,MAAM,WAAW,IAAI,cAAc,GAAG,IAAI;AAC9C,cAAI,MAAM,WAAW,IAAI,cAAc,GAAG,IAAI;AAC9C,kBAAQ,SAAS,KAAK,KAAK;AAAA,YACzB;AAAA,YACA,MAAM;AAAA,YACN,IAAI;AAAA,UACN,CAAC;AACD,cAAI,MAAM,QAAQ,eAAe;AAC/B,gBAAI,CAAC,WAAW;AAId,mBAAK,iBAAiBA,KAAI;AAC1B,0BAAY;AAAA,YACd;AACA,iBAAK,iBAAiBA,OAAM,KAAK,GAAG,CAAC;AAAA,UACvC;AACA,eAAK,UAAU,KAAK;AAAA,YAClB;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,YAAY,SAAU,KAAK,GAAG,GAAG;AAC/B,eAAK,SAAS,KAAK,GAAG,CAAC;AAAA,QACzB;AAAA;AAAA,QAGA,SAAS,SAAU,KAAK,GAAG,GAAG;AAC5B,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAIA,MAAK,WAAW;AAClB,iBAAK,kBAAkBA,KAAI;AAAA,UAC7B;AAAA,QACF;AAAA,QACA,eAAe,SAAU,KAAK,GAAG,GAAG;AAClC,eAAK,YAAY,KAAK,GAAG,CAAC;AAAA,QAC5B;AAAA,QACA,oBAAoB,SAAU,KAAK,QAAQ,GAAG,GAAG;AAC/C,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,UAAU,GAAG,EAAE,aAAa,MAAM,QAAQ,gBAAgB;AAClE;AAAA,UACF;AACA,eAAK,OAAO,+BAA+B,KAAK,QAAQ,GAAG,CAAC;AAAA,QAC9D;AAAA,MACF,GAAG;AAAA,QACD,OAAO;AAAA,MACT,CAAC;AACD,aAAO,YAAY,WAAW,wBAAwB;AAItD,UAAI,SAAS,SAAU,UAAU,KAAK,UAAU;AAC9C,eAAO;AAAA,MACT;AAQA,UAAI,UAAU,SAAU,UAAU,KAAK,UAAU;AAC/C,YAAI,OAAO,IAAI,QAAQ;AACvB,YAAI,UAAU,eAAe,IAAI,WAAW,EAAE;AAI9C,YAAI,aAAa,SAAS;AAC1B,YAAI,aAAa,SAAS;AAC1B,YAAI,cAAc,WAAW,OAAO;AACpC,YAAI,cAAc,WAAW,OAAO;AACpC,YAAI,YAAY,WAAW;AAC3B,gBAAQ,MAAM;AAAA,UACZ,KAAK;AACH,wBAAY;AACZ,yBAAa;AACb,wBAAY;AACZ;AAAA,UACF,KAAK;AACH,wBAAY;AACZ,yBAAa;AACb,wBAAY;AACZ;AAAA,UACF,KAAK;AACH,wBAAY;AACZ,yBAAa;AACb,wBAAY;AACZ;AAAA,UACF,KAAK;AACH,wBAAY;AACZ,yBAAa;AACb,wBAAY;AACZ;AAAA,UACF;AACE,kBAAM,IAAI,MAAM,sBAAsB;AAAA,QAC1C;AAGA,oBAAY,UAAU,KAAK,aAAa,WAAW,SAAS,IAAI,IAAI,QAAQ,IAAI;AAChF,oBAAY,UAAU,KAAK,aAAa,WAAW,SAAS,IAAI,IAAI,QAAQ,IAAI;AAGhF,YAAI,aAAa,YAAY,UAAU,IAAI,YAAY,UAAU,KAAK,GAAG;AACvE,sBAAY,UAAU,IAAI,YAAY,UAAU;AAAA,QAClD,OAAO;AACL,sBAAY,UAAU,IAAI,YAAY,UAAU;AAAA,QAClD;AACA,eAAO,CAAC,WAAW,EAAE,OAAO,UAAU,WAAW;AAAA,MACnD;AAGA,UAAI,YAAY;AAAA,QACd,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,MACL;AAGA,UAAI,UAAU;AAAA,QACZ,GAAG,CAAC,KAAK,KAAK,IAAI;AAAA,QAClB,GAAG,CAAC,KAAK,KAAK;AAAA,QACd,GAAG;AAAA,QACH,GAAG,KAAK;AAAA,MACV;AAMA,eAAS,SAAS,IAAI,IAAIpB,OAAM;AAC9B,YAAI,IAAI,IAAI,MAAM,GAAG,GAAG,GAAG,CAAC;AAC5B,YAAIA,MAAK,cAAc,CAAC,GAAG;AACzB,cAAI,IAAI,MAAM,GAAG,GAAG,GAAG,CAAC;AAAA,QAC1B;AAIA,eAAO;AAAA,MACT;AAGA,eAAS,YAAYA,OAAM8F,UAAS;AAClC,eAAO9F,MAAK8F,aAAY,OAAOA,aAAY,MAAM,UAAU,QAAQ;AAAA,MACrE;AAGA,eAAS,WAAW,MAAM,IAAI;AAC5B,YAAI,KAAK,MAAM,GAAG,GAAG;AACnB,iBAAO,KAAK,IAAI,GAAG,IAAI,MAAM;AAAA,QAC/B;AACA,YAAI,KAAK,MAAM,GAAG,GAAG;AACnB,iBAAO,KAAK,IAAI,GAAG,IAAI,MAAM;AAAA,QAC/B;AACA,eAAO;AAAA,MACT;AAGA,eAAS,YAAY,GAAG;AACtB,eAAO,IAAI,KAAK,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC;AAAA,MAChC;AACA,eAAS,cAAc,KAAK;AAE1B,YAAI,QAAQ,eAAe,IAAI,WAAW,IAAI,kBAAkB,EAAE;AAClE,eAAO;AAAA,UACL,GAAG,CAAC,MAAM;AAAA,UACV,GAAG,CAAC,MAAM;AAAA,UACV,OAAO,MAAM,OAAO,MAAM;AAAA,UAC1B,QAAQ,MAAM,MAAM,MAAM;AAAA,QAC5B;AAAA,MACF;AAGA,eAAS,cAAc,UAAU,KAAK;AACpC,eAAO,SAAS,WAAW,MAAM,EAAE,cAAc,cAAc,GAAG,CAAC;AAAA,MACrE;AAGA,eAAS,cAAc,UAAU,KAAK;AACpC,eAAO,SAAS,WAAW,MAAM,EAAE,cAAc,cAAc,GAAG,CAAC;AAAA,MACrE;AAGA,eAAS,gBAAgB,UAAU,KAAK;AACtC,YAAI,SAAS,cAAc;AACzB,iBAAO,SAAS;AAAA,QAClB;AAGA,YAAI,aAAa,cAAc,UAAU,GAAG;AAC5C,eAAO,WAAW,OAAO;AAAA,MAC3B;AAGA,eAAS,gBAAgB,UAAU,KAAK;AACtC,YAAI,SAAS,cAAc;AACzB,iBAAO,SAAS;AAAA,QAClB;AAGA,YAAI,aAAa,cAAc,UAAU,GAAG;AAC5C,eAAO,WAAW,OAAO;AAAA,MAC3B;AAIA,eAAS,aAAa,MAAM,IAAIA,UAAS;AACvC,YAAI,KAAK,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC;AAC/B,YAAI,KAAK,IAAI,MAAM,GAAG,GAAG,KAAK,CAAC;AAC/B,YAAI,KAAK,WAAW,MAAM,EAAE;AAC5B,YAAI,KAAK,WAAW,MAAM,EAAE;AAC5B,YAAI,WAAW,UAAUA,QAAO;AAChC,YAAI,IAAI,OAAOA,YAAW,OAAO,aAAa,OAAO,YAAY,OAAOA,YAAW,KAAK;AACxF,eAAO;AAAA,UACL,QAAQ,CAAC,CAAC;AAAA,UACV,WAAW,WAAW,GAAG,EAAE;AAAA,QAC7B;AAAA,MACF;AACA,eAAS,cAAc,MAAM,IAAI,UAAU;AACzC,YAAI,IAAI,SAAS,MAAM,IAAI,QAAQ;AACnC,eAAO;AAAA,UACL,QAAQ,CAAC,CAAC;AAAA,UACV,WAAW,WAAW,GAAG,EAAE;AAAA,QAC7B;AAAA,MACF;AACA,eAAS,cAAc,MAAM,IAAI,QAAQA,UAAS;AAChD,YAAI,QAAQ,CAAC;AACb,YAAI,SAAS,CAAC,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,IAAI,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC;AAC9D,YAAI,aAAa,OAAO,OAAO,SAAU,IAAI;AAC3C,iBAAO,CAAC,OAAO,cAAc,EAAE;AAAA,QACjC,CAAC;AACD,YAAI,oBAAoB,WAAW,OAAO,SAAU,IAAI;AACtD,iBAAO,WAAW,IAAI,IAAI,MAAMA;AAAA,QAClC,CAAC;AACD,YAAI;AACJ,YAAI,kBAAkB,SAAS,GAAG;AAGhC,cAAI,kBAAkB,OAAO,SAAU,IAAI;AACzC,mBAAO,WAAW,MAAM,EAAE,MAAMA;AAAA,UAClC,CAAC,EAAE,IAAI;AACP,cAAI,KAAK,kBAAkB,CAAC;AAC5B,gBAAM,SAAS,CAAC,CAAC;AACjB,gBAAM,YAAY,WAAW,GAAG,EAAE;AAAA,QACpC,OAAO;AAML,cAAI,WAAW,QAAQ,UAAU,EAAE,CAAC;AACpC,cAAI,KAAK,IAAI,MAAM,EAAE,EAAE,KAAK,GAAG,CAAC,YAAY,QAAQA,QAAO,IAAI,CAAC;AAChE,cAAI,KAAK,SAAS,IAAI,MAAM,MAAM;AAClC,gBAAM,SAAS,CAAC,IAAI,EAAE;AACtB,gBAAM,YAAY,WAAW,IAAI,EAAE;AAAA,QACrC;AACA,eAAO;AAAA,MACT;AACA,eAAS,eAAe,MAAM,IAAI,UAAU,QAAQ;AAClD,YAAI,QAAQ,cAAc,IAAI,MAAM,MAAM;AAC1C,YAAI,KAAK,MAAM,OAAO,CAAC;AACvB,YAAI,SAAS,cAAc,EAAE,GAAG;AAC9B,kBAAQ,cAAc,MAAM,IAAI,QAAQ;AACxC,cAAI,KAAK,MAAM,OAAO,CAAC;AACvB,cAAI,OAAO,cAAc,EAAE,GAAG;AAC5B,gBAAI,aAAa,IAAI,MAAM,IAAI,EAAE,KAAK,IAAI,CAAC,YAAY,UAAU,WAAW,MAAM,EAAE,CAAC,IAAI,CAAC;AAC1F,gBAAI,WAAW,IAAI,MAAM,EAAE,EAAE,KAAK,IAAI,CAAC,YAAY,QAAQ,WAAW,IAAI,EAAE,CAAC,IAAI,CAAC;AAClF,gBAAI,MAAM,IAAI,KAAK,YAAY,QAAQ,EAAE,SAAS;AAClD,gBAAI,aAAa,cAAc,MAAM,KAAK,QAAQ;AAClD,gBAAI,WAAW,aAAa,KAAK,IAAI,WAAW,SAAS;AACzD,kBAAM,SAAS,CAAC,WAAW,OAAO,CAAC,GAAG,SAAS,OAAO,CAAC,CAAC;AACxD,kBAAM,YAAY,SAAS;AAAA,UAC7B;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAKA,eAAS,cAAc,MAAM,IAAI,UAAU,QAAQA,UAAS;AAC1D,YAAI,QAAQ,CAAC;AACb,YAAIC,YAAW,SAAS,MAAM,MAAM,EAAE,QAAQ,CAAC;AAG/C,YAAI,WAAWA,UAAS,OAAO,EAAE,SAAS,EAAE,IAAIA,UAAS,OAAO,EAAE,SAAS,IAAI;AAC/E,YAAI,QAAQ,WAAW,KAAK;AAC5B,YAAI,MAAM,WAAW,OAAO;AAC5B,YAAI,IAAI,IAAI;AACZ,YAAID,UAAS;AAGX,eAAK,MAAM,UAAUC,UAAS,QAAQA,UAAS,QAAQ,QAAQD,QAAO,GAAG,KAAK;AAC9E,eAAKC,UAAS,oBAAoB,EAAE,EAAE,KAAK,IAAI,EAAE;AAAA,QACnD,OAAO;AACL,eAAKA,UAAS,oBAAoB,KAAK,EAAE,KAAK,OAAO,CAAC;AAAA,QACxD;AACA,aAAK,SAAS,IAAI,KAAKA,SAAQ;AAC/B,YAAI,GAAG,MAAM,EAAE,OAAO,GAAG,MAAM,CAAC,GAAG;AACjC,eAAK,MAAM,UAAUA,UAAS,QAAQA,UAAS,QAAQ,MAAM,GAAG,MAAM,KAAK,CAAC,IAAI,KAAK,KAAK,GAAG,GAAG;AAChG,eAAKA,UAAS,oBAAoB,EAAE,EAAE,KAAK,KAAK,CAAC,EAAE,MAAM;AACzD,eAAK,SAAS,IAAI,IAAIA,SAAQ;AAC9B,gBAAM,SAAS,WAAW,CAAC,IAAI,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,EAAE;AAAA,QACtD,OAAO;AACL,gBAAM,SAAS,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE;AAAA,QAC9C;AACA,cAAM,YAAY,WAAW,WAAW,IAAI,EAAE,IAAI,WAAW,IAAI,EAAE;AACnE,eAAO;AAAA,MACT;AAMA,eAAS,WAAW,UAAU,KAAK,UAAU;AAC3C,YAAI,aAAa,cAAc,UAAU,GAAG;AAC5C,YAAI,aAAa,cAAc,UAAU,GAAG;AAC5C,YAAI,eAAe,gBAAgB,UAAU,GAAG;AAChD,YAAI,eAAe,gBAAgB,UAAU,GAAG;AAGhD,qBAAa,WAAW,MAAM,YAAY,YAAY,CAAC;AACvD,qBAAa,WAAW,MAAM,YAAY,YAAY,CAAC;AACvD,mBAAW,QAAQ,QAAQ,EAAE,IAAI,KAAK;AACtC,iBAAS,QAAQ,YAAY;AAC7B,iBAAS,KAAK,YAAY;AAC1B,YAAID;AAEJ,YAAI,qBAAqB,CAAC;AAC1B,iBAAS,IAAI,GAAG3F,OAAM,SAAS,SAAS,GAAG,IAAIA,MAAK,KAAK;AACvD,cAAI,QAAQ;AACZ,cAAI,OAAO,SAAS,CAAC;AACrB,cAAI,KAAK,SAAS,IAAI,CAAC;AACvB,cAAI,eAAe,CAAC,CAAC,WAAW,MAAM,EAAE;AACxC,cAAI,MAAM,GAAG;AAGX,gBAAI,IAAI,MAAMA,MAAK;AAKjB,kBAAI,WAAW,UAAU,WAAW,MAAM,EAAE,QAAQ,CAAC,CAAC,GAAG;AACvD,wBAAQ,cAAc,MAAM,IAAI,YAAY,UAAU;AAAA,cACxD,WAAW,CAAC,cAAc;AACxB,wBAAQ,eAAe,MAAM,IAAI,YAAY,UAAU;AAAA,cACzD;AAAA,YACF,OAAO;AAGL,kBAAI,WAAW,cAAc,EAAE,GAAG;AAChC,wBAAQ,cAAc,MAAM,IAAI,YAAY,YAAY,EAAE,EAAE,cAAc,cAAc,GAAG,CAAC,CAAC;AAAA,cAC/F,WAAW,CAAC,cAAc;AACxB,wBAAQ,cAAc,MAAM,IAAI,UAAU;AAAA,cAC5C;AAAA,YACF;AAAA,UACF,WAAW,IAAI,MAAMA,MAAK;AAIxB,gBAAI,mBAAmB,gBAAgB,WAAW,IAAI,IAAI,MAAM2F;AAChE,gBAAI,WAAW,cAAc,IAAI,KAAK,kBAAkB;AACtD,sBAAQ,cAAc,MAAM,IAAI,YAAY,IAAI,EAAE,cAAc,cAAc,GAAG,CAAC,GAAG,YAAYA,QAAO;AAAA,YAC1G,WAAW,CAAC,cAAc;AACxB,sBAAQ,cAAc,MAAM,IAAI,YAAYA,QAAO;AAAA,YACrD;AAAA,UACF,WAAW,CAAC,cAAc;AAExB,oBAAQ,aAAa,MAAM,IAAIA,QAAO;AAAA,UACxC;AAKA,cAAI,OAAO;AACT,kBAAM,UAAU,KAAK,MAAM,oBAAoB,MAAM,MAAM;AAC3D,YAAAA,WAAU,MAAM;AAAA,UAClB,OAAO;AAEL,YAAAA,WAAU,WAAW,MAAM,EAAE;AAAA,UAC/B;AAGA,cAAI,IAAI,IAAI3F,MAAK;AACf,+BAAmB,KAAK,EAAE;AAAA,UAC5B;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,WAAW;AAAA;AAAA,QAEb,MAAM;AAAA;AAAA;AAAA,QAGN,cAAc;AAAA;AAAA,QAEd,WAAW;AAAA;AAAA,QAEX,2BAA2B;AAAA;AAAA;AAAA;AAAA,QAI3B,eAAe;AAAA;AAAA,QAEf,aAAa,CAAC;AAAA;AAAA;AAAA,QAId,cAAc,CAAC,YAAY;AAAA;AAAA,QAE3B,iBAAiB,CAAC,OAAO,SAAS,UAAU,MAAM;AAAA;AAAA,QAElD,eAAe,CAAC,OAAO,SAAS,UAAU,MAAM;AAAA;AAAA,QAEhD,cAAc;AAAA,UACZ,KAAK;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA,UACA,OAAO;AAAA,YACL,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA,UACA,QAAQ;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA,UACA,MAAM;AAAA,YACJ,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA,QACF;AAAA;AAAA,QAEA,MAAM,WAAY;AAChB,iBAAO,KAAK;AAAA,QACd;AAAA;AAAA;AAAA,QAGA,YAAY,WAAY;AACtB,cAAI,OAAO,KAAK;AAChB,cAAI,OAAO,KAAK,KAAK;AACrB,iBAAO,CAAC;AAAA,YACN,SAAS;AAAA,YACT,SAAS;AAAA,YACT;AAAA,UACF,GAAG;AAAA,YACD,SAAS,CAAC;AAAA,YACV,SAAS;AAAA,YACT;AAAA,UACF,GAAG;AAAA,YACD,SAAS;AAAA,YACT,SAAS;AAAA,YACT;AAAA,UACF,GAAG;AAAA,YACD,SAAS;AAAA,YACT,SAAS,CAAC;AAAA,YACV;AAAA,UACF,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,WAAW,WAAY;AACrB,iBAAO;AAAA,YACL,GAAG;AAAA,YACH,IAAI,KAAK,OAAO;AAAA,YAChB,IAAI,KAAK,OAAO;AAAA,UAClB;AAAA,QACF;AAAA;AAAA,QAEA,YAAY,WAAY;AACtB,cAAI,OAAO,KAAK;AAChB,iBAAO;AAAA,YACL,GAAG,CAAC;AAAA,YACJ,GAAG,CAAC;AAAA,YACJ,OAAO,IAAI;AAAA,YACX,QAAQ,IAAI;AAAA,UACd;AAAA,QACF;AAAA;AAAA;AAAA;AAAA,QAIA,iBAAiB;AAAA;AAAA;AAAA,QAGjB,gBAAgB,SAAU,UAAU,KAAK,UAAU;AACjD,cAAI,CAAC,WAAW,UAAU,GAAG;AAC3B,kBAAM,IAAI,MAAM,+DAA+D;AAAA,UACjF;AACA,iBAAO,WAAW,UAAU,OAAO,CAAC,GAAG,UAAU,GAAG,GAAG,QAAQ;AAAA,QACjE;AAAA;AAAA;AAAA;AAAA,QAIA,eAAe,SAAU,MAAM,IAAI,KAAK;AACtC,iBAAO;AAAA,QAQT;AAAA;AAAA;AAAA,QAGA,eAAe;AAAA,MACjB;AAMA,eAAS,YAAY,KAAK;AACxB,aAAK,MAAM,CAAC;AACZ,aAAK,UAAU;AAEf,aAAK,cAAc;AAAA,MACrB;AACA,kBAAY,UAAU,QAAQ,SAAU,OAAO,MAAM;AACnD,YAAI,MAAM,KAAK;AAGf,YAAI,eAAe,QAAQ,IAAI,WAAW,EAAE,OAAO,SAAU,KAAK,MAAM;AACtE,cAAI,MAAM,KAAK,IAAI,IAAI;AACvB,cAAI,KAAK;AACP,gBAAI,OAAO,MAAM,QAAQ,IAAI,EAAE;AAC/B,gBAAI,MAAM;AACR,kBAAI,KAAK,IAAI;AAAA,YACf;AAAA,UACF;AACA,iBAAO;AAAA,QACT,GAAG,CAAC,CAAC;AAGL,YAAI,oBAAoB,CAAC;AACzB,YAAI,SAAS,MAAM,QAAQ,KAAK,IAAI,QAAQ,EAAE,EAAE;AAChD,YAAI,QAAQ;AACV,8BAAoB,MAAM,mBAAmB,OAAO,aAAa,EAAE,IAAI,SAAU,MAAM;AACrF,mBAAO,KAAK;AAAA,UACd,CAAC,CAAC;AAAA,QACJ;AACA,YAAI,SAAS,MAAM,QAAQ,KAAK,IAAI,QAAQ,EAAE,EAAE;AAChD,YAAI,QAAQ;AACV,8BAAoB,MAAM,mBAAmB,OAAO,aAAa,EAAE,IAAI,SAAU,MAAM;AACrF,mBAAO,KAAK;AAAA,UACd,CAAC,CAAC;AAAA,QACJ;AAOA,YAAI,cAAc,KAAK;AACvB,cAAM,YAAY,EAAE,OAAO,SAAU,KAAK,SAAS;AACjD,cAAI,iBAAiB,QAAQ,IAAI,YAAY,EAAE,SAAS,QAAQ,IAAI,MAAM,CAAC;AAC3E,cAAI,gBAAgB,aAAa,KAAK,SAAU,UAAU;AACxD,mBAAO,SAAS,OAAO,QAAQ;AAAA,UACjC,CAAC;AACD,cAAI,qBAAqB,kBAAkB,SAAS,QAAQ,EAAE;AAC9D,cAAI,aAAa,kBAAkB,iBAAiB;AACpD,cAAI,CAAC,YAAY;AACf,gBAAIH,QAAO,QAAQ,QAAQ,EAAE,cAAc,IAAI,UAAU;AACzD,gBAAI,SAASA,MAAK,OAAO,EAAE,WAAW,WAAW;AACjD,gBAAI,SAASA,MAAK,OAAO,EAAE,WAAW,WAAW;AACjD,qBAAS,IAAI,OAAO,GAAG,KAAK,OAAO,GAAG,KAAK,aAAa;AACtD,uBAAS,IAAI,OAAO,GAAG,KAAK,OAAO,GAAG,KAAK,aAAa;AACtD,oBAAI,UAAU,IAAI,MAAM;AACxB,oBAAI,OAAO,IAAI,IAAI,OAAO,KAAK,CAAC;AAChC,oBAAI,OAAO,EAAE,KAAKA,KAAI;AAAA,cACxB;AAAA,YACF;AAAA,UACF;AACA,iBAAO;AAAA,QACT,GAAG,KAAK,GAAG;AACX,eAAO;AAAA,MACT;AACA,kBAAY,UAAU,oBAAoB,SAAUN,QAAO;AACzD,YAAI,SAASA,OAAM,MAAM,EAAE,WAAW,KAAK,WAAW,EAAE,SAAS;AACjE,eAAO,QAAQ,KAAK,IAAI,MAAM,CAAC,EAAE,MAAM,SAAU,UAAU;AACzD,iBAAO,CAAC,SAAS,cAAcA,MAAK;AAAA,QACtC,CAAC;AAAA,MACH;AAIA,eAAS,YAAY;AACnB,aAAK,QAAQ,CAAC;AACd,aAAK,OAAO,CAAC;AACb,aAAK,SAAS,CAAC;AACf,aAAK,OAAO;AACZ,aAAK,QAAQ;AAAA,MACf;AACA,gBAAU,UAAU,MAAM,SAAU,MAAM,OAAO;AAC/C,YAAI,KAAK,KAAK,IAAI,GAAG;AAEnB,eAAK,MAAM,OAAO,KAAK,MAAM,QAAQ,IAAI,GAAG,CAAC;AAAA,QAC/C,OAAO;AACL,eAAK,KAAK,IAAI,IAAI,KAAK;AAAA,QACzB;AACA,aAAK,OAAO,IAAI,IAAI;AACpB,YAAIuF,WAAU,YAAY,KAAK,OAAO,MAAM,SAAU,GAAG;AACvD,iBAAO,KAAK,OAAO,CAAC;AAAA,QACtB,EAAE,KAAK,IAAI,CAAC;AACZ,aAAK,MAAM,OAAOA,UAAS,GAAG,IAAI;AAAA,MACpC;AACA,gBAAU,UAAU,SAAS,SAAU,MAAM;AAC3C,aAAK,KAAK,IAAI,IAAI,KAAK;AAAA,MACzB;AACA,gBAAU,UAAU,SAAS,SAAU,MAAM;AAC3C,eAAO,KAAK,KAAK,IAAI,MAAM,KAAK;AAAA,MAClC;AACA,gBAAU,UAAU,UAAU,SAAU,MAAM;AAC5C,eAAO,KAAK,KAAK,IAAI,MAAM,KAAK;AAAA,MAClC;AACA,gBAAU,UAAU,UAAU,WAAY;AACxC,eAAO,KAAK,MAAM,WAAW;AAAA,MAC/B;AACA,gBAAU,UAAU,MAAM,WAAY;AACpC,YAAI,OAAO,KAAK,MAAM,MAAM;AAC5B,aAAK,OAAO,IAAI;AAChB,eAAO;AAAA,MACT;AAKA,eAAS,gBAAgB,UAAU,KAAK;AAEtC,YAAI,OAAO,IAAI,YAAY;AACzB,iBAAO,SAAS,WAAW,MAAM,EAAE,cAAc,IAAI,UAAU;AAAA,QACjE;AACA,eAAO,SAAS,WAAW,MAAM;AAAA,MACnC;AAGA,eAAS,gBAAgB,UAAU,KAAK;AAEtC,YAAI,OAAO,IAAI,YAAY;AACzB,iBAAO,SAAS,WAAW,MAAM,EAAE,cAAc,IAAI,UAAU;AAAA,QACjE;AACA,eAAO,SAAS,WAAW,MAAM;AAAA,MACnC;AAGA,eAAS,kBAAkB,UAAU,KAAK;AACxC,YAAI,SAAS,cAAc;AACzB,iBAAO,SAAS;AAAA,QAClB;AAGA,YAAI,aAAa,gBAAgB,UAAU,GAAG;AAC9C,eAAO,WAAW,OAAO;AAAA,MAC3B;AAGA,eAAS,kBAAkB,UAAU,KAAK;AACxC,YAAI,SAAS,cAAc;AACzB,iBAAO,SAAS;AAAA,QAClB;AAGA,YAAI,aAAa,gBAAgB,UAAU,GAAG;AAC9C,eAAO,WAAW,OAAO;AAAA,MAC3B;AAIA,eAAS,kBAAkB,OAAO,KAAK,eAAe,MAAM,KAAK;AAC/D,YAAI,WAAW,MAAM;AACrB,YAAI,aAAa,MAAM,MAAM,YAAY,OAAO,KAAK,MAAM,GAAG,CAAC;AAC/D,YAAI,kBAAkB,eAAe,aAAa,WAAW,CAAC;AAC9D,eAAO,WAAW,KAAK,MAAM,kBAAkB,QAAQ;AAAA,MACzD;AAOA,eAAS,YAAY,OAAO,KAAK,MAAM,KAAK;AAC1C,YAAI,OAAO,IAAI;AACf,YAAI,QAAQ,IAAI,IAAI,MAAM;AAC1B,YAAI,QAAQ,IAAI,IAAI,MAAM;AAC1B,YAAI,aAAa,QAAQ,KAAK;AAC9B,YAAI,aAAa,QAAQ,KAAK;AAC9B,YAAI,YAAY,aAAa;AAC7B,YAAI,YAAY,aAAa;AAC7B,eAAO,IAAI,MAAM,MAAM,IAAI,WAAW,MAAM,IAAI,SAAS;AAAA,MAC3D;AAGA,eAAS,mBAAmB,QAAQ,QAAQ;AAC1C,YAAI,kBAAkB,KAAK,IAAI,SAAS,MAAM;AAC9C,eAAO,kBAAkB,MAAM,MAAM,kBAAkB;AAAA,MACzD;AAGA,eAAS,eAAe,YAAY,MAAM,KAAK;AAC7C,YAAI,OAAO,IAAI;AACf,gBAAQ,IAAI,UAAU,EAAE,QAAQ,SAAU,WAAW;AACnD,oBAAU,cAAc,UAAU,UAAU,OAAO,KAAK;AACxD,oBAAU,cAAc,UAAU,UAAU,OAAO,KAAK;AAAA,QAC1D,CAAC;AAAA,MACH;AAGA,eAAS,QAAQ,MAAM,QAAQ,QAAQ;AACrC,eAAO;AAAA,UACL,QAAQ,OAAO,MAAM;AAAA,UACrB,GAAG,iBAAiB,OAAO,IAAI,OAAO,GAAG,IAAI;AAAA,UAC7C,GAAG,iBAAiB,OAAO,IAAI,OAAO,GAAG,IAAI;AAAA,QAC/C;AAAA,MACF;AAGA,eAAS,iBAAiBlE,OAAM,MAAM;AAEpC,YAAI,CAACA,OAAM;AACT,iBAAO;AAAA,QACT;AACA,YAAI,UAAU,KAAK,IAAIA,KAAI;AAC3B,YAAI,WAAW,KAAK,MAAM,UAAU,IAAI;AAGxC,YAAI,CAAC,UAAU;AACb,iBAAO;AAAA,QACT;AAGA,YAAI,cAAc,WAAW;AAC7B,YAAI,YAAY,UAAU;AAC1B,YAAI,iBAAiB,YAAY;AACjC,eAAO,OAAO;AAAA,MAChB;AAGA,eAAS,aAAarB,QAAO,MAAM;AACjC,YAAI,SAAS,KAAK;AAClB,YAAI,WAAW,WAAWA,OAAM,IAAI,OAAO,GAAG,KAAK,CAAC,IAAI,OAAO;AAC/D,YAAI,WAAW,WAAWA,OAAM,IAAI,OAAO,GAAG,KAAK,CAAC,IAAI,OAAO;AAC/D,eAAO,IAAI,MAAM,UAAU,QAAQ;AAAA,MACrC;AAGA,eAAS,QAAQA,QAAO,WAAW;AACjC,eAAOA,OAAM,MAAM,SAAS;AAAA,MAC9B;AAGA,eAAS,MAAMA,QAAO,MAAM,WAAW;AACrC,eAAO,QAAQ,aAAaA,OAAM,MAAM,GAAG,IAAI,GAAG,SAAS;AAAA,MAC7D;AAIA,eAAS,OAAOA,QAAO;AACrB,eAAOA,OAAM,MAAM,EAAE,SAAS;AAAA,MAChC;AAIA,eAAS,eAAeA,QAAO;AAC7B,eAAO,IAAI,MAAMA,OAAM,MAAM,IAAI,IAAI,KAAK,IAAIA,OAAM,CAAC,IAAIA,OAAM,GAAGA,OAAM,MAAM,IAAI,IAAI,KAAK,IAAIA,OAAM,CAAC,IAAIA,OAAM,CAAC;AAAA,MACnH;AAKA,eAAS,iBAAiB,SAAS,QAAQ,WAAW,MAAM,IAAI,MAAM,KAAK;AACzE,YAAI,QAAQ,CAAC;AACb,YAAI,WAAW,eAAe,GAAG,WAAW,SAAS,CAAC;AAGtD,YAAI,aAAa,OAAO,SAAS;AACjC,YAAIoC,UAAS,QAAQ,UAAU;AAC/B,YAAIpC;AACJ,eAAOoC,SAAQ;AAEb,UAAApC,SAAQ,OAAO,UAAU;AACzB,cAAIqB,QAAO,eAAerB,OAAM,WAAWoC,OAAM,CAAC;AAClD,cAAI,CAACf,MAAK,OAAO,QAAQ,GAAG;AAC1B,kBAAM,QAAQrB,MAAK;AACnB,uBAAWqB;AAAA,UACb;AAGA,uBAAa,OAAOe,OAAM;AAC1B,UAAAA,UAAS,QAAQ,UAAU;AAAA,QAC7B;AAGA,YAAI,YAAY,OAAO,UAAU;AACjC,YAAI,WAAW,eAAe,UAAU,WAAW,IAAI,CAAC;AACxD,YAAI,CAAC,SAAS,OAAO,QAAQ,GAAG;AAC9B,gBAAM,QAAQ,SAAS;AAAA,QACzB;AACA,eAAO;AAAA,MACT;AAGA,eAAS,aAAa,MAAM,WAAW;AACrC,YAAI5B,OAAM;AACV,iBAAS,IAAI,GAAG,MAAM,UAAU,QAAQ,IAAI,KAAK,KAAK;AACpD,cAAI,OAAO,KAAK,kBAAkB,UAAU,CAAC,CAAC;AAC9C,cAAI,OAAOA,MAAK;AACd,YAAAA,OAAM;AAAA,UACR;AAAA,QACF;AACA,eAAOA;AAAA,MACT;AAOA,eAAS,cAAc8F,SAAQhG,OAAM,eAAe,MAAM,KAAK;AAC7D,YAAI,YAAY,IAAI;AACpB,YAAI,eAAe,IAAI;AACvB,YAAI,qBAAqBgG,QAAO,WAAWhG,MAAK,OAAO,CAAC;AACxD,YAAIf,QAAO,WAAW,YAAY,IAAI,OAAO,KAAK,YAAY,IAAI,CAAC;AACnE,YAAI,UAAU,QAAQ,aAAa;AACnC,YAAI,aAAaA,MAAK,OAAO,SAAU,KAAK,KAAK;AAC/C,cAAI,QAAQ,SAAS,GAAG,GAAG;AACzB,gBAAI,YAAY,aAAa,GAAG;AAIhC,gBAAI,WAAW,IAAI,MAAM+G,QAAO,IAAI,UAAU,KAAK,KAAK,IAAI,mBAAmB,CAAC,IAAIhG,MAAK,QAAQgG,QAAO,IAAI,UAAU,KAAK,KAAK,IAAI,mBAAmB,CAAC,IAAIhG,MAAK,OAAO;AACxK,gBAAI,mBAAmB,IAAI,KAAKgG,SAAQ,QAAQ;AAIhD,gBAAI,gBAAgB,iBAAiB,UAAUhG,KAAI,KAAK,CAAC;AACzD,gBAAI,mBAAmB,cAAc;AACrC,gBAAI;AACJ,gBAAI,uBAAuB;AAC3B,qBAAS,IAAI,GAAG,IAAI,kBAAkB,KAAK;AACzC,kBAAI,sBAAsB,cAAc,CAAC;AACzC,kBAAI,WAAWgG,QAAO,gBAAgB,mBAAmB;AACzD,kBAAI,iCAAiC,UAAa,WAAW,8BAA8B;AACzF,+CAA+B;AAC/B,uCAAuB;AAAA,cACzB;AAAA,YACF;AAGA,gBAAI,sBAAsB;AACxB,kBAAItG,SAAQ,MAAM,sBAAsB,MAAM,SAAS;AAGvD,kBAAIM,MAAK,cAAcN,MAAK,GAAG;AAC7B,gBAAAA,SAAQ,MAAMA,OAAM,OAAO,UAAU,IAAI,KAAK,GAAG,UAAU,IAAI,KAAK,CAAC,GAAG,MAAM,SAAS;AAAA,cACzF;AAIA,kBAAI,KAAKA,MAAK;AAAA,YAChB;AAAA,UACF;AACA,iBAAO;AAAA,QACT,GAAG,CAAC,CAAC;AAGL,YAAI,CAACM,MAAK,cAAcgG,OAAM,GAAG;AAE/B,qBAAW,KAAK,MAAMA,SAAQ,MAAM,SAAS,CAAC;AAAA,QAChD;AACA,eAAO;AAAA,MACT;AAIA,eAAS,UAAU,MAAM,IAAI,iBAAiB,KAAK;AACjD,YAAI,YAAY,IAAI;AAIpB,YAAI,cAAc;AAClB,YAAI,gBAAgB,MAAM;AAExB,yBAAe,QAAQ,kBAAkB,MAAM,GAAG,EAAE,MAAM,GAAG,SAAS;AAAA,QACxE,OAAO;AACL,yBAAe,QAAQ,KAAK,MAAM,GAAG,SAAS;AAAA,QAChD;AACA,YAAI,cAAc,MAAM;AAEtB,yBAAe,QAAQ,kBAAkB,MAAM,GAAG,EAAE,MAAM,GAAG,SAAS;AAAA,QACxE,OAAO;AACL,yBAAe,QAAQ,GAAG,MAAM,GAAG,SAAS;AAAA,QAC9C;AACA,YAAI,OAAO,QAAQ,IAAI,MAAM,cAAc,YAAY;AAIvD,YAAI,OAAO;AACX,YAAI,aAAa;AAGjB,YAAI,gBAAgB,MAAM;AAExB,kBAAQ;AACR,wBAAc,cAAc,OAAO,MAAM,IAAI,iBAAiB,MAAM,GAAG;AAAA,QACzE,OAAO;AACL,kBAAQ;AACR,wBAAc,CAAC,KAAK;AAAA,QACtB;AAGA,YAAI,cAAc,MAAM;AAEtB,gBAAM;AACN,sBAAY,cAAc,cAAc,IAAI,IAAI,eAAe,MAAM,GAAG;AAAA,QAC1E,OAAO;AACL,gBAAM;AACN,sBAAY,CAAC,GAAG;AAAA,QAClB;AAGA,sBAAc,YAAY,OAAO,SAAU,GAAG;AAC5C,iBAAO,CAAC,gBAAgB,CAAC;AAAA,QAC3B,CAAC;AACD,oBAAY,UAAU,OAAO,SAAU,GAAG;AACxC,iBAAO,CAAC,gBAAgB,CAAC;AAAA,QAC3B,CAAC;AAID,YAAI,YAAY,SAAS,KAAK,UAAU,SAAS,GAAG;AAGlD,cAAI,UAAU,IAAI,UAAU;AAE5B,cAAI,SAAS,CAAC;AAEd,cAAI,UAAU,CAAC;AAEf,cAAI,QAAQ,CAAC;AACb,mBAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,IAAI,GAAG,KAAK;AAElD,gBAAI,aAAa,YAAY,CAAC;AAC9B,gBAAI,MAAM,OAAO,UAAU;AAC3B,oBAAQ,IAAI,KAAK,aAAa,YAAY,SAAS,CAAC;AACpD,mBAAO,GAAG,IAAI;AACd,kBAAM,GAAG,IAAI;AAAA,UACf;AACA,cAAI,8BAA8B,IAAI;AACtC,cAAI,kBAAkB,gCAAgC;AAGtD,cAAI,WAAW;AACf,cAAI,aAAa,IAAI;AACrB,yBAAe,YAAY,MAAM,GAAG;AACpC,cAAI,gBAAgB,WAAW;AAC/B,cAAI,gBAAgB,QAAQ,SAAS,EAAE,OAAO,SAAU,KAAK,UAAU;AAGrE,gBAAI/C,OAAM,OAAO,QAAQ;AACzB,gBAAI,KAAKA,IAAG;AACZ,mBAAO;AAAA,UACT,GAAG,CAAC,CAAC;AAGL,cAAI,iBAAiB,IAAI;AACzB,iBAAO,CAAC,QAAQ,QAAQ,KAAK,iBAAiB,GAAG;AAE/C,gBAAI,aAAa,QAAQ,IAAI;AAC7B,gBAAI,eAAe,OAAO,UAAU;AACpC,gBAAI,gBAAgB,QAAQ,UAAU;AACtC,gBAAI,cAAc,MAAM,UAAU;AAClC,gBAAI,mBAAmB,kBAAkB;AACzC,gBAAI,UAAU,aAAa,OAAO,KAAK;AAEvC,gBAAI;AACJ,gBAAI,CAAC,kBAAkB;AACrB,uCAAyB,kBAAkB,eAAe,cAAc,eAAe,MAAM,GAAG;AAAA,YAClG,WACS,CAAC,iBAAiB;AACzB,uCAAyB;AAAA,YAC3B,WACS,CAAC,SAAS;AACjB,uCAAyB,kBAAkB,OAAO,cAAc,eAAe,MAAM,GAAG;AAAA,YAC1F,OACK;AACH,uCAAyB;AAAA,YAC3B;AAGA,gBAAI,aAAa,YAAY,WAAW,UAAU;AAClD,gBAAI,YAAY;AACd,uBAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,KAAK;AAC3C,oBAAI,CAAC,YAAY,CAAC,EAAE,OAAO,UAAU,CAAC,CAAC,GAAG;AACxC,+BAAa;AACb;AAAA,gBACF;AAAA,cACF;AAAA,YACF;AACA,gBAAI,eAAe,oBAAoB;AACvC,gBAAI,CAAC,gBAAgB,cAAc,QAAQ,UAAU,KAAK,GAAG;AAC3D,kBAAI,yBAAyB;AAC7B,qBAAO,iBAAiB,SAAS,QAAQ,cAAc,OAAO,KAAK,MAAM,GAAG;AAAA,YAC9E;AAGA,iBAAK,IAAI,GAAG,IAAI,eAAe,KAAK;AAClC,0BAAY,WAAW,CAAC;AACxB,kBAAI,iBAAiB,UAAU;AAC/B,gCAAkB,mBAAmB,wBAAwB,cAAc;AAI3E,kBAAI,EAAE,mBAAmB,YAAY,kBAAkB,IAAI,2BAA2B;AACpF;AAAA,cACF;AACA,kBAAI,gBAAgB,MAAM,aAAa,MAAM,EAAE,OAAO,UAAU,aAAa,UAAU,WAAW,GAAG,MAAM,SAAS;AACpH,kBAAI,cAAc,OAAO,aAAa;AAGtC,kBAAI,QAAQ,QAAQ,WAAW,KAAK,gBAAgB,aAAa,GAAG;AAClE;AAAA,cACF;AAGA,kBAAI,cAAc,QAAQ,WAAW,KAAK,GAAG;AAG3C,oBAAI,gBAAgB,cAAc,OAAO,GAAG;AAE5C,oBAAI,CAAC,eAAe;AAClB,sBAAI,oBAAoB,kBAAkB,eAAe,KAAK,eAAe,MAAM,GAAG;AACtF,sBAAI,qBAAqB,mBAAmB,gBAAgB,iBAAiB;AAC7E,sBAAI,qBAAqB,IAAI,2BAA2B;AACtD;AAAA,kBACF;AAAA,gBACF;AAAA,cACF;AAIA,kBAAI,eAAe,UAAU;AAC7B,kBAAI,kBAAkB,UAAU,IAAI,IAAI,UAAU,eAAe;AACjE,kBAAI,gBAAgB,cAAc,eAAe;AACjD,kBAAI,CAAC,QAAQ,OAAO,WAAW,KAAK,gBAAgB,MAAM,WAAW,GAAG;AAItE,uBAAO,WAAW,IAAI;AACtB,wBAAQ,WAAW,IAAI;AACvB,sBAAM,WAAW,IAAI;AACrB,wBAAQ,IAAI,aAAa,gBAAgB,aAAa,eAAe,SAAS,CAAC;AAAA,cACjF;AAAA,YACF;AACA;AAAA,UACF;AAAA,QACF;AAIA,eAAO,IAAI,cAAc,KAAK,MAAM,OAAO,KAAK,GAAG;AAAA,MACrD;AAGA,eAAS,eAAe,KAAK;AAC3B,YAAI,aAAa,OAAO,KAAK,YAAY;AACzC,YAAI,YAAY,OAAO,KAAK,WAAW;AACvC,YAAI,aAAa,OAAO,KAAK,YAAY;AACzC,YAAI,UAAU,OAAO,KAAK,SAAS;AACnC,YAAI,IAAI,SAAS;AAEf,cAAI,QAAQ,eAAe,IAAI,OAAO;AACtC,cAAI,aAAa;AAAA,YACf,GAAG,CAAC,MAAM;AAAA,YACV,GAAG,CAAC,MAAM;AAAA,YACV,OAAO,MAAM,OAAO,MAAM;AAAA,YAC1B,QAAQ,MAAM,MAAM,MAAM;AAAA,UAC5B;AAAA,QACF;AACA,gBAAQ,IAAI,UAAU,EAAE,QAAQ,SAAU,WAAW;AACnD,cAAI,SAAS,IAAI,MAAM,GAAG,CAAC;AAC3B,cAAI,SAAS,IAAI,MAAM,UAAU,SAAS,UAAU,OAAO;AAC3D,oBAAU,QAAQ,eAAe,OAAO,MAAM,MAAM,CAAC;AAAA,QACvD,CAAC;AAAA,MACH;AAGA,eAAS,OAAO,UAAU,KAAK,UAAU;AACvC,uBAAe,GAAG;AAGlB,iBAAS,QAAQ,gBAAgB,CAAC,CAAC,IAAI;AACvC,YAAI,aAAa,gBAAgB,UAAU,GAAG;AAC9C,YAAI,aAAa,gBAAgB,UAAU,GAAG;AAC9C,YAAI,eAAe,kBAAkB,UAAU,GAAG;AAIlD,YAAI;AACJ,YAAI,OAAO,IAAI,oBAAoB,YAAY;AAC7C,4BAAkB,IAAI;AAAA,QACxB,OAAO;AACL,cAAI,MAAM,IAAI,YAAY,GAAG;AAC7B,cAAI,MAAM,SAAS,MAAM,OAAO,SAAS,KAAK;AAC9C,4BAAkB,SAAUvD,QAAO;AACjC,mBAAO,CAAC,IAAI,kBAAkBA,MAAK;AAAA,UACrC;AAAA,QACF;AACA,YAAI,cAAc,QAAQ,QAAQ,EAAE,IAAI,KAAK;AAC7C,YAAI,cAAc,CAAC;AACnB,YAAI,YAAY;AAIhB,YAAI,IAAI;AACR,iBAAS,IAAI,GAAG,MAAM,YAAY,QAAQ,KAAK,KAAK,KAAK;AACvD,cAAI,eAAe;AACnB,iBAAO,MAAM;AACb,eAAK,YAAY,CAAC;AAClB,cAAI,CAAC,IAAI;AAKP,iBAAK;AAIL,gBAAI,kBAAkB,CAAC,SAAS,MAAM,IAAI,QAAQ,EAAE,MAAM,CAAC,SAAS,MAAM,IAAI,QAAQ,EAAE;AACxF,gBAAI,mBAAmB,WAAW,IAAI,aAAa,GAAG;AAEpD,kBAAI,WAAW,SAAS,aAAa,eAAe;AACpD,kBAAI,SAAS,GAAG,OAAO;AACvB,6BAAe,IAAI,cAAc,KAAK,UAAU,UAAU,QAAQ,GAAG;AAAA,YACvE;AAAA,UACF;AAGA,yBAAe,gBAAgB,UAAU,KAAK,UAAU,MAAM,IAAI,iBAAiB,GAAG;AACtF,cAAI,iBAAiB,MAAM;AAEzB,mBAAO,IAAI,eAAe,UAAU,KAAK,QAAQ;AAAA,UACnD;AACA,cAAI,YAAY,aAAa,CAAC;AAG9B,cAAI,aAAa,UAAU,OAAO,SAAS,GAAG;AAC5C,yBAAa,MAAM;AAAA,UACrB;AAGA,sBAAY,aAAa,aAAa,SAAS,CAAC,KAAK;AACrD,gBAAM,UAAU,KAAK,MAAM,aAAa,YAAY;AAAA,QACtD;AACA,eAAO;AAAA,MACT;AAGA,UAAI,YAAY,SAAU,UAAU,KAAK,UAAU;AACjD,eAAO,OAAO,UAAU,OAAO,CAAC,GAAG,UAAU,GAAG,GAAG,QAAQ;AAAA,MAC7D;AACA,UAAI,WAAW;AAAA,QACb,2BAA2B;AAAA;AAAA,QAE3B,cAAc,WAAY;AACxB,cAAI,OAAO,KAAK;AAChB,iBAAO,KAAK,KAAK,KAAK,KAAK,OAAO,QAAQ,CAAC,CAAC;AAAA,QAC9C;AAAA;AAAA;AAAA,QAGA,YAAY,WAAY;AACtB,cAAI,OAAO,KAAK;AAChB,cAAI,OAAO,KAAK,KAAK;AACrB,cAAI,eAAe,KAAK,aAAa;AACrC,iBAAO,CAAC;AAAA,YACN,SAAS;AAAA,YACT,SAAS;AAAA,YACT;AAAA,UACF,GAAG;AAAA,YACD,SAAS;AAAA,YACT,SAAS;AAAA,YACT,MAAM;AAAA,UACR,GAAG;AAAA,YACD,SAAS;AAAA,YACT,SAAS;AAAA,YACT;AAAA,UACF,GAAG;AAAA,YACD,SAAS,CAAC;AAAA,YACV,SAAS;AAAA,YACT,MAAM;AAAA,UACR,GAAG;AAAA,YACD,SAAS,CAAC;AAAA,YACV,SAAS;AAAA,YACT;AAAA,UACF,GAAG;AAAA,YACD,SAAS,CAAC;AAAA,YACV,SAAS,CAAC;AAAA,YACV,MAAM;AAAA,UACR,GAAG;AAAA,YACD,SAAS;AAAA,YACT,SAAS,CAAC;AAAA,YACV;AAAA,UACF,GAAG;AAAA,YACD,SAAS;AAAA,YACT,SAAS,CAAC;AAAA,YACV,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA;AAAA;AAAA,QAGA,eAAe,SAAU,MAAM,IAAI,KAAK;AAGtC,cAAI,QAAQ,KAAK,MAAM,EAAE;AACzB,cAAI,QAAQ,CAAC;AACb,cAAI,IAAI;AAAA,YACN,GAAG,GAAG;AAAA,YACN,GAAG,KAAK;AAAA,UACV;AACA,cAAI,IAAI;AAAA,YACN,GAAG,KAAK;AAAA,YACR,GAAG,GAAG;AAAA,UACR;AACA,cAAI,QAAQ,MAAM,IAAI;AACpB,gBAAI,IAAI;AACR,gBAAI;AACJ,gBAAI;AAAA,UACN;AACA,cAAI,KAAK,QAAQ,KAAK,KAAK,IAAI;AAC/B,cAAI,KAAK,IAAI,KAAK,MAAM,EAAE;AAC1B,cAAI,QAAQ,KAAK,KAAK,KAAK,QAAQ,EAAE;AACrC,cAAI,KAAK,MAAM,UAAU,GAAG,cAAc,GAAG,MAAM,QAAQ,GAAG,GAAG,EAAE;AACnE,cAAI,KAAK,IAAI,KAAK,IAAI,EAAE;AACxB,cAAI,oBAAoB,GAAG,aAAa,EAAE;AAC1C,cAAIA,SAAQ,oBAAoB,oBAAoB;AACpD,cAAI,gBAAgB,oBAAoBA,SAAQ;AAChD,cAAI,WAAW,MAAM,IAAI,WAAW;AACpC,cAAI,aAAa,cAAc,MAAM,EAAE;AACvC,cAAI,kBAAkB,eAAe,aAAa,WAAW,CAAC;AAC9D,cAAI,iBAAiB,WAAW,KAAK,MAAM,kBAAkB,QAAQ;AACrE,cAAI,yBAAyB;AAC7B,cAAIA,QAAO;AACT,kBAAM,KAAKA,OAAM,MAAM,CAAC;AAAA,UAC1B;AACA,gBAAM,KAAK,EAAE;AACb,iBAAO;AAAA,QACT;AAAA,MACF;AAGA,UAAI,QAAQ,SAAU,UAAU,KAAK,UAAU;AAC7C,YAAI,CAAC,WAAW,SAAS,GAAG;AAC1B,gBAAM,IAAI,MAAM,sCAAsC;AAAA,QACxD;AACA,eAAO,UAAU,UAAU,OAAO,CAAC,GAAG,UAAU,GAAG,GAAG,QAAQ;AAAA,MAChE;AACA,UAAI,aAAa;AAAA,QACf,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,QACP,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,aAAa;AAAA,QACb,aAAa;AAAA,MACf;AACA,UAAI,qBAAqB,CAAC,WAAW,MAAM,WAAW,OAAO,WAAW,KAAK,WAAW,MAAM;AAC9F,UAAI,sBAAsB,CAAC;AAC3B,0BAAoB,WAAW,IAAI,IAAI,WAAW;AAClD,0BAAoB,WAAW,KAAK,IAAI,WAAW;AACnD,0BAAoB,WAAW,GAAG,IAAI,WAAW;AACjD,0BAAoB,WAAW,MAAM,IAAI,WAAW;AACpD,UAAI,sBAAsB,CAAC,WAAW,KAAK,WAAW,MAAM;AAC5D,UAAI,sBAAsB;AAAA,QACxB,GAAG,WAAW;AAAA,QACd,KAAK,WAAW;AAAA,QAChB,KAAK,WAAW;AAAA,QAChB,IAAI,WAAW;AAAA,MACjB;AACA,eAAS,gBAAgBiB,OAAM;AAE7B,eAAOA,MAAK,MAAM;AAAA,MACpB;AACA,eAAS,eAAe,QAAQ;AAG9B,eAAO,IAAI,SAAS,MAAM,EAAE,SAAS;AAAA,UACnC,WAAW;AAAA,QACb,CAAC,EAAE;AAAA,MACL;AACA,eAAS,aAAa,QAAQ,QAAQ;AACpC,YAAI,cAAc,OAAO;AACzB,YAAI,MAAM,OAAO;AACjB,YAAI,MAAM,OAAO;AACjB,YAAI,aAAa,OAAO;AACxB,YAAI,aAAa,OAAO;AACxB,YAAI,kBAAkB,OAAO;AAC7B,YAAI,cAAc,OAAO;AACzB,YAAI,MAAM,OAAO;AACjB,YAAI,MAAM,OAAO;AACjB,YAAI,aAAa,OAAO;AACxB,YAAI,aAAa,OAAO;AACxB,YAAI,kBAAkB,OAAO;AAC7B,YAAI;AACJ,YAAI,CAAC,YAAY;AACf,cAAI,uBAAuB,IAAI,KAAK,KAAK,KAAK,GAAG,CAAC;AAClD,uBAAa,mBAAmB,SAAS,eAAe,IAAI,kBAAkB,qBAAqB,mBAAmB,WAAW;AAAA,QACnI,WAAW,WAAW,MAAM,OAAO,GAAG;AACpC,uBAAa,8BAA8B,aAAa,aAAa,UAAU;AAAA,QACjF,WAAW,oBAAoB,WAAW,aAAa;AACrD,uBAAa,WAAW,mBAAmB,WAAW;AAAA,QACxD,WAAW,oBAAoB,WAAW,aAAa;AACrD,uBAAa,WAAW,MAAM,QAAQ,EAAE,mBAAmB,WAAW;AAAA,QACxE,OAAO;AACL,uBAAa;AAAA,QACf;AACA,YAAI;AACJ,YAAI,CAAC,YAAY;AACf,cAAI,uBAAuB,IAAI,KAAK,KAAK,KAAK,GAAG,CAAC;AAClD,uBAAa,mBAAmB,SAAS,eAAe,IAAI,kBAAkB,qBAAqB,mBAAmB,WAAW;AAAA,QACnI,WAAW,WAAW,MAAM,OAAO,GAAG;AACpC,uBAAa,8BAA8B,aAAa,aAAa,UAAU;AAAA,QACjF,WAAW,oBAAoB,WAAW,aAAa;AACrD,uBAAa,WAAW,mBAAmB,WAAW;AAAA,QACxD,WAAW,oBAAoB,WAAW,aAAa;AACrD,uBAAa,WAAW,MAAM,QAAQ,EAAE,mBAAmB,WAAW;AAAA,QACxE,OAAO;AACL,uBAAa;AAAA,QACf;AACA,eAAO,CAAC,YAAY,UAAU;AAAA,MAChC;AACA,eAAS,wBAAwB,QAAQ,QAAQ,YAAY;AAC3D,YAAI,MAAM,OAAO;AACjB,YAAI,MAAM,OAAO;AACjB,YAAI,QAAQ,OAAO;AACnB,YAAI,SAAS,OAAO;AACpB,YAAIqF,UAAS,OAAO;AACpB,YAAI,SAAS,OAAO;AACpB,YAAI,MAAM,MAAM;AAChB,YAAI,MAAM,MAAM;AAChB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,KAAKA,QAAO;AAChB,YAAI,KAAK,OAAO;AAChB,YAAI,KAAK,OAAO;AAChB,YAAI,OAAO,MAAM,KAAK,KAAK;AACzB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,MAAM,KAAK,MAAM;AACxB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,MAAM,KAAK,MAAM;AACxB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,QAAQ,MAAM,KAAK;AAC1B,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,QAAQ,MAAM,KAAK;AAC1B,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,QAAQ,MAAM,MAAM,KAAK,KAAK;AACtC,cAAI,WAAW,MAAM,IAAI,IAAI;AAC3B,mBAAO,WAAW;AAAA,UACpB;AACA,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,QAAQ,MAAM,MAAM,KAAK,KAAK;AACtC,cAAI,WAAW,MAAM,IAAI,IAAI;AAC3B,mBAAO,WAAW;AAAA,UACpB;AACA,iBAAO,WAAW;AAAA,QACpB;AACA,eAAO,WAAW;AAAA,MACpB;AACA,eAAS,2BAA2B,QAAQ,QAAQ,YAAY;AAC9D,YAAI,MAAM,OAAO;AACjB,YAAI,MAAM,OAAO;AACjB,YAAI,QAAQ,OAAO;AACnB,YAAI,SAAS,OAAO;AACpB,YAAIA,UAAS,OAAO;AACpB,YAAI,SAAS,OAAO;AACpB,YAAI,MAAM,MAAM;AAChB,YAAI,MAAM,MAAM;AAChB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,KAAKA,QAAO;AAChB,YAAI,KAAK,OAAO;AAChB,YAAI,KAAK,OAAO;AAChB,YAAI,OAAO,MAAM,KAAK,KAAK;AACzB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,MAAM,KAAK,MAAM;AACxB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,MAAM,KAAK,MAAM;AACxB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,QAAQ,MAAM,KAAK;AAC1B,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,QAAQ,MAAM,KAAK;AAC1B,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,QAAQ,MAAM,MAAM,KAAK,KAAK;AACtC,cAAI,WAAW,MAAM,IAAI,IAAI;AAC3B,mBAAO,WAAW;AAAA,UACpB;AACA,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,QAAQ,MAAM,MAAM,KAAK,KAAK;AACtC,cAAI,WAAW,MAAM,IAAI,IAAI;AAC3B,mBAAO,WAAW;AAAA,UACpB;AACA,iBAAO,WAAW;AAAA,QACpB;AACA,eAAO,WAAW;AAAA,MACpB;AACA,eAAS,yBAAyB,QAAQ,QAAQ,YAAY;AAC5D,YAAI,MAAM,OAAO;AACjB,YAAI,MAAM,OAAO;AACjB,YAAI,QAAQ,OAAO;AACnB,YAAI,SAAS,OAAO;AACpB,YAAIA,UAAS,OAAO;AACpB,YAAI,SAAS,OAAO;AACpB,YAAI,MAAM,MAAM;AAChB,YAAI,MAAM,MAAM;AAChB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,KAAKA,QAAO;AAChB,YAAI,KAAKA,QAAO;AAChB,YAAI,KAAK,OAAO;AAChB,YAAI,KAAK,OAAO;AAChB,YAAI,KAAK,MAAM,OAAO,IAAI;AACxB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,QAAQ,KAAK,IAAI;AACzB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,QAAQ,KAAK,IAAI;AACzB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,OAAO,MAAM,MAAM;AAC3B,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,OAAO,MAAM,MAAM;AAC3B,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,OAAO,MAAM,QAAQ,MAAM,IAAI;AACtC,cAAI,WAAW,MAAM,IAAI,IAAI;AAC3B,mBAAO,WAAW;AAAA,UACpB;AACA,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,OAAO,MAAM,QAAQ,MAAM,IAAI;AACtC,cAAI,WAAW,MAAM,IAAI,IAAI;AAC3B,mBAAO,WAAW;AAAA,UACpB;AACA,iBAAO,WAAW;AAAA,QACpB;AACA,eAAO,WAAW;AAAA,MACpB;AACA,eAAS,0BAA0B,QAAQ,QAAQ,YAAY;AAC7D,YAAI,MAAM,OAAO;AACjB,YAAI,MAAM,OAAO;AACjB,YAAI,QAAQ,OAAO;AACnB,YAAI,SAAS,OAAO;AACpB,YAAIA,UAAS,OAAO;AACpB,YAAI,SAAS,OAAO;AACpB,YAAI,MAAM,MAAM;AAChB,YAAI,MAAM,MAAM;AAChB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,KAAKA,QAAO;AAChB,YAAI,KAAKA,QAAO;AAChB,YAAI,KAAK,OAAO;AAChB,YAAI,KAAK,OAAO;AAChB,YAAI,KAAK,MAAM,OAAO,IAAI;AACxB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,QAAQ,KAAK,IAAI;AACzB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,QAAQ,KAAK,IAAI;AACzB,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,OAAO,MAAM,MAAM;AAC3B,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,MAAM,OAAO,MAAM,MAAM;AAC3B,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,OAAO,MAAM,QAAQ,MAAM,IAAI;AACtC,cAAI,WAAW,MAAM,IAAI,IAAI;AAC3B,mBAAO,WAAW;AAAA,UACpB;AACA,iBAAO,WAAW;AAAA,QACpB;AACA,YAAI,KAAK,OAAO,MAAM,QAAQ,MAAM,IAAI;AACtC,cAAI,WAAW,MAAM,IAAI,IAAI;AAC3B,mBAAO,WAAW;AAAA,UACpB;AACA,iBAAO,WAAW;AAAA,QACpB;AACA,eAAO,WAAW;AAAA,MACpB;AACA,eAAS,wBAAwB,QAAQ,QAAQ,YAAY;AAC3D,YAAI,MAAM,aAAa,QAAQ,MAAM;AACrC,YAAI,aAAa,IAAI,CAAC;AACtB,gBAAQ,YAAY;AAAA,UAClB,KAAK,WAAW;AACd,mBAAO,wBAAwB,QAAQ,QAAQ,UAAU;AAAA,UAC3D,KAAK,WAAW;AACd,mBAAO,0BAA0B,QAAQ,QAAQ,UAAU;AAAA,UAC7D,KAAK,WAAW;AACd,mBAAO,2BAA2B,QAAQ,QAAQ,UAAU;AAAA,UAC9D,KAAK,WAAW;AACd,mBAAO,yBAAyB,QAAQ,QAAQ,UAAU;AAAA,QAC9D;AAAA,MACF;AACA,eAAS,8BAA8B,YAAY,iBAAiB,UAAU;AAC5E,YAAI,UAAU,SAAS,mBAAmB,SAAS,sBAAsB,eAAe,CAAC;AACzF,YAAI,eAAe,KAAK,MAAM,gBAAgB,OAAO,IAAI,EAAE,IAAI;AAC/D,YAAI,eAAe,QAAQ,KAAK,WAAW,MAAM,gBAAgB,GAAG;AAClE,iBAAO,WAAW,IAAI,gBAAgB,IAAI,WAAW,OAAO,WAAW;AAAA,QACzE,WAAW,WAAW,MAAM,gBAAgB,GAAG;AAC7C,iBAAO,WAAW,IAAI,gBAAgB,IAAI,WAAW,MAAM,WAAW;AAAA,QACxE;AACA,gBAAQ,cAAc;AAAA,UACpB,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,WAAW,IAAI,gBAAgB,IAAI,WAAW,MAAM,WAAW;AAAA,UACxE,KAAK;AAAA,UACL,KAAK;AACH,mBAAO,WAAW,IAAI,gBAAgB,IAAI,WAAW,OAAO,WAAW;AAAA,QAC3E;AAAA,MACF;AACA,eAAS,oBAAoB,MAAMtG,QAAOM,OAAM,WAAW,QAAQ,gBAAgB,QAAQ;AACzF,YAAI,cAAc,WAAW,MAAM;AACjC,sBAAY,SAAS,WAAW,cAAc,WAAW;AAAA,QAC3D;AACA,YAAI,YAAY,QAAQ,KAAK,MAAM,UAAU;AAC7C,YAAI,MAAM,YAAY,KAAK,cAAcA,OAAM,KAAK,MAAM,QAAQ,CAAC,IAAI;AACvE,YAAI,KAAK,IAAI;AACb,YAAI,KAAK,IAAI;AACb,YAAI,QAAQ,IAAI;AAChB,YAAI,UAAU,OAAQ,SAAQ;AAC9B,YAAI,SAAS,IAAI;AACjB,YAAI,WAAW,OAAQ,UAAS;AAChC,eAAO;AAAA,UACL,OAAON;AAAA,UACP;AAAA,UACA;AAAA,UACA;AAAA,UACA,MAAMM;AAAA,UACN;AAAA,UACA;AAAA,UACA;AAAA,UACA,QAAQ,YAAY,SAAS;AAAA,QAC/B;AAAA,MACF;AACA,eAAS,oBAAoB,KAAK;AAChC,YAAI,IAAI,IAAI;AACZ,YAAI,IAAI,IAAI;AACZ,YAAIN,SAAQ,IAAI,MAAM,GAAG,CAAC;AAC1B,eAAO;AAAA,UACL,OAAOA;AAAA,UACP,IAAIA,OAAM;AAAA,UACV,IAAIA,OAAM;AAAA,UACV,MAAM;AAAA,UACN,MAAM,IAAI,KAAK,GAAG,GAAG,GAAG,CAAC;AAAA,UACzB,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,WAAW;AAAA,UACX,QAAQ;AAAA,QACV;AAAA,MACF;AACA,eAAS,gBAAgB,MAAM,WAAW,QAAQ;AAChD,YAAI,eAAe,UAAU,MAAM,MAAM;AACzC,YAAI,KAAK,UAAU;AACnB,YAAI,KAAK,UAAU;AACnB,YAAI,QAAQ,UAAU;AACtB,YAAI,SAAS,UAAU;AACvB,gBAAQ,MAAM;AAAA,UACZ,KAAK;AACH,yBAAa,IAAI,KAAK;AACtB;AAAA,UACF,KAAK;AACH,yBAAa,IAAI,KAAK,QAAQ;AAC9B;AAAA,UACF,KAAK;AACH,yBAAa,IAAI,KAAK;AACtB;AAAA,UACF,KAAK;AACH,yBAAa,IAAI,KAAK,SAAS;AAC/B;AAAA,QACJ;AACA,eAAO;AAAA,MACT;AACA,eAAS,mBAAmB,QAAQ,QAAQ;AAC1C,YAAI,cAAc,OAAO;AACzB,YAAI,MAAM,OAAO;AACjB,YAAI,MAAM,OAAO;AACjB,YAAI,aAAa,OAAO;AACxB,YAAI,cAAc,OAAO;AACzB,YAAI,eAAe,OAAO;AAC1B,YAAI,eAAe,OAAO;AAC1B,YAAI,cAAc,OAAO;AACzB,YAAI,MAAM,OAAO;AACjB,YAAI,MAAM,OAAO;AACjB,YAAI,cAAc,OAAO;AACzB,YAAI,eAAe,OAAO;AAC1B,YAAI,eAAe,OAAO;AAC1B,YAAI,MAAM,MAAM;AAChB,YAAI,MAAM,MAAM;AAChB,YAAI,MAAM,MAAM;AAChB,YAAI,MAAM,MAAM;AAChB,YAAI,aAAa,cAAc,WAAW,MAAM,UAAU;AAG1D,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,OAAO,MAAM;AACjB,YAAI,MAAM,aAAa,QAAQ,MAAM;AACrC,YAAI,aAAa,IAAI,CAAC;AACtB,YAAI,aAAa,IAAI,CAAC;AACtB,YAAI,qBAAqB,gBAAgB,YAAY;AAAA,UACnD,OAAO;AAAA,UACP,IAAI;AAAA,UACJ,IAAI;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV,GAAG,YAAY;AACf,YAAI,qBAAqB,gBAAgB,YAAY;AAAA,UACnD,OAAO;AAAA,UACP,IAAI;AAAA,UACJ,IAAI;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV,GAAG,YAAY;AACf,YAAI,MAAM,mBAAmB;AAC7B,YAAI,MAAM,mBAAmB;AAC7B,YAAI,MAAM,mBAAmB;AAC7B,YAAI,MAAM,mBAAmB;AAC7B,YAAI,OAAO,MAAM,OAAO;AACxB,YAAI,OAAO,MAAM,OAAO;AACxB,YAAI,OAAO,MAAM,OAAO;AACxB,YAAI,OAAO,MAAM,OAAO;AACxB,YAAI,yBAAyB,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO;AAClE,YAAI,2BAA2B,MAAM,MAAM,MAAM,MAAM,MAAM,OAAO;AACpE,YAAI,eAAe,UAAU,eAAe,SAAS;AACnD,cAAI,QAAQ,MAAM;AAChB,gBAAI,IAAI;AACR,gBAAI,OAAO,KAAK;AACd,kBAAI,OAAO,QAAQ,MAAM,KAAK;AAC5B,oBAAI,KAAK,IAAI,MAAM,IAAI;AAAA,cACzB,WAAW,OAAO,QAAQ,OAAO,KAAK;AACpC,oBAAI,KAAK,IAAI,MAAM,IAAI;AAAA,cACzB;AAAA,YACF;AACA,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH;AAAA,YACF,GAAG;AAAA,cACD,GAAG;AAAA,cACH;AAAA,YACF,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,KAAK,MAAM,OAAO;AACtB,iBAAO,CAAC;AAAA,YACN;AAAA,YACA,GAAG;AAAA,UACL,GAAG;AAAA,YACD;AAAA,YACA,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,WAAW,eAAe,QAAQ;AAC1D,cAAI,QAAQ,MAAM;AAChB,gBAAI,MAAM;AACV,gBAAI,MAAM,KAAK;AACb,kBAAI,OAAO,QAAQ,MAAM,KAAK;AAC5B,sBAAM,KAAK,IAAI,MAAM,IAAI;AAAA,cAC3B,WAAW,OAAO,QAAQ,OAAO,KAAK;AACpC,sBAAM,KAAK,IAAI,MAAM,IAAI;AAAA,cAC3B;AAAA,YACF;AACA,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,MAAM,OAAO;AACxB,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,SAAS,eAAe,UAAU;AAC1D,cAAI,MAAM,KAAK;AACb,gBAAI,MAAM;AACV,gBAAI,MAAM;AACV,gBAAI,MAAM,KAAK;AACb,kBAAI,OAAO,QAAQ,MAAM,KAAK;AAC5B,sBAAM,KAAK,IAAI,MAAM,IAAI;AAAA,cAC3B,WAAW,OAAO,QAAQ,OAAO,KAAK;AACpC,sBAAM,KAAK,IAAI,MAAM,IAAI;AAAA,cAC3B;AAAA,YACF;AACA,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,MAAM,OAAO;AACxB,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,YAAY,eAAe,OAAO;AAC1D,cAAI,MAAM,eAAe,KAAK;AAC5B,gBAAI,MAAM;AACV,gBAAI,MAAM;AACV,gBAAI,MAAM,KAAK;AACb,kBAAI,OAAO,QAAQ,MAAM,KAAK;AAC5B,sBAAM,KAAK,IAAI,MAAM,IAAI;AAAA,cAC3B,WAAW,OAAO,QAAQ,OAAO,KAAK;AACpC,sBAAM,KAAK,IAAI,MAAM,IAAI;AAAA,cAC3B;AAAA,YACF;AACA,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,MAAM,OAAO;AACxB,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,SAAS,eAAe,OAAO;AACvD,cAAI;AACJ,cAAI,KAAK,KAAK,KAAK,MAAM,OAAO,GAAG,GAAG;AACtC,cAAI,KAAK,KAAK,KAAK,MAAM,OAAO,GAAG,GAAG;AACtC,cAAI,MAAM,KAAK;AACb,gBAAI,OAAO,QAAQ,OAAO,MAAM;AAC9B,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,cACtB,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,cACtB,CAAC;AAAA,YACH,WAAW,MAAM,KAAK;AACpB,oBAAM,KAAK,IAAI,KAAK,IAAI;AAAA,YAC1B,OAAO;AACL,oBAAM,KAAK,IAAI,KAAK,IAAI;AAAA,YAC1B;AAAA,UACF,OAAO;AACL,gBAAI,OAAO,QAAQ,OAAO,MAAM;AAC9B,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,cACtB,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,cACtB,CAAC;AAAA,YACH,WAAW,OAAO,KAAK;AACrB,oBAAM,KAAK,IAAI,KAAK,IAAI;AAAA,YAC1B,OAAO;AACL,oBAAM,KAAK,IAAI,KAAK,IAAI;AAAA,YAC1B;AAAA,UACF;AACA,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,YAAY,eAAe,UAAU;AAC7D,cAAI;AACJ,cAAI,OAAO,KAAK,KAAK,MAAM,OAAO,GAAG,GAAG;AACxC,cAAI,OAAO,KAAK,KAAK,MAAM,OAAO,GAAG,GAAG;AACxC,cAAI,MAAM,KAAK;AACb,gBAAI,OAAO,QAAQ,OAAO,MAAM;AAC9B,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,cACtB,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,cACtB,CAAC;AAAA,YACH,WAAW,MAAM,KAAK;AACpB,oBAAM,KAAK,IAAI,KAAK,IAAI;AAAA,YAC1B,OAAO;AACL,oBAAM,KAAK,IAAI,KAAK,IAAI;AAAA,YAC1B;AAAA,UACF,OAAO;AACL,gBAAI,OAAO,QAAQ,OAAO,MAAM;AAC9B,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,cACtB,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,cACtB,CAAC;AAAA,YACH,WAAW,OAAO,KAAK;AACrB,oBAAM,KAAK,IAAI,KAAK,IAAI;AAAA,YAC1B,OAAO;AACL,oBAAM,KAAK,IAAI,KAAK,IAAI;AAAA,YAC1B;AAAA,UACF;AACA,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,UAAU,eAAe,QAAQ;AACzD,cAAI;AACJ,cAAI,KAAK,KAAK,KAAK,MAAM,OAAO,GAAG,GAAG;AACtC,cAAI,KAAK,KAAK,KAAK,MAAM,OAAO,GAAG,GAAG;AACtC,cAAI,MAAM,KAAK;AACb,gBAAI,OAAO,KAAK;AACd,oBAAM,KAAK,IAAI,MAAM,GAAG;AAAA,YAC1B,OAAO;AACL,oBAAM,KAAK,IAAI,MAAM,GAAG;AAAA,YAC1B;AAAA,UACF,OAAO;AACL,gBAAI,OAAO,KAAK;AACd,oBAAM,KAAK,IAAI,MAAM,GAAG;AAAA,YAC1B,OAAO;AACL,oBAAM,KAAK,IAAI,MAAM,GAAG;AAAA,YAC1B;AAAA,UACF;AACA,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,WAAW,eAAe,SAAS;AAC3D,cAAI;AACJ,cAAI,OAAO,KAAK,KAAK,MAAM,OAAO,GAAG,GAAG;AACxC,cAAI,OAAO,KAAK,KAAK,MAAM,OAAO,GAAG,GAAG;AACxC,cAAI,MAAM,KAAK;AACb,gBAAI,OAAO,KAAK;AACd,oBAAM,KAAK,IAAI,MAAM,GAAG;AAAA,YAC1B,OAAO;AACL,oBAAM,KAAK,IAAI,MAAM,GAAG;AAAA,YAC1B;AAAA,UACF,OAAO;AACL,gBAAI,OAAO,KAAK;AACd,oBAAM,KAAK,IAAI,MAAM,GAAG;AAAA,YAC1B,OAAO;AACL,oBAAM,KAAK,IAAI,MAAM,GAAG;AAAA,YAC1B;AAAA,UACF;AACA,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,SAAS,eAAe,SAAS;AACzD,cAAI,MAAM,KAAK;AACb,gBAAI,MAAM,KAAK;AACb,kBAAI,MAAM;AACV,mBAAK,MAAM,OAAO,CAAC,eAAe,MAAM,QAAQ,MAAM,KAAK;AACzD,sBAAM;AAAA,cACR;AACA,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,CAAC;AAAA,YACH;AACA,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,MAAM,KAAK,IAAI,uBAAuB,IAAI;AAC9C,cAAI,MAAM,OAAO,MAAM,OAAO,MAAM,KAAK;AACvC,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,MAAM,QAAQ,MAAM,OAAO,MAAM,KAAK;AACxC,gBAAI,MAAM,KAAK,IAAI,MAAM,cAAc,MAAM,YAAY;AACzD,gBAAI,MAAM,KAAK,IAAI,MAAM,cAAc,MAAM,YAAY;AACzD,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,YACpB,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG,KAAK,IAAI,KAAK,GAAG;AAAA,YACpB,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,SAAS,eAAe,QAAQ;AACxD,cAAI,MAAM,KAAK;AACb,gBAAI,MAAM,KAAK;AACb,kBAAI,OAAO;AACX,mBAAK,OAAO,OAAO,CAAC,eAAe,OAAO,QAAQ,MAAM,KAAK;AAC3D,uBAAO;AAAA,cACT;AACA,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,CAAC;AAAA,YACH;AACA,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,MAAM,KAAK,IAAI,MAAM,qBAAqB;AAC9C,cAAI,MAAM,OAAO,OAAO,KAAK;AAC3B,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,MAAM,QAAQ,MAAM,KAAK;AAC3B,gBAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,gBAAI,MAAM,KAAK,IAAI,MAAM,IAAI;AAC7B,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,YAAY,eAAe,SAAS;AAC5D,cAAI,MAAM,KAAK;AACb,gBAAI,MAAM,KAAK;AACb,kBAAI,OAAO;AACX,mBAAK,OAAO,OAAO,CAAC,eAAe,OAAO,QAAQ,MAAM,KAAK;AAC3D,uBAAO;AAAA,cACT;AACA,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,CAAC;AAAA,YACH;AACA,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH,OAAO;AACL,gBAAI,MAAM,KAAK;AACb,kBAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,kBAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,CAAC;AAAA,YACH;AAAA,UACF;AACA,cAAI,OAAO;AACX,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,YAAY,eAAe,QAAQ;AAC3D,cAAI,MAAM,KAAK;AACb,gBAAI,MAAM,KAAK;AACb,kBAAI,OAAO;AACX,mBAAK,OAAO,OAAO,CAAC,eAAe,OAAO,QAAQ,MAAM,KAAK;AAC3D,uBAAO;AAAA,cACT;AACA,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,CAAC;AAAA,YACH;AACA,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH,OAAO;AACL,gBAAI,MAAM,KAAK;AACb,kBAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,kBAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,CAAC;AAAA,YACH;AAAA,UACF;AACA,cAAI,OAAO;AACX,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,UAAU,eAAe,UAAU;AAC3D,cAAI,OAAO,OAAO,OAAO,MAAM;AAC7B,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,OAAO,MAAM,KAAK;AAC3B,gBAAI,OAAO;AACX,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,MAAM,OAAO,OAAO,KAAK;AAC3B,gBAAI,OAAO;AACX,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,KAAK,IAAI,MAAM,GAAG;AAC7B,cAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,UAAU,eAAe,OAAO;AACxD,cAAI,MAAM,OAAO,MAAM,MAAM;AAC3B,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,KAAK;AACd,gBAAI,MAAM,KAAK;AACb,kBAAI,OAAO;AACX,qBAAO,CAAC;AAAA,gBACN,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,GAAG;AAAA,gBACD,GAAG;AAAA,gBACH,GAAG;AAAA,cACL,CAAC;AAAA,YACH;AAAA,UACF;AACA,cAAI,OAAO,OAAO,MAAM,KAAK;AAC3B,gBAAI,OAAO;AACX,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,MAAM,MAAM,KAAK,IAAI,MAAM,IAAI,IAAI;AAC9C,cAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,WAAW,eAAe,OAAO;AACzD,cAAI,OAAO,OAAO,MAAM,MAAM;AAC5B,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,MAAM,OAAO,MAAM,KAAK;AAC1B,gBAAI,OAAO;AACX,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,MAAM,OAAO,MAAM,KAAK;AAC1B,gBAAI,OAAO;AACX,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,cAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,eAAe,WAAW,eAAe,UAAU;AAC5D,cAAI,OAAO,OAAO,OAAO,MAAM;AAC7B,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,QAAQ,MAAM,KAAK;AAC5B,gBAAI,OAAO;AACX,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,MAAM,OAAO,MAAM,KAAK;AAC1B,gBAAI,OAAO;AACX,mBAAO,CAAC;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,GAAG;AAAA,cACD,GAAG;AAAA,cACH,GAAG;AAAA,YACL,CAAC;AAAA,UACH;AACA,cAAI,OAAO,KAAK,IAAI,MAAM,GAAG;AAC7B,cAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,iBAAO,CAAC;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG;AAAA,YACD,GAAG;AAAA,YACH,GAAG;AAAA,UACL,CAAC;AAAA,QACH;AAAA,MACF;AACA,eAAS,iBAAiB,UAAU,KAAK,UAAU;AACjD,YAAI,kBAAkB,IAAI;AAC1B,YAAI,oBAAoB,OAAQ,mBAAkB,WAAW;AAC7D,YAAI,kBAAkB,IAAI;AAC1B,YAAI,oBAAoB,OAAQ,mBAAkB,WAAW;AAC7D,YAAI,SAAS,IAAI,UAAU;AAC3B,YAAI,cAAc,IAAI,eAAe;AACrC,YAAI,eAAe,CAAC,CAAC,SAAS,MAAM,OAAO,EAAE;AAC7C,YAAI,cAAc,oBAAoB,SAAS,YAAY,SAAS,cAAc,SAAS,YAAY,iBAAiB,cAAc,SAAS,cAAc,MAAM;AACnK,YAAI,eAAe,CAAC,CAAC,SAAS,MAAM,OAAO,EAAE;AAC7C,YAAI,cAAc,oBAAoB,SAAS,YAAY,SAAS,cAAc,SAAS,YAAY,iBAAiB,cAAc,SAAS,cAAc,MAAM;AACnK,YAAI,iBAAiB,CAAC;AACtB,YAAI,CAAC,eAAe,SAAS,WAAW,GAAG;AACzC,iBAAO,eAAe,mBAAmB,aAAa,WAAW,CAAC;AAAA,QACpE;AACA,YAAI,eAAe,SAAS,IAAI,SAAU,GAAG;AAC3C,iBAAO,oBAAoB,CAAC;AAAA,QAC9B,CAAC;AACD,YAAI,cAAc,aAAa,CAAC;AAChC,YAAI,YAAY,QAAQ,YAAY,KAAK,MAAM,UAAU,KAAK,YAAY,KAAK,MAAM,QAAQ,EAAE,QAAQ,MAAM,EAAE,cAAc,YAAY,KAAK,GAAG;AAC/I,cAAI,MAAM,aAAa,aAAa,WAAW;AAC/C,cAAI,gBAAgB,IAAI,CAAC;AACzB,cAAI,cAAc;AAClB,cAAI,cAAc,oBAAoB,YAAY,KAAK;AAEvD,sBAAY,SAAS;AACrB,sBAAY,YAAY;AACxB,sBAAY,YAAY;AACxB,yBAAe,KAAK,MAAM,gBAAgB,mBAAmB,aAAa,WAAW,EAAE,OAAO,CAAC,YAAY,KAAK,CAAC,CAAC;AAAA,QACpH,OAAO;AAEL,cAAI,OAAO,aAAa,CAAC,KAAK;AAC9B,cAAI,YAAY,wBAAwB,aAAa,aAAa,IAAI;AACtE,sBAAY,YAAY;AACxB,yBAAe,KAAK,MAAM,gBAAgB,mBAAmB,aAAa,WAAW,EAAE,OAAO,CAAC,YAAY,KAAK,CAAC,CAAC;AAAA,QACpH;AACA,iBAAS,IAAI,GAAG,IAAI,aAAa,SAAS,GAAG,KAAK;AAChD,cAAI,OAAO,aAAa,CAAC;AACzB,cAAI,KAAK,aAAa,IAAI,CAAC;AAC3B,cAAI,UAAU,IAAI,KAAK,KAAK,OAAO,GAAG,KAAK;AAC3C,cAAI,eAAe,gBAAgB,OAAO;AAC1C,cAAI,eAAe,OAAO,GAAG;AAE3B,gBAAI,gBAAgB,oBAAoB,YAAY;AACpD,gBAAI,kBAAkB,oBAAoB,aAAa;AACvD,gBAAI,kBAAkB,KAAK,WAAW;AACpC,6BAAe,KAAK,KAAK,OAAO,GAAG,KAAK;AACxC,iBAAG,YAAY;AAAA,YACjB,OAAO;AACL,kBAAI,QAAQ,eAAe,eAAe,EAAE;AAC5C,kBAAI,KAAK;AACT,kBAAI,KAAK;AACT,kBAAI,UAAU,IAAI;AAChB,qBAAK,CAAC;AAAA,cACR,WAAW,UAAU,KAAK;AACxB,qBAAK,CAAC;AAAA,cACR,WAAW,UAAU,KAAK;AACxB,qBAAK;AAAA,cACP,WAAW,UAAU,GAAG;AACtB,qBAAK;AAAA,cACP;AACA,kBAAI,KAAK;AAAA,gBACP,GAAG,KAAK,MAAM,IAAI;AAAA,gBAClB,GAAG,KAAK,MAAM,IAAI;AAAA,cACpB;AACA,kBAAI,KAAK;AAAA,gBACP,GAAG,GAAG,MAAM,IAAI;AAAA,gBAChB,GAAG,GAAG,MAAM,IAAI;AAAA,cAClB;AACA,kBAAI,WAAW,IAAI,KAAK,GAAG,OAAO,EAAE;AACpC,iBAAG,YAAY,oBAAoB,gBAAgB,QAAQ,CAAC;AAG5D,6BAAe,KAAK,KAAK,OAAO,IAAI,IAAI,GAAG,KAAK;AAAA,YAClD;AACA;AAAA,UACF;AACA,cAAI,QAAQ,iBAAiB,MAAM,EAAE;AACrC,cAAI,kBAAkB,MAAM,CAAC;AAC7B,cAAI,gBAAgB,MAAM,CAAC;AAC3B,eAAK,YAAY;AACjB,aAAG,YAAY;AACf,yBAAe,KAAK,MAAM,gBAAgB,mBAAmB,MAAM,EAAE,EAAE,OAAO,CAAC,GAAG,KAAK,CAAC,CAAC;AAAA,QAC3F;AACA,YAAI,aAAa,aAAa,aAAa,SAAS,CAAC;AACrD,YAAI,YAAY,QAAQ,YAAY,KAAK,MAAM,UAAU,GAAG;AAC1D,cAAI,YAAY,KAAK,MAAM,QAAQ,EAAE,QAAQ,MAAM,EAAE,cAAc,WAAW,KAAK,GAAG;AACpF,gBAAI,QAAQ,iBAAiB,YAAY,WAAW;AACpD,gBAAI,kBAAkB,MAAM,CAAC;AAC7B,gBAAI,cAAc,oBAAoB,YAAY,KAAK;AACvD,gBAAI,QAAQ,aAAa,YAAY,WAAW;AAChD,gBAAI,gBAAgB,MAAM,CAAC;AAE3B,wBAAY,SAAS;AACrB,wBAAY,YAAY;AACxB,uBAAW,YAAY;AACvB,2BAAe,KAAK,MAAM,gBAAgB,mBAAmB,YAAY,WAAW,CAAC;AAAA,UACvF,OAAO;AAKL,gBAAI,aAAa,eAAe,cAAc;AAC9C,gBAAI,YAAY,IAAI,KAAK,WAAW,WAAW,SAAS,CAAC,GAAG,WAAW,KAAK;AAC5E,gBAAI,mBAAmB,oBAAoB,KAAK,MAAM,gBAAgB,SAAS,CAAC,CAAC;AACjF,uBAAW,YAAY;AACvB,gBAAI,mBAAmB,mBAAmB,YAAY,WAAW;AACjE,gBAAI,QAAQ,eAAe,iBAAiB,OAAO,CAAC,YAAY,KAAK,CAAC,CAAC;AACvE,gBAAI,OAAO,MAAM,CAAC;AAClB,gBAAI,OAAO,MAAM,CAAC;AAClB,gBAAI,cAAc,IAAI,KAAK,MAAM,IAAI;AACrC,gBAAI,0BAA0B,KAAK,MAAM,gBAAgB,WAAW,CAAC;AACrE,gBAAI,uBAAuB,oBAAoB,uBAAuB;AACtE,gBAAI,yBAAyB,oBAAoB,qBAAqB,oBAAoB,oBAAoB,GAAG;AAC/G,yBAAW,SAAS;AACpB,iCAAmB,mBAAmB,YAAY,WAAW;AAAA,YAC/D;AACA,2BAAe,KAAK,MAAM,gBAAgB,gBAAgB;AAAA,UAC5D;AAAA,QACF,OAAO;AAEL,cAAI,QAAQ,iBAAiB,YAAY,WAAW;AACpD,cAAI,kBAAkB,MAAM,CAAC;AAC7B,qBAAW,YAAY;AACvB,yBAAe,KAAK,MAAM,gBAAgB,mBAAmB,YAAY,WAAW,CAAC;AAAA,QACvF;AACA,eAAO,eAAe,cAAc;AAAA,MACtC;AACA,eAAS,iBAAiB,MAAM,IAAI;AAClC,YAAI,kBAAkB,KAAK;AAC3B,YAAI,sBAAsB,oBAAoB,SAAS,eAAe;AACtE,YAAI,kBAAkB,KAAK;AAC3B,YAAI,kBAAkB,GAAG;AACzB,YAAI,qBAAqB;AACvB,cAAI,YAAY,KAAK,MAAM,IAAI,GAAG,MAAM;AACxC,cAAI,KAAK,GAAG,MAAM,IAAI,KAAK,MAAM;AACjC,cAAI,oBAAoB,WAAW,QAAQ;AAEzC,8BAAkB,YAAY,oBAAoB,eAAe,IAAI,MAAM,IAAI,WAAW,QAAQ,WAAW;AAC7G,gBAAI,KAAK,GAAG;AACV,gCAAkB,YAAY,WAAW,OAAO,WAAW;AAAA,YAC7D,WAAW,KAAK,GAAG;AACjB,gCAAkB,YAAY,WAAW,QAAQ,WAAW;AAAA,YAC9D;AAAA,UACF,OAAO;AAEL,8BAAkB,YAAY,MAAM,IAAI,WAAW,QAAQ,WAAW,OAAO,oBAAoB,eAAe;AAChH,gBAAI,KAAK,GAAG;AACV,gCAAkB,YAAY,WAAW,SAAS,WAAW;AAAA,YAC/D,WAAW,KAAK,GAAG;AACjB,gCAAkB,YAAY,WAAW,SAAS,WAAW;AAAA,YAC/D;AAAA,UACF;AAAA,QACF,OAAO;AACL,cAAI,WAAW,KAAK,MAAM,IAAI,GAAG,MAAM;AACvC,cAAI,KAAK,GAAG,MAAM,IAAI,KAAK,MAAM;AACjC,cAAI,oBAAoB,WAAW,OAAO;AACxC,8BAAkB,WAAW,oBAAoB,eAAe,IAAI,MAAM,IAAI,WAAW,SAAS,WAAW;AAC7G,gBAAI,KAAK,GAAG;AACV,gCAAkB,WAAW,WAAW,MAAM,WAAW;AAAA,YAC3D,WAAW,KAAK,GAAG;AACjB,gCAAkB,WAAW,WAAW,SAAS,WAAW;AAAA,YAC9D;AAAA,UACF,OAAO;AACL,8BAAkB,WAAW,MAAM,IAAI,WAAW,SAAS,WAAW,MAAM,oBAAoB,eAAe;AAC/G,gBAAI,KAAK,GAAG;AACV,gCAAkB,WAAW,WAAW,QAAQ,WAAW;AAAA,YAC7D,WAAW,KAAK,GAAG;AACjB,gCAAkB,WAAW,WAAW,QAAQ,WAAW;AAAA,YAC7D;AAAA,UACF;AAAA,QACF;AACA,eAAO,CAAC,iBAAiB,eAAe;AAAA,MAC1C;AACA,uBAAiB,aAAa;AAC9B,UAAI,aAAa;AACjB,UAAI,UAAU;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,UAAI,cAAc;AAAA,QAChB,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,QACN,KAAK;AAAA,MACP;AACA,UAAI,uBAAuB,OAAO,OAAO,WAAW;AACpD,UAAI,gBAAgB;AACpB,UAAI,YAAY;AAChB,UAAI,WAAW,SAAU,aAAa,aAAa,aAAa,KAAK;AACnE,YAAI,gBAAgB,OAAQ,eAAc,CAAC;AAC3C,YAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,YAAI,aAAa,IAAI;AACrB,YAAI,eAAe,OAAQ,cAAa,YAAY;AACpD,YAAI,eAAe,IAAI;AACvB,YAAI,iBAAiB,OAAQ,gBAAe;AAC5C,YAAI,4BAA4B,IAAI;AACpC,YAAI,8BAA8B,OAAQ,6BAA4B;AACtE,YAAI,YAAY,IAAI;AACpB,YAAI,cAAc,OAAQ,aAAY;AACtC,YAAI,MAAM,IAAI;AACd,YAAI,QAAQ,OAAQ,OAAM;AAC1B,YAAI,qBAAqB,QAAQ,UAAU,MAAM,IAAI;AAEnD,gBAAM,IAAI,MAAM,wDAAwD;AAAA,QAC1E;AACA,YAAIwB;AACJ,YAAI,eAAe,YAAY,SAAS,CAAC,cAAc;AAGrD,cAAI,SAAS,CAAC,WAAW,EAAE,OAAO,WAAW,EAAE,OAAO,CAAC,WAAW,CAAC;AACnE,cAAI,WAAW,IAAI,SAAS,MAAM;AAClC,UAAAA,QAAO,IAAI,KAAK,QAAQ;AAAA,QAC1B,OAAO;AAEL,UAAAA,QAAO,IAAI,KAAK;AAGhB,UAAAA,MAAK,cAAc,KAAK,cAAc,KAAK,WAAW,CAAC;AACvD,cAAI;AACJ,cAAI,oBAAoB,YAAY;AACpC,mBAAS,IAAI,GAAG,IAAI,mBAAmB,KAAK;AAC1C,gBAAI,OAAO,IAAI,MAAM,YAAY,CAAC,CAAC;AACnC,gBAAI,OAAO,YAAY,IAAI,CAAC,KAAK;AACjC,gBAAI,OAAO,YAAY,IAAI,CAAC,KAAK;AACjC,gBAAI,eAAe,gBAAgB,KAAK,SAAS,IAAI,IAAI;AACzD,2BAAe,KAAK,SAAS,IAAI,IAAI;AACrC,gBAAI,YAAY,QACd,UAAU;AACZ,gBAAI,CAAC,2BAA2B;AAG9B,0BAAY,CAAC,KAAK,IAAI,cAAc,YAAY;AAChD,wBAAU,CAAC,KAAK,IAAI,cAAc,YAAY;AAAA,YAChD,OAAO;AAEL,0BAAY,UAAU,CAAC,KAAK,IAAI,cAAc,cAAc,YAAY;AAAA,YAC1E;AAMA,gBAAI,cAAc,KAAK,MAAM,EAAE,KAAK,MAAM,SAAS,EAAE,MAAM,SAAS;AACpE,gBAAI,YAAY,KAAK,MAAM,EAAE,KAAK,MAAM,OAAO,EAAE,MAAM,SAAS;AAIhE,YAAAA,MAAK,cAAc,KAAK,cAAc,KAAK,WAAW,CAAC;AAGvD,oBAAQ,YAAY;AAAA,cAClB,KAAK,YAAY,OACf;AAEE,oBAAImB,OAAM,IAAI;AACd,oBAAIC,OAAM,IAAI;AACd,oBAAI,WAAW,IAAI,MAAMD,OAAM,YAAY,IAAIC,OAAM,KAAK,GAAGA,OAAM,KAAK,IAAID,OAAM,YAAY,CAAC;AAC/F,oBAAI,WAAW,IAAI,MAAMA,OAAM,UAAU,IAAIC,OAAM,KAAK,GAAGA,OAAM,KAAK,IAAID,OAAM,UAAU,CAAC;AAC3F,gBAAAnB,MAAK,cAAc,KAAK,cAAc,KAAK,UAAU,UAAU,SAAS,CAAC;AACzE;AAAA,cACF;AAAA,cACF,KAAK,YAAY,MACf;AAEE,gBAAAA,MAAK,cAAc,KAAK,cAAc,KAAK,SAAS,CAAC;AACrD;AAAA,cACF;AAAA,cACF,KAAK,YAAY,KACf;AAEE,gBAAAA,MAAK,cAAc,KAAK,cAAc,KAAK,SAAS,CAAC;AACrD;AAAA,cACF;AAAA,YAEJ;AAAA,UACF;AAKA,UAAAA,MAAK,cAAc,KAAK,cAAc,KAAK,WAAW,CAAC;AAAA,QACzD;AACA,eAAO,MAAMA,QAAOA,MAAK,UAAU;AAAA,MACrC;AAGA,UAAI,YAAY;AAIhB,UAAI,aAAa,CAAC,OAAO,OAAO,OAAO;AAGvC,UAAI,SAAS;AAGb,UAAI,0BAA0B;AAG9B,UAAI,qBAAqB,CAAC,QAAQ;AAGlC,UAAI,MAAM,IAAI;AACd,UAAI,MAAM,IAAI;AACd,eAAS,oBAAoB,IAAI,IAAI;AACnC,YAAI,KAAK,GAAG;AACZ,YAAI,KAAK,GAAG;AACZ,YAAI,KAAK,GAAG;AACZ,YAAI,KAAK,GAAG;AACZ,YAAI,KAAK,IAAI;AACX,cAAI,OAAO;AACX,eAAK;AACL,eAAK;AACL,iBAAO;AACP,eAAK;AACL,eAAK;AAAA,QACP;AACA,YAAI,KAAK,IAAI;AACX,cAAI,SAAS;AACb,eAAK;AACL,eAAK;AACL,mBAAS;AACT,eAAK;AACL,eAAK;AAAA,QACP;AACA,eAAO,CAAC,IAAI,MAAM,IAAI,EAAE,GAAG,IAAI,MAAM,IAAI,EAAE,CAAC;AAAA,MAC9C;AACA,eAAS,cAAc,OAAO,OAAO;AACnC,YAAI,MAAM,oBAAoB,MAAM,OAAO,MAAM,GAAG;AACpD,YAAI,QAAQ,IAAI,CAAC;AACjB,YAAI,KAAK,MAAM;AACf,YAAI,KAAK,MAAM;AACf,YAAI,QAAQ,IAAI,CAAC;AACjB,YAAI,KAAK,MAAM;AACf,YAAI,KAAK,MAAM;AACf,YAAI,QAAQ,oBAAoB,MAAM,OAAO,MAAM,GAAG;AACtD,YAAI,UAAU,MAAM,CAAC;AACrB,YAAI,KAAK,QAAQ;AACjB,YAAI,KAAK,QAAQ;AACjB,YAAI,UAAU,MAAM,CAAC;AACrB,YAAI,KAAK,QAAQ;AACjB,YAAI,KAAK,QAAQ;AACjB,YAAI,SAAS,MAAM,MAAM,MAAM;AAC/B,YAAI,SAAS,MAAM,MAAM,MAAM;AAC/B,eAAO,UAAU;AAAA,MACnB;AASA,eAAS,YAAY,aAAa,aAAa,OAAO;AAEpD,YAAI,SAAS,CAAC,EAAE,OAAO,aAAa,OAAO,WAAW;AACtD,eAAO,OAAO,OAAO,SAAU,aAAaxB,QAAO,KAAK;AAEtD,cAAI,YAAY,OAAO,MAAM,CAAC;AAC9B,cAAI,aAAa,MAAM;AACrB,wBAAY,GAAG,IAAI,KAAKA,QAAO,SAAS;AAAA,UAC1C;AACA,iBAAO;AAAA,QACT,GAAG,CAAC,CAAC;AAAA,MACP;AACA,eAAS,cAAc,kBAAkB;AACvC,YAAI,QAAQ,iBAAiB;AAC7B,YAAI,aAAa,MAAM;AAGvB,YAAI,cAAc,MAAM;AACtB,uBAAa,MAAM,sBAAsB,CAAC;AAC1C,cAAI,QAAQ,MAAM;AAClB,gBAAM,GAAG,cAAc,WAAY;AACjC,gBAAI,KAAK,eAAe,GAAG;AACzB;AAAA,YACF;AACA,2BAAe,KAAK;AAAA,UACtB,CAAC;AACD,gBAAM,GAAG,SAAS,WAAY;AAC5B,yBAAa,MAAM,sBAAsB,CAAC;AAAA,UAC5C,CAAC;AAAA,QACH;AAGA,YAAI,WAAW,QAAQ,gBAAgB,IAAI,GAAG;AAC5C,qBAAW,KAAK,gBAAgB;AAIhC,2BAAiB,aAAa,iBAAiB,OAAO,2BAA2B,WAAY;AAC3F,uBAAW,OAAO,WAAW,QAAQ,gBAAgB,GAAG,CAAC;AAAA,UAC3D,CAAC;AAAA,QACH;AAAA,MACF;AAOA,eAAS,eAAe,OAAO;AAC7B,YAAI,aAAa,MAAM;AACvB,iBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAC1C,cAAI,WAAW,WAAW,CAAC;AAC3B,cAAI,aAAa,SAAS,QAAQ,SAAS,YAAY,MAAM,SAAS;AACtE,mBAAS,cAAc,UAAU;AAAA,QACnC;AAAA,MACF;AASA,eAAS,sBAAsBiB,OAAM,iBAAiB;AACpD,eAAO,QAAQ,eAAe,EAAE,OAAO,SAAU,KAAK,gBAAgB;AACpE,cAAID,gBAAeC,MAAK,aAAa,cAAc;AACnD,cAAID,eAAc;AAChB,gBAAI,KAAKA,aAAY;AAAA,UACvB;AACA,iBAAO;AAAA,QACT,GAAG,CAAC,CAAC;AAAA,MACP;AAQA,eAAS,WAAW,IAAI,IAAI;AAC1B,eAAO,KAAK,IAAI,EAAE,EAAE,cAAc;AAAA,MACpC;AASA,eAAS,YAAYuF,SAAQ,eAAe,UAAU;AACpD,eAAO,cAAc,OAAO,SAAU,aAAa,SAAS,KAAK;AAG/D,cAAI,QAAQ,SAAS,MAAM;AACzB,mBAAO;AAAA,UACT;AAGA,cAAI,WAAW,YAAY,IAAI,KAAKA;AAGpC,cAAI,YAAY,MAAM,OAAO,EAAE,KAAK,SAAS,OAAO,CAAC,QAAQ;AAC7D,cAAI,UAAU,MAAM,OAAO,EAAE,KAAK,SAAS,OAAO,CAAC,QAAQ;AAG3D,cAAI,YAAY,cAAc,MAAM,CAAC;AACrC,cAAI,aAAa,MAAM;AACrB,gBAAI,WAAW,QAAQ,SAAS,SAAS;AACzC,gBAAI,YAAY,UAAU;AAGxB,wBAAU,UAAU,KAAK,SAAS,OAAO,QAAQ;AACjD,wBAAU,OAAO;AAAA,YACnB;AAAA,UACF,OAAO;AAGL,gBAAI,cAAc,UAAU,SAAS,SAAS,GAAG;AAEjD,gBAAI,cAAc,WAAW,IAAI,yBAAyB;AACxD,0BAAY,KAAK,QAAQ;AACzB,qBAAO;AAAA,YACT;AAAA,UACF;AACA,cAAI,gBAAgB,QAAQ,SAAS,SAAS,KAAK;AACnD,cAAI,gBAAgB,WAAW,IAAI,yBAAyB;AAE1D,wBAAY,KAAK,QAAQ;AACzB,mBAAO;AAAA,UACT;AAGA,cAAI,WAAW,KAAK,WAAW,OAAO;AAEtC,mBAAS,SAAS;AAClB,sBAAY,KAAK,KAAK,SAAS,OAAO,SAAS,GAAG,UAAU,KAAK,SAAS,SAAS,GAAG,CAAC;AACvF,iBAAO;AAAA,QACT,GAAG,CAAC,CAAC;AAAA,MACP;AASA,eAAS,UAAU,OAAO,UAAU,UAAU,QAAQ;AACpD,YAAI/E,QAAO,IAAI,KAAK;AACpB,YAAI;AAGJ,kBAAU,KAAK,cAAc,KAAK,MAAM,CAAC,EAAE,KAAK;AAChD,QAAAA,MAAK,cAAc,OAAO;AAG1B,gBAAQ,KAAK,EAAE,QAAQ,SAAUP,OAAM9B,QAAO;AAC5C,cAAI8B,MAAK,QAAQ;AACf,gBAAI,OAAOI;AACX,gBAAI,UAAU;AACd,gBAAI,aAAa,OAAO;AAEtB,sBAAQ;AAER,cAAAA,QAAOJ,MAAK,MAAM,WAAWA,MAAK,GAAG;AAErC,kBAAI,cAAc,OAAOI,MAAK,IAAI,KAAKA,MAAK,MAAM,KAAKA,MAAK,IAAI,CAAC;AACjE,kBAAI,aAAa;AACf,yBAAS;AAAA,cACX;AACA,kBAAI,WAAWJ,MAAK,SAAS;AAC7B,kBAAI,aAAa,IAAI,KAAK,UAAUA,MAAK,GAAG,EAAE,OAAO,UAAU,KAAK;AACpE,kBAAI;AAGJ,yBAAW,IAAI,KAAKA,MAAK,OAAO,QAAQ;AACxC,yBAAW,SAAS,QAAQ,IAAI,CAAC,EAAE,OAAOA,MAAK,OAAO,KAAK;AAC3D,yBAAW,WAAW,QAAQ,IAAI,CAAC,EAAE,OAAO,WAAW,KAAK,CAAC,KAAK;AAClE,wBAAU,KAAK,cAAc,KAAK,UAAU,UAAU,WAAW,GAAG;AACpE,cAAAO,MAAK,cAAc,OAAO;AAG1B,yBAAW,IAAI,KAAK,UAAUP,MAAK,GAAG;AACtC,yBAAW,WAAW,QAAQ,IAAI,CAAC,EAAE,OAAO,WAAW,KAAK,KAAK;AACjE,yBAAW,SAAS,QAAQ,IAAI,CAAC,EAAE,OAAOA,MAAK,KAAK,CAAC,KAAK;AAC1D,wBAAU,KAAK,cAAc,KAAK,UAAU,UAAUA,MAAK,GAAG;AAC9D,cAAAO,MAAK,cAAc,OAAO;AAAA,YAC5B,WAAW,aAAa,OAAO;AAC7B,wBAAU,KAAK,cAAc,KAAKP,MAAK,GAAG;AAC1C,cAAAO,MAAK,cAAc,OAAO;AAAA,YAC5B,WAAW,aAAa,SAAS;AAE/B,sBAAQP,MAAK,MAAM,MAAMA,MAAK,GAAG;AACjC,kBAAI,UAAU,WAAW;AACzB,kBAAI,UAAU,WAAW;AAGzB,cAAAI,QAAOJ,MAAK,MAAM,WAAWA,MAAK,GAAG;AAErC,4BAAc,OAAOI,MAAK,IAAI,KAAKA,MAAK,MAAM,KAAKA,MAAK,IAAI,CAAC;AAC7D,kBAAI,aAAa;AACf,2BAAW;AAAA,cACb;AACA,yBAAW,MAAMJ,MAAK,MAAM,IAAI,SAASA,MAAK,MAAM,IAAI,OAAO,EAAE,OAAOA,MAAK,OAAO,KAAK;AACzF,yBAAW,MAAMA,MAAK,IAAI,IAAI,SAASA,MAAK,IAAI,IAAI,OAAO,EAAE,OAAOA,MAAK,KAAK,KAAK;AACnF,wBAAU,KAAK,cAAc,KAAK,UAAU,UAAUA,MAAK,GAAG;AAC9D,cAAAO,MAAK,cAAc,OAAO;AAAA,YAC5B;AAAA,UACF,OAAO;AACL,gBAAI,WAAW,MAAMrC,SAAQ,CAAC;AAC9B,gBAAI,UAAU,KAAK,CAAC,YAAY,SAAS,QAAQ;AAC/C,wBAAU,KAAK,cAAc,KAAK8B,MAAK,GAAG;AAC1C,cAAAO,MAAK,cAAc,OAAO;AAAA,YAC5B,OAAO;AACL,kCAAoB,QAAQA,OAAMP,MAAK,KAAKA,MAAK,OAAO,SAAS,GAAG;AAAA,YACtE;AAAA,UACF;AAAA,QACF,CAAC;AACD,eAAOO;AAAA,MACT;AACA,eAAS,oBAAoB,QAAQA,OAAM,MAAM,MAAM,MAAM;AAC3D,YAAI,eAAe,KAAK,SAAS,IAAI,IAAI;AACzC,YAAI,eAAe,KAAK,SAAS,IAAI,IAAI;AACzC,YAAI,YAAY,CAAC,KAAK,IAAI,QAAQ,YAAY;AAC9C,YAAI,UAAU,CAAC,KAAK,IAAI,QAAQ,YAAY;AAC5C,YAAI,eAAe,KAAK,MAAM,EAAE,KAAK,MAAM,SAAS,EAAE,MAAM;AAC5D,YAAI,aAAa,KAAK,MAAM,EAAE,KAAK,MAAM,OAAO,EAAE,MAAM;AACxD,YAAI,WAAW,IAAI,MAAM,MAAM,aAAa,IAAI,MAAM,KAAK,GAAG,MAAM,KAAK,IAAI,MAAM,aAAa,CAAC;AACjG,YAAI,WAAW,IAAI,MAAM,MAAM,WAAW,IAAI,MAAM,KAAK,GAAG,MAAM,KAAK,IAAI,MAAM,WAAW,CAAC;AAC7F,YAAI;AACJ,kBAAU,KAAK,cAAc,KAAK,YAAY;AAC9C,QAAAA,MAAK,cAAc,OAAO;AAC1B,kBAAU,KAAK,cAAc,KAAK,UAAU,UAAU,UAAU;AAChE,QAAAA,MAAK,cAAc,OAAO;AAAA,MAC5B;AAWA,UAAI,WAAW,SAAU,aAAa,aAAa,OAAO,KAAK;AAG7D,sBAAc,IAAI;AAClB,YAAI,MAAM,IAAI;AACd,YAAI,WAAW,IAAI,QAAQ;AAC3B,YAAI,WAAW,IAAI,SAAS,KAAK,IAAI,MAAM,YAAY;AACvD,YAAI,SAAS,IAAI,UAAU;AAC3B,YAAI,mBAAmB,IAAI,oBAAoB;AAG/C,YAAI,WAAW,QAAQ,QAAQ,MAAM,IAAI;AACvC,qBAAW,WAAW,CAAC;AAAA,QACzB;AACA,YAAI,QAAQ,KAAK;AACjB,YAAI,QAAQ,MAAM;AAClB,YAAI,WAAW,MAAM,SAAS;AAG9B,YAAI,SAAS,WAAW,GAAG;AACzB,iBAAO,UAAU,YAAY,aAAa,aAAa,KAAK,GAAG,UAAU,UAAU,MAAM;AAAA,QAC3F;AACA,YAAI,YAAY,KAAK;AACrB,YAAI,YAAY,SAAS,QAAQ,SAAS;AAC1C,YAAI,mBAAmB,MAAM,QAAQ,oBAAoB,CAAC;AAG1D,YAAI,QAAQ,SAAS,OAAO,SAAU,MAAM,KAAK;AAC/C,cAAI,YAAY,KAAK,IAAI,WAAW,KAAK;AAGzC,cAAI,QAAQ,gBAAgB,EAAE,SAAS,UAAU,IAAI,GAAG;AACtD,mBAAO;AAAA,UACT;AAGA,cAAI,MAAM,WAAW;AACnB,mBAAO,UAAU,SAAS;AAAA,UAC5B;AACA,iBAAO;AAAA,QACT,CAAC;AAGD,YAAI,YAAY,MAAM,IAAI,SAAU,MAAM;AACxC,iBAAO,MAAM,gBAAgB,IAAI;AAAA,QACnC,CAAC;AAGD,YAAI,YAAY,YAAY,aAAa,aAAa,KAAK;AAG3D,YAAI,YAAY,UAAU,IAAI,SAAU,UAAU;AAChD,cAAI,YAAY,MAAM;AACpB,mBAAO,CAAC;AAAA,UACV;AACA,cAAI,aAAa,MAAM;AACrB,mBAAO;AAAA,UACT;AACA,iBAAO,YAAY,SAAS,aAAa,SAAS,aAAa,SAAS,KAAK;AAAA,QAC/E,GAAG,IAAI;AAIP,YAAI,eAAe,UAAU,OAAO,SAAU,aAAa,UAAU;AAGnE,cAAI,gBAAgB,MAAM,OAAO,SAAU,KAAK,MAAM,GAAG;AAEvD,gBAAI,SAAS,WAAW;AACtB,kBAAI,kBAAkB,UAAU,CAAC,EAAE,MAAM;AACzC,kBAAI,eAAe,gBAAgB,UAAU,SAAUP,OAAM;AAC3D,uBAAO,cAAc,UAAUA,KAAI;AAAA,cACrC,CAAC;AAGD,kBAAI,eAAe,MAAM,SAAS,cAAc,gBAAgB,YAAY,EAAE,GAAG,GAAG;AAElF,gCAAgB,OAAO,eAAe,GAAG,CAAC;AAAA,cAC5C;AACA,kBAAI,oBAAoB,sBAAsB,UAAU,eAAe;AACvE,kBAAI,KAAK,MAAM,KAAK,iBAAiB;AAAA,YACvC;AACA,mBAAO;AAAA,UACT,GAAG,CAAC,CAAC,EAAE,KAAK,SAAU,GAAG,GAAG;AAC1B,mBAAO,WAAW,SAAS,OAAO,CAAC,IAAI,WAAW,SAAS,OAAO,CAAC;AAAA,UACrE,CAAC;AACD,cAAI,cAAc,SAAS,GAAG;AAE5B,wBAAY,KAAK,MAAM,aAAa,YAAY,UAAU,eAAe,QAAQ,CAAC;AAAA,UACpF,OAAO;AAEL,wBAAY,KAAK,QAAQ;AAAA,UAC3B;AACA,iBAAO;AAAA,QACT,GAAG,CAAC,CAAC;AACL,YAAIO,QAAO,UAAU,cAAc,UAAU,UAAU,MAAM;AAC7D,eAAO,MAAMA,QAAOA,MAAK,UAAU;AAAA,MACrC;AACA,UAAI,WAAW,SAAU,aAAa,aAAa,OAAO,KAAK;AAC7D,YAAI,UAAU,OAAQ,SAAQ,CAAC;AAC/B,YAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,YAAI,MAAM,IAAI;AACd,YAAI,WAAW;AAAA,UACb,YAAY;AAAA,UACZ;AAAA,QACF;AACA,eAAO,SAAS,aAAa,aAAa,OAAO,QAAQ;AAAA,MAC3D;AACA,UAAI,kBAAkB;AACtB,UAAI,cAAc;AAClB,UAAI,UAAU,SAAU,aAAa,aAAa,OAAO,KAAK;AAC5D,YAAI,UAAU,OAAQ,SAAQ,CAAC;AAC/B,YAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,YAAI,SAAS,IAAI;AACjB,YAAI,WAAW,OAAQ,UAAS;AAChC,YAAI,MAAM,IAAI;AACd,YAAI,WAAW;AAAA,UACb,YAAY;AAAA,UACZ,cAAc;AAAA,UACd,WAAW;AAAA,UACX;AAAA,QACF;AACA,eAAO,SAAS,aAAa,aAAa,OAAO,QAAQ;AAAA,MAC3D;AACA,UAAI,SAAS,SAAU,aAAa,aAAa,OAAO,KAAK;AAC3D,YAAI,MAAM,OAAO,IAAI;AACrB,YAAIA;AACJ,YAAI,SAAS,MAAM,WAAW,GAAG;AAC/B,cAAI,SAAS,CAAC,WAAW,EAAE,OAAO,KAAK,EAAE,OAAO,CAAC,WAAW,CAAC;AAC7D,cAAI,SAAS,MAAM,cAAc,MAAM;AACvC,UAAAA,QAAO,IAAI,KAAK,MAAM;AAAA,QACxB,OAAO;AAML,UAAAA,QAAO,IAAI,KAAK;AAChB,cAAI;AACJ,oBAAU,KAAK,cAAc,KAAK,WAAW;AAC7C,UAAAA,MAAK,cAAc,OAAO;AAC1B,cAAI,KAAK,IAAI,YAAY,IAAI,YAAY,CAAC,KAAK,KAAK,IAAI,YAAY,IAAI,YAAY,CAAC,GAAG;AACtF,gBAAI,iBAAiB,YAAY,IAAI,YAAY,KAAK;AACtD,sBAAU,KAAK,cAAc,KAAK,eAAe,YAAY,GAAG,eAAe,YAAY,GAAG,YAAY,GAAG,YAAY,CAAC;AAC1H,YAAAA,MAAK,cAAc,OAAO;AAAA,UAC5B,OAAO;AACL,gBAAI,iBAAiB,YAAY,IAAI,YAAY,KAAK;AACtD,sBAAU,KAAK,cAAc,KAAK,YAAY,GAAG,eAAe,YAAY,GAAG,eAAe,YAAY,GAAG,YAAY,CAAC;AAC1H,YAAAA,MAAK,cAAc,OAAO;AAAA,UAC5B;AAAA,QACF;AACA,eAAO,MAAMA,QAAOA,MAAK,UAAU;AAAA,MACrC;AACA,UAAI,eAAe;AAAA,QACjB,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,eAAe;AAAA,QACf,UAAU;AAAA,MACZ;AACA,UAAI,oBAAoB;AAAA,QACtB,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,QACP,MAAM;AAAA,QACN,eAAe;AAAA,QACf,UAAU;AAAA,MACZ;AACA,UAAI,QAAQ,SAAU,aAAa,aAAa,OAAO,KAAK,UAAU;AACpE,YAAI,UAAU,OAAQ,SAAQ,CAAC;AAC/B,YAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,YAAI,MAAM,QAAQ,IAAI,GAAG;AASzB,YAAI,YAAY,IAAI;AACpB,YAAI,cAAc,OAAQ,aAAY,aAAa;AACnD,YAAI,YAAY,IAAI;AACpB,YAAI,cAAc,OAAQ,aAAY;AACtC,YAAI,UAAU;AAAA,UACZ,OAAO,IAAI,uBAAuB;AAAA,UAClC,yBAAyB,IAAI,2BAA2B;AAAA,UACxD,KAAK,IAAI,WAAW;AAAA,UACpB,eAAe,IAAI,gBAAgB,IAAI,MAAM,IAAI,aAAa,IAAI;AAAA,UAClE,eAAe,IAAI,gBAAgB,IAAI,MAAM,IAAI,aAAa,IAAI;AAAA,UAClE,QAAQ,QAAQ,IAAI,MAAM;AAAA,QAC5B;AACA,YAAI,OAAO,IAAI,oBAAoB,UAAU;AAC3C,kBAAQ,kBAAkB,IAAI;AAAA,QAChC,WAAW,OAAO,IAAI,oBAAoB,UAAU;AAClD,kBAAQ,kBAAkB,IAAI,MAAM,GAAG,CAAC,EAAE,OAAO,MAAM,IAAI,eAAe;AAAA,QAC5E,OAAO;AACL,kBAAQ,kBAAkB,IAAI,kBAAkB,IAAI,MAAM,IAAI,eAAe,EAAE,UAAU,IAAI;AAAA,QAC/F;AACA,YAAI,OAAO,IAAI,oBAAoB,UAAU;AAC3C,kBAAQ,kBAAkB,IAAI;AAAA,QAChC,WAAW,OAAO,IAAI,oBAAoB,UAAU;AAClD,kBAAQ,kBAAkB,IAAI,MAAM,GAAG,CAAC,EAAE,OAAO,MAAM,IAAI,eAAe;AAAA,QAC5E,OAAO;AACL,kBAAQ,kBAAkB,IAAI,kBAAkB,IAAI,MAAM,IAAI,eAAe,EAAE,UAAU,IAAI;AAAA,QAC/F;AACA,YAAI,gBAAgB,CAAC,WAAW,EAAE,OAAO,OAAO,CAAC,WAAW,CAAC,EAAE,IAAI,SAAU,GAAG;AAC9E,iBAAO,IAAI,MAAM,CAAC;AAAA,QACpB,CAAC;AAGD,YAAI;AACJ,YAAI,QAAQ,eAAe;AACzB,0BAAgB,QAAQ;AAAA,QAC1B,OAAO;AACL,cAAI,kBAAkB,0BAA0B,UAAU,eAAe,WAAW,OAAO;AAC3F,cAAI,gBAAgB,cAAc,CAAC,EAAE,SAAS,cAAc,CAAC,CAAC,IAAI,QAAQ;AAC1E,cAAI,eAAe,cAAc,CAAC,EAAE,WAAW,cAAc,CAAC,CAAC,EAAE,UAAU;AAC3E,cAAI,QAAQ,oBAAoB,iBAAiB,YAAY;AAC7D,cAAI,QAAQ,KAAK,KAAK,GAAG;AACvB,gBAAI,gBAAgB,iBAAiB,QAAQ,KAAK,KAAK,KAAK,QAAQ;AACpE,4BAAgB,gBAAgB,MAAM,EAAE,MAAM,eAAe,aAAa;AAAA,UAC5E,OAAO;AACL,4BAAgB,gBAAgB,MAAM,EAAE,MAAM,eAAe,aAAa;AAAA,UAC5E;AAAA,QACF;AAGA,YAAI;AACJ,YAAI,QAAQ,eAAe;AACzB,0BAAgB,QAAQ;AAAA,QAC1B,OAAO;AACL,cAAI,kBAAkB,0BAA0B,UAAU,eAAe,WAAW,OAAO;AAC3F,cAAI0C,QAAO,cAAc,SAAS;AAClC,cAAI,kBAAkB,cAAcA,QAAO,CAAC,EAAE,SAAS,cAAcA,KAAI,CAAC,IAAI,QAAQ;AACtF,cAAI,iBAAiB,cAAcA,QAAO,CAAC,EAAE,WAAW,cAAcA,KAAI,CAAC,EAAE,UAAU;AACvF,cAAI,UAAU,oBAAoB,iBAAiB,cAAc;AACjE,cAAI,UAAU,KAAK,KAAK,GAAG;AACzB,gBAAI,kBAAkB,mBAAmB,UAAU,KAAK,KAAK,KAAK,QAAQ;AAC1E,4BAAgB,gBAAgB,MAAM,EAAE,MAAM,iBAAiB,eAAe;AAAA,UAChF,OAAO;AACL,4BAAgB,gBAAgB,MAAM,EAAE,MAAM,iBAAiB,eAAe;AAAA,UAChF;AAAA,QACF;AACA,YAAI,mBAAmB,uBAAuB,eAAe,eAAe,eAAe,OAAO;AAClG,YAAI,eAAe,iBAAiB,IAAI,SAAUzC,QAAO;AACvD,iBAAO,mBAAmBA,QAAO,OAAO;AAAA,QAC1C,CAAC;AACD,YAAID,QAAO,IAAI,KAAK,YAAY,EAAE,MAAM,SAAS;AACjD,eAAO,MAAMA,QAAOA,MAAK,UAAU;AAAA,MACrC;AACA,YAAM,aAAa;AACnB,YAAM,oBAAoB;AAC1B,eAAS,6BAA6B,UAAU,OAAO,SAAS;AAC9D,YAAI,aAAa,SAAS;AAC1B,YAAI;AACJ,YAAI;AACJ,YAAI,CAAC,SAAS,YAAY;AACxB,cAAI,WAAW,IAAI,MAAM,CAAC,EAAE,GAAG;AAC7B,yBAAa;AAAA,UACf,OAAO;AACL,yBAAa;AAAA,UACf;AAAA,QACF,OAAO;AACL,qBAAW,SAAS,WAAW,MAAM,MAAM;AAC3C,cAAI,QAAQ,UAAU,UAAU;AAC9B,gBAAI,gBAAgB,SAAS,WAAW,qBAAqB,SAAS,WAAW,EAAE;AACnF,gBAAI,cAAc,MAAM,CAAC,EAAE,MAAM;AACjC,wBAAY,OAAO,WAAW,OAAO,GAAG,QAAQ;AAChD,yBAAa,cAAc,mBAAmB,WAAW;AAAA,UAC3D,OAAO;AACL,yBAAa,WAAW,mBAAmB,MAAM,CAAC,CAAC;AAAA,UACrD;AAAA,QACF;AACA,YAAI;AACJ,gBAAQ,YAAY;AAAA,UAClB,KAAK;AACH,wBAAY,IAAI,MAAM,IAAI,CAAC;AAC3B;AAAA,UACF,KAAK;AAAA,UACL;AACE,wBAAY,IAAI,MAAM,GAAG,CAAC;AAC1B;AAAA,QACJ;AACA,YAAI,QAAQ,UAAU,UAAU;AAC9B,oBAAU,OAAO,MAAM,CAAC,QAAQ;AAAA,QAClC;AACA,eAAO;AAAA,MACT;AACA,eAAS,6BAA6B,UAAU,OAAO,SAAS;AAC9D,YAAI,aAAa,SAAS;AAC1B,YAAI;AACJ,YAAI;AACJ,YAAI,CAAC,SAAS,YAAY;AACxB,cAAI,WAAW,IAAI,MAAM,MAAM,SAAS,CAAC,EAAE,GAAG;AAC5C,yBAAa;AAAA,UACf,OAAO;AACL,yBAAa;AAAA,UACf;AAAA,QACF,OAAO;AACL,qBAAW,SAAS,WAAW,MAAM,MAAM;AAC3C,cAAI,QAAQ,UAAU,UAAU;AAC9B,gBAAI,gBAAgB,SAAS,WAAW,qBAAqB,SAAS,WAAW,EAAE;AACnF,gBAAI,cAAc,MAAM,MAAM,SAAS,CAAC,EAAE,MAAM;AAChD,wBAAY,OAAO,WAAW,OAAO,GAAG,QAAQ;AAChD,yBAAa,cAAc,mBAAmB,WAAW;AAAA,UAC3D,OAAO;AACL,yBAAa,WAAW,mBAAmB,MAAM,MAAM,SAAS,CAAC,CAAC;AAAA,UACpE;AAAA,QACF;AACA,YAAI;AACJ,gBAAQ,YAAY;AAAA,UAClB,KAAK;AACH,wBAAY,IAAI,MAAM,IAAI,CAAC;AAC3B;AAAA,UACF,KAAK;AAAA,UACL;AACE,wBAAY,IAAI,MAAM,GAAG,CAAC;AAC1B;AAAA,QACJ;AACA,YAAI,QAAQ,UAAU,UAAU;AAC9B,oBAAU,OAAO,MAAM,CAAC,QAAQ;AAAA,QAClC;AACA,eAAO;AAAA,MACT;AACA,eAAS,2BAA2B,UAAU,OAAO,SAAS;AAC5D,YAAI,aAAa,SAAS;AAC1B,YAAI;AACJ,YAAI;AACJ,YAAI,CAAC,SAAS,YAAY;AACxB,cAAI,WAAW,IAAI,MAAM,CAAC,EAAE,GAAG;AAC7B,yBAAa;AAAA,UACf,OAAO;AACL,yBAAa;AAAA,UACf;AAAA,QACF,OAAO;AACL,qBAAW,SAAS,WAAW,MAAM,MAAM;AAC3C,cAAI,QAAQ,UAAU,UAAU;AAC9B,gBAAI,gBAAgB,SAAS,WAAW,qBAAqB,SAAS,WAAW,EAAE;AACnF,gBAAI,cAAc,MAAM,CAAC,EAAE,MAAM;AACjC,wBAAY,OAAO,WAAW,OAAO,GAAG,QAAQ;AAChD,yBAAa,cAAc,mBAAmB,WAAW;AAAA,UAC3D,OAAO;AACL,yBAAa,WAAW,mBAAmB,MAAM,CAAC,CAAC;AAAA,UACrD;AAAA,QACF;AACA,YAAI;AACJ,gBAAQ,YAAY;AAAA,UAClB,KAAK;AACH,wBAAY,IAAI,MAAM,GAAG,EAAE;AAC3B;AAAA,UACF,KAAK;AAAA,UACL;AACE,wBAAY,IAAI,MAAM,GAAG,CAAC;AAC1B;AAAA,QACJ;AACA,YAAI,QAAQ,UAAU,UAAU;AAC9B,oBAAU,OAAO,MAAM,CAAC,QAAQ;AAAA,QAClC;AACA,eAAO;AAAA,MACT;AACA,eAAS,2BAA2B,UAAU,OAAO,SAAS;AAC5D,YAAI,aAAa,SAAS;AAC1B,YAAI;AACJ,YAAI;AACJ,YAAI,CAAC,SAAS,YAAY;AACxB,cAAI,WAAW,IAAI,MAAM,MAAM,SAAS,CAAC,EAAE,GAAG;AAC5C,yBAAa;AAAA,UACf,OAAO;AACL,yBAAa;AAAA,UACf;AAAA,QACF,OAAO;AACL,qBAAW,SAAS,WAAW,MAAM,MAAM;AAC3C,cAAI,QAAQ,UAAU,UAAU;AAC9B,gBAAI,gBAAgB,SAAS,WAAW,qBAAqB,SAAS,WAAW,EAAE;AACnF,gBAAI,cAAc,MAAM,MAAM,SAAS,CAAC,EAAE,MAAM;AAChD,wBAAY,OAAO,WAAW,OAAO,GAAG,QAAQ;AAChD,yBAAa,cAAc,mBAAmB,WAAW;AAAA,UAC3D,OAAO;AACL,yBAAa,WAAW,mBAAmB,MAAM,MAAM,SAAS,CAAC,CAAC;AAAA,UACpE;AAAA,QACF;AACA,YAAI;AACJ,gBAAQ,YAAY;AAAA,UAClB,KAAK;AACH,wBAAY,IAAI,MAAM,GAAG,EAAE;AAC3B;AAAA,UACF,KAAK;AAAA,UACL;AACE,wBAAY,IAAI,MAAM,GAAG,CAAC;AAC1B;AAAA,QACJ;AACA,YAAI,QAAQ,UAAU,UAAU;AAC9B,oBAAU,OAAO,MAAM,CAAC,QAAQ;AAAA,QAClC;AACA,eAAO;AAAA,MACT;AACA,eAAS,uBAAuB,UAAU,OAAO,SAAS;AACxD,YAAI,aAAa,SAAS;AAC1B,YAAI;AACJ,YAAI;AACJ,YAAI,CAAC,SAAS,YAAY;AACxB,uBAAa,WAAW,mBAAmB,MAAM,CAAC,CAAC;AAAA,QACrD,OAAO;AACL,qBAAW,SAAS,WAAW,MAAM,MAAM;AAC3C,cAAI,QAAQ,UAAU,UAAU;AAC9B,gBAAI,gBAAgB,SAAS,WAAW,qBAAqB,SAAS,WAAW,EAAE;AACnF,gBAAI,cAAc,MAAM,CAAC,EAAE,MAAM;AACjC,wBAAY,OAAO,WAAW,OAAO,GAAG,QAAQ;AAChD,yBAAa,cAAc,mBAAmB,WAAW;AAAA,UAC3D,OAAO;AACL,yBAAa,WAAW,mBAAmB,MAAM,CAAC,CAAC;AAAA,UACrD;AAAA,QACF;AACA,YAAI;AACJ,gBAAQ,YAAY;AAAA,UAClB,KAAK;AACH,wBAAY,IAAI,MAAM,GAAG,EAAE;AAC3B;AAAA,UACF,KAAK;AACH,wBAAY,IAAI,MAAM,GAAG,CAAC;AAC1B;AAAA,UACF,KAAK;AACH,wBAAY,IAAI,MAAM,GAAG,CAAC;AAC1B;AAAA,UACF,KAAK;AACH,wBAAY,IAAI,MAAM,IAAI,CAAC;AAC3B;AAAA,QACJ;AACA,YAAI,QAAQ,UAAU,UAAU;AAC9B,oBAAU,OAAO,MAAM,CAAC,QAAQ;AAAA,QAClC;AACA,eAAO;AAAA,MACT;AACA,eAAS,uBAAuB,UAAU,OAAO,SAAS;AACxD,YAAI,aAAa,SAAS;AAC1B,YAAI;AACJ,YAAI;AACJ,YAAI,CAAC,SAAS,YAAY;AACxB,uBAAa,WAAW,mBAAmB,MAAM,MAAM,SAAS,CAAC,CAAC;AAAA,QACpE,OAAO;AACL,qBAAW,SAAS,WAAW,MAAM,MAAM;AAC3C,cAAI,QAAQ,UAAU,UAAU;AAC9B,gBAAI,gBAAgB,SAAS,WAAW,qBAAqB,SAAS,WAAW,EAAE;AACnF,gBAAI,cAAc,MAAM,MAAM,SAAS,CAAC,EAAE,MAAM;AAChD,wBAAY,OAAO,WAAW,OAAO,GAAG,QAAQ;AAChD,yBAAa,cAAc,mBAAmB,WAAW;AAAA,UAC3D,OAAO;AACL,yBAAa,WAAW,mBAAmB,MAAM,MAAM,SAAS,CAAC,CAAC;AAAA,UACpE;AAAA,QACF;AACA,YAAI;AACJ,gBAAQ,YAAY;AAAA,UAClB,KAAK;AACH,wBAAY,IAAI,MAAM,GAAG,EAAE;AAC3B;AAAA,UACF,KAAK;AACH,wBAAY,IAAI,MAAM,GAAG,CAAC;AAC1B;AAAA,UACF,KAAK;AACH,wBAAY,IAAI,MAAM,GAAG,CAAC;AAC1B;AAAA,UACF,KAAK;AACH,wBAAY,IAAI,MAAM,IAAI,CAAC;AAC3B;AAAA,QACJ;AACA,YAAI,QAAQ,UAAU,UAAU;AAC9B,oBAAU,OAAO,MAAM,CAAC,QAAQ;AAAA,QAClC;AACA,eAAO;AAAA,MACT;AACA,eAAS,+BAA+B,UAAU,OAAO,SAAS;AAChE,eAAO,MAAM,CAAC,EAAE,WAAW,MAAM,CAAC,CAAC,EAAE,UAAU;AAAA,MACjD;AACA,eAAS,+BAA+B,UAAU,OAAO,SAAS;AAChE,YAAI0C,QAAO,MAAM,SAAS;AAC1B,eAAO,MAAMA,QAAO,CAAC,EAAE,WAAW,MAAMA,KAAI,CAAC,EAAE,UAAU;AAAA,MAC3D;AACA,eAAS,2BAA2B,UAAU,OAAO,SAAS;AAC5D,YAAI,aAAa,SAAS;AAC1B,YAAI,eAAe,WAAW,OAAO;AACrC,eAAO,MAAM,CAAC,EAAE,WAAW,YAAY,EAAE,UAAU;AAAA,MACrD;AACA,eAAS,2BAA2B,UAAU,OAAO,SAAS;AAC5D,YAAI,aAAa,SAAS;AAC1B,YAAI,eAAe,WAAW,OAAO;AACrC,eAAO,MAAM,MAAM,SAAS,CAAC,EAAE,WAAW,YAAY,EAAE,UAAU;AAAA,MACpE;AACA,eAAS,0BAA0B,UAAU,OAAO,WAAW,SAAS;AACtE,YAAI,QAAQ,iBAAiB;AAC3B,kBAAQ,QAAQ,iBAAiB;AAAA,YAC/B,KAAK,kBAAkB;AACrB,qBAAO,IAAI,MAAM,GAAG,EAAE;AAAA,YACxB,KAAK,kBAAkB;AACrB,qBAAO,IAAI,MAAM,GAAG,CAAC;AAAA,YACvB,KAAK,kBAAkB;AACrB,qBAAO,IAAI,MAAM,IAAI,CAAC;AAAA,YACxB,KAAK,kBAAkB;AACrB,qBAAO,IAAI,MAAM,GAAG,CAAC;AAAA,YACvB,KAAK,kBAAkB;AACrB,qBAAO,uBAAuB,UAAU,OAAO,OAAO;AAAA,YACxD,KAAK,kBAAkB;AACrB,qBAAO,+BAA+B,UAAU,OAAO,OAAO;AAAA,YAChE,KAAK,kBAAkB;AACrB,qBAAO,2BAA2B,UAAU,OAAO,OAAO;AAAA,YAC5D;AACE,qBAAO,QAAQ;AAAA,UACnB;AAAA,QACF;AACA,gBAAQ,WAAW;AAAA,UACjB,KAAK,aAAa;AAChB,mBAAO,6BAA6B,UAAU,OAAO,OAAO;AAAA,UAC9D,KAAK,aAAa;AAChB,mBAAO,2BAA2B,UAAU,OAAO,OAAO;AAAA,UAC5D,KAAK,aAAa;AAChB,mBAAO,+BAA+B,UAAU,OAAO,OAAO;AAAA,UAChE,KAAK,aAAa;AAChB,mBAAO,2BAA2B,UAAU,OAAO,OAAO;AAAA,UAC5D,KAAK,aAAa;AAAA,UAClB;AACE,mBAAO,uBAAuB,UAAU,OAAO,OAAO;AAAA,QAC1D;AAAA,MACF;AACA,eAAS,0BAA0B,UAAU,OAAO,WAAW,SAAS;AACtE,YAAI,QAAQ,iBAAiB;AAC3B,kBAAQ,QAAQ,iBAAiB;AAAA,YAC/B,KAAK,kBAAkB;AACrB,qBAAO,IAAI,MAAM,GAAG,EAAE;AAAA,YACxB,KAAK,kBAAkB;AACrB,qBAAO,IAAI,MAAM,GAAG,CAAC;AAAA,YACvB,KAAK,kBAAkB;AACrB,qBAAO,IAAI,MAAM,IAAI,CAAC;AAAA,YACxB,KAAK,kBAAkB;AACrB,qBAAO,IAAI,MAAM,GAAG,CAAC;AAAA,YACvB,KAAK,kBAAkB;AACrB,qBAAO,uBAAuB,UAAU,OAAO,OAAO;AAAA,YACxD,KAAK,kBAAkB;AACrB,qBAAO,+BAA+B,UAAU,OAAO,OAAO;AAAA,YAChE,KAAK,kBAAkB;AACrB,qBAAO,2BAA2B,UAAU,OAAO,OAAO;AAAA,YAC5D;AACE,qBAAO,QAAQ;AAAA,UACnB;AAAA,QACF;AACA,gBAAQ,WAAW;AAAA,UACjB,KAAK,aAAa;AAChB,mBAAO,6BAA6B,UAAU,OAAO,OAAO;AAAA,UAC9D,KAAK,aAAa;AAChB,mBAAO,2BAA2B,UAAU,OAAO,OAAO;AAAA,UAC5D,KAAK,aAAa;AAChB,mBAAO,+BAA+B,UAAU,OAAO,OAAO;AAAA,UAChE,KAAK,aAAa;AAChB,mBAAO,2BAA2B,UAAU,OAAO,OAAO;AAAA,UAC5D,KAAK,aAAa;AAAA,UAClB;AACE,mBAAO,uBAAuB,UAAU,OAAO,OAAO;AAAA,QAC1D;AAAA,MACF;AACA,eAAS,aAAa,QAAQ,OAAO;AACnC,YAAItC,OAAM,KAAK,IAAI,KAAK;AACxB,YAAIC,OAAM,KAAK,IAAI,KAAK;AACxB,YAAI,IAAID,OAAM,OAAO,IAAIC,OAAM,OAAO;AACtC,YAAI,IAAIA,OAAM,OAAO,IAAID,OAAM,OAAO;AACtC,eAAO,IAAI;AACX,eAAO,IAAI;AAAA,MACb;AACA,eAAS,oBAAoB,IAAI,IAAI;AACnC,YAAIA,OAAM,GAAG,IAAI,EAAE,KAAK,GAAG,UAAU,IAAI,GAAG,UAAU;AACtD,YAAIA,OAAM,IAAI;AACZ,UAAAA,OAAM;AAAA,QACR;AACA,YAAIA,OAAM,GAAG;AACX,UAAAA,OAAM;AAAA,QACR;AACA,eAAO,KAAK,KAAKA,IAAG;AAAA,MACtB;AACA,eAAS,YAAY,IAAI,IAAI;AAC3B,eAAO,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG;AAAA,MACjC;AACA,eAAS,uBAAuB,QAAQ,eAAe,eAAe,SAAS;AAC7E,YAAI,MAAM,QAAQ;AAClB,YAAI,QAAQ,QAAQ;AACpB,YAAI,YAAY,CAAC;AACjB,YAAI,WAAW,CAAC;AAChB,YAAI,mBAAmB,CAAC;AACxB,YAAI,IAAI,OAAO,SAAS;AACxB,iBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,oBAAU,CAAC,IAAI,OAAO,CAAC,EAAE,SAAS,OAAO,IAAI,CAAC,CAAC;AAAA,QACjD;AACA,iBAAS,CAAC,IAAI;AACd,iBAAS,CAAC,IAAI;AAGd,iBAAS,MAAM,GAAG,MAAM,GAAG,OAAO;AAChC,cAAI,SAAS;AACb,cAAI,SAAS;AACb,cAAI,QAAQ,GAAG;AACb,qBAAS,OAAO,MAAM,CAAC,EAAE,MAAM,EAAE,OAAO,SAAS,MAAM,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,EAAE,CAAC;AAAA,UAClF,OAAO;AACL,qBAAS,OAAO,MAAM,CAAC,EAAE,MAAM;AAAA,UACjC;AACA,cAAI,QAAQ,IAAI,GAAG;AACjB,qBAAS,OAAO,MAAM,CAAC,EAAE,MAAM,EAAE,OAAO,SAAS,MAAM,CAAC,EAAE,GAAG,SAAS,MAAM,CAAC,EAAE,CAAC;AAAA,UAClF,OAAO;AACL,qBAAS,OAAO,MAAM,CAAC,EAAE,MAAM;AAAA,UACjC;AACA,cAAI,KAAK,OAAO,WAAW,OAAO,GAAG,CAAC,EAAE,UAAU;AAClD,cAAI,KAAK,OAAO,WAAW,OAAO,GAAG,CAAC,EAAE,UAAU;AAClD,cAAI,SAAS,oBAAoB,IAAI,EAAE;AACvC,cAAI,OAAO,KAAK,KAAK,UAAU;AAC/B,cAAI,IAAI;AACR,cAAI,oBAAoB,YAAY,IAAI,EAAE;AAC1C,cAAI,oBAAoB;AACxB,8BAAoB,YAAY,OAAO,GAAG,EAAE,WAAW,OAAO,MAAM,CAAC,CAAC,GAAG,OAAO,GAAG,EAAE,WAAW,OAAO,MAAM,CAAC,CAAC,CAAC;AAChH,cAAI,oBAAoB,GAAG;AACzB,kBAAM,CAAC;AAAA,UACT;AACA,cAAI,SAAS,KAAK,KAAK,MAAM,MAAM,KAAK,oBAAoB,KAAK,MAAM,KAAK,oBAAoB,IAAI;AAClG,kBAAM,MAAM,KAAK;AAAA,UACnB;AACA,cAAI,GAAG,MAAM;AACb,uBAAa,GAAG,GAAG;AACnB,cAAI,KAAK,EAAE,MAAM;AACjB,cAAI,KAAK,EAAE,MAAM;AACjB,cAAI,eAAe,UAAU,MAAM,CAAC,IAAI;AACxC,cAAI,eAAe,UAAU,GAAG,IAAI;AACpC,aAAG,MAAM,cAAc,YAAY;AACnC,aAAG,MAAM,cAAc,YAAY;AACnC,mBAAS,GAAG,IAAI,CAAC,IAAI,EAAE;AAAA,QACzB;AAGA,iBAAS,MAAM,GAAG,MAAM,GAAG,OAAO;AAChC,cAAI,KAAK;AACT,cAAI,KAAK;AACT,cAAI,QAAQ,GAAG;AACb,iBAAK,OAAO,MAAM,CAAC,EAAE,WAAW,SAAS,GAAG,EAAE,IAAI,KAAK,SAAS,GAAG,EAAE,IAAI,GAAG;AAAA,UAC9E,OAAO;AACL,iBAAK,OAAO,MAAM,CAAC,EAAE,WAAW,SAAS,GAAG,EAAE,CAAC,EAAE,IAAI,KAAK,SAAS,GAAG,EAAE,CAAC,EAAE,IAAI,GAAG;AAAA,UACpF;AACA,cAAI,QAAQ,IAAI,GAAG;AACjB,iBAAK,OAAO,GAAG,EAAE,MAAM,EAAE,OAAO,SAAS,MAAM,CAAC,EAAE,IAAI,KAAK,SAAS,MAAM,CAAC,EAAE,IAAI,GAAG;AAAA,UACtF,OAAO;AACL,iBAAK,OAAO,GAAG,EAAE,WAAW,SAAS,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,KAAK,SAAS,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,GAAG;AAAA,UACxF;AACA,2BAAiB,GAAG,IAAI,CAAC,IAAI,OAAO,GAAG,GAAG,OAAO,MAAM,CAAC,GAAG,EAAE;AAAA,QAC/D;AACA,eAAO;AAAA,MACT;AAGA,eAAS,mBAAmB,QAAQ,SAAS;AAC3C,YAAI,MAAM,QAAQ;AAClB,YAAI,OAAO,IAAI,MAAM;AACrB,aAAK,IAAI,OAAO,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,MAAM,IAAI;AAC1D,aAAK,IAAI,OAAO,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,MAAM,IAAI;AAC1D,YAAI,OAAO,IAAI,MAAM;AACrB,aAAK,IAAI,OAAO,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,MAAM,IAAI;AAC1D,aAAK,IAAI,OAAO,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,MAAM,IAAI;AAC1D,eAAO,IAAI,MAAM,OAAO,CAAC,GAAG,MAAM,MAAM,OAAO,CAAC,CAAC;AAAA,MACnD;AACA,UAAI,aAAa;AAAA,QACf;AAAA,QACA;AAAA,QACA,QAAQ;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,UAAI,UAAU;AAAA,QACZ,OAAO,SAAS,MAAM;AAAA,QACtB,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,cAAc;AAAA,QACd,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,WAAW;AAAA,MACb;AAKA,UAAI,WAAW,SAAS,OAAO;AAAA,QAC7B,WAAW,WAAY;AACrB,cAAI,aAAa,SAAS,UAAU,UAAU,MAAM,IAAI,EAAE,MAAM,GAAG;AACnE,qBAAW,KAAK,MAAM;AACtB,iBAAO,WAAW,KAAK,GAAG;AAAA,QAC5B;AAAA,QACA,SAAS;AAAA,UACP,iBAAiB;AAAA,UACjB,iBAAiB;AAAA,UACjB,gBAAgB;AAAA,UAChB,iBAAiB;AAAA,UACjB,uBAAuB;AAAA,UACvB,gBAAgB;AAAA,QAClB;AAAA,QACA,aAAa;AAAA,QACb,iBAAiB;AAAA,QACjB,cAAc;AAAA,QACd,IAAI;AAAA,QACJ,WAAW;AAAA;AAAA,QAGX,SAAS;AAAA,QACT,kBAAkB;AAAA,QAClB,YAAY,WAAY;AACtB,mBAAS,UAAU,WAAW,MAAM,MAAM,SAAS;AAKnD,eAAK,cAAc,CAAC;AAGpB,eAAK,kBAAkB,CAAC;AAGxB,eAAK,eAAe,CAAC;AAGrB,eAAK,KAAK,CAAC;AAGX,eAAK,gBAAgB;AAAA,QACvB;AAAA,QACA,wBAAwB;AAAA,UACtB,QAAQ,CAAC,QAAQ,MAAM;AAAA,UACvB,OAAO,CAAC,QAAQ,MAAM;AAAA,UACtB,QAAQ,CAAC,QAAQ,MAAM;AAAA,UACvB,WAAW,CAAC,QAAQ,SAAS;AAAA,UAC7B,QAAQ,CAAC,QAAQ,MAAM;AAAA,UACvB,WAAW,CAAC,QAAQ,MAAM;AAAA,UAC1B,YAAY,CAAC,QAAQ,YAAY;AAAA,UACjC,QAAQ,CAAC,QAAQ,MAAM;AAAA,UACvB,aAAa,CAAC,QAAQ,MAAM;AAAA,UAC5B,UAAU,CAAC,QAAQ,UAAU,QAAQ,MAAM;AAAA,UAC3C,cAAc,CAAC,QAAQ,QAAQ;AAAA,UAC/B,QAAQ,CAAC,QAAQ,QAAQ,QAAQ,MAAM;AAAA,UACvC,QAAQ,CAAC,QAAQ,QAAQ,QAAQ,MAAM;AAAA,QACzC;AAAA,QACA,UAAU,CAAC,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,KAAK;AAAA,QACxE,iBAAiB;AAAA,QACjB,eAAe,SAAU,OAAO,KAAK;AACnC,kBAAQ,MAAM,CAAC;AACf,cAAI,KAAK,QAAQ,OAAO,QAAQ,MAAM,GAAG;AACvC,gBAAI,CAAC,KAAK,oBAAoB,QAAQ,GAAG;AACvC,qBAAO;AAAA,YACT;AACA,oBAAQ,KAAK,WAAW,OAAO,QAAQ,MAAM;AAAA,UAC/C;AACA,cAAI,KAAK,QAAQ,OAAO,QAAQ,MAAM,GAAG;AACvC,gBAAI,CAAC,KAAK,oBAAoB,QAAQ,GAAG;AACvC,qBAAO;AAAA,YACT;AACA,oBAAQ,KAAK,WAAW,OAAO,QAAQ,MAAM;AAAA,UAC/C;AACA,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,aAAa,IAAI;AACrB,cAAI,aAAa,IAAI;AACrB,cAAI,UAAU,cAAc,CAAC,MAAM,cAAc,UAAU,KAAK,cAAc,CAAC,MAAM,cAAc,UAAU,IAAI;AAE/G,mBAAO;AAAA,UACT;AACA,cAAI,KAAK,QAAQ,OAAO,QAAQ,MAAM,GAAG;AACvC,iBAAK,OAAO;AACZ,iBAAK,mBAAmB,IAAI;AAC5B,iBAAK,YAAY,GAAG;AACpB,oBAAQ,KAAK,WAAW,OAAO,CAAC,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,UAAU,QAAQ,QAAQ,QAAQ,OAAO,QAAQ,cAAc,QAAQ,SAAS,CAAC;AACzJ,mBAAO;AAAA,UACT;AACA,cAAI,qBAAqB;AACzB,cAAI,KAAK,QAAQ,OAAO,QAAQ,QAAQ,GAAG;AACzC,iBAAK,oBAAoB;AACzB,oBAAQ,KAAK,WAAW,OAAO,QAAQ,QAAQ;AAAA,UACjD;AACA,cAAI,QAAQ;AACZ,cAAI,QAAQ,MAAM;AAClB,cAAIO,cAAa,MAAM;AACvB,cAAI,eAAe,KAAK,QAAQ,OAAO,QAAQ,MAAM;AACrD,cAAI,oBAAoB,KAAK,QAAQ,OAAO,QAAQ,YAAY;AAChE,cAAI,cAAc;AAChB,iBAAK,eAAe,OAAOA,YAAW,QAAQ,GAAG;AACjD,oBAAQ,KAAK,WAAW,OAAO,QAAQ,MAAM;AAC7C,iCAAqB;AAAA,UACvB;AACA,cAAI,mBAAmB;AACrB,iBAAK,YAAY;AACjB,oBAAQ,KAAK,WAAW,OAAO,QAAQ,YAAY;AAAA,UACrD;AACA,cAAI,YAAY,KAAK,QAAQ,OAAO,QAAQ,MAAM;AAClD,cAAI,kBAAkB,KAAK,QAAQ,OAAO,QAAQ,SAAS;AAC3D,cAAI,aAAa,iBAAiB;AAChC,gBAAI,CAAC,WAAW;AAEd,mBAAK,WAAW;AAChB,mBAAK,UAAU;AAAA,YACjB,WAAW,IAAI,eAAe,MAAM,yBAAyB,IAAI,WAAW,GAAG;AAI7E,mBAAK,UAAU,IAAI,IAAI,IAAI,EAAE;AAAA,YAC/B,OAAO;AACL,mBAAK,OAAO;AAAA,YACd;AACA,iBAAK,YAAY,GAAG;AACpB,oBAAQ,KAAK,WAAW,OAAO,CAAC,QAAQ,QAAQ,QAAQ,OAAO,QAAQ,SAAS,CAAC;AACjF,2BAAe;AACf,gCAAoB;AACpB,iCAAqB;AAAA,UACvB;AACA,cAAI,cAAc;AAChB,iBAAK,qBAAqB;AAAA,UAC5B;AACA,cAAI,mBAAmB;AACrB,iBAAK,oBAAoB;AAAA,UAC3B;AACA,cAAI,oBAAoB;AACtB,iBAAK,mBAAmB;AAAA,UAC1B;AACA,cAAI,KAAK,QAAQ,OAAO,QAAQ,KAAK,GAAG;AACtC,iBAAK,YAAY,GAAG;AACpB,oBAAQ,KAAK,WAAW,OAAO,QAAQ,KAAK;AAAA,UAC9C;AACA,iBAAO;AAAA,QACT;AAAA,QACA,yBAAyB,SAAU,KAAK;AACtC,eAAK,cAAc,KAAK,QAAQ,QAAQ,MAAM,GAAG,GAAG;AAAA,QACtD;AAAA,QACA,wBAAwB,SAAU,KAAK;AACrC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,iBAAiB,KAAK,MAAM,SAAS,QAAQ;AACjD,cAAI,CAAC,gBAAgB;AACnB,mBAAO;AAAA,UACT;AAIA,cAAI,uBAAuB,OAAO,mBAAmB,KAAK;AAExD,gBAAI,YAAY,IAAI,qBAAqB,CAAC;AAC1C,gBAAI,aAAa,UAAU;AAC3B,gBAAI,aAAa,GAAG;AAElB,kBAAI,cAAc,CAAC,CAAC,eAAe,UAAU,CAAC,CAAC;AAC/C,kBAAI,aAAa;AACf,oBAAI,eAAe,GAAG;AAGpB,yBAAO,YAAY,OAAO,IAAI,aAAa;AAAA,gBAC7C,WAAW,UAAU,CAAC,MAAM,UAAU;AAEpC,yBAAO;AAAA,gBACT;AAAA,cACF;AAAA,YACF;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,gBAAgB,SAAU,OAAO,SAAS,KAAK;AAE7C,cAAI,KAAK,uBAAuB,GAAG,GAAG;AACpC,iBAAK,aAAa;AAAA,UACpB,OAAO;AACL,iBAAK,aAAa;AAAA,UACpB;AAAA,QACF;AAAA;AAAA;AAAA,QAIA,QAAQ,WAAY;AAClB,eAAK,IAAI,MAAM;AACf,eAAK,cAAc;AACnB,eAAK,KAAK,CAAC;AACX,eAAK,aAAa;AAGlB,eAAK,aAAa;AAClB,eAAK,OAAO;AACZ,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,OAAO,KAAK;AAChB,cAAI,SAAS,KAAK,IAAI,QAAQ,KAAK,KAAK;AACxC,cAAI,CAAC,QAAQ;AACX,kBAAM,IAAI,MAAM,+BAA+B;AAAA,UACjD;AACA,cAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,mBAAO,KAAK,iBAAiB,MAAM;AAAA,UACrC;AACA,cAAI,OAAO,WAAW,UAAU;AAC9B,mBAAO,KAAK,mBAAmB,MAAM;AAAA,UACvC;AACA,gBAAM,IAAI,MAAM,8BAA8B;AAAA,QAChD;AAAA,QACA,kBAAkB,SAAU,QAAQ;AAClC,cAAI,MAAM,KAAK,aAAa,QAAQ,KAAK,EAAE;AAE3C,eAAK,YAAY,IAAI;AAErB,eAAK,IAAI,OAAO,IAAI,QAAQ;AAAA,QAC9B;AAAA,QACA,oBAAoB,SAAU,QAAQ;AAMpC,cAAI,WAAWrD,GAAE,MAAM;AAEvB,cAAI,CAAC,MAAM,QAAQ,QAAQ,GAAG;AAC5B,uBAAW,CAAC,QAAQ;AAAA,UACtB;AAEA,cAAI2D,SAAQ,KAAK;AACjB,mBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,GAAG,KAAK;AAC/C,gBAAI,QAAQ,SAAS,CAAC;AACtB,gBAAIH,aAAY,MAAM,KAAK,OAAO;AAClC,gBAAIA,YAAW;AAEb,cAAAA,aAAY,sBAAsBA,UAAS;AAC3C,cAAAG,OAAM,EAAE,UAAUH,UAAS,CAAC,IAAI;AAAA,YAClC;AAAA,UACF;AAEA,eAAK,YAAY;AACjB,eAAK,oBAAoB;AACzB,eAAK,uBAAuB;AAC5B,eAAK,IAAI,OAAO,QAAQ;AAAA,QAC1B;AAAA,QACA,iBAAiB,SAAUkE,cAAa;AACtC,cAAI,CAACA,cAAa;AAChB,mBAAO;AAAA,UACT;AACA,cAAI,MAAM,QAAQA,YAAW,GAAG;AAC9B,mBAAO,KAAK,aAAaA,cAAa,IAAI;AAAA,UAC5C;AACA,cAAI,OAAOA,iBAAgB,UAAU;AACnC,mBAAO,KAAK,sBAAsBA,YAAW;AAAA,UAC/C;AACA,gBAAM,IAAI,MAAM,oCAAoC;AAAA,QACtD;AAAA,QACA,uBAAuB,SAAUA,cAAa;AAC5C,cAAI,WAAW1H,GAAE0H,YAAW;AAC5B,cAAI,WAAW,SAAS,uBAAuB;AAC/C,cAAI,CAAC,MAAM,QAAQ,QAAQ,GAAG;AAC5B,qBAAS,YAAY,SAAS,IAAI;AAAA,UACpC,OAAO;AACL,qBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,GAAG,KAAK;AAC/C,kBAAI,eAAe,SAAS,CAAC,EAAE;AAC/B,uBAAS,YAAY,YAAY;AAAA,YACnC;AAAA,UACF;AACA,iBAAO;AAAA,YACL;AAAA,YACA,WAAW,CAAC;AAAA,UACd;AAAA,QACF;AAAA;AAAA;AAAA,QAGA,uBAAuB,SAAU,QAAQ;AACvC,cAAI,CAAC,QAAQ;AACX,mBAAO;AAAA,UACT;AACA,cAAI,WAAW,OAAO;AACtB,cAAI,EAAE,OAAO,oBAAoB,qBAAqB,CAAC,OAAO,SAAS,cAAc,GAAG;AACtF,kBAAM,IAAI,MAAM,qCAAqC;AAAA,UACvD;AACA,cAAI;AACJ,cAAI,aAAa,SAAS;AAC1B,cAAI,WAAW,SAAS,KAAK,WAAW,CAAC,EAAE,SAAS,YAAY,MAAM,KAAK;AAGzE,oBAAQ1H,GAAE,GAAG,EAAE,OAAO,QAAQ;AAAA,UAChC,OAAO;AACL,oBAAQA,GAAE,WAAW,CAAC,CAAC;AAAA,UACzB;AACA,gBAAM,SAAS,OAAO;AACtB,iBAAO;AAAA,YACL,MAAM,MAAM;AAAA,YACZ,WAAW,OAAO;AAAA,UACpB;AAAA,QACF;AAAA,QACA,cAAc,WAAY;AACxB,cAAI2D,SAAQ,KAAK;AACjB,cAAI,UAAUA,OAAM;AACpB,cAAI,aAAa,KAAK,cAAc,CAAC;AACrC,cAAI,iBAAiB,KAAK,kBAAkB,CAAC;AAC7C,cAAI,QAAQ,KAAK;AACjB,cAAI,SAAS,MAAM,WAAW,UAAU,CAAC;AACzC,cAAI,cAAc,OAAO;AACzB,cAAI,gBAAgB,GAAG;AACrB,gBAAI,SAAS;AACX,sBAAQ,OAAO;AAAA,YACjB;AACA,mBAAO;AAAA,UACT;AACA,cAAI,SAAS;AACX,oBAAQ,MAAM;AAAA,UAChB,OAAO;AAGL,sBAAUA,OAAM,SAAS3D,GAAE,GAAG,EAAE,SAAS,QAAQ;AACjD,gBAAI,KAAK,QAAQ,aAAa;AAC5B,sBAAQ,SAAS,mBAAmB,OAAO,MAAM,WAAW,CAAC,CAAC;AAC9D,sBAAQ,KAAK,YAAY,MAAM,EAAE;AAAA,YACnC;AAAA,UACF;AACA,mBAAS,IAAI,GAAG,IAAI,aAAa,KAAK;AACpC,gBAAI,QAAQ,OAAO,CAAC;AACpB,gBAAI0H,eAAc,KAAK,sBAAsB,KAAK,gBAAgB,MAAM,MAAM,CAAC;AAC/E,gBAAI;AACJ,gBAAI;AACJ,gBAAIA,cAAa;AACf,0BAAYA,aAAY;AACxB,0BAAYA,aAAY;AAAA,YAC1B,OAAO;AACL,kBAAI,sBAAsB,MAAM,UAAU;AAC1C,kBAAI,4BAA4B,KAAK,sBAAsB,KAAK,gBAAgB,oBAAoB,MAAM,CAAC;AAC3G,kBAAI,eAAe,MAAM,iBAAiB;AAC1C,kBAAI,qBAAqB,KAAK,sBAAsB,KAAK,gBAAgB,aAAa,MAAM,CAAC;AAC7F,kBAAI,gBAAgB,sBAAsB;AAC1C,0BAAY,cAAc;AAC1B,0BAAY,cAAc;AAAA,YAC5B;AACA,sBAAU,aAAa,aAAa,CAAC;AACrC,oBAAQ,OAAO,SAAS;AACxB,uBAAW,CAAC,IAAI;AAEhB,gBAAI,eAAe,KAAK;AACxB,gBAAI,UAAU,YAAY,GAAG;AAC3B,oBAAM,IAAI,MAAM,8CAA8C;AAAA,YAChE;AACA,sBAAU,YAAY,IAAI;AAC1B,2BAAe,CAAC,IAAI;AAAA,UACtB;AACA,cAAI,CAAC,QAAQ,OAAO,GAAG;AACrB,iBAAK,YAAY;AAAA,UACnB;AACA,eAAK,aAAa;AAClB,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,WAAY;AACvB,cAAI,MAAM;AACV,cAAI,KAAK,IAAI;AACb,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,IAAI;AAChB,cAAI,KAAK,IAAI;AACb,cAAI,UAAU,IAAI;AAClB,cAAI,UAAU,GAAG;AACjB,cAAI,CAAC,WAAW,CAAC,MAAM,UAAU,GAAG;AAClC;AAAA,UACF;AACA,cAAI,OAAO,QAAQ;AACnB,cAAI,QAAQ,aAAa;AACvB,kBAAM,aAAa,QAAQ,WAAW,EAAE,iBAAiB,MAAM,MAAM,IAAI,GAAG,CAAC;AAAA,UAC/E,OAAO;AACL,gBAAI,KAAK,eAAe,IAAI;AAC1B,iBAAG,YAAY,IAAI;AAAA,YACrB;AAAA,UACF;AAAA,QACF;AAAA,QACA,eAAe,WAAY;AACzB,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,KAAK,IAAI;AACb,cAAI,CAAC,IAAI;AACP;AAAA,UACF;AACA,cAAI,UAAU,GAAG;AACjB,cAAI,WAAW,QAAQ,aAAa;AAClC,oBAAQ,OAAO;AAAA,UACjB;AAAA,QACF;AAAA,QACA,eAAe,SAAU,YAAY,UAAU;AAC7C,cAAI,YAAY,KAAK,YAAY,UAAU;AAC3C,cAAI,CAAC,WAAW;AACd,mBAAO;AAAA,UACT;AACA,cAAI,iBAAiB,KAAK,gBAAgB,UAAU;AACpD,cAAI,MAAM,KAAK,eAAe,UAAU,WAAW,cAAc;AACjE,cAAI,OAAO,IAAI,CAAC;AAChB,cAAI,SAAS,OAAQ,QAAO;AAC5B,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,kBAAkB,SAAU,iBAAiB,YAAY,mBAAmB,0BAA0B;AACpG,cAAI,eAAe,MAAM;AACvB,mBAAO;AAAA,UACT;AACA,cAAI,eAAe,QAAW;AAC5B,gBAAI,sBAAsB,MAAM;AAC9B,qBAAO;AAAA,YACT;AACA,gBAAI,sBAAsB,QAAW;AACnC,kBAAI,iBAAiB;AACnB,uBAAO;AAAA,cACT;AACA,qBAAO;AAAA,YACT;AACA,gBAAI,iBAAiB;AACnB,qBAAO;AAAA,YACT;AACA,mBAAO,MAAM,CAAC,GAAG,0BAA0B,iBAAiB;AAAA,UAC9D;AACA,cAAI,iBAAiB;AACnB,mBAAO,MAAM,CAAC,GAAG,mBAAmB,UAAU;AAAA,UAChD;AACA,iBAAO,MAAM,CAAC,GAAG,0BAA0B,mBAAmB,UAAU;AAAA,QAC1E;AAAA;AAAA;AAAA,QAGA,iBAAiB,SAAU,WAAW,kBAAkB;AACtD,cAAI,cAAc,MAAM;AACtB,mBAAO;AAAA,UACT;AACA,cAAI,cAAc,QAAW;AAC3B,gBAAI,qBAAqB,MAAM;AAC7B,qBAAO;AAAA,YACT;AACA,gBAAI,qBAAqB,QAAW;AAClC,qBAAO;AAAA,YACT;AACA,mBAAO;AAAA,UACT;AACA,iBAAO,MAAM,CAAC,GAAG,kBAAkB,SAAS;AAAA,QAC9C;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,CAAC,KAAK,GAAG,QAAQ;AACnB,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,KAAK;AACjB,cAAI,SAAS,MAAM,IAAI,QAAQ,KAAK,CAAC;AACrC,cAAI,eAAe,KAAK,IAAI,WAAW;AACvC,cAAI,sBAAsB,MAAM,UAAU;AAC1C,cAAI,2BAA2B,oBAAoB;AACnD,cAAI,eAAe,MAAM,iBAAiB;AAC1C,cAAI,qBAAqB,aAAa;AACtC,cAAI,oBAAoB,aAAa;AACrC,cAAI,mBAAmB,aAAa;AACpC,mBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,IAAI,GAAG,KAAK;AAC7C,gBAAI,YAAY,KAAK,YAAY,CAAC;AAClC,sBAAU,aAAa,UAAU,eAAe,SAAS,SAAS;AAClE,gBAAI,YAAY,KAAK,gBAAgB,CAAC;AACtC,gBAAI,QAAQ,OAAO,CAAC;AACpB,gBAAIA,eAAc,MAAM;AACxB,gBAAI,aAAa,MAAM;AACvB,gBAAI,YAAY,MAAM;AACtB,gBAAI,QAAQ,KAAK,iBAAiBA,gBAAe,oBAAoB,YAAY,mBAAmB,wBAAwB;AAC5H,gBAAI,OAAO,KAAK,gBAAgB,WAAW,gBAAgB;AAC3D,iBAAK,2BAA2B,WAAW,OAAO;AAAA,cAChD,UAAU,IAAI,KAAK,IAAI;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,UACH;AACA,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,WAAY;AACvB,cAAI,CAAC,KAAK,GAAG,WAAW;AACtB,mBAAO;AAAA,UACT;AAOA,cAAI,SAAS,EAAE,KAAK,GAAG,UAAU,IAAI,EAAE,MAAM;AAC7C,cAAI,eAAe,SAAS,KAAK,MAAM,IAAI,YAAY,KAAK,KAAK,MAAM,UAAU;AACjF,cAAI,OAAO1H,GAAE,aAAa,CAAC;AAC3B,iBAAO,OAAO,KAAK,IAAI;AAGvB,eAAK,aAAa;AAIlB,cAAI,KAAK,QAAQ,iBAAiB;AAChC,gBAAI;AACJ,gBAAI,KAAK,MAAM,IAAI,kBAAkB,KAAK,KAAK,MAAM,kBAAkB;AACrE,6BAAe,SAAS,KAAK,MAAM,IAAI,kBAAkB,KAAK,KAAK,MAAM,gBAAgB;AACzF,sBAAQA,GAAE,aAAa,CAAC;AAAA,YAC1B,OAAO;AACL,sBAAQ,KAAK,MAAM;AAAA,YACrB;AACA,mBAAO,OAAO,MAAM,IAAI;AACxB,iBAAK,cAAc;AAAA,UACrB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,WAAY;AAC/B,cAAI,CAAC,KAAK,GAAG,gBAAgB;AAC3B,mBAAO;AAAA,UACT;AACA,cAAI,kBAAkB,EAAE,KAAK,GAAG,eAAe,IAAI,EAAE,MAAM;AAK3D,cAAI,iBAAiB,SAAS,KAAK,MAAM,IAAI,cAAc,KAAK,KAAK,MAAM,YAAY;AACvF,eAAK,MAAM,SAAS,EAAE,QAAQ,SAAU,QAAQ,KAAK;AACnD,4BAAgB,OAAOA,GAAE,eAAe,OAAO;AAAA,cAC7C;AAAA,YACF,GAAG,MAAM,CAAC,CAAC,EAAE,IAAI;AAAA,UACnB,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,QACA,wBAAwB,WAAY;AAElC,cAAI,CAAC,KAAK,GAAG,kBAAkB;AAC7B,mBAAO;AAAA,UACT;AACA,cAAI,oBAAoB,EAAE,KAAK,GAAG,iBAAiB,IAAI;AACvD,4BAAkB,MAAM;AAKxB,cAAI,iBAAiB,SAAS,KAAK,MAAM,IAAI,iBAAiB,KAAK,KAAK,MAAM,eAAe;AAC7F,eAAK,GAAG,kBAAkBA,GAAE,eAAe;AAAA,YACzC,KAAK;AAAA,UACP,CAAC,CAAC;AACF,eAAK,GAAG,kBAAkBA,GAAE,eAAe;AAAA,YACzC,KAAK;AAAA,UACP,CAAC,CAAC;AACF,4BAAkB,OAAO,KAAK,GAAG,gBAAgB,MAAM,KAAK,GAAG,gBAAgB,IAAI;AACnF,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,+BAA+B,SAAU,KAAK;AAC5C,cAAI,qBAAqB;AACzB,cAAI,OAAO,KAAK;AAChB,cAAI,WAAW,KAAK,SAAS;AAC7B,cAAI,cAAc,CAAC,KAAK,YAAY,EAAE,OAAO,UAAU,CAAC,KAAK,YAAY,CAAC;AAC1E,cAAI,iBAAiB,YAAY;AAGjC,cAAI,WAAW,IAAI,SAAS,WAAW;AACvC,mBAAS,SAAS;AAAA,YAChB,WAAW;AAAA,UACb,CAAC;AACD,cAAI,iBAAiB,SAAS,OAAO,IAAI,SAAUkB,QAAO;AACxD,mBAAOA,OAAM,OAAO;AAAA,UACtB,CAAC;AACD,cAAI,oBAAoB,eAAe;AAGvC,cAAI,mBAAmB,mBAAmB;AACxC,mBAAO;AAAA,UACT;AAIA,eAAK,SAAS,eAAe,MAAM,GAAG,oBAAoB,CAAC,GAAG,GAAG;AACjE,iBAAO,iBAAiB;AAAA,QAC1B;AAAA,QACA,6BAA6B,WAAY;AACvC,cAAIyC,SAAQ,KAAK;AACjB,cAAIA,OAAM,YAAY;AACpB,YAAAA,OAAM,WAAW,KAAK,KAAK,KAAK,wBAAwB,CAAC;AAAA,UAC3D;AACA,cAAIA,OAAM,gBAAgB;AACxB,YAAAA,OAAM,eAAe,KAAK,KAAK,KAAK,wBAAwB,CAAC;AAAA,UAC/D;AACA,cAAIA,OAAM,gBAAgBA,OAAM,cAAc;AAC5C,iBAAK,8BAA8BA,OAAM,cAAcA,OAAM,YAAY;AAAA,UAC3E;AAAA,QACF;AAAA,QACA,YAAY,SAAU,MAAM;AAC1B,kBAAQ,MAAM;AAAA,YACZ,KAAK;AACH,qBAAO,KAAK,cAAc;AAAA,YAC5B,KAAK;AACH,qBAAO,KAAK,cAAc;AAAA,YAC5B;AACE,oBAAM,IAAI,MAAM,wCAAwC;AAAA,UAC5D;AAAA,QACF;AAAA,QACA,cAAc,SAAU,MAAM;AAC5B,kBAAQ,MAAM;AAAA,YACZ,KAAK;AACH,qBAAO,IAAI,MAAM,KAAK,YAAY;AAAA,YACpC,KAAK;AACH,qBAAO,IAAI,MAAM,KAAK,YAAY;AAAA,YACpC;AACE,oBAAM,IAAI,MAAM,wCAAwC;AAAA,UAC5D;AAAA,QACF;AAAA,QACA,uBAAuB,SAAU,MAAM;AACrC,kBAAQ,MAAM;AAAA,YACZ,KAAK;AACH,qBAAO,IAAI,MAAM,KAAK,WAAW;AAAA,YACnC,KAAK;AACH,qBAAO,IAAI,MAAM,KAAK,WAAW;AAAA,YACnC;AACE,oBAAM,IAAI,MAAM,wCAAwC;AAAA,UAC5D;AAAA,QACF;AAAA,QACA,cAAc,SAAU,MAAM;AAC5B,kBAAQ,MAAM;AAAA,YACZ,KAAK;AACH,kBAAI,aAAa,KAAK;AACtB,kBAAI,CAAC,YAAY;AACf;AAAA,cACF;AACA,qBAAO,KAAK,gBAAgB,WAAW;AAAA,YACzC,KAAK;AACH,kBAAI,aAAa,KAAK;AACtB,kBAAI,CAAC,YAAY;AACf;AAAA,cACF;AACA,qBAAO,KAAK,gBAAgB,WAAW;AAAA,YACzC;AACE,oBAAM,IAAI,MAAM,wCAAwC;AAAA,UAC5D;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAIA,QAAQ,WAAY;AAClB,eAAK,YAAY;AACjB,eAAK,WAAW;AAChB,eAAK,UAAU;AACf,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAC3B,cAAI,OAAO,OAAQ,MAAK;AACxB,cAAI,OAAO,OAAQ,MAAK;AACxB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAIjB,QAAO,IAAI;AACf,cAAI,CAAC,SAAS,CAACA,OAAM;AACnB;AAAA,UACF;AAEA,cAAI,WAAW,IAAI,SAAS,KAAK;AACjC,mBAAS,UAAU,IAAI,EAAE;AACzB,eAAK,QAAQ,SAAS;AAEtB,eAAK,2BAA2B,IAAI,EAAE;AAEtC,UAAAA,MAAK,UAAU,IAAI,EAAE;AACrB,eAAK,UAAU;AAAA,QACjB;AAAA,QACA,WAAW,SAAS,YAAY;AAC9B,cAAI,MAAM;AACV,cAAI,KAAK,IAAI;AACb,cAAI,QAAQ,IAAI;AAChB,cAAI,YAAY,IAAI;AACpB,eAAK,gBAAgB;AAErB,eAAK,2BAA2B,IAAI,MAAM,KAAK,GAAG;AAAA,YAChD;AAAA,UACF,CAAC;AAED,eAAK,4BAA4B;AAEjC,eAAK,qBAAqB;AAC1B,eAAK,oBAAoB;AACzB,eAAK,uBAAuB;AAK5B,eAAK,QAAQ,gBAAgB;AAAA,QAC/B;AAAA,QACA,aAAa,WAAY;AACvB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,WAAW,MAAM,SAAS;AAE9B,cAAIiF,WAAU,KAAK,YAAY,QAAQ;AACvC,cAAI,eAAe,KAAK,eAAeA,SAAQ;AAC/C,cAAI,eAAe,KAAK,eAAeA,SAAQ;AAE/C,cAAI,QAAQ,KAAK,UAAU,QAAQ;AACnC,eAAK,QAAQ;AAEb,cAAIC,oBAAmB,KAAK,qBAAqB,OAAO,cAAc,YAAY;AAClF,eAAK,cAAcA,kBAAiB;AACpC,eAAK,cAAcA,kBAAiB;AAAA,QACtC;AAAA,QACA,YAAY,WAAY;AACtB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,cAAc,IAAI;AACtB,cAAI,cAAc,IAAI;AAEtB,cAAI,eAAe,KAAK,iBAAiB,OAAO,aAAa,WAAW;AAExE,cAAIlF,QAAO,KAAK,SAAS,OAAO,aAAa,UAAU,aAAa,aAAa,UAAU,WAAW;AACtG,eAAK,OAAOA;AAAA,QACd;AAAA,QACA,kBAAkB,SAAU,OAAO,aAAa,aAAa;AAC3D,cAAI,gBAAgB,MAAM,CAAC;AAC3B,cAAI,eAAe,MAAM,MAAM,SAAS,CAAC;AAOzC,cAAIiB,SAAQ,KAAK;AAEjB,cAAI,mBAAmB;AACvB,cAAI,KAAK,GAAG,cAAc;AACxB,YAAAA,OAAM,aAAaA,OAAM,cAAc,KAAK,GAAG,aAAa,QAAQ;AACpE,gCAAoB,MAAM,WAAW,EAAE,KAAK,iBAAiB,aAAaA,OAAM,WAAW,QAAQ,KAAK,GAAG,aAAa,MAAM,EAAE,KAAK,EAAE,EAAE,MAAM;AAAA,UACjJ;AACA,cAAI,KAAK,GAAG,cAAc;AACxB,YAAAA,OAAM,aAAaA,OAAM,cAAc,KAAK,GAAG,aAAa,QAAQ;AACpE,gCAAoB,MAAM,WAAW,EAAE,KAAK,gBAAgB,aAAaA,OAAM,WAAW,QAAQ,KAAK,GAAG,aAAa,MAAM,EAAE,KAAK,EAAE,EAAE,MAAM;AAAA,UAChJ;AAGA,UAAAA,OAAM,cAAc,qBAAqB,YAAY,MAAM;AAC3D,UAAAA,OAAM,cAAc,qBAAqB,YAAY,MAAM;AAC3D,iBAAO;AAAA,YACL,QAAQ;AAAA,YACR,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,QACA,oBAAoB,SAAU,cAAc,UAAU,eAAe,WAAW;AAC9E,cAAI,aAAa;AACjB,cAAI,gBAAgB;AACpB,cAAI,QAAQ,KAAK;AACjB,cAAI,WAAW,MAAM,IAAI,YAAY;AACrC,cAAI,YAAY,MAAM,IAAI,aAAa;AACvC,cAAI,YAAY,KAAK,WAAW,YAAY;AAC5C,cAAI,aAAa,KAAK,WAAW,aAAa;AAC9C,cAAI,cAAc,KAAK,aAAa,YAAY;AAChD,cAAI,eAAe,KAAK,aAAa,aAAa;AAGlD,cAAI,WAAW;AACb,gBAAI,UAAU;AACZ,+BAAiB,IAAI,MAAM,QAAQ;AAAA,YACrC,WAAW,YAAY;AACrB,+BAAiB;AAAA,YACnB,OAAO;AACL,+BAAiB,IAAI,MAAM,SAAS;AAAA,YACtC;AACA,0BAAc,KAAK,UAAU,SAAS,QAAQ,WAAW,aAAa,gBAAgB,YAAY;AAAA,UACpG,OAAO;AACL,0BAAc,IAAI,MAAM,QAAQ;AAAA,UAClC;AAGA,cAAI,YAAY;AACd,8BAAkB,IAAI,MAAM,aAAa,WAAW;AACpD,2BAAe,KAAK,UAAU,UAAU,QAAQ,YAAY,cAAc,iBAAiB,aAAa;AAAA,UAC1G,OAAO;AACL,2BAAe,IAAI,MAAM,SAAS;AAAA,UACpC;AACA,cAAI,MAAM,CAAC;AACX,cAAI,YAAY,IAAI;AACpB,cAAI,aAAa,IAAI;AACrB,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,SAAU,UAAU;AAC/B,cAAI,QAAQ,KAAK;AACjB,cAAI,cAAc,SAAS,CAAC;AAC5B,cAAI,aAAa,SAAS,SAAS,SAAS,CAAC;AAC7C,cAAI,MAAM,OAAO,EAAE,YAAY,CAAC,MAAM,OAAO,EAAE,UAAU;AAEvD,mBAAO,KAAK,mBAAmB,UAAU,YAAY,UAAU,WAAW;AAAA,UAC5E;AAGA,iBAAO,KAAK,mBAAmB,UAAU,aAAa,UAAU,UAAU;AAAA,QAC5E;AAAA,QACA,sBAAsB,SAAU,OAAO,cAAc,cAAc;AACjE,cAAI,gBAAgB,MAAM,CAAC;AAC3B,cAAI,eAAe,MAAM,MAAM,SAAS,CAAC;AACzC,cAAI,QAAQ,KAAK;AACjB,cAAI,YAAY,MAAM,IAAI,QAAQ;AAClC,cAAI,YAAY,MAAM,IAAI,QAAQ;AAClC,cAAI,aAAa,KAAK;AACtB,cAAI,aAAa,KAAK;AACtB,cAAI,eAAe,KAAK,MAAM;AAC9B,cAAI,cAAc;AAGlB,cAAI;AACJ,cAAI,cAAc,CAAC,WAAW,iBAAiB,KAAK,YAAY,GAAG;AACjE,2BAAe,KAAK,gBAAgB,WAAW;AAC/C,gBAAI,2BAA2B,UAAU,mBAAmB,aAAa;AACzE,gBAAI,iBAAiB,iBAAiB;AACtC,gBAAI,aAAa,IAAI,KAAK,gBAAgB,YAAY;AACtD,0BAAc,KAAK,mBAAmB,0BAA0B,YAAY,cAAc,YAAY,QAAQ;AAAA,UAChH,OAAO;AACL,0BAAc;AAAA,UAChB;AAEA,cAAI;AACJ,cAAI,cAAc,CAAC,WAAW,iBAAiB,KAAK,YAAY,GAAG;AACjE,2BAAe,KAAK,gBAAgB,WAAW;AAC/C,gBAAI,2BAA2B,UAAU,mBAAmB,aAAa;AACzE,gBAAI,iBAAiB,gBAAgB;AACrC,gBAAI,aAAa,IAAI,KAAK,gBAAgB,YAAY;AACtD,0BAAc,KAAK,mBAAmB,0BAA0B,YAAY,cAAc,YAAY,QAAQ;AAAA,UAChH,OAAO;AACL,0BAAc;AAAA,UAChB;AACA,iBAAO;AAAA,YACL,QAAQ;AAAA,YACR,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,QACA,WAAW,SAAU,WAAW,UAAU,QAAQ,KAAK,SAAS;AAC9D,cAAI,eAAe,SAAS,iBAAiB,MAAM;AACnD,cAAI,eAAe,KAAK,MAAM;AAC9B,cAAI,CAAC,WAAW;AACd,gBAAI,cAAc;AAChB,0BAAY,aAAa;AAAA,YAC3B,OAAO;AACL,kBAAI,aAAa,sBAAsB,KAAK,QAAQ,eAAe;AAKjE,4BAAY;AAAA,kBACV,MAAM;AAAA,gBACR;AAAA,cACF,OAAO;AACL,4BAAY,aAAa;AAAA,cAC3B;AAAA,YACF;AAAA,UACF;AACA,cAAI,CAAC,WAAW;AACd,kBAAM,IAAI,MAAM,kBAAkB;AAAA,UACpC;AACA,cAAI;AACJ,cAAI,OAAO,cAAc,YAAY;AACnC,uBAAW;AAAA,UACb,OAAO;AACL,gBAAI,aAAa,UAAU;AAC3B,gBAAI,kBAAkB,eAAe,wBAAwB;AAC7D,uBAAW,aAAa,eAAe,EAAE,UAAU;AACnD,gBAAI,OAAO,aAAa,YAAY;AAClC,oBAAM,IAAI,MAAM,qBAAqB,UAAU;AAAA,YACjD;AAAA,UACF;AACA,cAAI6D,UAAS,SAAS,KAAK,MAAM,UAAU,QAAQ,KAAK,UAAU,QAAQ,CAAC,GAAG,SAAS,IAAI;AAC3F,cAAI,CAACA,SAAQ;AACX,mBAAO,IAAI,MAAM;AAAA,UACnB;AACA,iBAAOA,QAAO,MAAM,KAAK,gBAAgB;AAAA,QAC3C;AAAA,QACA,oBAAoB,SAAU,oBAAoB,MAAM,QAAQrF,OAAM,SAAS;AAC7E,cAAI;AACJ,cAAIqF,UAASrF,MAAK;AAClB,cAAI,eAAe,KAAK,MAAM;AAG9B,cAAI,OAAO,aAAa,wBAAwB,YAAY;AAC1D,gBAAI,uBAAuB,WAAW,KAAK,KAAK,SAAY;AAC5D,8BAAkB,aAAa,oBAAoB,MAAM,MAAM,sBAAsBA,MAAK,OAAO,OAAO;AACxG,gBAAI,iBAAiB;AACnB,qBAAO;AAAA,YACT;AAAA,UACF;AACA,cAAI,CAAC,oBAAoB;AACvB,mBAAOqF;AAAA,UACT;AACA,cAAI;AACJ,cAAI,OAAO,uBAAuB,YAAY;AAC5C,gCAAoB;AAAA,UACtB,OAAO;AACL,gBAAI,sBAAsB,mBAAmB;AAC7C,gCAAoB,aAAa,yBAAyB,mBAAmB;AAC7E,gBAAI,OAAO,sBAAsB,YAAY;AAC3C,oBAAM,IAAI,MAAM,+BAA+B,mBAAmB;AAAA,YACpE;AAAA,UACF;AACA,4BAAkB,kBAAkB,KAAK,MAAMrF,OAAM,MAAM,QAAQ,mBAAmB,QAAQ,CAAC,GAAG,SAAS,IAAI;AAC/G,cAAI,CAAC,iBAAiB;AACpB,mBAAOqF;AAAA,UACT;AACA,iBAAO,gBAAgB,MAAM,KAAK,gBAAgB;AAAA,QACpD;AAAA,QACA,4BAA4B,SAAU,IAAI,IAAI;AAC5C,cAAI7D,SAAQ,KAAK;AACjB,UAAAA,OAAM,YAAY,OAAO,IAAI,EAAE;AAC/B,UAAAA,OAAM,YAAY,OAAO,IAAI,EAAE;AAC/B,eAAK,YAAY,OAAO,IAAI,EAAE;AAC9B,eAAK,YAAY,OAAO,IAAI,EAAE;AAC9B,eAAK,aAAa,OAAO,IAAI,EAAE;AAC/B,eAAK,aAAa,OAAO,IAAI,EAAE;AAAA,QACjC;AAAA;AAAA,QAEA,kCAAkC,WAAY;AAC5C,cAAI,QAAQ,KAAK;AACjB,cAAI,sBAAsB,MAAM,UAAU;AAC1C,cAAI,8BAA8B,oBAAoB;AACtD,cAAI,eAAe,MAAM,iBAAiB;AAC1C,cAAI,uBAAuB,KAAK,wBAAwB,aAAa,QAAQ;AAC7E,iBAAO,MAAM,CAAC,GAAG,6BAA6B,oBAAoB;AAAA,QACpE;AAAA;AAAA;AAAA,QAGA,yBAAyB,SAAU,eAAe;AAChD,cAAI,OAAO,kBAAkB,UAAU;AACrC,mBAAO;AAAA,cACL,UAAU;AAAA,cACV,QAAQ;AAAA,cACR,OAAO;AAAA,cACP,MAAM;AAAA,YACR;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,6BAA6B,SAAU,yBAAyB,gCAAgC;AAC9F,cAAI,4BAA4B,MAAM;AACpC,mBAAO;AAAA,UACT;AACA,cAAI,4BAA4B,QAAW;AACzC,gBAAI,mCAAmC,MAAM;AAC3C,qBAAO;AAAA,YACT;AACA,mBAAO;AAAA,UACT;AACA,iBAAO,MAAM,CAAC,GAAG,gCAAgC,uBAAuB;AAAA,QAC1E;AAAA,QACA,sBAAsB,WAAY;AAChC,cAAI,CAAC,KAAK,GAAG,QAAQ;AACnB,mBAAO;AAAA,UACT;AACA,cAAIjB,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AAKA,cAAI,QAAQ,KAAK;AACjB,cAAI,SAAS,MAAM,IAAI,QAAQ,KAAK,CAAC;AACrC,cAAI,CAAC,OAAO,QAAQ;AAClB,mBAAO;AAAA,UACT;AACA,cAAI,uBAAuB,KAAK,iCAAiC;AACjE,mBAAS,MAAM,GAAG,IAAI,OAAO,QAAQ,MAAM,GAAG,OAAO;AACnD,gBAAI,YAAY,KAAK,YAAY,GAAG;AACpC,gBAAI,CAAC,WAAW;AACd;AAAA,YACF;AACA,gBAAI,QAAQ,OAAO,GAAG;AACtB,gBAAI,gBAAgB,KAAK,wBAAwB,MAAM,QAAQ;AAC/D,gBAAI,WAAW,KAAK,4BAA4B,eAAe,oBAAoB;AACnF,gBAAI,uBAAuB,KAAK,8BAA8B,QAAQ;AACtE,sBAAU,aAAa,aAAa1C,GAAE,wBAAwB,oBAAoB,CAAC;AACnF,iBAAK,oBAAoB,GAAG;AAAA,UAC9B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,SAAUK,QAAO;AAIpC,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,kBAAkB,IAAI;AAC1B,cAAI,YAAY,gBAAgBA,MAAK;AACrC,cAAI,CAAC,WAAW;AACd;AAAA,UACF;AACA,mBAAS,YAAY,WAAW;AAC9B,gBAAI,QAAQ,UAAU,QAAQ;AAC9B,gBAAI8C,MAAK,MAAM;AACf,gBAAIA,OAAMA,OAAM,SAAS;AACvB,qBAAO,QAAQA,GAAE,EAAE;AAAA,YACrB;AAAA,UACF;AAAA,QACF;AAAA,QACA,qBAAqB,WAAY;AAC/B,cAAI,CAAC,KAAK,GAAG,WAAW;AACtB,mBAAO;AAAA,UACT;AAOA,cAAIvB,SAAQ;AACZ,cAAI,SAAS,KAAK,QAAQ;AAC1B,cAAIiG,oBAAmB,KAAK,oBAAoB;AAIhD,cAAI,CAAC,OAAO,MAAMA,iBAAgB,GAAG;AAEnC,gBAAIA,oBAAmB,KAAK,QAAQ,iBAAiB;AACnD,cAAAjG,SAAQ;AACR,wBAAU;AAAA,YACZ;AACA,gBAAI,eAAe,KAAK,iBAAiB,MAAM;AAC/C,iBAAK,WAAW,KAAK,aAAa,eAAe,aAAa,IAAI,OAAO,aAAa,IAAI,OAAOA,MAAK;AACtG,gBAAI,KAAK,QAAQ,mBAAmBiG,qBAAoB,KAAK,QAAQ,gBAAgB;AACnF,kBAAI,wBAAwB,KAAK,QAAQ,yBAAyB;AAClE,6BAAe,KAAK,iBAAiBA,oBAAmB,qBAAqB;AAC7E,mBAAK,YAAY,KAAK,aAAa,eAAe,aAAa,IAAI,OAAO,aAAa,IAAI,OAAOjG,MAAK;AACvG,mBAAK,YAAY,KAAK,WAAW,QAAQ;AAAA,YAC3C,WAAW,KAAK,QAAQ,iBAAiB;AACvC,mBAAK,YAAY,KAAK,WAAW,MAAM;AAAA,YACzC;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,wBAAwB,WAAY;AAClC,cAAI,CAAC,KAAK,GAAG,kBAAkB;AAC7B,mBAAO;AAAA,UACT;AAGA,cAAI,EAAE,IAAI,KAAK,GAAG,iBAAiB,MAAM,SAAS,MAAM,QAAQ;AAC9D,mBAAO;AAAA,UACT;AACA,cAAI,KAAK,KAAK,oBAAoB,IAAI,KAAK,QAAQ,kBAAkB,MAAK;AAC1E,eAAK,GAAG,gBAAgB,MAAM,EAAE;AAChC,eAAK,GAAG,gBAAgB,MAAM,EAAE;AAChC,eAAK,8BAA8B,KAAK,GAAG,iBAAiB,KAAK,GAAG,eAAe;AACnF,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,SAAU,SAAS;AACtC,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,IAAI;AAChB,cAAI,kBAAkB,UAAU;AAChC,cAAI,SAAS,MAAM,IAAI,OAAO;AAC9B,cAAI,QAAQ,UAAU,OAAO;AAC7B,cAAI,CAAC,OAAO;AAEV,iBAAK,eAAe,IAAI;AACxB,iBAAK,gBAAgB,OAAO;AAC5B,mBAAO;AAAA,UACT;AACA,cAAI,WAAW,MAAM,aAAa,KAAK;AACvC,cAAI,CAAC,UAAU;AACb,kBAAM,IAAI,MAAM,uBAAuB,UAAU,QAAQ;AAAA,UAC3D;AACA,cAAI,UAAU,SAAS,SAAS,KAAK;AACrC,cAAI,CAAC,SAAS;AAEZ,mBAAO;AAAA,UACT;AACA,eAAK,eAAe,IAAI;AACxB,eAAK,gBAAgB,OAAO;AAC5B,iBAAO;AAAA,QACT;AAAA,QACA,iBAAiB,SAAU,SAAS;AAClC,cAAI,oBAAoB,UAAU;AAClC,cAAI,UAAU,KAAK,WAAW,OAAO;AACrC,cAAI,SAAS;AACX,gBAAI,kBAAkB,QAAQ,qBAAqB,KAAK,MAAM,IAAI,OAAO,CAAC;AAC1E,gBAAI,oBAAoB,QAAQ,IAAI;AAClC,gCAAkB;AAAA,YACpB;AACA,iBAAK,iBAAiB,IAAI;AAAA,UAC5B,OAAO;AACL,iBAAK,iBAAiB,IAAI;AAAA,UAC5B;AAAA,QACF;AAAA,QACA,+BAA+B,SAAU,aAAa,aAAa;AAGjE,cAAI,QAAQ,QAAQ,KAAK,KAAK;AAC9B,cAAI,aAAa;AACf,wBAAY,uBAAuB,KAAK,aAAa,MAAM,CAAC,KAAK,KAAK,aAAa,KAAK,MAAM,KAAK;AAAA,UACrG;AACA,cAAI,aAAa;AACf,wBAAY,uBAAuB,KAAK,aAAa,MAAM,MAAM,SAAS,CAAC,KAAK,KAAK,aAAa,KAAK,MAAM,KAAK;AAAA,UACpH;AAAA,QACF;AAAA,QACA,2BAA2B,SAAU,KAAK;AACxC,iBAAO,KAAK,MAAM,MAAM,GAAG,EAAE,YAAY,CAAC;AAAA,QAC5C;AAAA,QACA,wBAAwB,SAAU,KAAK;AACrC,cAAI,gBAAgB,KAAK,0BAA0B,GAAG;AACtD,iBAAO,cAAc,SAAS;AAAA,QAChC;AAAA,QACA,uBAAuB,SAAU,KAAK;AACpC,cAAI,gBAAgB,KAAK,0BAA0B,GAAG;AACtD,iBAAO,cAAc;AAAA,QACvB;AAAA,QACA,8BAA8B,WAAY;AACxC,cAAI,eAAe,KAAK,MAAM,iBAAiB;AAC/C,cAAI,uBAAuB,aAAa,YAAY,CAAC;AACrD,iBAAO,qBAAqB;AAAA,QAC9B;AAAA;AAAA;AAAA,QAGA,yBAAyB,SAAU,mBAAmB,0BAA0B;AAC9E,cAAI,sBAAsB,MAAM;AAC9B,mBAAO;AAAA,UACT;AACA,cAAI,sBAAsB,QAAW;AACnC,gBAAI,6BAA6B,MAAM;AACrC,qBAAO;AAAA,YACT;AACA,mBAAO;AAAA,UACT;AACA,iBAAO,MAAM,CAAC,GAAG,0BAA0B,iBAAiB;AAAA,QAC9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAcA,UAAU,SAAU,IAAI,IAAI,IAAI,IAAI;AAElC,cAAI;AACJ,cAAI;AACJ,cAAI,aAAa;AACjB,cAAI;AACJ,cAAI,OAAO,OAAO,UAAU;AAE1B,qBAAS,GAAG;AACZ,qBAAS,GAAG;AACZ,gBAAI,OAAO,OAAO,UAAU;AAE1B,2BAAa;AACb,yBAAW;AAAA,YACb,OAAO;AAEL,yBAAW;AAAA,YACb;AAAA,UACF,OAAO;AAEL,qBAAS;AACT,qBAAS;AACT,gBAAI,OAAO,OAAO,UAAU;AAE1B,2BAAa;AACb,yBAAW;AAAA,YACb,OAAO;AAEL,yBAAW;AAAA,YACb;AAAA,UACF;AAGA,cAAI,2BAA2B,KAAK,6BAA6B;AACjE,cAAI,oBAAoB;AACxB,cAAI,eAAe,KAAK,wBAAwB,mBAAmB,wBAAwB;AAG3F,cAAI,QAAQ;AAAA,YACV,UAAU,KAAK,iBAAiB,QAAQ,QAAQ,YAAY,YAAY;AAAA,UAC1E;AACA,cAAI,MAAM;AACV,eAAK,MAAM,YAAY,KAAK,OAAO,QAAQ;AAC3C,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,WAAW,SAAU,GAAG,GAAG,KAAK;AAE9B,cAAI,kBAAkB,OAAO,MAAM;AACnC,cAAI,SAAS,kBAAkB,EAAE,IAAI;AACrC,cAAI,SAAS,kBAAkB,EAAE,IAAI;AACrC,cAAI,WAAW,kBAAkB,IAAI;AACrC,cAAI,SAAS;AAAA,YACX,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AACA,cAAI,MAAM,KAAK,eAAe,QAAQ,MAAM;AAC5C,eAAK,MAAM,aAAa,KAAK,QAAQ,QAAQ;AAC7C,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOA,WAAW,SAAU,OAAO,KAAK,UAAU;AACzC,mBAAS,eAAekG,SAAQnC,WAAU;AACxC,mBAAO,WAAY;AACjB,cAAAmC,QAAO,OAAO;AACd,kBAAI,OAAOnC,cAAa,YAAY;AAClC,gBAAAA,UAAS;AAAA,cACX;AAAA,YACF;AAAA,UACF;AACA,cAAI,UAAU,YAAY;AAC1B,cAAI,WAAW,GAAG,GAAG;AACnB,uBAAW,IAAI;AACf,yBAAa,IAAI,cAAc;AAC/B,uBAAW,IAAI;AAAA,UACjB,OAAO;AAEL,uBAAW;AACX,yBAAa;AACb,uBAAW;AAAA,UACb;AACA,qBAAW,YAAY;AACvB,cAAI,sBAAsB;AAAA,YACxB,KAAK,WAAW;AAAA,YAChB,aAAa;AAAA,YACb,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AACA,cAAI,YAAY;AACd,gCAAoB,YAAY;AAChC,gCAAoB,WAAW;AAAA,UACjC;AACA,cAAI,SAAS3F,GAAE,KAAK;AACpB,cAAI;AACJ,cAAI,OAAO,aAAa,UAAU;AAEhC,yBAAa,KAAK,eAAe,UAAU,KAAK,IAAI,KAAK,SAAS,EAAE,CAAC;AAAA,UACvE,OAAO;AAEL,gBAAI2D,SAAQ,KAAK;AACjB,yBAAaA,OAAM,aAAaA,OAAM,WAAW,OAAO,KAAK,GAAG,cAAc,MAAM;AAAA,UACtF;AACA,cAAI,EAAE,sBAAsB,iBAAiB;AAC3C,kBAAM,IAAI,MAAM,iEAAiE;AAAA,UACnF;AACA,iBAAO,SAAS,KAAK,MAAM,KAAK,EAAE,iBAAiB,qBAAqB,UAAU;AAClF,qBAAW,eAAe,QAAQ,QAAQ,GAAG,QAAQ;AAAA,QACvD;AAAA,QACA,WAAW,SAAU,UAAU;AAC7B,uBAAa,WAAW,CAAC;AACzB,cAAI,YAAY,KAAK,MAAM,QAAQ,mBAAmB;AACtD,cAAI6C,UAAS,KAAK,MAAM,OAAO;AAC/B,cAAI,gBAAgB,KAAK,MAAM,QAAQ;AACvC,cAAI,CAACA,SAAQ;AACX,gBAAI,eAAe;AACjB,cAAAA,UAAS;AAAA,YACX,OAAO;AACL,qBAAO,SAAS,IAAI,KAAK;AAAA,YAC3B;AAAA,UACF;AACA,cAAI,WAAW,WAAWA,OAAM,IAAIA,UAAS,UAAUA,QAAO,IAAI;AAClE,cAAI,CAAC,WAAW,QAAQ,GAAG;AACzB,kBAAM,IAAI,MAAM,oCAAoCA,QAAO,OAAO,IAAI;AAAA,UACxE;AACA,cAAI,OAAOA,QAAO,QAAQ,CAAC;AAC3B,cAAI,QAAQ,SAAS;AAAA,YAAK;AAAA;AAAA,YAE1B;AAAA;AAAA,YAEA;AAAA;AAAA,YAEA;AAAA;AAAA,UACA;AACA,cAAI,CAAC,OAAO;AACV,mBAAO,SAAS,IAAI,KAAK;AAAA,UAC3B;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,UAAU,SAAU,OAAO,aAAa,aAAa;AACnD,cAAI,YAAY,KAAK,MAAM,QAAQ,sBAAsB;AACzD,cAAI,YAAY,KAAK,MAAM,UAAU;AACrC,cAAI,mBAAmB,KAAK,MAAM,QAAQ;AAC1C,cAAI,CAAC,WAAW;AACd,wBAAY,oBAAoB,CAAC;AAAA,UACnC;AACA,cAAI,cAAc,WAAW,SAAS,IAAI,YAAY,UAAU,UAAU,IAAI;AAC9E,cAAI,CAAC,WAAW,WAAW,GAAG;AAC5B,kBAAM,IAAI,MAAM,uCAAuC,UAAU,OAAO,IAAI;AAAA,UAC9E;AACA,cAAI,OAAO,MAAM,UAAU,QAAQ,CAAC,CAAC;AACrC,eAAK,MAAM;AAEX,cAAI9D,QAAO,YAAY;AAAA,YAAK;AAAA;AAAA,YAE5B;AAAA;AAAA,YAEA;AAAA;AAAA,YAEA;AAAA;AAAA,YAEA;AAAA;AAAA,YAEA;AAAA;AAAA,UACA;AACA,cAAI,OAAOA,UAAS,UAAU;AAE5B,YAAAA,QAAO,IAAI,KAAK1C,GAAE,kBAAkB0C,KAAI,CAAC;AAAA,UAC3C;AACA,iBAAOA;AAAA,QACT;AAAA;AAAA;AAAA,QAIA,eAAe,WAAY;AACzB,cAAIA,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAOA,MAAK,MAAM;AAAA,QACpB;AAAA,QACA,yBAAyB,WAAY;AACnC,cAAIA,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,cAAI,UAAU,KAAK;AACnB,cAAI,QAAQ,eAAe,MAAM,GAAG;AAClC,mBAAO,QAAQ;AAAA,UACjB;AACA,cAAIE,QAAOF,MAAK,UAAU;AAC1B,kBAAQ,OAAOE;AACf,iBAAOA;AAAA,QACT;AAAA,QACA,2BAA2B,WAAY;AACrC,cAAIF,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,cAAI,UAAU,KAAK;AACnB,cAAI,QAAQ,eAAe,qBAAqB,GAAG;AACjD,mBAAO,QAAQ;AAAA,UACjB;AACA,cAAI,eAAeA,MAAK,uBAAuB;AAC/C,kBAAQ,sBAAsB;AAC9B,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,WAAY;AAC/B,cAAIA,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,cAAI,UAAU,KAAK;AACnB,cAAI,QAAQ,eAAe,QAAQ,GAAG;AACpC,mBAAO,QAAQ;AAAA,UACjB;AACA,cAAIpC,UAASoC,MAAK,OAAO;AAAA,YACvB,qBAAqB,KAAK,0BAA0B;AAAA,UACtD,CAAC;AACD,kBAAQ,SAASpC;AACjB,iBAAOA;AAAA,QACT;AAAA,QACA,kBAAkB,SAAUA,SAAQ;AAClC,cAAIoC,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAOA,MAAK,cAAcpC,SAAQ;AAAA,YAChC,qBAAqB,KAAK,0BAA0B;AAAA,UACtD,CAAC;AAAA,QACH;AAAA,QACA,iBAAiB,SAAU,OAAO;AAChC,cAAIoC,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,cAAI,aAAa,KAAK,GAAG;AACvB,oBAAQ,WAAW,KAAK,IAAI;AAAA,UAC9B;AACA,iBAAOA,MAAK,QAAQ,OAAO;AAAA,YACzB,qBAAqB,KAAK,0BAA0B;AAAA,UACtD,CAAC;AAAA,QACH;AAAA,QACA,oBAAoB,SAAUpC,SAAQ;AACpC,cAAIoC,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAOA,MAAK,gBAAgBpC,SAAQ;AAAA,YAClC,qBAAqB,KAAK,0BAA0B;AAAA,UACtD,CAAC;AAAA,QACH;AAAA,QACA,mBAAmB,SAAU,OAAO;AAClC,cAAIoC,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAOA,MAAK,UAAU,OAAO;AAAA,YAC3B,qBAAqB,KAAK,0BAA0B;AAAA,UACtD,CAAC;AAAA,QACH;AAAA,QACA,iBAAiB,SAAUxB,QAAO;AAChC,cAAIwB,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAOA,MAAK,aAAaxB,QAAO;AAAA,YAC9B,qBAAqB,KAAK,0BAA0B;AAAA,UACtD,CAAC;AAAA,QACH;AAAA,QACA,uBAAuB,SAAUA,QAAO;AACtC,cAAIwB,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAOA,MAAK,mBAAmBxB,QAAO;AAAA,YACpC,qBAAqB,KAAK,0BAA0B;AAAA,UACtD,CAAC;AAAA,QACH;AAAA,QACA,sBAAsB,SAAUA,QAAO;AACrC,cAAIwB,QAAO,KAAK;AAChB,cAAI,CAACA,OAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAOA,MAAK,6BAA6BxB,QAAO;AAAA,YAC9C,qBAAqB,KAAK,0BAA0B;AAAA,UACtD,CAAC;AAAA,QACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QASA,kBAAkB,SAAU,GAAG,GAAG,IAAI,IAAI;AACxC,cAAI,WAAW,CAAC;AAGhB,cAAI,aAAa;AACjB,cAAI;AACJ,cAAI,OAAO,OAAO,UAAU;AAE1B,yBAAa;AACb,uBAAW;AAAA,UACb,OAAO;AAEL,uBAAW;AAAA,UACb;AAGA,cAAI,UAAU;AACZ,qBAAS,OAAO;AAAA,UAClB;AAGA,cAAI,qBAAqB,EAAE,YAAY,SAAS;AAChD,cAAI,4BAA4B,YAAY,SAAS,oBAAoB,SAAS;AAClF,cAAI,mBAAmB,YAAY,SAAS;AAG5C,cAAIwB,QAAO,KAAK;AAChB,cAAI,UAAU;AAAA,YACZ,qBAAqB,KAAK,0BAA0B;AAAA,UACtD;AACA,cAAI,aAAa,IAAI,MAAM,GAAG,CAAC;AAC/B,cAAI,IAAIA,MAAK,cAAc,YAAY,OAAO;AAG9C,cAAI,gBAAgBA,MAAK,UAAU,GAAG,OAAO;AAC7C,cAAI,oBAAoB;AACtB,4BAAgB,gBAAgB,KAAK,oBAAoB,KAAK;AAAA,UAChE;AACA,cAAI,2BAA2B;AAC7B,4BAAgB,MAAM,KAAK,oBAAoB,IAAI,kBAAkB;AAAA,UACvE;AACA,mBAAS,WAAW;AAMpB,cAAI;AACJ,cAAI,CAAC,kBAAkB;AACrB,sBAAUA,MAAK,WAAW,CAAC;AAAA,UAC7B;AACA,cAAI;AACJ,cAAI,SAAS;AACX,0BAAc,QAAQ,YAAY,UAAU;AAAA,UAC9C,OAAO;AACL,gBAAI,eAAeA,MAAK,SAAS,CAAC;AAClC,gBAAI,kBAAkB,WAAW,WAAW,YAAY;AACxD,0BAAc;AAAA,cACZ,GAAG,gBAAgB;AAAA,cACnB,GAAG,gBAAgB;AAAA,YACrB;AAAA,UACF;AACA,mBAAS,SAAS;AAGlB,mBAAS,QAAQ;AACjB,iBAAO;AAAA,QACT;AAAA,QACA,+BAA+B,SAAU,eAAe;AACtD,cAAI;AACJ,cAAI,aAAa;AACjB,cAAI,OAAO,CAAC;AACZ,cAAI,OAAO,kBAAkB,UAAU;AACrC,4BAAgB;AAAA,UAClB,WAAW,OAAO,cAAc,aAAa,UAAU;AACrD,mBAAO,cAAc,QAAQ,CAAC;AAC9B,4BAAgB,cAAc;AAC9B,yBAAa,cAAc,SAAS;AAAA,UACtC,OAAO;AACL,kBAAM,IAAI,MAAM,gDAAgD;AAAA,UAClE;AACA,cAAI,qBAAqB,gBAAgB,KAAK,iBAAiB;AAC/D,cAAI,cAAc;AAClB,cAAI,yBAAyB;AAAA,YAC3B,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AACA,cAAI,cAAc,QAAQ;AACxB,gBAAI,iBAAiB,cAAc;AACnC,gBAAI,OAAO,mBAAmB,UAAU;AACtC,4BAAc;AAAA,YAChB;AACA,gBAAI,eAAe,GAAG;AACpB,qCAAuB,IAAI,eAAe;AAAA,YAC5C;AACA,gBAAI,eAAe,GAAG;AACpB,qCAAuB,IAAI,eAAe;AAAA,YAC5C;AAAA,UACF;AACA,cAAI,mBAAmB,uBAAuB,MAAM,KAAK,uBAAuB,MAAM,KAAK,gBAAgB;AAC3G,cAAI,iBAAiB,KAAK;AAC1B,cAAI,qBAAqB,KAAK;AAC9B,cAAIA,QAAO,KAAK;AAChB,cAAI,UAAU;AAAA,YACZ,qBAAqB,KAAK,0BAA0B;AAAA,UACtD;AACA,cAAI,WAAW,qBAAqB,gBAAgB,KAAK,oBAAoB,IAAI;AACjF,cAAI,UAAUA,MAAK,gBAAgB,UAAU,OAAO;AACpD,cAAI;AACJ,cAAI,QAAQ;AACZ,cAAI,SAAS;AACX,gBAAI,kBAAkB;AACpB,4BAAc,QAAQ,MAAM,MAAM;AAClC,0BAAY,OAAO,sBAAsB;AAAA,YAC3C,OAAO;AACL,kBAAIqF,UAAS,QAAQ,MAAM;AAC3B,cAAAA,QAAO,OAAO,QAAQ,OAAO,GAAG;AAChC,cAAAA,QAAO,UAAU,WAAW;AAC5B,4BAAcA,QAAO;AAAA,YACvB;AACA,gBAAI,gBAAgB;AAClB,sBAAQ,QAAQ,MAAM,IAAI;AAC1B,kBAAI,oBAAoB;AACtB,wBAAQ,gBAAgB,QAAQ,MAAM,MAAM,EAAE;AAAA,cAChD;AAAA,YACF;AAAA,UACF,OAAO;AAEL,0BAAcrF,MAAK,MAAM,MAAM;AAC/B,gBAAI,kBAAkB;AACpB,0BAAY,OAAO,sBAAsB;AAAA,YAC3C;AAAA,UACF;AACA,iBAAO1C,GAAE,gBAAgB,EAAE,UAAU,YAAY,GAAG,YAAY,CAAC,EAAE,OAAO,KAAK;AAAA,QACjF;AAAA,QACA,qBAAqB,SAAU,eAAe;AAC5C,cAAI,uBAAuB,KAAK,8BAA8B,aAAa;AAC3E,iBAAO,IAAI,MAAM,qBAAqB,GAAG,qBAAqB,CAAC;AAAA,QACjE;AAAA,QACA,gBAAgB,SAAU,GAAG,GAAG;AAC9B,cAAI,QAAQ,KAAK;AACjB,cAAI,WAAW,MAAM,SAAS;AAC9B,cAAI,eAAe,KAAK,sBAAsB,IAAI,MAAM,GAAG,CAAC,CAAC;AAC7D,cAAI,MAAM;AACV,mBAAS,IAAI,SAAS,QAAQ,MAAM,GAAG,OAAO;AAC5C,gBAAI,gBAAgB,SAAS,GAAG;AAChC,gBAAI,sBAAsB,KAAK,sBAAsB,aAAa;AAClE,gBAAI,eAAe,qBAAqB;AACtC;AAAA,YACF;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAIA,mBAAmB,SAAS,kBAAkB,KAAK,GAAG,GAAG;AACvD,mBAAS,UAAU,YAAY,KAAK,MAAM,KAAK,GAAG,CAAC;AACnD,eAAK,OAAO,oBAAoB,KAAK,GAAG,CAAC;AAAA,QAC3C;AAAA,QACA,mBAAmB,SAAS,kBAAkB,KAAK,GAAG,GAAG;AACvD,mBAAS,UAAU,YAAY,KAAK,MAAM,KAAK,GAAG,CAAC;AACnD,eAAK,OAAO,oBAAoB,KAAK,GAAG,CAAC;AAAA,QAC3C;AAAA,QACA,iBAAiB,SAAS,gBAAgB,KAAK,GAAG,GAAG;AACnD,eAAK,OAAO,kBAAkB,KAAK,GAAG,CAAC;AACvC,mBAAS,UAAU,UAAU,KAAK,MAAM,KAAK,GAAG,CAAC;AAAA,QACnD;AAAA,QACA,iBAAiB,SAAU,KAAK,GAAG,GAAG;AACpC,mBAAS,UAAU,gBAAgB,MAAM,MAAM,SAAS;AACxD,eAAK,OAAO,wBAAwB,KAAK,GAAG,CAAC;AAAA,QAC/C;AAAA,QACA,cAAc,SAAU,KAAK,GAAG,GAAG;AACjC,mBAAS,UAAU,aAAa,MAAM,MAAM,SAAS;AACrD,eAAK,OAAO,qBAAqB,KAAK,GAAG,CAAC;AAAA,QAC5C;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAChC,mBAAS,UAAU,YAAY,MAAM,MAAM,SAAS;AACpD,eAAK,OAAO,oBAAoB,KAAK,GAAG,CAAC;AAAA,QAC3C;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAChC,eAAK,kBAAkB,KAAK,GAAG,CAAC;AAGhC,cAAIwD,aAAY,IAAI,OAAO,aAAa,OAAO;AAC/C,kBAAQA,YAAW;AAAA,YACjB,KAAK;AACH,mBAAK,gBAAgB,KAAK,GAAG,CAAC;AAC9B;AAAA,YACF,KAAK;AAAA,YACL,KAAK;AACH,mBAAK,sBAAsB,KAAK,GAAG,CAAC;AACpC;AAAA,YACF,KAAK;AACH,mBAAK,mBAAmB,KAAK,GAAG,CAAC;AACjC;AAAA,YACF,KAAK;AAAA,YACL,KAAK;AACH,mBAAK,oBAAoB,KAAK,GAAG,CAAC;AAClC;AAAA,YACF,KAAK;AAAA,YACL,KAAK;AACH;AAAA,UACJ;AACA,eAAK,UAAU,KAAK,GAAG,CAAC;AAAA,QAC1B;AAAA,QACA,aAAa,SAAU,KAAK,GAAG,GAAG;AAEhC,cAAI,WAAW,KAAK;AACpB,cAAI,UAAU;AACZ,iBAAK,UAAU,KAAK,QAAQ;AAAA,UAC9B;AACA,cAAIZ,QAAO,KAAK,UAAU,GAAG;AAC7B,kBAAQA,MAAK,QAAQ;AAAA,YACnB,KAAK;AACH,mBAAK,WAAW,KAAK,GAAG,CAAC;AACzB;AAAA,YACF,KAAK;AACH,mBAAK,UAAU,KAAK,GAAG,CAAC;AACxB;AAAA,YACF,KAAK;AACH,mBAAK,cAAc,KAAK,GAAG,CAAC;AAC5B;AAAA,YACF,KAAK;AACH,mBAAK,KAAK,KAAK,GAAG,CAAC;AACnB;AAAA,UACJ;AAGA,cAAI,UAAU;AACZ,mBAAO,UAAU,KAAK,UAAU,GAAG,CAAC;AAAA,UACtC;AACA,eAAK,kBAAkB,KAAK,GAAG,CAAC;AAAA,QAClC;AAAA,QACA,WAAW,SAAU,KAAK,GAAG,GAAG;AAE9B,cAAI,WAAW,KAAK;AACpB,cAAI,UAAU;AACZ,iBAAK,UAAU,KAAK,QAAQ;AAC5B,iBAAK,YAAY;AAAA,UACnB;AACA,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,kBAAQA,MAAK,QAAQ;AAAA,YACnB,KAAK;AACH,mBAAK,cAAc,KAAK,GAAG,CAAC;AAC5B;AAAA,YACF,KAAK;AACH,mBAAK,aAAa,KAAK,GAAG,CAAC;AAC3B;AAAA,YACF,KAAK;AACH,mBAAK,iBAAiB,KAAK,GAAG,CAAC;AAC/B;AAAA,YACF,KAAK;AACH,mBAAK,QAAQ,KAAK,GAAG,CAAC;AAAA,UAC1B;AACA,eAAK,gBAAgB,KAAK,GAAG,CAAC;AAC9B,eAAK,gBAAgB,GAAG;AAAA,QAC1B;AAAA,QACA,WAAW,SAAU,KAAK;AACxB,mBAAS,UAAU,UAAU,MAAM,MAAM,SAAS;AAClD,eAAK,OAAO,kBAAkB,GAAG;AAAA,QACnC;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,mBAAS,UAAU,SAAS,MAAM,MAAM,SAAS;AACjD,eAAK,OAAO,iBAAiB,GAAG;AAAA,QAClC;AAAA,QACA,YAAY,SAAU,KAAK;AACzB,mBAAS,UAAU,WAAW,MAAM,MAAM,SAAS;AACnD,eAAK,OAAO,mBAAmB,GAAG;AAAA,QACpC;AAAA,QACA,YAAY,SAAU,KAAK;AACzB,mBAAS,UAAU,WAAW,MAAM,MAAM,SAAS;AACnD,eAAK,OAAO,mBAAmB,GAAG;AAAA,QACpC;AAAA,QACA,YAAY,SAAU,KAAK,GAAG,GAAG,OAAO;AACtC,mBAAS,UAAU,WAAW,MAAM,MAAM,SAAS;AACnD,eAAK,OAAO,mBAAmB,KAAK,GAAG,GAAG,KAAK;AAAA,QACjD;AAAA,QACA,SAAS,SAAU,KAAK,WAAW,GAAG,GAAG;AAEvC,cAAI,WAAW5C,GAAE,IAAI,MAAM,EAAE,kBAAkB,aAAa,KAAK,EAAE;AACnE,cAAI,UAAU;AAEZ,gBAAI,gBAAgB;AAGpB,gBAAI,KAAK,IAAI,cAAc,GAAG;AAC5B,kBAAI,cAAc,UAAU;AAE1B,qBAAK,MAAM,OAAO;AAAA,kBAChB,IAAI;AAAA,gBACN,CAAC;AAED;AAAA,cACF,OAAO;AAEL,qBAAK,OAAO,WAAW,KAAK,GAAG,CAAC;AAAA,cAClC;AAAA,YACF;AACA,iBAAK,kBAAkB,KAAK,GAAG,CAAC;AAChC,iBAAK,MAAM,mBAAmB,MAAM,IAAI,IAAI;AAAA,UAC9C,OAAO;AACL,qBAAS,UAAU,QAAQ,MAAM,MAAM,SAAS;AAAA,UAClD;AAAA,QACF;AAAA,QACA,SAAS,SAAU,KAAK,GAAG,GAAG;AAC5B,eAAK,kBAAkB,KAAK,GAAG,CAAC;AAChC,eAAK,eAAe,KAAK,GAAG,CAAC;AAC7B,cAAI,kBAAkB,KAAK,UAAU,GAAG,EAAE;AAC1C,cAAI,iBAAiB;AACnB,gBAAI,gBAAgB;AAAA,UACtB;AAAA,QACF;AAAA;AAAA,QAGA,qBAAqB,SAAU,KAAK,GAAG,GAAG;AACxC,cAAI,CAAC,KAAK,IAAI,WAAW,GAAG;AAC1B;AAAA,UACF;AAIA,cAAI,YAAY,KAAK,UAAU;AAAA,YAC7B;AAAA,YACA;AAAA,UACF,GAAG;AAAA,YACD,IAAI;AAAA,UACN,CAAC;AACD,eAAK,UAAU,KAAK;AAAA,YAClB,QAAQ;AAAA,YACR;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,gBAAgB,SAAU,KAAK,GAAG,GAAG;AACnC,cAAI,KAAK,IAAI,WAAW,GAAG;AACzB,gBAAI,KAAK,8BAA8B,GAAG,GAAG;AAC3C;AAAA,YACF;AACA,gBAAI,YAAY,IAAI;AACpB,gBAAI,WAAW,SAAS,UAAU,aAAa,WAAW,GAAG,EAAE;AAC/D,gBAAI,uBAAuB,KAAK,iCAAiC;AACjE,gBAAI,uBAAuB,KAAK,wBAAwB,KAAK,0BAA0B,QAAQ,CAAC;AAChG,gBAAI,WAAW,KAAK,4BAA4B,sBAAsB,oBAAoB;AAC1F,gBAAI,SAAS,KAAK,oBAAoB,QAAQ;AAC9C,gBAAI,KAAK,OAAO,IAAI;AACpB,gBAAI,KAAK,OAAO,IAAI;AAEpB,gBAAI,gBAAgB,KAAK,uBAAuB,QAAQ;AACxD,gBAAI,oBAAoB,KAAK,sBAAsB,QAAQ;AAC3D,gBAAI,2BAA2B,KAAK,6BAA6B;AACjE,gBAAI,eAAe,KAAK,wBAAwB,mBAAmB,wBAAwB;AAC3F,iBAAK,UAAU,KAAK;AAAA,cAClB,QAAQ;AAAA,cACR;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA,iBAAiB;AAAA,YACnB,CAAC;AAAA,UACH,OAAO;AAGL,iBAAK,UAAU,KAAK;AAAA,cAClB,iBAAiB;AAAA,YACnB,CAAC;AAAA,UACH;AACA,eAAK,MAAM,mBAAmB,MAAM,IAAI,IAAI;AAAA,QAC9C;AAAA,QACA,iBAAiB,SAAU,KAAK,GAAG,GAAG;AACpC,cAAI,CAAC,KAAK,IAAI,YAAY,GAAG;AAC3B;AAAA,UACF;AACA,cAAI,aAAa,IAAI;AACrB,cAAI,YAAY,SAAS,WAAW,aAAa,KAAK,GAAG,EAAE;AAC3D,eAAK,UAAU,KAAK;AAAA,YAClB,QAAQ;AAAA,YACR;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,uBAAuB,SAAU,KAAK,GAAG,GAAG;AAC1C,cAAI,CAAC,KAAK,IAAI,cAAc,GAAG;AAC7B;AAAA,UACF;AACA,cAAI,aAAa,IAAI;AACrB,cAAI,YAAY,SAAS,WAAW,aAAa,KAAK,GAAG,EAAE;AAC3D,eAAK,MAAM,aAAa,SAAS;AAAA,QACnC;AAAA,QACA,oBAAoB,SAAU,KAAK,GAAG,GAAG;AACvC,cAAI,CAAC,KAAK,IAAI,eAAe,GAAG;AAC9B;AAAA,UACF;AACA,cAAI,gBAAgB,IAAI;AACxB,cAAI,gBAAgB,cAAc,aAAa,KAAK;AACpD,cAAI4C,QAAO,KAAK,mBAAmB,eAAe;AAAA,YAChD,8BAA8B;AAAA,UAChC,CAAC;AACD,eAAK,UAAU,KAAKA,KAAI;AAAA,QAC1B;AAAA,QACA,WAAW,SAAU,KAAK,GAAG,GAAG;AAC9B,cAAI,KAAK,8BAA8B,GAAG,GAAG;AAC3C;AAAA,UACF;AACA,cAAI,CAAC,KAAK,IAAI,UAAU,GAAG;AACzB;AAAA,UACF;AACA,eAAK,UAAU,KAAK;AAAA,YAClB,QAAQ;AAAA,YACR,IAAI;AAAA,YACJ,IAAI;AAAA,UACN,CAAC;AAAA,QACH;AAAA;AAAA,QAEA,WAAW,SAAU,KAAK,GAAG,GAAG;AAC9B,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,QAAQ;AAAA,YACV,UAAU,KAAK,iBAAiB,IAAIA,MAAK,IAAI,IAAIA,MAAK,IAAIA,MAAK,eAAeA,MAAK,YAAY;AAAA,UACjG;AACA,cAAI,KAAK,MAAM,QAAQ,YAAY;AACjC,mBAAO,MAAM,SAAS;AAAA,UACxB;AAOA,cAAI,aAAa;AAAA,YACf,IAAI;AAAA,UACN;AACA,cAAI,KAAK,MAAM,QAAQ,KAAK,IAAI,SAAS,aAAa;AACpD,uBAAW,QAAQ;AAAA,UACrB;AACA,eAAK,MAAM,MAAMA,MAAK,UAAU,OAAO,UAAU;AAAA,QACnD;AAAA,QACA,YAAY,SAAU,KAAK,GAAG,GAAG;AAC/B,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,eAAK,MAAM,OAAOA,MAAK,WAAW;AAAA,YAChC;AAAA,YACA;AAAA,UACF,GAAG;AAAA,YACD,IAAI;AAAA,UACN,CAAC;AAAA,QACH;AAAA,QACA,eAAe,SAAU,KAAK,GAAG,GAAG;AAClC,cAAI,KAAK,MAAM,QAAQ,WAAW;AAChC,gBAAI,YAAY,KAAK,eAAe,KAAK,GAAG,CAAC;AAC7C,gBAAI,CAAC,aAAa,KAAK,MAAM,QAAQ,eAAe;AAClD,mBAAK,mBAAmB,KAAK,GAAG,CAAC;AAAA,YACnC;AAAA,UACF,OAAO;AACL,gBAAI,KAAK,MAAM,QAAQ,eAAe;AACpC,mBAAK,mBAAmB,KAAK,GAAG,CAAC;AAAA,YACnC,OAAO;AACL,mBAAK,kBAAkB,KAAK,eAAe,GAAG,GAAG,GAAG,GAAG,KAAK,UAAU,GAAG,CAAC;AAAA,YAC5E;AAAA,UACF;AAAA,QACF;AAAA,QACA,MAAM,SAAU,KAAK,GAAG,GAAG;AACzB,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,eAAK,MAAM,UAAU,IAAIA,MAAK,IAAI,IAAIA,MAAK,IAAI;AAAA,YAC7C,IAAI;AAAA,UACN,CAAC;AACD,eAAK,UAAU,KAAK;AAAA,YAClB,IAAI;AAAA,YACJ,IAAI;AAAA,UACN,CAAC;AAAA,QACH;AAAA;AAAA,QAGA,cAAc,WAAY;AAAA,QAE1B;AAAA,QACA,eAAe,WAAY;AAAA,QAE3B;AAAA,QACA,kBAAkB,SAAU,KAAK,GAAG,GAAG;AACrC,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,QAAQ,WAAW;AAC3B,iBAAK,kBAAkBA,KAAI;AAAA,UAC7B,OAAO;AACL,iBAAK,qBAAqBA,OAAM,GAAG,CAAC;AAAA,UACtC;AACA,cAAI,CAAC,MAAM,YAAY,IAAI,GAAG;AAE5B,iBAAK,UAAUA,KAAI;AAAA,UACrB,OAAO;AACL,iBAAK,iBAAiBA,KAAI;AAC1B,iBAAK,oBAAoBA,OAAM,GAAG;AAAA,UACpC;AACA,eAAK,oBAAoBA,KAAI;AAAA,QAC/B;AAAA,QACA,SAAS,WAAY;AAAA,QAErB;AAAA,QACA,WAAW,SAAUA,OAAM;AACzB,kBAAQA,MAAK,gBAAgB;AAAA,YAC3B,KAAK;AACH,mBAAK,MAAM,OAAO;AAAA,gBAChB,IAAI;AAAA,cACN,CAAC;AACD;AAAA,YACF,KAAK;AAAA,YACL;AACE,mBAAK,MAAM,IAAIA,MAAK,WAAWA,MAAK,YAAY;AAAA,gBAC9C,IAAI;AAAA,cACN,CAAC;AACD;AAAA,UACJ;AAAA,QACF;AAAA,QACA,kBAAkB,SAAUA,OAAM;AAEhC,cAAI,KAAK,MAAM,QAAQ,iBAAiB,KAAK,MAAM,SAAS,GAAG;AAE7D,YAAAA,MAAK,IAAI;AAAA,UACX;AAAA,QACF;AAAA,QACA,qBAAqB,SAAUA,OAAM,KAAK;AACxC,cAAI,YAAYA,MAAK;AACrB,cAAI,aAAaA,MAAK;AACtB,cAAI,aAAa,KAAK,MAAM,KAAK,SAAS;AAC1C,cAAI,aAAa,cAAc,CAAC,KAAK,UAAU,YAAY,UAAU;AACrE,cAAI,YAAY;AACd,gBAAI,QAAQ,KAAK;AACjB,gBAAI,WAAW,IAAI;AACjB,mBAAK,OAAO,mBAAmB,KAAK,MAAM,gBAAgB,WAAW,EAAE,GAAGA,MAAK,eAAe,SAAS;AAAA,YACzG;AACA,gBAAI,WAAW,IAAI;AACjB,mBAAK,OAAO,gBAAgB,KAAK,MAAM,gBAAgB,WAAW,EAAE,GAAGA,MAAK,oBAAoB,SAAS;AAAA,YAC3G;AAAA,UACF;AAAA,QACF;AAAA,QACA,eAAe,SAAU,WAAW,QAAQ,QAAQ;AAClD,cAAI,gBAAgB;AACpB,cAAI,mBAAmB;AACvB,cAAI,gBAAgB;AACpB,cAAI,mBAAmB;AACvB,cAAI,IAAI,UAAU;AAClB,cAAI,IAAI,UAAU;AAClB,mBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,gBAAI,QAAQ,KAAK,IAAI,OAAO,CAAC,EAAE,IAAI,UAAU,CAAC;AAC9C,gBAAI,QAAQ,kBAAkB;AAC5B,iCAAmB;AACnB,8BAAgB,OAAO,CAAC;AAAA,YAC1B;AACA,gBAAI,QAAQ,KAAK,IAAI,OAAO,CAAC,EAAE,IAAI,UAAU,CAAC;AAC9C,gBAAI,QAAQ,kBAAkB;AAC5B,iCAAmB;AACnB,8BAAgB,OAAO,CAAC;AAAA,YAC1B;AAAA,UACF;AACA,cAAI,mBAAmB,QAAQ;AAC7B,gBAAI,cAAc;AAAA,UACpB;AACA,cAAI,mBAAmB,QAAQ;AAC7B,gBAAI,cAAc;AAAA,UACpB;AACA,iBAAO;AAAA,YACL;AAAA,YACA;AAAA,UACF;AAAA,QACF;AAAA,QACA,oBAAoB,SAAU,KAAK,GAAG,GAAG;AACvC,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,MAAM;AAClB,cAAI,gBAAgB,MAAM;AAC1B,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,SAAS,cAAc,UAAU;AACrC,cAAI4E,UAAS,KAAK,aAAa5E,MAAK,cAAc,WAAW,WAAW,QAAQ;AAChF,cAAI,WAAW,MAAM,SAAS;AAC9B,cAAI,SAAS,CAAC4E,OAAM,EAAE,OAAO,QAAQ;AACrC,cAAI,YAAY,KAAK,cAAc;AAAA,YACjC;AAAA,YACA;AAAA,UACF,GAAG,QAAQ,MAAM;AACjB,cAAItG,SAAQ,MAAM,mBAAmB,SAAS;AAC9C,eAAK,kBAAkB,SAAS,iBAAiBA,OAAM,GAAGA,OAAM,CAAC,GAAG,UAAU,GAAG,UAAU,GAAG,KAAK,UAAU,GAAG,CAAC;AAAA,QACnH;AAAA,QACA,gBAAgB,SAAU,KAAK,GAAG,GAAG;AACnC,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,MAAM;AAClB,cAAI,YAAY,MAAM;AACtB,cAAI,qBAAqB,MAAM;AAC/B,cAAI0B,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,YAAY;AAGhB,cAAI,IAAI,UAAU,UAAU;AAC5B,cAAI,cAAc,MAAM,gBAAgB;AAAA,YACtC,GAAG,IAAI;AAAA,YACP,GAAG,IAAI;AAAA,YACP,OAAO,IAAI;AAAA,YACX,QAAQ,IAAI;AAAA,UACd,CAAC;AACD,cAAI,kBAAkBA,MAAK,eAAe;AAC1C,cAAI,oBAAoBA,MAAK,iBAAiB;AAC9C,cAAI,kBAAkBA,MAAK,eAAe;AAC1C,UAAAA,MAAK,cAAcA,MAAK,gBAAgBA,MAAK,cAAc;AAC3D,cAAI,cAAc,OAAO;AACzB,cAAI,UAAU,IAAI,MAAM,GAAG,CAAC;AAC5B,sBAAY,QAAQ,SAAU,MAAM;AAClC,gBAAI,aAAa,CAAC;AAElB,gBAAI,KAAK,GAAG,aAAa,QAAQ,MAAM,SAAS;AAC9C,yBAAW,KAAK;AAAA,gBACd,MAAM,KAAK,MAAM,QAAQ;AAAA,gBACzB,QAAQ,KAAK;AAAA,cACf,CAAC;AAAA,YACH;AACA,iBAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,SAAU,QAAQ;AACrD,yBAAW,KAAK;AAAA,gBACd,MAAM,KAAK,YAAY,MAAM;AAAA,gBAC7B;AAAA,cACF,CAAC;AAAA,YACH,CAAC;AACD,uBAAW,QAAQ,SAAU,WAAW;AACtC,kBAAI,SAAS,UAAU;AACvB,kBAAIpB,QAAO,UAAU;AAErB,kBAAI,WAAWA,MAAK,OAAO,EAAE,gBAAgB,OAAO;AAEpD,kBAAI,WAAW,aAAa;AAC1B,oBAAI,qBAAqB,sBAAsB;AAC/C,oBAAI,sBAAsB,MAAM,QAAQ,mBAAmB,MAAM,OAAOoB,MAAK,uBAAuB,MAAM,KAAK,OAAO,SAAS,OAAO,MAAM,CAAC,GAAG;AAC9I,gCAAc;AACd,kBAAAA,MAAK,cAAc;AACnB,kBAAAA,MAAK,gBAAgB;AAAA,gBACvB;AAAA,cACF;AAAA,YACF,CAAC;AAAA,UACH,GAAG,IAAI;AACP,cAAI;AACJ,cAAI,cAAc;AAClB,cAAI,cAAcA,MAAK;AACvB,cAAI,gBAAgBA,MAAK;AACzB,cAAI,eAAe;AACjB,0BAAcA,MAAK,cAAc,YAAY,cAAc,eAAe,aAAa;AAAA,UACzF;AACA,cAAI,UAAUA,MAAK;AACnB,cAAI,mBAAmB,sBAAsB;AAC7C,cAAI,mBAAmB,kBAAkB;AACvC,4BAAgB,YAAY,iBAAiB;AAAA,cAC3C,YAAY;AAAA,cACZ,UAAU;AAAA,YACZ,CAAC;AAAA,UACH;AACA,cAAI,aAAa;AACf,gBAAI,UAAUA,MAAK;AACnB,gBAAI,QAAQA,MAAK;AACjB,gBAAI,QAAQA,MAAK;AACjB,YAAAA,MAAK,QAAQ;AACb,YAAAA,MAAK,QAAQ;AACb,wBAAY;AACZ,gBAAI,CAAC,kBAAkB;AACrB,kBAAI,OAAO,uBAAuB,cAAc,UAAU,KAAK,UAAU,GAAG;AAE1E,uBAAO;AAAA,cACT;AAAA,YACF;AACA,kBAAM,YAAY,WAAW,eAAe,GAAG,GAAG,KAAK,OAAO,OAAO;AACrE,gBAAI,CAAC,oBAAoB,QAAQ,SAAS,GAAG,GAAG;AAE9C,qBAAO;AAAA,YACT;AACA,YAAAA,MAAK,UAAU;AACf,gBAAI,kBAAkB;AACpB,0BAAY,UAAU,aAAa;AAAA,gBACjC,YAAY;AAAA,gBACZ,UAAU;AAAA,cACZ,CAAC;AAAA,YACH;AAAA,UACF,OAAO;AACL,kBAAM;AAAA,cACJ;AAAA,cACA;AAAA,YACF;AAAA,UACF;AACA,eAAK,MAAM,IAAI,SAAS,OAAO;AAAA,YAC7B;AAAA,YACA;AAAA,UACF,GAAG;AAAA,YACD,IAAI;AAAA,UACN,CAAC;AACD,cAAI,iBAAiB;AACnB,iBAAK,OAAO,wBAAwB,KAAK,iBAAiB,mBAAmB,OAAO;AAAA,UACtF;AACA,cAAI,aAAa;AACf,iBAAK,OAAO,qBAAqB,KAAK,aAAa,eAAe,OAAO;AAAA,UAC3E;AACA,iBAAO;AAAA,QACT;AAAA,QACA,mBAAmB,SAAUA,OAAM;AAGjC,cAAI,cAAcA,MAAK;AACvB,cAAI,gBAAgBA,MAAK;AACzB,cAAI,eAAe,eAAe;AAChC,wBAAY,YAAYA,MAAK,aAAa;AAAA,cACxC,YAAY;AAAA,cACZ,UAAU;AAAA,YACZ,CAAC;AACD,YAAAA,MAAK,qBAAqB,YAAY,WAAW,aAAa;AAAA,UAChE;AACA,UAAAA,MAAK,cAAcA,MAAK,gBAAgB;AAAA,QAC1C;AAAA,QACA,mBAAmB,SAAU,QAAQ,GAAG,GAAGA,OAAM;AAE/C,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,IAAI;AAChB,cAAIA,MAAK,gBAAgB,QAAQ;AAE/B,gBAAIA,MAAK,aAAa;AACpB,cAAAA,MAAK,iBAAiB,YAAYA,MAAK,aAAa;AAAA,gBAClD,YAAY;AAAA,cACd,CAAC;AAAA,YACH;AACA,gBAAI,mBAAmBA,MAAK,mBAAmB,MAAM,SAAS,MAAM;AACpE,gBAAI,kBAAkB;AAGpB,kBAAI,qBAAqBA,MAAK,qBAAqB,iBAAiB,WAAW,MAAM;AACrF,kBAAI,cAAcA,MAAK,cAAc,iBAAiB,cAAc,oBAAoB,aAAa;AACrG,kBAAI,sBAAsB,KAAK,MAAM,QAAQ,mBAAmB,MAAM,OAAOA,MAAK,uBAAuB,kBAAkB,kBAAkB,CAAC,GAAG;AAI/I,oBAAI,aAAa;AACf,mCAAiB,UAAU,aAAa;AAAA,oBACtC,YAAY;AAAA,kBACd,CAAC;AAAA,gBACH;AAAA,cACF,OAAO;AAEL,gBAAAA,MAAK,qBAAqB;AAC1B,gBAAAA,MAAK,cAAc;AAAA,cACrB;AAAA,YACF,OAAO;AAEL,cAAAA,MAAK,qBAAqB;AAC1B,cAAAA,MAAK,cAAc;AAAA,YACrB;AAAA,UACF;AACA,UAAAA,MAAK,cAAc;AACnB,gBAAM,IAAIA,MAAK,WAAW;AAAA,YACxB;AAAA,YACA;AAAA,UACF,GAAG;AAAA,YACD,IAAI;AAAA,UACN,CAAC;AAAA,QACH;AAAA,QACA,sBAAsB,SAAUA,OAAM,GAAG,GAAG;AAC1C,cAAIA,UAAS,OAAQ,CAAAA,QAAO,CAAC;AAC7B,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,mBAAmBA,MAAK;AAC5B,cAAI,qBAAqBA,MAAK;AAC9B,cAAI,cAAcA,MAAK;AACvB,cAAI,YAAYA,MAAK;AACrB,cAAI,CAAC,sBAAsB,CAAC,eAAe,CAAC,kBAAkB;AAC5D;AAAA,UACF;AACA,2BAAiB,YAAY,aAAa;AAAA,YACxC,YAAY;AAAA,UACd,CAAC;AAGD,cAAI,MAAM,iBAAiB,WAAW,oBAAoB,GAAG,GAAG,OAAO,SAAS;AAChF,gBAAM,IAAI,WAAW,KAAK;AAAA,YACxB,IAAI;AAAA,UACN,CAAC;AAAA,QACH;AAAA,QACA,sBAAsB,SAAUA,OAAM;AACpC,UAAAA,MAAK,IAAI,KAAK,MAAM,IAAI,GAAG;AAC3B,eAAK,MAAM,QAAQ;AAInB,cAAI,QAAQ,KAAK,GAAG;AACpB,UAAAA,MAAK,gBAAgB,MAAM;AAC3B,gBAAM,gBAAgB;AACtB,cAAI,KAAK,MAAM,QAAQ,eAAe;AACpC,iBAAK,sBAAsBA,KAAI;AAAA,UACjC;AAAA,QACF;AAAA,QACA,qBAAqB,SAAUA,OAAM;AACnC,cAAIA,MAAK,MAAM,MAAM;AACnB,iBAAK,MAAM,IAAI,KAAKA,MAAK,GAAG;AAAA,cAC1B,IAAI;AAAA,YACN,CAAC;AACD,YAAAA,MAAK,IAAI;AAAA,UACX;AAGA,eAAK,GAAG,MAAM,gBAAgBA,MAAK;AACnC,cAAI,KAAK,MAAM,QAAQ,eAAe;AACpC,iBAAK,wBAAwBA,KAAI;AAAA,UACnC;AAAA,QACF;AAAA,QACA,+BAA+B,SAAU,WAAW;AAGlD,cAAI,OAAO,CAAC;AACZ,eAAK,CAAC,IAAI;AACV,eAAK,CAAC,IAAI;AACV,cAAI;AACJ,cAAI,IAAI;AACR,cAAI,IAAI;AACR,cAAI,cAAc,UAAU;AAC1B,gBAAI;AACJ,gCAAoB;AAAA,UACtB,OAAO;AACL,gBAAI;AACJ,gCAAoB;AAAA,UACtB;AACA,cAAI,MAAM,KAAK,MAAM,IAAI,iBAAiB;AAC1C,cAAI,IAAI,IAAI;AACV,gBAAI,OAAO,KAAK,CAAC,IAAI,KAAK,MAAM,gBAAgB,IAAI,EAAE;AACtD,gBAAI,SAAS,KAAK,qBAAqB,GAAG;AAC1C,gBAAI,WAAW,KAAK,IAAI;AACtB,uBAAS;AAAA,YACX;AACA,iBAAK,IAAI,CAAC,IAAI;AAAA,UAChB;AACA,mBAAS,uBAAuB,UAAUoF,SAAQ;AAChD,iBAAK,CAAC,IAAI;AACV,iBAAK,IAAI,CAAC,IAAI,SAAS,OAAOA,UAAS,SAAYA;AACnD,mBAAO;AAAA,UACT;AACA,iBAAO;AAAA,QACT;AAAA,QACA,uBAAuB,SAAUpF,OAAM;AACrC,mBAAS,kBAAkBqF,OAAM,QAAQ;AACvC,gBAAIC,SAAQD,MAAK;AACjB,gBAAI,WAAWC,OAAM,QAAQ;AAC7B,mBAAO,SAAS,MAAMA,QAAO,KAAK,uBAAuBD,OAAM,MAAM,CAAC;AAAA,UACxE;AACA,cAAI,QAAQ,KAAK;AACjB,cAAI,WAAW,MAAM,MAAM,SAAS;AACpC,UAAArF,MAAK,SAAS,CAAC;AACf,mBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,GAAG,KAAK;AAC/C,gBAAI,OAAO,SAAS,CAAC,EAAE,SAAS,KAAK;AACrC,gBAAI,CAAC,MAAM;AACT;AAAA,YACF;AACA,gBAAI,UAAU,MAAM,UAAU,MAAM,KAAK,KAAK,GAAG,iBAAiB,UAAU,CAAC;AAC7E,gBAAI,KAAK,GAAG,aAAa,QAAQ,MAAM,SAAS;AAE9C,sBAAQ,KAAK,KAAK,EAAE;AAAA,YACtB;AACA,gBAAI,mBAAmB,QAAQ,OAAO,kBAAkB,KAAKA,OAAM,IAAI,CAAC;AACxE,gBAAI,iBAAiB,SAAS,GAAG;AAE/B,uBAAS,IAAI,GAAG,IAAI,iBAAiB,QAAQ,IAAI,GAAG,KAAK;AACvD,qBAAK,UAAU,iBAAiB,CAAC,GAAG;AAAA,kBAClC,oBAAoB;AAAA,gBACtB,CAAC;AAAA,cACH;AAEA,mBAAK,UAAU,MAAM;AAAA,gBACnB,qBAAqB;AAAA,cACvB,CAAC;AACD,cAAAA,MAAK,OAAO,KAAK,MAAM,EAAE,IAAI;AAAA,YAC/B;AAAA,UACF;AAAA,QACF;AAAA,QACA,yBAAyB,SAAUA,OAAM;AACvC,cAAI,aAAa,OAAO,KAAKA,MAAK,MAAM;AACxC,cAAIO;AACJ,cAAI;AACJ,mBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAI,GAAG,KAAK;AACjD,YAAAA,MAAK,WAAW,CAAC;AACjB,4BAAgBP,MAAK,OAAOO,GAAE;AAC9B,gBAAI,OAAO,KAAK,MAAM,gBAAgBA,GAAE;AACxC,gBAAI,MAAM;AACR,uBAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,IAAI,GAAG,KAAK;AACpD,qBAAK,YAAY,cAAc,CAAC,GAAG;AAAA,kBACjC,oBAAoB;AAAA,gBACtB,CAAC;AAAA,cACH;AACA,mBAAK,YAAY,MAAM;AAAA,gBACrB,qBAAqB;AAAA,cACvB,CAAC;AAAA,YACH;AAAA,UACF;AACA,UAAAP,MAAK,SAAS;AAAA,QAChB;AAAA,QACA,oBAAoB,SAAU,KAAK,KAAK;AACtC,kBAAQ,MAAM,CAAC;AAIf,cAAIA,QAAO;AAAA,YACT,QAAQ;AAAA,YACR,WAAW;AAAA,YACX,gBAAgB,IAAI,kBAAkB;AAAA,YACtC,eAAe,KAAK,MAAM,QAAQ,MAAM,KAAK,MAAM,MAAM,IAAI,KAAK,MAAM,MAAM,EAAE,KAAK;AAAA,YACrF,YAAY,MAAM,KAAK,MAAM,IAAI,GAAG,CAAC;AAAA,YACrC,wBAAwB,KAAK,8BAA8B,GAAG;AAAA,UAChE;AACA,eAAK,qBAAqBA,KAAI;AAC9B,cAAI,IAAI,iCAAiC,MAAM;AAC7C,iBAAK,YAAYA;AAAA,UACnB;AACA,iBAAOA;AAAA,QACT;AAAA;AAAA,QAGA,SAAS,WAAY;AACnB,mBAAS,UAAU,QAAQ,MAAM,MAAM,SAAS;AAChD,eAAK,YAAY;AAAA,QACnB;AAAA,QACA,UAAU,WAAY;AACpB,mBAAS,UAAU,SAAS,MAAM,MAAM,SAAS;AACjD,eAAK,cAAc;AAAA,QACrB;AAAA,QACA,UAAU,WAAY;AACpB,mBAAS,UAAU,SAAS,MAAM,MAAM,SAAS;AACjD,eAAK,cAAc;AAAA,QACrB;AAAA,MACF,GAAG;AAAA,QACD,OAAO;AAAA,MACT,CAAC;AACD,aAAO,eAAe,SAAS,WAAW,cAAc;AAAA,QACtD,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,cAAI,aAAa,KAAK;AACtB,cAAI,CAAC,YAAY;AACf,gBAAI,YAAY,KAAK,MAAM,OAAO;AAClC,mBAAO,IAAI,KAAK,UAAU,GAAG,UAAU,CAAC;AAAA,UAC1C;AACA,cAAI,eAAe,KAAK;AACxB,cAAI,WAAW,iBAAiB,YAAY,GAAG;AAC7C,mBAAO,IAAI,KAAK,KAAK,YAAY;AAAA,UACnC;AACA,iBAAO,WAAW,YAAY,gBAAgB,WAAW,EAAE;AAAA,QAC7D;AAAA,MACF,CAAC;AACD,aAAO,eAAe,SAAS,WAAW,cAAc;AAAA,QACtD,YAAY;AAAA,QACZ,KAAK,WAAY;AACf,cAAI,aAAa,KAAK;AACtB,cAAI,CAAC,YAAY;AACf,gBAAI,YAAY,KAAK,MAAM,OAAO;AAClC,mBAAO,IAAI,KAAK,UAAU,GAAG,UAAU,CAAC;AAAA,UAC1C;AACA,cAAI,eAAe,KAAK;AACxB,cAAI,WAAW,iBAAiB,YAAY,GAAG;AAC7C,mBAAO,IAAI,KAAK,KAAK,YAAY;AAAA,UACnC;AACA,iBAAO,WAAW,YAAY,gBAAgB,WAAW,EAAE;AAAA,QAC7D;AAAA,MACF,CAAC;AACD,UAAI,SAAS,gBAAgB,OAAO;AAAA,QAClC,SAAS;AAAA,QACT,WAAW;AAAA,QACX,YAAY;AAAA,UACV,kBAAkB;AAAA,UAClB,iBAAiB;AAAA,UACjB,QAAQ;AAAA,QACV;AAAA,QACA,SAAS;AAAA,UACP,SAAS;AAAA,UACT,IAAI;AAAA,UACJ,IAAI;AAAA,UACJ,iBAAiB;AAAA,UACjB,OAAO;AAAA,YACL,gBAAgB;AAAA,YAChB,UAAU;AAAA,UACZ;AAAA,QACF;AAAA,QACA,aAAa,SAAS,YAAY,UAAU,MAAM;AAChD,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,kBAAkB,QAAQ;AAC9B,cAAI;AACJ,cAAI;AACF,gBAAI,QAAQ5C,GAAE,IAAI;AAClB,gBAAI,MAAM,kBAAkB,EAAE,KAAK;AACnC,gBAAI,MAAM,QAAQ,MAAM,UAAU,iBAAiB;AACjD,kBAAI,qBAAqB,EAAE,OAAO,KAAK,IAAI;AAC3C,kBAAI,qBAAqB,GAAG;AAC1B,oBAAI,EAAE,OAAO,GAAG,kBAAkB;AAAA,cACpC;AAAA,YACF;AAAA,UACF,SAAS,OAAO;AAGd,gBAAI,WAAW,SAAS,oBAAoB,IAAI;AAChD,gBAAIA,GAAE,WAAW,OAAO,CAAC,GAAG,SAAS,SAAS,OAAO,CAAC,CAAC;AAAA,UACzD;AACA,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,SAAS,oBAAoB,UAAU;AAC1D,eAAK,IAAI,KAAK,KAAK,SAAS,wBAAwB,CAAC;AAAA,QACvD;AAAA,QACA,eAAe,SAAS,cAAc,UAAU,MAAM;AACpD,cAAI,MAAM;AACV,cAAI,MAAM,IAAI;AACd,cAAI,UAAU,IAAI;AAClB,cAAI,UAAU,QAAQ;AACtB,cAAI,QAAQ,QAAQ;AACpB,cAAI,kBAAkB,KAAK,cAAc,UAAU,IAAI;AAEvD,cAAI,SAAS;AACX,gBAAI,CAAC,SAAS,SAAS,SAAS,IAAI;AAIlC,kBAAI,OAAO;AAAA,YACb;AACA,gBAAI,WAAW,SAAS,oBAAoB,IAAI;AAChD,gBAAI,KAAK,SAAS,IAAI,SAAS,QAAQ;AACvC,gBAAI,KAAK,SAAS,IAAI,SAAS,SAAS;AACxC,uBAAWA,GAAE,cAAc,UAAU,eAAe;AACpD,gBAAI,QAAQ,KAAK,IAAI,SAAS,OAAO,CAAC;AACtC,gBAAI,SAAS,KAAK,IAAI,SAAS,QAAQ,CAAC;AACxC,gBAAI,MAAM,QAAQ,WAAW;AAC7B,gBAAI,MAAM,SAAS,WAAW;AAC9B,gBAAI,gBAAgBA,GAAE,gBAAgB;AAAA,cACpC,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG;AAAA,cACH,GAAG,KAAK,KAAK;AAAA,cACb,GAAG,KAAK,KAAK;AAAA,YACf,CAAC;AACD,8BAAkB,gBAAgB,SAAS,aAAa;AAAA,UAC1D;AACA,cAAI,KAAK;AAAA,YACP,KAAK,KAAK,YAAY,UAAU,IAAI;AAAA,YACpC,aAAaA,GAAE,wBAAwB,eAAe;AAAA,UACxD,CAAC;AAAA,QACH;AAAA,QACA,WAAW,SAAS,UAAU,UAAU,MAAM;AAC5C,cAAI,MAAM;AACV,cAAI,MAAM,IAAI;AACd,cAAI,UAAU,IAAI;AAClB,cAAI,KAAK,QAAQ,KAAK;AACtB,cAAI,SAAS,iBAAiB,IAAI,GAAG;AACnC,iBAAK,oBAAoB,QAAQ;AAAA,UACnC,OAAO;AACL,iBAAK,cAAc,UAAU,IAAI;AAAA,UACnC;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,YAAY;AAChB,eAAS,kBAAkB,KAAKH,KAAI;AAClC,YAAI,cAAc,IAAI,SAAS;AAC/B,eAAO,YAAY,SAAS,GAAG;AAC7B,cAAI,aAAa,YAAY,MAAM;AACnC,cAAIA,IAAG,UAAU,GAAG;AAClB,wBAAY,KAAK,MAAM,aAAa,WAAW,SAAS,CAAC;AAAA,UAC3D;AAAA,QACF;AAAA,MACF;AACA,UAAI,OAAO,gBAAgB,OAAO;AAAA,QAChC,SAAS;AAAA,QACT,WAAW;AAAA,QACX,YAAY;AAAA,UACV,kBAAkB;AAAA,QACpB;AAAA,QACA,SAAS;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,OAAO;AAAA,YACL,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,kBAAkB;AAAA,YAClB,mBAAmB;AAAA,UACrB;AAAA,QACF;AAAA,QACA,SAAS;AAAA,QACT,WAAW;AAAA,QACX,+BAA+B,CAAC,gBAAgB,cAAc,cAAc,aAAa,oBAAoB,OAAO;AAAA,QACpH,gCAAgC,CAAC,UAAU,QAAQ,gBAAgB,kBAAkB,oBAAoB,gBAAgB,gBAAgB,cAAc,cAAc,OAAO;AAAA;AAAA,QAE5K,mBAAmB,CAAC,iBAAiB,SAAS,OAAO,QAAQ,SAAS,UAAU;AAAA;AAAA,QAEhF,kBAAkB,CAAC,QAAQ,SAAS,UAAU;AAAA,QAC9C,oBAAoB,SAAS,mBAAmB,UAAU,SAAS;AACjE,cAAI,MAAM;AACV,cAAI,iCAAiC,IAAI;AACzC,cAAI,oBAAoB,IAAI;AAC5B,cAAI,mBAAmB,IAAI;AAC3B,cAAI,eAAe,QAAQ,QAAQ;AAEnC,cAAI,CAACG,GAAE,qBAAqB,OAAO,KAAK,iBAAiB,SAAS,YAAY,GAAG;AAC/E,oBAAQ,OAAO;AACf,mBAAO;AAAA,UACT;AAEA,cAAI,kBAAkB,SAAS,YAAY,GAAG;AAE5C,gBAAI,gBAAgB,SAAS,IAAI,QAAQ,MAAM,QAAQ,EAAE;AACzD,gBAAI,eAAe;AACjB,kBAAI,eAAe,cAAc;AACjC,kBAAI,YAAY,SAAS,oBAAoB,YAAY;AACzD,kBAAI,SAAS,MAAM,UAAU,GAAG;AAC9B,4BAAYA,GAAE,cAAc,WAAW,SAAS,cAAc,YAAY,CAAC;AAAA,cAC7E;AACA,kBAAIsF,eAActF,GAAE,QAAQ,UAAU,OAAO,CAAC;AAC9C,kBAAI,QAAQ,UAAU,OAAO;AAC7B,kBAAI,KAAK,MAAM;AACf,kBAAI,KAAK,MAAM;AACf,kBAAI,QAAQ,cAAc,OAAO;AACjC,kBAAI,QAAQ,MAAM;AAClB,kBAAI,KAAK,MAAM;AACf,kBAAI,OAAO,OAAQ,MAAK;AACxB,kBAAI,KAAK,MAAM;AACf,kBAAI,OAAO,OAAQ,MAAK;AACxB,kBAAI,OAAO;AACT,gBAAAsF,aAAY,OAAO,OAAO,IAAI,EAAE;AAAA,cAClC;AAEA,sBAAQ,OAAO,EAAE,OAAOA,YAAW;AAAA,YACrC;AACA,oBAAQ,OAAO;AACf,mBAAO;AAAA,UACT;AAEA,yCAA+B,QAAQ,SAAU,UAAU;AACzD,gBAAI,aAAa,UAAU,QAAQ,KAAK,MAAM,MAAM,QAAQ;AAC1D;AAAA,YACF;AACA,oBAAQ,WAAW,QAAQ;AAAA,UAC7B,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,QACA,mBAAmB,SAAS,kBAAkB,WAAW,QAAQ;AAC/D,cAAI,MAAM;AACV,cAAI,gCAAgC,IAAI;AACxC,wCAA8B,QAAQ,SAAU,UAAU;AACxD,mBAAO,WAAW,QAAQ;AAAA,UAC5B,CAAC;AAAA,QACH;AAAA,QACA,cAAc,SAAS,aAAa,UAAU,KAAK;AACjD,cAAI,SAAS;AACb,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,oBAAoB,IAAI;AAC5B,cAAI,OAAO,QAAQ;AACnB,cAAI,UAAU,IAAI,QAAQ;AAC1B,cAAI;AACJ,cAAI,YAAY,KAAK;AACnB,gBAAI,CAAC,MAAM;AACT,qBAAO;AAAA,YACT;AACA,uBAAW,IAAI,MAAM;AACrB,8BAAkB,UAAU,SAAU,WAAW;AAC/C,qBAAO,OAAO,mBAAmB,UAAU,SAAS;AAAA,YACtD,CAAC;AAAA,UACH,OAAO;AACL,gBAAI,kBAAkB,SAAS,OAAO,GAAG;AACvC,qBAAO;AAAA,YACT;AACA,uBAAW,IAAI,MAAM;AAAA,UACvB;AACA,eAAK,kBAAkB,UAAU,QAAQ;AACzC,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAS,YAAY;AAC9B,iBAAO,oBAAoB,KAAK;AAAA,QAClC;AAAA,QACA,SAAS,SAAS,QAAQ,UAAU,OAAO;AACzC,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,YAAY,IAAI;AACpB,cAAI,UAAU,IAAI;AAClB,cAAI,UAAU,QAAQ;AACtB,cAAI,QAAQ,QAAQ;AACpB,cAAI,cAAc,kBAAkB,QAAQ,MAAM,cAAc,IAAI;AACpE,cAAI,cAAc,MAAM,KAAK,MAAM,MAAM;AACzC,cAAI,oBAAoB,WAAW,MAAM,KAAK,cAAc,CAAC;AAC7D,cAAI,MAAM,iBAAiB,GAAG;AAC5B,gCAAoB;AAAA,UACtB;AAEA,cAAI,iBAAiB,oBAAoB,UAAU;AAEnD,cAAI,iBAAiB,iBAAiB,cAAc;AACpD,cAAI,SAAS,KAAK,aAAa,UAAU,KAAK;AAC9C,cAAI,CAAC,QAAQ;AACX,gBAAI,WAAW,SAAS,oBAAoB,MAAM,IAAI;AAEtD,qBAAS,QAAQ,SAAS,QAAQ,IAAI,KAAK,SAAS,SAAS,IAAI,GAAG;AACpE,qBAAStF,GAAE,QAAQ,SAAS,OAAO,CAAC;AAAA,UACtC;AACA,iBAAO,KAAK,KAAK;AACjB,iBAAOA,GAAE,QAAQ;AAAA,YACf,MAAM,KAAK,UAAU;AAAA,UACvB,CAAC,EAAE,OAAO,CAAC,OAAO,MAAM,EAAE,KAAK;AAAA,YAC7B,QAAQ,cAAc,UAAU;AAAA,YAChC,UAAU;AAAA,YACV,gBAAgB;AAAA,UAClB,CAAC,GAAG,OAAO,MAAM,EAAE,KAAK;AAAA,YACtB,QAAQ,cAAc,YAAY;AAAA,YAClC,UAAU;AAAA,YACV,gBAAgB;AAAA,UAClB,CAAC,CAAC,CAAC;AAAA,QACL;AAAA,QACA,YAAY,SAAS,WAAW,OAAO;AACrC,cAAI,WAAW,MAAM,IAAI,eAAe,KAAK,UAAU,CAAC;AACxD,cAAI,UAAU;AACZ,kBAAM,KAAK,YAAY,QAAQ;AAAA,UACjC;AAAA,QACF;AAAA,QACA,SAAS,SAAS,QAAQ,OAAO,QAAQ;AACvC,gBAAM,KAAK,YAAY,OAAO,IAAI;AAAA,QACpC;AAAA,QACA,WAAW,SAAS,UAAU,UAAU,MAAM;AAC5C,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,MAAM,IAAI;AACd,cAAI,UAAU,QAAQ;AACtB,cAAI,QAAQ,QAAQ;AACpB,cAAI,WAAW,QAAQ;AACvB,cAAI,aAAa,OAAQ,YAAW;AACpC,cAAI,QAAQ,QAAQ;AACpB,cAAI,QAAQ,YAAY,QAAQ,MAAM,QAAQ,IAAI;AAClD,cAAI,CAAC,SAAS,SAAS,SAAS,IAAI;AAIlC,gBAAI,OAAO;AAAA,UACb;AACA,cAAI,kBAAkB,SAAS,oBAAoB,IAAI,EAAE,QAAQ,UAAU,QAAQ;AACnF,cAAI,kBAAkB,KAAK,cAAc,UAAU,IAAI;AACvD,cAAI,SAAS,KAAK,QAAQ,UAAUA,GAAE,IAAI,CAAC;AAC3C,eAAK,QAAQ,SAAS,OAAO,MAAM;AACnC,cAAI,KAAK,gBAAgB,OAAO,CAAC;AACjC,cAAI,KAAK;AAAA,YACP,aAAaA,GAAE,wBAAwB,eAAe;AAAA,YACtD,QAAQ,UAAU,OAAO,KAAK;AAAA,YAC9B,QAAQ;AAAA,UACV,CAAC;AAAA,QACH;AAAA,QACA,aAAa,SAAS,YAAY,UAAU;AAC1C,eAAK,WAAW,SAAS,KAAK;AAAA,QAChC;AAAA,MACF,CAAC;AACD,UAAI,UAAU,gBAAgB,OAAO;AAAA,QACnC,WAAW;AAAA,QACX,WAAW;AAAA,QACX,kBAAkB,mBAAmB,mBAAmB;AAAA,QACxD,WAAW,SAAU,WAAW,MAAM;AACpC,UAAAA,GAAE,IAAI,EAAE,SAAS,KAAK,gBAAgB;AAAA,QACxC;AAAA,QACA,aAAa,SAAU,WAAW,MAAM;AACtC,UAAAA,GAAE,IAAI,EAAE,YAAY,KAAK,gBAAgB;AAAA,QAC3C;AAAA,MACF,CAAC;AACD,UAAI,YAAY,mBAAmB,aAAa;AAChD,UAAI,WAAW,gBAAgB,OAAO;AAAA,QACpC,WAAW;AAAA,QACX,WAAW;AAAA,QACX,SAAS;AAAA,UACP;AAAA,QACF;AAAA,QACA,WAAW,SAAU,WAAW,MAAM;AACpC,UAAAA,GAAE,IAAI,EAAE,SAAS,KAAK,QAAQ,SAAS;AAAA,QACzC;AAAA,QACA,aAAa,SAAU,WAAW,MAAM;AACtC,UAAAA,GAAE,IAAI,EAAE,YAAY,KAAK,QAAQ,SAAS;AAAA,QAC5C;AAAA,MACF,GAAG;AAAA;AAAA,QAED;AAAA,MACF,CAAC;AACD,UAAI,eAAe;AAAA,QACjB,KAAK;AAAA,QACL,QAAQ;AAAA,MACV;AACA,UAAI,OAAO,gBAAgB,OAAO;AAAA,QAChC,SAAS;AAAA,QACT,WAAW;AAAA,QACX,mBAAmB,WAAY;AAC7B,iBAAO,CAAC,KAAK,QAAQ,SAAS;AAAA,QAChC;AAAA,QACA,YAAY;AAAA,QACZ,WAAW,SAAS,UAAU,aAAa,MAAM;AAC/C,cAAI,SAAS;AACb,cAAI,UAAU,YAAY;AAC1B,cAAI,MAAM,KAAK;AACf,cAAI,YAAY,IAAI;AACpB,cAAI,OAAO,IAAI;AACf,cAAI,SAAS,OAAQ,QAAO;AAC5B,cAAI,MAAM,IAAI;AACd,cAAI,QAAQ,OAAQ,OAAM;AAC1B,cAAI,YAAY,IAAI;AACpB,cAAI,cAAc,OAAQ,aAAY,aAAa;AACnD,cAAI,CAAC,WAAW;AACd,kBAAM,IAAI,MAAM,6BAA6B;AAAA,UAC/C;AACA,cAAI,iBAAiB,OAAO,SAAS,WAAW;AAAA,YAC9C,OAAO;AAAA,YACP,QAAQ;AAAA,UACV,IAAI;AACJ,cAAI,iBAAiB,cAAc,aAAa;AAChD,cAAI,YAAY,iBAAiB,eAAe,QAAQ,eAAe;AACvE,cAAI,QAAQ,QAAQ,IAAI,SAAS;AACjC,cAAI,CAAC,MAAM,QAAQ,KAAK,GAAG;AACzB,oBAAQ,CAAC;AAAA,UACX;AACA,cAAI,YAAY,KAAK,cAAc,CAAC;AACpC,cAAI,aAAa,MAAM,IAAI,SAAU,MAAMK,QAAO;AAChD,mBAAO,QAAQ,UAAUA,MAAK,GAAG,MAAMA,MAAK,CAAC;AAAA,UAC/C,CAAC;AACD,cAAI,UAAU,WAAW,MAAM,UAAU,WAAW,KAAK,SAAU,WAAW;AAC5E,mBAAO,CAAC;AAAA,UACV,CAAC,GAAG;AACF,gBAAI,UAAU,KAAK,IAAI,SAAS;AAChC,gBAAI,WAAW,MAAM,IAAI,SAAU,MAAMA,QAAO;AAC9C,kBAAI,SAASA,UAAS,UAAU,QAAQA,MAAK,EAAE,OAAO;AACtD,kBAAI,WAAWA,MAAK,GAAG;AACrB,uBAAO;AAAA,cACT;AACA,kBAAI,SAAS,OAAO,eAAe,MAAM,gBAAgB,MAAM;AAC/D,kBAAI,CAAC,QAAQ;AACX,uBAAO;AAAA,cACT;AACA,kBAAI,EAAE,kBAAkB,aAAa;AACnC,sBAAM,IAAI,MAAM,kCAAkC;AAAA,cACpD;AACA,qBAAO,QAAQ,QAAQA;AACvB,qBAAO,QAAQ,YAAY;AAC3B,kBAAI,SAASA,UAAS,YAAY;AAClC,qBAAO,aAAa,aAAa,iBAAiB,eAAe,SAAS,SAAS,kBAAkB,SAAS,GAAG;AACjH,qBAAO;AAAA,YACT,CAAC;AACD,iBAAK,IAAI,MAAM,EAAE,OAAO,QAAQ;AAChC,iBAAK,aAAa;AAAA,UACpB;AACA,cAAI,aAAa,MAAM;AACvB,cAAIC,UAAS,eAAe,IAAI,IAAI,aAAa,aAAa,aAAa,KAAK;AAChF,cAAI,WAAW,iBAAiB;AAAA,YAC9B,OAAOA;AAAA,YACP,QAAQ,eAAe;AAAA,UACzB,IAAI;AAAA,YACF,OAAO,eAAe;AAAA,YACtB,QAAQA;AAAA,UACV;AACA,eAAK,SAAS,SAAS,QAAQ;AAAA,QACjC;AAAA,QACA,UAAU,SAAS,SAAS,SAAS,UAAU;AAC7C,cAAI,MAAM;AACV,cAAI,MAAM,IAAI;AACd,cAAI,UAAU,IAAI;AAClB,cAAI,SAAS,QAAQ;AACrB,cAAI,WAAW,OAAQ,UAAS;AAChC,cAAI6H,YAAW,QAAQ;AACvB,cAAIA,cAAa,OAAQ,CAAAA,YAAW;AACpC,cAAI,QAAQ,QAAQ,KAAK;AACzB,cAAI,QAAQ,MAAM;AAClB,cAAI,SAAS,MAAM;AACnB,cAAI,QAAQ,eAAe,MAAM;AACjC,cAAIrG,QAAO,MAAM;AACjB,cAAIE,SAAQ,MAAM;AAClB,cAAID,OAAM,MAAM;AAChB,cAAIE,UAAS,MAAM;AACnB,cAAIT,QAAO,IAAI,KAAKM,OAAMC,MAAK,SAASD,QAAOE,SAAQ,UAAUD,OAAME,QAAO;AAC9E,cAAI,QAAQ,aAAaT,OAAM2G,SAAQ;AACvC,cAAI,IAAI,MAAM;AACd,cAAI,IAAI,MAAM;AAEd,kBAAQA,WAAU;AAAA,YAChB,KAAK,UAAU;AAAA,YACf,KAAK,UAAU;AAAA,YACf,KAAK,UAAU,QACb;AACE,mBAAK,SAAS,QAAQ;AACtB;AAAA,YACF;AAAA,YACF,KAAK,UAAU;AAAA,YACf,KAAK,UAAU;AAAA,YACf,KAAK,UAAU,WACb;AACE,mBAAK,SAAS;AACd;AAAA,YACF;AAAA,UACJ;AAEA,kBAAQA,WAAU;AAAA,YAChB,KAAK,UAAU;AAAA,YACf,KAAK,UAAU;AAAA,YACf,KAAK,UAAU,MACb;AACE,mBAAK,SAAS,SAAS;AACvB;AAAA,YACF;AAAA,YACF,KAAK,UAAU;AAAA,YACf,KAAK,UAAU;AAAA,YACf,KAAK,UAAU,aACb;AACE,mBAAK,SAAS;AACd;AAAA,YACF;AAAA,UACJ;AACA,cAAI,KAAK,aAAa,eAAe,IAAI,OAAO,IAAI,GAAG;AAAA,QACzD;AAAA,MACF,GAAG;AAAA,QACD,YAAY;AAAA,QACZ;AAAA,MACF,CAAC;AACD,UAAI,eAAe;AAAA,QACjB;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,eAAS,gBAAgB,MAAM,SAAS,WAAW,KAAK;AACtD,YAAI,QAAQ,WAAW,MAAM,IAAI,QAAQ;AACzC,eAAO,KAAK,gBAAgB,KAAK;AAAA,MACnC;AACA,eAAS,iBAAiB,MAAM,SAAS,WAAW,KAAK;AACvD,YAAI7H,UAAS,YAAY,MAAM,IAAI,SAAS;AAC5C,eAAO,KAAK,iBAAiBA,OAAM;AAAA,MACrC;AACA,eAAS,yBAAyB,MAAM,SAAS,UAAU,KAAK;AAC9D,YAAI,SAAS;AACb,YAAIoC,QAAO,KAAK,cAAc;AAC9B,YAAI,sBAAsB,KAAK,0BAA0B;AACzD,YAAI,eAAe,IAAI,KAAK,SAAS,MAAM,EAAE,OAAO,GAAG,MAAM,GAAG,SAAS,MAAM,EAAE,OAAO,GAAG,CAAC,MAAM,CAAC;AACnG,YAAI,iBAAiB,IAAI,KAAK,SAAS,MAAM,EAAE,OAAO,QAAQ,CAAC,GAAG,SAAS,MAAM,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;AACrG,YAAI,wBAAwB,aAAa,UAAUA,OAAM;AAAA,UACvD;AAAA,QACF,CAAC;AACD,YAAI,0BAA0B,eAAe,UAAUA,OAAM;AAAA,UAC3D;AAAA,QACF,CAAC;AACD,YAAI,gBAAgB,CAAC;AACrB,YAAI,uBAAuB;AACzB,gBAAM,UAAU,KAAK,MAAM,eAAe,qBAAqB;AAAA,QACjE;AACA,YAAI,yBAAyB;AAC3B,gBAAM,UAAU,KAAK,MAAM,eAAe,uBAAuB;AAAA,QACnE;AACA,YAAI,cAAc,SAAS,GAAG;AAC5B,iBAAO,SAAS,cAAc,aAAa;AAAA,QAC7C;AACA,YAAI,gBAAgB,KAAK;AACvB,iBAAO,eAAe,MAAM,IAAI,UAAU;AAAA,QAC5C;AACA,eAAO,kBAAkB,MAAM,SAAS,UAAU,GAAG;AAAA,MACvD;AACA,eAAS,mBAAmB,MAAM,SAAS,UAAU,MAAM;AACzD,YAAI,eAAe,KAAK,gBAAgB,QAAQ;AAChD,YAAI,CAAC,cAAc;AACjB,iBAAO,IAAI,MAAM;AAAA,QACnB;AACA,eAAO;AAAA,MACT;AACA,eAAS,WAAW7C,KAAI;AACtB,eAAO,SAAU,MAAM,QAAQ,KAAK,KAAK;AACvC,cAAI,eAAe,SAAS;AAC1B,gBAAI,UAAU,KAAK,MAAM,SAAS,GAAG;AACrC,gBAAI;AACJ,gBAAI,SAAS;AACX,kBAAI,QAAQ,iBAAiB,GAAG,GAAG;AACjC,oBAAI,WAAW,aAAa,MAAM,IAAI,UAAU;AAChD,2BAAW,eAAe,SAAS,QAAQ;AAAA,cAC7C,OAAO;AACL,2BAAW,QAAQ,YAAY,GAAG,EAAE,OAAO;AAAA,cAC7C;AAAA,YACF,OAAO;AAEL,yBAAW,IAAI,MAAM;AAAA,YACvB;AACA,mBAAOA,IAAG,KAAK,MAAM,MAAM,QAAQ,UAAU,GAAG;AAAA,UAClD;AACA,iBAAOA,IAAG,MAAM,MAAM,SAAS;AAAA,QACjC;AAAA,MACF;AACA,eAAS,eAAe,MAAM,OAAO;AACnC,YAAI,cAAc,WAAW,KAAK;AAClC,YAAI,aAAa,KAAK,GAAG;AACvB,iBAAO,KAAK,gBAAgB,cAAc,GAAG;AAAA,QAC/C,OAAO;AACL,iBAAO,KAAK,iBAAiB,WAAW;AAAA,QAC1C;AAAA,MACF;AACA,UAAI,0BAA0B,WAAW,wBAAwB;AACjE,UAAI,oBAAoB,WAAW,kBAAkB;AACrD,UAAI,cAAc;AAAA,QAChB;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,eAAS,YAAY,IAAI,IAAI,QAAQ;AACnC,YAAI,cAAc,MAAM,GAAG;AACzB,cAAI,IAAI,OAAO;AACf,cAAI,IAAI,OAAO;AACf,cAAI,SAAS,CAAC,GAAG;AACf,gBAAIsC,QAAO,IAAI,KAAK,IAAI,EAAE;AAC1B,gBAAI,MAAMA,MAAK,SAAS,CAAC;AACzB,gBAAI,QAAQ,IAAI;AAChB,gBAAI,MAAM,IAAI;AACd,iBAAK;AACL,iBAAK;AAAA,UACP;AACA,mBAAS;AAAA,QACX;AACA,YAAI,CAAC,SAAS,MAAM,GAAG;AACrB,iBAAO;AAAA,QACT;AACA,YAAI7B,UAAS,GAAG,SAAS,EAAE;AAC3B,YAAI,WAAW,KAAKA,UAAS,GAAG;AAC9B,iBAAO;AAAA,QACT;AACA,eAAO,GAAG,KAAK,IAAI,CAAC,KAAK,IAAI,QAAQA,UAAS,CAAC,CAAC;AAAA,MAClD;AACA,eAAS,SAAS,QAAQ;AACxB,YAAI0F,UAAS,OAAO,aAAa,cAAc;AAC/C,YAAIA,YAAW,MAAM;AACnB,iBAAO;AAAA,QACT;AACA,eAAO,WAAWA,OAAM,KAAK;AAAA,MAC/B;AACA,eAAS,UAAU7D,OAAM,MAAM,QAAQ;AACrC,YAAI,WAAW,OAAQ,UAAS;AAChC,YAAI,YAAY,GAAG,GAAG;AACtB,YAAI,QAAQA,MAAK;AACjB,YAAI,MAAMA,MAAK;AACf,gBAAQ,MAAM;AAAA,UACZ,KAAK;AACH,yBAAa;AACb,gBAAI;AACJ,gBAAI;AACJ,wBAAY;AACZ;AAAA,UACF,KAAK;AACH,yBAAa;AACb,gBAAI;AACJ,gBAAI;AACJ,wBAAY;AACZ;AAAA,UACF,KAAK;AACH,yBAAa;AACb,gBAAI;AACJ,gBAAI;AACJ,wBAAY;AACZ;AAAA,UACF,KAAK;AACH,yBAAa;AACb,gBAAI;AACJ,gBAAI;AACJ,wBAAY;AACZ;AAAA,UACF;AACE;AAAA,QACJ;AACA,YAAI,MAAM,UAAU,IAAI,IAAI,UAAU,GAAG;AACvC,YAAE,UAAU,IAAI,EAAE,UAAU;AAAA,QAC9B,OAAO;AACL,YAAE,UAAU,IAAI,EAAE,UAAU;AAAA,QAC9B;AACA,YAAI,SAAS,MAAM,GAAG;AACpB,YAAE,UAAU,KAAK,YAAY;AAC7B,YAAE,UAAU,KAAK,YAAY;AAAA,QAC/B;AAAA,MACF;AAIA,eAAS,sBAAsBA,OAAM,OAAO,SAAS,KAAK;AACxD,YAAI,SAAS,IAAI;AACjB,YAAI,cAAc,IAAI;AACtB,YAAI0D,SAAQ,IAAI;AAChB,YAAIA,QAAO;AACT,oBAAU1D,OAAM0D,QAAO,WAAW;AAAA,QACpC;AACA,eAAO,YAAY1D,MAAK,KAAKA,MAAK,OAAO,MAAM;AAAA,MACjD;AACA,eAAS,iBAAiBA,OAAM,MAAM,QAAQ,KAAK;AACjD,YAAIX,QAAO,KAAK,YAAY,MAAM;AAClC,YAAI,IAAI,QAAQ;AACd,UAAAA,MAAK,QAAQ,SAAS,MAAM,IAAI,CAAC;AAAA,QACnC;AACA,YAAI,gBAAgBW,MAAK,UAAUX,KAAI;AACvC,YAAI,KAAK,gBAAgBW,MAAK,MAAM,cAAc,aAAa,IAAIA,MAAK;AACxE,eAAO,YAAY,IAAIA,MAAK,OAAO,IAAI,MAAM;AAAA,MAC/C;AACA,eAAS,sBAAsBA,OAAM,MAAM,QAAQ,KAAK;AACtD,YAAI,QAAQ,KAAK,MAAM,MAAM;AAC7B,YAAI,UAAU,GAAG;AACf,iBAAO,iBAAiBA,OAAM,MAAM,QAAQ,GAAG;AAAA,QACjD;AACA,YAAI,iBAAiB,KAAK,qBAAqB,MAAM;AACrD,YAAI,IAAI,QAAQ;AACd,yBAAe,QAAQ,SAAS,MAAM,IAAI,CAAC;AAAA,QAC7C;AACA,YAAIK,UAAS,eAAe,OAAO;AACnC,YAAI,iBAAiBL,MAAK,MAAM,EAAE,OAAOK,SAAQ,KAAK;AACtD,YAAI,gBAAgB,eAAe,UAAU,GAAG,EAAE,UAAU,cAAc;AAC1E,YAAI,KAAK,gBAAgB,eAAe,MAAM,cAAc,aAAa,EAAE,OAAOA,SAAQ,CAAC,KAAK,IAAIL,MAAK;AACzG,eAAO,YAAY,IAAIA,MAAK,OAAO,IAAI,MAAM;AAAA,MAC/C;AACA,eAAS,cAAc,QAAQ;AAC7B,YAAI,CAAC,QAAQ;AACX,iBAAO;AAAA,QACT;AACA,YAAI,OAAO;AACX,WAAG;AACD,cAAI,UAAU,KAAK;AACnB,cAAI,OAAO,YAAY,UAAU;AAC/B,mBAAO;AAAA,UACT;AACA,oBAAU,QAAQ,YAAY;AAC9B,cAAI,YAAY,KAAK;AACnB,mBAAO,KAAK;AAAA,UACd,WAAW,YAAY,SAAS;AAC9B,mBAAO,KAAK;AAAA,UACd,OAAO;AACL;AAAA,UACF;AAAA,QACF,SAAS;AACT,eAAO;AAAA,MACT;AACA,UAAI,oBAAoB;AACxB,UAAI,kBAAkB;AACtB,eAAS,qBAAqBA,OAAM,MAAM,QAAQ,KAAK;AACrD,YAAI,MAAMD;AACV,YAAI,WAAW,IAAI;AACnB,YAAIsF,UAASrF,MAAK;AAClB,YAAI,OAAO,aAAa,UAAU;AAChC,iBAAO,KAAK,eAAe,QAAQ,EAAE,CAAC;AAAA,QACxC,WAAW,aAAa,OAAO;AAC7B,iBAAO;AAAA,QACT,WAAW,MAAM,QAAQ,QAAQ,GAAG;AAClC,iBAAO,UAAU,QAAQ,QAAQ;AAAA,QACnC,OAAO;AACL,iBAAO,cAAc,MAAM;AAAA,QAC7B;AACA,YAAI,CAACnC,GAAE,qBAAqB,IAAI,GAAG;AACjC,cAAI,SAAS,UAAU,CAACA,GAAE,qBAAqB,MAAM,GAAG;AACtD,mBAAOwH;AAAA,UACT;AACA,iBAAO;AAAA,QACT;AACA,YAAI,aAAa,KAAK,aAAa,IAAI;AACvC,YAAI,eAAe,KAAK,cAAc,IAAI;AAC1C,YAAI,kBAAkB,KAAK,uBAAuB;AAClD,YAAI,eAAe,KAAK,oBAAoB;AAC5C,YAAI,eAAe,gBAAgB,SAAS,YAAY,EAAE,SAAS,YAAY;AAC/E,YAAI,cAAc,aAAa,QAAQ;AACvC,YAAI,YAAYxH,GAAE,cAAcmC,OAAM,WAAW;AACjD,YAAI,WAAW,UAAU,MAAM,MAAM;AACrC,YAAIS,QAAO,KAAK,YAAY,IAAI;AAChC,YAAI,IAAI,cAAc,OAAO;AAC3B,cAAI,CAACA,MAAK,eAAe,GAAG;AAC1B,YAAAA,MAAK,eAAe,IAAI,WAAW,KAAK;AAAA,UAC1C;AACA,cAAI,YAAYA,MAAK,eAAe;AACpC,cAAI,UAAU,cAAc,QAAQ,GAAG;AACrC,mBAAO4E;AAAA,UACT;AAAA,QACF;AAGA,YAAI;AACJ,YAAI,sBAAsB,MAAM;AAC9B,cAAI,YAAY,IAAI,aAAa;AACjC,cAAI,CAAC5E,MAAK,iBAAiB,GAAG;AAC5B,YAAAA,MAAK,iBAAiB,IAAI,WAAW,uBAAuB;AAAA,cAC1D;AAAA,YACF,CAAC;AAAA,UACH;AACA,oBAAU;AAAA,YACR;AAAA,YACA,qBAAqBA,MAAK,iBAAiB;AAAA,UAC7C;AAAA,QACF;AACA,YAAI,IAAI,gBAAgB,MAAM;AAC5B,oBAAU,UAAU,GAAG;AAAA,QACzB;AACA,QAAAV,gBAAe,UAAU,UAAU,YAAY,OAAO;AACtD,YAAIA,eAAc;AAEhB,cAAIlC,GAAE,QAAQkC,aAAY,GAAG;AAC3B,YAAAA,gBAAe,SAAS,cAAcA,aAAY;AAAA,UACpD;AAAA,QACF,WAAW,IAAI,WAAW,MAAM;AAE9B,cAAI,sBAAsB,MAAM;AAC9B,YAAAA,gBAAe,WAAW,oBAAoB,QAAQ;AAAA,UACxD,WAAW,sBAAsB,SAAS;AACxC,YAAAA,gBAAe,WAAW,sCAAsC,QAAQ;AAAA,UAC1E,OAAO;AACL,YAAAA,gBAAe,WAAW,aAAa,UAAU,OAAO;AAAA,UAC1D;AAAA,QACF;AACA,YAAI,KAAKA,gBAAelC,GAAE,eAAekC,eAAc,YAAY,IAAIsF;AACvE,YAAI,WAAW,IAAI,UAAU;AAC7B,YAAI,IAAI,QAAQ;AACd,sBAAY,SAAS,IAAI,IAAI;AAAA,QAC/B;AACA,eAAO,YAAY,IAAIrF,MAAK,OAAO,QAAQ;AAAA,MAC7C;AACA,UAAI,SAAS;AACb,UAAI,OAAO;AACX,UAAI,YAAY;AAChB,UAAI,WAAW;AACf,UAAI,mBAAmB;AAAA,QACrB;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,eAAS,YAAY,QAAQ;AAC3B,eAAO,SAAU,MAAM,QAAQ,KAAK,KAAK;AACvC,cAAI,SAAS,CAAC,CAAC,IAAI;AACnB,cAAIX,QAAO,SAAS,KAAK,qBAAqB,MAAM,IAAI,KAAK,YAAY,MAAM;AAC/E,cAAIgG,UAAShG,MAAK,MAAM,EAAE;AAC1B,cAAI,KAAK,IAAI;AACb,cAAI,IAAI;AACN,gBAAI,eAAe,aAAa,EAAE;AAClC,iBAAK,WAAW,EAAE;AAClB,gBAAI,SAAS,EAAE,GAAG;AAChB,kBAAI,cAAc;AAChB,sBAAM;AACN,sBAAMA,MAAK;AAAA,cACb;AACA,cAAAgG,QAAO,KAAK;AAAA,YACd;AAAA,UACF;AACA,cAAI,KAAK,IAAI;AACb,cAAI,IAAI;AACN,gBAAI,eAAe,aAAa,EAAE;AAClC,iBAAK,WAAW,EAAE;AAClB,gBAAI,SAAS,EAAE,GAAG;AAChB,kBAAI,cAAc;AAChB,sBAAM;AACN,sBAAMhG,MAAK;AAAA,cACb;AACA,cAAAgG,QAAO,KAAK;AAAA,YACd;AAAA,UACF;AACA,iBAAO,SAASA,QAAO,OAAO,KAAK,MAAM,QAAQ,EAAE,OAAO,GAAG,CAAC,KAAK,MAAM,MAAM,CAAC,IAAIA;AAAA,QACtF;AAAA,MACF;AACA,eAAS,eAAe,MAAM,QAAQ,UAAU,KAAK;AACnD,YAAI,QAAQ,KAAK,MAAM,MAAM;AAC7B,YAAIhG,QAAO,KAAK,YAAY,MAAM;AAClC,YAAIgG,UAAShG,MAAK,OAAO;AACzB,YAAI4G,WAAU5G,MAAK,OAAO;AAC1B,YAAI6G,eAAc7G,MAAK,OAAO;AAC9B,YAAI,UAAU,IAAI;AAClB,YAAI,CAAC,SAAS,OAAO,GAAG;AACtB,oBAAU;AAAA,QACZ;AACA,YAAI4G,SAAQ,IAAI,WAAW,SAAS,KAAK,SAAS,KAAKC,aAAY,IAAI,SAAS;AAC9E,cAAI,KAAK,SAAS,IAAIb,QAAO;AAC7B,UAAAA,QAAO,KAAK,UAAU,KAAK,UAAU,MAAM,IAAI,KAAK,IAAI,KAAK,IAAI,MAAM,KAAK,CAAC;AAC7E,UAAAA,QAAO,KAAK;AAAA,QACd,WAAWY,SAAQ,IAAI,WAAW,SAAS,KAAK,SAAS,KAAKC,aAAY,IAAI,SAAS;AACrF,cAAI,KAAK,SAAS,IAAIb,QAAO;AAC7B,UAAAA,QAAO,KAAK,UAAU,MAAM,UAAU,MAAM,IAAI,KAAK,KAAK,IAAI,MAAM,KAAK,CAAC;AAC1E,UAAAA,QAAO,KAAK;AAAA,QACd;AACA,eAAOA;AAAA,MACT;AACA,eAAS,SAAS,MAAM,QAAQ,UAAU,KAAK;AAC7C,YAAI,SAAS,CAAC,CAAC,IAAI;AACnB,YAAIhG,OAAM,OAAOgB;AACjB,YAAI,QAAQ;AACV,UAAAhB,QAAO,KAAK,qBAAqB,MAAM;AACvC,UAAAgB,UAAS,KAAK,MAAM,QAAQ,EAAE,OAAO;AACrC,kBAAQ,KAAK,MAAM,MAAM;AAAA,QAC3B,OAAO;AACL,UAAAhB,QAAO,KAAK,YAAY,MAAM;AAAA,QAChC;AACA,YAAI,UAAU,IAAI;AAClB,YAAI,SAAS,OAAO,GAAG;AACrB,UAAAA,MAAK,QAAQ,OAAO;AAAA,QACtB;AACA,YAAI,QAAQ;AACV,mBAAS,OAAOgB,SAAQ,KAAK;AAAA,QAC/B;AACA,YAAI,OAAOhB,MAAK,mBAAmB,QAAQ;AAC3C,YAAIgG;AACJ,gBAAQ,MAAM;AAAA,UACZ,KAAK;AACH,YAAAA,UAAShG,MAAK,WAAW;AACzB;AAAA,UACF,KAAK;AACH,YAAAgG,UAAShG,MAAK,YAAY;AAC1B;AAAA,UACF,KAAK;AACH,YAAAgG,UAAShG,MAAK,UAAU;AACxB;AAAA,UACF,KAAK;AACH,YAAAgG,UAAShG,MAAK,aAAa;AAC3B;AAAA,QACJ;AACA,eAAO,SAASgG,QAAO,OAAOhF,SAAQ,CAAC,KAAK,IAAIgF;AAAA,MAClD;AAIA,eAAS,aAAa,MAAM,SAAS,WAAW,KAAK,SAAS;AAC5D,eAAO,KAAK,MAAM,0BAA0B,KAAK,OAAO,OAAO,EAAE,OAAO,IAAI,IAAI,IAAI,EAAE;AAAA,MACxF;AAGA,UAAI,SAAS,YAAY,QAAQ;AACjC,UAAI,QAAQ,YAAY,WAAW;AACnC,UAAI,WAAW,YAAY,cAAc;AACzC,UAAI,SAAS,YAAY,YAAY;AACrC,UAAI,UAAU,YAAY,aAAa;AACvC,UAAI,UAAU,YAAY,QAAQ;AAClC,UAAI,WAAW,YAAY,UAAU;AACrC,UAAI,aAAa,YAAY,YAAY;AACzC,UAAI,cAAc,YAAY,QAAQ;AACtC,UAAI,gBAAgB,WAAW,cAAc;AAC7C,UAAI,UAAU,WAAW,QAAQ;AACjC,UAAI,cAAc;AAClB,UAAI,UAAU;AAAA,QACZ;AAAA,QACA,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,OAAO;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,UAAI,eAAe;AAAA,QACjB,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,OAAO;AAAA,MACT;AACA,UAAI,YAAY;AAChB,UAAI,gBAAgB;AACpB,UAAI,mBAAmB;AACvB,UAAI,oBAAoB;AACxB,UAAI,eAAe;AAEnB,UAAI,sBAAsB,SAAS;AACnC,UAAI,sBAAsB,CAAC;AAC3B,0BAAoB,oBAAoB,OAAO,IAAI;AAAA,QACjD,MAAM;AAAA,QACN,SAAS;AAAA,UACP,SAAS;AAAA,QACX;AAAA,MACF;AACA,0BAAoB,oBAAoB,mBAAmB,IAAI;AAAA,QAC7D,MAAM;AAAA,QACN,SAAS;AAAA,UACP,WAAW;AAAA,QACb;AAAA,MACF;AACA,0BAAoB,oBAAoB,oBAAoB,IAAI;AAAA,QAC9D,MAAM;AAAA,QACN,SAAS;AAAA,UACP,WAAW;AAAA,QACb;AAAA,MACF;AACA,UAAI,gBAAgB,CAAC;AAAA,QACnB,MAAM,YAAY;AAAA,MACpB,GAAG;AAAA,QACD,MAAM,YAAY;AAAA,MACpB,GAAG;AAAA,QACD,MAAM,YAAY;AAAA,MACpB,GAAG;AAAA,QACD,MAAM,YAAY;AAAA,MACpB,GAAG;AAAA,QACD,MAAM,YAAY;AAAA,MACpB,CAAC;AACD,UAAI,QAAQ,KAAK,OAAO;AAAA,QACtB,WAAW;AAAA,QACX,SAAS;AAAA,UACP,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,QAAQ;AAAA,YACN,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA;AAAA,UAEA,UAAU;AAAA;AAAA;AAAA,UAGV,UAAU;AAAA;AAAA,UAEV,cAAc;AAAA;AAAA;AAAA,UAGd,YAAY;AAAA,UACZ,oBAAoB;AAAA,UACpB,aAAa;AAAA,UACb,UAAU;AAAA,UACV,YAAY;AAAA;AAAA,UAEZ,WAAW;AAAA;AAAA,UAEX,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAOf,aAAa;AAAA;AAAA,UAEb,YAAY;AAAA;AAAA,UAEZ,OAAO,SAAU,KAAK,MAAM;AAE1B,mBAAO;AAAA,UACT;AAAA,UACA,cAAc;AAAA;AAAA,UAEd,oBAAoB;AAAA;AAAA,UAEpB,2BAA2B;AAAA;AAAA,UAE3B,0BAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAY1B,mBAAmB;AAAA;AAAA;AAAA;AAAA,UAInB,eAAe;AAAA;AAAA;AAAA;AAAA,UAIf,aAAa,IAAI,KAAK;AAAA;AAAA;AAAA,UAGtB,kBAAkB;AAAA,YAChB,MAAM;AAAA,UACR;AAAA;AAAA;AAAA,UAGA,eAAe;AAAA,YACb,MAAM;AAAA,UACR;AAAA,UACA,eAAe;AAAA,YACb,MAAM;AAAA,UACR;AAAA,UACA,mBAAmB;AAAA,YACjB,MAAM;AAAA,UACR;AAAA,UACA,wBAAwB;AAAA,YACtB,MAAM;AAAA,UACR;AAAA;AAAA,UAGA,oBAAoB;AAAA;AAAA,UAEpB,gBAAgB,SAAU,WAAW,QAAQ,MAAM;AACjD,mBAAO,OAAO,aAAa,QAAQ,MAAM;AAAA,UAC3C;AAAA;AAAA;AAAA,UAGA,oBAAoB,SAAU,WAAW,UAAU,WAAW,UAAU,KAAK,WAAW;AACtF,oBAAQ,QAAQ,WAAW,YAAY,sBAAsB;AAAA,UAC/D;AAAA;AAAA;AAAA;AAAA,UAKA,eAAe;AAAA;AAAA,UAEf,mBAAmB,SAAU,WAAW,YAAY;AAElD,mBAAO;AAAA,UACT;AAAA;AAAA,UAEA,qBAAqB,SAAU,WAAW;AAExC,mBAAO;AAAA,UACT;AAAA;AAAA;AAAA,UAGA,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA,UAMd,iBAAiB;AAAA;AAAA,UAEjB,aAAa;AAAA,YACX,WAAW;AAAA,UACb;AAAA;AAAA;AAAA,UAGA,aAAa;AAAA;AAAA;AAAA;AAAA,UAIb,WAAW;AAAA;AAAA,UAEX,gBAAgB;AAAA;AAAA,UAEhB,eAAe;AAAA;AAAA;AAAA,UAGf,iBAAiB;AAAA;AAAA,UAGjB,SAAS,aAAa;AAAA,UACtB,QAAQ;AAAA,UACR,YAAY;AAAA;AAAA,UAEZ,cAAc,SAAU,MAAM,MAAM,UAAU,KAAK,OAAO;AAMxD,gBAAI,QAAQ,KAAK,cAAc,KAAK,gBAAgB,IAAI,YAAY,IAAI,SAAS;AAC/E;AAAA,YACF;AACA,kBAAM,4BAA4B,MAAM,UAAU,GAAG;AAAA,UACvD;AAAA;AAAA,UAEA,iBAAiB,SAAU,MAAM,MAAM,OAAO;AAC5C,mBAAO,MAAM,yBAAyB,MAAM,IAAI;AAAA,UAClD;AAAA,UACA,cAAc;AAAA;AAAA,UAGd,aAAa;AAAA;AAAA,UAGb,UAAU;AAAA;AAAA,UAGV,mBAAmB;AAAA,UACnB,iBAAiB;AAAA,UACjB,oBAAoB;AAAA,UACpB,sBAAsB;AAAA,UACtB,iBAAiB;AAAA,UACjB,qBAAqB;AAAA,UACrB,0BAA0B;AAAA,UAC1B,UAAU;AAAA,QACZ;AAAA,QACA,QAAQ;AAAA,UACN,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,eAAe;AAAA,UACf,aAAa;AAAA,UACb,cAAc;AAAA,UACd,aAAa;AAAA,UACb,YAAY;AAAA,UACZ,cAAc;AAAA,UACd,cAAc;AAAA,UACd,SAAS;AAAA,UACT,0BAA0B;AAAA,UAC1B,0BAA0B;AAAA,UAC1B,2BAA2B;AAAA,UAC3B,2BAA2B;AAAA,UAC3B,iCAAiC;AAAA,UACjC,oCAAoC;AAAA,UACpC,gCAAgC;AAAA;AAAA,UAEhC,iCAAiC;AAAA,UACjC,+BAA+B;AAAA;AAAA,QACjC;AAAA,QACA,gBAAgB;AAAA,UACd,aAAa;AAAA,UACb,aAAa;AAAA,UACb,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,eAAe;AAAA,QACjB;AAAA,QACA,KAAK;AAAA,QACL,UAAU;AAAA,QACV,MAAM;AAAA,QACN,OAAO;AAAA,QACP,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,WAAW;AAAA;AAAA,QAEX,iBAAiB;AAAA;AAAA;AAAA,QAGjB,0BAA0B;AAAA;AAAA,QAE1B,UAAU;AAAA;AAAA,QAEV,SAAS;AAAA,QACT,uBAAuB,CAAC,OAAO,YAAY,SAAS;AAAA,QACpD,yBAAyB,CAAC,WAAW;AAAA;AAAA;AAAA,QAGrC,wBAAwB,CAAC,YAAY,SAAS,UAAU,UAAU,QAAQ;AAAA;AAAA;AAAA,QAG1E,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAOnB;AAAA,QAAQ;AAAA,QACR,WAAW;AAAA,QACX,MAAM,WAAY;AAChB,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,KAAK,IAAI;AACb,cAAI,CAAC,QAAQ,mBAAmB;AAE9B,oBAAQ,oBAAoB,OAAO,UAAU,eAAe,MAAM,OAAO,QAAQ,IAAI,MAAM,SAAS;AAAA,UAEtG;AACA,cAAI,QAAQ,KAAK,QAAQ,QAAQ,SAAS,IAAI,MAAM;AAGpD,eAAK,UAAU,CAAC;AAChB,eAAK,QAAQ,QAAQ,QAAQ;AAC7B,eAAK,aAAa;AAClB,eAAK,OAAO;AACZ,eAAK,eAAe;AACpB,eAAK,eAAe;AAGpB,eAAK,SAAS,CAAC;AAGf,eAAK,iBAAiB;AAAA,YACpB,OAAO;AAAA,YACP,QAAQ,CAAC;AAAA,UACX;AAGA,eAAK,YAAY,EAAE,GAAG,aAAa;AAEnC,eAAK,WAAW,MAAM,WAAW,MAAM,MAAM;AAE7C,cAAI,CAAC,KAAK,SAAS,KAAK,KAAK,QAAQ,GAAG;AACtC,iBAAK,iBAAiB;AAAA,UACxB;AAAA,QACF;AAAA,QACA,eAAe,WAAY;AACzB,iBAAO,KAAK,WAAW;AAAA,YACrB,IAAI;AAAA,YACJ,YAAY,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAAA,YACvB,eAAe,CAAC;AAAA,YAChB,aAAa,CAAC;AAAA,YACd,WAAW,CAAC;AAAA,YACZ,SAAS,CAAC;AAAA,YACV,OAAO;AAAA,YACP,WAAW;AAAA,YACX,WAAW;AAAA,YACX,MAAM;AAAA,YACN,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,QACA,gBAAgB,WAAY;AAC1B,cAAI,QAAQ,KAAK;AACjB,eAAK,SAAS,OAAO,OAAO,KAAK,WAAW,EAAE,SAAS,OAAO,UAAU,KAAK,aAAa,EAAE,SAAS,OAAO,UAAU,KAAK,YAAY,EAAE,SAAS,OAAO,SAAS,KAAK,YAAY,EAAE,SAAS,OAAO,QAAQ,KAAK,WAAW,EAAE,SAAS,OAAO,cAAc,KAAK,gBAAgB;AAClR,eAAK,GAAG,kBAAkB,KAAK,eAAe,EAAE,GAAG,oBAAoB,KAAK,iBAAiB,EAAE,GAAG,mBAAmB,KAAK,MAAM;AAAA,QAClI;AAAA,QACA,aAAa,SAAU,MAAM,GAAG,KAAK;AACnC,cAAI,WAAW,IAAI;AACnB,cAAI,KAAK,QAAQ,KAAK,CAAC,SAAS,QAAQ,GAAG;AACzC,iBAAK,WAAW,MAAM,GAAG;AAAA,UAC3B,OAAO;AACL,gBAAI,IAAI,gBAAgB,UAAU;AAChC,mBAAK,OAAO;AAAA,gBACV,KAAK;AAAA,cACP,CAAC;AAAA,YACH;AACA,iBAAK,WAAW,MAAM,GAAG;AACzB,gBAAI,aAAa,GAAG;AAClB,mBAAK,SAAS;AAAA,gBACZ,KAAK;AAAA,cACP,CAAC;AAAA,YACH;AAAA,UACF;AAAA,QACF;AAAA,QACA,eAAe,SAAU,MAAM,GAAG,KAAK;AACrC,cAAI,OAAO,KAAK,gBAAgB,IAAI;AACpC,cAAI,MAAM;AACR,iBAAK,kBAAkB,MAAM,KAAK,aAAa,KAAK,iBAAiB,GAAG;AAAA,UAC1E;AAAA,QACF;AAAA,QACA,cAAc,SAAU,MAAM,KAAK;AACjC,cAAI,SAAS,KAAK,MAAM,WAAW,OAAO;AACxC;AAAA,UACF;AACA,cAAI,KAAK,WAAW,GAAG,KAAK,KAAK,QAAQ,YAAY,aAAa,QAAQ;AACxE,gBAAI,OAAO,KAAK,gBAAgB,IAAI;AACpC,gBAAI,MAAM;AACR,mBAAK,kBAAkB,MAAM,KAAK,aAAa,KAAK,iBAAiB,GAAG;AAAA,YAC1E;AAAA,UACF;AAAA,QACF;AAAA,QACA,cAAc,SAAU,YAAY,KAAK;AACvC,eAAK,YAAY;AACjB,eAAK,WAAW,WAAW,QAAQ,GAAG;AAAA,QACxC;AAAA,QACA,aAAa,WAAY;AACvB,cAAI,KAAK,MAAM,eAAe,KAAK,qBAAqB,GAAG;AACzD;AAAA,UACF;AACA,eAAK,UAAU;AAAA,QACjB;AAAA,QACA,kBAAkB,SAAU5E,OAAM;AAChC,cAAI,KAAK,SAAS,GAAG;AACnB;AAAA,UACF;AACA,cAAI,OAAOA,SAAQA,MAAK;AACxB,cAAI,QAAQ,KAAK;AACjB,cAAI,CAAC,KAAK,QAAQ,GAAG;AACnB,gBAAI,wBAAwB,KAAK;AACjC,gBAAI,sBAAsB,SAAS,IAAI,KAAK,CAAC,MAAM,eAAe,qBAAqB,GAAG;AACxF,mBAAK,YAAYA,KAAI;AAAA,YACvB;AAAA,UACF;AACA,cAAI,sBAAsB,KAAK;AAC/B,cAAI,oBAAoB,SAAS,IAAI,KAAK,CAAC,MAAM,eAAe,mBAAmB,GAAG;AACpF,iBAAK,UAAU;AAAA,UACjB;AAAA,QACF;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,mBAAmB,QAAQ;AAC/B,cAAI,gBAAgB,QAAQ;AAC5B,cAAI,yBAAyB,QAAQ;AACrC,cAAI,gBAAgB,QAAQ;AAC5B,cAAI,oBAAoB,QAAQ;AAChC,cAAI,SAAS,QAAQ;AACrB,cAAI,eAAe,QAAQ;AAC3B,cAAI,oBAAoB,QAAQ;AAChC,cAAI,cAAc,QAAQ;AAI1B,cAAI,CAAC,qBAAqB,OAAO,UAAU,eAAe,MAAM,OAAO,QAAQ,GAAG;AAChF,oBAAQ,oBAAoB,MAAM;AAAA,UACpC;AAKA,cAAI,CAAC,WAAW,gBAAgB,GAAG;AACjC,oBAAQ,mBAAmB,UAAU,gBAAgB;AAAA,UACvD;AACA,cAAI,CAAC,WAAW,aAAa,GAAG;AAC9B,oBAAQ,gBAAgB,UAAU,aAAa;AAAA,UACjD;AACA,cAAI,CAAC,WAAW,sBAAsB,GAAG;AACvC,oBAAQ,yBAAyB,UAAU,sBAAsB;AAAA,UACnE;AACA,cAAI,CAAC,WAAW,aAAa,GAAG;AAC9B,oBAAQ,gBAAgB,UAAU,aAAa;AAAA,UACjD;AACA,cAAI,CAAC,WAAW,iBAAiB,GAAG;AAClC,oBAAQ,oBAAoB,UAAU,iBAAiB;AAAA,UACzD;AACA,cAAI,cAAc,WAAW,GAAG;AAC9B,oBAAQ,cAAc,OAAO,CAAC,GAAG,WAAW;AAAA,UAC9C;AACA,cAAI,cAAc,YAAY,GAAG;AAE/B,oBAAQ,eAAe,aAAa,CAAC,GAAG,cAAc,mBAAmB;AAAA,UAC3E;AACA,kBAAQ,SAAS,OAAO,CAAC,GAAG,MAAM;AAAA,QACpC;AAAA,QACA,UAAU,WAAY;AACpB,cAAI,KAAK5C,GAAE;AACX,iBAAO,CAAC;AAAA,YACN,cAAc,GAAG;AAAA,YACjB,SAAS;AAAA,YACT,WAAW,mBAAmB,kBAAkB;AAAA,YAChD,UAAU;AAAA,UACZ,GAAG;AAAA,YACD,cAAc,GAAG;AAAA,YACjB,SAAS;AAAA,YACT,WAAW,mBAAmB,YAAY;AAAA,YAC1C,UAAU;AAAA,UACZ,GAAG;AAAA,YACD,cAAc,GAAG;AAAA,YACjB,SAAS;AAAA,YACT,YAAY;AAAA,cACV,SAAS;AAAA,cACT,UAAU;AAAA,cACV,eAAe,GAAG;AAAA,YACpB;AAAA,YACA,UAAU;AAAA,YACV,UAAU,CAAC;AAAA;AAAA;AAAA,cAGT,SAAS;AAAA,cACT,UAAU;AAAA,YACZ,GAAG;AAAA,cACD,SAAS;AAAA,cACT,WAAW,mBAAmB,QAAQ;AAAA,cACtC,UAAU;AAAA,YACZ,CAAC;AAAA,UACH,CAAC;AAAA,QACH;AAAA,QACA,cAAc,SAAS,aAAa,WAAW;AAC7C,iBAAO,aAAa,KAAK;AAAA,QAC3B;AAAA,QACA,cAAc,SAAS,aAAa,WAAW;AAC7C,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,aAAa,SAAS;AACxB,mBAAO,QAAQ,SAAS;AAAA,UAC1B;AACA,gBAAM,IAAI,MAAM,+BAAgC,YAAY,GAAI;AAAA,QAClE;AAAA,QACA,cAAc,SAAS,aAAa,WAAW;AAC7C,iBAAO,KAAK,aAAa,SAAS,EAAE;AAAA,QACtC;AAAA,QACA,QAAQ,WAAY;AAClB,eAAK,eAAe;AACpB,cAAI,MAAM;AACV,cAAI,aAAa,IAAI;AACrB,cAAI,UAAU,IAAI;AAClB,cAAIyD,OAAM,WAAW;AACrB,cAAI,OAAO,WAAW;AACtB,cAAI,SAAS,WAAW;AACxB,cAAI,aAAa,WAAW;AAC5B,cAAI,OAAO,WAAW;AACtB,UAAAA,KAAI,MAAM,WAAW,QAAQ,WAAW,YAAY;AACpD,eAAK,MAAMA;AACX,eAAK,OAAO;AACZ,eAAK,SAAS;AACd,eAAK,cAAc,EAAE,UAAU;AAC/B,eAAK,QAAQ,EAAE,IAAI;AACnB,eAAK,aAAa;AAClB,UAAAzD,GAAE,SAASyD,IAAG;AACd,cAAI,QAAQ,YAAY;AACtB,iBAAK,eAAe,QAAQ,UAAU;AAAA,UACxC;AACA,cAAI,QAAQ,UAAU;AACpB,iBAAK,SAAS;AAAA,UAChB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,SAAU,QAAQ;AAC9B,cAAI,SAAS;AACb,cAAI,WAAW,OAAQ,UAAS;AAChC,eAAK,aAAa;AAElB,iBAAO,QAAQ,SAAU,KAAK;AAC5B,gBAAI,OAAO,IAAI;AACf,gBAAI,SAAS,IAAI;AACjB,gBAAI,YAAY,IAAI,WAAW;AAAA,cAC7B;AAAA,YACF,CAAC;AACD,mBAAO,OAAO,YAAY,UAAU,EAAE;AACtC,mBAAO,QAAQ,IAAI,IAAI;AAAA,UACzB,CAAC;AAED,cAAI,iBAAiB,KAAK,aAAa,YAAY,KAAK;AACxD,cAAI,iBAAiB,KAAK,aAAa,YAAY,KAAK;AACxD,cAAI,kBAAkB,KAAK,aAAa,YAAY,MAAM;AAE1D,eAAK,QAAQ,eAAe;AAC5B,eAAK,QAAQ,KAAK,WAAW,eAAe;AAE5C,yBAAe,IAAI,SAAS,mBAAmB,UAAU,CAAC;AAC1D,0BAAgB,IAAI,SAAS,mBAAmB,UAAU,CAAC;AAAA,QAC7D;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,iBAAO,KAAK,OAAO,EAAE,QAAQ,SAAU,MAAM;AAC3C,oBAAQ,IAAI,EAAE,OAAO;AACrB,mBAAO,QAAQ,IAAI;AAAA,UACrB,CAAC;AAAA,QACH;AAAA,QACA,aAAa,WAAY;AACvB,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,iBAAO,KAAK,OAAO,EAAE,QAAQ,SAAU,MAAM;AAC3C,oBAAQ,IAAI,EAAE,aAAa;AAAA,UAC7B,CAAC;AAAA,QACH;AAAA,QACA,QAAQ,WAAY;AAClB,cAAI,KAAK,QAAQ,UAAU;AACzB,iBAAK,SAAS;AAAA,UAChB;AACA,cAAI,KAAK,aAAa;AACpB,iBAAK,sBAAsB,KAAK,WAAW;AAAA,UAC7C;AACA,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,SAAU,KAAK;AACrB,cAAI,WAAW,KAAK;AAGpB,cAAI,QAAQ,QAAW;AACrB,gBAAI,kBAAkB,SAAS,aAAa,WAAW;AACvD,iBAAK,KAAK,4BAA4B,UAAU,iBAAiB;AAG/D,oBAAM,KAAK;AAAA,YACb,OAAO;AAEL,oBAAM,SAAS,OAAO;AACtB,mBAAK,kBAAkB;AACvB,mBAAK,2BAA2B;AAAA,YAClC;AAIA,mBAAOzD,GAAE,gBAAgB,GAAG;AAAA,UAC9B;AAGA,gBAAMA,GAAE,gBAAgB,GAAG;AAC3B,cAAI,YAAYA,GAAE,wBAAwB,GAAG;AAC7C,mBAAS,aAAa,aAAa,SAAS;AAC5C,eAAK,kBAAkB;AACvB,eAAK,2BAA2B,SAAS,aAAa,WAAW;AACjE,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,WAAY;AACxB,iBAAOA,GAAE,gBAAgB,KAAK,MAAM,aAAa,CAAC;AAAA,QACpD;AAAA,QACA,6BAA6B,SAAU,MAAM,UAAU,KAAK;AAC1D,cAAI,gBAAgB,UAAU;AAC5B,gBAAI,QAAQ,KAAK;AACjB,gBAAI,QAAQ,KAAK,MAAM,kBAAkB,KAAK;AAC9C,qBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,kBAAI,OAAO,MAAM,CAAC;AAClB,kBAAI,WAAW,KAAK,gBAAgB,IAAI;AACxC,kBAAI,CAAC,UAAU;AACb;AAAA,cACF;AACA,kBAAI,aAAa,CAAC,QAAQ;AAC1B,kBAAI,KAAK,cAAc,MAAM,OAAO;AAClC,2BAAW,KAAK,QAAQ;AAAA,cAC1B;AACA,kBAAI,KAAK,cAAc,MAAM,OAAO;AAClC,2BAAW,KAAK,QAAQ;AAAA,cAC1B;AACA,kBAAI,eAAe,KAAK,IAAI,WAAW,GAAG,SAAS,eAAe;AAClE,mBAAK,mBAAmB,UAAU,SAAS,QAAQ,UAAU,GAAG,cAAc,GAAG;AAAA,YACnF;AAAA,UACF;AAAA,QACF;AAAA,QACA,0BAA0B,SAAU,MAAM,MAAM;AAC9C,cAAI,CAAC,QAAQ,EAAE,gBAAgB,WAAW;AACxC,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,UAAU,GAAG;AACrB,mBAAO;AAAA,UACT;AACA,eAAK,OAAO,KAAK,QAAQ,CAAC,UAAU,QAAQ,CAAC,OAAO,GAAG;AACrD,gBAAI,cAAc;AAAA,cAChB,QAAQ;AAAA,YACV;AAGA,gBAAI,aAAa;AACjB,gBAAI,aAAa,KAAK,gBAAgB,MAAM,cAAc,CAAC;AAC3D,gBAAI,cAAc,CAAC,KAAK,cAAc,UAAU,GAAG;AACjD,2BAAa,KAAK,SAAS,YAAY,WAAW;AAClD,mBAAK,gBAAgB,QAAQ;AAAA,YAC/B;AACA,gBAAI,aAAa;AACjB,gBAAI,aAAa,KAAK,gBAAgB,MAAM,cAAc,CAAC;AAC3D,gBAAI,cAAc,CAAC,KAAK,cAAc,UAAU,GAAG;AACjD,2BAAa,KAAK,SAAS,YAAY,WAAW;AAClD,mBAAK,gBAAgB,QAAQ;AAAA,YAC/B;AACA,gBAAI,eAAe,KAAK,eAAe,GAAG;AAExC,qBAAO,CAAC,KAAK,SAAS,MAAM,WAAW;AAAA,YACzC;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,mBAAmB,SAAU,MAAM,MAAM,UAAU,KAAK;AACtD,kBAAQ,MAAM,CAAC;AACf,eAAK,mBAAmB,MAAM,MAAM,UAAU,GAAG;AACjD,cAAI,UAAU,KAAK,QAAQ;AAC3B,cAAI,KAAK,SAAS,KAAK,WAAW,IAAI,UAAU,OAAO;AACrD;AAAA,UACF;AACA,cAAI,KAAK,MAAM,eAAe,KAAK,uBAAuB,GAAG;AAC3D;AAAA,UACF;AACA,cAAI,QAAQ,KAAK,YAAY,GAAG;AAChC,cAAI,SAAS;AACX,iBAAK,kBAAkB,OAAO,GAAG;AAAA,UACnC;AAAA,QACF;AAAA,QACA,oBAAoB,SAAU,MAAM,MAAM,UAAU,KAAK;AACvD,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,UAAU,IAAI;AAClB,cAAI,QAAQ,MAAM;AAChB,gBAAI,QAAQ,YAAY;AACtB,sBAAQ,OAAO;AACf,mBAAK,SAAS;AAAA,YAChB;AAAA,UACF;AACA,cAAI,cAAc,KAAK;AACvB,cAAI,cAAc,KAAK;AACvB,cAAI,kBAAkB,KAAK;AAC3B,cAAI,MAAM,KAAK;AACf,cAAI,kBAAkB,QAAQ,WAAW,QAAQ;AACjD,cAAI,CAAC,iBAAiB;AACpB,8BAAkB,QAAQ,WAAW,QAAQ,IAAI,CAAC;AAAA,UACpD;AAEA,cAAI,WAAW,iBAAiB;AAM9B,qBAAS,IAAI,WAAW,GAAG,KAAK,iBAAiB,KAAK;AACpD,kBAAI,sBAAsB,QAAQ,WAAW,CAAC;AAC9C,kBAAI,CAAC,uBAAuB,EAAE,OAAO,sBAAsB;AACzD;AAAA,cACF;AACA,8BAAgB,GAAG,KAAK,oBAAoB,GAAG;AAC/C,qBAAO,oBAAoB,GAAG;AAAA,YAChC;AAAA,UACF;AACA,cAAI,cAAc,gBAAgB,GAAG,KAAK;AAE1C,eAAK,cAAc,UAAU,MAAM;AACjC;AAAA,UACF;AACA,cAAI,CAAC,aAAa;AAChB,oBAAQ;AAAA,UACV;AACA,cAAI,OAAO,eAAe,cAAc,aAAa;AAEnD,4BAAgB,GAAG,KAAK;AAAA,UAC1B,WAAW,OAAO,eAAe,cAAc,aAAa;AAE1D,4BAAgB,GAAG,KAAK;AAAA,UAC1B;AACA,0BAAgB,GAAG,KAAK;AACxB,cAAI,eAAe,QAAQ;AAC3B,cAAI,OAAO,iBAAiB,YAAY;AACtC,yBAAa,KAAK,MAAM,MAAM,MAAM,UAAU,OAAO,CAAC,GAAG,IAAI;AAAA,UAC/D;AAAA,QACF;AAAA,QACA,gBAAgB,SAAU,MAAM;AAC9B,cAAI,CAAC,MAAM;AACT,mBAAO;AAAA,UACT;AACA,cAAI,UAAU,KAAK;AACnB,cAAI,MAAM,KAAK;AACf,cAAI,kBAAkB,QAAQ,WAAW,KAAK,eAAe;AAC7D,cAAI,OAAO,KAAK,oBAAoB,IAAI,IAAI,gBAAgB,GAAG;AAC/D,iBAAO,gBAAgB,GAAG;AAC1B,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,SAAU,MAAM,KAAK;AAC7B,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,OAAO,KAAK,eAAe,IAAI;AACnC,cAAI,CAAC,MAAM;AACT,mBAAO;AAAA,UACT;AACA,cAAI,eAAe,CAAC,IAAI;AACxB,cAAI,cAAc;AAChB,iBAAK,mBAAmB,GAAG;AAAA,UAC7B;AACA,cAAI,WAAW,KAAK,WAAW,MAAM,MAAM,GAAG;AAC9C,cAAI,cAAc;AAChB,gBAAI,QAAQ;AAAA,cACV,SAAS;AAAA,cACT,UAAU,KAAK;AAAA,YACjB;AACA,iBAAK,kBAAkB,OAAO,GAAG;AAAA,UACnC;AACA,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,MAAM,MAAM,KAAK;AACrC,cAAI,CAAC,MAAM;AACT,mBAAO;AAAA,UACT;AACA,cAAI,cAAc,KAAK;AACvB,cAAI,cAAc,KAAK;AACvB,cAAI,YAAY,KAAK;AACrB,cAAI,QAAQ,KAAK;AACjB,cAAI,gBAAgB,UAAU;AAC5B,gBAAI,OAAO,aAAa;AACtB,mBAAK,WAAW,KAAK;AACrB,qBAAO;AAAA,YACT;AACA,gBAAI,OAAO,aAAa;AACtB,kBAAI,kBAAkB,CAAC,EAAE,OAAO;AAChC,kBAAI,iBAAiB;AACnB,wBAAQ;AAAA,cACV;AACA,mBAAK,WAAW,MAAM,eAAe;AACrC,sBAAQ;AAAA,YACV;AAAA,UACF;AACA,cAAI,CAAC,MAAM;AACT,mBAAO;AAAA,UACT;AACA,iBAAO,KAAK,cAAc,MAAM,OAAO,CAAC,CAAC;AAAA,QAC3C;AAAA,QACA,aAAa,SAAU,OAAO,KAAK;AACjC,cAAI,OAAO,KAAK,gBAAgB,KAAK;AACrC,cAAI,CAAC,MAAM;AACT,mBAAO;AAAA,UACT;AACA,eAAK,SAAS,MAAM,GAAG;AACvB,iBAAO;AAAA,QACT;AAAA,QACA,uBAAuB,SAAU,MAAM;AACrC,cAAI,MAAM,KAAK;AACf,cAAI,UAAU,KAAK;AACnB,cAAI,OAAO,QAAQ,WAAW;AAC5B,mBAAO;AAAA,UACT;AACA,cAAI,OAAO,QAAQ,UAAU,GAAG,KAAK,KAAK;AAC1C,kBAAQ,cAAc,KAAK,GAAG;AAC9B,iBAAO,QAAQ,QAAQ,GAAG;AAC1B,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,SAAU,MAAM;AACnC,cAAI,MAAM,KAAK;AACf,cAAI,UAAU,KAAK;AACnB,cAAI,OAAO,QAAQ,SAAS;AAC1B,mBAAO;AAAA,UACT;AACA,kBAAQ,QAAQ,GAAG,IAAI;AACvB,kBAAQ,YAAY,KAAK,GAAG;AAC5B,cAAI,OAAO,QAAQ,UAAU,GAAG,KAAK;AACrC,iBAAO,QAAQ,UAAU,GAAG;AAC5B,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,SAAU,MAAM;AAC7B,cAAI,CAAC,MAAM;AACT,mBAAO;AAAA,UACT;AACA,cAAI,MAAM,KAAK;AACf,cAAI,UAAU,KAAK;AACnB,iBAAO,OAAO,QAAQ;AAAA,QACxB;AAAA,QACA,WAAW,SAAU,KAAK;AACxB,cAAI,aAAa,SAAS,CAAC,GAAG,KAAK;AAAA,YACjC,UAAU;AAAA,UACZ,CAAC;AACD,eAAK,cAAc,UAAU;AAC7B,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA;AAAA,QAEA,aAAa,SAAU,KAAK;AAC1B,eAAK,mBAAmB,GAAG;AAC3B,cAAI;AACJ,cAAI,cAAc;AAClB,cAAI,aAAa;AACjB,cAAI,WAAW;AACf,aAAG;AACD;AACA,yBAAa,KAAK,iBAAiB,GAAG;AACtC,2BAAe,WAAW;AAC1B,uBAAW,KAAK,IAAI,WAAW,UAAU,QAAQ;AAAA,UACnD,SAAS,CAAC,WAAW;AACrB,cAAI,QAAQ;AAAA,YACV,SAAS;AAAA,YACT,SAAS;AAAA,YACT;AAAA,UACF;AACA,eAAK,kBAAkB,OAAO,GAAG;AACjC,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,WAAY;AAC/B,cAAI,aAAa,KAAK,SAAS;AAC/B,cAAI,kBAAkB,OAAO,KAAK,UAAU;AAC5C,cAAI,IAAI,gBAAgB;AACxB,iBAAO,IAAI,KAAK,KAAK;AAEnB,qBAAS,QAAQ,WAAW,gBAAgB,CAAC,CAAC,GAAG;AAC/C,qBAAO;AAAA,YACT;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,kBAAkB,SAAU,KAAK4C,OAAM;AACrC,kBAAQ,MAAM,CAAC;AACf,UAAAA,UAASA,QAAO;AAAA,YACd,WAAW;AAAA,YACX,UAAU;AAAA,UACZ;AACA,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,UAAU,IAAI;AAClB,cAAIO,MAAK,QAAQ;AACjB,cAAIA,KAAI;AACN,wBAAYA,GAAE;AACd,gBAAIP,MAAK,cAAc,KAAK,KAAK,oBAAoB,GAAG;AACtD,mBAAK,mBAAmB,GAAG;AAAA,YAC7B;AACA,gBAAI,QAAQ,KAAK,iBAAiB,GAAG;AACrC,gBAAI,aAAa,SAAS,CAAC,GAAG,KAAK;AAAA,cACjC,gBAAgB,mBAAmB,MAAM;AAAA,cACzC,kBAAkB,mBAAmB,MAAM;AAAA,YAC7C,CAAC;AACD,gBAAI,aAAa,KAAK,cAAc,UAAU;AAC9C,gBAAI,eAAe,WAAW;AAC9B,gBAAI,aAAa,WAAW;AAC5B,gBAAI,YAAYA,MAAK;AACrB,gBAAI,QAAQ,QAAQ;AACpB,gBAAI,MAAM,UAAU,GAAG;AAErB,2BAAa,MAAM,UAAU,MAAM;AACnC,oBAAM,YAAY;AAClB,cAAAA,MAAK,WAAW,KAAK,IAAI,MAAM,UAAUA,MAAK,QAAQ;AACtD,kBAAI,MAAM,SAAS,eAAe,GAAG;AACnC,sBAAM,aAAa;AACnB,sBAAM,WAAW;AACjB,sBAAM,WAAWA,MAAK;AACtB,qBAAK,kBAAkB,OAAO,GAAG;AACjC,gBAAAA,MAAK,YAAY;AACjB,gBAAAA,MAAK,WAAW;AAChB,wBAAQ,QAAQ;AAAA,cAClB,OAAO;AACL,gBAAAA,MAAK,YAAY;AAAA,cACnB;AAAA,YACF,OAAO;AACL,kBAAI,CAAC,QAAQ,MAAM;AACjB,oBAAI,QAAQ,YAAY;AACtB,uBAAK,OAAO;AACZ,0BAAQ,OAAO;AACf,uBAAK,QAAQ,eAAe,GAAG;AAAA,gBACjC;AAAA,cACF;AAAA,YACF;AAEA,gBAAI,aAAa,IAAI;AACrB,gBAAI,SAAS,OAAO,eAAe,YAAY;AAC7C,yBAAW,KAAK,MAAM,MAAM,OAAO,WAAW,OAAO,OAAO,IAAI;AAAA,YAClE;AAEA,gBAAI,QAAQ,OAAOO,KAAI;AACrB;AAAA,YACF;AAAA,UACF;AACA,cAAI,QAAQ,UAAU;AACpB,kBAAM,IAAI,MAAM,4DAA4D;AAAA,UAC9E;AACA,kBAAQ,KAAK,UAAU,KAAK,kBAAkB,MAAM,KAAKP,KAAI;AAAA,QAC/D;AAAA,QACA,oBAAoB,SAAU,KAAK;AACjC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,WAAW,IAAI;AACnB,cAAI,OAAO,aAAa,YAAY;AAClC,uBAAW,KAAK,QAAQ;AACxB,gBAAI,OAAO,aAAa,YAAY;AAClC;AAAA,YACF;AAAA,UACF;AACA,mBAAS,KAAK,MAAM,KAAK,IAAI;AAAA,QAC/B;AAAA,QACA,mBAAmB,SAAU,OAAO,KAAK;AACvC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,UAAU,IAAI;AAClB,cAAI,OAAO,YAAY,YAAY;AACjC,sBAAU,KAAK,QAAQ;AAAA,UACzB;AACA,cAAI,OAAO,YAAY,YAAY;AACjC,oBAAQ,KAAK,MAAM,OAAO,KAAK,IAAI;AAAA,UACrC;AACA,eAAK,QAAQ,eAAe,OAAO,GAAG;AAAA,QACxC;AAAA,QACA,kBAAkB,SAAU,KAAK;AAC/B,kBAAQ,MAAM,CAAC;AACf,cAAI,YAAY,IAAI,aAAa;AACjC,cAAI,UAAU,KAAK;AACnB,cAAI,cAAc;AAClB,cAAI,gBAAgB;AACpB,cAAI,eAAe;AACnB,cAAI,aAAa;AACjB,cAAI,cAAc;AAClB,cAAI,QAAQ;AACZ,cAAI,UAAU,KAAK;AACnB,cAAI,aAAa,QAAQ;AACzB,cAAI,aAAa,cAAc,MAAM,IAAI,WAAW,QAAQ;AAC5D,cAAI,OAAO,eAAe,YAAY;AACpC,yBAAa;AAAA,UACf;AACA,cAAI,iBAAiB,QAAQ;AAC7B,cAAI,OAAO,mBAAmB,YAAY;AACxC,6BAAiB;AAAA,UACnB;AACA,cAAI,kBAAkB,OAAO,KAAK,UAAU;AAC5C,eAAM,UAAS,IAAI,GAAG,IAAI,gBAAgB,QAAQ,IAAI,GAAG,KAAK;AAC5D,gBAAI,WAAW,CAAC,gBAAgB,CAAC;AACjC,gBAAI,kBAAkB,WAAW,QAAQ;AACzC,qBAAS,OAAO,iBAAiB;AAC/B,kBAAI,eAAe,WAAW;AAC5B,wBAAQ;AACR,sBAAM;AAAA,cACR;AACA,kBAAI,OAAO,MAAM,GAAG;AACpB,kBAAI,CAAC,MAAM;AAET,uBAAO,gBAAgB,GAAG;AAC1B;AAAA,cACF;AACA,kBAAI,cAAc,gBAAgB,GAAG;AACrC,mBAAK,cAAc,KAAK,iBAAiB,GAAG;AAE1C,oBAAI,aAAa,OAAO,QAAQ;AAChC,oBAAI,KAAK,cAAc,cAAc,CAAC,WAAW,KAAK,MAAM,MAAM,CAAC,YAAY,IAAI,GAAG;AAEpF,sBAAI,CAAC,YAAY;AACf,yBAAK,sBAAsB,IAAI;AAC/B,yBAAK,WAAW,IAAI;AAAA,kBACtB;AACA,0BAAQ,UAAU,GAAG,KAAK;AAC1B,yBAAO,gBAAgB,GAAG;AAC1B;AACA;AAAA,gBACF;AAEA,oBAAI,YAAY;AACd,iCAAe,KAAK;AACpB;AAAA,gBACF;AACA,+BAAe,KAAK,oBAAoB,IAAI;AAAA,cAC9C;AACA,kBAAI,eAAe,KAAK,WAAW,MAAM,aAAa,GAAG;AACzD,kBAAI,eAAe,GAAG;AAEpB,gCAAgB,GAAG,IAAI;AACvB,oBAAI,CAAC,kBAAkB,CAAC,eAAe,KAAK,MAAM,MAAM,cAAc,IAAI,KAAK,gBAAgB,GAAG,GAAG;AACnG;AACA,0BAAQ;AACR;AAAA,gBACF;AAAA,cACF;AACA,kBAAI,cAAc,UAAU;AAC1B,8BAAc;AAAA,cAChB;AACA;AACA,qBAAO,gBAAgB,GAAG;AAAA,YAC5B;AAAA,UACF;AACA,iBAAO;AAAA,YACL,UAAU;AAAA,YACV,SAAS;AAAA,YACT,WAAW;AAAA,YACX,WAAW;AAAA,YACX,SAAS;AAAA,YACT;AAAA,UACF;AAAA,QACF;AAAA,QACA,mBAAmB,WAAY;AAC7B,cAAI,UAAU,KAAK;AACnB,cAAI,gBAAgB,OAAO,KAAK,QAAQ,SAAS;AACjD,cAAI,IAAI,cAAc;AACtB,cAAI,iBAAiB,IAAI,MAAM,CAAC;AAChC,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,2BAAe,CAAC,IAAI,MAAM,cAAc,CAAC,CAAC;AAAA,UAC5C;AACA,iBAAO;AAAA,QACT;AAAA,QACA,iBAAiB,WAAY;AAC3B,cAAI,UAAU,KAAK;AACnB,cAAI,cAAc,OAAO,KAAK,QAAQ,OAAO;AAC7C,cAAI,IAAI,YAAY;AACpB,cAAI,eAAe,IAAI,MAAM,CAAC;AAC9B,mBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,yBAAa,CAAC,IAAI,MAAM,YAAY,CAAC,CAAC;AAAA,UACxC;AACA,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,SAAU,YAAY,KAAK;AAC9C,kBAAQ,MAAM,CAAC;AACf,cAAI,aAAa;AACjB,cAAI,OAAO,eAAe,YAAY;AACpC,yBAAa;AAAA,UACf;AACA,cAAI,YAAY,oBAAoB,MAAM,IAAI,iBAAiB;AAC/D,cAAI,UAAU,KAAK;AACnB,cAAI,gBAAgB,QAAQ;AAC5B,cAAI,YAAY,QAAQ;AACxB,mBAAS,IAAI,GAAG,IAAI,KAAK,IAAI,cAAc,QAAQ,SAAS,GAAG,IAAI,GAAG,KAAK;AACzE,gBAAI,MAAM,cAAc,CAAC;AACzB,gBAAI,EAAE,OAAO,YAAY;AACvB;AAAA,YACF;AACA,gBAAI,OAAO,MAAM,GAAG;AACpB,gBAAI,CAAC,MAAM;AACT;AAAA,YACF;AACA,gBAAI,KAAK,cAAc,cAAc,CAAC,WAAW,KAAK,MAAM,MAAM,OAAO,IAAI,GAAG;AAE9E,4BAAc,KAAK,GAAG;AACtB;AAAA,YACF;AACA;AACA,gBAAI,OAAO,KAAK,oBAAoB,IAAI;AACxC,gBAAI,MAAM;AACR,mBAAK,mBAAmB,MAAM,MAAM,KAAK,iBAAiB;AAAA,gBACxD,UAAU;AAAA,cACZ,CAAC;AAAA,YACH;AAAA,UACF;AAEA,wBAAc,OAAO,GAAG,CAAC;AACzB,iBAAO;AAAA,QACT;AAAA,QACA,mBAAmB,SAAU,YAAY,KAAK;AAC5C,kBAAQ,MAAM,CAAC;AACf,cAAI,eAAe;AACnB,cAAI,OAAO,eAAe,YAAY;AACpC,mBAAO;AAAA,UACT;AACA,cAAI,YAAY,sBAAsB,MAAM,IAAI,mBAAmB;AACnE,cAAI,UAAU,KAAK;AACnB,cAAI,cAAc,QAAQ;AAC1B,cAAI,UAAU,QAAQ;AACtB,mBAAS,IAAI,GAAG,IAAI,KAAK,IAAI,YAAY,QAAQ,SAAS,GAAG,IAAI,GAAG,KAAK;AACvE,gBAAI,MAAM,YAAY,CAAC;AACvB,gBAAI,EAAE,OAAO,UAAU;AACrB;AAAA,YACF;AACA,gBAAI,OAAO,MAAM,GAAG;AACpB,gBAAI,CAAC,MAAM;AACT;AAAA,YACF;AACA,gBAAI,CAAC,KAAK,cAAc,WAAW,KAAK,MAAM,MAAM,MAAM,IAAI,GAAG;AAE/D,0BAAY,KAAK,GAAG;AACpB;AAAA,YACF;AACA;AACA,gBAAI,OAAO,KAAK,sBAAsB,IAAI;AAC1C,gBAAI,MAAM;AACR,mBAAK,WAAW,IAAI;AAAA,YACtB;AAAA,UACF;AAEA,sBAAY,OAAO,GAAG,CAAC;AACvB,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,SAAU,UAAU,KAAK;AAC5C,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,aAAa,cAAc,MAAM,IAAI,WAAW,KAAK,QAAQ;AACjE,cAAI,OAAO,eAAe,YAAY;AACpC,yBAAa;AAAA,UACf;AACA,cAAI,UAAU,KAAK;AACnB,cAAI,UAAU,QAAQ;AACtB,cAAI,YAAY,QAAQ;AACxB,cAAI,UAAU,CAAC,SAAS,cAAc,CAAC,cAAc,WAAW,KAAK,MAAM,UAAU,OAAO,IAAI;AAChG,cAAI,cAAc;AAClB,cAAI,YAAY;AAChB,cAAI,SAAS,OAAO,WAAW,CAAC,SAAS;AACvC,gBAAI,SAAS,KAAK,sBAAsB,QAAQ;AAChD,gBAAI,QAAQ;AACV,mBAAK,WAAW,QAAQ;AAAA,YAC1B;AACA,gBAAI,IAAI,QAAQ,YAAY,QAAQ,SAAS,GAAG;AAChD,oBAAQ,YAAY,OAAO,GAAG,CAAC;AAC/B,0BAAc;AAAA,UAChB;AACA,cAAI,CAAC,eAAe,SAAS,OAAO,aAAa,SAAS;AACxD,gBAAI,MAAM,QAAQ,cAAc,QAAQ,SAAS,GAAG;AACpD,oBAAQ,cAAc,OAAO,KAAK,CAAC;AACnC,gBAAI,OAAO,KAAK,oBAAoB,QAAQ;AAC5C,gBAAI,MAAM;AACR,mBAAK,mBAAmB,UAAU,MAAM,SAAS,iBAAiB;AAAA,gBAChE,UAAU;AAAA,cACZ,CAAC;AAAA,YACH;AACA,wBAAY;AAAA,UACd;AACA,iBAAO;AAAA,YACL,SAAS,YAAY,IAAI;AAAA,YACzB,WAAW,cAAc,IAAI;AAAA,UAC/B;AAAA,QACF;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,aAAa,SAAS,CAAC,GAAG,KAAK;AAAA,YACjC,gBAAgB;AAAA,YAChB,kBAAkB;AAAA,UACpB,CAAC;AACD,cAAI,aAAa,cAAc,aAAa,WAAW,WAAW,KAAK,QAAQ;AAC/E,cAAI,iBAAiB,KAAK,kBAAkB,YAAY,UAAU;AAClE,cAAI,iBAAiB,GAAG;AAEtB,gBAAI,gBAAgB,KAAK,SAAS;AAClC,uBAAW,iBAAiB,KAAK,IAAI,cAAc,SAAS,gBAAgB,WAAW,cAAc;AAAA,UACvG;AACA,cAAI,eAAe,KAAK,oBAAoB,YAAY,UAAU;AAClE,iBAAO;AAAA,YACL,SAAS;AAAA,YACT,WAAW;AAAA,UACb;AAAA,QACF;AAAA,QACA,QAAQ,SAAU,KAAK;AACrB,kBAAQ,MAAM,CAAC;AACf,cAAI,UAAU,KAAK;AACnB,cAAI,MAAM,IAAI;AACd,cAAI,WAAW,KAAK,QAAQ;AAC5B,cAAI,YAAY,QAAQ;AACxB,cAAI,OAAO,QAAQ,WAAW;AAE5B,gBAAI,YAAY,WAAW;AACzB;AAAA,YACF;AACA,oBAAQ,YAAY;AACpB,oBAAQ,YAAY;AAAA,UACtB;AACA,eAAK,QAAQ,SAAS;AACtB,cAAIO,MAAK,QAAQ;AACjB,kBAAQ,KAAK;AACb,cAAI,KAAK,QAAQ,KAAKA,KAAI;AACxB,wBAAYA,GAAE;AAAA,UAChB;AAAA,QACF;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,kBAAQ,MAAM,CAAC;AACf,cAAI,UAAU,KAAK;AACnB,cAAI,MAAM,IAAI;AACd,cAAI,YAAY,QAAQ;AAExB,cAAI,OAAO,aAAa,QAAQ,WAAW;AACzC;AAAA,UACF;AACA,kBAAQ,YAAY;AAEpB,cAAI,OAAO,QAAQ,aAAa,QAAQ,WAAW;AACjD;AAAA,UACF;AACA,cAAI,KAAK,QAAQ,GAAG;AAClB,iBAAK,OAAO;AACZ,iBAAK,iBAAiB,GAAG;AAAA,UAC3B,OAAO;AACL,iBAAK,YAAY,GAAG;AAAA,UACtB;AACA,eAAK,QAAQ,SAAS,QAAQ,YAAY;AAC1C,cAAI,QAAQ,MAAM;AAChB,iBAAK,UAAU;AACf,oBAAQ,OAAO;AAAA,UACjB;AAAA,QACF;AAAA,QACA,SAAS,WAAY;AACnB,iBAAO,CAAC,CAAC,KAAK,QAAQ;AAAA,QACxB;AAAA,QACA,UAAU,WAAY;AACpB,iBAAO,CAAC,CAAC,KAAK,QAAQ;AAAA,QACxB;AAAA,QACA,gBAAgB,WAAY;AAC1B,iBAAO,KAAK,QAAQ,YAAY,aAAa;AAAA,QAC/C;AAAA,QACA,UAAU,WAAY;AACpB,eAAK,OAAO;AACZ,eAAK,SAAS,WAAW;AAEzB,eAAK,aAAa;AAClB,eAAK,YAAY;AAAA,QACnB;AAAA,QACA,iBAAiB,WAAY;AAC3B,cAAI,UAAU,KAAK;AACnB,cAAI,IAAI,QAAQ;AAChB,cAAI,IAAI,QAAQ;AAChB,cAAI,CAAC,SAAS,CAAC,GAAG;AAChB,gBAAI,KAAK,GAAG;AAAA,UACd;AACA,cAAI,CAAC,SAAS,CAAC,GAAG;AAChB,gBAAI,KAAK,GAAG;AAAA,UACd;AACA,iBAAO;AAAA,YACL,OAAO;AAAA,YACP,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,QACA,eAAe,SAAU,OAAO,QAAQ;AACtC,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,eAAe,QAAQ;AAC3B,cAAI,gBAAgB,QAAQ;AAC5B,cAAI,IAAI,UAAU,SAAY,eAAe;AAC7C,cAAI,IAAI,WAAW,SAAY,gBAAgB;AAC/C,cAAI,iBAAiB,KAAK,kBAAkB,GAAG;AAC7C;AAAA,UACF;AACA,kBAAQ,QAAQ;AAChB,kBAAQ,SAAS;AACjB,eAAK,eAAe;AACpB,cAAI,eAAe,KAAK,gBAAgB;AACxC,eAAK,QAAQ,UAAU,aAAa,OAAO,aAAa,MAAM;AAAA,QAChE;AAAA,QACA,gBAAgB,WAAY;AAC1B,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,IAAI,QAAQ;AAChB,cAAI,IAAI,QAAQ;AAChB,cAAI,SAAS,CAAC,GAAG;AACf,gBAAI,KAAK,MAAM,CAAC;AAAA,UAClB;AACA,cAAI,SAAS,CAAC,GAAG;AACf,gBAAI,KAAK,MAAM,CAAC;AAAA,UAClB;AACA,eAAK,IAAI,IAAI;AAAA,YACX,OAAO,MAAM,OAAO,KAAK;AAAA,YACzB,QAAQ,MAAM,OAAO,KAAK;AAAA,UAC5B,CAAC;AAAA,QACH;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAC3B,iBAAO,KAAK,UAAU,MAAM,GAAG,MAAM,CAAC;AAAA,QACxC;AAAA;AAAA;AAAA,QAGA,cAAc,SAAU,WAAW,YAAY,SAAS,KAAK;AAC3D,cAAI,WAAW,SAAS,GAAG;AAEzB,kBAAM;AAAA,UACR,OAAO;AAEL,kBAAM,OAAO;AAAA,cACX;AAAA,cACA;AAAA,cACA;AAAA,YACF,GAAG,GAAG;AAAA,UACR;AACA,cAAI,MAAM,KAAK,oBAAoB,GAAG;AACtC,cAAI,IAAI,IAAI;AACZ,cAAI,IAAI,IAAI;AACZ,cAAI,QAAQ,IAAI;AAChB,cAAI,SAAS,IAAI;AACjB,cAAI,QAAQ,KAAK,MAAM;AACvB,cAAI,KAAK,MAAM;AACf,cAAI,KAAK,MAAM;AACf,eAAK,UAAU,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE;AAC/B,eAAK,cAAc,QAAQ,IAAI,SAAS,EAAE;AAC1C,iBAAO,IAAI,KAAK,GAAG,GAAG,OAAO,MAAM;AAAA,QACrC;AAAA,QACA,qBAAqB,SAAU,KAAK;AAClC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAI3B,cAAI,YAAY,IAAI,aAAa;AACjC,cAAI,aAAa,IAAI,cAAc;AACnC,cAAI,UAAU,eAAe,IAAI,WAAW,CAAC;AAC7C,cAAI,WAAW,KAAK,IAAI,IAAI,YAAY,GAAG,SAAS;AACpD,cAAI,YAAY,KAAK,IAAI,IAAI,aAAa,GAAG,UAAU;AACvD,cAAI,WAAW,IAAI,YAAY,OAAO;AACtC,cAAI,YAAY,IAAI,aAAa,OAAO;AACxC,cAAI,YAAY,IAAI;AACpB,cAAI,OAAO,iBAAiB,MAAM,IAAI,KAAK,IAAI,WAAW,IAAI,KAAK,eAAe,GAAG;AACrF,cAAI,MAAM,KAAK,MAAM;AACrB,cAAI,KAAK,IAAI;AACb,cAAI,KAAK,IAAI;AACb,eAAK,KAAK;AACV,eAAK,KAAK;AACV,eAAK,SAAS;AACd,eAAK,UAAU;AACf,cAAI,YAAY,KAAK,MAAM,KAAK,QAAQ,KAAK,KAAK,SAAS;AAC3D,cAAI,aAAa,KAAK,MAAM,KAAK,SAAS,KAAK,KAAK,UAAU;AAC9D,cAAI,CAAC,IAAI,0BAA0B;AACjC,wBAAY,KAAK,IAAI,WAAW,CAAC;AACjC,yBAAa,KAAK,IAAI,YAAY,CAAC;AAAA,UACrC;AACA,uBAAa;AACb,wBAAc;AACd,cAAI,KAAK;AACT,cAAI,cAAc,cAAc,KAAK,IAAI,KAAK,cAAc,cAAc,KAAK,KAAK,KAAK,cAAc,OAAO;AAC5G,iBAAK,KAAK,KAAK,CAAC,KAAK,IAAI,SAAS,IAAI;AACtC,kBAAM,QAAQ;AACd,yBAAa;AAAA,UACf;AACA,cAAI,KAAK;AACT,cAAI,cAAc,cAAc,KAAK,IAAI,KAAK,cAAc,cAAc,KAAK,KAAK,KAAK,cAAc,OAAO;AAC5G,iBAAK,KAAK,KAAK,CAAC,KAAK,IAAI,UAAU,IAAI;AACvC,kBAAM,QAAQ;AACd,0BAAc;AAAA,UAChB;AACA,uBAAa,QAAQ;AACrB,wBAAc,QAAQ;AAGtB,sBAAY,KAAK,IAAI,WAAW,QAAQ;AACxC,uBAAa,KAAK,IAAI,YAAY,SAAS;AAG3C,sBAAY,KAAK,IAAI,WAAW,QAAQ;AACxC,uBAAa,KAAK,IAAI,YAAY,SAAS;AAC3C,iBAAO,IAAI,KAAK,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,YAAY,IAAI,aAAa,EAAE;AAAA,QACrE;AAAA,QACA,uBAAuB,SAAU,KAAK;AACpC,kBAAQ,MAAM,CAAC;AACf,cAAI,aAAa;AACjB,cAAI,iBAAiB,KAAK;AACxB,gBAAI,cAAc,IAAI;AACtB,0BAAc,KAAK,iBAAiB,WAAW;AAC/C,iCAAqB,IAAI,MAAM,WAAW;AAAA,UAC5C,OAAO;AACL,0BAAc,KAAK,eAAe,GAAG;AACrC,iCAAqB,KAAK,kBAAkB,WAAW;AAAA,UACzD;AACA,cAAI,CAAC,YAAY,SAAS,CAAC,YAAY,QAAQ;AAC7C;AAAA,UACF;AACA,mBAAS,KAAK;AAAA,YACZ,SAAS;AAAA,YACT,qBAAqB;AAAA,YACrB,WAAW;AAAA,YACX,UAAU;AAAA,YACV,UAAU,OAAO;AAAA,YACjB,eAAe;AAAA,YACf,iBAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAMnB,CAAC;AACD,cAAI,UAAU,eAAe,IAAI,OAAO;AACxC,cAAI,YAAY,IAAI,aAAa,IAAI;AACrC,cAAI,YAAY,IAAI,aAAa,IAAI;AACrC,cAAI,YAAY,IAAI,aAAa,IAAI;AACrC,cAAI,YAAY,IAAI,aAAa,IAAI;AACrC,cAAI;AACJ,cAAI,IAAI,aAAa;AACnB,0BAAc,IAAI;AAAA,UACpB,OAAO;AACL,gBAAI,mBAAmB,KAAK,UAAU;AACtC,gBAAI,eAAe,KAAK,gBAAgB;AACxC,0BAAc;AAAA,cACZ,GAAG,iBAAiB;AAAA,cACpB,GAAG,iBAAiB;AAAA,cACpB,OAAO,aAAa;AAAA,cACpB,QAAQ,aAAa;AAAA,YACvB;AAAA,UACF;AACA,wBAAc,IAAI,KAAK,WAAW,EAAE,cAAc;AAAA,YAChD,GAAG,QAAQ;AAAA,YACX,GAAG,QAAQ;AAAA,YACX,OAAO,CAAC,QAAQ,OAAO,QAAQ;AAAA,YAC/B,QAAQ,CAAC,QAAQ,MAAM,QAAQ;AAAA,UACjC,CAAC;AACD,cAAI,eAAe,KAAK,MAAM;AAC9B,cAAI,QAAQ,YAAY,QAAQ,YAAY,QAAQ,aAAa;AACjE,cAAI,QAAQ,YAAY,SAAS,YAAY,SAAS,aAAa;AACnE,cAAI,IAAI,qBAAqB;AAC3B,oBAAQ,QAAQ,KAAK,IAAI,OAAO,KAAK;AAAA,UACvC;AAGA,cAAI,IAAI,WAAW;AACjB,gBAAI,WAAW,IAAI;AACnB,oBAAQ,WAAW,KAAK,MAAM,QAAQ,QAAQ;AAC9C,oBAAQ,WAAW,KAAK,MAAM,QAAQ,QAAQ;AAAA,UAChD;AAGA,kBAAQ,KAAK,IAAI,WAAW,KAAK,IAAI,WAAW,KAAK,CAAC;AACtD,kBAAQ,KAAK,IAAI,WAAW,KAAK,IAAI,WAAW,KAAK,CAAC;AACtD,cAAI,YAAY;AAAA,YACd,GAAG,QAAQ,aAAa;AAAA,YACxB,GAAG,QAAQ,aAAa;AAAA,UAC1B;AACA,cAAI,SAAS,KAAK,QAAQ;AAC1B,cAAI,QAAQ,YAAY,IAAI,mBAAmB,IAAI,QAAQ,OAAO;AAClE,cAAI,QAAQ,YAAY,IAAI,mBAAmB,IAAI,QAAQ,OAAO;AAClE,kBAAQ,IAAI,eAAe;AAAA,YACzB,KAAK;AACH,sBAAQ,SAAS,YAAY,SAAS,YAAY,SAAS,UAAU,KAAK;AAC1E;AAAA,YACF,KAAK;AACH,sBAAQ,SAAS,YAAY,SAAS,YAAY,SAAS,UAAU;AACrE;AAAA,YACF,KAAK;AAAA,YACL;AACE;AAAA,UACJ;AACA,kBAAQ,IAAI,iBAAiB;AAAA,YAC3B,KAAK;AACH,sBAAQ,SAAS,YAAY,QAAQ,YAAY,QAAQ,UAAU,KAAK;AACxE;AAAA,YACF,KAAK;AACH,sBAAQ,SAAS,YAAY,QAAQ,YAAY,QAAQ,UAAU;AACnE;AAAA,YACF,KAAK;AAAA,YACL;AACE;AAAA,UACJ;AACA,eAAK,MAAM,OAAO,KAAK;AACvB,eAAK,UAAU,OAAO,KAAK;AAAA,QAC7B;AAAA,QACA,mBAAmB,SAAU,KAAK;AAChC,eAAK,sBAAsB,GAAG;AAAA,QAChC;AAAA;AAAA,QAEA,gBAAgB,SAAU,KAAK;AAC7B,cAAI,OAAO,IAAI,kBAAkB;AAC/B,mBAAO,KAAK,MAAM,QAAQ,KAAK,IAAI,KAAK;AAAA,UAC1C;AACA,iBAAOnD,GAAE,KAAK,KAAK,EAAE,QAAQ;AAAA,QAC/B;AAAA;AAAA,QAEA,gBAAgB,SAAU,KAAK;AAC7B,iBAAO,KAAK,iBAAiB,KAAK,eAAe,GAAG,CAAC;AAAA,QACvD;AAAA;AAAA;AAAA;AAAA,QAIA,SAAS,WAAY;AACnB,iBAAO,KAAK,iBAAiB,KAAK,gBAAgB,CAAC;AAAA,QACrD;AAAA,QACA,mBAAmB,WAAY;AAC7B,cAAI,OAAO,CAAC,GACV,MAAM,UAAU;AAClB,iBAAO,MAAO,MAAK,GAAG,IAAI,UAAU,GAAG;AACvC,cAAI,MAAM,KAAK;AACf,cAAI,oBAAoB,IAAI;AAC5B,cAAI;AACJ,cAAI,WAAW,iBAAiB,GAAG;AAEjC,6BAAiB,kBAAkB,MAAM,MAAM,IAAI;AAAA,UACrD,WAAW,sBAAsB,MAAM;AAErC,6BAAiB,KAAK,QAAQ;AAAA,UAChC,WAAW,CAAC,mBAAmB;AAE7B,6BAAiB;AAAA,UACnB,OAAO;AAEL,6BAAiB,IAAI,KAAK,iBAAiB;AAAA,UAC7C;AACA,iBAAO;AAAA,QACT;AAAA,QACA,oBAAoB,SAAU,MAAM;AAClC,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAElB,cAAI;AAGJ,cAAI;AAIJ,cAAI,YAAY,QAAQ;AACxB,cAAI,OAAO,KAAK,IAAI,MAAM,IAAI;AAC9B,cAAI,qBAAqB,UAAU,WAAW,MAAM,GAAG;AACvD,cAAI,KAAK,OAAO,GAAG;AACjB,gCAAoB,QAAQ;AAC5B,+BAAmB;AAAA,UACrB,OAAO;AACL,gCAAoB,QAAQ;AAC5B,+BAAmB;AAAA,UACrB;AASA,cAAI,YAAY,kBAAkB,qBAAqB,SAAS,OAAO,sBAAsB,oBAAoB,kBAAkB,KAAK,MAAM,IAAI,KAAK,sBAAsB;AAC7K,iBAAO,IAAI,UAAU;AAAA,YACnB,OAAO;AAAA,YACP,aAAa,QAAQ;AAAA,YACrB,aAAa,QAAQ,gBAAgB,OAAO,YAAY,SAAS,QAAQ;AAAA,UAC3E,CAAC;AAAA,QACH;AAAA,QACA,YAAY,SAAU,MAAM;AAC1B,cAAImD,MAAK,KAAK;AACd,cAAI,MAAM;AACV,cAAI,SAAS,IAAI;AACjB,cAAI,WAAW,IAAI;AACnB,cAAI,OAAO,OAAOA,GAAE;AACpB,cAAI,MAAM;AACR,gBAAI,MAAM,KAAK;AACf,gBAAI,UAAU,SAAS;AACvB,gBAAI,YAAY,SAAS;AACzB,iBAAK,OAAO;AACZ,mBAAO,OAAOA,GAAE;AAChB,mBAAO,QAAQ,GAAG;AAClB,mBAAO,UAAU,GAAG;AAAA,UACtB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,MAAM,KAAK;AAC/B,cAAIA,MAAK,KAAK;AACd,cAAI+D,SAAQ,KAAK;AACjB,cAAI,MAAM;AACV,cAAI,SAAS;AACb,cAAI/D,OAAM+D,QAAO;AACf,mBAAOA,OAAM/D,GAAE;AACf,gBAAI,KAAK,UAAU,MAAM;AACvB,qBAAO,KAAK;AACZ,uBAAS;AAAA,YACX,OAAO;AAIL,mBAAK,WAAW,IAAI;AAAA,YACtB;AAAA,UACF;AACA,cAAI,QAAQ;AACV,mBAAO+D,OAAM/D,GAAE,IAAI,KAAK,mBAAmB,IAAI;AAC/C,iBAAK,QAAQ;AACb,mBAAO,KAAK,sBAAsB,IAAI,IAAI,KAAK,YAAY,KAAK,QAAQ,OAAO,MAAM,UAAU,CAAC;AAAA,UAClG;AACA,eAAK,kBAAkB,MAAM,MAAM,KAAK,iBAAiB,GAAG;AAC5D,iBAAO;AAAA,QACT;AAAA,QACA,kBAAkB,WAAY;AAI5B,iBAAO;AAAA,QACT;AAAA,QACA,YAAY,SAAU,OAAO,KAAK;AAChC,kBAAQ,MAAM,CAAC;AACf,oBAAU,QAAQ,CAAC;AACnB,eAAK,cAAc;AAEnB,eAAK,YAAY;AAEjB,cAAI,MAAM,KAAK,QAAQ,aAAa,OAAO;AAC3C,eAAK,OAAO;AAAA,YACV;AAAA,UACF,CAAC;AACD,mBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,iBAAK,WAAW,MAAM,CAAC,GAAG,GAAG;AAAA,UAC/B;AACA,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AACD,eAAK,UAAU;AAAA,QACjB;AAAA,QACA,aAAa,WAAY;AACvB,iBAAO,KAAK,QAAQ,QAAQ;AAC5B,eAAK,SAAS,CAAC;AAAA,QACjB;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,CAAC,KAAK,eAAe,GAAG;AAE1B;AAAA,UACF;AACA,cAAI,KAAK,SAAS,GAAG;AAEnB,iBAAK,SAAS,OAAO;AACrB;AAAA,UACF;AACA,eAAK,eAAe;AAAA,QACtB;AAAA,QACA,gBAAgB,WAAY;AAI1B,cAAI,SAAS,EAAE,KAAK,KAAK,EAAE,SAAS,YAAY;AAChD,cAAI,QAAQ,KAAK,MAAM,IAAI,OAAO;AAClC,uBAAa,QAAQ,SAAU,GAAG,GAAG;AACnC,gBAAI,QAAQ,MAAM,IAAI,EAAE,aAAa,UAAU,CAAC;AAChD,gBAAI,QAAQ,MAAM,IAAI,EAAE,aAAa,UAAU,CAAC;AAChD,gBAAI,KAAK,MAAM,WAAW,KAAK;AAC/B,gBAAI,KAAK,MAAM,WAAW,KAAK;AAC/B,mBAAO,OAAO,KAAK,IAAI,KAAK,KAAK,KAAK;AAAA,UACxC,CAAC;AAAA,QACH;AAAA,QACA,YAAY,SAAU,MAAM,iBAAiB;AAC3C,cAAI,YAAY,KAAK,aAAa,YAAY,KAAK;AACnD,cAAI,KAAK,KAAK;AACd,cAAI,QAAQ,KAAK;AACjB,kBAAQ,KAAK,QAAQ,SAAS;AAAA,YAC5B,KAAK,aAAa;AAChB,wBAAU,iBAAiB,IAAI,MAAM,IAAI,GAAG,CAAC;AAC7C;AAAA,YACF,KAAK,aAAa;AAAA,YAClB;AACE,wBAAU,WAAW,EAAE;AACvB;AAAA,UACJ;AACA,eAAK,QAAQ,eAAe;AAAA,QAC9B;AAAA,QACA,YAAY,SAAS,WAAW,MAAM;AACpC,eAAK,QAAQ;AACb,eAAK,SAAS;AAAA,QAChB;AAAA,QACA,OAAO,SAAU,IAAI,IAAI,IAAI,IAAI;AAE/B,cAAI,OAAO,QAAW;AACpB,mBAAOnD,GAAE,cAAc,KAAK,OAAO,CAAC;AAAA,UACtC;AAGA,cAAI,OAAO,QAAW;AACpB,iBAAK;AAAA,UACP;AACA,cAAI,OAAO,QAAW;AACpB,iBAAK;AACL,iBAAK;AAAA,UACP;AACA,cAAI,YAAY,KAAK,UAAU;AAC/B,cAAI,MAAM,MAAM,UAAU,MAAM,UAAU,IAAI;AAC5C,gBAAI,QAAQ,UAAU,KAAK,MAAM,KAAK;AACtC,gBAAI,QAAQ,UAAU,KAAK,MAAM,KAAK;AACtC,iBAAK,UAAU,OAAO,KAAK;AAAA,UAC7B;AACA,eAAK,KAAK,IAAI,MAAM,GAAG,KAAK,SAAS;AACrC,eAAK,KAAK,IAAI,MAAM,GAAG,KAAK,SAAS;AACrC,cAAI,MAAM,KAAK,OAAO;AACtB,cAAI,IAAI;AACR,cAAI,IAAI;AACR,eAAK,OAAO,GAAG;AACf,eAAK,QAAQ,SAAS,IAAI,IAAI,IAAI,EAAE;AACpC,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,QAAQ,SAAU,OAAO,IAAI,IAAI;AAE/B,cAAI,UAAU,QAAW;AACvB,mBAAOA,GAAE,eAAe,KAAK,OAAO,CAAC;AAAA,UACvC;AAOA,cAAI,OAAO,QAAW;AACpB,gBAAIwB,QAAO,KAAK,MAAM,QAAQ;AAC9B,iBAAKA,MAAK,QAAQ;AAClB,iBAAKA,MAAK,SAAS;AAAA,UACrB;AACA,cAAI,MAAM,KAAK,OAAO,EAAE,UAAU,IAAI,EAAE,EAAE,OAAO,KAAK,EAAE,UAAU,CAAC,IAAI,CAAC,EAAE;AAC1E,eAAK,OAAO,GAAG;AACf,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,IAAI,IAAI;AAE3B,cAAI,OAAO,QAAW;AACpB,mBAAOxB,GAAE,kBAAkB,KAAK,OAAO,CAAC;AAAA,UAC1C;AACA,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,SAAS,QAAQ;AACrB,cAAI,WAAW,QAAQ;AAGvB,iBAAO,KAAK;AACZ,iBAAO,KAAK;AACZ,cAAI,MAAM,KAAK,OAAO;AACtB,cAAI,IAAI,MAAM,MAAM,IAAI,MAAM,IAAI;AAChC,mBAAO;AAAA,UACT;AACA,cAAI,IAAI;AACR,cAAI,IAAI;AACR,eAAK,OAAO,GAAG;AACf,cAAI,QAAQ,KAAK,UAAU;AAC3B,cAAI,KAAK,MAAM;AACf,cAAI,KAAK,MAAM;AACf,iBAAO,IAAI;AACX,iBAAO,IAAI;AACX,eAAK,QAAQ,aAAa,IAAI,EAAE;AAChC,cAAI,UAAU;AACZ,iBAAK,SAAS;AAAA,UAChB;AACA,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA,QAGA,UAAU,SAAU,KAAK;AACvB,cAAI,KAAK,SAAS,GAAG,IAAI,KAAK,MAAM,cAAc,GAAG,IAAI,eAAe,IAAI,IAAI,CAAC,IAAI;AACrF,cAAImD,MAAK,KAAK,cAAc,YAAY,EAAE;AAC1C,cAAIA,KAAI;AACN,mBAAO,KAAK,OAAOA,GAAE;AAAA,UACvB;AACA,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,iBAAiB,SAAU,MAAM;AAC/B,cAAIA,MAAK,SAAS,IAAI,KAAK,SAAS,IAAI,IAAI,OAAO,QAAQ,KAAK;AAChE,iBAAO,KAAK,OAAOA,GAAE;AAAA,QACvB;AAAA;AAAA,QAEA,oBAAoB,SAAU,GAAG;AAC/B,cAAI,IAAI,MAAM,CAAC;AACf,cAAI+D,SAAQ,KAAK,MAAM,YAAY,EAAE,IAAI,KAAK,iBAAiB,IAAI;AACnE,iBAAOA,OAAM,OAAO,SAAU,MAAM;AAClC,mBAAO,QAAQ,KAAK,IAAI,QAAQ;AAAA,cAC9B,QAAQ,KAAK;AAAA,YACf,CAAC,EAAE,cAAc,CAAC;AAAA,UACpB,GAAG,IAAI;AAAA,QACT;AAAA;AAAA,QAEA,iBAAiB,SAAU7E,OAAM,KAAK;AACpC,gBAAM,SAAS,OAAO,CAAC,GAAG;AAAA,YACxB,QAAQ;AAAA,UACV,CAAC;AACD,UAAAA,QAAO,IAAI,KAAKA,KAAI;AACpB,cAAI6E,SAAQ,KAAK,MAAM,YAAY,EAAE,IAAI,KAAK,iBAAiB,IAAI;AACnE,cAAI,SAAS,IAAI,SAAS,iBAAiB;AAC3C,iBAAOA,OAAM,OAAO,SAAU,MAAM;AAClC,mBAAO,QAAQ7E,MAAK,MAAM,EAAE,KAAK,IAAI,QAAQ;AAAA,cAC3C,QAAQ,KAAK;AAAA,YACf,CAAC,CAAC;AAAA,UACJ,GAAG,IAAI;AAAA,QACT;AAAA,QACA,aAAa,WAAY;AACvB,eAAK,mBAAmB,QAAQ;AAChC,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,eAAK,mBAAmB,MAAM;AAC9B,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,eAAK,mBAAmB,MAAM;AAC9B,iBAAO;AAAA,QACT;AAAA,QACA,oBAAoB,SAAU,OAAO;AACnC,cAAI;AACJ,cAAI,OAAO,CAAC,GACV,MAAM,UAAU,SAAS;AAC3B,iBAAO,QAAQ,EAAG,MAAK,GAAG,IAAI,UAAU,MAAM,CAAC;AAC/C,cAAI,OAAO,UAAU,UAAU;AAC7B;AAAA,UACF;AACA,WAAC,MAAM,MAAM,QAAQ,MAAM,KAAK,CAAC,eAAe,KAAK,EAAE,OAAO,IAAI,CAAC;AAAA,QACrE;AAAA,QACA,cAAc,SAAUc,KAAI;AAC1B,iBAAO,KAAK,MAAM,QAAQA,GAAE;AAAA,QAC9B;AAAA,QACA,YAAY,SAAU,GAAG,GAAG;AAG1B,iBAAO,KAAK,mBAAmB,GAAG,CAAC,EAAE,WAAW,KAAK,QAAQ,QAAQ;AAAA,QACvE;AAAA,QACA,mBAAmB,SAAU,GAAG,GAAG;AAEjC,cAAI,aAAa,IAAI,MAAM,GAAG,CAAC;AAC/B,cAAI,aAAanD,GAAE,eAAe,YAAY,KAAK,OAAO,CAAC;AAC3D,iBAAO;AAAA,QACT;AAAA,QACA,kBAAkB,SAAU,GAAG,GAAG,OAAO,QAAQ;AAE/C,cAAI,YAAY,IAAI,KAAK,GAAG,GAAG,OAAO,MAAM;AAC5C,cAAI,YAAYA,GAAE,cAAc,WAAW,KAAK,OAAO,CAAC;AACxD,iBAAO;AAAA,QACT;AAAA,QACA,mBAAmB,SAAU,GAAG,GAAG;AAEjC,cAAI,aAAa,IAAI,MAAM,GAAG,CAAC;AAC/B,cAAI,aAAaA,GAAE,eAAe,YAAY,KAAK,OAAO,EAAE,QAAQ,CAAC;AACrE,iBAAO;AAAA,QACT;AAAA,QACA,kBAAkB,SAAU,GAAG,GAAG,OAAO,QAAQ;AAE/C,cAAI,YAAY,IAAI,KAAK,GAAG,GAAG,OAAO,MAAM;AAC5C,cAAI,YAAYA,GAAE,cAAc,WAAW,KAAK,OAAO,EAAE,QAAQ,CAAC;AAClE,iBAAO;AAAA,QACT;AAAA,QACA,oBAAoB,SAAU,GAAG,GAAG;AAElC,cAAI,aAAa,IAAI,MAAM,GAAG,CAAC;AAC/B,cAAI,cAAcA,GAAE,eAAe,YAAY,KAAK,aAAa,CAAC;AAClE,iBAAO;AAAA,QACT;AAAA,QACA,mBAAmB,SAAU,GAAG,GAAG,OAAO,QAAQ;AAEhD,cAAI,YAAY,IAAI,KAAK,GAAG,GAAG,OAAO,MAAM;AAC5C,cAAI,aAAaA,GAAE,cAAc,WAAW,KAAK,aAAa,CAAC;AAC/D,iBAAO;AAAA,QACT;AAAA;AAAA;AAAA;AAAA;AAAA,QAKA,oBAAoB,SAAU,GAAG,GAAG;AAElC,cAAI,cAAc,IAAI,MAAM,GAAG,CAAC;AAChC,cAAI,aAAaA,GAAE,eAAe,aAAa,KAAK,aAAa,EAAE,QAAQ,CAAC;AAC5E,iBAAO;AAAA,QACT;AAAA,QACA,mBAAmB,SAAU,GAAG,GAAG,OAAO,QAAQ;AAEhD,cAAI,aAAa,IAAI,KAAK,GAAG,GAAG,OAAO,MAAM;AAC7C,cAAI,YAAYA,GAAE,cAAc,YAAY,KAAK,aAAa,EAAE,QAAQ,CAAC;AACzE,iBAAO;AAAA,QACT;AAAA,QACA,kBAAkB,SAAU,GAAG,GAAG;AAChC,iBAAO,KAAK,kBAAkB,GAAG,CAAC,EAAE,OAAO,KAAK,WAAW,CAAC;AAAA,QAC9D;AAAA,QACA,iBAAiB,SAAU,GAAG,GAAG,OAAO,QAAQ;AAC9C,iBAAO,KAAK,iBAAiB,GAAG,GAAG,OAAO,MAAM,EAAE,OAAO,KAAK,WAAW,CAAC;AAAA,QAC5E;AAAA,QACA,kBAAkB,SAAU,GAAG,GAAG;AAChC,cAAI,YAAY,IAAI,MAAM,GAAG,CAAC;AAC9B,cAAI,aAAa,UAAU,WAAW,KAAK,WAAW,CAAC;AACvD,iBAAO,KAAK,kBAAkB,UAAU;AAAA,QAC1C;AAAA,QACA,iBAAiB,SAAU,GAAG,GAAG,OAAO,QAAQ;AAC9C,cAAI,aAAa,KAAK,WAAW;AACjC,cAAI,YAAY,IAAI,KAAK,GAAG,GAAG,OAAO,MAAM;AAC5C,oBAAU,KAAK,WAAW;AAC1B,oBAAU,KAAK,WAAW;AAC1B,iBAAO,KAAK,iBAAiB,SAAS;AAAA,QACxC;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,aAAa,KAAK,IAAI,sBAAsB;AAChD,iBAAO,IAAI,MAAM,WAAW,MAAM,WAAW,GAAG;AAAA,QAClD;AAAA,QACA,YAAY,WAAY;AACtB,iBAAO,KAAK,aAAa,EAAE,OAAO,OAAO,SAAS,OAAO,OAAO;AAAA,QAClE;AAAA,QACA,aAAa,SAAU,UAAU;AAC/B,cAAI,EAAE,oBAAoB,WAAW;AACnC,kBAAM,IAAI,MAAM,0BAA0B;AAAA,UAC5C;AACA,cAAI,OAAO,SAAS;AACpB,cAAI,eAAe,KAAK;AACxB,cAAI,QAAQ,KAAK;AACjB,cAAI,KAAK,MAAM,YAAY;AAC3B,cAAI,CAAC,aAAa,YAAY;AAC5B,gBAAI,CAAC,GAAG,WAAW,KAAK,MAAM,OAAO,IAAI,GAAG;AAC1C,qBAAO;AAAA,YACT;AAAA,UACF;AACA,cAAI,CAAC,aAAa,aAAa;AAE7B,gBAAI,CAAC,GAAG,YAAY,KAAK,MAAM,OAAO,IAAI,GAAG;AAC3C,qBAAO;AAAA,YACT;AAAA,UACF;AACA,cAAI,OAAO,aAAa,cAAc,YAAY;AAChD,gBAAI,CAAC,aAAa,UAAU,KAAK,MAAM,UAAU,IAAI,GAAG;AACtD,qBAAO;AAAA,YACT;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,gBAAgB,SAAU,UAAU,QAAQ;AAC1C,iBAAO,WAAW,KAAK,QAAQ,WAAW,IAExC,KAAK,QAAQ,YAAY,KAAK,MAAM,UAAU,MAAM,IAEpD,KAAK,QAAQ,YAAY,MAAM;AAAA,QACnC;AAAA;AAAA;AAAA,QAIA,oBAAoB,SAAU,KAAK;AACjC,cAAI,QAAQ,OAAQ,OAAM,CAAC;AAC3B,cAAI,iBAAiB,IAAI;AACzB,cAAI,OAAO,IAAI;AACf,cAAI,MAAM,KAAK;AACf,cAAI,eAAe,IAAI;AACvB,cAAI,uBAAuB,IAAI;AAW/B,cAAI,mBAAmB,QAAW;AAEhC,gBAAI,CAAC,cAAc;AACjB,qBAAO;AAAA,YACT;AAEA,gBAAI,MAAM;AACR,+BAAiB,aAAa,IAAI;AAElC,kBAAI,mBAAmB,OAAO;AAC5B,uBAAO;AAAA,cACT;AAAA,YACF;AACA,gBAAI,CAAC,gBAAgB;AAEnB,+BAAiB,aAAa,SAAS;AAAA,YACzC;AAAA,UACF;AAMA,cAAI,CAAC,gBAAgB;AACnB,mBAAO;AAAA,UACT;AAGA,cAAI,SAAS,cAAc,GAAG;AAC5B,6BAAiB;AAAA,cACf,MAAM;AAAA,YACR;AAAA,UACF;AACA,cAAI,OAAO,eAAe;AAC1B,cAAI,cAAc,qBAAqB,IAAI;AAG3C,cAAI,CAAC,aAAa;AAChB,kBAAM,IAAI,MAAM,2BAA2B,OAAO,IAAI;AAAA,UACxD;AACA,cAAI,OAAO,YAAY,cAAc,YAAY;AAC/C,kBAAM,IAAI,MAAM,mBAAmB,OAAO,2CAA2C;AAAA,UACvF;AACA,cAAI,OAAO,YAAY,gBAAgB,YAAY;AACjD,kBAAM,IAAI,MAAM,mBAAmB,OAAO,6CAA6C;AAAA,UACzF;AACA,iBAAO;AAAA,YACL;AAAA,YACA,SAAS,eAAe,WAAW,CAAC;AAAA,YACpC;AAAA,UACF;AAAA,QACF;AAAA,QACA,iBAAiB,SAAU,UAAU,UAAU,KAAK;AAClD,cAAI,wBAAwB,KAAK,mBAAmB,GAAG;AACvD,cAAI,CAAC,uBAAuB;AAC1B;AAAA,UACF;AACA,cAAI,cAAc,sBAAsB;AACxC,cAAI,UAAU,sBAAsB;AACpC,sBAAY,UAAU,UAAU,UAAU,OAAO;AAAA,QACnD;AAAA,QACA,mBAAmB,SAAU,UAAU,UAAU,KAAK;AACpD,cAAI,wBAAwB,KAAK,mBAAmB,GAAG;AACvD,cAAI,CAAC,uBAAuB;AAC1B;AAAA,UACF;AACA,cAAI,cAAc,sBAAsB;AACxC,cAAI,UAAU,sBAAsB;AACpC,sBAAY,YAAY,UAAU,UAAU,OAAO;AAAA,QACrD;AAAA;AAAA;AAAA,QAIA,iBAAiB,SAAU,KAAK;AAC9B,cAAI,eAAe;AAInB,gBAAM,eAAe,GAAG;AACxB,cAAI,OAAO,KAAK,SAAS,IAAI,MAAM;AACnC,cAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,UACF;AACA,cAAI,aAAa,KAAK,WAAW,IAAI,SAAS,IAAI,OAAO;AACzD,cAAI,MAAM;AACR,iBAAK,gBAAgB,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,UACtD,OAAO;AACL,iBAAK,QAAQ,yBAAyB,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,QACA,cAAc,SAAU,KAAK;AAG3B,cAAI4C,QAAO,KAAK,UAAU,GAAG;AAE7B,cAAIA,MAAK,cAAc,KAAK,QAAQ,gBAAgB;AAClD,kBAAM,eAAe,GAAG;AACxB,gBAAI,OAAO,KAAK,SAAS,IAAI,MAAM;AACnC,gBAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,YACF;AACA,gBAAI,aAAa,KAAK,WAAW,IAAI,SAAS,IAAI,OAAO;AACzD,gBAAI,MAAM;AACR,mBAAK,aAAa,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,YACnD,OAAO;AACL,mBAAK,QAAQ,sBAAsB,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,YACpE;AAAA,UACF;AAAA,QACF;AAAA,QACA,aAAa,SAAU,KAAK;AAC1B,cAAI,KAAK,QAAQ,oBAAoB;AACnC,gBAAI,eAAe;AAAA,UACrB;AACA,cAAI,KAAK,kBAAkB;AACzB,iBAAK,mBAAmB;AACxB;AAAA,UACF;AACA,gBAAM,eAAe,GAAG;AACxB,eAAK,mBAAmB,GAAG;AAAA,QAC7B;AAAA,QACA,oBAAoB,SAAU,KAAK;AACjC,cAAI,OAAO,KAAK,SAAS,IAAI,MAAM;AACnC,cAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,UACF;AACA,cAAI,aAAa,KAAK,WAAW,IAAI,SAAS,IAAI,OAAO;AACzD,cAAI,MAAM;AACR,iBAAK,YAAY,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,UAClD,OAAO;AACL,iBAAK,QAAQ,qBAAqB,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,UACnE;AAAA,QACF;AAAA,QACA,aAAa,SAAU,KAAK;AAC1B,gBAAM,eAAe,GAAG;AACxB,cAAI,SAAS,IAAI;AACjB,cAAI,SAAS,IAAI;AACjB,cAAI,OAAO,KAAK,SAAS,MAAM;AAC/B,cAAI,gBAAgB,WAAW;AAC/B,cAAI,MAAM;AACR,gBAAI,CAAC,iBAAiB,KAAK,MAAM,KAAK,IAAI,GAAG;AAC3C;AAAA,YACF;AACA,gBAAI,mBAAmB,KAAK,uBAAuB,SAAS,OAAO,OAAO;AAC1E,gBAAI,KAAK,QAAQ,4BAA4B,CAAC,kBAAkB;AAI9D,kBAAI,eAAe;AAAA,YACrB;AACA,gBAAI,kBAAkB;AAGpB,mBAAK,0BAA0B,GAAG;AAAA,YACpC;AAGA,gBAAI,WAAW,KAAK,mBAAmB,KAAK,IAAI;AAChD,gBAAI,UAAU;AAEZ,kBAAI,SAAS,qBAAqB,GAAG;AACnC;AAAA,cACF;AACA,kBAAI,OAAO,SAAS;AAAA,YACtB;AAGA,gBAAI,aAAa,OAAO,QAAQ,UAAU;AAC1C,gBAAI,cAAc,KAAK,OAAO,cAAc,KAAK,GAAG,SAAS,UAAU,GAAG;AACxE,kBAAI,YAAY,eAAe,EAAE,MAAM,IAAI,eAAe;AAAA,gBACxD,MAAM,IAAI;AAAA;AAAA,gBAEV,eAAe;AAAA,cACjB,CAAC,CAAC;AACF,mBAAK,SAAS,SAAS;AACvB,kBAAI,UAAU,mBAAmB,GAAG;AAClC,oBAAI,eAAe;AAAA,cACrB;AAEA,kBAAI,UAAU,qBAAqB,GAAG;AAEpC,oBAAI,eAAe;AACjB;AAAA,gBACF;AACA,qBAAK,mBAAmB,MAAM,UAAU,IAAI;AAC5C;AAAA,cACF;AACA,kBAAI,OAAO,UAAU;AAAA,YACvB;AAAA,UACF;AACA,cAAI,eAAe;AACjB,iBAAK,mBAAmB;AACxB,gBAAI,iBAAiB,EAAE,MAAM,IAAI,eAAe;AAAA,cAC9C,MAAM;AAAA,cACN,MAAM,IAAI;AAAA,YACZ,CAAC;AACD,iBAAK,mBAAmB,cAAc;AAAA,UACxC,OAAO;AACL,gBAAI,aAAa,KAAK,WAAW,IAAI,SAAS,IAAI,OAAO;AACzD,gBAAI,MAAM;AACR,mBAAK,YAAY,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,YAClD,OAAO;AACL,kBAAI,KAAK,QAAQ,2BAA2B;AAC1C,oBAAI,eAAe;AAAA,cACrB;AACA,mBAAK,QAAQ,qBAAqB,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,YACnE;AACA,iBAAK,mBAAmB,MAAM,IAAI,IAAI;AAAA,UACxC;AAAA,QACF;AAAA,QACA,aAAa,SAAU,KAAK;AAE1B,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,CAACA,MAAK,YAAY;AACpB,YAAAA,MAAK,aAAa;AAGlB,iBAAK,iBAAiB;AAAA,UAGxB;AACA,cAAI,aAAa,EAAEA,MAAK;AACxB,cAAI,cAAc,KAAK,QAAQ,eAAe;AAC5C;AAAA,UACF;AACA,gBAAM,eAAe,GAAG;AACxB,cAAI,aAAa,KAAK,WAAW,IAAI,SAAS,IAAI,OAAO;AACzD,cAAI,OAAOA,MAAK;AAChB,cAAI,MAAM;AACR,iBAAK,YAAY,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,UAClD,OAAO;AACL,iBAAK,QAAQ,qBAAqB,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,UACnE;AACA,eAAK,UAAU,KAAKA,KAAI;AAAA,QAC1B;AAAA,QACA,WAAW,SAAU,KAAK;AACxB,eAAK,yBAAyB;AAC9B,cAAI,gBAAgB,eAAe,GAAG;AACtC,cAAI,aAAa,KAAK,WAAW,cAAc,SAAS,cAAc,OAAO;AAC7E,cAAI,OAAO,KAAK,UAAU,GAAG,EAAE;AAC/B,cAAI,MAAM;AACR,iBAAK,UAAU,eAAe,WAAW,GAAG,WAAW,CAAC;AAAA,UAC1D,OAAO;AACL,iBAAK,QAAQ,mBAAmB,eAAe,WAAW,GAAG,WAAW,CAAC;AAAA,UAC3E;AACA,cAAI,CAAC,cAAc,qBAAqB,GAAG;AACzC,iBAAK,aAAa,EAAE,MAAM,IAAI,eAAe;AAAA,cAC3C,MAAM;AAAA,cACN,MAAM,IAAI;AAAA,YACZ,CAAC,CAAC;AAAA,UACJ;AACA,eAAK,eAAe;AAAA,QACtB;AAAA,QACA,WAAW,SAAU,KAAK;AACxB,gBAAM,eAAe,GAAG;AACxB,cAAI,OAAO,KAAK,SAAS,IAAI,MAAM;AACnC,cAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,UACF;AACA,cAAI,MAAM;AACR,iBAAK,UAAU,GAAG;AAAA,UACpB,OAAO;AACL,gBAAI,KAAK,OAAO,IAAI,QAAQ;AAC1B;AAAA,YACF;AACA,iBAAK,QAAQ,mBAAmB,GAAG;AAAA,UACrC;AAAA,QACF;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,gBAAM,eAAe,GAAG;AACxB,cAAI,OAAO,KAAK,SAAS,IAAI,MAAM;AACnC,cAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,UACF;AACA,cAAI,MAAM;AACR,iBAAK,SAAS,GAAG;AAAA,UACnB,OAAO;AACL,gBAAI,KAAK,OAAO,IAAI,QAAQ;AAC1B;AAAA,YACF;AACA,iBAAK,QAAQ,kBAAkB,GAAG;AAAA,UACpC;AAAA,QACF;AAAA,QACA,YAAY,SAAU,KAAK;AACzB,gBAAM,eAAe,GAAG;AACxB,cAAI,SAAS,IAAI;AACjB,cAAI,gBAAgB,IAAI;AACxB,cAAI,gBAAgB,IAAI;AACxB,cAAI,OAAO,KAAK,SAAS,MAAM;AAC/B,cAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,UACF;AACA,cAAI,cAAc,KAAK,SAAS,aAAa;AAC7C,cAAI,MAAM;AACR,gBAAI,gBAAgB,MAAM;AAExB;AAAA,YACF;AACA,iBAAK,WAAW,GAAG;AACnB,gBAAI,KAAK,GAAG,SAAS,aAAa,GAAG;AAEnC;AAAA,YACF;AAAA,UACF;AACA,cAAI,aAAa;AACf;AAAA,UACF;AAGA,cAAI,kBAAkB,KAAK,IAAI;AAE7B,iBAAK,QAAQ,oBAAoB,GAAG;AAAA,UACtC;AAAA,QACF;AAAA,QACA,YAAY,SAAU,KAAK;AACzB,gBAAM,eAAe,GAAG;AACxB,cAAI,SAAS,IAAI;AACjB,cAAI,gBAAgB,IAAI;AACxB,cAAI,gBAAgB,IAAI;AACxB,cAAI,OAAO,KAAK,SAAS,MAAM;AAC/B,cAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,UACF;AACA,cAAI,cAAc,KAAK,SAAS,aAAa;AAC7C,cAAI,MAAM;AACR,gBAAI,gBAAgB,MAAM;AAExB;AAAA,YACF;AACA,iBAAK,WAAW,GAAG;AACnB,gBAAI,KAAK,GAAG,SAAS,aAAa,GAAG;AAEnC;AAAA,YACF;AAAA,UACF;AACA,cAAI,aAAa;AAEf;AAAA,UACF;AAGA,cAAI,kBAAkB,KAAK,IAAI;AAE7B,iBAAK,QAAQ,oBAAoB,GAAG;AAAA,UACtC;AAAA,QACF;AAAA,QACA,0BAA0B,SAAS,WAAY;AAC7C,cAAI,MAAM,KAAK;AACf,cAAI,QAAQ,IAAI;AAChB,cAAI,SAAS,IAAI;AACjB,cAAI,SAAS,OAAO,OAAO,SAAU,KAAK0F,SAAQ;AAChD,mBAAO,MAAM,IAAIA,SAAQ,SAAS;AAAA,UACpC,GAAG,CAAC;AACJ,cAAI1G,SAAQ,KAAK,IAAI,OAAO,MAAM;AAClC,cAAI,QAAQ,KAAK,mBAAmB,MAAM,SAAS,MAAM,OAAO;AAChE,cAAI,IAAI,MAAM;AACd,cAAI,IAAI,MAAM;AACd,eAAK,QAAQ,eAAe,OAAO,GAAG,GAAGA,MAAK;AAC9C,eAAK,iBAAiB;AAAA,YACpB,OAAO;AAAA,YACP,QAAQ,CAAC;AAAA,UACX;AAAA,QACF,GAAG,eAAe;AAAA,UAChB,SAAS;AAAA,QACX,CAAC;AAAA,QACD,YAAY,SAAU,KAAK;AACzB,gBAAM,eAAe,GAAG;AACxB,cAAI,OAAO,KAAK,SAAS,IAAI,MAAM;AACnC,cAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,UACF;AACA,cAAI,gBAAgB,IAAI;AACxB,cAAI,aAAa,KAAK,WAAW,cAAc,SAAS,cAAc,OAAO;AAC7E,cAAI,MAAM,eAAe,aAAa;AACtC,cAAI,SAAS,IAAI;AACjB,cAAI,SAAS,IAAI;AACjB,cAAI,gBAAgB,KAAK,QAAQ,aAAa;AAO9C,cAAI,IAAI,WAAW,iBAAiB,cAAc,SAAS,GAAG;AAE5D,0BAAc,eAAe;AAC7B,iBAAK,eAAe,QAAQ;AAC5B,iBAAK,eAAe,OAAO,KAAK,MAAM;AACtC,iBAAK,yBAAyB;AAAA,UAChC,OAAO;AACL,gBAAI,QAAQ,KAAK,IAAI,IAAI,KAAK,IAAI,GAAG,cAAc,UAAU,CAAC;AAC9D,gBAAI,MAAM;AACR,mBAAK,WAAW,KAAK,WAAW,GAAG,WAAW,GAAG,KAAK;AAAA,YACxD,OAAO;AACL,mBAAK,QAAQ,oBAAoB,KAAK,WAAW,GAAG,WAAW,GAAG,KAAK;AAAA,YACzE;AACA,iBAAK,QAAQ,aAAa,KAAK,QAAQ,MAAM;AAAA,UAC/C;AAAA,QACF;AAAA,QACA,SAAS,SAAU,KAAK;AACtB,cAAI,YAAY,IAAI;AACpB,cAAI,YAAY,UAAU,aAAa,OAAO;AAC9C,cAAI,WAAW;AACb,gBAAI,OAAO,KAAK,SAAS,SAAS;AAClC,gBAAI,MAAM;AACR,oBAAM,eAAe,GAAG;AACxB,kBAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,cACF;AACA,kBAAI,aAAa,KAAK,WAAW,IAAI,SAAS,IAAI,OAAO;AACzD,mBAAK,QAAQ,KAAK,WAAW,WAAW,GAAG,WAAW,CAAC;AAAA,YACzD;AAAA,UACF;AAAA,QACF;AAAA,QACA,aAAa,SAAU,KAAK,SAAS;AACnC,cAAI,aAAa,IAAI;AACrB,cAAI,cAAc,WAAW,aAAa,QAAQ;AAClD,cAAI,aAAa;AACf,gBAAI,OAAO,KAAK,SAAS,UAAU;AACnC,gBAAI,MAAM;AACR,oBAAM,eAAe,GAAG;AACxB,kBAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,cACF;AACA,kBAAI,aAAa,KAAK,WAAW,IAAI,SAAS,IAAI,OAAO;AACzD,sBAAQ,KAAK,MAAM,MAAM,KAAK,YAAY,WAAW,GAAG,WAAW,CAAC;AAAA,YACtE;AAAA,UACF;AAAA,QACF;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,cAAI,IAAI,WAAW,GAAG;AACpB,iBAAK,mBAAmB;AACxB,iBAAK,yBAAyB;AAC9B,gBAAI,iBAAiB,EAAE,MAAM,IAAI,eAAe;AAAA,cAC9C,MAAM;AAAA,cACN,MAAM,IAAI;AAAA,cACV,eAAe,IAAI;AAAA,YACrB,CAAC;AACD,iBAAK,yBAAyB,cAAc;AAC5C,gBAAI,eAAe,qBAAqB,GAAG;AACzC,kBAAI,gBAAgB;AAAA,YACtB;AAAA,UACF,OAAO;AACL,iBAAK,YAAY,KAAK,SAAU,MAAM2G,MAAK,GAAG,GAAG,GAAG;AAClD,mBAAK,SAASA,MAAK,GAAG,CAAC;AAAA,YACzB,CAAC;AAAA,UACH;AAAA,QACF;AAAA,QACA,uBAAuB,SAAU,KAAK;AACpC,eAAK,YAAY,KAAK,SAAU,MAAMA,MAAK,QAAQ,GAAG,GAAG;AACvD,iBAAK,sBAAsBA,MAAK,QAAQ,GAAG,CAAC;AAAA,UAC9C,CAAC;AAAA,QACH;AAAA,QACA,mBAAmB,SAAU,KAAK;AAChC,cAAI,KAAK,QAAQ,oBAAoB;AACnC,gBAAI,eAAe;AAAA,UACrB;AACA,cAAI,KAAK,wBAAwB;AAC/B,iBAAK,yBAAyB;AAC9B;AAAA,UACF;AACA,eAAK,yBAAyB,GAAG;AAAA,QACnC;AAAA,QACA,0BAA0B,SAAU,KAAK;AACvC,eAAK,YAAY,KAAK,SAAU,MAAMA,MAAK,QAAQ,GAAG,GAAG;AACvD,iBAAK,kBAAkBA,MAAK,QAAQ,GAAG,CAAC;AAAA,UAC1C,CAAC;AAAA,QACH;AAAA,QACA,SAAS,SAAU,KAAK;AACtB,cAAI,YAAY,IAAI;AACpB,cAAI,OAAO,KAAK,SAAS,SAAS;AAClC,cAAI,CAAC,MAAM;AACT;AAAA,UACF;AACA,gBAAM,eAAe,GAAG;AACxB,cAAI,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;AAAA,UACF;AAGA,cAAI,WAAW,KAAK,mBAAmB,KAAK,MAAM,SAAS;AAC3D,cAAI,UAAU;AAEZ,gBAAI,SAAS,qBAAqB,GAAG;AACnC;AAAA,YACF;AACA,gBAAI,OAAO,SAAS;AAAA,UACtB;AACA,cAAI,aAAa,KAAK,WAAW,IAAI,SAAS,IAAI,OAAO;AACzD,eAAK,QAAQ,KAAK,WAAW,GAAG,WAAW,CAAC;AAAA,QAC9C;AAAA,QACA,gBAAgB,SAAS,eAAe,KAAK;AAC3C,cAAI,gBAAgB,eAAe,GAAG;AACtC,cAAI,MAAM,KAAK,WAAW,cAAc,SAAS,cAAc,OAAO;AACtE,cAAI,IAAI,IAAI;AACZ,cAAI,IAAI,IAAI;AACZ,iBAAO,CAAC,eAAe,GAAG,CAAC;AAAA,QAC7B;AAAA,QACA,oBAAoB,SAAU,MAAM3F,OAAM;AACxC,UAAAA,UAASA,QAAO,CAAC;AACjB,eAAK,UAAU;AAAA,YACb,MAAMA;AAAA,UACR,GAAG;AAAA,YACD,YAAY,QAAQ;AAAA,YACpB,YAAY;AAAA,UACd,CAAC;AACD,eAAK,uBAAuB,MAAMA,KAAI;AAAA,QACxC;AAAA;AAAA;AAAA,QAGA,OAAO,SAAU,KAAK,MAAM;AAC1B,cAAI,IAAI,SAAS,eAAe,IAAI,WAAW,GAAG;AAEhD,mBAAO;AAAA,UACT;AACA,cAAI,KAAK,QAAQ,SAAS,KAAK,QAAQ,MAAM,KAAK,IAAI,GAAG;AACvD,mBAAO;AAAA,UACT;AACA,cAAI,IAAI,QAAQ,IAAI,KAAK,YAAY,QAAW;AAC9C,mBAAO,IAAI,KAAK;AAAA,UAClB;AACA,cAAI,SAAS,IAAI;AACjB,cAAI,KAAK,kBAAkB,SAAS,OAAO,OAAO,GAAG;AACnD,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,KAAK,SAAS,KAAK,iBAAiB,MAAM;AACpD,mBAAO;AAAA,UACT;AACA,cAAI,KAAK,QAAQ,UAAU,KAAK,OAAO,UAAU,EAAE,SAAS,KAAK,KAAK,MAAM,GAAG;AAC7E,mBAAO;AAAA,UACT;AACA,iBAAO;AAAA,QACT;AAAA,QACA,aAAa,SAAU,UAAU;AAC/B,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,kBAAQ,WAAW;AACnB,cAAI,QAAQ,YAAY,CAAC,QAAQ,cAAc;AAE7C,iBAAK,SAAS;AAAA,UAChB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,WAAY;AACrB,cAAI,KAAK,OAAO;AACd,iBAAK,MAAM,IAAI,mBAAmB,MAAM;AAAA,UAC1C;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,CAAC,KAAK,YAAY;AACpB,iBAAK,aAAa;AAAA,cAChB,MAAM5C,GAAE,OAAO;AAAA,gBACb,OAAO;AAAA,gBACP,QAAQ;AAAA,cACV,GAAGA,GAAE,MAAM,CAAC;AAAA,cACZ,UAAU,CAAC;AAAA,cACX,KAAK,SAAUmD,KAAI,KAAK;AACtB,gBAAAnD,GAAE,KAAK,KAAK,KAAK,WAAW,CAAC,CAAC,EAAE,OAAO,GAAG;AAC1C,qBAAK,SAASmD,GAAE,IAAI;AACpB,qBAAK,KAAK,OAAOnD,GAAE,QAAQ;AAAA,kBACzB,OAAO;AAAA,kBACP,QAAQ;AAAA,kBACR,MAAM,UAAUmD,MAAK;AAAA,gBACvB,CAAC,CAAC;AAAA,cACJ;AAAA,cACA,KAAK,SAAUA,KAAI;AACjB,uBAAO,KAAK,SAASA,GAAE;AAAA,cACzB;AAAA,cACA,OAAO,SAAUA,KAAI;AACnB,uBAAO,KAAK,SAASA,GAAE,MAAM;AAAA,cAC/B;AAAA,YACF;AAAA,UACF;AACA,iBAAO,KAAK;AAAA,QACd;AAAA,QACA,SAAS,SAAU,UAAU;AAC3B,eAAK,UAAU;AACf,eAAK,aAAa;AAClB,eAAK,gBAAgB,CAAC;AACtB,cAAI,cAAc,MAAM,QAAQ,QAAQ,IAAI,WAAW,CAAC,YAAY,CAAC,CAAC;AACtE,sBAAY,QAAQ,SAAU,MAAM;AAClC,iBAAK,cAAc,KAAK,MAAM,KAAK,eAAe,KAAK,uBAAuB,IAAI,CAAC;AAAA,UACrF,GAAG,IAAI;AACP,iBAAO;AAAA,QACT;AAAA,QACA,wBAAwB,SAAU,KAAK;AACrC,cAAI,YAAY,KAAK,YAAY;AACjC,cAAI,SAAS,GAAG,KAAK,MAAM,QAAQ,UAAU,GAAG,CAAC,GAAG;AAClD,mBAAO,UAAU,GAAG,EAAE,IAAI,SAAU,MAAM;AACxC,qBAAO,OAAO,CAAC,GAAG,IAAI;AAAA,YACxB,CAAC;AAAA,UACH;AACA,cAAI,UAAU,OAAO;AAAA,YACnB,MAAM,CAAC,CAAC,CAAC;AAAA,UACX;AACA,cAAIvC,WAAU,MAAM,QAAQ,OAAO;AACnC,cAAI,OAAO,QAAQ;AACnB,cAAI,CAACA,YAAW,CAAC,QAAQ,CAAC,QAAQ,QAAQ;AACxC,mBAAO;AAAA,UACT;AACA,cAAI,QAAQ,MAAM,QAAQ,UAAU,IAAI,CAAC,GAAG;AAC1C,gBAAI,UAAU,UAAU,IAAI,EAAE,IAAI,SAAU,MAAM;AAChD,qBAAO,OAAO,CAAC,GAAG,IAAI;AAAA,YACxB,CAAC;AACD,gBAAI,OAAO,MAAM,QAAQ,QAAQ,IAAI,IAAI,QAAQ,OAAO,CAAC,QAAQ,QAAQ,CAAC,CAAC;AAC3E,qBAAS,KAAK,CAAC,GAAG,KAAK,KAAK,MAAM,CAAC;AACnC,qBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,kBAAI,QAAQ,CAAC,GAAG;AACd,uBAAO,QAAQ,CAAC,GAAG,KAAK,CAAC,CAAC;AAAA,cAC5B;AAAA,YACF;AACA,mBAAO;AAAA,UACT;AACA,iBAAOA,WAAU,UAAU,CAAC,OAAO;AAAA,QACrC;AAAA,QACA,UAAU,SAAU,KAAK;AACvB,cAAI,WAAW,KAAK,QAAQ,gBAAgB,KAAK,QAAQ;AACzD,cAAI,YAAY,GAAG;AACjB,mBAAO,KAAK,UAAU;AAAA,UACxB;AACA,cAAI,eAAe,MAAM,QAAQ,GAAG,IAAI,MAAM,CAAC,GAAG;AAClD,cAAI,MAAM,KAAK,OAAO;AACtB,cAAI,OAAO,KAAK,aAAa;AAC7B,eAAK,cAAc,QAAQ,SAAU,kBAAkBP,QAAO;AAC5D,gBAAI8C,MAAK,aAAa9C;AACtB,gBAAI,UAAU,MAAM,kBAAkB,aAAaA,MAAK,GAAG;AAAA,cACzD,IAAI,IAAI,KAAK;AAAA,cACb,IAAI,IAAI,KAAK;AAAA,cACb,IAAI,IAAI,KAAK;AAAA,cACb,IAAI,IAAI,KAAK;AAAA,YACf,CAAC;AACD,oBAAQ,QAAQ,YAAY,IAAI,KAAK,MAAM,QAAQ,eAAe;AAClE,oBAAQ,SAAS,YAAY,IAAI,KAAK,MAAM,QAAQ,eAAe;AACnE,gBAAI,CAAC,KAAK,MAAM8C,GAAE,GAAG;AACnB,mBAAK,IAAIA,KAAInD,GAAE,WAAW;AAAA,gBACxB,IAAImD;AAAA,gBACJ,cAAc;AAAA,cAChB,GAAGnD,GAAE,QAAQ,MAAM,CAAC,CAAC;AAAA,YACvB;AACA,gBAAI,gBAAgB,KAAK,IAAImD,GAAE;AAC/B,gBAAI,WAAW,QAAQ,MAAM,GAAG;AAC9B,sBAAQ,OAAO,cAAc,KAAK,WAAW,CAAC,GAAG,OAAO;AAAA,YAC1D;AACA,gBAAI,IAAI,QAAQ,KAAK,QAAQ;AAC7B,gBAAI,IAAI,GAAG;AACT,mBAAK,QAAQ;AAAA,YACf;AACA,gBAAI,IAAI,QAAQ,KAAK,QAAQ;AAC7B,gBAAI,IAAI,GAAG;AACT,mBAAK,QAAQ;AAAA,YACf;AACA,0BAAc,KAAK;AAAA,cACjB;AAAA,cACA;AAAA,cACA,OAAO,QAAQ;AAAA,cACf,QAAQ,QAAQ;AAAA,YAClB,CAAC;AAAA,UACH,CAAC;AACD,cAAI,aAAa,IAAI,cAAc,EAAE,kBAAkB,KAAK,KAAK,IAAI;AACrE,uBAAa,mCAAmC,KAAK,UAAU,IAAI;AACnE,eAAK,MAAM,IAAI,mBAAmB,UAAU;AAC5C,iBAAO;AAAA,QACT;AAAA,QACA,uBAAuB,SAAU,KAAK;AACpC,gBAAM,OAAO,CAAC;AACd,cAAI,qBAAqB,IAAI,YAAY;AACzC,cAAI,iBAAiB,IAAI,QAAQ;AACjC,cAAI,eAAe,KAAK,MAAM;AAC9B,cAAI,mBAAmB,KAAK,UAAU;AAGtC,cAAI,WAAW,kBAAkB,GAAG;AAClC,gBAAI,IAAI,iBAAiB,KAAK,aAAa,MAAM,mBAAmB,KAAK;AACzE,gBAAI,IAAI,iBAAiB,KAAK,aAAa,MAAM,mBAAmB,KAAK;AACzE,iCAAqB,IAAI,QAAQ,IAAI;AAAA,UACvC;AAGA,cAAI,WAAW,cAAc,GAAG;AAC9B,6BAAiB,IAAI,KAAK,cAAc,EAAE,MAAM,aAAa,IAAI,aAAa,EAAE;AAChF,6BAAiB,eAAe,QAAQ,QAAQ,eAAe,SAAS;AAAA,UAC1E;AACA,eAAK,YAAY,IAAI;AAAA,YACnB;AAAA,YACA;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,qBAAqB,SAAU,KAAK,KAAK;AAEvC,cAAI,EAAE,eAAe,mBAAmB;AACtC,iBAAK,YAAY,IAAI,mBAAmB,EAAE;AAC1C;AAAA,UACF;AACA,cAAI,CAAC,KAAK,eAAe,KAAK,YAAY,OAAO,IAAI,IAAI;AAEvD;AAAA,UACF;AACA,gBAAM,OAAO,CAAC;AACd,cAAI;AACJ,cAAI,iBAAiB,IAAI;AACzB,cAAI,mBAAmB,IAAI,UAAU;AACrC,cAAI,oBAAoB,IAAI,WAAW;AACvC,cAAI,oBAAoB,KAAK,IAAI,IAAI,OAAO,KAAK;AACjD,cAAI,oBAAoB,KAAK,YAAY,mBAAmB,UAAU,gBAAgB,CAAC;AACvF,cAAI,WAAW,iBAAiB,GAAG;AAEjC,gBAAI,SAAS;AACb,gBAAI,UAAU;AACd,gBAAI,SAAS,kBAAkB,KAAK,GAAG;AACvC,gBAAI,EAAE,kBAAkB,oBAAoB;AAC1C,oBAAM,IAAI,MAAM,mEAAmE;AAAA,YACrF;AACA,8BAAkB,OAAO,UAAU,WAAW;AAC9C,+BAAmB;AACnB,gBAAI,WAAW,cAAc,GAAG;AAE9B,6BAAe,SAAS,OAAO,QAAQ,IAAI;AAC3C,6BAAe,UAAU,OAAO,SAAS,IAAI;AAAA,YAC/C,WAAW,mBAAmB,QAAW;AAEvC,kBAAI,OAAO;AAAA,gBACT,OAAO,OAAO,QAAQ;AAAA,gBACtB,QAAQ,OAAO,SAAS;AAAA,cAC1B;AAAA,YACF;AAAA,UACF,OAAO;AAGL,8BAAkB,IAAI;AACtB,gBAAI,mBAAmB,QAAW;AAEhC,kBAAI,OAAO;AAAA,gBACT,OAAO,IAAI;AAAA,gBACX,QAAQ,IAAI;AAAA,cACd;AAAA,YACF;AAAA,UACF;AACA,eAAK,YAAY,IAAI;AAAA,YACnB,SAAS;AAAA,YACT;AAAA,YACA,iBAAiB,SAAS,kBAAkB;AAAA,UAC9C,CAAC;AACD,eAAK,sBAAsB,GAAG;AAAA,QAChC;AAAA,QACA,uBAAuB,SAAU,OAAO;AACtC,eAAK,IAAI,IAAI,mBAAmB,SAAS,EAAE;AAAA,QAC7C;AAAA,QACA,gBAAgB,SAAU,KAAK;AAC7B,gBAAM,OAAO,CAAC;AACd,eAAK,sBAAsB,IAAI,KAAK;AACpC,cAAI,IAAI,OAAO;AACb,kBAAM,KAAK,cAAc,UAAU,GAAG;AACtC,iBAAK,GAAG;AACR,gBAAI,MAAM,SAAS,cAAc,KAAK;AACtC,gBAAI,SAAS,KAAK,oBAAoB,KAAK,MAAM,KAAK,GAAG;AACzD,gBAAI,MAAM,IAAI;AAAA,UAChB,OAAO;AACL,iBAAK,oBAAoB,IAAI;AAC7B,iBAAK,cAAc;AAAA,UACrB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,kBAAkB,SAAU,OAAO;AACjC,eAAK,QAAQ,cAAc;AAC3B,iBAAO,KAAK,QAAQ,oBAAoB,KAAK;AAAA,QAC/C;AAAA;AAAA;AAAA,QAIA,WAAW,SAAU,OAAO;AAC1B,iBAAO,CAAC,CAAC,KAAK,IAAI,eAAe,KAAK;AAAA,QACxC;AAAA,QACA,cAAc,SAAU,UAAU;AAChC,cAAI,CAAC,WAAW,QAAQ,GAAG;AACzB,kBAAM,IAAI,UAAU,iEAAiE;AAAA,UACvF;AACA,cAAI,WAAW,SAAS;AACxB,cAAI,OAAO,SAAS;AAGpB,cAAI,CAAC,UAAU;AACb,uBAAW,OAAO,KAAK,IAAI,KAAK,SAAS,KAAK,UAAU,QAAQ,CAAC;AAAA,UACnE;AAIA,cAAI,CAAC,KAAK,UAAU,QAAQ,GAAG;AAC7B,gBAAI,YAAY;AAChB,gBAAI,kBAAkB,UAAU,IAAI,KAAK,UAAU,IAAI,EAAE,SAAS,QAAQ,CAAC,CAAC;AAC5E,gBAAI,CAAC,iBAAiB;AACpB,oBAAM,IAAI,MAAM,yBAAyB,IAAI;AAAA,YAC/C;AAIA,gBAAI,cAAc,OAAO;AAAA,cACvB,aAAa;AAAA,cACb,GAAG;AAAA,cACH,GAAG;AAAA,cACH,OAAO;AAAA,cACP,QAAQ;AAAA,YACV,GAAG,SAAS,OAAO;AAAA,cACjB,IAAI;AAAA,YACN,CAAC;AACD,YAAAnD,GAAE,iBAAiB,WAAW,EAAE,SAAS,KAAK,IAAI;AAAA,UACpD;AACA,iBAAO;AAAA,QACT;AAAA,QACA,gBAAgB,SAAU,UAAU;AAClC,cAAI,CAAC,WAAW,QAAQ,GAAG;AACzB,kBAAM,IAAI,UAAU,mEAAmE;AAAA,UACzF;AACA,cAAI,MAAM;AACV,cAAIyD,OAAM,IAAI;AACd,cAAI,OAAO,IAAI;AACf,cAAI,OAAO,SAAS;AACpB,cAAIN,MAAK,SAAS;AAClB,cAAIA,QAAO,OAAQ,CAAAA,MAAK,OAAOM,KAAI,KAAK,SAAS,KAAK,UAAU,QAAQ,CAAC;AACzE,cAAI,QAAQ,SAAS;AACrB,cAAI,QAAQ,SAAS;AACrB,cAAI,UAAU,OAAQ,SAAQ,CAAC;AAG/B,cAAI,KAAK,UAAUN,GAAE,GAAG;AACtB,mBAAOA;AAAA,UACT;AAEA,cAAI,WAAW,QAAQ,KAAK,EAAE,IAAI,SAAU2D,MAAK;AAC/C,gBAAI,SAASA,KAAI;AACjB,gBAAI,QAAQA,KAAI;AAChB,gBAAI0B,WAAU1B,KAAI;AAClB,mBAAO9G,GAAE,MAAM,EAAE,KAAK;AAAA,cACpB,UAAU;AAAA,cACV,cAAc;AAAA,cACd,gBAAgB,OAAO,SAASwI,QAAO,IAAIA,WAAU;AAAA,YACvD,CAAC;AAAA,UACH,CAAC;AACD,cAAI,cAAcxI,GAAE,MAAM,OAAO,QAAQ;AACzC,sBAAY,KAAKmD;AACjB,sBAAY,SAAS,IAAI;AACzB,iBAAOA;AAAA,QACT;AAAA,QACA,eAAe,SAAU,SAAS;AAChC,cAAI,CAAC,WAAW,OAAO,GAAG;AACxB,kBAAM,IAAI,UAAU,kEAAkE;AAAA,UACxF;AACA,cAAI,MAAM;AACV,cAAIM,OAAM,IAAI;AACd,cAAI,OAAO,IAAI;AACf,cAAIN,MAAK,QAAQ;AACjB,cAAIA,QAAO,OAAQ,CAAAA,MAAKM,KAAI,KAAK,SAAS,KAAK,UAAU,OAAO,CAAC;AACjE,cAAI,SAAS,QAAQ;AACrB,cAAI,QAAQ,QAAQ;AACpB,cAAI,UAAU,OAAQ,SAAQ,CAAC;AAC/B,cAAI,CAAC,QAAQ;AACX,kBAAM,IAAI,UAAU,6CAA6C;AAAA,UACnE;AAGA,cAAI,KAAK,UAAUN,GAAE,GAAG;AACtB,mBAAOA;AAAA,UACT;AAEA,cAAI,aAAanD,GAAE,WAAW;AAAA,YAC5B,cAAc;AAAA,UAChB,CAAC;AACD,qBAAW,KAAKmD;AAChB,qBAAW,KAAK,KAAK;AACrB,cAAI,OAAO,WAAW,UAAU;AAC9B,uBAAW,OAAOnD,GAAE,MAAM,CAAC;AAAA,UAC7B,OAAO;AACL,gBAAI,QAAQ,aAAa,MAAM;AAC/B,gBAAI,WAAW,MAAM;AACrB,uBAAW,OAAO,QAAQ;AAAA,UAC5B;AACA,qBAAW,SAAS,IAAI;AACxB,iBAAOmD;AAAA,QACT;AAAA,QACA,cAAc,SAAU,QAAQ;AAC9B,cAAI,CAAC,WAAW,MAAM,GAAG;AACvB,kBAAM,IAAI,UAAU,wEAAwE;AAAA,UAC9F;AACA,cAAI,MAAM;AACV,cAAIM,OAAM,IAAI;AACd,cAAI,OAAO,IAAI;AACf,cAAIN,MAAK,OAAO;AAChB,cAAIA,QAAO,OAAQ,CAAAA,MAAKM,KAAI,KAAK,SAAS,KAAK,UAAU,MAAM,CAAC;AAChE,cAAI,SAAS,OAAO;AACpB,cAAI,QAAQ,OAAO;AACnB,cAAI,UAAU,OAAQ,SAAQ,CAAC;AAC/B,cAAI,cAAc,OAAO;AACzB,cAAI,gBAAgB,OAAQ,eAAc;AAG1C,cAAI,KAAK,UAAUN,GAAE,GAAG;AACtB,mBAAOA;AAAA,UACT;AAEA,cAAI,YAAYnD,GAAE,UAAU;AAAA,YAC1B,QAAQ;AAAA,YACR,UAAU;AAAA,YACV;AAAA,UACF,CAAC;AACD,oBAAU,KAAKmD;AACf,oBAAU,KAAK,KAAK;AACpB,cAAI;AACJ,cAAI,QAAQ;AACV,gBAAI;AACJ,gBAAI,OAAO,WAAW,UAAU;AAG9B,0BAAYnD,GAAE,MAAM;AAGpB,0BAAY,MAAM,QAAQ,SAAS,IAAI,YAAY,CAAC,SAAS;AAAA,YAC/D,OAAO;AAGL,kBAAI,QAAQ,aAAa,MAAM;AAC/B,kBAAI,WAAW,MAAM;AACrB,0BAAYA,GAAE,QAAQ,EAAE,SAAS;AAAA,YACnC;AAGA,gBAAI,UAAU,SAAS,GAAG;AACxB,iCAAmBA,GAAE,GAAG,EAAE,OAAO,SAAS;AAAA,YAC5C,OAAO;AACL,iCAAmB,UAAU,CAAC;AAAA,YAChC;AAAA,UACF,OAAO;AAGL,gBAAI,OAAO,OAAO;AAClB,gBAAI,SAAS,OAAQ,QAAO;AAC5B,+BAAmBA,GAAE,IAAI;AAAA,UAC3B;AAIA,cAAI,cAAc,KAAK,QAAQ,QAAQ,MAAM,UAAU,SAAS,aAAa;AAC7E,cAAI,kBAAkB,OAAO,KAAK,WAAW;AAC7C,0BAAgB,QAAQ,SAAU,KAAK;AACrC,gBAAI,QAAQ,YAAY,GAAG;AAC3B,gBAAI,cAAc,iBAAiB,KAAK,GAAG;AAC3C,gBAAI,eAAe,MAAM;AAEvB,+BAAiB,KAAK,KAAK,KAAK;AAAA,YAClC,OAAO;AAEL,sBAAQ,KAAK;AAAA,gBACX,KAAK;AAEH,mCAAiB,KAAK,KAAK,QAAQ,MAAM,WAAW;AACpD;AAAA,cACJ;AAAA,YACF;AAAA,UACF,CAAC;AACD,2BAAiB,SAAS,SAAS;AACnC,oBAAU,SAAS,IAAI;AACvB,iBAAOmD;AAAA,QACT;AAAA,QACA,oBAAoB,SAAU,KAAK,MAAM,UAAU;AACjD,cAAI,aAAa,OAAQ,YAAW,KAAK;AACzC,cAAI,YAAY,IAAI,OAAO,QAAQ,SAAS;AAC5C,cAAI,aAAa,aAAa,aAAa,KAAK,GAAG,SAAS,SAAS,GAAG;AACtE,gBAAI,WAAW,eAAe,EAAE,MAAM,IAAI,eAAe;AAAA,cACvD,MAAM,IAAI;AAAA;AAAA,cAEV,eAAe;AAAA,YACjB,CAAC,CAAC;AACF,iBAAK,QAAQ,QAAQ;AACrB,gBAAI,SAAS,mBAAmB,GAAG;AACjC,kBAAI,eAAe;AAAA,YACrB;AACA,mBAAO;AAAA,UACT;AACA,iBAAO;AAAA,QACT;AAAA,MACF,GAAG;AAAA,QACD,SAAS;AAAA,QACT,QAAQ;AAAA,QACR,oBAAoB;AAAA,UAClB,QAAQ,SAAU,KAAK;AAIrB,gBAAI,SAAS,SAAS,cAAc,QAAQ;AAC5C,gBAAI,WAAW,IAAI;AACnB,gBAAI,YAAY,IAAI;AACpB,mBAAO,QAAQ,IAAI;AACnB,mBAAO,SAAS,IAAI;AACpB,gBAAI,MAAM,OAAO,WAAW,IAAI;AAEhC,gBAAI,UAAU,KAAK,GAAG,GAAG,UAAU,SAAS;AAE5C,gBAAI,aAAa,IAAI,GAAG,GAAG,IAAI,OAAO,OAAO,OAAO,MAAM;AAC1D,gBAAI,UAAU,KAAK,GAAG,GAAG,UAAU,SAAS;AAE5C,gBAAI,aAAa,IAAI,GAAG,GAAG,GAAG,OAAO,OAAO,CAAC;AAC7C,gBAAI,UAAU,KAAK,GAAG,GAAG,UAAU,SAAS;AAE5C,gBAAI,aAAa,GAAG,GAAG,GAAG,IAAI,GAAG,OAAO,MAAM;AAC9C,gBAAI,UAAU,KAAK,GAAG,GAAG,UAAU,SAAS;AAC5C,mBAAO;AAAA,UACT;AAAA,UACA,OAAO,SAAU,KAAK;AAIpB,gBAAI,SAAS,SAAS,cAAc,QAAQ;AAC5C,gBAAI,WAAW,IAAI;AACnB,gBAAI,YAAY,IAAI;AACpB,mBAAO,QAAQ,WAAW;AAC1B,mBAAO,SAAS;AAChB,gBAAI,MAAM,OAAO,WAAW,IAAI;AAEhC,gBAAI,UAAU,KAAK,GAAG,GAAG,UAAU,SAAS;AAE5C,gBAAI,UAAU,IAAI,UAAU,CAAC;AAC7B,gBAAI,MAAM,IAAI,CAAC;AACf,gBAAI,UAAU,KAAK,GAAG,GAAG,UAAU,SAAS;AAC5C,mBAAO;AAAA,UACT;AAAA,UACA,OAAO,SAAU,KAAK;AAIpB,gBAAI,SAAS,SAAS,cAAc,QAAQ;AAC5C,gBAAI,WAAW,IAAI;AACnB,gBAAI,YAAY,IAAI;AACpB,mBAAO,QAAQ;AACf,mBAAO,SAAS,YAAY;AAC5B,gBAAI,MAAM,OAAO,WAAW,IAAI;AAEhC,gBAAI,UAAU,KAAK,GAAG,GAAG,UAAU,SAAS;AAE5C,gBAAI,UAAU,GAAG,IAAI,SAAS;AAC9B,gBAAI,MAAM,GAAG,EAAE;AACf,gBAAI,UAAU,KAAK,GAAG,GAAG,UAAU,SAAS;AAC5C,mBAAO;AAAA,UACT;AAAA,UACA,WAAW,SAAU,KAAK,KAAK;AAI7B,kBAAM,OAAO,CAAC;AACd,gBAAI,WAAW,IAAI;AACnB,gBAAI,YAAY,IAAI;AACpB,gBAAI,SAAS,SAAS,cAAc,QAAQ;AAC5C,mBAAO,QAAQ,WAAW;AAC1B,mBAAO,SAAS,YAAY;AAC5B,gBAAI,MAAM,OAAO,WAAW,IAAI;AAChC,gBAAI,QAAQ,SAAS,IAAI,cAAc,IAAI,CAAC,IAAI,iBAAiB;AACjE,gBAAIsF,WAAU,MAAM,KAAK;AACzB,gBAAI,QAAQ,OAAO,QAAQ;AAC3B,gBAAI,QAAQ,OAAO,SAAS;AAC5B,qBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,uBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,qBAAK,IAAI,KAAK,IAAI,GAAG;AAEnB,sBAAI,aAAa,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,KAAK;AACrE,sBAAI,OAAOA,QAAO;AAClB,sBAAI,UAAU,KAAK,CAAC,WAAW,GAAG,CAAC,YAAY,GAAG,UAAU,SAAS;AAAA,gBACvE;AAAA,cACF;AAAA,YACF;AACA,mBAAO;AAAA,UACT;AAAA,QACF;AAAA,QACA,cAAc;AAAA,UACZ,KAAK,CAAC;AAAA,YACJ,OAAO;AAAA,YACP,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,QAAQ,SAAU,IAAI,KAAK;AACzB,cAAAzI,GAAE,EAAE,EAAE,KAAK;AAAA,gBACT,OAAO,IAAI,YAAY,IAAI;AAAA,gBAC3B,QAAQ,IAAI,YAAY,IAAI;AAAA,gBAC5B,MAAM,IAAI;AAAA,cACZ,CAAC;AAAA,YACH;AAAA,UACF,CAAC;AAAA,UACD,UAAU,CAAC;AAAA,YACT,OAAO;AAAA,YACP,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,QAAQ,SAAU,IAAI,KAAK;AACzB,kBAAI,OAAO,IAAI,MAAM,IAAI,IAAI,YAAY,IAAI,KAAK,IAAI;AACtD,cAAAA,GAAE,EAAE,EAAE,KAAK;AAAA,gBACT,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM,IAAI;AAAA,cACZ,CAAC;AAAA,YACH;AAAA,UACF,CAAC;AAAA,UACD,MAAM,CAAC;AAAA,YACL,OAAO;AAAA,YACP,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,QAAQ,SAAU,IAAI,KAAK;AACzB,kBAAI;AACJ,kBAAI,QAAQ,IAAI;AAChB,kBAAI,SAAS,IAAI;AACjB,kBAAI,YAAY,IAAI;AACpB,kBAAI,QAAQ,aAAa,KAAK,SAAS,aAAa,GAAG;AACrD,oBAAI,CAAC,KAAK,OAAO,GAAG,cAAc,MAAM,EAAE,KAAK,GAAG;AAAA,cACpD,OAAO;AACL,oBAAI;AAAA,cACN;AACA,cAAAA,GAAE,EAAE,EAAE,KAAK;AAAA,gBACT,KAAK;AAAA,gBACL,QAAQ,IAAI;AAAA,gBACZ,gBAAgB,IAAI;AAAA,cACtB,CAAC;AAAA,YACH;AAAA,UACF,CAAC;AAAA,UACD,YAAY,CAAC;AAAA,YACX,OAAO;AAAA,YACP,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,QAAQ,SAAU,IAAI,KAAK;AACzB,kBAAI;AACJ,kBAAI,QAAQ,IAAI;AAChB,kBAAI,SAAS,IAAI;AACjB,kBAAI,YAAY,IAAI;AACpB,kBAAI,QAAQ,aAAa,KAAK,SAAS,aAAa,GAAG;AACrD,oBAAI,CAAC,KAAK,OAAO,GAAG,cAAc,MAAM,EAAE,KAAK,GAAG;AAAA,cACpD,OAAO;AACL,oBAAI;AAAA,cACN;AACA,cAAAA,GAAE,EAAE,EAAE,KAAK;AAAA,gBACT,KAAK;AAAA,gBACL,QAAQ,IAAI;AAAA,gBACZ,gBAAgB,IAAI;AAAA,cACtB,CAAC;AAAA,YACH;AAAA,UACF,GAAG;AAAA,YACD,OAAO;AAAA,YACP,WAAW;AAAA,YACX,aAAa;AAAA,YACb,QAAQ;AAAA,YACR,QAAQ,SAAU,IAAI,KAAK;AACzB,kBAAI;AACJ,kBAAI,QAAQ,IAAI;AAChB,kBAAI,SAAS,IAAI;AACjB,kBAAI,YAAY,IAAI;AACpB,kBAAI,QAAQ,aAAa,KAAK,SAAS,aAAa,GAAG;AACrD,oBAAI,CAAC,KAAK,OAAO,GAAG,cAAc,MAAM,EAAE,KAAK,GAAG;AAAA,cACpD,OAAO;AACL,oBAAI;AAAA,cACN;AACA,cAAAA,GAAE,EAAE,EAAE,KAAK;AAAA,gBACT,KAAK;AAAA,gBACL,QAAQ,IAAI;AAAA,gBACZ,gBAAgB,IAAI;AAAA,cACtB,CAAC;AAAA,YACH;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AACD,UAAI,WAAW,KAAK,OAAO;AAAA,QACzB,MAAM;AAAA,QACN,SAAS;AAAA,QACT,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,MAAM,WAAY;AAChB,cAAI,OAAO,KAAK;AAChB,cAAI,MAAM;AACR,iBAAK,IAAI,KAAK,kBAAkB,IAAI;AAAA,UACtC;AAAA,QACF;AAAA,QACA,WAAW,SAAU,MAAM,WAAW;AACpC,eAAK,cAAc;AACnB,eAAK,QAAQ,KAAK;AAClB,eAAK,aAAa;AAClB,eAAK,oBAAoB,KAAK,EAAE;AAEhC,eAAK,eAAe;AACpB,iBAAO;AAAA,QACT;AAAA,QACA,qBAAqB,SAAU,IAAI;AACjC,cAAI,IAAI;AACN,eAAG,aAAa,YAAY,KAAK,YAAY,MAAM,EAAE;AAAA,UACvD;AAAA,QACF;AAAA,QACA,SAAS,WAAY;AACnB,iBAAO,KAAK;AAAA,QACd;AAAA,QACA,MAAM,WAAY;AAChB,eAAK,GAAG,MAAM,UAAU;AACxB,eAAK,WAAW;AAAA,QAClB;AAAA,QACA,MAAM,WAAY;AAChB,eAAK,GAAG,MAAM,UAAU;AACxB,eAAK,WAAW;AAAA,QAClB;AAAA,QACA,WAAW,WAAY;AACrB,iBAAO,CAAC,CAAC,KAAK;AAAA,QAChB;AAAA,QACA,OAAO,WAAY;AACjB,cAAIwI,WAAU,KAAK,QAAQ;AAC3B,cAAI,SAASA,QAAO,GAAG;AACrB,iBAAK,GAAG,MAAM,UAAUA;AAAA,UAC1B;AACA,eAAK,WAAW,UAAU,IAAI;AAAA,QAChC;AAAA,QACA,MAAM,WAAY;AAChB,eAAK,GAAG,MAAM,UAAU;AACxB,eAAK,WAAW,SAAS,IAAI;AAAA,QAC/B;AAAA,QACA,QAAQ,WAAY;AAAA,QAEpB;AAAA,QACA,OAAO,SAAU,KAAK;AAEpB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,cAAc,IAAI;AACtB,cAAI,CAAC,SAAS,CAAC,aAAa;AAC1B,mBAAO;AAAA,UACT;AACA,iBAAO,MAAM,MAAM,KAAK,WAAW;AAAA,QACrC;AAAA,MACF,CAAC;AACD,UAAI,YAAY,KAAK,OAAO;AAAA,QAC1B,SAAS;AAAA,QACT,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,OAAO;AAAA,QACP,YAAY;AAAA,QACZ,SAAS;AAAA,UACP,OAAO;AAAA,UACP,aAAa;AAAA,UACb,MAAM;AAAA;AAAA;AAAA,QAGR;AAAA,QACA,WAAW,SAAU,SAAS;AAC5B,oBAAU,OAAO,KAAK,SAAS,OAAO;AACtC,cAAI,QAAQ,QAAQ;AACpB,cAAI,CAAC,MAAM,QAAQ,KAAK,GAAG;AACzB,mBAAO;AAAA,UACT;AACA,cAAI,cAAc,QAAQ;AAC1B,cAAI,EAAE,uBAAuB,WAAW;AACtC,mBAAO;AAAA,UACT;AACA,cAAItB,SAAQ,KAAK,QAAQ,CAAC;AAC1B,mBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,gBAAI,OAAO,MAAM,CAAC;AAClB,gBAAI,EAAE,gBAAgB,WAAW;AAC/B;AAAA,YACF;AACA,iBAAK,UAAU,aAAa,IAAI;AAChC,iBAAK,IAAI,OAAO,KAAK,EAAE;AACvB,YAAAA,OAAM,KAAK,IAAI;AAAA,UACjB;AACA,eAAK,aAAa;AAClB,sBAAY,cAAc,YAAY,QAAQ,OAAO,CAAC;AACtD,iBAAO;AAAA,QACT;AAAA,QACA,SAAS,WAAY;AACnB,iBAAO,KAAK,QAAQ;AAAA,QACtB;AAAA,QACA,QAAQ,SAAU,KAAK;AACrB,kBAAQ,MAAM,CAAC;AACf,cAAI,QAAQ,KAAK;AACjB,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AACA,cAAI,aAAa,KAAK;AACtB,mBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,gBAAI,OAAO,MAAM,CAAC;AAClB,gBAAI,CAAC,YAAY;AAEf,mBAAK,OAAO;AAAA,YACd,WAAW,IAAI,SAAS,KAAK,OAAO,KAAK,UAAU,GAAG;AACpD,mBAAK,OAAO;AAAA,YACd;AAAA,UACF;AACA,cAAI,CAAC,KAAK,UAAU,GAAG;AACrB,iBAAK,MAAM;AAAA,UACb;AACA,cAAI,CAAC,YAAY;AAEf,iBAAK,SAAS;AACd,iBAAK,aAAa;AAAA,UACpB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,aAAa;AAChC,cAAI,QAAQ,KAAK;AACjB,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AACA,mBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,gBAAI,OAAO,MAAM,CAAC;AAClB,gBAAI,gBAAgB,MAAM;AACxB,mBAAK,KAAK;AAAA,YACZ,OAAO;AACL,mBAAK,KAAK;AAAA,YACZ;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,SAAU,aAAa;AAC/B,cAAI,QAAQ,KAAK;AACjB,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AACA,mBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,gBAAI,OAAO,MAAM,CAAC;AAClB,gBAAI,SAAS,eAAe,CAAC,KAAK,UAAU,GAAG;AAC7C,mBAAK,KAAK;AACV,mBAAK,OAAO;AAAA,YACd;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,QACA,MAAM,WAAY;AAChB,iBAAO,KAAK,UAAU,IAAI;AAAA,QAC5B;AAAA,QACA,MAAM,WAAY;AAChB,iBAAO,KAAK,SAAS,IAAI;AAAA,QAC3B;AAAA,QACA,UAAU,WAAY;AACpB,cAAI,QAAQ,KAAK;AACjB,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AACA,mBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,kBAAM,CAAC,EAAE,OAAO;AAAA,UAClB;AACA,eAAK,QAAQ;AAAA,QACf;AAAA,QACA,OAAO,WAAY;AACjB,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,KAAK,IAAI;AACb,cAAI,cAAc,QAAQ;AAC1B,cAAI,QAAQ,QAAQ;AACpB,cAAI,UAAU,OAAQ,SAAQ,YAAY;AAC1C,cAAI,IAAI,QAAQ;AAChB,cAAI,aAAa;AACf,gBAAI,OAAO;AACT,0BAAY,MAAM,aAAa,KAAK,EAAE,iBAAiB,IAAI,CAAC;AAAA,YAC9D,OAAO;AACL,0BAAY,GAAG,YAAY,EAAE;AAAA,YAC/B;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AACD,UAAI,UAAU;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,SAAS;AAAA,QACT;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,UAAI,gBAAgB;AAAA,QAClB,eAAe,SAAU,SAAS;AAEhC,iBAAO,QAAQ,KAAK;AAAA,QACtB;AAAA,QACA,YAAY,SAAU,MAAM;AAC1B,cAAI,YAAY,KAAK,IAAI,WAAW,KAAK,CAAC;AAC1C,cAAI,OAAO;AAAA;AAAA,YAET,QAAQ,KAAK,IAAI,QAAQ,KAAK;AAAA;AAAA;AAAA,YAG9B,QAAQ,KAAK,IAAI,QAAQ,KAAK;AAAA;AAAA;AAAA,YAG9B,UAAU,KAAK,IAAI,eAAe,KAAK;AAAA;AAAA;AAAA,YAGvC,aAAa,KAAK,IAAI,aAAa,KAAK;AAAA;AAAA,YAExC,OAAO,UAAU,SAAS;AAAA;AAAA,YAE1B,QAAQ,UAAU,UAAU;AAAA,UAC9B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,SAAU,KAAK,GAAG,IAAI;AACnC,cAAI,UAAU,KAAK,QAAQ,CAAC;AAC5B,cAAI,SAAS,GAAG,KAAK,CAAC;AACtB,cAAI,IAAI,aAAa;AACnB,gBAAI,YAAY,SAAS,MAAM;AAAA,UACjC,OAAO;AACL,oBAAQ,IAAI,YAAY;AAAA,cACtB,GAAG,OAAO,IAAI,OAAO,QAAQ;AAAA,cAC7B,GAAG,OAAO,IAAI,OAAO,SAAS;AAAA,YAChC,CAAC;AAAA,UACH;AAAA,QACF;AAAA,QACA,YAAY,SAAU,KAAK,SAAS,IAAI;AACtC,cAAI,qBAAqB;AACzB,cAAI,OAAO,KAAK,QAAQ,QAAQ,IAAI;AACpC,cAAI,SAAS,GAAG,KAAK,OAAO;AAC5B,cAAI,SAAS,OAAO,UAAU,CAAC;AAC/B,cAAI,WAAW,IAAI,SAAS,MAAM;AAGlC,cAAI,IAAI,eAAe,IAAI,iBAAiB;AAC1C,gBAAI,WAAW,IAAI,WAAW,GAAG;AAC/B,kBAAI,YAAY,MAAM,MAAM;AAAA,YAC9B,OAAO;AAEL,uBAAS,SAAS;AAAA,gBAChB,WAAW;AAAA,cACb,CAAC;AACD,kBAAI,iBAAiB,SAAS,OAAO,IAAI,SAAUhG,QAAO;AACxD,uBAAOA,OAAM,OAAO;AAAA,cACtB,CAAC;AACD,kBAAI,oBAAoB,eAAe;AAGvC,mBAAK,IAAI,YAAY,eAAe,MAAM,GAAG,oBAAoB,CAAC,CAAC;AAAA,YACrE;AAAA,UACF;AACA,cAAI,IAAI,aAAa,OAAO,UAAU,OAAO,QAAQ;AACnD,gBAAI,gBAAgB;AAAA,cAClB,GAAG,OAAO;AAAA,cACV,GAAG,OAAO;AAAA,YACZ;AACA,gBAAI,WAAW,IAAI,SAAS,GAAG;AAC7B,kBAAI,UAAU,MAAM,eAAe,MAAM;AAAA,YAC3C,OAAO;AAGL,kBAAIZ,UAAS,SAAS,mBAAmB,aAAa;AACtD,kBAAI,eAAe,SAAS,cAAcA,OAAM;AAChD,kBAAI,WAAWA,UAAS,SAAS,OAAO;AACxC,kBAAI,SAAS,IAAI,MAAM,aAAa,EAAE,WAAW,YAAY,EAAE,OAAO;AACtE,mBAAK,MAAM,GAAG;AAAA,gBACZ,UAAU;AAAA,kBACR;AAAA,kBACA;AAAA,gBACF;AAAA,cACF,CAAC;AAAA,YACH;AAAA,UACF;AAAA,QACF;AAAA,QACA,QAAQ,SAAU,cAAc,KAAK;AACnC,cAAI;AACJ,cAAI,wBAAwB,OAAO;AACjC,oBAAQ;AAAA,UACV,OAAO;AAGL,oBAAQ,IAAI,MAAM,EAAE,WAAW,cAAc;AAAA,cAC3C,KAAK;AAAA,cACL,MAAM;AAAA,YACR,CAAC;AAAA,UACH;AAGA,yBAAe;AACf,gBAAM,SAAS,OAAO,CAAC,GAAG;AAAA,YACxB,gBAAgB;AAAA,YAChB,gBAAgB;AAAA,YAChB,eAAe,KAAK;AAAA,YACpB,YAAY,KAAK;AAAA,UACnB,CAAC;AAGD,cAAI,YAAY,IAAI,UAAU,OAAO,UAAU,cAAc,QAAQ;AAGrE,cAAI,cAAc,QAAW;AAC3B,kBAAM,IAAI,MAAM,oDAAoD;AAAA,UACtE;AAIA,cAAI,UAAU,cAAc,WAAW,OAAO;AAAA,YAC5C,UAAU,IAAI;AAAA,YACd,UAAU;AAAA;AAAA,YAEV,YAAY;AAAA;AAAA,YAEZ,UAAU;AAAA,YACV,cAAc,IAAI;AAAA,YAClB,cAAc,IAAI;AAAA,YAClB,aAAa,SAAU,MAAM;AAG3B,qBAAO,KAAK;AAAA,YACd;AAAA,UACF,CAAC;AACD,cAAI,UAAU,CAAC;AACf,cAAI,UAAU,IAAI,WAAW;AAC7B,cAAI,UAAU,IAAI,WAAW;AAI7B,cAAI,IAAI,SAAS;AACf,oBAAQ,UAAU,IAAI;AAAA,UACxB;AAEA,cAAI,IAAI,OAAO;AACb,oBAAQ,QAAQ,IAAI;AAAA,UACtB;AAEA,cAAI,IAAI,SAAS;AACf,oBAAQ,UAAU,IAAI;AAAA,UACxB;AAEA,cAAI,IAAI,SAAS;AACf,oBAAQ,UAAU,IAAI;AAAA,UACxB;AAEA,cAAI,IAAI,SAAS;AACf,oBAAQ,UAAU,IAAI;AAAA,UACxB;AAGA,cAAI,IAAI,QAAQ;AACd,oBAAQ,SAAS,IAAI;AAAA,UACvB;AAEA,cAAI,SAAS;AACX,oBAAQ,UAAU;AAAA,UACpB;AAEA,cAAI,SAAS;AACX,oBAAQ,UAAU;AAAA,UACpB;AAGA,kBAAQ,SAAS,OAAO;AAGxB,oBAAU,OAAO,SAAS;AAAA,YACxB,aAAa,CAAC,CAAC,IAAI;AAAA,UACrB,CAAC;AAGD,gBAAM,WAAW,QAAQ;AACzB,wBAAc,aAAa,SAAS;AAAA,YAClC,YAAY,KAAK,cAAc,KAAK,OAAO,GAAG;AAAA,YAC9C,YAAY,KAAK,WAAW,KAAK,OAAO,GAAG;AAAA,UAC7C,CAAC;AAQD,cAAI,IAAI,gBAAgB;AAOtB,gBAAI,WAAW,QAAQ,MAAM,EAAE,OAAO,SAAU,GAAG;AACjD,qBAAO,QAAQ,SAAS,CAAC,EAAE,SAAS;AAAA,YACtC,CAAC,EAAE,IAAI,MAAM,QAAQ,KAAK,KAAK,CAAC,EAAE,KAAK,SAAU,UAAU,UAAU;AACnE,qBAAO,SAAS,aAAa,EAAE,SAAS,SAAS,aAAa,EAAE;AAAA,YAClE,CAAC;AACD,mBAAO,UAAU,iBAAiB;AAAA,cAChC,SAAS,IAAI;AAAA,YACf,CAAC;AAAA,UACH;AACA,gBAAM,UAAU,QAAQ;AAGxB,cAAI,SAAS,QAAQ,MAAM;AAE3B,iBAAO,IAAI,KAAK,SAAS,SAAS,KAAK,IAAI,OAAO,QAAQ,IAAI,OAAO,GAAG,KAAK,IAAI,OAAO,SAAS,IAAI,OAAO,CAAC;AAAA,QAC/G;AAAA,QACA,cAAc,SAAU,SAAS,KAAK;AACpC,gBAAM,OAAO,CAAC;AACd,cAAI,aAAa,IAAI,cAAc;AACnC,cAAI,aAAa,IAAI,cAAc;AACnC,cAAI,QAAQ,gBAAgB,QAAQ,OAAO,IAAI,MAAM;AAGrD,kBAAQ,MAAM,EAAE,QAAQ,SAAU,MAAM;AACtC,uBAAW,KAAK,OAAO,MAAM,SAAS,OAAO,GAAG;AAAA,UAClD,CAAC;AAGD,kBAAQ,MAAM,EAAE,QAAQ,SAAU,MAAM;AACtC,uBAAW,KAAK,OAAO,MAAM,SAAS,OAAO,GAAG;AAAA,UAClD,CAAC;AACD,iBAAO;AAAA,QACT;AAAA;AAAA,QAEA,YAAY,SAAU,OAAO,KAAK;AAChC,gBAAM,OAAO,CAAC;AAGd,cAAI,eAAe,IAAI,aAAa,OAAO,aAAa,cAAc,WAAW;AAGjF,cAAI,iBAAiB,QAAW;AAC9B,kBAAM,IAAI,MAAM,uDAAuD;AAAA,UACzE;AACA,cAAI,cAAc,KAAK,KAAK,YAAY,YAAY,YAAY;AAChE,cAAI,UAAU,IAAI,aAAa,MAAM,WAAW;AAChD,cAAI,eAAe,IAAI,gBAAgB;AACvC,cAAI,eAAe,IAAI,gBAAgB;AACvC,cAAI,cAAc,IAAI,eAAe;AACrC,cAAI,aAAa,MAAM,IAAI,OAAO;AAClC,mBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,IAAI,GAAG,KAAK;AACjD,gBAAI,OAAO,WAAW,GAAG,CAAC;AAC1B,gBAAI,KAAK,OAAO,GAAG;AACjB,kBAAI,SAAS,KAAK,IAAI,QAAQ;AAC9B,kBAAI,SAAS,KAAK,IAAI,QAAQ;AAG9B,kBAAI,CAAC,OAAO,MAAM,CAAC,OAAO,IAAI;AAC5B;AAAA,cACF;AAIA,sBAAQ,QAAQ,OAAO,IAAI,OAAO,IAAI,aAAa,IAAI,GAAG,YAAY,IAAI,CAAC;AAAA,YAC7E,OAAO;AACL,sBAAQ,QAAQ,KAAK,IAAI,aAAa,IAAI,CAAC;AAG3C,kBAAI,QAAQ,WAAW,KAAK,KAAK,IAAI,QAAQ,GAAG;AAC9C,oBAAI,WAAW,KAAK,IAAI,QAAQ;AAChC,oBAAI,WAAW,IAAI,QAAQ,GAAG;AAG5B,0BAAQ,UAAU,KAAK,IAAI,QAAQ;AAAA,gBACrC;AAAA,cACF;AAAA,YACF;AAAA,UACF;AACA,iBAAO;AAAA,QACT;AAAA,MACF;AACA,YAAM,UAAU,aAAa,SAAU,KAAK;AAC1C,eAAO,cAAc,WAAW,MAAM,GAAG;AAAA,MAC3C;AACA,YAAM,UAAU,eAAe,SAAU,SAAS,KAAK;AACrD,eAAO,cAAc,aAAa,KAAK,MAAM,SAAS,GAAG;AAAA,MAC3D;AACA,UAAI,MAAM;AAAA,QACR,UAAU,CAAC;AAAA,QACX,QAAQ;AAAA,UACN,kBAAkB,WAAY;AAC5B,mBAAO,CAAC,CAAC,SAAS,mBAAmB,mBAAmB,KAAK,CAAC,EAAE,SAAS,KAAK,SAAS,gBAAgB,8BAA8B,eAAe,CAAC,CAAC;AAAA,UACxJ;AAAA,QACF;AAAA,QACA,SAAS,SAAU,MAAMT,KAAI;AAC3B,iBAAO,KAAK,OAAO,IAAI,IAAIA;AAAA,QAC7B;AAAA,QACA,MAAM,SAAU,MAAM;AACpB,cAAIA,MAAK,KAAK,OAAO,IAAI;AACzB,cAAI,CAACA,KAAI;AACP,kBAAM,IAAI,MAAM,wBAAwB,OAAO,0DAA0D;AAAA,UAC3G;AACA,cAAIU,UAAS,KAAK,SAAS,IAAI;AAC/B,cAAI,OAAOA,YAAW,aAAa;AACjC,mBAAOA;AAAA,UACT;AACA,cAAI;AACF,YAAAA,UAASV,IAAG;AAAA,UACd,SAAS,OAAO;AACd,YAAAU,UAAS;AAAA,UACX;AAGA,eAAK,SAAS,IAAI,IAAIA;AACtB,iBAAOA;AAAA,QACT;AAAA,MACF;AACA,UAAI,UAAU,UAAU,OAAO,iBAAiB;AAAA,QAC9C,OAAO;AAAA,UACL,KAAK;AAAA,YACH,MAAM;AAAA,YACN,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,SAAS,QAAQ,OAAO,cAAc;AAAA,QACxC,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,OAAO;AAAA,YACP,QAAQ;AAAA,UACV;AAAA,UACA,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,YACN,aAAa;AAAA,YACb,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,eAAe;AAAA,YACf,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,WAAW,YAAY,OAAO;AAAA,QAChC,wBAAwB,YAAY,0BAA0B;AAAA;AAAA;AAAA,UAG5D,OAAO,CAAC,OAAO;AAAA,QACjB,CAAC;AAAA,QACD,eAAe,WAAY;AACzB,cAAI,QAAQ,YAAY,UAAU,cAAc,MAAM,MAAM,SAAS;AACrE,cAAI,KAAK,QAAQ,OAAO,OAAO,GAAG;AAChC,iBAAK,OAAO;AACZ,oBAAQ,KAAK,WAAW,OAAO,OAAO;AAAA,UACxC;AACA,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AACD,UAAI,OAAO,QAAQ,OAAO,cAAc;AAAA,QACtC,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,aAAa;AAAA,YACb,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,SAAS,QAAQ,OAAO,gBAAgB;AAAA,QAC1C,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,UAAU;AAAA,YACR,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,GAAG;AAAA,YACH,IAAI;AAAA,YACJ,IAAI;AAAA,UACN;AAAA,UACA,QAAQ;AAAA,YACN,aAAa;AAAA,YACb,MAAM;AAAA,YACN,eAAe;AAAA,YACf,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,MAAM;AAAA,YACN,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,YAAY,QAAQ,OAAO,iBAAiB;AAAA,QAC9C,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,WAAW;AAAA,YACT,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,IAAI;AAAA,YACJ,IAAI;AAAA,YACJ,IAAI;AAAA,YACJ,IAAI;AAAA,UACN;AAAA,UACA,QAAQ;AAAA,YACN,aAAa;AAAA,YACb,MAAM;AAAA,YACN,eAAe;AAAA,YACf,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,MAAM;AAAA,YACN,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,YAAY,QAAQ,OAAO,iBAAiB;AAAA,QAC9C,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,WAAW;AAAA,YACT,MAAM;AAAA,YACN,QAAQ;AAAA,UACV;AAAA,UACA,QAAQ;AAAA,YACN,aAAa;AAAA,YACb,MAAM;AAAA,YACN,eAAe;AAAA,YACf,SAAS;AAAA,YACT,UAAU;AAAA,YACV,eAAe;AAAA,YACf,MAAM;AAAA,YACN,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,aAAa,QAAQ,OAAO,kBAAkB;AAAA,QAChD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,YAAY;AAAA,YACV,MAAM;AAAA,YACN,QAAQ;AAAA,UACV;AAAA,UACA,QAAQ;AAAA,YACN,aAAa;AAAA,YACb,MAAM;AAAA,YACN,eAAe;AAAA,YACf,SAAS;AAAA,YACT,UAAU;AAAA,YACV,eAAe;AAAA,YACf,MAAM;AAAA,YACN,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,QAAQ,QAAQ,OAAO,eAAe;AAAA,QACxC,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,aAAa;AAAA,YACb,MAAM;AAAA,YACN,eAAe;AAAA,YACf,SAAS;AAAA,YACT,UAAU;AAAA,YACV,eAAe;AAAA,YACf,MAAM;AAAA,YACN,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,SAAS,QAAQ,OAAO,cAAc;AAAA,QACxC,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,QAAQ;AAAA,UACV;AAAA,UACA,QAAQ;AAAA,YACN,aAAa;AAAA,YACb,MAAM;AAAA,YACN,eAAe;AAAA,YACf,OAAO;AAAA,YACP,SAAS;AAAA,YACT,UAAU;AAAA,YACV,MAAM;AAAA,YACN,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,UAAU,OAAO,OAAO,iBAAiB;AAAA,QAC3C,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,GAAG;AAAA,UACL;AAAA,UACA,QAAQ;AAAA,YACN,SAAS;AAAA,YACT,UAAU;AAAA,YACV,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,4BAA4B,IAAI,KAAK,kBAAkB;AAC3D,UAAI,YAAY,QAAQ,OAAO,mBAAmB;AAAA;AAAA,QAEhD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,OAAO;AAAA,YACP,QAAQ;AAAA,UACV;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,aAAa;AAAA,YACb,eAAe;AAAA,UACjB;AAAA,UACA,YAAY;AAAA,YACV,MAAM;AAAA,YACN,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,QACA,SAAS;AAAA,MACX,GAAG;AAAA,QACD,QAAQ,CAAC,yBAAyB,mCAAmC,4BAA4B,yHAAyH,2BAA2B,MAAM,EAAE,KAAK,EAAE;AAAA,QACpQ,YAAY,WAAY;AACtB,eAAK,SAAS,MAAM,eAAe,KAAK,UAAU;AAClD,eAAK,SAAS,MAAM,kBAAkB,KAAK,aAAa;AACxD,eAAK,WAAW,MAAM,KAAK,IAAI,MAAM,CAAC;AACtC,eAAK,cAAc,MAAM,KAAK,IAAI,SAAS,CAAC;AAC5C,kBAAQ,UAAU,WAAW,MAAM,MAAM,SAAS;AAAA,QACpD;AAAA,QACA,YAAY,SAAU,MAAM,MAAM;AAGhC,eAAK,KAAK;AAAA,YACR,SAAS,OAAO,CAAC,GAAG,IAAI;AAAA,YACxB,KAAK;AAAA,cACH,OAAO,OAAO,CAAC,GAAG,IAAI;AAAA,YACxB;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,eAAe,SAAU,MAAM,SAAS;AACtC,cAAI,2BAA2B;AAE7B,iBAAK,KAAK;AAAA,cACR,YAAY;AAAA,gBACV,MAAM,aAAa,OAAO;AAAA,cAC5B;AAAA,YACF,CAAC;AAAA,UACH,OAAO;AAGL,iBAAK,KAAK;AAAA,cACR,YAAY;AAAA,gBACV,MAAM;AAAA,cACR;AAAA,YACF,CAAC;AAAA,UACH;AAAA,QACF;AAAA;AAAA,QAEA,sBAAsB,WAAY;AAChC,eAAK,WAAW,MAAM,MAAM,SAAS;AAAA,QACvC;AAAA;AAAA,QAEA,eAAe,WAAY;AACzB,eAAK,cAAc,MAAM,MAAM,SAAS;AAAA,QAC1C;AAAA,MACF,CAAC;AAID,UAAI,gBAAgB,YAAY,OAAO;AAAA,QACrC,wBAAwB,4BAA4B,YAAY,UAAU,yBAAyB,YAAY,0BAA0B;AAAA,UACvI,SAAS,CAAC,SAAS;AAAA,UACnB,MAAM,CAAC,SAAS;AAAA,QAClB,CAAC;AAAA,QACD,UAAU,CAAC,UAAU,SAAS;AAAA,QAC9B,eAAe,WAAY;AACzB,cAAI,QAAQ,YAAY,UAAU,cAAc,MAAM,MAAM,SAAS;AACrE,cAAI,KAAK,QAAQ,OAAO,SAAS,GAAG;AAClC,iBAAK,cAAc,KAAK,KAAK;AAC7B,oBAAQ,KAAK,WAAW,OAAO,SAAS;AAAA,UAC1C;AACA,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,SAAU,GAAG,oBAAoB;AACvC,cAAI,QAAQ,KAAK;AACjB,cAAI,CAAC,2BAA2B;AAE9B,gBAAI,cAAc,KAAK,sBAAsB,MAAM,IAAI,OAAO,GAAG,UAAU;AAC3E,wBAAY,UAAU,OAAO,KAAK,MAAM,OAAO,WAAW;AAC1D,gBAAI,CAAC,sBAAsB,MAAM,oBAAoB,UAAU,GAAG;AAEhE,mBAAK,cAAc,OAAO,kBAAkB;AAAA,YAC9C;AAAA,UACF,OAAO;AACL,wBAAY,UAAU,OAAO,KAAK,MAAM,OAAO,kBAAkB;AAAA,UACnE;AAAA,QACF;AAAA,QACA,eAAe,SAAU,MAAM,oBAAoB;AAEjD,cAAI,YAAY,MAAM,CAAC,IAAI,sBAAsB,KAAK,IAAI,OAAO,GAAG,UAAU,CAAC;AAC/E,sBAAY,KAAK,WAAW,MAAM;AAIlC,cAAI,OAAO,UAAU,KAAK,IAAI,SAAS,GAAG,KAAK,IAAI,MAAM,GAAG,WAAW;AAAA;AAAA,YAErE,aAAa,KAAK,MAAM;AAAA,UAC1B,CAAC;AAGD,cAAI,QAAQ,UAAU,CAAC,GAAG,YAAY,WAAW,GAAG;AAGpD,gBAAM,UAAU,EAAE,OAAO;AAGzB,sBAAY,UAAU,OAAO,KAAK,MAAM,MAAM,KAAK;AAAA,QACrD;AAAA,MACF,CAAC;AACD,UAAI,QAAQ;AAAA,QACV;AAAA,QACA,MAAM;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,SAAS;AAAA,QACT,SAAS;AAAA,QACT,UAAU;AAAA,QACV;AAAA,QACA,MAAM;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAIA,UAAI,YAAY,UAAU,OAAO,sBAAsB;AAAA,QACrD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,UAAU;AAAA,YACV,WAAW;AAAA,YACX,aAAa;AAAA,YACb,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,WAAW,UAAU,OAAO,mBAAmB;AAAA,QACjD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,OAAO;AAAA,YACP,OAAO;AAAA,YACP,MAAM;AAAA,YACN,aAAa;AAAA,YACb,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,YAAY,UAAU,OAAO,oBAAoB;AAAA,QACnD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,OAAO;AAAA,YACP,OAAO;AAAA,YACP,OAAO;AAAA,YACP,OAAO;AAAA,YACP,aAAa;AAAA,YACb,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,SAAS,UAAU,OAAO,iBAAiB;AAAA,QAC7C,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,aAAa;AAAA,YACb,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,YAAY,UAAU,OAAO,oBAAoB;AAAA,QACnD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,WAAW;AAAA,YACX,aAAa;AAAA,YACb,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,aAAa,UAAU,OAAO,qBAAqB;AAAA,QACrD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,WAAW;AAAA,YACX,aAAa;AAAA,YACb,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,UAAU,UAAU,OAAO,kBAAkB;AAAA,QAC/C,OAAO;AAAA,UACL,OAAO;AAAA,YACL,UAAU;AAAA,YACV,WAAW;AAAA;AAAA,UAEb;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,OAAO;AAAA,YACP,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,gBAAgB,UAAU,OAAO,0BAA0B;AAAA,QAC7D,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,UAAU;AAAA,YACV,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,aAAa;AAAA,UACf;AAAA,UACA,YAAY;AAAA,YACV,UAAU;AAAA,YACV,WAAW;AAAA,YACX,GAAG;AAAA,YACH,GAAG;AAAA,YACH,MAAM;AAAA,UACR;AAAA,UACA,OAAO;AAAA;AAAA,YAEL,UAAU;AAAA,YACV,WAAW;AAAA,YACX,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,OAAO;AAAA,YACP,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,UAAU;AAAA,UACZ;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,QAAQ;AAAA,UACV;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,gBAAgB,UAAU,OAAO,0BAA0B;AAAA,QAC7D,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,UAAU;AAAA,YACV,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,MAAM;AAAA,YACN,aAAa;AAAA,UACf;AAAA,UACA,OAAO;AAAA;AAAA,YAEL,UAAU;AAAA,YACV,WAAW;AAAA,YACX,GAAG;AAAA,YACH,GAAG;AAAA,YACH,qBAAqB;AAAA,UACvB;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,OAAO;AAAA;AAAA,YAEP,MAAM;AAAA,YACN,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,iBAAiB,UAAU,OAAO,2BAA2B;AAAA,QAC/D,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,OAAO;AAAA,YACP,OAAO;AAAA,YACP,OAAO;AAAA,YACP,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,aAAa;AAAA,UACf;AAAA,UACA,YAAY;AAAA,YACV,OAAO;AAAA,YACP,OAAO;AAAA,YACP,OAAO;AAAA,YACP,OAAO;AAAA,YACP,MAAM;AAAA,UACR;AAAA,UACA,OAAO;AAAA;AAAA,YAEL,UAAU;AAAA,YACV,WAAW;AAAA;AAAA,YAEX,MAAM;AAAA,YACN,MAAM;AAAA,YACN,qBAAqB;AAAA;AAAA,UAEvB;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,OAAO;AAAA,YACP,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,QAAQ;AAAA,UACV;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,oBAAoB,UAAU,OAAO,8BAA8B;AAAA,QACrE,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,UAAU;AAAA,YACV,WAAW;AAAA,YACX,aAAa;AAAA,YACb,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,QAAQ;AAAA,YACN,UAAU;AAAA,YACV,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,YAAY;AAAA,YACV,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,UACA,UAAU;AAAA,YACR,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,OAAO;AAAA,YACP,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,MACH,CAAC;AACD,UAAI,gBAAgB;AACpB,UAAI,WAAW,UAAU,OAAO,qBAAqB;AAAA,QACnD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,aAAa;AAAA,YACb,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,aAAa;AAAA,UACf;AAAA,UACA,KAAK;AAAA,YACH,OAAO;AAAA,YACP,IAAI;AAAA,YACJ,OAAO;AAAA,YACP,IAAI;AAAA,YACJ,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,aAAa;AAAA,UACf;AAAA,UACA,OAAO;AAAA,YACL,oBAAoB;AAAA,YACpB,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,OAAO;AAAA,YACP,UAAU;AAAA,YACV,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,CAAC;AAAA,QACD,OAAO,SAAU,GAAG,KAAK;AAEvB,cAAI,MAAM,QAAW;AACnB,mBAAO,KAAK,KAAK,kBAAkB;AAAA,UACrC;AAGA,cAAI,qBAAqB,aAAa,CAAC;AACvC,cAAI,YAAY;AAAA,YACd,aAAa;AAAA,UACf;AACA,cAAI,WAAW,qBAAqB;AAAA,YAClC,OAAO;AAAA,YACP,OAAO;AAAA,YACP,IAAI;AAAA,YACJ,IAAI;AAAA,UACN,IAAI;AAAA,YACF,OAAO;AAAA,YACP,OAAO;AAAA,YACP,IAAI;AAAA,YACJ,IAAI;AAAA,UACN;AACA,iBAAO,KAAK,KAAK;AAAA,YACf,MAAM;AAAA,YACN,KAAK;AAAA,UACP,GAAG,GAAG;AAAA,QACR;AAAA,MACF,GAAG;AAAA,QACD,YAAY;AAAA,UACV,aAAa;AAAA,YACX,KAAK,SAAU,GAAG,SAAS;AACzB,kBAAI,qBAAqB,aAAa,CAAC;AACvC,kBAAI,oBAAoB;AACtB,oBAAI,WAAW,CAAC,IAAI;AAAA,cACtB;AACA,kBAAI,IAAI,QAAQ;AAChB,kBAAI,IAAI,QAAQ;AAChB,kBAAI,IAAI,QAAQ;AAChB,kBAAI,IAAI,QAAQ;AAGhB,kBAAI,KAAK,IAAI;AACb,kBAAI,KAAK,qBAAqB,IAAI,IAAI;AACtC,kBAAI,QAAQP,GAAE;AACd,kBAAI,KAAK,QAAQ;AACjB,kBAAI,KAAK,SAAS,qBAAqB,IAAI,IAAI;AAG/C,kBAAI,QAAQ;AACZ,kBAAI,UAAU,IAAI,IAAI;AACtB,kBAAI,SAAS,IAAI;AACjB,kBAAI,WAAW,IAAI;AACnB,kBAAI,YAAY,WAAW;AAC3B,kBAAI,cAAc,IAAI,IAAI;AAC1B,kBAAI,eAAe,IAAI;AAGvB,kBAAI4C,QAAO,CAAC,KAAK,OAAO,UAAU,KAAK,OAAO,aAAa,KAAK,GAAG,cAAc,IAAI,UAAU,IAAI,cAAc,SAAS,cAAc,KAAK,UAAU,IAAI,cAAc,QAAQ,cAAc,IAAI,QAAQ,aAAa,KAAK,QAAQ,UAAU,KAAK,QAAQ,WAAW,IAAI,UAAU,IAAI,WAAW,SAAS,WAAW,KAAK,UAAU,IAAI,WAAW,OAAO,WAAW,IAAI,OAAO,UAAU,GAAG;AAChY,qBAAO;AAAA,gBACL,GAAGA,MAAK,KAAK,GAAG;AAAA,cAClB;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,gBAAgB;AAAA,QAClB,SAAS;AAAA,QACT,UAAU;AAAA,QACV,YAAY;AAAA,UACV,YAAY;AAAA,QACd;AAAA,QACA,UAAU,CAAC;AAAA,UACT,SAAS;AAAA,UACT,cAAc;AAAA,UACd,UAAU;AAAA,UACV,OAAO;AAAA,YACL,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,iBAAiB;AAAA,YACjB,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,WAAW;AAAA,YACX,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,gBAAgB;AAAA,UAClB;AAAA,QACF,CAAC;AAAA,MACH;AACA,UAAI,iBAAiB;AAAA,QACnB,SAAS;AAAA,QACT,UAAU;AAAA,QACV,YAAY;AAAA,UACV,eAAe;AAAA,QACjB;AAAA,MACF;AACA,UAAI,cAAc,IAAI,KAAK,kBAAkB,IAAI,gBAAgB;AACjE,UAAI,cAAc,UAAU,OAAO,sBAAsB;AAAA,QACvD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,UAAU;AAAA,YACV,WAAW;AAAA,YACX,QAAQ;AAAA,YACR,MAAM;AAAA,YACN,aAAa;AAAA,UACf;AAAA,UACA,eAAe;AAAA,YACb,UAAU;AAAA,YACV,WAAW;AAAA,UACb;AAAA,UACA,OAAO;AAAA,YACL,OAAO;AAAA,cACL,UAAU;AAAA,YACZ;AAAA,UACF;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,QACZ,GAAG,WAAW;AAAA,MAChB,GAAG;AAAA,QACD,YAAY;AAAA,UACV,MAAM;AAAA,YACJ,KAAK,SAAU,MAAM,SAAS,MAAM,OAAO;AACzC,kBAAI,gBAAgB,aAAa;AAC/B,qBAAK,cAAc;AAAA,cACrB,OAAO;AAEL,oBAAI,QAAQ,MAAM,SAAS,CAAC;AAC5B,oBAAI,YAAY;AAAA,kBACd;AAAA,kBACA,OAAO;AAAA,kBACP,QAAQ;AAAA,gBACV;AACA,oBAAI,YAAY,OAAO;AAAA,kBACrB,oBAAoB;AAAA,gBACtB,GAAG,KAAK;AACR,2BAAW,SAAS,IAAI,KAAK,MAAM,WAAW,SAAS,MAAM,SAAS;AACtE,uBAAO;AAAA,kBACL,MAAM,MAAM,SAAS;AAAA,gBACvB;AAAA,cACF;AAAA,YACF;AAAA,YACA,UAAU,SAAU,MAAM,SAAS,MAAM;AAEvC,kBAAI,gBAAgB,YAAY;AAC9B,uBAAO,QAAQ,OAAO;AAAA,cACxB;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAC;AAID,UAAI,SAAS,KAAK,OAAO,iBAAiB;AAAA,QACxC,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,YAAY;AAAA,YACZ,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,gBAAgB;AAAA,YAChB,cAAc;AAAA,cACZ,QAAQ;AAAA,cACR,KAAK;AAAA,YACP;AAAA,UACF;AAAA,UACA,SAAS;AAAA,YACP,YAAY;AAAA,YACZ,aAAa;AAAA,YACb,gBAAgB;AAAA,UAClB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,UAAU;AAAA,YACV,kBAAkB;AAAA,UACpB;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,QAAQ;AAAA,YACR,kBAAkB;AAAA,UACpB;AAAA,QACF,CAAC;AAAA,MACH,CAAC;AACD,UAAI,aAAa,KAAK,OAAO,uBAAuB;AAAA,QAClD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,YAAY;AAAA,YACZ,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,gBAAgB;AAAA,YAChB,cAAc;AAAA,cACZ,MAAM;AAAA,cACN,QAAQ;AAAA,cACR,GAAG;AAAA,YACL;AAAA,UACF;AAAA,UACA,SAAS;AAAA,YACP,YAAY;AAAA,YACZ,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,gBAAgB;AAAA,UAClB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,QAAQ;AAAA,YACR,UAAU;AAAA,UACZ;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,QAAQ;AAAA,YACR,kBAAkB;AAAA,UACpB;AAAA,QACF,CAAC;AAAA,MACH,CAAC;AACD,UAAI,aAAa,KAAK,OAAO,uBAAuB;AAAA,QAClD,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,YAAY;AAAA,YACZ,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,gBAAgB;AAAA,YAChB,cAAc;AAAA,cACZ,QAAQ;AAAA,cACR,UAAU;AAAA,cACV,KAAK;AAAA,YACP;AAAA,YACA,cAAc;AAAA,cACZ,QAAQ;AAAA,cACR,UAAU;AAAA,cACV,KAAK;AAAA,YACP;AAAA,UACF;AAAA,UACA,QAAQ;AAAA,YACN,YAAY;AAAA,YACZ,MAAM;AAAA,YACN,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,eAAe;AAAA,YACf,aAAa;AAAA,YACb,gBAAgB;AAAA,YAChB,cAAc;AAAA,cACZ,QAAQ;AAAA,cACR,KAAK;AAAA,cACL,UAAU;AAAA,YACZ;AAAA,YACA,cAAc;AAAA,cACZ,QAAQ;AAAA,cACR,UAAU;AAAA,cACV,KAAK;AAAA,YACP;AAAA,UACF;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ,CAAC;AAAA,UACP,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,QAAQ;AAAA,YACR,kBAAkB;AAAA,UACpB;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,QAAQ;AAAA,YACR,UAAU;AAAA,UACZ;AAAA,QACF,CAAC;AAAA,MACH,CAAC;AACD,UAAI,WAAW;AAAA,QACb;AAAA,QACA,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,MAAM;AAAA,QACN,SAAS;AAAA,QACT,UAAU;AAAA,QACV,OAAO;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,WAAW;AAAA,QACX,MAAM;AAAA,QACN;AAAA,QACA;AAAA,MACF;AAKA,UAAI,QAAQ,QAAQ,OAAO,cAAc;AAAA,QACvC,SAAS,CAAC;AAAA,QACV,UAAU,CAAC;AAAA,QACX,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,KAAK;AAAA,YACH,QAAQ;AAAA,UACV;AAAA,UACA,UAAU;AAAA,YACR,MAAM;AAAA,YACN,SAAS;AAAA,YACT,SAAS;AAAA,YACT,aAAa;AAAA,YACb,eAAe;AAAA,YACf,MAAM;AAAA,UACR;AAAA,UACA,SAAS;AAAA,YACP,aAAa;AAAA,YACb,cAAc;AAAA,YACd,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,QACA,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,MAAM;AAAA,cACJ,UAAU;AAAA,gBACR,MAAM;AAAA,cACR;AAAA,cACA,OAAO;AAAA,gBACL,eAAe;AAAA,kBACb,MAAM;AAAA,gBACR;AAAA,gBACA,cAAc;AAAA,kBACZ,MAAM;AAAA,kBACN,QAAQ;AAAA,kBACR,GAAG;AAAA,kBACH,QAAQ;AAAA,gBACV;AAAA,cACF;AAAA,cACA,OAAO;AAAA,gBACL,UAAU;AAAA,kBACR,MAAM;AAAA,kBACN,MAAM;AAAA,oBACJ,GAAG;AAAA,kBACL;AAAA,gBACF;AAAA,cACF;AAAA,YACF;AAAA,YACA,OAAO;AAAA,cACL,UAAU;AAAA,gBACR,MAAM;AAAA,cACR;AAAA,cACA,OAAO;AAAA,gBACL,eAAe;AAAA,kBACb,MAAM;AAAA,gBACR;AAAA,gBACA,cAAc;AAAA,kBACZ,MAAM;AAAA,kBACN,QAAQ;AAAA,kBACR,GAAG;AAAA,kBACH,QAAQ;AAAA,gBACV;AAAA,cACF;AAAA,cACA,OAAO;AAAA,gBACL,UAAU;AAAA,kBACR,MAAM;AAAA,kBACN,MAAM;AAAA,oBACJ,GAAG;AAAA,kBACL;AAAA,gBACF;AAAA,cACF;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,QACR,YAAY;AAAA,QACZ,iBAAiB;AAAA,QACjB,YAAY,WAAY;AACtB,kBAAQ,UAAU,WAAW,MAAM,MAAM,SAAS;AAClD,eAAK,GAAG,kCAAkC,KAAK,iBAAiB,IAAI;AACpE,eAAK,gBAAgB;AAAA,QACvB;AAAA,QACA,iBAAiB,SAAU,OAAO,SAAS,KAAK;AAE9C,cAAI,UAAU,KAAK,KAAK,IAAI,SAAS,CAAC;AACtC,cAAI,WAAW,WAAW,KAAK,KAAK,IAAI,UAAU,CAAC,GAAG,OAAO;AAC7D,cAAI,cAAc,KAAK,gBAAgB,MAAM,OAAO;AACpD,cAAI,eAAe,KAAK,gBAAgB,OAAO,QAAQ;AACvD,eAAK,KAAK,eAAe,YAAY,OAAO,YAAY,GAAG,OAAO;AAAA,YAChE,SAAS;AAAA,UACX,GAAG,GAAG,CAAC;AAAA,QACT;AAAA,QACA,gBAAgB,SAAU,OAAO,MAAM;AACrC,iBAAO;AAAA,YACL,IAAI;AAAA,YACJ;AAAA,YACA,OAAO;AAAA,cACL,eAAe;AAAA,gBACb,MAAM;AAAA,cACR;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,QACA,iBAAiB,SAAU,OAAO,OAAO;AACvC,iBAAO,QAAQ,KAAK,EAAE,IAAI,KAAK,eAAe,KAAK,MAAM,KAAK,CAAC;AAAA,QACjE;AAAA,QACA,eAAe,SAAU,MAAM,OAAO,KAAK;AACzC,cAAI,QAAQ,KAAK,IAAI,KAAK;AAC1B,iBAAO,KAAK,IAAI,OAAO,MAAM,QAAQ,KAAK,IAAI,MAAM,OAAO,IAAI,IAAI,CAAC,IAAI,GAAG,GAAG;AAAA,QAChF;AAAA,QACA,YAAY,SAAU,MAAM,KAAK;AAC/B,iBAAO,KAAK,cAAc,MAAM,YAAY,GAAG;AAAA,QACjD;AAAA,QACA,WAAW,SAAU,MAAM,KAAK;AAC9B,iBAAO,KAAK,cAAc,MAAM,WAAW,GAAG;AAAA,QAChD;AAAA,QACA,kBAAkB,SAAU,MAAM,OAAO,KAAK;AAC5C,iBAAO,KAAK,IAAI,OAAO,QAAQ,KAAK,IAAI,KAAK,GAAG,IAAI,GAAG,GAAG;AAAA,QAC5D;AAAA,QACA,eAAe,SAAU,MAAM,KAAK;AAClC,iBAAO,KAAK,iBAAiB,MAAM,YAAY,GAAG;AAAA,QACpD;AAAA,QACA,cAAc,SAAU,MAAM,KAAK;AACjC,iBAAO,KAAK,iBAAiB,MAAM,WAAW,GAAG;AAAA,QACnD;AAAA,QACA,cAAc,SAAU,OAAO,YAAY,KAAK;AAC9C,iBAAO,KAAK,KAAK,kBAAkB,OAAO,WAAW,UAAU,IAAI,aAAa,CAAC,GAAG,GAAG;AAAA,QACzF;AAAA,QACA,eAAe,SAAU,YAAY,KAAK;AACxC,iBAAO,KAAK,aAAa,MAAM,YAAY,GAAG;AAAA,QAChD;AAAA,QACA,gBAAgB,SAAU,YAAY,KAAK;AACzC,iBAAO,KAAK,aAAa,OAAO,YAAY,GAAG;AAAA,QACjD;AAAA,MACF,CAAC;AACD,UAAI,SAAS,MAAM,OAAO,eAAe;AAAA,QACvC,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,UAAU;AAAA,YACR,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,UAAU,MAAM,OAAO,gBAAgB;AAAA,QACzC,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,UAAU;AAAA,YACR,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,SAAS,KAAK,OAAO,aAAa;AAAA,QACpC,OAAO;AAAA,UACL,eAAe;AAAA,YACb,gBAAgB;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,OAAO;AAAA,QACT;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM;AAAA,MACR;AACA,UAAI,OAAO,QAAQ,OAAO,cAAc;AAAA,QACtC,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,KAAK;AAAA,YACH,QAAQ;AAAA,UACV;AAAA,UACA,SAAS;AAAA,YACP,OAAO;AAAA,YACP,QAAQ;AAAA,UACV;AAAA,UACA,QAAQ;AAAA,YACN,GAAG;AAAA,YACH,QAAQ;AAAA,YACR,MAAM;AAAA,YACN,gBAAgB;AAAA,UAClB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,WAAW,WAAY;AACrB,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AACD,UAAI,KAAK,KAAK,OAAO,YAAY;AAAA,QAC/B,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,SAAS;AAAA,YACP,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,gBAAgB;AAAA,UAClB;AAAA,UACA,SAAS;AAAA,YACP,KAAK;AAAA,YACL,SAAS;AAAA,YACT,QAAQ;AAAA,UACV;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,KAAK;AAAA,YACL,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,eAAe;AAAA,YACf,eAAe;AAAA,YACf,gBAAgB;AAAA,YAChB,kBAAkB;AAAA,YAClB,aAAa;AAAA,UACf;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,QAAQ,GAAG,OAAO,eAAe;AAAA,QACnC,OAAO;AAAA,UACL,SAAS;AAAA,YACP,UAAU;AAAA,YACV,GAAG;AAAA,UACL;AAAA,UACA,QAAQ;AAAA,YACN,KAAK;AAAA,YACL,UAAU;AAAA,YACV,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,SAAS,GAAG,OAAO,gBAAgB;AAAA,QACrC,OAAO;AAAA,UACL,SAAS;AAAA,YACP,SAAS;AAAA,YACT,GAAG;AAAA,UACL;AAAA,UACA,QAAQ;AAAA,YACN,KAAK;AAAA,YACL,SAAS;AAAA,YACT,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,SAAS,KAAK,OAAO,gBAAgB;AAAA,QACvC,OAAO;AAAA,UACL,UAAU;AAAA,YACR,KAAK;AAAA,YACL,SAAS;AAAA,YACT,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,WAAW;AAAA,YACT,KAAK;AAAA,YACL,UAAU;AAAA,YACV,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,SAAS,KAAK,OAAO,gBAAgB;AAAA,QACvC,OAAO;AAAA,UACL,WAAW;AAAA,YACT,KAAK;AAAA,YACL,SAAS;AAAA,YACT,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,WAAW;AAAA,YACT,KAAK;AAAA,YACL,SAAS;AAAA,YACT,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,UACA,WAAW;AAAA,YACT,KAAK;AAAA,YACL,UAAU;AAAA,YACV,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,WAAW,OAAO,OAAO,kBAAkB;AAAA,QAC7C,OAAO;AAAA,UACL,OAAO;AAAA,YACL,cAAc;AAAA,UAChB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,WAAW,SAAU,OAAO;AAC1B,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AACD,UAAI,MAAM,OAAO,OAAO,aAAa;AAAA,QACnC,OAAO;AAAA,UACL,OAAO;AAAA,YACL,cAAc;AAAA,UAChB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,WAAW,SAAU,OAAO;AAC1B,iBAAO,CAAC;AAAA,QACV;AAAA,MACF,CAAC;AACD,UAAI,KAAK,OAAO,OAAO,YAAY;AAAA,QACjC,OAAO;AAAA,UACL,OAAO;AAAA,YACL,cAAc;AAAA,UAChB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,WAAW,SAAU,QAAQ,QAAQ;AACnC,iBAAO,UAAU;AAAA,QACnB;AAAA,MACF,CAAC;AACD,UAAI,MAAM,OAAO,OAAO,aAAa;AAAA,QACnC,OAAO;AAAA,UACL,OAAO;AAAA,YACL,cAAc;AAAA,UAChB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,WAAW,SAAU,QAAQ,QAAQ;AACnC,iBAAO,UAAU;AAAA,QACnB;AAAA,MACF,CAAC;AACD,UAAI,MAAM,OAAO,OAAO,aAAa;AAAA,QACnC,OAAO;AAAA,UACL,OAAO;AAAA,YACL,cAAc;AAAA,UAChB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,WAAW,SAAU,QAAQ,QAAQ;AACnC,iBAAO,EAAE,UAAU;AAAA,QACrB;AAAA,MACF,CAAC;AACD,UAAI,OAAO,OAAO,OAAO,cAAc;AAAA,QACrC,OAAO;AAAA,UACL,OAAO;AAAA,YACL,cAAc;AAAA,UAChB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,WAAW,SAAU,QAAQ,QAAQ;AACnC,iBAAO,EAAE,UAAU;AAAA,QACrB;AAAA,MACF,CAAC;AACD,UAAI,MAAM,OAAO,OAAO,aAAa;AAAA,QACnC,OAAO;AAAA,UACL,OAAO;AAAA,YACL,cAAc;AAAA,UAChB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,WAAW,SAAU,QAAQ,QAAQ;AACnC,kBAAQ,CAAC,UAAU,YAAY,UAAU,CAAC;AAAA,QAC5C;AAAA,MACF,CAAC;AACD,UAAI,OAAO,OAAO,OAAO,cAAc;AAAA,QACrC,OAAO;AAAA,UACL,OAAO;AAAA,YACL,cAAc;AAAA,UAChB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,WAAW,SAAU,QAAQ,QAAQ;AACnC,kBAAQ,CAAC,UAAU,CAAC,YAAY,UAAU;AAAA,QAC5C;AAAA,MACF,CAAC;AACD,UAAI,OAAO,KAAK,OAAO,cAAc;AAAA,QACnC,OAAO;AAAA,UACL,eAAe;AAAA,YACb,gBAAgB;AAAA,UAClB;AAAA,UACA,kBAAkB;AAAA,YAChB,GAAG;AAAA,UACL;AAAA,QACF;AAAA,QACA,QAAQ;AAAA,UACN,MAAM;AAAA,QACR;AAAA,QACA,WAAW;AAAA,UACT,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,iBAAiB,CAAC,wEAAwE,6DAA6D,MAAM,EAAE,KAAK,EAAE;AAAA,QACtK,cAAc,CAAC,6EAA6E,4DAA4D,0CAA0C,uRAAuR,4QAA4Q,iCAAiC,WAAW,QAAQ,MAAM,EAAE,KAAK,EAAE;AAAA,MAC1yB,CAAC;AACD,UAAI,QAAQ;AAAA,QACV;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,UAAI,YAAY,QAAQ,OAAO,mBAAmB;AAAA,QAChD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,YAAY,QAAQ,OAAO,mBAAmB;AAAA,QAChD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,aAAa,QAAQ,OAAO,oBAAoB;AAAA,QAClD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,aAAa,QAAQ,OAAO,oBAAoB;AAAA,QAClD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,YAAY,QAAQ,OAAO,mBAAmB;AAAA,QAChD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,YAAY,QAAQ,OAAO,mBAAmB;AAAA,QAChD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,cAAc,QAAQ,OAAO,qBAAqB;AAAA,QACpD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,cAAc,QAAQ,OAAO,qBAAqB;AAAA,QACpD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,cAAc,QAAQ,OAAO,qBAAqB;AAAA,QACpD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,cAAc,QAAQ,OAAO,qBAAqB;AAAA,QACpD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,YAAY,QAAQ,OAAO,mBAAmB;AAAA,QAChD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,YAAY,QAAQ,OAAO,mBAAmB;AAAA,QAChD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,QAAQ;AAAA,QACV;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,UAAI,SAAS,UAAU,OAAO,cAAc;AAAA,QAC1C,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,UAAU;AAAA,YACR,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,gBAAgB;AAAA,YAChB,QAAQ;AAAA,UACV;AAAA,UACA,UAAU;AAAA,YACR,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,gBAAgB;AAAA,YAChB,QAAQ;AAAA,YACR,SAAS;AAAA,UACX;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,eAAe;AAAA,YACf,aAAa;AAAA,YACb,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,aAAa,OAAO,OAAO,kBAAkB;AAAA,QAC/C,OAAO;AAAA,UACL,UAAU;AAAA,YACR,SAAS;AAAA,UACX;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,eAAe,UAAU,OAAO,oBAAoB;AAAA,QACtD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,UAAU;AAAA,YACR,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,gBAAgB;AAAA,YAChB,QAAQ;AAAA,UACV;AAAA,UACA,UAAU;AAAA,YACR,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,gBAAgB;AAAA,YAChB,QAAQ;AAAA,YACR,SAAS;AAAA,UACX;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,eAAe;AAAA,YACf,aAAa;AAAA,YACb,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,0BAA0B,aAAa,OAAO,+BAA+B;AAAA,QAC/E,OAAO;AAAA,UACL,UAAU;AAAA,YACR,SAAS;AAAA,UACX;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,YAAY,UAAU,OAAO,iBAAiB;AAAA,QAChD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,WAAW;AAAA,YACT,WAAW;AAAA,UACb;AAAA,UACA,UAAU;AAAA,YACR,QAAQ;AAAA,YACR,gBAAgB;AAAA,YAChB,IAAI;AAAA,YACJ,IAAI;AAAA,YACJ,IAAI;AAAA,YACJ,IAAI;AAAA,YACJ,MAAM;AAAA,UACR;AAAA,UACA,UAAU;AAAA,YACR,QAAQ;AAAA,YACR,gBAAgB;AAAA,YAChB,IAAI;AAAA,YACJ,IAAI;AAAA,YACJ,IAAI;AAAA,YACJ,IAAI;AAAA,YACJ,MAAM;AAAA,YACN,SAAS;AAAA,UACX;AAAA,UACA,MAAM;AAAA,YACJ,eAAe;AAAA,YACf,aAAa;AAAA,YACb,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,cAAc,UAAU,OAAO,mBAAmB;AAAA,QACpD,OAAO;AAAA,UACL,UAAU;AAAA,YACR,SAAS;AAAA,UACX;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,UAAU,UAAU,OAAO,eAAe;AAAA,QAC5C,OAAO;AAAA,UACL,UAAU;AAAA,YACR,oBAAoB;AAAA,UACtB;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,MAAM,UAAU,OAAO,WAAW;AAAA,QACpC,OAAO;AAAA,UACL,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,eAAe;AAAA,YACf,mBAAmB;AAAA,UACrB;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,SAAS,UAAU,OAAO,cAAc;AAAA,QAC1C,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,MAAM,UAAU,OAAO,WAAW;AAAA,QACpC,MAAM;AAAA,QACN,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,SAAS;AAAA,YACP,QAAQ;AAAA,YACR,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,gBAAgB;AAAA,UAClB;AAAA,UACA,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,aAAa;AAAA,YACb,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,SAAS,KAAK,OAAO,YAAY,CAAC,GAAG;AAAA,QACvC,aAAa,SAAU,OAAO;AAC5B,eAAK,IAAI,UAAU,CAAC;AAAA,YAClB,UAAU;AAAA,YACV,OAAO;AAAA,cACL,MAAM;AAAA,gBACJ,IAAI;AAAA,gBACJ,MAAM;AAAA,cACR;AAAA,YACF;AAAA,UACF,CAAC,CAAC;AAAA,QACJ;AAAA,MACF,CAAC;AACD,UAAI,MAAM;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM;AAAA,MACR;AACA,UAAI,QAAQ,OAAO,OAAO,aAAa;AAAA,QACrC,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,gBAAgB;AAAA,UAClB;AAAA,UACA,MAAM;AAAA,YACJ,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,aAAa,UAAU,OAAO,kBAAkB;AAAA,QAClD,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,WAAW;AAAA,YACX,GAAG;AAAA,YACH,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,WAAW,UAAU,OAAO,gBAAgB;AAAA,QAC9C,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,UAAU;AAAA,YACR,WAAW;AAAA,YACX,GAAG;AAAA,YACH,MAAM;AAAA,YACN,QAAQ;AAAA,UACV;AAAA,UACA,UAAU;AAAA,YACR,WAAW;AAAA,YACX,GAAG;AAAA,YACH,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,QAAQ,KAAK,OAAO,aAAa;AAAA,QACnC,OAAO;AAAA,UACL,kBAAkB;AAAA,YAChB,GAAG;AAAA,UACL;AAAA,QACF;AAAA,QACA,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,MAAM;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,UAAI,SAAS,UAAU,OAAO,cAAc;AAAA,QAC1C,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,OAAO;AAAA,YACP,QAAQ;AAAA,UACV;AAAA,UACA,SAAS;AAAA,YACP,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,gBAAgB;AAAA,YAChB,kBAAkB;AAAA,YAClB,IAAI;AAAA,YACJ,IAAI;AAAA,UACN;AAAA,UACA,OAAO;AAAA,YACL,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,KAAK;AAAA,YACL,SAAS;AAAA,YACT,SAAS;AAAA,UACX;AAAA,UACA,SAAS;AAAA,YACP,mBAAmB;AAAA,YACnB,KAAK;AAAA,YACL,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,aAAa;AAAA,YACb,eAAe;AAAA,UACjB;AAAA,UACA,SAAS;AAAA,YACP,eAAe;AAAA,YACf,KAAK;AAAA,YACL,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,aAAa;AAAA,YACb,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,UAAU,KAAK,OAAO,aAAa;AAAA,QACrC,QAAQ;AAAA,UACN,UAAU;AAAA,QACZ;AAAA,QACA,QAAQ;AAAA,UACN,UAAU;AAAA,QACZ;AAAA,QACA,OAAO;AAAA,UACL,eAAe;AAAA,YACb,QAAQ;AAAA,YACR,gBAAgB;AAAA,UAClB;AAAA,QACF;AAAA,QACA,GAAG;AAAA,MACL,CAAC;AACD,UAAI,MAAM;AAAA,QACR;AAAA,QACA,OAAO;AAAA,MACT;AACA,UAAI,QAAQ,QAAQ,OAAO,YAAY;AAAA,QACrC,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,SAAS;AAAA,YACP,GAAG;AAAA,YACH,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,WAAW;AAAA,UACb;AAAA,UACA,UAAU;AAAA,YACR,eAAe;AAAA,YACf,SAAS;AAAA,YACT,SAAS;AAAA,YACT,KAAK;AAAA,YACL,MAAM;AAAA,YACN,aAAa;AAAA,UACf;AAAA,UACA,oBAAoB;AAAA,YAClB,MAAM;AAAA,YACN,GAAG;AAAA,UACL;AAAA,UACA,wBAAwB;AAAA,YACtB,WAAW;AAAA,UACb;AAAA,UACA,qCAAqC;AAAA,YACnC,WAAW;AAAA,UACb;AAAA,UACA,qCAAqC;AAAA,YACnC,WAAW;AAAA,UACb;AAAA,UACA,uCAAuC;AAAA,YACrC,WAAW;AAAA,UACb;AAAA,UACA,uCAAuC;AAAA,YACrC,WAAW;AAAA,UACb;AAAA,UACA,uCAAuC;AAAA,YACrC,WAAW;AAAA,UACb;AAAA,UACA,uBAAuB;AAAA,YACrB,WAAW;AAAA,YACX,eAAe;AAAA,YACf,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,YAAY,YAAY,OAAO;AAAA,QACjC,wBAAwB,YAAY,0BAA0B;AAAA,UAC5D,QAAQ,CAAC,QAAQ;AAAA,QACnB,CAAC;AAAA,QACD,UAAU,YAAY,UAAU,SAAS,OAAO,CAAC,QAAQ,CAAC;AAAA,QAC1D,eAAe,WAAY;AACzB,cAAI;AACJ,cAAI,OAAO,CAAC,GACV,MAAM,UAAU;AAClB,iBAAO,MAAO,MAAK,GAAG,IAAI,UAAU,GAAG;AACvC,cAAI,SAAS,MAAM,YAAY,UAAU,eAAe,KAAK,MAAM,KAAK,CAAC,IAAI,EAAE,OAAO,IAAI,CAAC;AAC3F,cAAI,KAAK,QAAQ,OAAO,QAAQ,GAAG;AACjC,iBAAK,aAAa;AAClB,iBAAK,OAAO;AACZ,oBAAQ,KAAK,WAAW,OAAO,QAAQ;AAAA,UACzC;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,UAAU,KAAK,IAAI,QAAQ,SAAS,EAAE,MAAM;AAChD,WAAC,OAAO,OAAO,SAAS,MAAM,EAAE,QAAQ,SAAUY,YAAW;AAC3D,oBAAQ,YAAYA,UAAS;AAAA,UAC/B,CAAC;AACD,cAAI,SAAS,KAAK,MAAM,IAAI,QAAQ;AACpC,cAAI,CAAC,QAAQ;AACX;AAAA,UACF;AACA,kBAAQ,QAAQ;AAAA,YACd,KAAK;AACH,sBAAQ,SAAS,KAAK;AACtB,sBAAQ,OAAOxD,GAAE,QAAQ,CAAC;AAC1B;AAAA,YACF,KAAK;AACH,sBAAQ,SAAS,KAAK;AACtB,sBAAQ,OAAO,CAACA,GAAE,QAAQ,GAAGA,GAAE,QAAQ,CAAC,CAAC;AACzC;AAAA,YACF,KAAK;AACH,sBAAQ,SAAS,OAAO;AACxB,sBAAQ,OAAO,CAACA,GAAE,QAAQ,GAAGA,GAAE,QAAQ,GAAGA,GAAE,QAAQ,CAAC,CAAC;AACtD;AAAA,YACF;AACE,sBAAQ,SAAS,MAAM;AACvB,sBAAQ,OAAOA,GAAE,MAAM,EAAE,KAAK,SAAS,EAAE,CAAC;AAC1C;AAAA,UACJ;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,aAAa,QAAQ,OAAO,iBAAiB;AAAA,QAC/C,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,MAAM;AAAA,YACN,QAAQ;AAAA,UACV;AAAA,UACA,UAAU;AAAA,YACR,eAAe;AAAA,YACf,SAAS;AAAA,YACT,SAAS;AAAA,YACT,KAAK;AAAA,YACL,MAAM;AAAA,YACN,aAAa;AAAA,UACf;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,SAAS,KAAK,OAAO,WAAW;AAAA,QAClC,OAAO;AAAA,UACL,kBAAkB;AAAA,YAChB,GAAG;AAAA,UACL;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,KAAK;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM;AAAA,MACR;AACA,UAAI,QAAQ,QAAQ,OAAO,aAAa;AAAA,QACtC,OAAO;AAAA,UACL,MAAM;AAAA,YACJ,SAAS;AAAA,UACX;AAAA,UACA,wBAAwB;AAAA,YACtB,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,QAAQ;AAAA,UACV;AAAA,UACA,yBAAyB;AAAA,YACvB,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,QAAQ;AAAA,UACV;AAAA,UACA,2BAA2B;AAAA,YACzB,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,QAAQ;AAAA,UACV;AAAA,UACA,wBAAwB;AAAA,YACtB,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,eAAe;AAAA,YACf,eAAe;AAAA,YACf,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,eAAe;AAAA,UACjB;AAAA,UACA,yBAAyB;AAAA,YACvB,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,eAAe;AAAA,UACjB;AAAA,UACA,2BAA2B;AAAA,YACzB,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,aAAa;AAAA,YACb,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,QACA,MAAM,CAAC;AAAA,QACP,YAAY,CAAC;AAAA,QACb,SAAS,CAAC;AAAA,MACZ,GAAG;AAAA,QACD,QAAQ,CAAC,yBAAyB,wBAAwB,iHAAiH,QAAQ,iHAAiH,MAAM,EAAE,KAAK,EAAE;AAAA,QACnT,YAAY,WAAY;AACtB,eAAK,GAAG,gDAAgD,WAAY;AAClE,iBAAK,iBAAiB;AACtB,iBAAK,QAAQ,YAAY;AAAA,UAC3B,GAAG,IAAI;AACP,eAAK,iBAAiB;AACtB,kBAAQ,UAAU,WAAW,MAAM,MAAM,SAAS;AAAA,QACpD;AAAA,QACA,cAAc,WAAY;AACxB,iBAAO,KAAK,IAAI,MAAM;AAAA,QACxB;AAAA,QACA,kBAAkB,WAAY;AAC5B,cAAI,QAAQ,KAAK,IAAI,OAAO;AAC5B,cAAI,QAAQ,CAAC;AAAA,YACX,MAAM;AAAA,YACN,MAAM,KAAK,aAAa;AAAA,UAC1B,GAAG;AAAA,YACD,MAAM;AAAA,YACN,MAAM,KAAK,IAAI,YAAY;AAAA,UAC7B,GAAG;AAAA,YACD,MAAM;AAAA,YACN,MAAM,KAAK,IAAI,SAAS;AAAA,UAC1B,CAAC;AACD,cAAI,UAAU;AACd,gBAAM,QAAQ,SAAUqC,OAAM;AAC5B,gBAAI,QAAQ,MAAM,QAAQA,MAAK,IAAI,IAAIA,MAAK,OAAO,CAACA,MAAK,IAAI;AAC7D,gBAAI,aAAa,MAAM,SAAS,KAAK;AACrC,kBAAM,gBAAgBA,MAAK,OAAO,OAAO,EAAE,OAAO,MAAM,KAAK,IAAI;AACjE,kBAAM,gBAAgBA,MAAK,OAAO,OAAO,EAAE,SAAS;AACpD,kBAAM,gBAAgBA,MAAK,OAAO,OAAO,EAAE,YAAY,iBAAiB,UAAU;AAClF,uBAAW;AAAA,UACb,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AACD,UAAI,YAAY,YAAY,OAAO;AAAA,QACjC,YAAY,WAAY;AACtB,sBAAY,UAAU,WAAW,MAAM,MAAM,SAAS;AACtD,eAAK,SAAS,KAAK,OAAO,cAAc,WAAY;AAClD,iBAAK,OAAO;AACZ,iBAAK,OAAO;AAAA,UACd,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AACD,UAAI,WAAW,MAAM,OAAO,gBAAgB;AAAA,QAC1C,OAAO;AAAA,UACL,wBAAwB;AAAA,YACtB,MAAM;AAAA,UACR;AAAA,UACA,yBAAyB;AAAA,YACvB,MAAM;AAAA,UACR;AAAA,UACA,2BAA2B;AAAA,YACzB,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,cAAc,WAAY;AACxB,iBAAO,CAAC,gBAAgB,KAAK,IAAI,MAAM,CAAC;AAAA,QAC1C;AAAA,MACF,CAAC;AACD,UAAI,eAAe;AACnB,UAAI,YAAY,MAAM,OAAO,iBAAiB;AAAA,QAC5C,OAAO;AAAA,UACL,wBAAwB;AAAA,YACtB,MAAM;AAAA,UACR;AAAA,UACA,yBAAyB;AAAA,YACvB,MAAM;AAAA,UACR;AAAA,UACA,2BAA2B;AAAA,YACzB,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,cAAc,WAAY;AACxB,iBAAO,CAAC,iBAAiB,KAAK,IAAI,MAAM,CAAC;AAAA,QAC3C;AAAA,MACF,CAAC;AACD,UAAI,gBAAgB;AACpB,UAAI,iBAAiB,KAAK,OAAO,sBAAsB;AAAA,QACrD,OAAO;AAAA,UACL,kBAAkB;AAAA,YAChB,GAAG;AAAA,YACH,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,iBAAiB,KAAK,OAAO,sBAAsB;AAAA,QACrD,OAAO;AAAA,UACL,kBAAkB;AAAA,YAChB,GAAG;AAAA,YACH,MAAM;AAAA,UACR;AAAA,UACA,eAAe;AAAA,YACb,oBAAoB;AAAA,UACtB;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,cAAc,KAAK,OAAO,mBAAmB;AAAA,QAC/C,OAAO;AAAA,UACL,kBAAkB;AAAA,YAChB,GAAG;AAAA,YACH,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,cAAc,KAAK,OAAO,mBAAmB;AAAA,QAC/C,OAAO;AAAA,UACL,kBAAkB;AAAA,YAChB,GAAG;AAAA,YACH,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,cAAc,KAAK,OAAO,iBAAiB;AAI/C,UAAI,UAAU,QAAQ,OAAO,aAAa;AAAA,QACxC,OAAO;AAAA,UACL,mBAAmB;AAAA,YACjB,SAAS;AAAA,YACT,UAAU;AAAA,YACV,MAAM;AAAA,YACN,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,gBAAgB;AAAA,UAClB;AAAA,UACA,wBAAwB;AAAA,YACtB,UAAU;AAAA,YACV,gBAAgB;AAAA,UAClB;AAAA,UACA,mBAAmB;AAAA,YACjB,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS;AAAA,YACT,eAAe;AAAA,YACf,QAAQ;AAAA,YACR,eAAe;AAAA,YACf,aAAa;AAAA,UACf;AAAA,UACA,qBAAqB;AAAA,YACnB,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS;AAAA,YACT,QAAQ;AAAA,YACR,eAAe;AAAA,YACf,aAAa;AAAA,UACf;AAAA,QACF;AAAA,QACA,MAAM;AAAA,QACN,QAAQ,CAAC;AAAA,MACX,GAAG;AAAA,QACD,QAAQ,CAAC,yBAAyB,wBAAwB,kCAAkC,QAAQ,uCAAuC,kCAAkC,oCAAoC,MAAM,EAAE,KAAK,EAAE;AAAA,QAChO,YAAY,WAAY;AACtB,eAAK,GAAG;AAAA,YACN,eAAe,KAAK;AAAA,YACpB,iBAAiB,KAAK;AAAA,YACtB,eAAe,KAAK;AAAA,UACtB,GAAG,IAAI;AACP,eAAK,WAAW;AAChB,eAAK,aAAa;AAClB,eAAK,WAAW;AAChB,kBAAQ,UAAU,WAAW,MAAM,MAAM,SAAS;AAAA,QACpD;AAAA,QACA,YAAY,WAAY;AACtB,eAAK,KAAK,wBAAwB,KAAK,IAAI,MAAM,CAAC;AAAA,QACpD;AAAA,QACA,cAAc,WAAY;AACxB,eAAK,KAAK,0BAA0B,KAAK,IAAI,QAAQ,EAAE,KAAK,IAAI,CAAC;AAAA,QACnE;AAAA,QACA,YAAY,WAAY;AACtB,cAAI,IAAI,cAAc,KAAK,IAAI,MAAM,EAAE,QAAQ;AAK/C,eAAK,KAAK,0BAA0B,GAAG;AAAA,YACrC,QAAQ;AAAA,UACV,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AACD,UAAI,eAAe,OAAO,OAAO,kBAAkB;AAAA,QACjD,MAAM;AAAA,QACN,OAAO;AAAA,UACL,QAAQ;AAAA,YACN,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,aAAa,QAAQ,OAAO,gBAAgB;AAAA,QAC9C,MAAM;AAAA,UACJ,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,OAAO;AAAA,UACL,gBAAgB;AAAA,YACd,WAAW;AAAA,YACX,GAAG;AAAA,YACH,MAAM;AAAA,YACN,QAAQ;AAAA,UACV;AAAA,UACA,gBAAgB;AAAA,YACd,WAAW;AAAA,YACX,GAAG;AAAA,YACH,MAAM;AAAA,UACR;AAAA,QACF;AAAA,MACF,GAAG;AAAA,QACD,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,eAAe,KAAK,OAAO,kBAAkB;AAAA,QAC/C,OAAO;AAAA,UACL,kBAAkB;AAAA,YAChB,GAAG;AAAA,YACH,MAAM;AAAA,YACN,QAAQ;AAAA,UACV;AAAA,UACA,eAAe;AAAA,YACb,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,MAAM;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,OAAO;AAAA,QACP,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,YAAY;AAAA,MACd;AACA,UAAI,UAAU;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,eAAS,QAAQqE,WAAU/E,MAAK;AAC9B,YAAIA,SAAQ,GAAG;AACb,iBAAO;AAAA,QACT;AAEA,YAAI,KAAK;AACT,YAAI,WAAW,KAAK,MAAM+E,YAAW/E,OAAM,MAAM,EAAE,IAAI;AACvD,eAAO,WAAW;AAAA,MACpB;AACA,eAAS,IAAI,UAAU;AACrB,eAAO,SAAU,KAAK,MAAM,QAAQ,QAAQ;AAC1C,cAAI9B,MAAK,KAAK,iBAAiB,MAAM,IAAI,gBAAgB;AACzD,iBAAOA,IAAG,UAAU,KAAK,MAAM,QAAQ,MAAM;AAAA,QAC/C;AAAA,MACF;AACA,eAAS,iBAAiB,UAAU,KAAK,MAAM,QAAQ,QAAQ;AAC7D,YAAI,QAAQ,KAAK,MAAM,MAAM;AAC7B,YAAI2B,QAAO,KAAK,qBAAqB,MAAM;AAC3C,YAAI,SAAS,KAAK,MAAM,QAAQ,EAAE,OAAO;AACzC,eAAO,OAAO,QAAQ,KAAK;AAC3B,YAAI,KAAK,OAAO,IAAIA,MAAK;AACzB,YAAI,KAAK,OAAO,IAAIA,MAAK;AACzB,YAAI,UAAU;AACZ,eAAK,QAAQ,IAAIA,MAAK,KAAK;AAC3B,eAAK,QAAQ,IAAIA,MAAK,MAAM;AAAA,QAC9B;AACA,YAAI,SAAS;AAAA,UACX,MAAM;AAAA,UACN,MAAM;AAAA,YACJ;AAAA,YACA;AAAA,YACA,QAAQ;AAAA,UACV;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,eAAS,cAAc,UAAU,KAAK,MAAM,SAAS,QAAQ;AAC3D,YAAI,aAAa,KAAK,cAAc;AACpC,YAAI,CAAC,YAAY;AACf,iBAAO;AAAA,QACT;AACA,YAAIlB,UAAS,WAAW,mBAAmB,MAAM;AACjD,YAAI,UAAU;AACZ,cAAI,cAAc,WAAW,OAAO;AACpC,cAAI,SAAS;AAAA,YACX,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAOA,UAAS;AAAA,YAClB;AAAA,UACF;AAAA,QACF,OAAO;AACL,cAAI,SAAS;AAAA,YACX,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,QAAQA;AAAA,YACV;AAAA,UACF;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,cAAc;AAClB,UAAI,cAAc,IAAI,KAAK;AAC3B,UAAI,cAAc,IAAI,IAAI;AAC1B,UAAI,UAAU;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAGA,UAAI,eAAe,KAAK,OAAO;AAAA,QAC7B,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,WAAW;AAAA,QACX,QAAQ;AAAA,UACN,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,QAAQ;AAAA,QACV;AAAA,QACA,gBAAgB;AAAA,UACd,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,UACT,UAAU;AAAA,UACV,aAAa;AAAA,QACf;AAAA,QACA,YAAY;AAAA,UACV,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,gBAAgB;AAAA,UAChB,UAAU;AAAA,QACZ;AAAA,QACA,UAAU,SAAU,GAAG,GAAG;AACxB,cAAI,MAAM;AACV,cAAI,MAAM,IAAI;AACd,cAAI,UAAU,IAAI;AAClB,cAAIsB,SAAQ,QAAQ;AACpB,cAAI,SAAS5B,GAAE,gBAAgB,EAAE,UAAU,GAAG,CAAC;AAC/C,cAAI4B,QAAO;AACT,qBAAS,OAAO,MAAMA,MAAK;AAAA,UAC7B;AACA,cAAI,UAAU,QAAQ;AAAA,YACpB,UAAU;AAAA,UACZ,CAAC;AAAA,QACH;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,KAAK,QAAQ,MAAM,GAAG,GAAG;AAC3B;AAAA,UACF;AACA,cAAI,gBAAgB;AACpB,cAAI,eAAe;AACnB,eAAK,QAAQ,MAAM,iBAAiB;AACpC,eAAK,uBAAuB,MAAM,IAAI,IAAI;AAC1C,eAAK,QAAQ,eAAe,MAAM,GAAG;AAAA,QACvC;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,eAAK,QAAQ,YAAY,MAAM,GAAG;AAAA,QACpC;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,eAAK,QAAQ,UAAU,MAAM,GAAG;AAAA,QAClC;AAAA,QACA,aAAa,SAAU,KAAK;AAC1B,eAAK,QAAQ,WAAW,MAAM,GAAG;AACjC,eAAK,yBAAyB;AAC9B,eAAK,QAAQ,MAAM,eAAe;AAAA,QACpC;AAAA,MACF,CAAC;AACD,UAAI,WAAW,SAAS,OAAO;AAAA,QAC7B,MAAM;AAAA,QACN,SAAS;AAAA,UACP,aAAa;AAAA,UACb,YAAY;AAAA,UACZ,mBAAmB;AAAA,UACnB,cAAc;AAAA,UACd,iBAAiB;AAAA,UACjB,OAAO;AAAA,QACT;AAAA,QACA,UAAU,CAAC;AAAA,UACT,SAAS;AAAA,UACT,UAAU;AAAA,UACV,WAAW;AAAA,UACX,YAAY;AAAA,YACV,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,UAAU;AAAA,UACZ;AAAA,QACF,CAAC;AAAA,QACD,SAAS;AAAA,QACT,QAAQ;AAAA,UACN,kCAAkC;AAAA,UAClC,mCAAmC;AAAA,QACrC;AAAA,QACA,UAAU,WAAY;AACpB,cAAI,KAAK,QAAQ,cAAc;AAC7B,iBAAK,eAAe;AACpB,iBAAK,WAAW;AAAA,UAClB;AACA,eAAK,aAAa;AAClB,eAAK,cAAc;AACnB,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,WAAY;AAClB,cAAI,cAAc,KAAK;AACvB,cAAI,WAAW,YAAY,MAAM,SAAS;AAC1C,cAAI,SAAS,WAAW,KAAK,QAAQ,QAAQ;AAC3C,iBAAK,cAAc;AAAA,UACrB,OAAO;AACL,iBAAK,aAAa;AAClB,iBAAK,cAAc;AAAA,UACrB;AACA,cAAI,KAAK,QAAQ,cAAc;AAC7B,iBAAK,WAAW;AAAA,UAClB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,UAAU,KAAK;AACnB,eAAK,UAAU,CAAC;AAChB,eAAK,cAAc;AACnB,cAAI,CAAC,MAAM,QAAQ,OAAO,GAAG;AAC3B;AAAA,UACF;AACA,mBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,IAAI,GAAG,KAAK;AAC9C,oBAAQ,CAAC,EAAE,OAAO;AAAA,UACpB;AAAA,QACF;AAAA,QACA,eAAe,WAAY;AACzB,cAAI,SAAS;AACb,cAAI,cAAc,KAAK;AACvB,cAAI,WAAW,YAAY,MAAM,SAAS;AAC1C,mBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,GAAG,KAAK;AAC/C,gBAAI,SAAS,SAAS,CAAC;AACvB,gBAAI,SAAS,IAAI,KAAK,QAAQ,YAAY;AAAA,cACxC,OAAO;AAAA,cACP,OAAO,KAAK;AAAA,cACZ,OAAO,KAAK,QAAQ;AAAA,cACpB,OAAO,SAAU,KAAK;AACpB,uBAAO,OAAO,MAAM,GAAG;AAAA,cACzB;AAAA,YACF,CAAC;AACD,mBAAO,OAAO;AACd,mBAAO,SAAS,OAAO,GAAG,OAAO,CAAC;AAClC,iBAAK,oBAAoB,OAAO,EAAE;AAClC,mBAAO,IAAI,SAAS,KAAK,EAAE;AAC3B,iBAAK,QAAQ,KAAK,MAAM;AACxB,iBAAK,qBAAqB,MAAM;AAAA,UAClC;AAAA,QACF;AAAA,QACA,eAAe,WAAY;AACzB,cAAI,cAAc,KAAK;AACvB,cAAI,WAAW,YAAY,MAAM,SAAS;AAC1C,mBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,GAAG,KAAK;AAC/C,gBAAI,SAAS,SAAS,CAAC;AACvB,gBAAI,SAAS,KAAK,QAAQ,CAAC;AAC3B,gBAAI,CAAC,QAAQ;AACX;AAAA,YACF;AACA,mBAAO,SAAS,OAAO,GAAG,OAAO,CAAC;AAAA,UACpC;AAAA,QACF;AAAA,QACA,YAAY,WAAY;AACtB,cAAI,aAAa,KAAK,WAAW;AACjC,cAAI,YAAY;AACd,uBAAW,aAAa,KAAK,KAAK,YAAY,wBAAwB,CAAC;AAAA,UACzE;AAAA,QACF;AAAA,QACA,sBAAsB,SAAU,QAAQ;AACtC,cAAI,cAAc,KAAK;AACvB,cAAI,YAAY,IAAI,YAAY,GAAG;AACjC,iBAAK,SAAS,QAAQ,eAAe,KAAK,kBAAkB;AAC5D,iBAAK,SAAS,QAAQ,YAAY,KAAK,gBAAgB;AACvD,iBAAK,SAAS,QAAQ,WAAW,KAAK,eAAe;AAAA,UACvD;AACA,cAAI,YAAY,IAAI,cAAc,GAAG;AACnC,iBAAK,SAAS,QAAQ,UAAU,KAAK,cAAc;AAAA,UACrD;AAAA,QACF;AAAA,QACA,mBAAmB,SAAUvB,QAAO;AAClC,cAAI,WAAW,KAAK;AACpB,cAAI,WAAW,SAAS,MAAM,SAAS;AACvC,cAAI,OAAOA,SAAQ,IAAI,SAASA,SAAQ,CAAC,IAAI,SAAS;AACtD,cAAI,OAAOA,SAAQ,SAAS,SAAS,IAAI,SAASA,SAAQ,CAAC,IAAI,SAAS;AACxE,iBAAO;AAAA,YACL,MAAM,IAAI,MAAM,IAAI;AAAA,YACpB,MAAM,IAAI,MAAM,IAAI;AAAA,UACtB;AAAA,QACF;AAAA,QACA,oBAAoB,SAAU,SAAS,KAAK;AAC1C,eAAK,MAAM;AACX,cAAI,MAAM;AACV,cAAI,cAAc,IAAI;AACtB,cAAI,UAAU,IAAI;AAClB,sBAAY,MAAM,WAAW,eAAe;AAAA,YAC1C,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,cAAI,CAAC,QAAQ,iBAAiB;AAC5B,wBAAY,kBAAkB,MAAM,aAAa,YAAY,MAAM,eAAe,GAAG,CAAC;AAAA,UACxF;AAAA,QACF;AAAA,QACA,kBAAkB,SAAU,QAAQ,KAAK;AACvC,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,WAAW,IAAI;AACnB,cAAIA,SAAQ,OAAO,QAAQ;AAC3B,cAAI,QAAQ,SAAS,MAAM,eAAe,GAAG;AAC7C,cAAI,kBAAkB,MAAM,CAAC;AAC7B,cAAI,IAAI,MAAM,CAAC;AACf,cAAI,IAAI,MAAM,CAAC;AACf,cAAI,SAAS;AAAA,YACX;AAAA,YACA;AAAA,UACF;AACA,eAAK,WAAW,QAAQA,MAAK;AAC7B,mBAAS,MAAM,OAAOA,QAAO,QAAQ;AAAA,YACnC,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,iBAAO,SAAS,OAAO,GAAG,OAAO,CAAC;AAClC,cAAI,CAAC,QAAQ,iBAAiB;AAC5B,qBAAS,kBAAkB,iBAAiB,GAAG,CAAC;AAAA,UAClD;AAAA,QACF;AAAA,QACA,iBAAiB,SAAU,SAAS,KAAK;AACvC,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,WAAW,IAAI;AACnB,cAAI,QAAQ,cAAc;AACxB,iBAAK,WAAW;AAAA,UAClB;AACA,cAAI,CAAC,QAAQ,mBAAmB;AAC9B;AAAA,UACF;AACA,cAAI,kBAAkB,SAAS,8BAA8B;AAAA,YAC3D,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,cAAI,iBAAiB;AACnB,iBAAK,OAAO;AAAA,UACd;AACA,eAAK,KAAK;AACV,mBAAS,MAAM,UAAU,eAAe;AAAA,YACtC,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,cAAI,KAAK,UAAU,GAAG,EAAE,aAAa;AACnC,qBAAS,MAAM,UAAU,cAAc;AAAA,cACrC,IAAI;AAAA,cACJ,MAAM,KAAK;AAAA,YACb,CAAC;AAAA,UACH;AACA,cAAI,QAAQ,SAAS,MAAM,eAAe,GAAG;AAC7C,cAAI,gBAAgB,MAAM,CAAC;AAC3B,cAAI,IAAI,MAAM,CAAC;AACf,cAAI,IAAI,MAAM,CAAC;AACf,cAAI,CAAC,QAAQ,iBAAiB;AAC5B,qBAAS,gBAAgB,eAAe,GAAG,CAAC;AAAA,UAC9C;AACA,mBAAS,gBAAgB,aAAa;AAAA,QACxC;AAAA,QACA,YAAY,SAAU,QAAQA,QAAO;AACnC,cAAI,aAAa,KAAK,QAAQ;AAC9B,cAAI,aAAa,GAAG;AAClB,gBAAI,YAAY,KAAK,kBAAkBA,MAAK;AAC5C,gBAAI,OAAO,UAAU;AACrB,gBAAI,OAAO,UAAU;AACrB,gBAAI,KAAK,IAAI,OAAO,IAAI,KAAK,CAAC,IAAI,YAAY;AAC5C,qBAAO,IAAI,KAAK;AAAA,YAClB,WAAW,KAAK,IAAI,OAAO,IAAI,KAAK,CAAC,IAAI,YAAY;AACnD,qBAAO,IAAI,KAAK;AAAA,YAClB;AACA,gBAAI,KAAK,IAAI,OAAO,IAAI,KAAK,CAAC,IAAI,YAAY;AAC5C,qBAAO,IAAI,UAAU,KAAK;AAAA,YAC5B,WAAW,KAAK,IAAI,OAAO,IAAI,KAAK,CAAC,IAAI,YAAY;AACnD,qBAAO,IAAI,KAAK;AAAA,YAClB;AAAA,UACF;AAAA,QACF;AAAA,QACA,gBAAgB,SAAU,QAAQ,KAAK;AACrC,cAAIoG,WAAU,OAAO,QAAQ;AAC7B,cAAI,WAAW,KAAK;AACpB,mBAAS,MAAM,aAAaA,UAAS;AAAA,YACnC,IAAI;AAAA,UACN,CAAC;AACD,cAAI,KAAK,QAAQ,cAAc;AAC7B,iBAAK,WAAW;AAAA,UAClB;AACA,mBAAS,gBAAgB,eAAe,GAAG,CAAC;AAAA,QAC9C;AAAA,QACA,mBAAmB,SAAU,KAAK;AAChC,cAAI,KAAK,MAAM,GAAG,GAAG;AACnB;AAAA,UACF;AACA,cAAI,gBAAgB;AACpB,cAAI,eAAe;AACnB,cAAI,kBAAkB,eAAe,GAAG;AACxC,cAAI,SAAS,KAAK,MAAM,WAAW,gBAAgB,SAAS,gBAAgB,OAAO,EAAE,OAAO;AAC5F,cAAI,cAAc,KAAK;AACvB,sBAAY,MAAM,WAAW,cAAc;AAAA,YACzC,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,cAAIA,WAAU,YAAY,eAAe,OAAO,GAAG,OAAO,CAAC;AAC3D,eAAK,WAAW,QAAQA,QAAO;AAC/B,sBAAY,MAAM,aAAaA,UAAS,QAAQ;AAAA,YAC9C,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,eAAK,OAAO;AACZ,cAAI,SAAS,KAAK,QAAQA,QAAO;AACjC,eAAK,UAAU,iBAAiB;AAAA,YAC9B,aAAa;AAAA,UACf,CAAC;AACD,iBAAO,cAAc,eAAe;AAAA,QACtC;AAAA,QACA,UAAU,WAAY;AACpB,eAAK,aAAa;AAAA,QACpB;AAAA,MACF,GAAG;AAAA,QACD;AAAA;AAAA,MACF,CAAC;AACD,eAAS,YAAY,MAAM,kBAAkB;AAC3C,YAAI,QAAQ,KAAK;AACjB,YAAI,kBAAkB;AACpB,iBAAO,MAAM,QAAQ;AAAA,QACvB;AACA,eAAO,MAAM,OAAO,IAAI,KAAK,cAAc,EAAE,KAAK,IAAI,KAAK,qBAAqB,KAAK,EAAE;AAAA,MACzF;AACA,eAAS,UAAU,QAAQ,MAAM,QAAQ;AAGvC,YAAI,MAAM,YAAY,KAAK,KAAK,OAAO,CAAC,GAAG,MAAM,QAAQ,QAAQ,KAAK,KAAK;AAC3E,eAAO,IAAI;AAAA,MACb;AACA,eAAS,WAAW,QAAQ,MAAM,QAAQ,MAAM,aAAa,UAAU;AACrE,YAAI,aAAa,SAAS,QAAQ;AAClC,YAAI,WAAW,SAAS;AACxB,YAAI,WAAW,WAAW,IAAI;AAC9B,YAAI,MAAM,KAAK,MAAM,OAAO,QAAQ,KAAK,KAAK,aAAa,WAAW,WAAW,QAAQ;AACzF,YAAI,KAAK;AACP,cAAI,KAAK,IAAI,IAAI,IAAI,OAAO,CAAC,IAAI,YAAY;AAC3C,mBAAO,IAAI,IAAI;AAAA,UACjB;AACA,cAAI,KAAK,IAAI,IAAI,IAAI,OAAO,CAAC,IAAI,YAAY;AAC3C,mBAAO,IAAI,IAAI;AAAA,UACjB;AAAA,QACF;AACA,eAAO;AAAA,MACT;AACA,UAAI,gBAAgB,KAAK,OAAO;AAAA,QAC9B,SAAS;AAAA,QACT,YAAY;AAAA,QACZ,WAAW;AAAA,QACX,QAAQ;AAAA,UACN,WAAW;AAAA,UACX,YAAY;AAAA,QACd;AAAA,QACA,gBAAgB;AAAA,UACd,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,UACT,UAAU;AAAA,UACV,aAAa;AAAA,QACf;AAAA,QACA,UAAU,CAAC;AAAA,UACT,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,QAAQ;AAAA,YACR,kBAAkB;AAAA,UACpB;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,SAAS;AAAA,YACT,UAAU;AAAA,YACV,KAAK;AAAA,YACL,KAAK;AAAA,YACL,MAAM;AAAA,YACN,MAAM;AAAA,YACN,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,gBAAgB;AAAA,UAClB;AAAA,QACF,CAAC;AAAA,QACD,UAAU,WAAY;AACpB,eAAK,eAAe;AAAA,QACtB;AAAA,QACA,UAAU,SAAU,GAAG,GAAG,OAAO,MAAM;AACrC,cAAI,MAAM,KAAK;AACf,cAAI7E,SAAQ,IAAI;AAChB,cAAI,SAAS5B,GAAE,gBAAgB,EAAE,UAAU,GAAG,CAAC,EAAE,OAAO,KAAK;AAC7D,cAAI4B,QAAO;AACT,qBAAS,OAAO,MAAMA,MAAK;AAAA,UAC7B;AACA,cAAI,SAAS,KAAK,WAAW;AAC7B,iBAAO,aAAa,aAAa5B,GAAE,wBAAwB,MAAM,CAAC;AAClE,iBAAO,aAAa,UAAU,QAAQ,QAAQ,IAAI,eAAe,YAAY;AAC7E,cAAI,YAAY,KAAK,gBAAgB,IAAI,MAAM,GAAG,CAAC,CAAC;AACpD,cAAImC,QAAO,KAAK,WAAW;AAC3B,UAAAA,MAAK,aAAa,MAAM,CAAC;AACzB,UAAAA,MAAK,aAAa,MAAM,CAAC;AACzB,UAAAA,MAAK,aAAa,MAAM,UAAU,CAAC;AACnC,UAAAA,MAAK,aAAa,MAAM,UAAU,CAAC;AAAA,QACrC;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,KAAK,QAAQ,MAAM,GAAG,GAAG;AAC3B;AAAA,UACF;AACA,eAAK,QAAQ,gBAAgB,MAAM,GAAG;AACtC,cAAI,gBAAgB;AACpB,cAAI,eAAe;AACnB,eAAK,QAAQ,MAAM,iBAAiB;AACpC,eAAK,uBAAuB,MAAM,IAAI,IAAI;AAAA,QAC5C;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,eAAK,QAAQ,YAAY,MAAM,GAAG;AAAA,QACpC;AAAA,QACA,aAAa,SAAU,KAAK;AAC1B,eAAK,yBAAyB;AAC9B,eAAK,QAAQ,MAAM,eAAe;AAClC,eAAK,QAAQ,cAAc,MAAM,GAAG;AAAA,QACtC;AAAA,QACA,MAAM,WAAY;AAChB,eAAK,GAAG,MAAM,UAAU;AAAA,QAC1B;AAAA,QACA,MAAM,WAAY;AAChB,eAAK,GAAG,MAAM,UAAU;AAAA,QAC1B;AAAA,MACF,CAAC;AACD,UAAI,WAAW,SAAS,OAAO;AAAA,QAC7B,MAAM;AAAA,QACN,WAAW;AAAA,QACX,SAAS;AAAA,UACP,aAAa;AAAA,UACb,wBAAwB;AAAA,UACxB,mBAAmB;AAAA,UACnB,QAAQ;AAAA,UACR,YAAY;AAAA,UACZ,YAAY;AAAA,UACZ,iBAAiB;AAAA,QACnB;AAAA,QACA,SAAS;AAAA,QACT,UAAU,WAAY;AACpB,eAAK,aAAa;AAClB,cAAI,cAAc,KAAK;AACvB,cAAI,WAAW,YAAY,MAAM,SAAS;AAC1C,mBAAS,QAAQ,YAAY,WAAW;AACxC,mBAAS,KAAK,YAAY,WAAW;AACrC,mBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,IAAI,IAAI,GAAG,KAAK;AACnD,gBAAI,SAAS,SAAS,CAAC;AACvB,gBAAI,aAAa,SAAS,IAAI,CAAC;AAC/B,gBAAI,SAAS,KAAK,aAAa,QAAQ,UAAU;AACjD,iBAAK,oBAAoB,OAAO,EAAE;AAClC,iBAAK,QAAQ,KAAK,MAAM;AACxB,mBAAO,QAAQ,QAAQ;AAAA,UACzB;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,SAAU,QAAQ,YAAY;AAC1C,cAAI,SAAS;AACb,cAAI,SAAS,IAAI,KAAK,QAAQ,YAAY;AAAA,YACxC,OAAO,KAAK;AAAA,YACZ,OAAO,KAAK,QAAQ;AAAA,YACpB,OAAO,SAAU,KAAK;AACpB,qBAAO,OAAO,MAAM,GAAG;AAAA,YACzB;AAAA,UACF,CAAC;AACD,iBAAO,OAAO;AACd,eAAK,aAAa,QAAQ,QAAQ,UAAU;AAC5C,iBAAO,IAAI,SAAS,KAAK,EAAE;AAC3B,eAAK,qBAAqB,MAAM;AAChC,iBAAO;AAAA,QACT;AAAA,QACA,QAAQ,WAAY;AAClB,eAAK,OAAO;AACZ,iBAAO;AAAA,QACT;AAAA,QACA,sBAAsB,SAAU,QAAQ;AACtC,eAAK,SAAS,QAAQ,gBAAgB,KAAK,mBAAmB;AAC9D,eAAK,SAAS,QAAQ,YAAY,KAAK,gBAAgB;AACvD,eAAK,SAAS,QAAQ,cAAc,KAAK,iBAAiB;AAAA,QAC5D;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,UAAU,KAAK;AACnB,eAAK,UAAU,CAAC;AAChB,eAAK,cAAc;AACnB,cAAI,CAAC,MAAM,QAAQ,OAAO,GAAG;AAC3B;AAAA,UACF;AACA,mBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,IAAI,GAAG,KAAK;AAC9C,oBAAQ,CAAC,EAAE,OAAO;AAAA,UACpB;AAAA,QACF;AAAA,QACA,oBAAoB,SAAU,OAAO;AACnC,cAAI,UAAU,KAAK;AACnB,mBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,IAAI,GAAG,KAAK;AAC9C,oBAAQ,CAAC,EAAE,QAAQ,SAAS;AAAA,UAC9B;AAAA,QACF;AAAA,QACA,aAAa,SAAU,MAAMqF,SAAQ;AACnC,cAAI,eAAe,KAAK,YAAY;AACpC,cAAIA,SAAQ;AACV,yBAAa,KAAK,CAAC,MAAM,QAAQ,GAAGA,SAAQ;AAAA,cAC1C,SAAS;AAAA,cACT,IAAI;AAAA,cACJ,MAAM,KAAK;AAAA,YACb,CAAC;AAAA,UACH,OAAO;AACL,yBAAa,WAAW,CAAC,MAAM,QAAQ,GAAG;AAAA,cACxC,IAAI;AAAA,cACJ,MAAM,KAAK;AAAA,YACb,CAAC;AAAA,UACH;AAAA,QACF;AAAA,QACA,YAAY,SAAU,QAAQ,UAAU5E,OAAM;AAC5C,cAAIvC,SAAQ,OAAO,QAAQ;AAC3B,cAAI,WAAW,KAAK;AACpB,cAAI,OAAO,SAAS;AACpB,cAAI,WAAW,KAAK,SAAS;AAC7B,cAAI,OAAO,OAAO,QAAQ;AAC1B,cAAI,OAAO,SAASA,SAAQ,CAAC,KAAKuC,MAAK;AACvC,cAAI,OAAO,SAASvC,SAAQ,CAAC,KAAKuC,MAAK;AACvC,cAAI,aAAa,KAAK,QAAQ;AAC9B,cAAI,KAAK,IAAI,SAAS,IAAI,IAAI,KAAK,IAAI,CAAC,IAAI,YAAY;AACtD,qBAAS,IAAI,IAAI,KAAK,IAAI;AAAA,UAC5B,WAAW,KAAK,IAAI,SAAS,IAAI,IAAI,KAAK,IAAI,CAAC,IAAI,YAAY;AAC7D,qBAAS,IAAI,IAAI,KAAK,IAAI;AAAA,UAC5B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,kBAAkB,SAAU,QAAQ,KAAK;AACvC,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAIA,QAAO,KAAK,UAAU,GAAG;AAC7B,cAAI,cAAc,KAAK;AACvB,cAAI,QAAQ,YAAY;AACxB,cAAI6D,WAAU,OAAO,QAAQ,QAAQ;AACrC,cAAI,kBAAkB,eAAe,GAAG;AACxC,cAAI,SAAS,MAAM,WAAW,gBAAgB,SAAS,gBAAgB,OAAO;AAC9E,cAAI,WAAW,KAAK,WAAW,QAAQ,OAAO,MAAM,GAAG7D,KAAI;AAC3D,cAAI,OAAO,OAAO,QAAQ;AAC1B,cAAI,SAAS,KAAK,QAAQ,aAAa,IAAI,OAAO,IAAI,IAAI,SAAS,IAAI;AACvE,cAAI,OAAO,YAAY;AACvB,cAAI,WAAW,UAAU,KAAK,SAAS,CAAC;AACxC,cAAI,WAAW,KAAK,QAAQ;AAC5B,cAAI,OAAO,aAAa,YAAY;AAClC,uBAAW;AAAA,UACb;AACA,cAAI,cAAc,OAAO,QAAQ;AACjC,cAAI,eAAe,CAAC,YAAY,YAAY,MAAM,CAAC,EAAE,OAAO,UAAU,CAAC,YAAY,YAAY,MAAM,CAAC,CAAC;AACvG,cAAI,cAAc;AAGlB,cAAI,cAAc,KAAK,GAAG;AACxB,gBAAI,KAAK,aAAa,cAAc,CAAC;AACrC,gBAAI,KAAK,aAAa,WAAW;AACjC,gBAAI,QAAQ,IAAI,KAAK,IAAI,EAAE,EAAE,OAAO,EAAE,MAAM;AAG5C,gBAAI,QAAQ,OAAO,GAAG;AACpB,uBAAS,OAAO,cAAc,GAAG,GAAGA,MAAK,iBAAiB,cAAc,CAAC,CAAC;AAC1E;AACA,mBAAK,mBAAmB,CAAC;AAAA,YAC3B;AAAA,UACF;AACA,cAAI,SAAS,SAAS6D,WAAU,WAAW;AAC3C,cAAI,aAAa,SAASA,WAAU,IAAI,WAAW;AAGnD,cAAI,cAAc,IAAI,aAAa,QAAQ;AACzC,gBAAI,OAAO,aAAa,cAAc,CAAC;AACvC,gBAAI,OAAO,aAAa,cAAc,CAAC;AACvC,gBAAI,UAAU,IAAI,KAAK,MAAM,IAAI,EAAE,OAAO,EAAE,MAAM;AAGlD,gBAAI,UAAU,OAAO,GAAG;AACtB,kBAAI,iBAAiB7D,MAAK,iBAAiB,WAAW;AACtD,kBAAI,aAAa,iBAAiB,IAAI;AACtC,kBAAI,mBAAmBA,MAAK,sBAAsB,CAAC,iBAAiB,IAAI;AACxE,kBAAI,aAAa,IAAI;AACrB,uBAAS,OAAO,cAAc,YAAY,GAAGA,MAAK,iBAAiB,aAAa,gBAAgB,CAAC;AAAA,YACnG;AAAA,UACF;AAGA,cAAI,aAAa,YAAY;AAC7B,cAAI,aAAa,YAAY;AAC7B,cAAI,qBAAqB;AACzB,cAAI,qBAAqB;AACzB,cAAI,CAAC,QAAQ;AACX,qBAAS,YAAY,aAAa,OAAO;AACzC,mBAAO,IAAI,IAAI,SAAS,IAAI;AAC5B,gBAAI,WAAW,cAAc,MAAM,GAAG;AACpC,qBAAO,IAAI,IAAI,SAAS,IAAI;AAC5B,mCAAqB;AAAA,YACvB,OAAO;AAEL,uBAAS,QAAQ,MAAM;AACvB,mBAAK,mBAAmB,CAAC;AACzB,cAAAA,MAAK,qBAAqB;AAC1B,mCAAqB;AAAA,YACvB;AAAA,UACF,WAAW6D,aAAY,GAAG;AACxB,gBAAI,WAAW,cAAc,MAAM,GAAG;AACpC,uBAAS,MAAM;AACf,mBAAK,mBAAmB,EAAE;AAC1B,mCAAqB;AAAA,YACvB,OAAO;AACL,qBAAO,IAAI,IAAI,SAAS,IAAI;AAC5B,mCAAqB;AAAA,YACvB;AAAA,UACF,OAAO;AACL,mBAAO,IAAI,IAAI,SAAS,IAAI;AAAA,UAC9B;AACA,cAAI,YAAY,YAAY;AAC1B,gBAAI,oBAAoB;AACtB,kBAAI,uBAAuB7D,MAAK,aAAa,MAAM;AACnD,mCAAqB,IAAI,IAAI,SAAS,IAAI;AAC1C,kBAAI,eAAe,SAAS,KAAK,aAAa,sBAAsB,YAAY,YAAY,gBAAgB,WAAW,IAAI,UAAU,WAAW;AAChJ,mBAAK,YAAY,UAAU,YAAY;AAAA,YACzC;AACA,gBAAI,oBAAoB;AACtB,mBAAK,YAAY,UAAUA,MAAK,eAAe;AAAA,YACjD;AAAA,UACF;AAGA,cAAI,aAAa,YAAY;AAC7B,cAAI,aAAa,YAAY;AAC7B,cAAI,qBAAqB;AACzB,cAAI,qBAAqB;AACzB,cAAI,CAAC,YAAY;AACf,yBAAa,YAAY,aAAa,OAAO;AAC7C,uBAAW,IAAI,IAAI,SAAS,IAAI;AAChC,gBAAI,WAAW,cAAc,UAAU,GAAG;AACxC,mCAAqB;AAAA,YACvB,OAAO;AAEL,uBAAS,KAAK,UAAU;AACxB,mCAAqB;AAAA,YACvB;AAAA,UACF,WAAW6D,aAAY,SAAS,SAAS,GAAG;AAC1C,gBAAI,WAAW,cAAc,UAAU,GAAG;AACxC,uBAAS,IAAI;AACb,mCAAqB;AAAA,YACvB,OAAO;AACL,yBAAW,IAAI,IAAI,SAAS,IAAI;AAChC,mCAAqB;AAAA,YACvB;AAAA,UACF,OAAO;AACL,uBAAW,IAAI,IAAI,SAAS,IAAI;AAAA,UAClC;AACA,cAAI,YAAY,YAAY;AAC1B,gBAAI,oBAAoB;AACtB,kBAAI,uBAAuB7D,MAAK,aAAa,MAAM;AACnD,mCAAqB,IAAI,IAAI,SAAS,IAAI;AAC1C,kBAAI,eAAe,SAAS,KAAK,aAAa,sBAAsB,YAAY,YAAY,gBAAgB,WAAW,IAAI,UAAU,WAAW;AAChJ,mBAAK,YAAY,UAAU,YAAY;AAAA,YACzC;AACA,gBAAI,oBAAoB;AACtB,mBAAK,YAAY,UAAUA,MAAK,eAAe;AAAA,YACjD;AAAA,UACF;AACA,cAAI,SAAS,KAAK,SAAU,GAAG;AAC7B,mBAAO,CAAC;AAAA,UACV,CAAC,GAAG;AAGF,kBAAM,IAAI,MAAM,sCAAsC;AAAA,UACxD;AACA,eAAK,SAAS,UAAU;AAAA,YACtB,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,eAAK,aAAa,QAAQ,QAAQ,YAAY,MAAM;AACpD,cAAI,CAAC,QAAQ,iBAAiB;AAC5B,wBAAY,kBAAkB,iBAAiB,OAAO,GAAG,OAAO,CAAC;AAAA,UACnE;AAAA,QACF;AAAA,QACA,qBAAqB,SAAU,QAAQ,KAAK;AAC1C,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,UAAU,IAAI;AAClB,cAAI,WAAW,IAAI;AACnB,cAAI,QAAQ,SAAS;AACrB,cAAI,QAAQ,SAAS;AACrB,cAAI6D,WAAU,OAAO,QAAQ;AAC7B,cAAI,CAAC,MAAM,QAAQ,OAAO,GAAG;AAC3B;AAAA,UACF;AACA,mBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,IAAI,GAAG,KAAK;AAC9C,gBAAI,MAAMA,UAAS;AACjB,sBAAQ,CAAC,EAAE,KAAK;AAAA,YAClB;AAAA,UACF;AACA,eAAK,MAAM;AACX,eAAK,UAAU,KAAK;AAAA,YAClB,cAAc,SAAS,aAAa,MAAM;AAAA,YAC1C,cAAc,SAAS,aAAa,MAAM;AAAA,YAC1C,iBAAiB,MAAM,MAAM,KAAK,CAAC,UAAU,QAAQ,CAAC,CAAC;AAAA,YACvD,iBAAiB,MAAM,MAAM,KAAK,CAAC,UAAU,QAAQ,CAAC,CAAC;AAAA,YACvD,kBAAkB,UAAU,MAAM,SAAS,CAAC;AAAA,YAC5C,oBAAoB;AAAA,UACtB,CAAC;AACD,gBAAM,WAAW,gBAAgB;AAAA,YAC/B,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,cAAI,CAAC,QAAQ,iBAAiB;AAC5B,qBAAS,kBAAkB,MAAM,UAAU,MAAM,eAAe,GAAG,CAAC;AAAA,UACtE;AAAA,QACF;AAAA,QACA,mBAAmB,SAAU,SAAS,KAAK;AACzC,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,WAAW,IAAI;AACnB,cAAI,QAAQ,SAAS;AACrB,cAAI,QAAQ,SAAS;AACrB,cAAI,QAAQ,mBAAmB;AAC7B,qBAAS,8BAA8B;AAAA,cACrC,IAAI;AAAA,cACJ,MAAM,KAAK;AAAA,YACb,CAAC;AAAA,UACH;AACA,cAAI,kBAAkB,eAAe,GAAG;AACxC,cAAI,SAAS,MAAM,WAAW,gBAAgB,SAAS,gBAAgB,OAAO;AAC9E,eAAK,OAAO;AACZ,eAAK,KAAK;AACV,gBAAM,UAAU,gBAAgB;AAAA,YAC9B,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,cAAI,CAAC,QAAQ,iBAAiB;AAC5B,qBAAS,gBAAgB,iBAAiB,OAAO,GAAG,OAAO,CAAC;AAAA,UAC9D;AACA,mBAAS,gBAAgB,eAAe;AAAA,QAC1C;AAAA,QACA,cAAc,SAAU,QAAQ,QAAQ,YAAY,QAAQ;AAC1D,cAAI,WAAW,KAAK,IAAI,OAAO,IAAI,WAAW,CAAC,IAAI,KAAK;AACxD,cAAI,aAAa,KAAK,IAAI,OAAO,IAAI,WAAW,CAAC,IAAI,KAAK;AAC1D,cAAI,YAAY,YAAY;AAC1B,gBAAI,cAAc,IAAI,KAAK,QAAQ,UAAU;AAC7C,gBAAInG,UAAS,YAAY,OAAO;AAChC,gBAAIA,UAAS,KAAK,QAAQ,wBAAwB;AAChD,qBAAO,KAAK;AAAA,YACd,OAAO;AACL,kBAAI,WAAW,YAAY,SAAS;AACpC,kBAAI,OAAO,WAAW,MAAM;AAC5B,uBAAS,IAAI,KAAK,UAAU;AAC5B,kBAAI,QAAQ,YAAY,OAAO,EAAE,YAAY,IAAI,MAAM,GAAG,CAAC,CAAC;AAC5D,qBAAO,SAAS,SAAS,GAAG,SAAS,GAAG,OAAO,KAAK,WAAW;AAC/D,qBAAO,KAAK;AACZ,qBAAO,QAAQ,OAAO;AAAA,YACxB;AAAA,UACF,OAAO;AACL,mBAAO,KAAK;AAAA,UACd;AAAA,QACF;AAAA,QACA,UAAU,WAAY;AACpB,eAAK,aAAa;AAAA,QACpB;AAAA,MACF,GAAG;AAAA,QACD;AAAA;AAAA,MACF,CAAC;AAGD,UAAI,YAAY,SAAS,OAAO;AAAA,QAC9B,SAAS;AAAA,QACT,aAAa,IAAI,MAAM,GAAG,CAAC;AAAA,QAC3B,QAAQ;AAAA,UACN,WAAW;AAAA,UACX,YAAY;AAAA,QACd;AAAA,QACA,gBAAgB;AAAA,UACd,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,UACT,UAAU;AAAA,UACV,aAAa;AAAA,QACf;AAAA,QACA,SAAS;AAAA,UACP,OAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AACpB,eAAK,OAAO;AAAA,QACd;AAAA,QACA,QAAQ,WAAY;AAClB,cAAI,QAAQ,KAAK;AACjB,cAAI,OAAO,KAAK;AAChB,cAAI,UAAU,KAAK,kBAAkB,KAAK;AAC1C,cAAI,UAAU;AACd,cAAI,SAAS;AACX,uBAAW,QAAQ;AACnB,oBAAQ,QAAQ,OAAO,EAAE,YAAY,KAAK,WAAW,KAAK;AAAA,UAC5D,OAAO;AACL,uBAAW,KAAK,gBAAgB,KAAK;AACrC,oBAAQ;AAAA,UACV;AACA,cAAI,CAAC,UAAU;AACb,mBAAO;AAAA,UACT;AACA,cAAI,SAASN,GAAE,gBAAgB,EAAE,UAAU,SAAS,GAAG,SAAS,CAAC,EAAE,OAAO,KAAK;AAC/E,cAAI,MAAM,KAAK;AACf,cAAI4B,SAAQ,IAAI;AAChB,cAAIA,QAAO;AACT,qBAAS,OAAO,MAAMA,MAAK;AAAA,UAC7B;AACA,eAAK,IAAI,UAAU,QAAQ;AAAA,YACzB,UAAU;AAAA,UACZ,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,KAAK,MAAM,GAAG,GAAG;AACnB;AAAA,UACF;AACA,cAAI,gBAAgB;AACpB,cAAI,eAAe;AACnB,cAAI,cAAc,KAAK;AACvB,sBAAY,MAAM,WAAW,kBAAkB;AAAA,YAC7C,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AACD,cAAI,YAAY,IAAI,eAAe,GAAG;AACpC,wBAAY,mBAAmB,KAAK,aAAa;AACjD,iBAAK,uBAAuB;AAC5B,wBAAY,MAAM,iBAAiB;AAAA,UACrC;AACA,eAAK,MAAM;AACX,eAAK,GAAG,MAAM,gBAAgB;AAAA,QAChC;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,kBAAkB,eAAe,GAAG;AACxC,cAAI,SAAS,KAAK,MAAM,WAAW,gBAAgB,SAAS,gBAAgB,OAAO;AACnF,eAAK,YAAY,YAAY,iBAAiB,OAAO,GAAG,OAAO,CAAC;AAAA,QAClE;AAAA,QACA,aAAa,SAAU,KAAK;AAC1B,eAAK,yBAAyB;AAC9B,cAAI,cAAc,KAAK;AACvB,cAAI,QAAQ,YAAY;AACxB,cAAI,kBAAkB,eAAe,GAAG;AACxC,cAAI,SAAS,MAAM,WAAW,gBAAgB,SAAS,gBAAgB,OAAO;AAC9E,sBAAY,UAAU,iBAAiB,OAAO,GAAG,OAAO,CAAC;AACzD,gBAAM,eAAe;AACrB,eAAK,KAAK;AACV,eAAK,GAAG,MAAM,gBAAgB;AAC9B,sBAAY,MAAM,UAAU,kBAAkB;AAAA,YAC5C,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AACD,UAAI,kBAAkB,UAAU,OAAO;AAAA,QACrC,MAAM;AAAA,QACN,OAAO;AAAA,QACP,eAAe;AAAA,QACf,YAAY;AAAA,UACV,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,gBAAgB;AAAA,UAChB,UAAU;AAAA,UACV,SAAS;AAAA,QACX;AAAA,MACF,CAAC;AACD,UAAI,kBAAkB,UAAU,OAAO;AAAA,QACrC,MAAM;AAAA,QACN,OAAO;AAAA,QACP,eAAe;AAAA,QACf,YAAY;AAAA,UACV,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,gBAAgB;AAAA,UAChB,UAAU;AAAA,UACV,SAAS;AAAA,QACX;AAAA,MACF,CAAC;AACD,UAAI,WAAW,SAAS,OAAO;AAAA,QAC7B,MAAM;AAAA,QACN,SAAS;AAAA,QACT,SAAS;AAAA,UACP,SAAS;AAAA,UACT,kBAAkB;AAAA,QACpB;AAAA,QACA,YAAY;AAAA,UACV,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,gBAAgB;AAAA,UAChB,oBAAoB;AAAA,UACpB,kBAAkB;AAAA,QACpB;AAAA,QACA,UAAU,WAAY;AACpB,eAAK,OAAO;AAAA,QACd;AAAA,QACA,QAAQ,WAAY;AAClB,cAAI,MAAM;AACV,cAAI,OAAO,IAAI;AACf,cAAI,UAAU,IAAI;AAClB,cAAI,MAAM,IAAI;AACd,cAAI,mBAAmB,QAAQ;AAC/B,cAAI,SAAS,QAAQ;AACrB,cAAI,UAAU,eAAe,QAAQ,OAAO;AAC5C,cAAIJ,QAAO,YAAY,MAAM,gBAAgB,EAAE,cAAc;AAAA,YAC3D,GAAG,CAAC,QAAQ;AAAA,YACZ,GAAG,CAAC,QAAQ;AAAA,YACZ,OAAO,QAAQ,OAAO,QAAQ;AAAA,YAC9B,QAAQ,QAAQ,MAAM,QAAQ;AAAA,UAChC,CAAC;AACD,cAAI,QAAQ,KAAK;AACjB,cAAI,MAAM,UAAU,GAAG;AACrB,gBAAI,QAAQ,MAAM,MAAM;AACxB,gBAAI,OAAO;AACT,kBAAI,QAAQ;AACV,oBAAI,SAAS,MAAM,QAAQ,EAAE,OAAO;AACpC,oBAAI,OAAO,OAAO,OAAO,GAAG,OAAO,GAAG;AAAA,kBACpC,UAAU;AAAA,gBACZ,CAAC;AAAA,cACH,OAAO;AACL,gBAAAA,QAAOA,MAAK,KAAK,KAAK;AAAA,cACxB;AAAA,YACF;AAAA,UACF;AACA,cAAI,KAAKA,MAAK,OAAO,CAAC;AACtB,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AACD,UAAI,SAAS,SAAS,OAAO;AAAA,QAC3B,SAAS;AAAA,QACT,MAAM;AAAA,QACN,UAAU,CAAC;AAAA,UACT,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,UAAU;AAAA,UACZ;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,kBAAkB;AAAA,YAClB,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,oBAAoB;AAAA,YACpB,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,QACF,CAAC;AAAA,QACD,QAAQ;AAAA,UACN,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,QAAQ;AAAA,QACV;AAAA,QACA,gBAAgB;AAAA,UACd,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,UACT,UAAU;AAAA,UACV,aAAa;AAAA,QACf;AAAA,QACA,SAAS;AAAA,UACP,MAAM;AAAA,UACN,QAAQ;AAAA,UACR,OAAO;AAAA,UACP,aAAa;AAAA,UACb,wBAAwB;AAAA,YACtB,gBAAgB;AAAA,YAChB,UAAU;AAAA,YACV,QAAQ;AAAA,YACR,KAAK;AAAA,UACP;AAAA,UACA,yBAAyB;AAAA,YACvB,gBAAgB;AAAA,YAChB,UAAU;AAAA,YACV,QAAQ;AAAA,YACR,KAAK;AAAA,UACP;AAAA,UACA,aAAa;AAAA,UACb,YAAY;AAAA,UACZ,cAAc;AAAA,UACd,mBAAmB;AAAA,QACrB;AAAA,QACA,UAAU,WAAY;AACpB,eAAK,eAAe;AACpB,eAAK,WAAW,KAAK;AACrB,eAAK,OAAO;AAAA,QACd;AAAA,QACA,QAAQ,WAAY;AAClB,cAAI,OAAO,KAAK;AAChB,cAAI,cAAc,KAAK;AACvB,cAAI,OAAO,YAAY,WAAW,IAAI;AACtC,cAAI,MAAM;AACR,iBAAK,aAAa;AAClB,iBAAK,WAAW;AAChB,iBAAK,GAAG,MAAM,UAAU;AAAA,UAC1B,OAAO;AACL,iBAAK,GAAG,MAAM,UAAU;AAAA,UAC1B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,WAAY;AACxB,cAAI,aAAa,KAAK;AACtB,cAAI,CAAC,YAAY;AACf;AAAA,UACF;AACA,cAAI,aAAa,WAAW;AAC5B,cAAI,CAAC,YAAY;AACf;AAAA,UACF;AACA,cAAI,cAAc,KAAK;AACvB,cAAI,OAAO,KAAK;AAChB,cAAI,WAAW,YAAY,aAAa,IAAI;AAC5C,cAAI,UAAU,KAAK;AACnB,cAAI,eAAe,YAAY,MAAM,KAAK,CAAC,MAAM,QAAQ,CAAC;AAC1D,cAAI,kBAAkB,eAAe,SAAS,IAAI,MAAM,SAAS,IAAI;AACrE,cAAI,QAAQ,OAAO;AACjB,+BAAmB,YAAY,QAAQ,QAAQ;AAAA,UACjD;AACA,qBAAW,aAAa,aAAa,eAAe;AACpD,cAAI,mBAAmB,eAAe,QAAQ,yBAAyB,QAAQ;AAC/E,mBAAS,YAAY,kBAAkB;AACrC,uBAAW,aAAa,UAAU,iBAAiB,QAAQ,CAAC;AAAA,UAC9D;AAAA,QACF;AAAA,QACA,YAAY,WAAY;AACtB,cAAI,aAAa,KAAK;AACtB,cAAI,CAAC,YAAY;AACf;AAAA,UACF;AACA,cAAI,WAAW,WAAW;AAC1B,cAAI,CAAC,UAAU;AACb;AAAA,UACF;AACA,cAAI,cAAc,KAAK;AACvB,cAAI,OAAO,KAAK;AAChB,cAAI,OAAO,YAAY,WAAW,IAAI;AACtC,cAAI,QAAQ,KAAK;AACjB,cAAI,SAAS,YAAY,aAAa,IAAI;AAC1C,cAAI,UAAU,KAAK,QAAQ;AAC3B,cAAI,CAAC,SAAS,OAAO,GAAG;AACtB,sBAAU;AAAA,UACZ;AACA,cAAIA,OAAM,OAAOgB;AACjB,cAAI,KAAK,iBAAiB,MAAM,GAAG;AACjC,YAAAhB,QAAO,KAAK,YAAY,MAAM;AAC9B,oBAAQ;AACR,YAAAgB,UAAShB,MAAK,OAAO;AAAA,UACvB,OAAO;AACL,YAAAA,QAAO,KAAK,qBAAqB,MAAM;AACvC,oBAAQ,MAAM,MAAM;AACpB,YAAAgB,UAAShB,MAAK,OAAO;AACrB,gBAAI,OAAO;AACT,cAAAgB,QAAO,OAAO,MAAM,QAAQ,EAAE,OAAO,GAAG,CAAC,KAAK;AAAA,YAChD;AAAA,UAEF;AACA,UAAAhB,MAAK,QAAQ,OAAO;AACpB,mBAAS,aAAa,KAAK,CAACA,MAAK,QAAQ,CAAC;AAC1C,mBAAS,aAAa,KAAK,CAACA,MAAK,SAAS,CAAC;AAC3C,mBAAS,aAAa,SAASA,MAAK,KAAK;AACzC,mBAAS,aAAa,UAAUA,MAAK,MAAM;AAC3C,mBAAS,aAAa,aAAa,eAAegB,QAAO,IAAI,MAAMA,QAAO,IAAI,cAAc,QAAQ,GAAG;AAAA,QACzG;AAAA,QACA,YAAY,SAAU,SAAS;AAC7B,cAAI,aAAa,KAAK;AACtB,cAAI,CAAC,YAAY;AACf;AAAA,UACF;AACA,cAAI,WAAW,WAAW;AAC1B,cAAI,CAAC,UAAU;AACb;AAAA,UACF;AACA,mBAAS,MAAM,UAAU,UAAU,KAAK;AAAA,QAC1C;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,KAAK,MAAM,GAAG,GAAG;AACnB;AAAA,UACF;AACA,cAAI,gBAAgB;AACpB,cAAI,eAAe;AACnB,eAAK,MAAM,iBAAiB;AAC5B,eAAK,uBAAuB;AAC5B,eAAK,MAAM;AACX,eAAK,WAAW,KAAK,QAAQ,YAAY;AACzC,eAAK,YAAY,MAAM,WAAW,eAAe;AAAA,YAC/C,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AAAA,QACH;AAAA,QACA,aAAa,SAAUgF,SAAQ;AAC7B,cAAI,OAAO,KAAK;AAChB,cAAI,eAAe,KAAK,YAAY;AACpC,cAAIA,SAAQ;AACV,yBAAa,KAAK,CAAC,MAAM,QAAQ,GAAGA,SAAQ;AAAA,cAC1C,SAAS;AAAA,cACT,IAAI;AAAA,cACJ,MAAM,KAAK;AAAA,YACb,CAAC;AAAA,UACH,OAAO;AACL,yBAAa,WAAW,CAAC,MAAM,QAAQ,GAAG;AAAA,cACxC,IAAI;AAAA,cACJ,MAAM,KAAK;AAAA,YACb,CAAC;AAAA,UACH;AAAA,QACF;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,cAAc,KAAK;AACvB,cAAI,OAAO,KAAK;AAChB,cAAI,OAAO,YAAY,WAAW,IAAI;AACtC,cAAI,QAAQ,KAAK;AACjB,cAAI,SAAS,YAAY,aAAa,IAAI;AAC1C,cAAI,kBAAkB,eAAe,GAAG;AACxC,cAAI,SAAS,KAAK,MAAM,mBAAmB,gBAAgB,SAAS,gBAAgB,OAAO;AAC3F,cAAI,SAAS,KAAK,QAAQ;AAC1B,cAAI,OAAO,WAAW,YAAY;AAChC,qBAAS,OAAO,KAAK,aAAa,QAAQ,MAAM,QAAQ,MAAM,aAAa,IAAI;AAC/E,qBAAS,IAAI,MAAM,MAAM;AAAA,UAC3B;AACA,cAAI,KAAK,QAAQ,cAAc;AAC7B,gBAAI,KAAK,iBAAiB,MAAM,GAAG;AAEjC,kBAAI,oBAAoB,KAAK,gBAAgB,MAAM;AACnD,kBAAI,mBAAmB;AACrB,yBAAS;AAAA,cACX;AAAA,YACF,OAAO;AAEL,kBAAIhG,QAAO,KAAK,qBAAqB,MAAM;AAC3C,kBAAI,QAAQ,MAAM,MAAM;AACxB,kBAAI,SAAS,MAAM,QAAQ,EAAE,OAAO;AACpC,kBAAI,gBAAgB,OAAO,MAAM,EAAE,OAAO,QAAQ,KAAK;AACvD,kBAAI,CAACA,MAAK,cAAc,aAAa,GAAG;AACtC,yBAASA,MAAK,oBAAoB,aAAa,EAAE,OAAO,QAAQ,CAAC,KAAK;AAAA,cACxE;AAAA,YACF;AAAA,UACF;AACA,cAAIgG;AACJ,cAAI,WAAW,KAAK,QAAQ;AAC5B,cAAI,OAAO,aAAa,YAAY;AAClC,YAAAA,UAAS,SAAS,KAAK,aAAa,QAAQ,MAAM,QAAQ,MAAM,WAAW;AAAA,UAC7E;AACA,eAAK,YAAYA,OAAM;AACvB,eAAK,OAAO;AAAA,QACd;AAAA,QACA,aAAa,SAAU,KAAK;AAC1B,cAAI,kBAAkB,eAAe,GAAG;AACxC,eAAK,MAAM,eAAe;AAC1B,eAAK,yBAAyB;AAC9B,eAAK,KAAK;AACV,eAAK,WAAW,KAAK;AACrB,cAAI,WAAW,KAAK;AACpB,cAAI,KAAK,QAAQ,mBAAmB;AAClC,qBAAS,8BAA8B;AAAA,cACrC,IAAI;AAAA,cACJ,MAAM,KAAK;AAAA,YACb,CAAC;AAAA,UACH;AACA,mBAAS,gBAAgB,eAAe;AACxC,mBAAS,MAAM,UAAU,eAAe;AAAA,YACtC,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AAAA,QACH;AAAA,QACA,mBAAmB,WAAY;AAC7B,cAAIA,UAAS,KAAK,QAAQ;AAC1B,cAAIA,YAAW,OAAO;AACpB;AAAA,UACF;AACA,cAAIA,YAAW,MAAM;AACnB,YAAAA,UAAS;AAAA,UACX;AACA,eAAK,YAAY,UAAUA,OAAM,CAAC;AAClC,eAAK,OAAO;AAAA,QACd;AAAA,MACF,CAAC;AACD,UAAI,eAAe,OAAO,OAAO;AAAA,QAC/B,MAAM;AAAA,QACN,MAAM;AAAA,MACR,CAAC;AACD,UAAI,eAAe,OAAO,OAAO;AAAA,QAC/B,MAAM;AAAA,QACN,MAAM;AAAA,MACR,CAAC;AACD,UAAI,SAAS,SAAS,OAAO;AAAA,QAC3B,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,aAAa;AAAA,UACb,cAAc;AAAA,QAChB;AAAA,QACA,SAAS;AAAA,UACP,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA,UAAU,WAAY;AACpB,eAAK,eAAe,KAAK,QAAQ,MAAM;AACvC,eAAK,OAAO;AAAA,QACd;AAAA,QACA,QAAQ,WAAY;AAClB,eAAK,SAAS;AACd,iBAAO;AAAA,QACT;AAAA,QACA,UAAU,WAAY;AACpB,cAAI,MAAM;AACV,cAAI,MAAM,IAAI;AACd,cAAI,UAAU,KAAK,cAAc,GAAG;AAAA,YAClC,UAAU;AAAA,UACZ,CAAC;AAAA,QACH;AAAA,QACA,eAAe,SAAS,gBAAgB;AACtC,iBAAO,KAAK,YAAY,MAAM,OAAO,IAAI,KAAK,cAAc,IAAI,KAAK,iBAAiB;AAAA,QACxF;AAAA,QACA,kBAAkB,SAAS,mBAAmB;AAC5C,cAAI,MAAM;AACV,cAAI,OAAO,IAAI;AACf,cAAI,UAAU,IAAI;AAClB,cAAI,IAAI,QAAQ;AAChB,cAAI,MAAM,OAAQ,KAAI;AACtB,cAAI,IAAI,QAAQ;AAChB,cAAI,MAAM,OAAQ,KAAI;AACtB,cAAI,SAAS,QAAQ;AACrB,cAAI,WAAW,OAAQ,UAAS,CAAC;AACjC,cAAI,mBAAmB,QAAQ;AAC/B,cAAI,SAAS,QAAQ;AACrB,cAAI5F,SAAQ,QAAQ;AACpB,cAAIJ,QAAO,YAAY,MAAM,gBAAgB;AAC7C,cAAI,QAAQ,KAAK,MAAM,MAAM;AAC7B,cAAI,CAAC,QAAQ;AACX,YAAAA,QAAOA,MAAK,KAAK,KAAK;AAAA,UACxB;AACA,cAAI,UAAU,OAAO;AACrB,cAAI,YAAY,OAAQ,WAAU;AAClC,cAAI,UAAU,OAAO;AACrB,cAAI,YAAY,OAAQ,WAAU;AAClC,cAAI,aAAa,CAAC,GAAG;AACnB,gBAAI,WAAW,CAAC,IAAI,MAAMA,MAAK;AAAA,UACjC,WAAW,gBAAgB,CAAC,GAAG;AAC7B,gBAAI,OAAO,kBAAkB,GAAGA,KAAI,CAAC;AAAA,UACvC;AACA,cAAI,aAAa,CAAC,GAAG;AACnB,gBAAI,WAAW,CAAC,IAAI,MAAMA,MAAK;AAAA,UACjC,WAAW,gBAAgB,CAAC,GAAG;AAC7B,gBAAI,OAAO,kBAAkB,GAAGA,KAAI,CAAC;AAAA,UACvC;AACA,cAAI,SAASxB,GAAE,gBAAgB,EAAE,UAAUwB,MAAK,IAAIA,MAAK,QAAQ,GAAGA,MAAK,IAAIA,MAAK,SAAS,CAAC;AAC5F,cAAI,QAAQ;AACV,qBAAS,OAAO,OAAO,KAAK;AAAA,UAC9B;AACA,mBAAS,OAAO,UAAU,IAAI,UAAUA,MAAK,QAAQ,GAAG,IAAI,UAAUA,MAAK,SAAS,CAAC;AACrF,cAAII,QAAO;AACT,qBAAS,OAAO,MAAMA,MAAK;AAAA,UAC7B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,SAAS,gBAAgB;AACtC,cAAI,MAAM;AACV,cAAI,OAAO,IAAI;AACf,cAAI,UAAU,IAAI;AAClB,cAAI,SAAS,QAAQ;AACrB,cAAI,WAAW,OAAQ,UAAS;AAChC,cAAI,WAAW,QAAQ;AACvB,cAAI,aAAa,OAAQ,YAAW;AACpC,cAAI,SAAS,QAAQ;AACrB,cAAIA,SAAQ,QAAQ;AACpB,cAAI,SAAS,UAAU;AACvB,cAAI,aAAa,QAAQ,GAAG;AAC1B,sBAAU,KAAK,kBAAkB,WAAW,QAAQ,IAAI,GAAG;AAAA,UAC7D,OAAO;AACL,sBAAU,KAAK,mBAAmB,QAAQ;AAAA,UAC5C;AACA,cAAI,SAAS;AACX,uBAAW,QAAQ;AACnB,oBAAQ,QAAQ,OAAO,EAAE,YAAY,IAAI,MAAM,GAAG,CAAC,CAAC,KAAK;AAAA,UAC3D,OAAO;AACL,uBAAW,KAAK,cAAc,EAAE;AAChC,oBAAQ;AAAA,UACV;AACA,cAAI,SAAS5B,GAAE,gBAAgB,EAAE,UAAU,SAAS,GAAG,SAAS,CAAC,EAAE,OAAO,KAAK,EAAE,UAAU,GAAG,MAAM;AACpG,cAAI,CAAC,QAAQ;AACX,qBAAS,OAAO,OAAO,CAAC,KAAK;AAAA,UAC/B;AACA,cAAI4B,QAAO;AACT,qBAAS,OAAO,MAAMA,MAAK;AAAA,UAC7B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,KAAK,MAAM,GAAG,GAAG;AACnB;AAAA,UACF;AACA,cAAI,gBAAgB;AACpB,cAAI,eAAe;AACnB,cAAI,WAAW,KAAK,QAAQ;AAC5B,cAAI,OAAO,aAAa,YAAY;AAClC,qBAAS,KAAK,KAAK,aAAa,KAAK,KAAK,aAAa,IAAI;AAAA,UAC7D;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,SAAS,OAAO,OAAO;AAAA,QACzB,UAAU,CAAC;AAAA,UACT,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,UAAU;AAAA,UACZ;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,kBAAkB;AAAA,UACpB;AAAA,QACF,CAAC;AAAA,QACD,SAAS;AAAA,UACP,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,QAAQ,SAAU,KAAK,MAAM,MAAM;AACjC,iBAAK,MAAM,OAAO;AAAA,cAChB,IAAI;AAAA,cACJ,MAAM,KAAK;AAAA,YACb,CAAC;AAAA,UACH;AAAA,QACF;AAAA,MACF,CAAC;AACD,UAAI,UAAU,OAAO,OAAO;AAAA,QAC1B,MAAM;AAAA,QACN,gBAAgB;AAAA,UACd,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,UACT,UAAU;AAAA,UACV,aAAa;AAAA,QACf;AAAA,QACA,UAAU,CAAC;AAAA,UACT,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,UAAU;AAAA,UACZ;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,kBAAkB;AAAA,UACpB;AAAA,QACF,CAAC;AAAA,QACD,SAAS;AAAA,UACP,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,QAAQ,SAAU,MAAM;AACtB,mBAAO,KAAK;AAAA,UACd;AAAA,UACA,QAAQ,SAAU,KAAK,OAAO,MAAM;AAClC,mBAAO,KAAK,UAAU,GAAG;AAAA,UAC3B;AAAA,QACF;AAAA,QACA,eAAe,WAAY;AACzB,cAAIqF;AACJ,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,cAAc,IAAI;AACtB,cAAI,SAAS,QAAQ;AACrB,cAAI;AACJ,kBAAQ,OAAO,QAAQ;AAAA,YACrB,KAAK,YACH;AACE,2BAAa,OAAO,KAAK,MAAM,aAAa,IAAI;AAChD;AAAA,YACF;AAAA,YACF,KAAK,UACH;AACE,cAAAA,UAAS,YAAY,eAAe,MAAM,GAAG,aAAaA,QAAO,CAAC;AAClE;AAAA,YACF;AAAA,YACF,SACE;AACE,2BAAa;AACb;AAAA,YACF;AAAA,UACJ;AACA,cAAI,CAAC,YAAY;AACf,yBAAa,YAAY;AAAA,UAC3B;AACA,cAAI,sBAAsB,YAAY;AACpC,mBAAO;AAAA,UACT;AACA,gBAAM,IAAI,MAAM,uCAAuC;AAAA,QACzD;AAAA,QACA,WAAW,SAAU,KAAK;AACxB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,cAAc,IAAI;AACtB,cAAI,kBAAkB,eAAe,GAAG;AACxC,cAAI,QAAQ,MAAM,mBAAmB,gBAAgB,SAAS,gBAAgB,OAAO;AACrF,cAAI,IAAI,MAAM;AACd,cAAI,IAAI,MAAM;AACd,sBAAY,cAAc,iBAAiB,KAAK,cAAc,GAAG,GAAG,CAAC;AACrE,gBAAM,iBAAiB;AACvB,eAAK,uBAAuB,MAAM,gBAAgB,IAAI;AACtD,eAAK,MAAM;AAAA,QACb;AAAA,QACA,MAAM,SAAU,KAAK;AACnB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,cAAc,IAAI;AACtB,cAAI,kBAAkB,eAAe,GAAG;AACxC,cAAI,QAAQ,MAAM,WAAW,gBAAgB,SAAS,gBAAgB,OAAO;AAC7E,cAAI,IAAI,MAAM;AACd,cAAI,IAAI,MAAM;AACd,sBAAY,SAAS,iBAAiB,GAAG,CAAC;AAAA,QAC5C;AAAA,QACA,SAAS,SAAU,KAAK;AACtB,cAAI,MAAM;AACV,cAAI,QAAQ,IAAI;AAChB,cAAI,cAAc,IAAI;AACtB,cAAI,kBAAkB,eAAe,GAAG;AACxC,cAAI,QAAQ,MAAM,WAAW,gBAAgB,SAAS,gBAAgB,OAAO;AAC7E,cAAI,IAAI,MAAM;AACd,cAAI,IAAI,MAAM;AACd,sBAAY,YAAY,iBAAiB,GAAG,CAAC;AAC7C,eAAK,yBAAyB;AAC9B,gBAAM,eAAe;AACrB,eAAK,KAAK;AACV,sBAAY,gBAAgB,eAAe;AAAA,QAC7C;AAAA,MACF,CAAC;AACD,UAAI,eAAe,QAAQ,OAAO;AAAA,QAChC,MAAM;AAAA,QACN,eAAe,CAAC;AAAA,UACd,SAAS;AAAA,UACT,YAAY;AAAA,YACV,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,UAAU;AAAA,UACZ;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,YAAY;AAAA,YACV,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,gBAAgB;AAAA,UAClB;AAAA,QACF,CAAC;AAAA,QACD,UAAU,SAAS,WAAW;AAC5B,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,gBAAgB,IAAI;AACxB,iBAAO,CAAC;AAAA,YACN,SAAS;AAAA,YACT,UAAU;AAAA,YACV,YAAY;AAAA,cACV,QAAQ;AAAA,cACR,UAAU;AAAA,cACV,gBAAgB,QAAQ,cAAc;AAAA,cACtC,UAAU;AAAA,YACZ;AAAA,UACF,GAAG;AAAA,YACD,SAAS;AAAA,YACT,UAAU;AAAA,YACV,YAAY;AAAA,cACV,kBAAkB;AAAA,cAClB,WAAW;AAAA,YACb;AAAA,YACA,UAAU,QAAQ,UAAU;AAAA,UAC9B,CAAC;AAAA,QACH;AAAA,QACA,QAAQ,OAAO,OAAO;AAAA,UACpB,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,YAAY;AAAA,QACd,GAAG,QAAQ,UAAU,MAAM;AAAA,QAC3B,UAAU,WAAY;AACpB,eAAK,eAAe;AACpB,eAAK,OAAO;AAAA,QACd;AAAA,QACA,WAAW;AAAA,QACX,QAAQ,SAAS,SAAS;AACxB,cAAI,MAAM;AACV,cAAI,aAAa,IAAI;AACrB,eAAK,YAAY,KAAK,aAAa;AACnC,kBAAQ,UAAU,OAAO,MAAM,MAAM,SAAS;AAC9C,qBAAW,MAAM,aAAa,KAAK,KAAK,UAAU,UAAU,CAAC;AAAA,QAC/D;AAAA,QACA,UAAU,SAAS,WAAW;AAC5B,cAAI,MAAM;AACV,cAAI,KAAK,IAAI;AACb,cAAI,aAAa,IAAI;AACrB,qBAAW,OAAO,aAAa,aAAajH,GAAE,wBAAwB,KAAK,gBAAgB,CAAC,CAAC;AAC7F,aAAG,aAAa,aAAaA,GAAE,wBAAwB,KAAK,eAAe,CAAC,CAAC;AAAA,QAC/E;AAAA,QACA,iBAAiB,SAAS,kBAAkB;AAC1C,cAAI,MAAM;AACV,cAAI,UAAU,IAAI;AAClB,cAAI,YAAY,IAAI;AACpB,cAAI,SAAS,QAAQ;AACrB,cAAI,WAAW,OAAQ,UAAS;AAChC,cAAI,WAAW,QAAQ;AACvB,cAAI,aAAa,OAAQ,YAAW;AACpC,cAAI,SAAS,QAAQ;AACrB,cAAI4B,SAAQ,QAAQ;AACpB,cAAI,SAAS,UAAU;AACvB,cAAI,aAAa,QAAQ,GAAG;AAC1B,sBAAU,UAAU,eAAe,WAAW,QAAQ,IAAI,GAAG;AAAA,UAC/D,OAAO;AACL,sBAAU,UAAU,gBAAgB,QAAQ;AAAA,UAC9C;AACA,cAAI,SAAS;AACX,uBAAW,QAAQ;AACnB,oBAAQ,QAAQ,OAAO,EAAE,YAAY,IAAI,MAAM,GAAG,CAAC,CAAC,KAAK;AAAA,UAC3D,OAAO;AACL,uBAAW,UAAU;AACrB,oBAAQ;AAAA,UACV;AACA,cAAI,SAAS5B,GAAE,gBAAgB,EAAE,UAAU,SAAS,GAAG,SAAS,CAAC,EAAE,OAAO,KAAK,EAAE,UAAU,GAAG,MAAM;AACpG,cAAI,CAAC,QAAQ;AACX,qBAAS,OAAO,OAAO,CAAC,KAAK;AAAA,UAC/B;AACA,cAAI4B,QAAO;AACT,qBAAS,OAAO,MAAMA,MAAK;AAAA,UAC7B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,SAAS,eAAe;AACpC,iBAAO,KAAK,YAAY,cAAc;AAAA,QACxC;AAAA,QACA,gBAAgB,SAAS,iBAAiB;AACxC,iBAAO5B,GAAE,gBAAgB;AAAA,QAC3B;AAAA,QACA,wBAAwB,SAAS,uBAAuB,KAAK;AAC3D,cAAI,MAAM;AACV,cAAI,cAAc,IAAI;AACtB,cAAI,YAAY,IAAI;AACpB,cAAI,aAAa,YAAY,MAAM,mBAAmB,IAAI,SAAS,IAAI,OAAO;AAC9E,cAAI,aAAaA,GAAE,eAAe,YAAY,KAAK,eAAe,EAAE,QAAQ,CAAC;AAC7E,iBAAO,UAAU,mBAAmB,UAAU;AAAA,QAChD;AAAA,QACA,eAAe,SAAS,gBAAgB;AAGtC,iBAAO,EAAE,MAAM,KAAK,MAAM,IAAI,QAAQ;AAAA,QACxC;AAAA,QACA,YAAY,SAAS,aAAa;AAChC,eAAK,WAAW,OAAO,MAAM,UAAU;AAAA,QACzC;AAAA,QACA,YAAY,SAAS,aAAa;AAChC,eAAK,WAAW,OAAO,MAAM,UAAU;AAAA,QACzC;AAAA,QACA,aAAa,SAAS,YAAY,KAAK;AACrC,cAAI,MAAM;AACV,cAAI,YAAY,IAAI;AACpB,cAAI,CAAC,WAAW;AACd;AAAA,UACF;AACA,cAAI,QAAQ;AACZ,cAAI,UAAU,MAAM;AACpB,kBAAQ,WAAW,KAAK,uBAAuB,GAAG;AAClD,eAAK,SAAS;AAAA,QAChB;AAAA,QACA,cAAc,SAAS,eAAe;AACpC,cAAI,CAAC,KAAK,cAAc,GAAG;AACzB;AAAA,UACF;AACA,eAAK,WAAW;AAAA,QAClB;AAAA,QACA,cAAc,SAAS,eAAe;AACpC,eAAK,WAAW;AAAA,QAClB;AAAA,MACF,CAAC;AACD,UAAI,UAAU;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,UAAI,UAAU,SAAS,OAAO;AAAA,QAC5B,SAAS;AAAA,QACT,UAAU,CAAC;AAAA,UACT,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,UAAU;AAAA,YACV,gBAAgB;AAAA,YAChB,UAAU;AAAA,YACV,QAAQ;AAAA,YACR,KAAK;AAAA,UACP;AAAA,QACF,GAAG;AAAA,UACD,SAAS;AAAA,UACT,UAAU;AAAA,UACV,YAAY;AAAA,YACV,kBAAkB;AAAA,YAClB,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,oBAAoB;AAAA,YACpB,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,QACF,CAAC;AAAA,QACD,QAAQ;AAAA,UACN,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,QAAQ;AAAA,QACV;AAAA,QACA,gBAAgB;AAAA,UACd,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA,UACT,UAAU;AAAA,UACV,aAAa;AAAA,QACf;AAAA,QACA,SAAS;AAAA,UACP,kBAAkB;AAAA,UAClB,UAAU;AAAA,UACV,SAAS;AAAA,UACT,OAAO;AAAA,QACT;AAAA,QACA,aAAa,WAAY;AAAA,QAEzB;AAAA,QACA,aAAa,WAAY;AAAA,QAEzB;AAAA,QACA,eAAe,WAAY;AAAA,QAE3B;AAAA,QACA,UAAU,WAAY;AACpB,eAAK,eAAe;AACpB,eAAK,aAAa,KAAK;AACvB,eAAK,OAAO;AAAA,QACd;AAAA,QACA,QAAQ,WAAY;AAClB,cAAI,MAAM,KAAK;AACf,cAAI,SAAS,IAAI;AACjB,cAAI,SAAS,IAAI;AACjB,cAAI,QAAQ;AACV,iBAAK,aAAa,MAAM;AAAA,UAC1B,OAAO;AACL,kBAAM,IAAI,MAAM,+CAA+C;AAAA,UACjE;AACA,cAAI,QAAQ;AACV,iBAAK,aAAa,MAAM;AAAA,UAC1B;AACA,iBAAO;AAAA,QACT;AAAA,QACA,cAAc,SAAU,YAAY;AAClC,cAAI,MAAM;AACV,cAAI,cAAc,IAAI;AACtB,cAAI,UAAU,IAAI;AAClB,cAAI,QAAQ,YAAY;AACxB,cAAI,cAAc,KAAK,YAAY,aAAa,IAAI;AACpD,cAAI,cAAc,MAAM,6BAA6B,WAAW;AAChE,cAAI,mBAAmB,QAAQ;AAC/B,cAAI4B,SAAQ,QAAQ;AACpB,cAAI,kBAAkB,eAAe,YAAY,IAAI,MAAM,YAAY,IAAI;AAC3E,cAAIA,QAAO;AACT,+BAAmB,YAAYA,SAAQ;AAAA,UACzC;AACA,qBAAW,aAAa,aAAa,eAAe;AACpD,cAAI,kBAAkB;AACpB,qBAAS,YAAY,kBAAkB;AACrC,yBAAW,aAAa,UAAU,iBAAiB,QAAQ,CAAC;AAAA,YAC9D;AAAA,UACF;AAAA,QACF;AAAA,QACA,cAAc,SAAU,YAAY;AAClC,cAAI,MAAM;AACV,cAAI,cAAc,IAAI;AACtB,cAAI,UAAU,IAAI;AAClB,cAAI,QAAQ,KAAK;AACjB,cAAI,WAAW,MAAM;AACrB,cAAI,CAAC,UAAU;AACb,iBAAK,aAAa,KAAK;AACvB;AAAA,UACF;AACA,cAAI,QAAQ,YAAY,eAAe,QAAQ;AAC/C,cAAI,SAAS,MAAM,CAAC;AACpB,cAAI,CAAC,QAAQ;AACX,kBAAM,IAAI,MAAM,4BAA4B;AAAA,UAC9C;AACA,cAAI,UAAU,QAAQ;AACtB,cAAI,CAAC,SAAS,OAAO,GAAG;AACtB,sBAAU;AAAA,UACZ;AACA,cAAIJ,QAAO,YAAY,qBAAqB,MAAM;AAClD,cAAI,QAAQ,YAAY;AACxB,cAAI,QAAQ,MAAM,MAAM;AACxB,cAAIgB,UAAShB,MAAK,OAAO;AACzB,cAAI,OAAO;AACT,YAAAgB,QAAO,OAAO,MAAM,QAAQ,EAAE,OAAO,GAAG,CAAC,KAAK;AAAA,UAChD;AACA,UAAAhB,MAAK,QAAQ,OAAO;AACpB,qBAAW,aAAa,KAAK,CAACA,MAAK,QAAQ,CAAC;AAC5C,qBAAW,aAAa,KAAK,CAACA,MAAK,SAAS,CAAC;AAC7C,qBAAW,aAAa,SAASA,MAAK,KAAK;AAC3C,qBAAW,aAAa,UAAUA,MAAK,MAAM;AAC7C,qBAAW,aAAa,aAAa,eAAegB,QAAO,IAAI,MAAMA,QAAO,IAAI,cAAc,QAAQ,GAAG;AAAA,QAC3G;AAAA,QACA,cAAc,SAAU,SAAS;AAC/B,cAAI,MAAM,KAAK;AACf,cAAI,SAAS,IAAI;AACjB,cAAI,CAAC,QAAQ;AACX;AAAA,UACF;AACA,iBAAO,MAAM,UAAU,UAAU,KAAK;AAAA,QACxC;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,MAAM;AACV,cAAI,cAAc,IAAI;AACtB,cAAI,QAAQ,IAAI;AAChB,cAAI,KAAK,MAAM,GAAG,GAAG;AACnB;AAAA,UACF;AACA,cAAI,gBAAgB;AACpB,cAAI,eAAe;AACnB,gBAAM,iBAAiB;AACvB,eAAK,uBAAuB;AAC5B,eAAK,MAAM;AACX,eAAK,aAAa,IAAI;AACtB,sBAAY,MAAM,WAAW,gBAAgB;AAAA,YAC3C,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AAAA,QACH;AAAA,QACA,eAAe,SAAU,KAAK;AAC5B,cAAI,MAAM;AACV,cAAI,cAAc,IAAI;AACtB,cAAI,QAAQ,IAAI;AAChB,cAAI,QAAQ,YAAY;AACxB,cAAI,QAAQ,eAAe,GAAG;AAC9B,cAAI,UAAU,MAAM;AACpB,cAAI,UAAU,MAAM;AACpB,cAAI,SAAS,MAAM,mBAAmB,SAAS,OAAO;AACtD,cAAI,iBAAiB,MAAM,6BAA6B,MAAM;AAC9D,eAAK,YAAY,aAAa,gBAAgB,IAAI;AAClD,eAAK,OAAO;AAAA,QACd;AAAA,QACA,aAAa,SAAU,MAAM;AAC3B,cAAI,MAAM;AACV,cAAI,cAAc,IAAI;AACtB,cAAI,QAAQ,IAAI;AAChB,gBAAM,eAAe;AACrB,eAAK,yBAAyB;AAC9B,eAAK,KAAK;AACV,eAAK,aAAa,KAAK;AACvB,sBAAY,MAAM,UAAU,gBAAgB;AAAA,YAC1C,IAAI;AAAA,YACJ,MAAM,KAAK;AAAA,UACb,CAAC;AAAA,QACH;AAAA,QACA,mBAAmB,WAAY;AAC7B,cAAI,MAAM;AACV,cAAI,cAAc,IAAI;AACtB,eAAK,cAAc,aAAa,IAAI;AACpC,eAAK,OAAO;AAAA,QACd;AAAA,MACF,CAAC;AACD,UAAI,iBAAiB,aAAa,OAAO;AAAA,QACvC,cAAc,SAAS,eAAe;AACpC,cAAI,MAAM;AACV,cAAI,OAAO,IAAI;AACf,cAAI,UAAU,IAAI;AAClB,cAAI,mBAAmB,QAAQ;AAC/B,cAAI,YAAY,QAAQ;AACxB,cAAI,cAAc,OAAQ,aAAY;AACtC,cAAI,OAAO,cAAc,YAAY;AACnC,wBAAY,UAAU,KAAK,MAAM,IAAI;AAAA,UACvC;AACA,cAAI,gBAAgB,SAAS,GAAG;AAC9B,gBAAIhB,QAAO,YAAY,MAAM,gBAAgB;AAC7C,wBAAY,kBAAkB,WAAWA,KAAI;AAAA,UAC/C;AACA,iBAAO,IAAI,KAAKxB,GAAE,kBAAkB,SAAS,CAAC;AAAA,QAChD;AAAA,QACA,gBAAgB,SAAS,iBAAiB;AACxC,cAAI,MAAM;AACV,cAAI,OAAO,IAAI;AACf,cAAI,UAAU,IAAI;AAClB,cAAI,mBAAmB,QAAQ;AAC/B,cAAI,SAAS,QAAQ;AACrB,cAAIwB,QAAO,YAAY,MAAM,gBAAgB;AAC7C,cAAI,QAAQ,KAAK,MAAM,MAAM;AAC7B,cAAI,CAAC,QAAQ;AACX,YAAAA,QAAOA,MAAK,KAAK,KAAK;AAAA,UACxB;AACA,cAAI,SAASxB,GAAE,gBAAgB,EAAE,UAAUwB,MAAK,IAAIA,MAAK,QAAQ,GAAGA,MAAK,IAAIA,MAAK,SAAS,CAAC;AAC5F,cAAI,QAAQ;AACV,qBAAS,OAAO,OAAO,KAAK;AAAA,UAC9B;AACA,mBAAS,OAAO,UAAU,CAACA,MAAK,QAAQ,GAAG,CAACA,MAAK,SAAS,CAAC;AAC3D,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AACD,UAAI,UAAU;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,cAAc;AAAA,QACd;AAAA,MACF;AACA,UAAI,UAAU;AACd,UAAIkH,cAAa1I;AACjB,UAAI,SAAS;AAAA,QACX;AAAA,QACA;AAAA,MACF;AACA,UAAI,WAAW,SAAU,OAAO,KAAK;AACnC,cAAM,OAAO,CAAC;AACd,eAAO,OAAO,YAAY,OAAO,GAAG;AAGpC,aAAK,UAAU,eAAe;AAAA,MAChC;AACA,UAAI,WAAW;AAAA,QACb;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAGA,UAAI,WAAW,CAAC;AAChB,UAAI,KAAK,CAAC;AACV,MAAAJ,SAAQ,IAAII;AACZ,MAAAJ,SAAQ,aAAa8I;AACrB,MAAA9I,SAAQ,UAAU;AAClB,MAAAA,SAAQ,SAAS;AACjB,MAAAA,SAAQ,mBAAmB;AAC3B,MAAAA,SAAQ,uBAAuB;AAC/B,MAAAA,SAAQ,aAAa;AACrB,MAAAA,SAAQ,MAAM;AACd,MAAAA,SAAQ,eAAe;AACvB,MAAAA,SAAQ,MAAM;AACd,MAAAA,SAAQ,SAAS;AACjB,MAAAA,SAAQ,IAAIoD;AACZ,MAAApD,SAAQ,eAAe;AACvB,MAAAA,SAAQ,SAAS;AACjB,MAAAA,SAAQ,cAAc;AACtB,MAAAA,SAAQ,YAAY;AACpB,MAAAA,SAAQ,MAAM;AACd,MAAAA,SAAQ,UAAU;AAClB,MAAAA,SAAQ,WAAW;AACnB,MAAAA,SAAQ,SAAS;AACjB,MAAAA,SAAQ,KAAK;AACb,MAAAA,SAAQ,OAAO;AACf,MAAAA,SAAQ,UAAU;AAClB,aAAO,eAAeA,UAAS,cAAc;AAAA,QAC3C,OAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AACD,QAAI,OAAO,UAAU,aAAa;AAC5B,UAAI,MAAM,GACZ,IAAI,MAAM,GACV,aAAa,MAAM;AAAA,IACvB;AAHM;AACF;AACA;AAAA;AAAA;",
  "names": ["global", "exports", "fn", "module", "propertyIsEnumerable", "V", "getOwnPropertyDescriptor", "defineProperty", "getInternalState", "toString", "index", "length", "result", "ownKeys", "keys", "activeXDocument", "includes", "isArray", "self", "find", "test", "TO_STRING_TAG", "values", "point", "ENTRIES", "findIndex", "isNaN", "isFinite", "startsWith", "bbox", "property", "min", "max", "scale", "f", "left", "top", "right", "bottom", "intersection", "line", "determinant", "rect", "ellipse", "diff", "center", "abs", "path", "curve", "data", "sqrt", "cos", "sin", "g", "PI", "atan2", "id", "ns", "attributes", "parent", "clone", "className", "svg", "get", "cache", "math", "_13", "_23", "a", "b", "normalize", "pcom", "i", "props", "othValue", "set", "array", "value", "key", "cacheHas", "collection", "Stack", "has", "ListCache", "MapCache", "Hash", "SetCache", "defaultsDeep", "wait", "last", "validUnitExp", "replacement", "word", "words", "html", "xhr", "callback", "attrs", "align", "d", "el", "stroke", "filter", "defaults", "Cell", "document", "node", "ports", "round", "router", "index$1", "absolute", "model", "exists", "links", "ref", "Listener", "cb", "assign", "views", "uniqueId", "list", "item", "bearing", "boundary", "anchor", "line$1", "labelMarkup", "anchors", "connectionPoints", "connectionLength", "vToken", "normal", "magnet", "view", "paper", "position", "topLeft", "bottomRight", "deltaY", "evt", "opacity", "radians", "Vectorizer"]
}
