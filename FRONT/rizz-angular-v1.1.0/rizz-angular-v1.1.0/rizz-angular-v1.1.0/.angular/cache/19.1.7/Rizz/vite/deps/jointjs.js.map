{
  "version": 3,
  "sources": ["../../../../../../node_modules/jointjs/src/layout/index.mjs", "../../../../../../node_modules/jointjs/src/layout/ports/port.mjs", "../../../../../../node_modules/jointjs/src/dia/attributes/calc.mjs", "../../../../../../node_modules/jointjs/src/g/index.mjs", "../../../../../../node_modules/jointjs/src/g/geometry.helpers.mjs", "../../../../../../node_modules/jointjs/src/g/line.bearing.mjs", "../../../../../../node_modules/jointjs/src/g/line.squaredLength.mjs", "../../../../../../node_modules/jointjs/src/g/line.length.mjs", "../../../../../../node_modules/jointjs/src/g/types.mjs", "../../../../../../node_modules/jointjs/src/g/point.mjs", "../../../../../../node_modules/jointjs/src/g/line.mjs", "../../../../../../node_modules/jointjs/src/g/ellipse.mjs", "../../../../../../node_modules/jointjs/src/g/rect.mjs", "../../../../../../node_modules/jointjs/src/g/points.mjs", "../../../../../../node_modules/jointjs/src/g/polyline.mjs", "../../../../../../node_modules/jointjs/src/g/curve.mjs", "../../../../../../node_modules/jointjs/src/g/extend.mjs", "../../../../../../node_modules/jointjs/src/g/path.mjs", "../../../../../../node_modules/jointjs/src/g/bezier.mjs", "../../../../../../node_modules/jointjs/src/g/polygon.mjs", "../../../../../../node_modules/jointjs/src/g/intersection.mjs", "../../../../../../node_modules/jointjs/src/util/index.mjs", "../../../../../../node_modules/jointjs/src/dia/Cell.mjs", "../../../../../../node_modules/jointjs/src/util/util.mjs", "../../../../../../node_modules/jointjs/src/V/index.mjs", "../../../../../../node_modules/jointjs/src/config/index.mjs", "../../../../../../node_modules/jointjs/src/util/utilHelpers.mjs", "../../../../../../node_modules/jointjs/src/util/cloneCells.mjs", "../../../../../../node_modules/jointjs/src/dia/attributes/props.mjs", "../../../../../../node_modules/jointjs/src/dia/attributes/index.mjs", "../../../../../../node_modules/jointjs/src/util/wrappers.mjs", "../../../../../../node_modules/jointjs/src/util/svgTagTemplate.mjs", "../../../../../../node_modules/jointjs/src/util/getRectPoint.mjs", "../../../../../../node_modules/jointjs/src/layout/ports/portLabel.mjs", "../../../../../../node_modules/jointjs/src/dia/index.mjs", "../../../../../../node_modules/jointjs/src/dia/Graph.mjs", "../../../../../../node_modules/jointjs/src/dia/Link.mjs", "../../../../../../node_modules/jointjs/src/dia/ports.mjs", "../../../../../../node_modules/jointjs/src/dia/Element.mjs", "../../../../../../node_modules/jointjs/src/mvc/index.mjs", "../../../../../../node_modules/jointjs/src/mvc/View.mjs", "../../../../../../node_modules/jointjs/src/mvc/Listener.mjs", "../../../../../../node_modules/jointjs/src/dia/PaperLayer.mjs", "../../../../../../node_modules/jointjs/src/dia/CellView.mjs", "../../../../../../node_modules/jointjs/src/dia/HighlighterView.mjs", "../../../../../../node_modules/jointjs/src/dia/ElementView.mjs", "../../../../../../node_modules/jointjs/src/routers/index.mjs", "../../../../../../node_modules/jointjs/src/routers/normal.mjs", "../../../../../../node_modules/jointjs/src/routers/oneSide.mjs", "../../../../../../node_modules/jointjs/src/routers/orthogonal.mjs", "../../../../../../node_modules/jointjs/src/routers/manhattan.mjs", "../../../../../../node_modules/jointjs/src/routers/metro.mjs", "../../../../../../node_modules/jointjs/src/routers/rightAngle.mjs", "../../../../../../node_modules/jointjs/src/connectors/index.mjs", "../../../../../../node_modules/jointjs/src/connectors/straight.mjs", "../../../../../../node_modules/jointjs/src/connectors/jumpover.mjs", "../../../../../../node_modules/jointjs/src/connectors/normal.mjs", "../../../../../../node_modules/jointjs/src/connectors/rounded.mjs", "../../../../../../node_modules/jointjs/src/connectors/smooth.mjs", "../../../../../../node_modules/jointjs/src/connectors/curve.mjs", "../../../../../../node_modules/jointjs/src/dia/LinkView.mjs", "../../../../../../node_modules/jointjs/src/highlighters/index.mjs", "../../../../../../node_modules/jointjs/src/highlighters/stroke.mjs", "../../../../../../node_modules/jointjs/src/highlighters/mask.mjs", "../../../../../../node_modules/jointjs/src/highlighters/opacity.mjs", "../../../../../../node_modules/jointjs/src/highlighters/addClass.mjs", "../../../../../../node_modules/jointjs/src/highlighters/list.mjs", "../../../../../../node_modules/jointjs/src/linkAnchors/index.mjs", "../../../../../../node_modules/jointjs/src/connectionPoints/index.mjs", "../../../../../../node_modules/jointjs/src/anchors/index.mjs", "../../../../../../node_modules/jointjs/src/dia/Paper.mjs", "../../../../../../node_modules/jointjs/src/dia/ToolView.mjs", "../../../../../../node_modules/jointjs/src/dia/ToolsView.mjs", "../../../../../../node_modules/jointjs/src/layout/DirectedGraph/DirectedGraph.mjs", "../../../../../../node_modules/jointjs/src/shapes/index.mjs", "../../../../../../node_modules/jointjs/src/shapes/basic.mjs", "../../../../../../node_modules/jointjs/src/env/index.mjs", "../../../../../../node_modules/jointjs/src/shapes/standard.mjs", "../../../../../../node_modules/jointjs/src/shapes/devs.mjs", "../../../../../../node_modules/jointjs/src/shapes/logic.mjs", "../../../../../../node_modules/jointjs/src/shapes/chess.mjs", "../../../../../../node_modules/jointjs/src/shapes/erd.mjs", "../../../../../../node_modules/jointjs/src/shapes/fsa.mjs", "../../../../../../node_modules/jointjs/src/shapes/org.mjs", "../../../../../../node_modules/jointjs/src/shapes/pn.mjs", "../../../../../../node_modules/jointjs/src/shapes/uml.mjs", "../../../../../../node_modules/jointjs/src/connectionStrategies/index.mjs", "../../../../../../node_modules/jointjs/src/linkTools/index.mjs", "../../../../../../node_modules/jointjs/src/linkTools/Vertices.mjs", "../../../../../../node_modules/jointjs/src/linkTools/helpers.mjs", "../../../../../../node_modules/jointjs/src/linkTools/Segments.mjs", "../../../../../../node_modules/jointjs/src/linkTools/Arrowhead.mjs", "../../../../../../node_modules/jointjs/src/linkTools/Boundary.mjs", "../../../../../../node_modules/jointjs/src/linkTools/Anchor.mjs", "../../../../../../node_modules/jointjs/src/linkTools/Button.mjs", "../../../../../../node_modules/jointjs/src/linkTools/Connect.mjs", "../../../../../../node_modules/jointjs/src/linkTools/HoverConnect.mjs", "../../../../../../node_modules/jointjs/src/elementTools/index.mjs", "../../../../../../node_modules/jointjs/src/elementTools/Control.mjs", "../../../../../../node_modules/jointjs/src/elementTools/HoverConnect.mjs", "../../../../../../node_modules/jointjs/dist/version.mjs", "../../../../../../node_modules/jointjs/src/core.mjs"],
  "sourcesContent": ["import * as Port from './ports/port.mjs';\nimport * as PortLabel from './ports/portLabel.mjs';\nexport * from './DirectedGraph/DirectedGraph.mjs';\nexport { Port, PortLabel };", "import { evalCalcAttribute, isCalcAttribute } from '../../dia/attributes/calc.mjs';\nimport * as g from '../../g/index.mjs';\nimport * as util from '../../util/index.mjs';\nfunction portTransformAttrs(point, angle, opt) {\n  var trans = point.toJSON();\n  trans.angle = angle || 0;\n  return util.defaults({}, opt, trans);\n}\nfunction lineLayout(ports, p1, p2, elBBox) {\n  return ports.map(function (port, index, ports) {\n    var p = this.pointAt((index + 0.5) / ports.length);\n    // `dx`,`dy` per port offset option\n    if (port.dx || port.dy) {\n      p.offset(port.dx || 0, port.dy || 0);\n    }\n    return portTransformAttrs(p.round(), 0, argTransform(elBBox, port));\n  }, g.line(p1, p2));\n}\nfunction ellipseLayout(ports, elBBox, startAngle, stepFn) {\n  var center = elBBox.center();\n  var ratio = elBBox.width / elBBox.height;\n  var p1 = elBBox.topMiddle();\n  var ellipse = g.Ellipse.fromRect(elBBox);\n  return ports.map(function (port, index, ports) {\n    var angle = startAngle + stepFn(index, ports.length);\n    var p2 = p1.clone().rotate(center, -angle).scale(ratio, 1, center);\n    var theta = port.compensateRotation ? -ellipse.tangentTheta(p2) : 0;\n\n    // `dx`,`dy` per port offset option\n    if (port.dx || port.dy) {\n      p2.offset(port.dx || 0, port.dy || 0);\n    }\n\n    // `dr` delta radius option\n    if (port.dr) {\n      p2.move(center, port.dr);\n    }\n    return portTransformAttrs(p2.round(), theta, argTransform(elBBox, port));\n  });\n}\nfunction argTransform(bbox, args) {\n  let {\n    x,\n    y,\n    angle\n  } = args;\n  if (util.isPercentage(x)) {\n    x = parseFloat(x) / 100 * bbox.width;\n  } else if (isCalcAttribute(x)) {\n    x = Number(evalCalcAttribute(x, bbox));\n  }\n  if (util.isPercentage(y)) {\n    y = parseFloat(y) / 100 * bbox.height;\n  } else if (isCalcAttribute(y)) {\n    y = Number(evalCalcAttribute(y, bbox));\n  }\n  return {\n    x,\n    y,\n    angle\n  };\n}\n\n// Creates a point stored in arguments\nfunction argPoint(bbox, args) {\n  const {\n    x,\n    y\n  } = argTransform(bbox, args);\n  return new g.Point(x || 0, y || 0);\n}\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const absolute = function (ports, elBBox) {\n  return ports.map(port => {\n    const transformation = argPoint(elBBox, port).round().toJSON();\n    transformation.angle = port.angle || 0;\n    return transformation;\n  });\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const fn = function (ports, elBBox, opt) {\n  return opt.fn(ports, elBBox, opt);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const line = function (ports, elBBox, opt) {\n  var start = argPoint(elBBox, opt.start || elBBox.origin());\n  var end = argPoint(elBBox, opt.end || elBBox.corner());\n  return lineLayout(ports, start, end, elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const left = function (ports, elBBox, opt) {\n  return lineLayout(ports, elBBox.origin(), elBBox.bottomLeft(), elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const right = function (ports, elBBox, opt) {\n  return lineLayout(ports, elBBox.topRight(), elBBox.corner(), elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const top = function (ports, elBBox, opt) {\n  return lineLayout(ports, elBBox.origin(), elBBox.topRight(), elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const bottom = function (ports, elBBox, opt) {\n  return lineLayout(ports, elBBox.bottomLeft(), elBBox.corner(), elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt Group options\n * @returns {Array<g.Point>}\n */\nexport const ellipseSpread = function (ports, elBBox, opt) {\n  var startAngle = opt.startAngle || 0;\n  var stepAngle = opt.step || 360 / ports.length;\n  return ellipseLayout(ports, elBBox, startAngle, function (index) {\n    return index * stepAngle;\n  });\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt Group options\n * @returns {Array<g.Point>}\n */\nexport const ellipse = function (ports, elBBox, opt) {\n  var startAngle = opt.startAngle || 0;\n  var stepAngle = opt.step || 20;\n  return ellipseLayout(ports, elBBox, startAngle, function (index, count) {\n    return (index + 0.5 - count / 2) * stepAngle;\n  });\n};", "const props = {\n  x: 'x',\n  y: 'y',\n  width: 'w',\n  height: 'h',\n  minimum: 's',\n  maximum: 'l',\n  diagonal: 'd'\n};\nconst propsList = Object.keys(props).map(key => props[key]).join('');\nconst numberPattern = '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?';\nconst findSpacesRegex = /\\s/g;\nconst parseExpressionRegExp = new RegExp(`^(${numberPattern}\\\\*)?([${propsList}])(/${numberPattern})?([-+]{1,2}${numberPattern})?$`, 'g');\nfunction throwInvalid(expression) {\n  throw new Error(`Invalid calc() expression: ${expression}`);\n}\nexport function evalCalcExpression(expression, bbox) {\n  const match = parseExpressionRegExp.exec(expression.replace(findSpacesRegex, ''));\n  if (!match) throwInvalid(expression);\n  parseExpressionRegExp.lastIndex = 0; // reset regex results for the next run\n  const [, multiply, property, divide, add] = match;\n  const {\n    x,\n    y,\n    width,\n    height\n  } = bbox;\n  let value = 0;\n  switch (property) {\n    case props.width:\n      {\n        value = width;\n        break;\n      }\n    case props.height:\n      {\n        value = height;\n        break;\n      }\n    case props.x:\n      {\n        value = x;\n        break;\n      }\n    case props.y:\n      {\n        value = y;\n        break;\n      }\n    case props.minimum:\n      {\n        value = Math.min(height, width);\n        break;\n      }\n    case props.maximum:\n      {\n        value = Math.max(height, width);\n        break;\n      }\n    case props.diagonal:\n      {\n        value = Math.sqrt(height * height + width * width);\n        break;\n      }\n  }\n  if (multiply) {\n    // e.g \"2*\"\n    value *= parseFloat(multiply);\n  }\n  if (divide) {\n    // e.g \"/2\"\n    value /= parseFloat(divide.slice(1));\n  }\n  if (add) {\n    value += evalAddExpression(add);\n  }\n  return value;\n}\nfunction evalAddExpression(addExpression) {\n  if (!addExpression) return 0;\n  const [sign] = addExpression;\n  switch (sign) {\n    case '+':\n      {\n        return parseFloat(addExpression.substr(1));\n      }\n    case '-':\n      {\n        return -parseFloat(addExpression.substr(1));\n      }\n  }\n  return parseFloat(addExpression);\n}\nexport function isCalcAttribute(value) {\n  return typeof value === 'string' && value.includes('calc');\n}\nconst calcStart = 'calc(';\nconst calcStartOffset = calcStart.length;\nexport function evalCalcAttribute(attributeValue, refBBox) {\n  let value = attributeValue;\n  let startSearchIndex = 0;\n  do {\n    let calcIndex = value.indexOf(calcStart, startSearchIndex);\n    if (calcIndex === -1) return value;\n    let calcEndIndex = calcIndex + calcStartOffset;\n    let brackets = 1;\n    findClosingBracket: do {\n      switch (value[calcEndIndex]) {\n        case '(':\n          {\n            brackets++;\n            break;\n          }\n        case ')':\n          {\n            brackets--;\n            if (brackets === 0) break findClosingBracket;\n            break;\n          }\n        case undefined:\n          {\n            // Could not find the closing bracket.\n            throwInvalid(value);\n          }\n      }\n      calcEndIndex++;\n    } while (true);\n    // Get the calc() expression without nested calcs (recursion)\n    let expression = value.slice(calcIndex + calcStartOffset, calcEndIndex);\n    if (isCalcAttribute(expression)) {\n      expression = evalCalcAttribute(expression, refBBox);\n    }\n    // Eval the calc() expression without nested calcs.\n    const calcValue = String(evalCalcExpression(expression, refBBox));\n    // Replace the calc() expression and continue search\n    value = value.slice(0, calcIndex) + calcValue + value.slice(calcEndIndex + 1);\n    startSearchIndex = calcIndex + calcValue.length;\n  } while (true);\n}", "// Geometry library.\n// -----------------\n\nexport * from './geometry.helpers.mjs';\nexport * from './bezier.mjs';\nexport * from './curve.mjs';\nexport * from './ellipse.mjs';\nexport * from './line.mjs';\nexport * from './path.mjs';\nexport * from './point.mjs';\nexport * from './polyline.mjs';\nexport * from './polygon.mjs';\nexport * from './rect.mjs';\nexport * from './types.mjs';\nimport * as _intersection from './intersection.mjs';\nexport const intersection = _intersection;", "// Declare shorthands to the most used math functions.\nconst {\n  round,\n  floor,\n  PI\n} = Math;\nexport const scale = {\n  // Return the `value` from the `domain` interval scaled to the `range` interval.\n  linear: function (domain, range, value) {\n    var domainSpan = domain[1] - domain[0];\n    var rangeSpan = range[1] - range[0];\n    return (value - domain[0]) / domainSpan * rangeSpan + range[0] || 0;\n  }\n};\nexport const normalizeAngle = function (angle) {\n  return angle % 360 + (angle < 0 ? 360 : 0);\n};\nexport const snapToGrid = function (value, gridSize) {\n  return gridSize * round(value / gridSize);\n};\nexport const toDeg = function (rad) {\n  return 180 * rad / PI % 360;\n};\nexport const toRad = function (deg, over360) {\n  over360 = over360 || false;\n  deg = over360 ? deg : deg % 360;\n  return deg * PI / 180;\n};\n\n// Return a random integer from the interval [min,max], inclusive.\nexport const random = function (min, max) {\n  if (max === undefined) {\n    // use first argument as max, min is 0\n    max = min === undefined ? 1 : min;\n    min = 0;\n  } else if (max < min) {\n    // switch max and min\n    const temp = min;\n    min = max;\n    max = temp;\n  }\n  return floor(Math.random() * (max - min + 1) + min);\n};", "// @return the bearing (cardinal direction) of the line. For example N, W, or SE.\n// @returns {String} One of the following bearings : NE, E, SE, S, SW, W, NW, N.\nimport { toDeg, toRad } from './geometry.helpers.mjs';\nconst {\n  cos,\n  sin,\n  atan2\n} = Math;\nexport const bearing = function (p, q) {\n  var lat1 = toRad(p.y);\n  var lat2 = toRad(q.y);\n  var lon1 = p.x;\n  var lon2 = q.x;\n  var dLon = toRad(lon2 - lon1);\n  var y = sin(dLon) * cos(lat2);\n  var x = cos(lat1) * sin(lat2) - sin(lat1) * cos(lat2) * cos(dLon);\n  var brng = toDeg(atan2(y, x));\n  var bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n  var index = brng - 22.5;\n  if (index < 0) index += 360;\n  index = parseInt(index / 45);\n  return bearings[index];\n};", "// @return {integer} length without sqrt\n// @note for applications where the exact length is not necessary (e.g. compare only)\nexport const squaredLength = function (start, end) {\n  var x0 = start.x;\n  var y0 = start.y;\n  var x1 = end.x;\n  var y1 = end.y;\n  return (x0 -= x1) * x0 + (y0 -= y1) * y0;\n};", "import { squaredLength } from './line.squaredLength.mjs';\nexport const length = function (start, end) {\n  return Math.sqrt(squaredLength(start, end));\n};", "export const types = {\n  Point: 1,\n  Line: 2,\n  Ellipse: 3,\n  Rect: 4,\n  Polyline: 5,\n  Polygon: 6,\n  Curve: 7,\n  Path: 8\n};", "/*\n    Point is the most basic object consisting of x/y coordinate.\n\n    Possible instantiations are:\n    * `Point(10, 20)`\n    * `new Point(10, 20)`\n    * `Point('10 20')`\n    * `Point(Point(10, 20))`\n*/\nimport { normalizeAngle, random, snapToGrid, toDeg, toRad } from './geometry.helpers.mjs';\nimport { bearing } from './line.bearing.mjs';\nimport { squaredLength } from './line.squaredLength.mjs';\nimport { length } from './line.length.mjs';\nimport { types } from './types.mjs';\nconst {\n  abs,\n  cos,\n  sin,\n  sqrt,\n  min,\n  max,\n  atan2,\n  round,\n  pow,\n  PI\n} = Math;\nexport const Point = function (x, y) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y);\n  }\n  if (typeof x === 'string') {\n    var xy = x.split(x.indexOf('@') === -1 ? ' ' : '@');\n    x = parseFloat(xy[0]);\n    y = parseFloat(xy[1]);\n  } else if (Object(x) === x) {\n    y = x.y;\n    x = x.x;\n  }\n  this.x = x === undefined ? 0 : x;\n  this.y = y === undefined ? 0 : y;\n};\n\n// Alternative constructor, from polar coordinates.\n// @param {number} Distance.\n// @param {number} Angle in radians.\n// @param {point} [optional] Origin.\nPoint.fromPolar = function (distance, angle, origin) {\n  origin = new Point(origin);\n  var x = abs(distance * cos(angle));\n  var y = abs(distance * sin(angle));\n  var deg = normalizeAngle(toDeg(angle));\n  if (deg < 90) {\n    y = -y;\n  } else if (deg < 180) {\n    x = -x;\n    y = -y;\n  } else if (deg < 270) {\n    x = -x;\n  }\n  return new Point(origin.x + x, origin.y + y);\n};\n\n// Create a point with random coordinates that fall into the range `[x1, x2]` and `[y1, y2]`.\nPoint.random = function (x1, x2, y1, y2) {\n  return new Point(random(x1, x2), random(y1, y2));\n};\nPoint.prototype = {\n  type: types.Point,\n  chooseClosest: function (points) {\n    var n = points.length;\n    if (n === 1) return new Point(points[0]);\n    var closest = null;\n    var minSqrDistance = Infinity;\n    for (var i = 0; i < n; i++) {\n      var p = new Point(points[i]);\n      var sqrDistance = this.squaredDistance(p);\n      if (sqrDistance < minSqrDistance) {\n        closest = p;\n        minSqrDistance = sqrDistance;\n      }\n    }\n    return closest;\n  },\n  // If point lies outside rectangle `r`, return the nearest point on the boundary of rect `r`,\n  // otherwise return point itself.\n  // (see Squeak Smalltalk, Point>>adhereTo:)\n  adhereToRect: function (r) {\n    if (r.containsPoint(this)) {\n      return this;\n    }\n    this.x = min(max(this.x, r.x), r.x + r.width);\n    this.y = min(max(this.y, r.y), r.y + r.height);\n    return this;\n  },\n  // Compute the angle between vector from me to p1 and the vector from me to p2.\n  // ordering of points p1 and p2 is important!\n  // theta function's angle convention:\n  // returns angles between 0 and 180 when the angle is counterclockwise\n  // returns angles between 180 and 360 to convert clockwise angles into counterclockwise ones\n  // returns NaN if any of the points p1, p2 is coincident with this point\n  angleBetween: function (p1, p2) {\n    var angleBetween = this.equals(p1) || this.equals(p2) ? NaN : this.theta(p2) - this.theta(p1);\n    if (angleBetween < 0) {\n      angleBetween += 360; // correction to keep angleBetween between 0 and 360\n    }\n    return angleBetween;\n  },\n  // Return the bearing between me and the given point.\n  bearing: function (point) {\n    return bearing(this, point);\n  },\n  // Returns change in angle from my previous position (-dx, -dy) to my new position\n  // relative to ref point.\n  changeInAngle: function (dx, dy, ref) {\n    // Revert the translation and measure the change in angle around x-axis.\n    return this.clone().offset(-dx, -dy).theta(ref) - this.theta(ref);\n  },\n  clone: function () {\n    return new Point(this);\n  },\n  // Returns the cross product of this point relative to two other points\n  // this point is the common point\n  // point p1 lies on the first vector, point p2 lies on the second vector\n  // watch out for the ordering of points p1 and p2!\n  // positive result indicates a clockwise (\"right\") turn from first to second vector\n  // negative result indicates a counterclockwise (\"left\") turn from first to second vector\n  // zero indicates that the first and second vector are collinear\n  // note that the above directions are reversed from the usual answer on the Internet\n  // that is because we are in a left-handed coord system (because the y-axis points downward)\n  cross: function (p1, p2) {\n    return p1 && p2 ? (p2.x - this.x) * (p1.y - this.y) - (p2.y - this.y) * (p1.x - this.x) : NaN;\n  },\n  difference: function (dx, dy) {\n    if (Object(dx) === dx) {\n      dy = dx.y;\n      dx = dx.x;\n    }\n    return new Point(this.x - (dx || 0), this.y - (dy || 0));\n  },\n  // Returns distance between me and point `p`.\n  distance: function (p) {\n    return length(this, p);\n  },\n  // Returns the dot product of this point with given other point\n  dot: function (p) {\n    return p ? this.x * p.x + this.y * p.y : NaN;\n  },\n  equals: function (p) {\n    return !!p && this.x === p.x && this.y === p.y;\n  },\n  // Linear interpolation\n  lerp: function (p, t) {\n    var x = this.x;\n    var y = this.y;\n    return new Point((1 - t) * x + t * p.x, (1 - t) * y + t * p.y);\n  },\n  magnitude: function () {\n    return sqrt(this.x * this.x + this.y * this.y) || 0.01;\n  },\n  // Returns a manhattan (taxi-cab) distance between me and point `p`.\n  manhattanDistance: function (p) {\n    return abs(p.x - this.x) + abs(p.y - this.y);\n  },\n  // Move point on line starting from ref ending at me by\n  // distance distance.\n  move: function (ref, distance) {\n    var theta = toRad(new Point(ref).theta(this));\n    var offset = this.offset(cos(theta) * distance, -sin(theta) * distance);\n    return offset;\n  },\n  // Scales x and y such that the distance between the point and the origin (0,0) is equal to the given length.\n  normalize: function (length) {\n    var scale = (length || 1) / this.magnitude();\n    return this.scale(scale, scale);\n  },\n  // Offset me by the specified amount.\n  offset: function (dx, dy) {\n    if (Object(dx) === dx) {\n      dy = dx.y;\n      dx = dx.x;\n    }\n    this.x += dx || 0;\n    this.y += dy || 0;\n    return this;\n  },\n  // Returns a point that is the reflection of me with\n  // the center of inversion in ref point.\n  reflection: function (ref) {\n    return new Point(ref).move(this, this.distance(ref));\n  },\n  // Rotate point by angle around origin.\n  // Angle is flipped because this is a left-handed coord system (y-axis points downward).\n  rotate: function (origin, angle) {\n    if (angle === 0) return this;\n    origin = origin || new Point(0, 0);\n    angle = toRad(normalizeAngle(-angle));\n    var cosAngle = cos(angle);\n    var sinAngle = sin(angle);\n    var x = cosAngle * (this.x - origin.x) - sinAngle * (this.y - origin.y) + origin.x;\n    var y = sinAngle * (this.x - origin.x) + cosAngle * (this.y - origin.y) + origin.y;\n    this.x = x;\n    this.y = y;\n    return this;\n  },\n  round: function (precision) {\n    let f = 1; // case 0\n    if (precision) {\n      switch (precision) {\n        case 1:\n          f = 10;\n          break;\n        case 2:\n          f = 100;\n          break;\n        case 3:\n          f = 1000;\n          break;\n        default:\n          f = pow(10, precision);\n          break;\n      }\n    }\n    this.x = round(this.x * f) / f;\n    this.y = round(this.y * f) / f;\n    return this;\n  },\n  // Scale point with origin.\n  scale: function (sx, sy, origin) {\n    origin = origin && new Point(origin) || new Point(0, 0);\n    this.x = origin.x + sx * (this.x - origin.x);\n    this.y = origin.y + sy * (this.y - origin.y);\n    return this;\n  },\n  snapToGrid: function (gx, gy) {\n    this.x = snapToGrid(this.x, gx);\n    this.y = snapToGrid(this.y, gy || gx);\n    return this;\n  },\n  squaredDistance: function (p) {\n    return squaredLength(this, p);\n  },\n  // Compute the angle between me and `p` and the x axis.\n  // (cartesian-to-polar coordinates conversion)\n  // Return theta angle in degrees.\n  theta: function (p) {\n    p = new Point(p);\n\n    // Invert the y-axis.\n    var y = -(p.y - this.y);\n    var x = p.x - this.x;\n    var rad = atan2(y, x); // defined for all 0 corner cases\n\n    // Correction for III. and IV. quadrant.\n    if (rad < 0) {\n      rad = 2 * PI + rad;\n    }\n    return 180 * rad / PI;\n  },\n  toJSON: function () {\n    return {\n      x: this.x,\n      y: this.y\n    };\n  },\n  // Converts rectangular to polar coordinates.\n  // An origin can be specified, otherwise it's 0@0.\n  toPolar: function (o) {\n    o = o && new Point(o) || new Point(0, 0);\n    var x = this.x;\n    var y = this.y;\n    this.x = sqrt((x - o.x) * (x - o.x) + (y - o.y) * (y - o.y)); // r\n    this.y = toRad(o.theta(new Point(x, y)));\n    return this;\n  },\n  toString: function () {\n    return this.x + '@' + this.y;\n  },\n  serialize: function () {\n    return this.x + ',' + this.y;\n  },\n  update: function (x, y) {\n    if (Object(x) === x) {\n      y = x.y;\n      x = x.x;\n    }\n    this.x = x || 0;\n    this.y = y || 0;\n    return this;\n  },\n  // Compute the angle between the vector from 0,0 to me and the vector from 0,0 to p.\n  // Returns NaN if p is at 0,0.\n  vectorAngle: function (p) {\n    var zero = new Point(0, 0);\n    return zero.angleBetween(this, p);\n  }\n};\nPoint.prototype.translate = Point.prototype.offset;\n\n// For backwards compatibility:\nexport const point = Point;", "import { Point } from './point.mjs';\nimport { Rect } from './rect.mjs';\nimport { bearing } from './line.bearing.mjs';\nimport { squaredLength } from './line.squaredLength.mjs';\nimport { length } from './line.length.mjs';\nimport { types } from './types.mjs';\nconst {\n  max,\n  min\n} = Math;\nexport const Line = function (p1, p2) {\n  if (!(this instanceof Line)) {\n    return new Line(p1, p2);\n  }\n  if (p1 instanceof Line) {\n    return new Line(p1.start, p1.end);\n  }\n  this.start = new Point(p1);\n  this.end = new Point(p2);\n};\nLine.prototype = {\n  type: types.Line,\n  // @returns the angle of incline of the line.\n  angle: function () {\n    var horizontalPoint = new Point(this.start.x + 1, this.start.y);\n    return this.start.angleBetween(this.end, horizontalPoint);\n  },\n  bbox: function () {\n    var left = min(this.start.x, this.end.x);\n    var top = min(this.start.y, this.end.y);\n    var right = max(this.start.x, this.end.x);\n    var bottom = max(this.start.y, this.end.y);\n    return new Rect(left, top, right - left, bottom - top);\n  },\n  // @return the bearing (cardinal direction) of the line. For example N, W, or SE.\n  // @returns {String} One of the following bearings : NE, E, SE, S, SW, W, NW, N.\n  bearing: function () {\n    return bearing(this.start, this.end);\n  },\n  clone: function () {\n    return new Line(this.start, this.end);\n  },\n  // @return {point} the closest point on the line to point `p`\n  closestPoint: function (p) {\n    return this.pointAt(this.closestPointNormalizedLength(p));\n  },\n  closestPointLength: function (p) {\n    return this.closestPointNormalizedLength(p) * this.length();\n  },\n  // @return {number} the normalized length of the closest point on the line to point `p`\n  closestPointNormalizedLength: function (p) {\n    var product = this.vector().dot(new Line(this.start, p).vector());\n    var cpNormalizedLength = min(1, max(0, product / this.squaredLength()));\n\n    // cpNormalizedLength returns `NaN` if this line has zero length\n    // we can work with that - if `NaN`, return 0\n    if (cpNormalizedLength !== cpNormalizedLength) return 0; // condition evaluates to `true` if and only if cpNormalizedLength is `NaN`\n    // (`NaN` is the only value that is not equal to itself)\n\n    return cpNormalizedLength;\n  },\n  closestPointTangent: function (p) {\n    return this.tangentAt(this.closestPointNormalizedLength(p));\n  },\n  // Returns `true` if the point lies on the line.\n  containsPoint: function (p) {\n    var start = this.start;\n    var end = this.end;\n    if (start.cross(p, end) !== 0) return false;\n    // else: cross product of 0 indicates that this line and the vector to `p` are collinear\n\n    var length = this.length();\n    if (new Line(start, p).length() > length) return false;\n    if (new Line(p, end).length() > length) return false;\n    // else: `p` lies between start and end of the line\n\n    return true;\n  },\n  // Divides the line into two at requested `ratio` between 0 and 1.\n  divideAt: function (ratio) {\n    var dividerPoint = this.pointAt(ratio);\n\n    // return array with two lines\n    return [new Line(this.start, dividerPoint), new Line(dividerPoint, this.end)];\n  },\n  // Divides the line into two at requested `length`.\n  divideAtLength: function (length) {\n    var dividerPoint = this.pointAtLength(length);\n\n    // return array with two new lines\n    return [new Line(this.start, dividerPoint), new Line(dividerPoint, this.end)];\n  },\n  equals: function (l) {\n    return !!l && this.start.x === l.start.x && this.start.y === l.start.y && this.end.x === l.end.x && this.end.y === l.end.y;\n  },\n  // @return {point} Point where I'm intersecting a line.\n  // @return [point] Points where I'm intersecting a rectangle.\n  // @see Squeak Smalltalk, LineSegment>>intersectionWith:\n  intersect: function (shape, opt) {\n    if (shape && shape.intersectionWithLine) {\n      var intersection = shape.intersectionWithLine(this, opt);\n\n      // Backwards compatibility\n      if (intersection && shape instanceof Line) {\n        intersection = intersection[0];\n      }\n      return intersection;\n    }\n    return null;\n  },\n  intersectionWithLine: function (line) {\n    var pt1Dir = new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n    var pt2Dir = new Point(line.end.x - line.start.x, line.end.y - line.start.y);\n    var det = pt1Dir.x * pt2Dir.y - pt1Dir.y * pt2Dir.x;\n    var deltaPt = new Point(line.start.x - this.start.x, line.start.y - this.start.y);\n    var alpha = deltaPt.x * pt2Dir.y - deltaPt.y * pt2Dir.x;\n    var beta = deltaPt.x * pt1Dir.y - deltaPt.y * pt1Dir.x;\n    if (det === 0 || alpha * det < 0 || beta * det < 0) {\n      // No intersection found.\n      return null;\n    }\n    if (det > 0) {\n      if (alpha > det || beta > det) {\n        return null;\n      }\n    } else {\n      if (alpha < det || beta < det) {\n        return null;\n      }\n    }\n    return [new Point(this.start.x + alpha * pt1Dir.x / det, this.start.y + alpha * pt1Dir.y / det)];\n  },\n  isDifferentiable: function () {\n    return !this.start.equals(this.end);\n  },\n  // @return {double} length of the line\n  length: function () {\n    return length(this.start, this.end);\n  },\n  // @return {point} my midpoint\n  midpoint: function () {\n    return new Point((this.start.x + this.end.x) / 2, (this.start.y + this.end.y) / 2);\n  },\n  parallel: function (distance) {\n    const l = this.clone();\n    if (!this.isDifferentiable()) return l;\n    const {\n      start,\n      end\n    } = l;\n    const eRef = start.clone().rotate(end, 270);\n    const sRef = end.clone().rotate(start, 90);\n    start.move(sRef, distance);\n    end.move(eRef, distance);\n    return l;\n  },\n  // @return {point} my point at 't' <0,1>\n  pointAt: function (t) {\n    var start = this.start;\n    var end = this.end;\n    if (t <= 0) return start.clone();\n    if (t >= 1) return end.clone();\n    return start.lerp(end, t);\n  },\n  pointAtLength: function (length) {\n    var start = this.start;\n    var end = this.end;\n    var fromStart = true;\n    if (length < 0) {\n      fromStart = false; // negative lengths mean start calculation from end point\n      length = -length; // absolute value\n    }\n    var lineLength = this.length();\n    if (length >= lineLength) return fromStart ? end.clone() : start.clone();\n    return this.pointAt((fromStart ? length : lineLength - length) / lineLength);\n  },\n  // @return {number} the offset of the point `p` from the line. + if the point `p` is on the right side of the line, - if on the left and 0 if on the line.\n  pointOffset: function (p) {\n    // Find the sign of the determinant of vectors (start,end), where p is the query point.\n    p = new Point(p);\n    var start = this.start;\n    var end = this.end;\n    var determinant = (end.x - start.x) * (p.y - start.y) - (end.y - start.y) * (p.x - start.x);\n    return determinant / this.length();\n  },\n  rotate: function (origin, angle) {\n    this.start.rotate(origin, angle);\n    this.end.rotate(origin, angle);\n    return this;\n  },\n  round: function (precision) {\n    this.start.round(precision);\n    this.end.round(precision);\n    return this;\n  },\n  scale: function (sx, sy, origin) {\n    this.start.scale(sx, sy, origin);\n    this.end.scale(sx, sy, origin);\n    return this;\n  },\n  // @return {number} scale the line so that it has the requested length\n  setLength: function (length) {\n    var currentLength = this.length();\n    if (!currentLength) return this;\n    var scaleFactor = length / currentLength;\n    return this.scale(scaleFactor, scaleFactor, this.start);\n  },\n  // @return {integer} length without sqrt\n  // @note for applications where the exact length is not necessary (e.g. compare only)\n  squaredLength: function () {\n    return squaredLength(this.start, this.end);\n  },\n  tangentAt: function (t) {\n    if (!this.isDifferentiable()) return null;\n    var start = this.start;\n    var end = this.end;\n    var tangentStart = this.pointAt(t); // constrains `t` between 0 and 1\n\n    var tangentLine = new Line(start, end);\n    tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y); // move so that tangent line starts at the point requested\n\n    return tangentLine;\n  },\n  tangentAtLength: function (length) {\n    if (!this.isDifferentiable()) return null;\n    var start = this.start;\n    var end = this.end;\n    var tangentStart = this.pointAtLength(length);\n    var tangentLine = new Line(start, end);\n    tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y); // move so that tangent line starts at the point requested\n\n    return tangentLine;\n  },\n  toString: function () {\n    return this.start.toString() + ' ' + this.end.toString();\n  },\n  serialize: function () {\n    return this.start.serialize() + ' ' + this.end.serialize();\n  },\n  translate: function (tx, ty) {\n    this.start.translate(tx, ty);\n    this.end.translate(tx, ty);\n    return this;\n  },\n  // @return vector {point} of the line\n  vector: function () {\n    return new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n  }\n};\n\n// For backwards compatibility:\nLine.prototype.intersection = Line.prototype.intersect;\n\n// For backwards compatibility:\nexport const line = Line;", "import { Rect } from './rect.mjs';\nimport { Point } from './point.mjs';\nimport { types } from './types.mjs';\nconst {\n  sqrt,\n  round,\n  pow\n} = Math;\nexport const Ellipse = function (c, a, b) {\n  if (!(this instanceof Ellipse)) {\n    return new Ellipse(c, a, b);\n  }\n  if (c instanceof Ellipse) {\n    return new Ellipse(new Point(c.x, c.y), c.a, c.b);\n  }\n  c = new Point(c);\n  this.x = c.x;\n  this.y = c.y;\n  this.a = a;\n  this.b = b;\n};\nEllipse.fromRect = function (rect) {\n  rect = new Rect(rect);\n  return new Ellipse(rect.center(), rect.width / 2, rect.height / 2);\n};\nEllipse.prototype = {\n  type: types.Ellipse,\n  bbox: function () {\n    return new Rect(this.x - this.a, this.y - this.b, 2 * this.a, 2 * this.b);\n  },\n  /**\n   * @returns {g.Point}\n   */\n  center: function () {\n    return new Point(this.x, this.y);\n  },\n  clone: function () {\n    return new Ellipse(this);\n  },\n  /**\n   * @param {g.Point} p\n   * @returns {boolean}\n   */\n  containsPoint: function (p) {\n    return this.normalizedDistance(p) <= 1;\n  },\n  equals: function (ellipse) {\n    return !!ellipse && ellipse.x === this.x && ellipse.y === this.y && ellipse.a === this.a && ellipse.b === this.b;\n  },\n  // inflate by dx and dy\n  // @param dx {delta_x} representing additional size to x\n  // @param dy {delta_y} representing additional size to y -\n  // dy param is not required -> in that case y is sized by dx\n  inflate: function (dx, dy) {\n    if (dx === undefined) {\n      dx = 0;\n    }\n    if (dy === undefined) {\n      dy = dx;\n    }\n    this.a += 2 * dx;\n    this.b += 2 * dy;\n    return this;\n  },\n  intersectionWithLine: function (line) {\n    var intersections = [];\n    var a1 = line.start;\n    var a2 = line.end;\n    var rx = this.a;\n    var ry = this.b;\n    var dir = line.vector();\n    var diff = a1.difference(new Point(this));\n    var mDir = new Point(dir.x / (rx * rx), dir.y / (ry * ry));\n    var mDiff = new Point(diff.x / (rx * rx), diff.y / (ry * ry));\n    var a = dir.dot(mDir);\n    var b = dir.dot(mDiff);\n    var c = diff.dot(mDiff) - 1.0;\n    var d = b * b - a * c;\n    if (d < 0) {\n      return null;\n    } else if (d > 0) {\n      var root = sqrt(d);\n      var ta = (-b - root) / a;\n      var tb = (-b + root) / a;\n      if ((ta < 0 || 1 < ta) && (tb < 0 || 1 < tb)) {\n        // if ((ta < 0 && tb < 0) || (ta > 1 && tb > 1)) outside else inside\n        return null;\n      } else {\n        if (0 <= ta && ta <= 1) intersections.push(a1.lerp(a2, ta));\n        if (0 <= tb && tb <= 1) intersections.push(a1.lerp(a2, tb));\n      }\n    } else {\n      var t = -b / a;\n      if (0 <= t && t <= 1) {\n        intersections.push(a1.lerp(a2, t));\n      } else {\n        // outside\n        return null;\n      }\n    }\n    return intersections;\n  },\n  // Find point on me where line from my center to\n  // point p intersects my boundary.\n  // @param {number} angle If angle is specified, intersection with rotated ellipse is computed.\n  intersectionWithLineFromCenterToPoint: function (p, angle) {\n    p = new Point(p);\n    if (angle) p.rotate(new Point(this.x, this.y), angle);\n    var dx = p.x - this.x;\n    var dy = p.y - this.y;\n    var result;\n    if (dx === 0) {\n      result = this.bbox().pointNearestToPoint(p);\n      if (angle) return result.rotate(new Point(this.x, this.y), -angle);\n      return result;\n    }\n    var m = dy / dx;\n    var mSquared = m * m;\n    var aSquared = this.a * this.a;\n    var bSquared = this.b * this.b;\n    var x = sqrt(1 / (1 / aSquared + mSquared / bSquared));\n    x = dx < 0 ? -x : x;\n    var y = m * x;\n    result = new Point(this.x + x, this.y + y);\n    if (angle) return result.rotate(new Point(this.x, this.y), -angle);\n    return result;\n  },\n  /**\n   * @param {g.Point} point\n   * @returns {number} result < 1 - inside ellipse, result == 1 - on ellipse boundary, result > 1 - outside\n   */\n  normalizedDistance: function (point) {\n    var x0 = point.x;\n    var y0 = point.y;\n    var a = this.a;\n    var b = this.b;\n    var x = this.x;\n    var y = this.y;\n    return (x0 - x) * (x0 - x) / (a * a) + (y0 - y) * (y0 - y) / (b * b);\n  },\n  round: function (precision) {\n    let f = 1; // case 0\n    if (precision) {\n      switch (precision) {\n        case 1:\n          f = 10;\n          break;\n        case 2:\n          f = 100;\n          break;\n        case 3:\n          f = 1000;\n          break;\n        default:\n          f = pow(10, precision);\n          break;\n      }\n    }\n    this.x = round(this.x * f) / f;\n    this.y = round(this.y * f) / f;\n    this.a = round(this.a * f) / f;\n    this.b = round(this.b * f) / f;\n    return this;\n  },\n  /** Compute angle between tangent and x axis\n   * @param {g.Point} p Point of tangency, it has to be on ellipse boundaries.\n   * @returns {number} angle between tangent and x axis\n   */\n  tangentTheta: function (p) {\n    var refPointDelta = 30;\n    var x0 = p.x;\n    var y0 = p.y;\n    var a = this.a;\n    var b = this.b;\n    var center = this.bbox().center();\n    var m = center.x;\n    var n = center.y;\n    var q1 = x0 > center.x + a / 2;\n    var q3 = x0 < center.x - a / 2;\n    var y, x;\n    if (q1 || q3) {\n      y = x0 > center.x ? y0 - refPointDelta : y0 + refPointDelta;\n      x = a * a / (x0 - m) - a * a * (y0 - n) * (y - n) / (b * b * (x0 - m)) + m;\n    } else {\n      x = y0 > center.y ? x0 + refPointDelta : x0 - refPointDelta;\n      y = b * b / (y0 - n) - b * b * (x0 - m) * (x - m) / (a * a * (y0 - n)) + n;\n    }\n    return new Point(x, y).theta(p);\n  },\n  toString: function () {\n    return new Point(this.x, this.y).toString() + ' ' + this.a + ' ' + this.b;\n  }\n};\n\n// For backwards compatibility:\nexport const ellipse = Ellipse;", "import { toRad } from './geometry.helpers.mjs';\nimport { Line } from './line.mjs';\nimport { Point } from './point.mjs';\nimport { Ellipse } from './ellipse.mjs';\nimport { types } from './types.mjs';\nconst {\n  abs,\n  cos,\n  sin,\n  min,\n  max,\n  round,\n  pow\n} = Math;\nexport const Rect = function (x, y, w, h) {\n  if (!(this instanceof Rect)) {\n    return new Rect(x, y, w, h);\n  }\n  if (Object(x) === x) {\n    y = x.y;\n    w = x.width;\n    h = x.height;\n    x = x.x;\n  }\n  this.x = x === undefined ? 0 : x;\n  this.y = y === undefined ? 0 : y;\n  this.width = w === undefined ? 0 : w;\n  this.height = h === undefined ? 0 : h;\n};\nRect.fromEllipse = function (e) {\n  e = new Ellipse(e);\n  return new Rect(e.x - e.a, e.y - e.b, 2 * e.a, 2 * e.b);\n};\nRect.fromPointUnion = function (...points) {\n  if (points.length === 0) return null;\n  const p = new Point();\n  let minX, minY, maxX, maxY;\n  minX = minY = Infinity;\n  maxX = maxY = -Infinity;\n  for (let i = 0; i < points.length; i++) {\n    p.update(points[i]);\n    const x = p.x;\n    const y = p.y;\n    if (x < minX) minX = x;\n    if (x > maxX) maxX = x;\n    if (y < minY) minY = y;\n    if (y > maxY) maxY = y;\n  }\n  return new Rect(minX, minY, maxX - minX, maxY - minY);\n};\nRect.fromRectUnion = function (...rects) {\n  if (rects.length === 0) return null;\n  const r = new Rect();\n  let minX, minY, maxX, maxY;\n  minX = minY = Infinity;\n  maxX = maxY = -Infinity;\n  for (let i = 0; i < rects.length; i++) {\n    r.update(rects[i]);\n    const x = r.x;\n    const y = r.y;\n    const mX = x + r.width;\n    const mY = y + r.height;\n    if (x < minX) minX = x;\n    if (mX > maxX) maxX = mX;\n    if (y < minY) minY = y;\n    if (mY > maxY) maxY = mY;\n  }\n  return new Rect(minX, minY, maxX - minX, maxY - minY);\n};\nRect.prototype = {\n  type: types.Rect,\n  // Find my bounding box when I'm rotated with the center of rotation in the center of me.\n  // @return r {rectangle} representing a bounding box\n  bbox: function (angle) {\n    return this.clone().rotateAroundCenter(angle);\n  },\n  rotateAroundCenter: function (angle) {\n    if (!angle) return this;\n    const {\n      width,\n      height\n    } = this;\n    const theta = toRad(angle);\n    const st = abs(sin(theta));\n    const ct = abs(cos(theta));\n    const w = width * ct + height * st;\n    const h = width * st + height * ct;\n    this.x += (width - w) / 2;\n    this.y += (height - h) / 2;\n    this.width = w;\n    this.height = h;\n    return this;\n  },\n  bottomLeft: function () {\n    return new Point(this.x, this.y + this.height);\n  },\n  bottomLine: function () {\n    return new Line(this.bottomLeft(), this.bottomRight());\n  },\n  bottomMiddle: function () {\n    return new Point(this.x + this.width / 2, this.y + this.height);\n  },\n  center: function () {\n    return new Point(this.x + this.width / 2, this.y + this.height / 2);\n  },\n  clone: function () {\n    return new Rect(this);\n  },\n  // @return {bool} true if point p is inside me.\n  containsPoint: function (p) {\n    if (!(p instanceof Point)) {\n      p = new Point(p);\n    }\n    return p.x >= this.x && p.x <= this.x + this.width && p.y >= this.y && p.y <= this.y + this.height;\n  },\n  // @return {bool} true if rectangle `r` is inside me.\n  containsRect: function (r) {\n    var r0 = new Rect(this).normalize();\n    var r1 = new Rect(r).normalize();\n    var w0 = r0.width;\n    var h0 = r0.height;\n    var w1 = r1.width;\n    var h1 = r1.height;\n    if (!w0 || !h0 || !w1 || !h1) {\n      // At least one of the dimensions is 0\n      return false;\n    }\n    var x0 = r0.x;\n    var y0 = r0.y;\n    var x1 = r1.x;\n    var y1 = r1.y;\n    w1 += x1;\n    w0 += x0;\n    h1 += y1;\n    h0 += y0;\n    return x0 <= x1 && w1 <= w0 && y0 <= y1 && h1 <= h0;\n  },\n  corner: function () {\n    return new Point(this.x + this.width, this.y + this.height);\n  },\n  // @return {boolean} true if rectangles are equal.\n  equals: function (r) {\n    var mr = new Rect(this).normalize();\n    var nr = new Rect(r).normalize();\n    return mr.x === nr.x && mr.y === nr.y && mr.width === nr.width && mr.height === nr.height;\n  },\n  // inflate by dx and dy, recompute origin [x, y]\n  // @param dx {delta_x} representing additional size to x\n  // @param dy {delta_y} representing additional size to y -\n  // dy param is not required -> in that case y is sized by dx\n  inflate: function (dx, dy) {\n    if (dx === undefined) {\n      dx = 0;\n    }\n    if (dy === undefined) {\n      dy = dx;\n    }\n    this.x -= dx;\n    this.y -= dy;\n    this.width += 2 * dx;\n    this.height += 2 * dy;\n    return this;\n  },\n  // @return {rect} if rectangles intersect, {null} if not.\n  intersect: function (r) {\n    var myOrigin = this.origin();\n    var myCorner = this.corner();\n    var rOrigin = r.origin();\n    var rCorner = r.corner();\n\n    // No intersection found\n    if (rCorner.x <= myOrigin.x || rCorner.y <= myOrigin.y || rOrigin.x >= myCorner.x || rOrigin.y >= myCorner.y) return null;\n    var x = max(myOrigin.x, rOrigin.x);\n    var y = max(myOrigin.y, rOrigin.y);\n    return new Rect(x, y, min(myCorner.x, rCorner.x) - x, min(myCorner.y, rCorner.y) - y);\n  },\n  intersectionWithLine: function (line) {\n    var r = this;\n    var rectLines = [r.topLine(), r.rightLine(), r.bottomLine(), r.leftLine()];\n    var points = [];\n    var dedupeArr = [];\n    var pt, i;\n    var n = rectLines.length;\n    for (i = 0; i < n; i++) {\n      pt = line.intersect(rectLines[i]);\n      if (pt !== null && dedupeArr.indexOf(pt.toString()) < 0) {\n        points.push(pt);\n        dedupeArr.push(pt.toString());\n      }\n    }\n    return points.length > 0 ? points : null;\n  },\n  // Find point on my boundary where line starting\n  // from my center ending in point p intersects me.\n  // @param {number} angle If angle is specified, intersection with rotated rectangle is computed.\n  intersectionWithLineFromCenterToPoint: function (p, angle) {\n    p = new Point(p);\n    var center = new Point(this.x + this.width / 2, this.y + this.height / 2);\n    var result;\n    if (angle) p.rotate(center, angle);\n\n    // (clockwise, starting from the top side)\n    var sides = [this.topLine(), this.rightLine(), this.bottomLine(), this.leftLine()];\n    var connector = new Line(center, p);\n    for (var i = sides.length - 1; i >= 0; --i) {\n      var intersection = sides[i].intersection(connector);\n      if (intersection !== null) {\n        result = intersection;\n        break;\n      }\n    }\n    if (result && angle) result.rotate(center, -angle);\n    return result;\n  },\n  leftLine: function () {\n    return new Line(this.topLeft(), this.bottomLeft());\n  },\n  leftMiddle: function () {\n    return new Point(this.x, this.y + this.height / 2);\n  },\n  maxRectScaleToFit: function (rect, origin) {\n    rect = new Rect(rect);\n    origin || (origin = rect.center());\n    var sx1, sx2, sx3, sx4, sy1, sy2, sy3, sy4;\n    var ox = origin.x;\n    var oy = origin.y;\n\n    // Here we find the maximal possible scale for all corner points (for x and y axis) of the rectangle,\n    // so when the scale is applied the point is still inside the rectangle.\n\n    sx1 = sx2 = sx3 = sx4 = sy1 = sy2 = sy3 = sy4 = Infinity;\n\n    // Top Left\n    var p1 = rect.topLeft();\n    if (p1.x < ox) {\n      sx1 = (this.x - ox) / (p1.x - ox);\n    }\n    if (p1.y < oy) {\n      sy1 = (this.y - oy) / (p1.y - oy);\n    }\n    // Bottom Right\n    var p2 = rect.bottomRight();\n    if (p2.x > ox) {\n      sx2 = (this.x + this.width - ox) / (p2.x - ox);\n    }\n    if (p2.y > oy) {\n      sy2 = (this.y + this.height - oy) / (p2.y - oy);\n    }\n    // Top Right\n    var p3 = rect.topRight();\n    if (p3.x > ox) {\n      sx3 = (this.x + this.width - ox) / (p3.x - ox);\n    }\n    if (p3.y < oy) {\n      sy3 = (this.y - oy) / (p3.y - oy);\n    }\n    // Bottom Left\n    var p4 = rect.bottomLeft();\n    if (p4.x < ox) {\n      sx4 = (this.x - ox) / (p4.x - ox);\n    }\n    if (p4.y > oy) {\n      sy4 = (this.y + this.height - oy) / (p4.y - oy);\n    }\n    return {\n      sx: min(sx1, sx2, sx3, sx4),\n      sy: min(sy1, sy2, sy3, sy4)\n    };\n  },\n  maxRectUniformScaleToFit: function (rect, origin) {\n    var scale = this.maxRectScaleToFit(rect, origin);\n    return min(scale.sx, scale.sy);\n  },\n  // Move and expand me.\n  // @param r {rectangle} representing deltas\n  moveAndExpand: function (r) {\n    this.x += r.x || 0;\n    this.y += r.y || 0;\n    this.width += r.width || 0;\n    this.height += r.height || 0;\n    return this;\n  },\n  // Normalize the rectangle; i.e., make it so that it has a non-negative width and height.\n  // If width < 0 the function swaps the left and right corners,\n  // and it swaps the top and bottom corners if height < 0\n  // like in http://qt-project.org/doc/qt-4.8/qrectf.html#normalized\n  normalize: function () {\n    var newx = this.x;\n    var newy = this.y;\n    var newwidth = this.width;\n    var newheight = this.height;\n    if (this.width < 0) {\n      newx = this.x + this.width;\n      newwidth = -this.width;\n    }\n    if (this.height < 0) {\n      newy = this.y + this.height;\n      newheight = -this.height;\n    }\n    this.x = newx;\n    this.y = newy;\n    this.width = newwidth;\n    this.height = newheight;\n    return this;\n  },\n  // Offset me by the specified amount.\n  offset: function (dx, dy) {\n    // pretend that this is a point and call offset()\n    // rewrites x and y according to dx and dy\n    return Point.prototype.offset.call(this, dx, dy);\n  },\n  origin: function () {\n    return new Point(this.x, this.y);\n  },\n  // @return {point} a point on my boundary nearest to the given point.\n  // @see Squeak Smalltalk, Rectangle>>pointNearestTo:\n  pointNearestToPoint: function (point) {\n    point = new Point(point);\n    if (this.containsPoint(point)) {\n      var side = this.sideNearestToPoint(point);\n      switch (side) {\n        case 'right':\n          return new Point(this.x + this.width, point.y);\n        case 'left':\n          return new Point(this.x, point.y);\n        case 'bottom':\n          return new Point(point.x, this.y + this.height);\n        case 'top':\n          return new Point(point.x, this.y);\n      }\n    }\n    return point.adhereToRect(this);\n  },\n  rightLine: function () {\n    return new Line(this.topRight(), this.bottomRight());\n  },\n  rightMiddle: function () {\n    return new Point(this.x + this.width, this.y + this.height / 2);\n  },\n  round: function (precision) {\n    let f = 1; // case 0\n    if (precision) {\n      switch (precision) {\n        case 1:\n          f = 10;\n          break;\n        case 2:\n          f = 100;\n          break;\n        case 3:\n          f = 1000;\n          break;\n        default:\n          f = pow(10, precision);\n          break;\n      }\n    }\n    this.x = round(this.x * f) / f;\n    this.y = round(this.y * f) / f;\n    this.width = round(this.width * f) / f;\n    this.height = round(this.height * f) / f;\n    return this;\n  },\n  // Scale rectangle with origin.\n  scale: function (sx, sy, origin) {\n    origin = this.origin().scale(sx, sy, origin);\n    this.x = origin.x;\n    this.y = origin.y;\n    this.width *= sx;\n    this.height *= sy;\n    return this;\n  },\n  // @return {string} (left|right|top|bottom) side which is nearest to point\n  // @see Squeak Smalltalk, Rectangle>>sideNearestTo:\n  sideNearestToPoint: function (point) {\n    point = new Point(point);\n    var distToLeft = point.x - this.x;\n    var distToRight = this.x + this.width - point.x;\n    var distToTop = point.y - this.y;\n    var distToBottom = this.y + this.height - point.y;\n    var closest = distToLeft;\n    var side = 'left';\n    if (distToRight < closest) {\n      closest = distToRight;\n      side = 'right';\n    }\n    if (distToTop < closest) {\n      closest = distToTop;\n      side = 'top';\n    }\n    if (distToBottom < closest) {\n      // closest = distToBottom;\n      side = 'bottom';\n    }\n    return side;\n  },\n  snapToGrid: function (gx, gy) {\n    var origin = this.origin().snapToGrid(gx, gy);\n    var corner = this.corner().snapToGrid(gx, gy);\n    this.x = origin.x;\n    this.y = origin.y;\n    this.width = corner.x - origin.x;\n    this.height = corner.y - origin.y;\n    return this;\n  },\n  toJSON: function () {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    };\n  },\n  topLine: function () {\n    return new Line(this.topLeft(), this.topRight());\n  },\n  topMiddle: function () {\n    return new Point(this.x + this.width / 2, this.y);\n  },\n  topRight: function () {\n    return new Point(this.x + this.width, this.y);\n  },\n  toString: function () {\n    return this.origin().toString() + ' ' + this.corner().toString();\n  },\n  // @return {rect} representing the union of both rectangles.\n  union: function (rect) {\n    return Rect.fromRectUnion(this, rect);\n  },\n  update: function (x, y, w, h) {\n    if (Object(x) === x) {\n      y = x.y;\n      w = x.width;\n      h = x.height;\n      x = x.x;\n    }\n    this.x = x || 0;\n    this.y = y || 0;\n    this.width = w || 0;\n    this.height = h || 0;\n    return this;\n  }\n};\nRect.prototype.bottomRight = Rect.prototype.corner;\nRect.prototype.topLeft = Rect.prototype.origin;\nRect.prototype.translate = Rect.prototype.offset;\n\n// For backwards compatibility:\nexport const rect = Rect;", "export function parsePoints(svgString) {\n  // Step 1: Discard surrounding spaces\n  const trimmedString = svgString.trim();\n  if (trimmedString === '') return [];\n  const points = [];\n\n  // Step 2: Split at commas (+ their surrounding spaces) or at multiple spaces\n  // ReDoS mitigation: Have an anchor at the beginning of each alternation\n  // Note: This doesn't simplify double (or more) commas - causes empty coords\n  // This regex is used by `split()`, so it doesn't need to use /g\n  const coords = trimmedString.split(/\\b\\s*,\\s*|,\\s*|\\s+/);\n  const numCoords = coords.length;\n  for (let i = 0; i < numCoords; i += 2) {\n    // Step 3: Convert each coord to number\n    // Note: If the coord cannot be converted to a number, it will be `NaN`\n    // Note: If the coord is empty (\"\", e.g. from \",,\" input), it will be `0`\n    // Note: If we end up with an odd number of coords, the last point's second coord will be `NaN`\n    points.push({\n      x: +coords[i],\n      y: +coords[i + 1]\n    });\n  }\n  return points;\n}\nexport function clonePoints(points) {\n  const numPoints = points.length;\n  if (numPoints === 0) return [];\n  const newPoints = [];\n  for (let i = 0; i < numPoints; i++) {\n    const point = points[i].clone();\n    newPoints.push(point);\n  }\n  return newPoints;\n}\n\n// Returns a convex-hull polyline from this polyline.\n// Implements the Graham scan (https://en.wikipedia.org/wiki/Graham_scan).\n// Output polyline starts at the first element of the original polyline that is on the hull, then continues clockwise.\n// Minimal polyline is found (only vertices of the hull are reported, no collinear points).\nexport function convexHull(points) {\n  const {\n    abs\n  } = Math;\n  var i;\n  var n;\n  var numPoints = points.length;\n  if (numPoints === 0) return []; // if points array is empty\n\n  // step 1: find the starting point - point with the lowest y (if equality, highest x)\n  var startPoint;\n  for (i = 0; i < numPoints; i++) {\n    if (startPoint === undefined) {\n      // if this is the first point we see, set it as start point\n      startPoint = points[i];\n    } else if (points[i].y < startPoint.y) {\n      // start point should have lowest y from all points\n      startPoint = points[i];\n    } else if (points[i].y === startPoint.y && points[i].x > startPoint.x) {\n      // if two points have the lowest y, choose the one that has highest x\n      // there are no points to the right of startPoint - no ambiguity about theta 0\n      // if there are several coincident start point candidates, first one is reported\n      startPoint = points[i];\n    }\n  }\n\n  // step 2: sort the list of points\n  // sorting by angle between line from startPoint to point and the x-axis (theta)\n\n  // step 2a: create the point records = [point, originalIndex, angle]\n  var sortedPointRecords = [];\n  for (i = 0; i < numPoints; i++) {\n    var angle = startPoint.theta(points[i]);\n    if (angle === 0) {\n      angle = 360; // give highest angle to start point\n      // the start point will end up at end of sorted list\n      // the start point will end up at beginning of hull points list\n    }\n    var entry = [points[i], i, angle];\n    sortedPointRecords.push(entry);\n  }\n\n  // step 2b: sort the list in place\n  sortedPointRecords.sort(function (record1, record2) {\n    // returning a negative number here sorts record1 before record2\n    // if first angle is smaller than second, first angle should come before second\n\n    var sortOutput = record1[2] - record2[2]; // negative if first angle smaller\n    if (sortOutput === 0) {\n      // if the two angles are equal, sort by originalIndex\n      sortOutput = record2[1] - record1[1]; // negative if first index larger\n      // coincident points will be sorted in reverse-numerical order\n      // so the coincident points with lower original index will be considered first\n    }\n    return sortOutput;\n  });\n\n  // step 2c: duplicate start record from the top of the stack to the bottom of the stack\n  if (sortedPointRecords.length > 2) {\n    var startPointRecord = sortedPointRecords[sortedPointRecords.length - 1];\n    sortedPointRecords.unshift(startPointRecord);\n  }\n\n  // step 3a: go through sorted points in order and find those with right turns\n  // we want to get our results in clockwise order\n  var insidePoints = {}; // dictionary of points with left turns - cannot be on the hull\n  var hullPointRecords = []; // stack of records with right turns - hull point candidates\n\n  var currentPointRecord;\n  var currentPoint;\n  var lastHullPointRecord;\n  var lastHullPoint;\n  var secondLastHullPointRecord;\n  var secondLastHullPoint;\n  while (sortedPointRecords.length !== 0) {\n    currentPointRecord = sortedPointRecords.pop();\n    currentPoint = currentPointRecord[0];\n\n    // check if point has already been discarded\n    // keys for insidePoints are stored in the form 'point.x@point.y@@originalIndex'\n    if (insidePoints.hasOwnProperty(currentPointRecord[0] + '@@' + currentPointRecord[1])) {\n      // this point had an incorrect turn at some previous iteration of this loop\n      // this disqualifies it from possibly being on the hull\n      continue;\n    }\n    var correctTurnFound = false;\n    while (!correctTurnFound) {\n      if (hullPointRecords.length < 2) {\n        // not enough points for comparison, just add current point\n        hullPointRecords.push(currentPointRecord);\n        correctTurnFound = true;\n      } else {\n        lastHullPointRecord = hullPointRecords.pop();\n        lastHullPoint = lastHullPointRecord[0];\n        secondLastHullPointRecord = hullPointRecords.pop();\n        secondLastHullPoint = secondLastHullPointRecord[0];\n        var crossProduct = secondLastHullPoint.cross(lastHullPoint, currentPoint);\n        if (crossProduct < 0) {\n          // found a right turn\n          hullPointRecords.push(secondLastHullPointRecord);\n          hullPointRecords.push(lastHullPointRecord);\n          hullPointRecords.push(currentPointRecord);\n          correctTurnFound = true;\n        } else if (crossProduct === 0) {\n          // the three points are collinear\n          // three options:\n          // there may be a 180 or 0 degree angle at lastHullPoint\n          // or two of the three points are coincident\n          var THRESHOLD = 1e-10; // we have to take rounding errors into account\n          var angleBetween = lastHullPoint.angleBetween(secondLastHullPoint, currentPoint);\n          if (abs(angleBetween - 180) < THRESHOLD) {\n            // rounding around 180 to 180\n            // if the cross product is 0 because the angle is 180 degrees\n            // discard last hull point (add to insidePoints)\n            //insidePoints.unshift(lastHullPoint);\n            insidePoints[lastHullPointRecord[0] + '@@' + lastHullPointRecord[1]] = lastHullPoint;\n            // reenter second-to-last hull point (will be last at next iter)\n            hullPointRecords.push(secondLastHullPointRecord);\n            // do not do anything with current point\n            // correct turn not found\n          } else if (lastHullPoint.equals(currentPoint) || secondLastHullPoint.equals(lastHullPoint)) {\n            // if the cross product is 0 because two points are the same\n            // discard last hull point (add to insidePoints)\n            //insidePoints.unshift(lastHullPoint);\n            insidePoints[lastHullPointRecord[0] + '@@' + lastHullPointRecord[1]] = lastHullPoint;\n            // reenter second-to-last hull point (will be last at next iter)\n            hullPointRecords.push(secondLastHullPointRecord);\n            // do not do anything with current point\n            // correct turn not found\n          } else if (abs((angleBetween + 1) % 360 - 1) < THRESHOLD) {\n            // rounding around 0 and 360 to 0\n            // if the cross product is 0 because the angle is 0 degrees\n            // remove last hull point from hull BUT do not discard it\n            // reenter second-to-last hull point (will be last at next iter)\n            hullPointRecords.push(secondLastHullPointRecord);\n            // put last hull point back into the sorted point records list\n            sortedPointRecords.push(lastHullPointRecord);\n            // we are switching the order of the 0deg and 180deg points\n            // correct turn not found\n          }\n        } else {\n          // found a left turn\n          // discard last hull point (add to insidePoints)\n          //insidePoints.unshift(lastHullPoint);\n          insidePoints[lastHullPointRecord[0] + '@@' + lastHullPointRecord[1]] = lastHullPoint;\n          // reenter second-to-last hull point (will be last at next iter of loop)\n          hullPointRecords.push(secondLastHullPointRecord);\n          // do not do anything with current point\n          // correct turn not found\n        }\n      }\n    }\n  }\n  // at this point, hullPointRecords contains the output points in clockwise order\n  // the points start with lowest-y,highest-x startPoint, and end at the same point\n\n  // step 3b: remove duplicated startPointRecord from the end of the array\n  if (hullPointRecords.length > 2) {\n    hullPointRecords.pop();\n  }\n\n  // step 4: find the lowest originalIndex record and put it at the beginning of hull\n  var lowestHullIndex; // the lowest originalIndex on the hull\n  var indexOfLowestHullIndexRecord = -1; // the index of the record with lowestHullIndex\n  n = hullPointRecords.length;\n  for (i = 0; i < n; i++) {\n    var currentHullIndex = hullPointRecords[i][1];\n    if (lowestHullIndex === undefined || currentHullIndex < lowestHullIndex) {\n      lowestHullIndex = currentHullIndex;\n      indexOfLowestHullIndexRecord = i;\n    }\n  }\n  var hullPointRecordsReordered = [];\n  if (indexOfLowestHullIndexRecord > 0) {\n    var newFirstChunk = hullPointRecords.slice(indexOfLowestHullIndexRecord);\n    var newSecondChunk = hullPointRecords.slice(0, indexOfLowestHullIndexRecord);\n    hullPointRecordsReordered = newFirstChunk.concat(newSecondChunk);\n  } else {\n    hullPointRecordsReordered = hullPointRecords;\n  }\n  var hullPoints = [];\n  n = hullPointRecordsReordered.length;\n  for (i = 0; i < n; i++) {\n    hullPoints.push(hullPointRecordsReordered[i][0]);\n  }\n  return hullPoints;\n}", "import { Rect } from './rect.mjs';\nimport { Point } from './point.mjs';\nimport { Line } from './line.mjs';\nimport { types } from './types.mjs';\nimport { clonePoints, parsePoints, convexHull } from './points.mjs';\nexport const Polyline = function (points) {\n  if (!(this instanceof Polyline)) {\n    return new Polyline(points);\n  }\n  if (typeof points === 'string') {\n    return new Polyline.parse(points);\n  }\n  this.points = Array.isArray(points) ? points.map(Point) : [];\n};\nPolyline.parse = function (svgString) {\n  return new Polyline(parsePoints(svgString));\n};\nPolyline.fromRect = function (rect) {\n  return new Polyline([rect.topLeft(), rect.topRight(), rect.bottomRight(), rect.bottomLeft(), rect.topLeft()]);\n};\nPolyline.prototype = {\n  type: types.Polyline,\n  bbox: function () {\n    var x1 = Infinity;\n    var x2 = -Infinity;\n    var y1 = Infinity;\n    var y2 = -Infinity;\n    var points = this.points;\n    var numPoints = points.length;\n    if (numPoints === 0) return null; // if points array is empty\n\n    for (var i = 0; i < numPoints; i++) {\n      var point = points[i];\n      var x = point.x;\n      var y = point.y;\n      if (x < x1) x1 = x;\n      if (x > x2) x2 = x;\n      if (y < y1) y1 = y;\n      if (y > y2) y2 = y;\n    }\n    return new Rect(x1, y1, x2 - x1, y2 - y1);\n  },\n  clone: function () {\n    return new Polyline(clonePoints(this.points));\n  },\n  closestPoint: function (p) {\n    var cpLength = this.closestPointLength(p);\n    return this.pointAtLength(cpLength);\n  },\n  closestPointLength: function (p) {\n    var points = this.lengthPoints();\n    var numPoints = points.length;\n    if (numPoints === 0) return 0; // if points array is empty\n    if (numPoints === 1) return 0; // if there is only one point\n\n    var cpLength;\n    var minSqrDistance = Infinity;\n    var length = 0;\n    var n = numPoints - 1;\n    for (var i = 0; i < n; i++) {\n      var line = new Line(points[i], points[i + 1]);\n      var lineLength = line.length();\n      var cpNormalizedLength = line.closestPointNormalizedLength(p);\n      var cp = line.pointAt(cpNormalizedLength);\n      var sqrDistance = cp.squaredDistance(p);\n      if (sqrDistance < minSqrDistance) {\n        minSqrDistance = sqrDistance;\n        cpLength = length + cpNormalizedLength * lineLength;\n      }\n      length += lineLength;\n    }\n    return cpLength;\n  },\n  closestPointNormalizedLength: function (p) {\n    var cpLength = this.closestPointLength(p);\n    if (cpLength === 0) return 0; // shortcut\n\n    var length = this.length();\n    if (length === 0) return 0; // prevents division by zero\n\n    return cpLength / length;\n  },\n  closestPointTangent: function (p) {\n    var cpLength = this.closestPointLength(p);\n    return this.tangentAtLength(cpLength);\n  },\n  // Returns `true` if the area surrounded by the polyline contains the point `p`.\n  // Implements the even-odd SVG algorithm (self-intersections are \"outside\").\n  // (Uses horizontal rays to the right of `p` to look for intersections.)\n  // Closes open polylines (always imagines a final closing segment).\n  containsPoint: function (p) {\n    var points = this.points;\n    var numPoints = points.length;\n    if (numPoints === 0) return false; // shortcut (this polyline has no points)\n\n    var x = p.x;\n    var y = p.y;\n\n    // initialize a final closing segment by creating one from last-first points on polyline\n    var startIndex = numPoints - 1; // start of current polyline segment\n    var endIndex = 0; // end of current polyline segment\n    var numIntersections = 0;\n    var segment = new Line();\n    var ray = new Line();\n    var rayEnd = new Point();\n    for (; endIndex < numPoints; endIndex++) {\n      var start = points[startIndex];\n      var end = points[endIndex];\n      if (p.equals(start)) return true; // shortcut (`p` is a point on polyline)\n      // current polyline segment\n      segment.start = start;\n      segment.end = end;\n      if (segment.containsPoint(p)) return true; // shortcut (`p` lies on a polyline segment)\n\n      // do we have an intersection?\n      if (y <= start.y && y > end.y || y > start.y && y <= end.y) {\n        // this conditional branch IS NOT entered when `segment` is collinear/coincident with `ray`\n        // (when `y === start.y === end.y`)\n        // this conditional branch IS entered when `segment` touches `ray` at only one point\n        // (e.g. when `y === start.y !== end.y`)\n        // since this branch is entered again for the following segment, the two touches cancel out\n\n        var xDifference = start.x - x > end.x - x ? start.x - x : end.x - x;\n        if (xDifference >= 0) {\n          // segment lies at least partially to the right of `p`\n          rayEnd.x = x + xDifference;\n          rayEnd.y = y; // right\n          ray.start = p;\n          ray.end = rayEnd;\n          if (segment.intersect(ray)) {\n            // an intersection was detected to the right of `p`\n            numIntersections++;\n          }\n        } // else: `segment` lies completely to the left of `p` (i.e. no intersection to the right)\n      }\n\n      // move to check the next polyline segment\n      startIndex = endIndex;\n    }\n\n    // returns `true` for odd numbers of intersections (even-odd algorithm)\n    return numIntersections % 2 === 1;\n  },\n  close: function () {\n    const {\n      start,\n      end,\n      points\n    } = this;\n    if (start && end && !start.equals(end)) {\n      points.push(start.clone());\n    }\n    return this;\n  },\n  lengthPoints: function () {\n    return this.points;\n  },\n  convexHull: function () {\n    return new Polyline(convexHull(this.points));\n  },\n  // Checks whether two polylines are exactly the same.\n  // If `p` is undefined or null, returns false.\n  equals: function (p) {\n    if (!p) return false;\n    var points = this.points;\n    var otherPoints = p.points;\n    var numPoints = points.length;\n    if (otherPoints.length !== numPoints) return false; // if the two polylines have different number of points, they cannot be equal\n\n    for (var i = 0; i < numPoints; i++) {\n      var point = points[i];\n      var otherPoint = p.points[i];\n\n      // as soon as an inequality is found in points, return false\n      if (!point.equals(otherPoint)) return false;\n    }\n\n    // if no inequality found in points, return true\n    return true;\n  },\n  intersectionWithLine: function (l) {\n    var line = new Line(l);\n    var intersections = [];\n    var points = this.lengthPoints();\n    var l2 = new Line();\n    for (var i = 0, n = points.length - 1; i < n; i++) {\n      l2.start = points[i];\n      l2.end = points[i + 1];\n      var int = line.intersectionWithLine(l2);\n      if (int) intersections.push(int[0]);\n    }\n    return intersections.length > 0 ? intersections : null;\n  },\n  isDifferentiable: function () {\n    var points = this.points;\n    var numPoints = points.length;\n    if (numPoints === 0) return false;\n    var line = new Line();\n    var n = numPoints - 1;\n    for (var i = 0; i < n; i++) {\n      line.start = points[i];\n      line.end = points[i + 1];\n      // as soon as a differentiable line is found between two points, return true\n      if (line.isDifferentiable()) return true;\n    }\n\n    // if no differentiable line is found between pairs of points, return false\n    return false;\n  },\n  length: function () {\n    var points = this.lengthPoints();\n    var numPoints = points.length;\n    if (numPoints === 0) return 0; // if points array is empty\n\n    var length = 0;\n    var n = numPoints - 1;\n    for (var i = 0; i < n; i++) {\n      length += points[i].distance(points[i + 1]);\n    }\n    return length;\n  },\n  pointAt: function (ratio) {\n    var points = this.lengthPoints();\n    var numPoints = points.length;\n    if (numPoints === 0) return null; // if points array is empty\n    if (numPoints === 1) return points[0].clone(); // if there is only one point\n\n    if (ratio <= 0) return points[0].clone();\n    if (ratio >= 1) return points[numPoints - 1].clone();\n    var polylineLength = this.length();\n    var length = polylineLength * ratio;\n    return this.pointAtLength(length);\n  },\n  pointAtLength: function (length) {\n    var points = this.lengthPoints();\n    var numPoints = points.length;\n    if (numPoints === 0) return null; // if points array is empty\n    if (numPoints === 1) return points[0].clone(); // if there is only one point\n\n    var fromStart = true;\n    if (length < 0) {\n      fromStart = false; // negative lengths mean start calculation from end point\n      length = -length; // absolute value\n    }\n    var l = 0;\n    var n = numPoints - 1;\n    for (var i = 0; i < n; i++) {\n      var index = fromStart ? i : n - 1 - i;\n      var a = points[index];\n      var b = points[index + 1];\n      var line = new Line(a, b);\n      var d = a.distance(b);\n      if (length <= l + d) {\n        return line.pointAtLength((fromStart ? 1 : -1) * (length - l));\n      }\n      l += d;\n    }\n\n    // if length requested is higher than the length of the polyline, return last endpoint\n    var lastPoint = fromStart ? points[numPoints - 1] : points[0];\n    return lastPoint.clone();\n  },\n  round: function (precision) {\n    var points = this.points;\n    var numPoints = points.length;\n    for (var i = 0; i < numPoints; i++) {\n      points[i].round(precision);\n    }\n    return this;\n  },\n  scale: function (sx, sy, origin) {\n    var points = this.points;\n    var numPoints = points.length;\n    for (var i = 0; i < numPoints; i++) {\n      points[i].scale(sx, sy, origin);\n    }\n    return this;\n  },\n  simplify: function (opt = {}) {\n    const points = this.points;\n    if (points.length < 3) return this; // we need at least 3 points\n\n    // TODO: we may also accept startIndex and endIndex to specify where to start and end simplification\n\n    // Due to the nature of the algorithm, we do not use 0 as the default value for `threshold`\n    // because of the rounding errors that can occur when comparing distances.\n    const threshold = opt.threshold || 1e-10; // = max distance of middle point from chord to be simplified\n\n    // start at the beginning of the polyline and go forward\n    let currentIndex = 0;\n    // we need at least one intermediate point (3 points) in every iteration\n    // as soon as that stops being true, we know we reached the end of the polyline\n    while (points[currentIndex + 2]) {\n      const firstIndex = currentIndex;\n      const middleIndex = currentIndex + 1;\n      const lastIndex = currentIndex + 2;\n      const firstPoint = points[firstIndex];\n      const middlePoint = points[middleIndex];\n      const lastPoint = points[lastIndex];\n      const chord = new Line(firstPoint, lastPoint); // = connection between first and last point\n      const closestPoint = chord.closestPoint(middlePoint); // = closest point on chord from middle point\n      const closestPointDistance = closestPoint.distance(middlePoint);\n      if (closestPointDistance <= threshold) {\n        // middle point is close enough to the chord = simplify\n        // 1) remove middle point:\n        points.splice(middleIndex, 1);\n        // 2) in next iteration, investigate the newly-created triplet of points\n        //    - do not change `currentIndex`\n        //    = (first point stays, point after removed point becomes middle point)\n      } else {\n        // middle point is far from the chord\n        // 1) preserve middle point\n        // 2) in next iteration, move `currentIndex` by one step:\n        currentIndex += 1;\n        //    = (point after first point becomes first point)\n      }\n    }\n\n    // `points` array was modified in-place\n    return this;\n  },\n  tangentAt: function (ratio) {\n    var points = this.lengthPoints();\n    var numPoints = points.length;\n    if (numPoints === 0) return null; // if points array is empty\n    if (numPoints === 1) return null; // if there is only one point\n\n    if (ratio < 0) ratio = 0;\n    if (ratio > 1) ratio = 1;\n    var polylineLength = this.length();\n    var length = polylineLength * ratio;\n    return this.tangentAtLength(length);\n  },\n  tangentAtLength: function (length) {\n    var points = this.lengthPoints();\n    var numPoints = points.length;\n    if (numPoints === 0) return null; // if points array is empty\n    if (numPoints === 1) return null; // if there is only one point\n\n    var fromStart = true;\n    if (length < 0) {\n      fromStart = false; // negative lengths mean start calculation from end point\n      length = -length; // absolute value\n    }\n    var lastValidLine; // differentiable (with a tangent)\n    var l = 0; // length so far\n    var n = numPoints - 1;\n    for (var i = 0; i < n; i++) {\n      var index = fromStart ? i : n - 1 - i;\n      var a = points[index];\n      var b = points[index + 1];\n      var line = new Line(a, b);\n      var d = a.distance(b);\n      if (line.isDifferentiable()) {\n        // has a tangent line (line length is not 0)\n        if (length <= l + d) {\n          return line.tangentAtLength((fromStart ? 1 : -1) * (length - l));\n        }\n        lastValidLine = line;\n      }\n      l += d;\n    }\n\n    // if length requested is higher than the length of the polyline, return last valid endpoint\n    if (lastValidLine) {\n      var ratio = fromStart ? 1 : 0;\n      return lastValidLine.tangentAt(ratio);\n    }\n\n    // if no valid line, return null\n    return null;\n  },\n  toString: function () {\n    return this.points + '';\n  },\n  translate: function (tx, ty) {\n    var points = this.points;\n    var numPoints = points.length;\n    for (var i = 0; i < numPoints; i++) {\n      points[i].translate(tx, ty);\n    }\n    return this;\n  },\n  // Return svgString that can be used to recreate this line.\n  serialize: function () {\n    var points = this.points;\n    var numPoints = points.length;\n    if (numPoints === 0) return ''; // if points array is empty\n\n    var output = '';\n    for (var i = 0; i < numPoints; i++) {\n      var point = points[i];\n      output += point.x + ',' + point.y + ' ';\n    }\n    return output.trim();\n  }\n};\nObject.defineProperty(Polyline.prototype, 'start', {\n  // Getter for the first point of the polyline.\n\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    var points = this.points;\n    var numPoints = points.length;\n    if (numPoints === 0) return null; // if points array is empty\n\n    return this.points[0];\n  }\n});\nObject.defineProperty(Polyline.prototype, 'end', {\n  // Getter for the last point of the polyline.\n\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    var points = this.points;\n    var numPoints = points.length;\n    if (numPoints === 0) return null; // if points array is empty\n\n    return this.points[numPoints - 1];\n  }\n});", "import { Point } from './point.mjs';\nimport { Rect } from './rect.mjs';\nimport { Line } from './line.mjs';\nimport { Polyline } from './polyline.mjs';\nimport { types } from './types.mjs';\nconst {\n  abs,\n  sqrt,\n  min,\n  max,\n  pow\n} = Math;\nexport const Curve = function (p1, p2, p3, p4) {\n  if (!(this instanceof Curve)) {\n    return new Curve(p1, p2, p3, p4);\n  }\n  if (p1 instanceof Curve) {\n    return new Curve(p1.start, p1.controlPoint1, p1.controlPoint2, p1.end);\n  }\n  this.start = new Point(p1);\n  this.controlPoint1 = new Point(p2);\n  this.controlPoint2 = new Point(p3);\n  this.end = new Point(p4);\n};\n\n// Curve passing through points.\n// Ported from C# implementation by Oleg V. Polikarpotchkin and Peter Lee (http://www.codeproject.com/KB/graphics/BezierSpline.aspx).\n// @param {array} points Array of points through which the smooth line will go.\n// @return {array} curves.\nCurve.throughPoints = function () {\n  // Get open-ended Bezier Spline Control Points.\n  // @param knots Input Knot Bezier spline points (At least two points!).\n  // @param firstControlPoints Output First Control points. Array of knots.length - 1 length.\n  // @param secondControlPoints Output Second Control points. Array of knots.length - 1 length.\n  function getCurveControlPoints(knots) {\n    var firstControlPoints = [];\n    var secondControlPoints = [];\n    var n = knots.length - 1;\n    var i;\n\n    // Special case: Bezier curve should be a straight line.\n    if (n == 1) {\n      // 3P1 = 2P0 + P3\n      firstControlPoints[0] = new Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n\n      // P2 = 2P1  P0\n      secondControlPoints[0] = new Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n      return [firstControlPoints, secondControlPoints];\n    }\n\n    // Calculate first Bezier control points.\n    // Right hand side vector.\n    var rhs = [];\n\n    // Set right hand side X values.\n    for (i = 1; i < n - 1; i++) {\n      rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n    }\n    rhs[0] = knots[0].x + 2 * knots[1].x;\n    rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n\n    // Get first control points X-values.\n    var x = getFirstControlPoints(rhs);\n\n    // Set right hand side Y values.\n    for (i = 1; i < n - 1; ++i) {\n      rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n    }\n    rhs[0] = knots[0].y + 2 * knots[1].y;\n    rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n\n    // Get first control points Y-values.\n    var y = getFirstControlPoints(rhs);\n\n    // Fill output arrays.\n    for (i = 0; i < n; i++) {\n      // First control point.\n      firstControlPoints.push(new Point(x[i], y[i]));\n\n      // Second control point.\n      if (i < n - 1) {\n        secondControlPoints.push(new Point(2 * knots[i + 1].x - x[i + 1], 2 * knots[i + 1].y - y[i + 1]));\n      } else {\n        secondControlPoints.push(new Point((knots[n].x + x[n - 1]) / 2, (knots[n].y + y[n - 1]) / 2));\n      }\n    }\n    return [firstControlPoints, secondControlPoints];\n  }\n\n  // Solves a tridiagonal system for one of coordinates (x or y) of first Bezier control points.\n  // @param rhs Right hand side vector.\n  // @return Solution vector.\n  function getFirstControlPoints(rhs) {\n    var n = rhs.length;\n    // `x` is a solution vector.\n    var x = [];\n    var tmp = [];\n    var b = 2.0;\n    x[0] = rhs[0] / b;\n\n    // Decomposition and forward substitution.\n    for (var i = 1; i < n; i++) {\n      tmp[i] = 1 / b;\n      b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n      x[i] = (rhs[i] - x[i - 1]) / b;\n    }\n    for (i = 1; i < n; i++) {\n      // Backsubstitution.\n      x[n - i - 1] -= tmp[n - i] * x[n - i];\n    }\n    return x;\n  }\n  return function (points) {\n    if (!points || Array.isArray(points) && points.length < 2) {\n      throw new Error('At least 2 points are required');\n    }\n    var controlPoints = getCurveControlPoints(points);\n    var curves = [];\n    var n = controlPoints[0].length;\n    for (var i = 0; i < n; i++) {\n      var controlPoint1 = new Point(controlPoints[0][i].x, controlPoints[0][i].y);\n      var controlPoint2 = new Point(controlPoints[1][i].x, controlPoints[1][i].y);\n      curves.push(new Curve(points[i], controlPoint1, controlPoint2, points[i + 1]));\n    }\n    return curves;\n  };\n}();\nCurve.prototype = {\n  type: types.Curve,\n  // Returns a bbox that tightly envelops the curve.\n  bbox: function () {\n    var start = this.start;\n    var controlPoint1 = this.controlPoint1;\n    var controlPoint2 = this.controlPoint2;\n    var end = this.end;\n    var x0 = start.x;\n    var y0 = start.y;\n    var x1 = controlPoint1.x;\n    var y1 = controlPoint1.y;\n    var x2 = controlPoint2.x;\n    var y2 = controlPoint2.y;\n    var x3 = end.x;\n    var y3 = end.y;\n    var points = new Array(); // local extremes\n    var tvalues = new Array(); // t values of local extremes\n    var bounds = [new Array(), new Array()];\n    var a, b, c, t;\n    var t1, t2;\n    var b2ac, sqrtb2ac;\n    for (var i = 0; i < 2; ++i) {\n      if (i === 0) {\n        b = 6 * x0 - 12 * x1 + 6 * x2;\n        a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n        c = 3 * x1 - 3 * x0;\n      } else {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n      if (abs(a) < 1e-12) {\n        // Numerical robustness\n        if (abs(b) < 1e-12) {\n          // Numerical robustness\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) tvalues.push(t);\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      sqrtb2ac = sqrt(b2ac);\n      if (b2ac < 0) continue;\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) tvalues.push(t1);\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) tvalues.push(t2);\n    }\n    var j = tvalues.length;\n    var jlen = j;\n    var mt;\n    var x, y;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      x = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;\n      bounds[0][j] = x;\n      y = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;\n      bounds[1][j] = y;\n      points[j] = {\n        X: x,\n        Y: y\n      };\n    }\n    tvalues[jlen] = 0;\n    tvalues[jlen + 1] = 1;\n    points[jlen] = {\n      X: x0,\n      Y: y0\n    };\n    points[jlen + 1] = {\n      X: x3,\n      Y: y3\n    };\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    tvalues.length = jlen + 2;\n    bounds[0].length = jlen + 2;\n    bounds[1].length = jlen + 2;\n    points.length = jlen + 2;\n    var left = min.apply(null, bounds[0]);\n    var top = min.apply(null, bounds[1]);\n    var right = max.apply(null, bounds[0]);\n    var bottom = max.apply(null, bounds[1]);\n    return new Rect(left, top, right - left, bottom - top);\n  },\n  clone: function () {\n    return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n  },\n  // Returns the point on the curve closest to point `p`\n  closestPoint: function (p, opt) {\n    return this.pointAtT(this.closestPointT(p, opt));\n  },\n  closestPointLength: function (p, opt) {\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n      precision: precision\n    }) : opt.subdivisions;\n    var localOpt = {\n      precision: precision,\n      subdivisions: subdivisions\n    };\n    return this.lengthAtT(this.closestPointT(p, localOpt), localOpt);\n  },\n  closestPointNormalizedLength: function (p, opt) {\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n      precision: precision\n    }) : opt.subdivisions;\n    var localOpt = {\n      precision: precision,\n      subdivisions: subdivisions\n    };\n    var cpLength = this.closestPointLength(p, localOpt);\n    if (!cpLength) return 0;\n    var length = this.length(localOpt);\n    if (length === 0) return 0;\n    return cpLength / length;\n  },\n  // Returns `t` of the point on the curve closest to point `p`\n  closestPointT: function (p, opt) {\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n      precision: precision\n    }) : opt.subdivisions;\n    // does not use localOpt\n\n    // identify the subdivision that contains the point:\n    var investigatedSubdivision;\n    var investigatedSubdivisionStartT; // assume that subdivisions are evenly spaced\n    var investigatedSubdivisionEndT;\n    var distFromStart; // distance of point from start of baseline\n    var distFromEnd; // distance of point from end of baseline\n    var chordLength; // distance between start and end of the subdivision\n    var minSumDist; // lowest observed sum of the two distances\n    var n = subdivisions.length;\n    var subdivisionSize = n ? 1 / n : 0;\n    for (var i = 0; i < n; i++) {\n      var currentSubdivision = subdivisions[i];\n      var startDist = currentSubdivision.start.distance(p);\n      var endDist = currentSubdivision.end.distance(p);\n      var sumDist = startDist + endDist;\n\n      // check that the point is closest to current subdivision and not any other\n      if (!minSumDist || sumDist < minSumDist) {\n        investigatedSubdivision = currentSubdivision;\n        investigatedSubdivisionStartT = i * subdivisionSize;\n        investigatedSubdivisionEndT = (i + 1) * subdivisionSize;\n        distFromStart = startDist;\n        distFromEnd = endDist;\n        chordLength = currentSubdivision.start.distance(currentSubdivision.end);\n        minSumDist = sumDist;\n      }\n    }\n    var precisionRatio = pow(10, -precision);\n\n    // recursively divide investigated subdivision:\n    // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n    // then return the closest endpoint of that final subdivision\n    while (true) {\n      // check if we have reached at least one required observed precision\n      // - calculated as: the difference in distances from point to start and end divided by the distance\n      // - note that this function is not monotonic = it doesn't converge stably but has \"teeth\"\n      // - the function decreases while one of the endpoints is fixed but \"jumps\" whenever we switch\n      // - this criterion works well for points lying far away from the curve\n      var startPrecisionRatio = distFromStart ? abs(distFromStart - distFromEnd) / distFromStart : 0;\n      var endPrecisionRatio = distFromEnd ? abs(distFromStart - distFromEnd) / distFromEnd : 0;\n      var hasRequiredPrecision = startPrecisionRatio < precisionRatio || endPrecisionRatio < precisionRatio;\n\n      // check if we have reached at least one required minimal distance\n      // - calculated as: the subdivision chord length multiplied by precisionRatio\n      // - calculation is relative so it will work for arbitrarily large/small curves and their subdivisions\n      // - this is a backup criterion that works well for points lying \"almost at\" the curve\n      var hasMinimalStartDistance = distFromStart ? distFromStart < chordLength * precisionRatio : true;\n      var hasMinimalEndDistance = distFromEnd ? distFromEnd < chordLength * precisionRatio : true;\n      var hasMinimalDistance = hasMinimalStartDistance || hasMinimalEndDistance;\n\n      // do we stop now?\n      if (hasRequiredPrecision || hasMinimalDistance) {\n        return distFromStart <= distFromEnd ? investigatedSubdivisionStartT : investigatedSubdivisionEndT;\n      }\n\n      // otherwise, set up for next iteration\n      var divided = investigatedSubdivision.divide(0.5);\n      subdivisionSize /= 2;\n      var startDist1 = divided[0].start.distance(p);\n      var endDist1 = divided[0].end.distance(p);\n      var sumDist1 = startDist1 + endDist1;\n      var startDist2 = divided[1].start.distance(p);\n      var endDist2 = divided[1].end.distance(p);\n      var sumDist2 = startDist2 + endDist2;\n      if (sumDist1 <= sumDist2) {\n        investigatedSubdivision = divided[0];\n        investigatedSubdivisionEndT -= subdivisionSize; // subdivisionSize was already halved\n\n        distFromStart = startDist1;\n        distFromEnd = endDist1;\n      } else {\n        investigatedSubdivision = divided[1];\n        investigatedSubdivisionStartT += subdivisionSize; // subdivisionSize was already halved\n\n        distFromStart = startDist2;\n        distFromEnd = endDist2;\n      }\n    }\n  },\n  closestPointTangent: function (p, opt) {\n    return this.tangentAtT(this.closestPointT(p, opt));\n  },\n  // Returns `true` if the area surrounded by the curve contains the point `p`.\n  // Implements the even-odd algorithm (self-intersections are \"outside\").\n  // Closes open curves (always imagines a closing segment).\n  // Precision may be adjusted by passing an `opt` object.\n  containsPoint: function (p, opt) {\n    var polyline = this.toPolyline(opt);\n    return polyline.containsPoint(p);\n  },\n  // Divides the curve into two at requested `ratio` between 0 and 1 with precision better than `opt.precision`; optionally using `opt.subdivisions` provided.\n  // For a function that uses `t`, use Curve.divideAtT().\n  divideAt: function (ratio, opt) {\n    if (ratio <= 0) return this.divideAtT(0);\n    if (ratio >= 1) return this.divideAtT(1);\n    var t = this.tAt(ratio, opt);\n    return this.divideAtT(t);\n  },\n  // Divides the curve into two at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n  divideAtLength: function (length, opt) {\n    var t = this.tAtLength(length, opt);\n    return this.divideAtT(t);\n  },\n  // Divides the curve into two at point defined by `t` between 0 and 1.\n  // Using de Casteljau's algorithm (http://math.stackexchange.com/a/317867).\n  // Additional resource: https://pomax.github.io/bezierinfo/#decasteljau\n  divideAtT: function (t) {\n    var start = this.start;\n    var controlPoint1 = this.controlPoint1;\n    var controlPoint2 = this.controlPoint2;\n    var end = this.end;\n\n    // shortcuts for `t` values that are out of range\n    if (t <= 0) {\n      return [new Curve(start, start, start, start), new Curve(start, controlPoint1, controlPoint2, end)];\n    }\n    if (t >= 1) {\n      return [new Curve(start, controlPoint1, controlPoint2, end), new Curve(end, end, end, end)];\n    }\n    var dividerPoints = this.getSkeletonPoints(t);\n    var startControl1 = dividerPoints.startControlPoint1;\n    var startControl2 = dividerPoints.startControlPoint2;\n    var divider = dividerPoints.divider;\n    var dividerControl1 = dividerPoints.dividerControlPoint1;\n    var dividerControl2 = dividerPoints.dividerControlPoint2;\n\n    // return array with two new curves\n    return [new Curve(start, startControl1, startControl2, divider), new Curve(divider, dividerControl1, dividerControl2, end)];\n  },\n  // Returns the distance between the curve's start and end points.\n  endpointDistance: function () {\n    return this.start.distance(this.end);\n  },\n  // Checks whether two curves are exactly the same.\n  equals: function (c) {\n    return !!c && this.start.x === c.start.x && this.start.y === c.start.y && this.controlPoint1.x === c.controlPoint1.x && this.controlPoint1.y === c.controlPoint1.y && this.controlPoint2.x === c.controlPoint2.x && this.controlPoint2.y === c.controlPoint2.y && this.end.x === c.end.x && this.end.y === c.end.y;\n  },\n  // Returns five helper points necessary for curve division.\n  getSkeletonPoints: function (t) {\n    var start = this.start;\n    var control1 = this.controlPoint1;\n    var control2 = this.controlPoint2;\n    var end = this.end;\n\n    // shortcuts for `t` values that are out of range\n    if (t <= 0) {\n      return {\n        startControlPoint1: start.clone(),\n        startControlPoint2: start.clone(),\n        divider: start.clone(),\n        dividerControlPoint1: control1.clone(),\n        dividerControlPoint2: control2.clone()\n      };\n    }\n    if (t >= 1) {\n      return {\n        startControlPoint1: control1.clone(),\n        startControlPoint2: control2.clone(),\n        divider: end.clone(),\n        dividerControlPoint1: end.clone(),\n        dividerControlPoint2: end.clone()\n      };\n    }\n    var midpoint1 = new Line(start, control1).pointAt(t);\n    var midpoint2 = new Line(control1, control2).pointAt(t);\n    var midpoint3 = new Line(control2, end).pointAt(t);\n    var subControl1 = new Line(midpoint1, midpoint2).pointAt(t);\n    var subControl2 = new Line(midpoint2, midpoint3).pointAt(t);\n    var divider = new Line(subControl1, subControl2).pointAt(t);\n    var output = {\n      startControlPoint1: midpoint1,\n      startControlPoint2: subControl1,\n      divider: divider,\n      dividerControlPoint1: subControl2,\n      dividerControlPoint2: midpoint3\n    };\n    return output;\n  },\n  // Returns a list of curves whose flattened length is better than `opt.precision`.\n  // That is, observed difference in length between recursions is less than 10^(-3) = 0.001 = 0.1%\n  // (Observed difference is not real precision, but close enough as long as special cases are covered)\n  // As a rule of thumb, increasing `precision` by 1 requires 2 more iterations (= levels of division operations)\n  // - Precision 0 (endpointDistance) - 0 iterations => total of 2^0 - 1 = 0 operations (1 subdivision)\n  // - Precision 1 (<10% error) - 2 iterations => total of 2^2 - 1 = 3 operations (4 subdivisions)\n  // - Precision 2 (<1% error) - 4 iterations => total of 2^4 - 1 = 15 operations requires 4 division operations on all elements (15 operations total) (16 subdivisions)\n  // - Precision 3 (<0.1% error) - 6 iterations => total of 2^6 - 1 = 63 operations - acceptable when drawing (64 subdivisions)\n  // - Precision 4 (<0.01% error) - 8 iterations => total of 2^8 - 1 = 255 operations - high resolution, can be used to interpolate `t` (256 subdivisions)\n  // (Variation of 1 recursion worse or better is possible depending on the curve, doubling/halving the number of operations accordingly)\n  getSubdivisions: function (opt) {\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    // not using opt.subdivisions\n    // not using localOpt\n\n    var start = this.start;\n    var control1 = this.controlPoint1;\n    var control2 = this.controlPoint2;\n    var end = this.end;\n    var subdivisions = [new Curve(start, control1, control2, end)];\n    if (precision === 0) return subdivisions;\n\n    // special case #1: point-like curves\n    // - no need to calculate subdivisions, they would all be identical\n    var isPoint = !this.isDifferentiable();\n    if (isPoint) return subdivisions;\n    var previousLength = this.endpointDistance();\n    var precisionRatio = pow(10, -precision);\n\n    // special case #2: sine-like curves may have the same observed length in iteration 0 and 1 - skip iteration 1\n    // - not a problem for further iterations because cubic curves cannot have more than two local extrema\n    // - (i.e. cubic curves cannot intersect the baseline more than once)\n    // - therefore starting from iteration = 2 ensures that subsequent iterations do not produce sampling with equal length\n    // - (unless it's a straight-line curve, see below)\n    var minIterations = 2; // = 2*1\n\n    // special case #3: straight-line curves have the same observed length in all iterations\n    // - this causes observed precision ratio to always be 0 (= lower than `precisionRatio`, which is our exit condition)\n    // - we enforce the expected number of iterations = 2 * precision\n    var isLine = control1.cross(start, end) === 0 && control2.cross(start, end) === 0;\n    if (isLine) {\n      minIterations = 2 * precision;\n    }\n\n    // recursively divide curve at `t = 0.5`\n    // until we reach `minIterations`\n    // and until the difference between observed length at subsequent iterations is lower than `precision`\n    var iteration = 0;\n    while (true) {\n      iteration += 1;\n\n      // divide all subdivisions\n      var newSubdivisions = [];\n      var numSubdivisions = subdivisions.length;\n      for (var i = 0; i < numSubdivisions; i++) {\n        var currentSubdivision = subdivisions[i];\n        var divided = currentSubdivision.divide(0.5); // dividing at t = 0.5 (not at middle length!)\n        newSubdivisions.push(divided[0], divided[1]);\n      }\n\n      // measure new length\n      var length = 0;\n      var numNewSubdivisions = newSubdivisions.length;\n      for (var j = 0; j < numNewSubdivisions; j++) {\n        var currentNewSubdivision = newSubdivisions[j];\n        length += currentNewSubdivision.endpointDistance();\n      }\n\n      // check if we have reached minimum number of iterations\n      if (iteration >= minIterations) {\n        // check if we have reached required observed precision\n        var observedPrecisionRatio = length !== 0 ? (length - previousLength) / length : 0;\n        if (observedPrecisionRatio < precisionRatio) {\n          return newSubdivisions;\n        }\n      }\n\n      // otherwise, set up for next iteration\n      subdivisions = newSubdivisions;\n      previousLength = length;\n    }\n  },\n  isDifferentiable: function () {\n    var start = this.start;\n    var control1 = this.controlPoint1;\n    var control2 = this.controlPoint2;\n    var end = this.end;\n    return !(start.equals(control1) && control1.equals(control2) && control2.equals(end));\n  },\n  // Returns flattened length of the curve with precision better than `opt.precision`; or using `opt.subdivisions` provided.\n  length: function (opt) {\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision; // opt.precision only used in getSubdivisions() call\n    var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n      precision: precision\n    }) : opt.subdivisions;\n    // not using localOpt\n\n    var length = 0;\n    var n = subdivisions.length;\n    for (var i = 0; i < n; i++) {\n      var currentSubdivision = subdivisions[i];\n      length += currentSubdivision.endpointDistance();\n    }\n    return length;\n  },\n  // Returns distance along the curve up to `t` with precision better than requested `opt.precision`. (Not using `opt.subdivisions`.)\n  lengthAtT: function (t, opt) {\n    if (t <= 0) return 0;\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    // not using opt.subdivisions\n    // not using localOpt\n\n    var subCurve = this.divide(t)[0];\n    var subCurveLength = subCurve.length({\n      precision: precision\n    });\n    return subCurveLength;\n  },\n  // Returns point at requested `ratio` between 0 and 1 with precision better than `opt.precision`; optionally using `opt.subdivisions` provided.\n  // Mirrors Line.pointAt() function.\n  // For a function that tracks `t`, use Curve.pointAtT().\n  pointAt: function (ratio, opt) {\n    if (ratio <= 0) return this.start.clone();\n    if (ratio >= 1) return this.end.clone();\n    var t = this.tAt(ratio, opt);\n    return this.pointAtT(t);\n  },\n  // Returns point at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n  pointAtLength: function (length, opt) {\n    var t = this.tAtLength(length, opt);\n    return this.pointAtT(t);\n  },\n  // Returns the point at provided `t` between 0 and 1.\n  // `t` does not track distance along curve as it does in Line objects.\n  // Non-linear relationship, speeds up and slows down as curve warps!\n  // For linear length-based solution, use Curve.pointAt().\n  pointAtT: function (t) {\n    if (t <= 0) return this.start.clone();\n    if (t >= 1) return this.end.clone();\n    return this.getSkeletonPoints(t).divider;\n  },\n  // Default precision\n  PRECISION: 3,\n  round: function (precision) {\n    this.start.round(precision);\n    this.controlPoint1.round(precision);\n    this.controlPoint2.round(precision);\n    this.end.round(precision);\n    return this;\n  },\n  scale: function (sx, sy, origin) {\n    this.start.scale(sx, sy, origin);\n    this.controlPoint1.scale(sx, sy, origin);\n    this.controlPoint2.scale(sx, sy, origin);\n    this.end.scale(sx, sy, origin);\n    return this;\n  },\n  // Returns a tangent line at requested `ratio` with precision better than requested `opt.precision`; or using `opt.subdivisions` provided.\n  tangentAt: function (ratio, opt) {\n    if (!this.isDifferentiable()) return null;\n    if (ratio < 0) ratio = 0;else if (ratio > 1) ratio = 1;\n    var t = this.tAt(ratio, opt);\n    return this.tangentAtT(t);\n  },\n  // Returns a tangent line at requested `length` with precision better than requested `opt.precision`; or using `opt.subdivisions` provided.\n  tangentAtLength: function (length, opt) {\n    if (!this.isDifferentiable()) return null;\n    var t = this.tAtLength(length, opt);\n    return this.tangentAtT(t);\n  },\n  // Returns a tangent line at requested `t`.\n  tangentAtT: function (t) {\n    if (!this.isDifferentiable()) return null;\n    if (t < 0) t = 0;else if (t > 1) t = 1;\n    var skeletonPoints = this.getSkeletonPoints(t);\n    var p1 = skeletonPoints.startControlPoint2;\n    var p2 = skeletonPoints.dividerControlPoint1;\n    var tangentStart = skeletonPoints.divider;\n    var tangentLine = new Line(p1, p2);\n    tangentLine.translate(tangentStart.x - p1.x, tangentStart.y - p1.y); // move so that tangent line starts at the point requested\n\n    return tangentLine;\n  },\n  // Returns `t` at requested `ratio` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n  tAt: function (ratio, opt) {\n    if (ratio <= 0) return 0;\n    if (ratio >= 1) return 1;\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n      precision: precision\n    }) : opt.subdivisions;\n    var localOpt = {\n      precision: precision,\n      subdivisions: subdivisions\n    };\n    var curveLength = this.length(localOpt);\n    var length = curveLength * ratio;\n    return this.tAtLength(length, localOpt);\n  },\n  // Returns `t` at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n  // Uses `precision` to approximate length within `precision` (always underestimates)\n  // Then uses a binary search to find the `t` of a subdivision endpoint that is close (within `precision`) to the `length`, if the curve was as long as approximated\n  // As a rule of thumb, increasing `precision` by 1 causes the algorithm to go 2^(precision - 1) deeper\n  // - Precision 0 (chooses one of the two endpoints) - 0 levels\n  // - Precision 1 (chooses one of 5 points, <10% error) - 1 level\n  // - Precision 2 (<1% error) - 3 levels\n  // - Precision 3 (<0.1% error) - 7 levels\n  // - Precision 4 (<0.01% error) - 15 levels\n  tAtLength: function (length, opt) {\n    var fromStart = true;\n    if (length < 0) {\n      fromStart = false; // negative lengths mean start calculation from end point\n      length = -length; // absolute value\n    }\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n      precision: precision\n    }) : opt.subdivisions;\n    var localOpt = {\n      precision: precision,\n      subdivisions: subdivisions\n    };\n\n    // identify the subdivision that contains the point at requested `length`:\n    var investigatedSubdivision;\n    var investigatedSubdivisionStartT; // assume that subdivisions are evenly spaced\n    var investigatedSubdivisionEndT;\n    //var baseline; // straightened version of subdivision to investigate\n    //var baselinePoint; // point on the baseline that is the requested distance away from start\n    var baselinePointDistFromStart; // distance of baselinePoint from start of baseline\n    var baselinePointDistFromEnd; // distance of baselinePoint from end of baseline\n    var l = 0; // length so far\n    var n = subdivisions.length;\n    var subdivisionSize = 1 / n;\n    for (var i = 0; i < n; i++) {\n      var index = fromStart ? i : n - 1 - i;\n      var currentSubdivision = subdivisions[i];\n      var d = currentSubdivision.endpointDistance(); // length of current subdivision\n\n      if (length <= l + d) {\n        investigatedSubdivision = currentSubdivision;\n        investigatedSubdivisionStartT = index * subdivisionSize;\n        investigatedSubdivisionEndT = (index + 1) * subdivisionSize;\n        baselinePointDistFromStart = fromStart ? length - l : d + l - length;\n        baselinePointDistFromEnd = fromStart ? d + l - length : length - l;\n        break;\n      }\n      l += d;\n    }\n    if (!investigatedSubdivision) return fromStart ? 1 : 0; // length requested is out of range - return maximum t\n    // note that precision affects what length is recorded\n    // (imprecise measurements underestimate length by up to 10^(-precision) of the precise length)\n    // e.g. at precision 1, the length may be underestimated by up to 10% and cause this function to return 1\n\n    var curveLength = this.length(localOpt);\n    var precisionRatio = pow(10, -precision);\n\n    // recursively divide investigated subdivision:\n    // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n    // then return the closest endpoint of that final subdivision\n    while (true) {\n      // check if we have reached required observed precision\n      var observedPrecisionRatio;\n      observedPrecisionRatio = curveLength !== 0 ? baselinePointDistFromStart / curveLength : 0;\n      if (observedPrecisionRatio < precisionRatio) return investigatedSubdivisionStartT;\n      observedPrecisionRatio = curveLength !== 0 ? baselinePointDistFromEnd / curveLength : 0;\n      if (observedPrecisionRatio < precisionRatio) return investigatedSubdivisionEndT;\n\n      // otherwise, set up for next iteration\n      var newBaselinePointDistFromStart;\n      var newBaselinePointDistFromEnd;\n      var divided = investigatedSubdivision.divide(0.5);\n      subdivisionSize /= 2;\n      var baseline1Length = divided[0].endpointDistance();\n      var baseline2Length = divided[1].endpointDistance();\n      if (baselinePointDistFromStart <= baseline1Length) {\n        // point at requested length is inside divided[0]\n        investigatedSubdivision = divided[0];\n        investigatedSubdivisionEndT -= subdivisionSize; // sudivisionSize was already halved\n\n        newBaselinePointDistFromStart = baselinePointDistFromStart;\n        newBaselinePointDistFromEnd = baseline1Length - newBaselinePointDistFromStart;\n      } else {\n        // point at requested length is inside divided[1]\n        investigatedSubdivision = divided[1];\n        investigatedSubdivisionStartT += subdivisionSize; // subdivisionSize was already halved\n\n        newBaselinePointDistFromStart = baselinePointDistFromStart - baseline1Length;\n        newBaselinePointDistFromEnd = baseline2Length - newBaselinePointDistFromStart;\n      }\n      baselinePointDistFromStart = newBaselinePointDistFromStart;\n      baselinePointDistFromEnd = newBaselinePointDistFromEnd;\n    }\n  },\n  // Returns an array of points that represents the curve when flattened, up to `opt.precision`; or using `opt.subdivisions` provided.\n  // Flattened length is no more than 10^(-precision) away from real curve length.\n  toPoints: function (opt) {\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision; // opt.precision only used in getSubdivisions() call\n    var subdivisions = opt.subdivisions === undefined ? this.getSubdivisions({\n      precision: precision\n    }) : opt.subdivisions;\n    // not using localOpt\n\n    var points = [subdivisions[0].start.clone()];\n    var n = subdivisions.length;\n    for (var i = 0; i < n; i++) {\n      var currentSubdivision = subdivisions[i];\n      points.push(currentSubdivision.end.clone());\n    }\n    return points;\n  },\n  // Returns a polyline that represents the curve when flattened, up to `opt.precision`; or using `opt.subdivisions` provided.\n  // Flattened length is no more than 10^(-precision) away from real curve length.\n  toPolyline: function (opt) {\n    return new Polyline(this.toPoints(opt));\n  },\n  toString: function () {\n    return this.start + ' ' + this.controlPoint1 + ' ' + this.controlPoint2 + ' ' + this.end;\n  },\n  translate: function (tx, ty) {\n    this.start.translate(tx, ty);\n    this.controlPoint1.translate(tx, ty);\n    this.controlPoint2.translate(tx, ty);\n    this.end.translate(tx, ty);\n    return this;\n  }\n};\nCurve.prototype.divide = Curve.prototype.divideAtT;", "// Local helper function.\n// Add properties from arguments on top of properties from `obj`.\n// This allows for rudimentary inheritance.\n// - The `obj` argument acts as parent.\n// - This function creates a new object that inherits all `obj` properties and adds/replaces those that are present in arguments.\n// - A high-level example: calling `extend(Vehicle, Car)` would be akin to declaring `class Car extends Vehicle`.\nexport function extend(obj) {\n  // In JavaScript, the combination of a constructor function (e.g. `g.Line = function(...) {...}`) and prototype (e.g. `g.Line.prototype = {...}) is akin to a C++ class.\n  // - When inheritance is not necessary, we can leave it at that. (This would be akin to calling extend with only `obj`.)\n  // - But, what if we wanted the `g.Line` quasiclass to inherit from another quasiclass (let's call it `g.GeometryObject`) in JavaScript?\n  // - First, realize that both of those quasiclasses would still have their own separate constructor function.\n  // - So what we are actually saying is that we want the `g.Line` prototype to inherit from `g.GeometryObject` prototype.\n  // - This method provides a way to do exactly that.\n  // - It copies parent prototype's properties, then adds extra ones from child prototype/overrides parent prototype properties with child prototype properties.\n  // - Therefore, to continue with the example above:\n  //   - `g.Line.prototype = extend(g.GeometryObject.prototype, linePrototype)`\n  //   - Where `linePrototype` is a properties object that looks just like `g.Line.prototype` does right now.\n  //   - Then, `g.Line` would allow the programmer to access to all methods currently in `g.Line.Prototype`, plus any non-overridden methods from `g.GeometryObject.prototype`.\n  //   - In that aspect, `g.GeometryObject` would then act like the parent of `g.Line`.\n  // - Multiple inheritance is also possible, if multiple arguments are provided.\n  // - What if we wanted to add another level of abstraction between `g.GeometryObject` and `g.Line` (let's call it `g.LinearObject`)?\n  //   - `g.Line.prototype = extend(g.GeometryObject.prototype, g.LinearObject.prototype, linePrototype)`\n  //   - The ancestors are applied in order of appearance.\n  //   - That means that `g.Line` would have inherited from `g.LinearObject` that would have inherited from `g.GeometryObject`.\n  //   - Any number of ancestors may be provided.\n  // - Note that neither `obj` nor any of the arguments need to actually be prototypes of any JavaScript quasiclass, that was just a simplified explanation.\n  // - We can create a new object composed from the properties of any number of other objects (since they do not have a constructor, we can think of those as interfaces).\n  //   - `extend({ a: 1, b: 2 }, { b: 10, c: 20 }, { c: 100, d: 200 })` gives `{ a: 1, b: 10, c: 100, d: 200 }`.\n  //   - Basically, with this function, we can emulate the `extends` keyword as well as the `implements` keyword.\n  // - Therefore, both of the following are valid:\n  //   - `Lineto.prototype = extend(Line.prototype, segmentPrototype, linetoPrototype)`\n  //   - `Moveto.prototype = extend(segmentPrototype, movetoPrototype)`\n\n  var i;\n  var n;\n  var args = [];\n  n = arguments.length;\n  for (i = 1; i < n; i++) {\n    // skip over obj\n    args.push(arguments[i]);\n  }\n  if (!obj) throw new Error('Missing a parent object.');\n  var child = Object.create(obj);\n  n = args.length;\n  for (i = 0; i < n; i++) {\n    var src = args[i];\n    var inheritedProperty;\n    var key;\n    for (key in src) {\n      if (src.hasOwnProperty(key)) {\n        delete child[key]; // delete property inherited from parent\n        inheritedProperty = Object.getOwnPropertyDescriptor(src, key); // get new definition of property from src\n        Object.defineProperty(child, key, inheritedProperty); // re-add property with new definition (includes getter/setter methods)\n      }\n    }\n  }\n  return child;\n}", "// Accepts path data string, array of segments, array of Curves and/or Lines, or a Polyline.\n// Path created is not guaranteed to be a valid (serializable) path (might not start with an M).\nimport { Polyline } from './polyline.mjs';\nimport { Rect } from './rect.mjs';\nimport { Point } from './point.mjs';\nimport { Line } from './line.mjs';\nimport { Curve } from './curve.mjs';\nimport { types } from './types.mjs';\nimport { extend } from './extend.mjs';\nexport const Path = function (arg) {\n  if (!(this instanceof Path)) {\n    return new Path(arg);\n  }\n  if (typeof arg === 'string') {\n    // create from a path data string\n    return new Path.parse(arg);\n  }\n  this.segments = [];\n  var i;\n  var n;\n  if (!arg) {\n    // don't do anything\n  } else if (Array.isArray(arg) && arg.length !== 0) {\n    // if arg is a non-empty array\n    // flatten one level deep\n    // so we can chain arbitrary Path.createSegment results\n    arg = arg.reduce(function (acc, val) {\n      return acc.concat(val);\n    }, []);\n    n = arg.length;\n    if (arg[0].isSegment) {\n      // create from an array of segments\n      for (i = 0; i < n; i++) {\n        var segment = arg[i];\n        this.appendSegment(segment);\n      }\n    } else {\n      // create from an array of Curves and/or Lines\n      var previousObj = null;\n      for (i = 0; i < n; i++) {\n        var obj = arg[i];\n        if (!(obj instanceof Line || obj instanceof Curve)) {\n          throw new Error('Cannot construct a path segment from the provided object.');\n        }\n        if (i === 0) this.appendSegment(Path.createSegment('M', obj.start));\n\n        // if objects do not link up, moveto segments are inserted to cover the gaps\n        if (previousObj && !previousObj.end.equals(obj.start)) this.appendSegment(Path.createSegment('M', obj.start));\n        if (obj instanceof Line) {\n          this.appendSegment(Path.createSegment('L', obj.end));\n        } else if (obj instanceof Curve) {\n          this.appendSegment(Path.createSegment('C', obj.controlPoint1, obj.controlPoint2, obj.end));\n        }\n        previousObj = obj;\n      }\n    }\n  } else if (arg.isSegment) {\n    // create from a single segment\n    this.appendSegment(arg);\n  } else if (arg instanceof Line) {\n    // create from a single Line\n    this.appendSegment(Path.createSegment('M', arg.start));\n    this.appendSegment(Path.createSegment('L', arg.end));\n  } else if (arg instanceof Curve) {\n    // create from a single Curve\n    this.appendSegment(Path.createSegment('M', arg.start));\n    this.appendSegment(Path.createSegment('C', arg.controlPoint1, arg.controlPoint2, arg.end));\n  } else if (arg instanceof Polyline) {\n    // create from a Polyline\n    if (!(arg.points && arg.points.length !== 0)) return; // if Polyline has no points, leave Path empty\n\n    n = arg.points.length;\n    for (i = 0; i < n; i++) {\n      var point = arg.points[i];\n      if (i === 0) this.appendSegment(Path.createSegment('M', point));else this.appendSegment(Path.createSegment('L', point));\n    }\n  } else {\n    // unknown object\n    throw new Error('Cannot construct a path from the provided object.');\n  }\n};\n\n// More permissive than V.normalizePathData and Path.prototype.serialize.\n// Allows path data strings that do not start with a Moveto command (unlike SVG specification).\n// Does not require spaces between elements; commas are allowed, separators may be omitted when unambiguous (e.g. 'ZM10,10', 'L1.6.8', 'M100-200').\n// Allows for command argument chaining.\n// Throws an error if wrong number of arguments is provided with a command.\n// Throws an error if an unrecognized path command is provided (according to Path.segmentTypes). Only a subset of SVG commands is currently supported (L, C, M, Z).\nPath.parse = function (pathData) {\n  if (!pathData) return new Path();\n  var path = new Path();\n  var commandRe = /(?:[a-zA-Z] *)(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)? *,? *)|(?:-?\\.\\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\\d|-|\\.)/g;\n  var commands = pathData.match(commandRe);\n  var numCommands = commands.length;\n  for (var i = 0; i < numCommands; i++) {\n    var command = commands[i];\n    var argRe = /(?:[a-zA-Z])|(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))|(?:(?:-?\\.\\d+))/g;\n    var args = command.match(argRe);\n    var segment = Path.createSegment.apply(this, args); // args = [type, coordinate1, coordinate2...]\n    path.appendSegment(segment);\n  }\n  return path;\n};\n\n// Create a segment or an array of segments.\n// Accepts unlimited points/coords arguments after `type`.\nPath.createSegment = function (type) {\n  if (!type) throw new Error('Type must be provided.');\n  var segmentConstructor = Path.segmentTypes[type];\n  if (!segmentConstructor) throw new Error(type + ' is not a recognized path segment type.');\n  var args = [];\n  var n = arguments.length;\n  for (var i = 1; i < n; i++) {\n    // do not add first element (`type`) to args array\n    args.push(arguments[i]);\n  }\n  return applyToNew(segmentConstructor, args);\n};\nPath.prototype = {\n  type: types.Path,\n  // Accepts one segment or an array of segments as argument.\n  // Throws an error if argument is not a segment or an array of segments.\n  appendSegment: function (arg) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    // works even if path has no segments\n\n    var currentSegment;\n    var previousSegment = numSegments !== 0 ? segments[numSegments - 1] : null; // if we are appending to an empty path, previousSegment is null\n    var nextSegment = null;\n    if (!Array.isArray(arg)) {\n      // arg is a segment\n      if (!arg || !arg.isSegment) throw new Error('Segment required.');\n      currentSegment = this.prepareSegment(arg, previousSegment, nextSegment);\n      segments.push(currentSegment);\n    } else {\n      // arg is an array of segments\n      // flatten one level deep\n      // so we can chain arbitrary Path.createSegment results\n      arg = arg.reduce(function (acc, val) {\n        return acc.concat(val);\n      }, []);\n      if (!arg[0].isSegment) throw new Error('Segments required.');\n      var n = arg.length;\n      for (var i = 0; i < n; i++) {\n        var currentArg = arg[i];\n        currentSegment = this.prepareSegment(currentArg, previousSegment, nextSegment);\n        segments.push(currentSegment);\n        previousSegment = currentSegment;\n      }\n    }\n  },\n  // Returns the bbox of the path.\n  // If path has no segments, returns null.\n  // If path has only invisible segments, returns bbox of the end point of last segment.\n  bbox: function () {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    var bbox;\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      if (segment.isVisible) {\n        var segmentBBox = segment.bbox();\n        bbox = bbox ? bbox.union(segmentBBox) : segmentBBox;\n      }\n    }\n    if (bbox) return bbox;\n\n    // if the path has only invisible elements, return end point of last segment\n    var lastSegment = segments[numSegments - 1];\n    return new Rect(lastSegment.end.x, lastSegment.end.y, 0, 0);\n  },\n  // Returns a new path that is a clone of this path.\n  clone: function () {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    // works even if path has no segments\n\n    var path = new Path();\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i].clone();\n      path.appendSegment(segment);\n    }\n    return path;\n  },\n  closestPoint: function (p, opt) {\n    var t = this.closestPointT(p, opt);\n    if (!t) return null;\n    return this.pointAtT(t);\n  },\n  closestPointLength: function (p, opt) {\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    var localOpt = {\n      precision: precision,\n      segmentSubdivisions: segmentSubdivisions\n    };\n    var t = this.closestPointT(p, localOpt);\n    if (!t) return 0;\n    return this.lengthAtT(t, localOpt);\n  },\n  closestPointNormalizedLength: function (p, opt) {\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    var localOpt = {\n      precision: precision,\n      segmentSubdivisions: segmentSubdivisions\n    };\n    var cpLength = this.closestPointLength(p, localOpt);\n    if (cpLength === 0) return 0; // shortcut\n\n    var length = this.length(localOpt);\n    if (length === 0) return 0; // prevents division by zero\n\n    return cpLength / length;\n  },\n  // Private function.\n  closestPointT: function (p, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    // not using localOpt\n\n    var closestPointT;\n    var minSquaredDistance = Infinity;\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      var subdivisions = segmentSubdivisions[i];\n      if (segment.isVisible) {\n        var segmentClosestPointT = segment.closestPointT(p, {\n          precision: precision,\n          subdivisions: subdivisions\n        });\n        var segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n        var squaredDistance = new Line(segmentClosestPoint, p).squaredLength();\n        if (squaredDistance < minSquaredDistance) {\n          closestPointT = {\n            segmentIndex: i,\n            value: segmentClosestPointT\n          };\n          minSquaredDistance = squaredDistance;\n        }\n      }\n    }\n    if (closestPointT) return closestPointT;\n\n    // if no visible segment, return end of last segment\n    return {\n      segmentIndex: numSegments - 1,\n      value: 1\n    };\n  },\n  closestPointTangent: function (p, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    // not using localOpt\n\n    var closestPointTangent;\n    var minSquaredDistance = Infinity;\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      var subdivisions = segmentSubdivisions[i];\n      if (segment.isDifferentiable()) {\n        var segmentClosestPointT = segment.closestPointT(p, {\n          precision: precision,\n          subdivisions: subdivisions\n        });\n        var segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n        var squaredDistance = new Line(segmentClosestPoint, p).squaredLength();\n        if (squaredDistance < minSquaredDistance) {\n          closestPointTangent = segment.tangentAtT(segmentClosestPointT);\n          minSquaredDistance = squaredDistance;\n        }\n      }\n    }\n    if (closestPointTangent) return closestPointTangent;\n\n    // if no valid segment, return null\n    return null;\n  },\n  // Returns `true` if the area surrounded by the path contains the point `p`.\n  // Implements the even-odd algorithm (self-intersections are \"outside\").\n  // Closes open paths (always imagines a final closing segment).\n  // Precision may be adjusted by passing an `opt` object.\n  containsPoint: function (p, opt) {\n    var polylines = this.toPolylines(opt);\n    if (!polylines) return false; // shortcut (this path has no polylines)\n\n    var numPolylines = polylines.length;\n\n    // how many component polylines does `p` lie within?\n    var numIntersections = 0;\n    for (var i = 0; i < numPolylines; i++) {\n      var polyline = polylines[i];\n      if (polyline.containsPoint(p)) {\n        // `p` lies within this polyline\n        numIntersections++;\n      }\n    }\n\n    // returns `true` for odd numbers of intersections (even-odd algorithm)\n    return numIntersections % 2 === 1;\n  },\n  // Divides the path into two at requested `ratio` between 0 and 1 with precision better than `opt.precision`; optionally using `opt.subdivisions` provided.\n  divideAt: function (ratio, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    if (ratio < 0) ratio = 0;\n    if (ratio > 1) ratio = 1;\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    var localOpt = {\n      precision: precision,\n      segmentSubdivisions: segmentSubdivisions\n    };\n    var pathLength = this.length(localOpt);\n    var length = pathLength * ratio;\n    return this.divideAtLength(length, localOpt);\n  },\n  // Divides the path into two at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n  divideAtLength: function (length, opt) {\n    var numSegments = this.segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    var fromStart = true;\n    if (length < 0) {\n      fromStart = false; // negative lengths mean start calculation from end point\n      length = -length; // absolute value\n    }\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    // not using localOpt\n\n    var i;\n    var segment;\n\n    // identify the segment to divide:\n\n    var l = 0; // length so far\n    var divided;\n    var dividedSegmentIndex;\n    var lastValidSegment; // visible AND differentiable\n    var lastValidSegmentIndex;\n    var t;\n    for (i = 0; i < numSegments; i++) {\n      var index = fromStart ? i : numSegments - 1 - i;\n      segment = this.getSegment(index);\n      var subdivisions = segmentSubdivisions[index];\n      var d = segment.length({\n        precision: precision,\n        subdivisions: subdivisions\n      });\n      if (segment.isDifferentiable()) {\n        // segment is not just a point\n        lastValidSegment = segment;\n        lastValidSegmentIndex = index;\n        if (length <= l + d) {\n          dividedSegmentIndex = index;\n          divided = segment.divideAtLength((fromStart ? 1 : -1) * (length - l), {\n            precision: precision,\n            subdivisions: subdivisions\n          });\n          break;\n        }\n      }\n      l += d;\n    }\n    if (!lastValidSegment) {\n      // no valid segment found\n      return null;\n    }\n\n    // else: the path contains at least one valid segment\n\n    if (!divided) {\n      // the desired length is greater than the length of the path\n      dividedSegmentIndex = lastValidSegmentIndex;\n      t = fromStart ? 1 : 0;\n      divided = lastValidSegment.divideAtT(t);\n    }\n\n    // create a copy of this path and replace the identified segment with its two divided parts:\n\n    var pathCopy = this.clone();\n    pathCopy.replaceSegment(dividedSegmentIndex, divided);\n    var divisionStartIndex = dividedSegmentIndex;\n    var divisionMidIndex = dividedSegmentIndex + 1;\n    var divisionEndIndex = dividedSegmentIndex + 2;\n\n    // do not insert the part if it looks like a point\n    if (!divided[0].isDifferentiable()) {\n      pathCopy.removeSegment(divisionStartIndex);\n      divisionMidIndex -= 1;\n      divisionEndIndex -= 1;\n    }\n\n    // insert a Moveto segment to ensure secondPath will be valid:\n    var movetoEnd = pathCopy.getSegment(divisionMidIndex).start;\n    pathCopy.insertSegment(divisionMidIndex, Path.createSegment('M', movetoEnd));\n    divisionEndIndex += 1;\n\n    // do not insert the part if it looks like a point\n    if (!divided[1].isDifferentiable()) {\n      pathCopy.removeSegment(divisionEndIndex - 1);\n      divisionEndIndex -= 1;\n    }\n\n    // ensure that Closepath segments in secondPath will be assigned correct subpathStartSegment:\n\n    var secondPathSegmentIndexConversion = divisionEndIndex - divisionStartIndex - 1;\n    for (i = divisionEndIndex; i < pathCopy.segments.length; i++) {\n      var originalSegment = this.getSegment(i - secondPathSegmentIndexConversion);\n      segment = pathCopy.getSegment(i);\n      if (segment.type === 'Z' && !originalSegment.subpathStartSegment.end.equals(segment.subpathStartSegment.end)) {\n        // pathCopy segment's subpathStartSegment is different from original segment's one\n        // convert this Closepath segment to a Lineto and replace it in pathCopy\n        var convertedSegment = Path.createSegment('L', originalSegment.end);\n        pathCopy.replaceSegment(i, convertedSegment);\n      }\n    }\n\n    // distribute pathCopy segments into two paths and return those:\n\n    var firstPath = new Path(pathCopy.segments.slice(0, divisionMidIndex));\n    var secondPath = new Path(pathCopy.segments.slice(divisionMidIndex));\n    return [firstPath, secondPath];\n  },\n  // Checks whether two paths are exactly the same.\n  // If `p` is undefined or null, returns false.\n  equals: function (p) {\n    if (!p) return false;\n    var segments = this.segments;\n    var otherSegments = p.segments;\n    var numSegments = segments.length;\n    if (otherSegments.length !== numSegments) return false; // if the two paths have different number of segments, they cannot be equal\n\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      var otherSegment = otherSegments[i];\n\n      // as soon as an inequality is found in segments, return false\n      if (segment.type !== otherSegment.type || !segment.equals(otherSegment)) return false;\n    }\n\n    // if no inequality found in segments, return true\n    return true;\n  },\n  // Accepts negative indices.\n  // Throws an error if path has no segments.\n  // Throws an error if index is out of range.\n  getSegment: function (index) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) throw new Error('Path has no segments.');\n    if (index < 0) index = numSegments + index; // convert negative indices to positive\n    if (index >= numSegments || index < 0) throw new Error('Index out of range.');\n    return segments[index];\n  },\n  // Returns an array of segment subdivisions, with precision better than requested `opt.precision`.\n  getSegmentSubdivisions: function (opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    // works even if path has no segments\n\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    // not using opt.segmentSubdivisions\n    // not using localOpt\n\n    var segmentSubdivisions = [];\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      var subdivisions = segment.getSubdivisions({\n        precision: precision\n      });\n      segmentSubdivisions.push(subdivisions);\n    }\n    return segmentSubdivisions;\n  },\n  // Returns an array of subpaths of this path.\n  // Invalid paths are validated first.\n  // Returns `[]` if path has no segments.\n  getSubpaths: function () {\n    const validatedPath = this.clone().validate();\n    const segments = validatedPath.segments;\n    const numSegments = segments.length;\n    const subpaths = [];\n    for (let i = 0; i < numSegments; i++) {\n      const segment = segments[i];\n      if (segment.isSubpathStart) {\n        // we encountered a subpath start segment\n        // create a new path for segment, and push it to list of subpaths\n        subpaths.push(new Path(segment));\n      } else {\n        // append current segment to the last subpath\n        subpaths[subpaths.length - 1].appendSegment(segment);\n      }\n    }\n    return subpaths;\n  },\n  // Insert `arg` at given `index`.\n  // `index = 0` means insert at the beginning.\n  // `index = segments.length` means insert at the end.\n  // Accepts negative indices, from `-1` to `-(segments.length + 1)`.\n  // Accepts one segment or an array of segments as argument.\n  // Throws an error if index is out of range.\n  // Throws an error if argument is not a segment or an array of segments.\n  insertSegment: function (index, arg) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    // works even if path has no segments\n\n    // note that these are incremented compared to getSegments()\n    // we can insert after last element (note that this changes the meaning of index -1)\n    if (index < 0) index = numSegments + index + 1; // convert negative indices to positive\n    if (index > numSegments || index < 0) throw new Error('Index out of range.');\n    var currentSegment;\n    var previousSegment = null;\n    var nextSegment = null;\n    if (numSegments !== 0) {\n      if (index >= 1) {\n        previousSegment = segments[index - 1];\n        nextSegment = previousSegment.nextSegment; // if we are inserting at end, nextSegment is null\n      } else {\n        // if index === 0\n        // previousSegment is null\n        nextSegment = segments[0];\n      }\n    }\n    if (!Array.isArray(arg)) {\n      if (!arg || !arg.isSegment) throw new Error('Segment required.');\n      currentSegment = this.prepareSegment(arg, previousSegment, nextSegment);\n      segments.splice(index, 0, currentSegment);\n    } else {\n      // flatten one level deep\n      // so we can chain arbitrary Path.createSegment results\n      arg = arg.reduce(function (acc, val) {\n        return acc.concat(val);\n      }, []);\n      if (!arg[0].isSegment) throw new Error('Segments required.');\n      var n = arg.length;\n      for (var i = 0; i < n; i++) {\n        var currentArg = arg[i];\n        currentSegment = this.prepareSegment(currentArg, previousSegment, nextSegment);\n        segments.splice(index + i, 0, currentSegment); // incrementing index to insert subsequent segments after inserted segments\n        previousSegment = currentSegment;\n      }\n    }\n  },\n  intersectionWithLine: function (line, opt) {\n    var intersection = null;\n    var polylines = this.toPolylines(opt);\n    if (!polylines) return null;\n    for (var i = 0, n = polylines.length; i < n; i++) {\n      var polyline = polylines[i];\n      var polylineIntersection = line.intersect(polyline);\n      if (polylineIntersection) {\n        intersection || (intersection = []);\n        if (Array.isArray(polylineIntersection)) {\n          Array.prototype.push.apply(intersection, polylineIntersection);\n        } else {\n          intersection.push(polylineIntersection);\n        }\n      }\n    }\n    return intersection;\n  },\n  isDifferentiable: function () {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      // as soon as a differentiable segment is found in segments, return true\n      if (segment.isDifferentiable()) return true;\n    }\n\n    // if no differentiable segment is found in segments, return false\n    return false;\n  },\n  // Checks whether current path segments are valid.\n  // Note that d is allowed to be empty - should disable rendering of the path.\n  isValid: function () {\n    var segments = this.segments;\n    var isValid = segments.length === 0 || segments[0].type === 'M'; // either empty or first segment is a Moveto\n    return isValid;\n  },\n  // Returns length of the path, with precision better than requested `opt.precision`; or using `opt.segmentSubdivisions` provided.\n  // If path has no segments, returns 0.\n  length: function (opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return 0; // if segments is an empty array\n\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision; // opt.precision only used in getSegmentSubdivisions() call\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    // not using localOpt\n\n    var length = 0;\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      var subdivisions = segmentSubdivisions[i];\n      length += segment.length({\n        subdivisions: subdivisions\n      });\n    }\n    return length;\n  },\n  // Private function.\n  lengthAtT: function (t, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return 0; // if segments is an empty array\n\n    var segmentIndex = t.segmentIndex;\n    if (segmentIndex < 0) return 0; // regardless of t.value\n\n    var tValue = t.value;\n    if (segmentIndex >= numSegments) {\n      segmentIndex = numSegments - 1;\n      tValue = 1;\n    } else if (tValue < 0) tValue = 0;else if (tValue > 1) tValue = 1;\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    // not using localOpt\n\n    var subdivisions;\n    var length = 0;\n    for (var i = 0; i < segmentIndex; i++) {\n      var segment = segments[i];\n      subdivisions = segmentSubdivisions[i];\n      length += segment.length({\n        precisison: precision,\n        subdivisions: subdivisions\n      });\n    }\n    segment = segments[segmentIndex];\n    subdivisions = segmentSubdivisions[segmentIndex];\n    length += segment.lengthAtT(tValue, {\n      precisison: precision,\n      subdivisions: subdivisions\n    });\n    return length;\n  },\n  // Returns point at requested `ratio` between 0 and 1, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n  pointAt: function (ratio, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    if (ratio <= 0) return this.start.clone();\n    if (ratio >= 1) return this.end.clone();\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    var localOpt = {\n      precision: precision,\n      segmentSubdivisions: segmentSubdivisions\n    };\n    var pathLength = this.length(localOpt);\n    var length = pathLength * ratio;\n    return this.pointAtLength(length, localOpt);\n  },\n  // Returns point at requested `length`, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n  // Accepts negative length.\n  pointAtLength: function (length, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    if (length === 0) return this.start.clone();\n    var fromStart = true;\n    if (length < 0) {\n      fromStart = false; // negative lengths mean start calculation from end point\n      length = -length; // absolute value\n    }\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    // not using localOpt\n\n    var lastVisibleSegment;\n    var l = 0; // length so far\n    for (var i = 0; i < numSegments; i++) {\n      var index = fromStart ? i : numSegments - 1 - i;\n      var segment = segments[index];\n      var subdivisions = segmentSubdivisions[index];\n      var d = segment.length({\n        precision: precision,\n        subdivisions: subdivisions\n      });\n      if (segment.isVisible) {\n        if (length <= l + d) {\n          return segment.pointAtLength((fromStart ? 1 : -1) * (length - l), {\n            precision: precision,\n            subdivisions: subdivisions\n          });\n        }\n        lastVisibleSegment = segment;\n      }\n      l += d;\n    }\n\n    // if length requested is higher than the length of the path, return last visible segment endpoint\n    if (lastVisibleSegment) return fromStart ? lastVisibleSegment.end : lastVisibleSegment.start;\n\n    // if no visible segment, return last segment end point (no matter if fromStart or no)\n    var lastSegment = segments[numSegments - 1];\n    return lastSegment.end.clone();\n  },\n  // Private function.\n  pointAtT: function (t) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    var segmentIndex = t.segmentIndex;\n    if (segmentIndex < 0) return segments[0].pointAtT(0);\n    if (segmentIndex >= numSegments) return segments[numSegments - 1].pointAtT(1);\n    var tValue = t.value;\n    if (tValue < 0) tValue = 0;else if (tValue > 1) tValue = 1;\n    return segments[segmentIndex].pointAtT(tValue);\n  },\n  // Default precision\n  PRECISION: 3,\n  // Helper method for adding segments.\n  prepareSegment: function (segment, previousSegment, nextSegment) {\n    // insert after previous segment and before previous segment's next segment\n    segment.previousSegment = previousSegment;\n    segment.nextSegment = nextSegment;\n    if (previousSegment) previousSegment.nextSegment = segment;\n    if (nextSegment) nextSegment.previousSegment = segment;\n    var updateSubpathStart = segment;\n    if (segment.isSubpathStart) {\n      segment.subpathStartSegment = segment; // assign self as subpath start segment\n      updateSubpathStart = nextSegment; // start updating from next segment\n    }\n\n    // assign previous segment's subpath start (or self if it is a subpath start) to subsequent segments\n    if (updateSubpathStart) this.updateSubpathStartSegment(updateSubpathStart);\n    return segment;\n  },\n  // Remove the segment at `index`.\n  // Accepts negative indices, from `-1` to `-segments.length`.\n  // Throws an error if path has no segments.\n  // Throws an error if index is out of range.\n  removeSegment: function (index) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) throw new Error('Path has no segments.');\n    if (index < 0) index = numSegments + index; // convert negative indices to positive\n    if (index >= numSegments || index < 0) throw new Error('Index out of range.');\n    var removedSegment = segments.splice(index, 1)[0];\n    var previousSegment = removedSegment.previousSegment;\n    var nextSegment = removedSegment.nextSegment;\n\n    // link the previous and next segments together (if present)\n    if (previousSegment) previousSegment.nextSegment = nextSegment; // may be null\n    if (nextSegment) nextSegment.previousSegment = previousSegment; // may be null\n\n    // if removed segment used to start a subpath, update all subsequent segments until another subpath start segment is reached\n    if (removedSegment.isSubpathStart && nextSegment) this.updateSubpathStartSegment(nextSegment);\n  },\n  // Replace the segment at `index` with `arg`.\n  // Accepts negative indices, from `-1` to `-segments.length`.\n  // Accepts one segment or an array of segments as argument.\n  // Throws an error if path has no segments.\n  // Throws an error if index is out of range.\n  // Throws an error if argument is not a segment or an array of segments.\n  replaceSegment: function (index, arg) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) throw new Error('Path has no segments.');\n    if (index < 0) index = numSegments + index; // convert negative indices to positive\n    if (index >= numSegments || index < 0) throw new Error('Index out of range.');\n    var currentSegment;\n    var replacedSegment = segments[index];\n    var previousSegment = replacedSegment.previousSegment;\n    var nextSegment = replacedSegment.nextSegment;\n    var updateSubpathStart = replacedSegment.isSubpathStart; // boolean: is an update of subpath starts necessary?\n\n    if (!Array.isArray(arg)) {\n      if (!arg || !arg.isSegment) throw new Error('Segment required.');\n      currentSegment = this.prepareSegment(arg, previousSegment, nextSegment);\n      segments.splice(index, 1, currentSegment); // directly replace\n\n      if (updateSubpathStart && currentSegment.isSubpathStart) updateSubpathStart = false; // already updated by `prepareSegment`\n    } else {\n      // flatten one level deep\n      // so we can chain arbitrary Path.createSegment results\n      arg = arg.reduce(function (acc, val) {\n        return acc.concat(val);\n      }, []);\n      if (!arg[0].isSegment) throw new Error('Segments required.');\n      segments.splice(index, 1);\n      var n = arg.length;\n      for (var i = 0; i < n; i++) {\n        var currentArg = arg[i];\n        currentSegment = this.prepareSegment(currentArg, previousSegment, nextSegment);\n        segments.splice(index + i, 0, currentSegment); // incrementing index to insert subsequent segments after inserted segments\n        previousSegment = currentSegment;\n        if (updateSubpathStart && currentSegment.isSubpathStart) updateSubpathStart = false; // already updated by `prepareSegment`\n      }\n    }\n\n    // if replaced segment used to start a subpath and no new subpath start was added, update all subsequent segments until another subpath start segment is reached\n    if (updateSubpathStart && nextSegment) this.updateSubpathStartSegment(nextSegment);\n  },\n  round: function (precision) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      segment.round(precision);\n    }\n    return this;\n  },\n  scale: function (sx, sy, origin) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      segment.scale(sx, sy, origin);\n    }\n    return this;\n  },\n  segmentAt: function (ratio, opt) {\n    var index = this.segmentIndexAt(ratio, opt);\n    if (!index) return null;\n    return this.getSegment(index);\n  },\n  // Accepts negative length.\n  segmentAtLength: function (length, opt) {\n    var index = this.segmentIndexAtLength(length, opt);\n    if (!index) return null;\n    return this.getSegment(index);\n  },\n  segmentIndexAt: function (ratio, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    if (ratio < 0) ratio = 0;\n    if (ratio > 1) ratio = 1;\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    var localOpt = {\n      precision: precision,\n      segmentSubdivisions: segmentSubdivisions\n    };\n    var pathLength = this.length(localOpt);\n    var length = pathLength * ratio;\n    return this.segmentIndexAtLength(length, localOpt);\n  },\n  // Accepts negative length.\n  segmentIndexAtLength: function (length, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    var fromStart = true;\n    if (length < 0) {\n      fromStart = false; // negative lengths mean start calculation from end point\n      length = -length; // absolute value\n    }\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    // not using localOpt\n\n    var lastVisibleSegmentIndex = null;\n    var l = 0; // length so far\n    for (var i = 0; i < numSegments; i++) {\n      var index = fromStart ? i : numSegments - 1 - i;\n      var segment = segments[index];\n      var subdivisions = segmentSubdivisions[index];\n      var d = segment.length({\n        precision: precision,\n        subdivisions: subdivisions\n      });\n      if (segment.isVisible) {\n        if (length <= l + d) return index;\n        lastVisibleSegmentIndex = index;\n      }\n      l += d;\n    }\n\n    // if length requested is higher than the length of the path, return last visible segment index\n    // if no visible segment, return null\n    return lastVisibleSegmentIndex;\n  },\n  // Returns a string that can be used to reconstruct the path.\n  // Additional error checking compared to toString (must start with M segment).\n  serialize: function () {\n    if (!this.isValid()) throw new Error('Invalid path segments.');\n    return this.toString();\n  },\n  // Returns tangent line at requested `ratio` between 0 and 1, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n  tangentAt: function (ratio, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    if (ratio < 0) ratio = 0;\n    if (ratio > 1) ratio = 1;\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    var localOpt = {\n      precision: precision,\n      segmentSubdivisions: segmentSubdivisions\n    };\n    var pathLength = this.length(localOpt);\n    var length = pathLength * ratio;\n    return this.tangentAtLength(length, localOpt);\n  },\n  // Returns tangent line at requested `length`, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n  // Accepts negative length.\n  tangentAtLength: function (length, opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    var fromStart = true;\n    if (length < 0) {\n      fromStart = false; // negative lengths mean start calculation from end point\n      length = -length; // absolute value\n    }\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    // not using localOpt\n\n    var lastValidSegment; // visible AND differentiable (with a tangent)\n    var l = 0; // length so far\n    for (var i = 0; i < numSegments; i++) {\n      var index = fromStart ? i : numSegments - 1 - i;\n      var segment = segments[index];\n      var subdivisions = segmentSubdivisions[index];\n      var d = segment.length({\n        precision: precision,\n        subdivisions: subdivisions\n      });\n      if (segment.isDifferentiable()) {\n        if (length <= l + d) {\n          return segment.tangentAtLength((fromStart ? 1 : -1) * (length - l), {\n            precision: precision,\n            subdivisions: subdivisions\n          });\n        }\n        lastValidSegment = segment;\n      }\n      l += d;\n    }\n\n    // if length requested is higher than the length of the path, return tangent of endpoint of last valid segment\n    if (lastValidSegment) {\n      var t = fromStart ? 1 : 0;\n      return lastValidSegment.tangentAtT(t);\n    }\n\n    // if no valid segment, return null\n    return null;\n  },\n  // Private function.\n  tangentAtT: function (t) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    var segmentIndex = t.segmentIndex;\n    if (segmentIndex < 0) return segments[0].tangentAtT(0);\n    if (segmentIndex >= numSegments) return segments[numSegments - 1].tangentAtT(1);\n    var tValue = t.value;\n    if (tValue < 0) tValue = 0;else if (tValue > 1) tValue = 1;\n    return segments[segmentIndex].tangentAtT(tValue);\n  },\n  toPoints: function (opt) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null; // if segments is an empty array\n\n    opt = opt || {};\n    var precision = opt.precision === undefined ? this.PRECISION : opt.precision;\n    var segmentSubdivisions = opt.segmentSubdivisions === undefined ? this.getSegmentSubdivisions({\n      precision: precision\n    }) : opt.segmentSubdivisions;\n    var points = [];\n    var partialPoints = [];\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      if (segment.isVisible) {\n        var currentSegmentSubdivisions = segmentSubdivisions[i];\n        if (currentSegmentSubdivisions.length > 0) {\n          var subdivisionPoints = currentSegmentSubdivisions.map(function (curve) {\n            return curve.start;\n          });\n          Array.prototype.push.apply(partialPoints, subdivisionPoints);\n        } else {\n          partialPoints.push(segment.start);\n        }\n      } else if (partialPoints.length > 0) {\n        partialPoints.push(segments[i - 1].end);\n        points.push(partialPoints);\n        partialPoints = [];\n      }\n    }\n    if (partialPoints.length > 0) {\n      partialPoints.push(this.end);\n      points.push(partialPoints);\n    }\n    return points;\n  },\n  toPolylines: function (opt) {\n    var polylines = [];\n    var points = this.toPoints(opt);\n    if (!points) return null;\n    for (var i = 0, n = points.length; i < n; i++) {\n      polylines.push(new Polyline(points[i]));\n    }\n    return polylines;\n  },\n  toString: function () {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    var pathData = '';\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      pathData += segment.serialize() + ' ';\n    }\n    return pathData.trim();\n  },\n  translate: function (tx, ty) {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      segment.translate(tx, ty);\n    }\n    return this;\n  },\n  // Helper method for updating subpath start of segments, starting with the one provided.\n  updateSubpathStartSegment: function (segment) {\n    var previousSegment = segment.previousSegment; // may be null\n    while (segment && !segment.isSubpathStart) {\n      // assign previous segment's subpath start segment to this segment\n      if (previousSegment) segment.subpathStartSegment = previousSegment.subpathStartSegment; // may be null\n      else segment.subpathStartSegment = null; // if segment had no previous segment, assign null - creates an invalid path!\n\n      previousSegment = segment;\n      segment = segment.nextSegment; // move on to the segment after etc.\n    }\n  },\n  // If the path is not valid, insert M 0 0 at the beginning.\n  // Path with no segments is considered valid, so nothing is inserted.\n  validate: function () {\n    if (!this.isValid()) this.insertSegment(0, Path.createSegment('M', 0, 0));\n    return this;\n  }\n};\nObject.defineProperty(Path.prototype, 'start', {\n  // Getter for the first visible endpoint of the path.\n\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null;\n    for (var i = 0; i < numSegments; i++) {\n      var segment = segments[i];\n      if (segment.isVisible) return segment.start;\n    }\n\n    // if no visible segment, return last segment end point\n    return segments[numSegments - 1].end;\n  }\n});\nObject.defineProperty(Path.prototype, 'end', {\n  // Getter for the last visible endpoint of the path.\n\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    var segments = this.segments;\n    var numSegments = segments.length;\n    if (numSegments === 0) return null;\n    for (var i = numSegments - 1; i >= 0; i--) {\n      var segment = segments[i];\n      if (segment.isVisible) return segment.end;\n    }\n\n    // if no visible segment, return last segment end point\n    return segments[numSegments - 1].end;\n  }\n});\n\n// Local helper function.\n// Use an array of arguments to call a constructor (function called with `new`).\n// Adapted from https://stackoverflow.com/a/8843181/2263595\n// It is not necessary to use this function if the arguments can be passed separately (i.e. if the number of arguments is limited).\n// - If that is the case, use `new constructor(arg1, arg2)`, for example.\n// It is not necessary to use this function if the function that needs an array of arguments is not supposed to be used as a constructor.\n// - If that is the case, use `f.apply(thisArg, [arg1, arg2...])`, for example.\nfunction applyToNew(constructor, argsArray) {\n  // The `new` keyword can only be applied to functions that take a limited number of arguments.\n  // - We can fake that with .bind().\n  // - It calls a function (`constructor`, here) with the arguments that were provided to it - effectively transforming an unlimited number of arguments into limited.\n  // - So `new (constructor.bind(thisArg, arg1, arg2...))`\n  // - `thisArg` can be anything (e.g. null) because `new` keyword resets context to the constructor object.\n  // We need to pass in a variable number of arguments to the bind() call.\n  // - We can use .apply().\n  // - So `new (constructor.bind.apply(constructor, [thisArg, arg1, arg2...]))`\n  // - `thisArg` can still be anything because `new` overwrites it.\n  // Finally, to make sure that constructor.bind overwriting is not a problem, we switch to `Function.prototype.bind`.\n  // - So, the final version is `new (Function.prototype.bind.apply(constructor, [thisArg, arg1, arg2...]))`\n\n  // The function expects `argsArray[0]` to be `thisArg`.\n  // - This means that whatever is sent as the first element will be ignored.\n  // - The constructor will only see arguments starting from argsArray[1].\n  // - So, a new dummy element is inserted at the start of the array.\n  argsArray.unshift(null);\n  return new (Function.prototype.bind.apply(constructor, argsArray))();\n}\n\n// Path segment interface:\nvar segmentPrototype = {\n  // virtual\n  bbox: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  clone: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  closestPoint: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  closestPointLength: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  closestPointNormalizedLength: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // Redirect calls to closestPointNormalizedLength() function if closestPointT() is not defined for segment.\n  closestPointT: function (p) {\n    if (this.closestPointNormalizedLength) return this.closestPointNormalizedLength(p);\n    throw new Error('Neither closestPointT() nor closestPointNormalizedLength() function is implemented.');\n  },\n  // virtual\n  closestPointTangent: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  divideAt: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  divideAtLength: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // Redirect calls to divideAt() function if divideAtT() is not defined for segment.\n  divideAtT: function (t) {\n    if (this.divideAt) return this.divideAt(t);\n    throw new Error('Neither divideAtT() nor divideAt() function is implemented.');\n  },\n  // virtual\n  equals: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  getSubdivisions: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  isDifferentiable: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  isSegment: true,\n  isSubpathStart: false,\n  // true for Moveto segments\n\n  isVisible: true,\n  // false for Moveto segments\n\n  // virtual\n  length: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // Return a fraction of result of length() function if lengthAtT() is not defined for segment.\n  lengthAtT: function (t) {\n    if (t <= 0) return 0;\n    var length = this.length();\n    if (t >= 1) return length;\n    return length * t;\n  },\n  nextSegment: null,\n  // needed for subpath start segment updating\n\n  // virtual\n  pointAt: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  pointAtLength: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // Redirect calls to pointAt() function if pointAtT() is not defined for segment.\n  pointAtT: function (t) {\n    if (this.pointAt) return this.pointAt(t);\n    throw new Error('Neither pointAtT() nor pointAt() function is implemented.');\n  },\n  previousSegment: null,\n  // needed to get segment start property\n\n  // virtual\n  round: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  subpathStartSegment: null,\n  // needed to get Closepath segment end property\n\n  // virtual\n  scale: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  serialize: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  tangentAt: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  tangentAtLength: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // Redirect calls to tangentAt() function if tangentAtT() is not defined for segment.\n  tangentAtT: function (t) {\n    if (this.tangentAt) return this.tangentAt(t);\n    throw new Error('Neither tangentAtT() nor tangentAt() function is implemented.');\n  },\n  // virtual\n  toString: function () {\n    throw new Error('Declaration missing for virtual function.');\n  },\n  // virtual\n  translate: function () {\n    throw new Error('Declaration missing for virtual function.');\n  }\n};\n\n// usually directly assigned\n// getter for Closepath\nObject.defineProperty(segmentPrototype, 'end', {\n  configurable: true,\n  enumerable: true,\n  writable: true\n});\n\n// always a getter\n// always throws error for Moveto\nObject.defineProperty(segmentPrototype, 'start', {\n  // get a reference to the end point of previous segment\n\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.previousSegment) throw new Error('Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)');\n    return this.previousSegment.end;\n  }\n});\n\n// virtual\nObject.defineProperty(segmentPrototype, 'type', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    throw new Error('Bad segment declaration. No type specified.');\n  }\n});\n\n// Path segment implementations:\nvar Lineto = function () {\n  var args = [];\n  var n = arguments.length;\n  for (var i = 0; i < n; i++) {\n    args.push(arguments[i]);\n  }\n  if (!(this instanceof Lineto)) {\n    // switching context of `this` to Lineto when called without `new`\n    return applyToNew(Lineto, args);\n  }\n  if (n === 0) {\n    throw new Error('Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).');\n  }\n  var outputArray;\n  if (args[0] instanceof Line) {\n    // lines provided\n    if (n === 1) {\n      this.end = args[0].end.clone();\n      return this;\n    } else {\n      throw new Error('Lineto constructor expects a line, 1 point, or 2 coordinates (' + n + ' lines provided).');\n    }\n  } else if (typeof args[0] === 'string' || typeof args[0] === 'number') {\n    // coordinates provided\n    if (n === 2) {\n      this.end = new Point(+args[0], +args[1]);\n      return this;\n    } else if (n < 2) {\n      throw new Error('Lineto constructor expects a line, 1 point, or 2 coordinates (' + n + ' coordinates provided).');\n    } else {\n      // this is a poly-line segment\n      var segmentCoords;\n      outputArray = [];\n      for (i = 0; i < n; i += 2) {\n        // coords come in groups of two\n\n        segmentCoords = args.slice(i, i + 2); // will send one coord if args.length not divisible by 2\n        outputArray.push(applyToNew(Lineto, segmentCoords));\n      }\n      return outputArray;\n    }\n  } else {\n    // points provided (needs to be last to also cover plain objects with x and y)\n    if (n === 1) {\n      this.end = new Point(args[0]);\n      return this;\n    } else {\n      // this is a poly-line segment\n      var segmentPoint;\n      outputArray = [];\n      for (i = 0; i < n; i += 1) {\n        segmentPoint = args[i];\n        outputArray.push(new Lineto(segmentPoint));\n      }\n      return outputArray;\n    }\n  }\n};\nvar linetoPrototype = {\n  clone: function () {\n    return new Lineto(this.end);\n  },\n  divideAt: function (ratio) {\n    var line = new Line(this.start, this.end);\n    var divided = line.divideAt(ratio);\n    return [new Lineto(divided[0]), new Lineto(divided[1])];\n  },\n  divideAtLength: function (length) {\n    var line = new Line(this.start, this.end);\n    var divided = line.divideAtLength(length);\n    return [new Lineto(divided[0]), new Lineto(divided[1])];\n  },\n  getSubdivisions: function () {\n    return [];\n  },\n  isDifferentiable: function () {\n    if (!this.previousSegment) return false;\n    return !this.start.equals(this.end);\n  },\n  round: function (precision) {\n    this.end.round(precision);\n    return this;\n  },\n  scale: function (sx, sy, origin) {\n    this.end.scale(sx, sy, origin);\n    return this;\n  },\n  serialize: function () {\n    var end = this.end;\n    return this.type + ' ' + end.x + ' ' + end.y;\n  },\n  toString: function () {\n    return this.type + ' ' + this.start + ' ' + this.end;\n  },\n  translate: function (tx, ty) {\n    this.end.translate(tx, ty);\n    return this;\n  }\n};\nObject.defineProperty(linetoPrototype, 'type', {\n  configurable: true,\n  enumerable: true,\n  value: 'L'\n});\nLineto.prototype = extend(segmentPrototype, Line.prototype, linetoPrototype);\nvar Curveto = function () {\n  var args = [];\n  var n = arguments.length;\n  for (var i = 0; i < n; i++) {\n    args.push(arguments[i]);\n  }\n  if (!(this instanceof Curveto)) {\n    // switching context of `this` to Curveto when called without `new`\n    return applyToNew(Curveto, args);\n  }\n  if (n === 0) {\n    throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).');\n  }\n  var outputArray;\n  if (args[0] instanceof Curve) {\n    // curves provided\n    if (n === 1) {\n      this.controlPoint1 = args[0].controlPoint1.clone();\n      this.controlPoint2 = args[0].controlPoint2.clone();\n      this.end = args[0].end.clone();\n      return this;\n    } else {\n      throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (' + n + ' curves provided).');\n    }\n  } else if (typeof args[0] === 'string' || typeof args[0] === 'number') {\n    // coordinates provided\n    if (n === 6) {\n      this.controlPoint1 = new Point(+args[0], +args[1]);\n      this.controlPoint2 = new Point(+args[2], +args[3]);\n      this.end = new Point(+args[4], +args[5]);\n      return this;\n    } else if (n < 6) {\n      throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (' + n + ' coordinates provided).');\n    } else {\n      // this is a poly-bezier segment\n      var segmentCoords;\n      outputArray = [];\n      for (i = 0; i < n; i += 6) {\n        // coords come in groups of six\n\n        segmentCoords = args.slice(i, i + 6); // will send fewer than six coords if args.length not divisible by 6\n        outputArray.push(applyToNew(Curveto, segmentCoords));\n      }\n      return outputArray;\n    }\n  } else {\n    // points provided (needs to be last to also cover plain objects with x and y)\n    if (n === 3) {\n      this.controlPoint1 = new Point(args[0]);\n      this.controlPoint2 = new Point(args[1]);\n      this.end = new Point(args[2]);\n      return this;\n    } else if (n < 3) {\n      throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (' + n + ' points provided).');\n    } else {\n      // this is a poly-bezier segment\n      var segmentPoints;\n      outputArray = [];\n      for (i = 0; i < n; i += 3) {\n        // points come in groups of three\n\n        segmentPoints = args.slice(i, i + 3); // will send fewer than three points if args.length is not divisible by 3\n        outputArray.push(applyToNew(Curveto, segmentPoints));\n      }\n      return outputArray;\n    }\n  }\n};\nvar curvetoPrototype = {\n  clone: function () {\n    return new Curveto(this.controlPoint1, this.controlPoint2, this.end);\n  },\n  divideAt: function (ratio, opt) {\n    var curve = new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    var divided = curve.divideAt(ratio, opt);\n    return [new Curveto(divided[0]), new Curveto(divided[1])];\n  },\n  divideAtLength: function (length, opt) {\n    var curve = new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    var divided = curve.divideAtLength(length, opt);\n    return [new Curveto(divided[0]), new Curveto(divided[1])];\n  },\n  divideAtT: function (t) {\n    var curve = new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    var divided = curve.divideAtT(t);\n    return [new Curveto(divided[0]), new Curveto(divided[1])];\n  },\n  isDifferentiable: function () {\n    if (!this.previousSegment) return false;\n    var start = this.start;\n    var control1 = this.controlPoint1;\n    var control2 = this.controlPoint2;\n    var end = this.end;\n    return !(start.equals(control1) && control1.equals(control2) && control2.equals(end));\n  },\n  round: function (precision) {\n    this.controlPoint1.round(precision);\n    this.controlPoint2.round(precision);\n    this.end.round(precision);\n    return this;\n  },\n  scale: function (sx, sy, origin) {\n    this.controlPoint1.scale(sx, sy, origin);\n    this.controlPoint2.scale(sx, sy, origin);\n    this.end.scale(sx, sy, origin);\n    return this;\n  },\n  serialize: function () {\n    var c1 = this.controlPoint1;\n    var c2 = this.controlPoint2;\n    var end = this.end;\n    return this.type + ' ' + c1.x + ' ' + c1.y + ' ' + c2.x + ' ' + c2.y + ' ' + end.x + ' ' + end.y;\n  },\n  toString: function () {\n    return this.type + ' ' + this.start + ' ' + this.controlPoint1 + ' ' + this.controlPoint2 + ' ' + this.end;\n  },\n  translate: function (tx, ty) {\n    this.controlPoint1.translate(tx, ty);\n    this.controlPoint2.translate(tx, ty);\n    this.end.translate(tx, ty);\n    return this;\n  }\n};\nObject.defineProperty(curvetoPrototype, 'type', {\n  configurable: true,\n  enumerable: true,\n  value: 'C'\n});\nCurveto.prototype = extend(segmentPrototype, Curve.prototype, curvetoPrototype);\nvar Moveto = function () {\n  var args = [];\n  var n = arguments.length;\n  for (var i = 0; i < n; i++) {\n    args.push(arguments[i]);\n  }\n  if (!(this instanceof Moveto)) {\n    // switching context of `this` to Moveto when called without `new`\n    return applyToNew(Moveto, args);\n  }\n  if (n === 0) {\n    throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).');\n  }\n  var outputArray;\n  if (args[0] instanceof Line) {\n    // lines provided\n    if (n === 1) {\n      this.end = args[0].end.clone();\n      return this;\n    } else {\n      throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (' + n + ' lines provided).');\n    }\n  } else if (args[0] instanceof Curve) {\n    // curves provided\n    if (n === 1) {\n      this.end = args[0].end.clone();\n      return this;\n    } else {\n      throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (' + n + ' curves provided).');\n    }\n  } else if (typeof args[0] === 'string' || typeof args[0] === 'number') {\n    // coordinates provided\n    if (n === 2) {\n      this.end = new Point(+args[0], +args[1]);\n      return this;\n    } else if (n < 2) {\n      throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (' + n + ' coordinates provided).');\n    } else {\n      // this is a moveto-with-subsequent-poly-line segment\n      var segmentCoords;\n      outputArray = [];\n      for (i = 0; i < n; i += 2) {\n        // coords come in groups of two\n\n        segmentCoords = args.slice(i, i + 2); // will send one coord if args.length not divisible by 2\n        if (i === 0) outputArray.push(applyToNew(Moveto, segmentCoords));else outputArray.push(applyToNew(Lineto, segmentCoords));\n      }\n      return outputArray;\n    }\n  } else {\n    // points provided (needs to be last to also cover plain objects with x and y)\n    if (n === 1) {\n      this.end = new Point(args[0]);\n      return this;\n    } else {\n      // this is a moveto-with-subsequent-poly-line segment\n      var segmentPoint;\n      outputArray = [];\n      for (i = 0; i < n; i += 1) {\n        // points come one by one\n\n        segmentPoint = args[i];\n        if (i === 0) outputArray.push(new Moveto(segmentPoint));else outputArray.push(new Lineto(segmentPoint));\n      }\n      return outputArray;\n    }\n  }\n};\nvar movetoPrototype = {\n  bbox: function () {\n    return null;\n  },\n  clone: function () {\n    return new Moveto(this.end);\n  },\n  closestPoint: function () {\n    return this.end.clone();\n  },\n  closestPointNormalizedLength: function () {\n    return 0;\n  },\n  closestPointLength: function () {\n    return 0;\n  },\n  closestPointT: function () {\n    return 1;\n  },\n  closestPointTangent: function () {\n    return null;\n  },\n  divideAt: function () {\n    return [this.clone(), this.clone()];\n  },\n  divideAtLength: function () {\n    return [this.clone(), this.clone()];\n  },\n  equals: function (m) {\n    return this.end.equals(m.end);\n  },\n  getSubdivisions: function () {\n    return [];\n  },\n  isDifferentiable: function () {\n    return false;\n  },\n  isSubpathStart: true,\n  isVisible: false,\n  length: function () {\n    return 0;\n  },\n  lengthAtT: function () {\n    return 0;\n  },\n  pointAt: function () {\n    return this.end.clone();\n  },\n  pointAtLength: function () {\n    return this.end.clone();\n  },\n  pointAtT: function () {\n    return this.end.clone();\n  },\n  round: function (precision) {\n    this.end.round(precision);\n    return this;\n  },\n  scale: function (sx, sy, origin) {\n    this.end.scale(sx, sy, origin);\n    return this;\n  },\n  serialize: function () {\n    var end = this.end;\n    return this.type + ' ' + end.x + ' ' + end.y;\n  },\n  tangentAt: function () {\n    return null;\n  },\n  tangentAtLength: function () {\n    return null;\n  },\n  tangentAtT: function () {\n    return null;\n  },\n  toString: function () {\n    return this.type + ' ' + this.end;\n  },\n  translate: function (tx, ty) {\n    this.end.translate(tx, ty);\n    return this;\n  }\n};\nObject.defineProperty(movetoPrototype, 'start', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    throw new Error('Illegal access. Moveto segments should not need a start property.');\n  }\n});\nObject.defineProperty(movetoPrototype, 'type', {\n  configurable: true,\n  enumerable: true,\n  value: 'M'\n});\nMoveto.prototype = extend(segmentPrototype, movetoPrototype); // does not inherit from any other geometry object\n\nvar Closepath = function () {\n  var args = [];\n  var n = arguments.length;\n  for (var i = 0; i < n; i++) {\n    args.push(arguments[i]);\n  }\n  if (!(this instanceof Closepath)) {\n    // switching context of `this` to Closepath when called without `new`\n    return applyToNew(Closepath, args);\n  }\n  if (n > 0) {\n    throw new Error('Closepath constructor expects no arguments.');\n  }\n  return this;\n};\nvar closepathPrototype = {\n  clone: function () {\n    return new Closepath();\n  },\n  divideAt: function (ratio) {\n    var line = new Line(this.start, this.end);\n    var divided = line.divideAt(ratio);\n    return [\n    // if we didn't actually cut into the segment, first divided part can stay as Z\n    divided[1].isDifferentiable() ? new Lineto(divided[0]) : this.clone(), new Lineto(divided[1])];\n  },\n  divideAtLength: function (length) {\n    var line = new Line(this.start, this.end);\n    var divided = line.divideAtLength(length);\n    return [\n    // if we didn't actually cut into the segment, first divided part can stay as Z\n    divided[1].isDifferentiable() ? new Lineto(divided[0]) : this.clone(), new Lineto(divided[1])];\n  },\n  getSubdivisions: function () {\n    return [];\n  },\n  isDifferentiable: function () {\n    if (!this.previousSegment || !this.subpathStartSegment) return false;\n    return !this.start.equals(this.end);\n  },\n  round: function () {\n    return this;\n  },\n  scale: function () {\n    return this;\n  },\n  serialize: function () {\n    return this.type;\n  },\n  toString: function () {\n    return this.type + ' ' + this.start + ' ' + this.end;\n  },\n  translate: function () {\n    return this;\n  }\n};\nObject.defineProperty(closepathPrototype, 'end', {\n  // get a reference to the end point of subpath start segment\n\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.subpathStartSegment) throw new Error('Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)');\n    return this.subpathStartSegment.end;\n  }\n});\nObject.defineProperty(closepathPrototype, 'type', {\n  configurable: true,\n  enumerable: true,\n  value: 'Z'\n});\nClosepath.prototype = extend(segmentPrototype, Line.prototype, closepathPrototype);\nvar segmentTypes = Path.segmentTypes = {\n  L: Lineto,\n  C: Curveto,\n  M: Moveto,\n  Z: Closepath,\n  z: Closepath\n};\nPath.regexSupportedData = new RegExp('^[\\\\s\\\\d' + Object.keys(segmentTypes).join('') + ',.]*$');\nPath.isDataSupported = function (data) {\n  if (typeof data !== 'string') return false;\n  return this.regexSupportedData.test(data);\n};", "import { Path } from './path.mjs';\nimport { Curve } from './curve.mjs';\nimport { Point } from './point.mjs';\nexport const bezier = {\n  // Cubic Bezier curve path through points.\n  // @deprecated\n  // @param {array} points Array of points through which the smooth line will go.\n  // @return {array} SVG Path commands as an array\n  curveThroughPoints: function (points) {\n    console.warn('deprecated');\n    return new Path(Curve.throughPoints(points)).serialize();\n  },\n  // Get open-ended Bezier Spline Control Points.\n  // @deprecated\n  // @param knots Input Knot Bezier spline points (At least two points!).\n  // @param firstControlPoints Output First Control points. Array of knots.length - 1 length.\n  // @param secondControlPoints Output Second Control points. Array of knots.length - 1 length.\n  getCurveControlPoints: function (knots) {\n    console.warn('deprecated');\n    var firstControlPoints = [];\n    var secondControlPoints = [];\n    var n = knots.length - 1;\n    var i;\n\n    // Special case: Bezier curve should be a straight line.\n    if (n == 1) {\n      // 3P1 = 2P0 + P3\n      firstControlPoints[0] = new Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n\n      // P2 = 2P1  P0\n      secondControlPoints[0] = new Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n      return [firstControlPoints, secondControlPoints];\n    }\n\n    // Calculate first Bezier control points.\n    // Right hand side vector.\n    var rhs = [];\n\n    // Set right hand side X values.\n    for (i = 1; i < n - 1; i++) {\n      rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n    }\n    rhs[0] = knots[0].x + 2 * knots[1].x;\n    rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n\n    // Get first control points X-values.\n    var x = this.getFirstControlPoints(rhs);\n\n    // Set right hand side Y values.\n    for (i = 1; i < n - 1; ++i) {\n      rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n    }\n    rhs[0] = knots[0].y + 2 * knots[1].y;\n    rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n\n    // Get first control points Y-values.\n    var y = this.getFirstControlPoints(rhs);\n\n    // Fill output arrays.\n    for (i = 0; i < n; i++) {\n      // First control point.\n      firstControlPoints.push(new Point(x[i], y[i]));\n\n      // Second control point.\n      if (i < n - 1) {\n        secondControlPoints.push(new Point(2 * knots[i + 1].x - x[i + 1], 2 * knots[i + 1].y - y[i + 1]));\n      } else {\n        secondControlPoints.push(new Point((knots[n].x + x[n - 1]) / 2, (knots[n].y + y[n - 1]) / 2));\n      }\n    }\n    return [firstControlPoints, secondControlPoints];\n  },\n  // Divide a Bezier curve into two at point defined by value 't' <0,1>.\n  // Using deCasteljau algorithm. http://math.stackexchange.com/a/317867\n  // @deprecated\n  // @param control points (start, control start, control end, end)\n  // @return a function that accepts t and returns 2 curves.\n  getCurveDivider: function (p0, p1, p2, p3) {\n    console.warn('deprecated');\n    var curve = new Curve(p0, p1, p2, p3);\n    return function divideCurve(t) {\n      var divided = curve.divide(t);\n      return [{\n        p0: divided[0].start,\n        p1: divided[0].controlPoint1,\n        p2: divided[0].controlPoint2,\n        p3: divided[0].end\n      }, {\n        p0: divided[1].start,\n        p1: divided[1].controlPoint1,\n        p2: divided[1].controlPoint2,\n        p3: divided[1].end\n      }];\n    };\n  },\n  // Solves a tridiagonal system for one of coordinates (x or y) of first Bezier control points.\n  // @deprecated\n  // @param rhs Right hand side vector.\n  // @return Solution vector.\n  getFirstControlPoints: function (rhs) {\n    console.warn('deprecated');\n    var n = rhs.length;\n    // `x` is a solution vector.\n    var x = [];\n    var tmp = [];\n    var b = 2.0;\n    x[0] = rhs[0] / b;\n\n    // Decomposition and forward substitution.\n    for (var i = 1; i < n; i++) {\n      tmp[i] = 1 / b;\n      b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n      x[i] = (rhs[i] - x[i - 1]) / b;\n    }\n    for (i = 1; i < n; i++) {\n      // Backsubstitution.\n      x[n - i - 1] -= tmp[n - i] * x[n - i];\n    }\n    return x;\n  },\n  // Solves an inversion problem -- Given the (x, y) coordinates of a point which lies on\n  // a parametric curve x = x(t)/w(t), y = y(t)/w(t), nd the parameter value t\n  // which corresponds to that point.\n  // @deprecated\n  // @param control points (start, control start, control end, end)\n  // @return a function that accepts a point and returns t.\n  getInversionSolver: function (p0, p1, p2, p3) {\n    console.warn('deprecated');\n    var curve = new Curve(p0, p1, p2, p3);\n    return function solveInversion(p) {\n      return curve.closestPointT(p);\n    };\n  }\n};", "import { Point } from './point.mjs';\nimport { Polyline } from './polyline.mjs';\nimport { extend } from './extend.mjs';\nimport { types } from './types.mjs';\nimport { clonePoints, parsePoints, convexHull } from './points.mjs';\nexport const Polygon = function (points) {\n  if (!(this instanceof Polygon)) {\n    return new Polygon(points);\n  }\n  if (typeof points === 'string') {\n    return new Polygon.parse(points);\n  }\n  this.points = Array.isArray(points) ? points.map(Point) : [];\n};\nPolygon.parse = function (svgString) {\n  return new Polygon(parsePoints(svgString));\n};\nPolygon.fromRect = function (rect) {\n  return new Polygon([rect.topLeft(), rect.topRight(), rect.bottomRight(), rect.bottomLeft()]);\n};\nPolygon.prototype = extend(Polyline.prototype, {\n  type: types.Polygon,\n  clone: function () {\n    return new Polygon(clonePoints(this.points));\n  },\n  convexHull: function () {\n    return new Polygon(convexHull(this.points));\n  },\n  lengthPoints: function () {\n    const {\n      start,\n      end,\n      points\n    } = this;\n    if (points.length <= 1 || start.equals(end)) return points;\n    return [...points, start.clone()];\n  }\n});", "import { Line } from './line.mjs';\nimport { Polygon } from './polygon.mjs';\nimport { Rect } from './rect.mjs';\nimport { types } from './types.mjs';\nexport function exists(shape1, shape2, shape1opt, shape2opt) {\n  switch (shape1.type) {\n    case types.Line:\n      {\n        switch (shape2.type) {\n          case types.Line:\n            {\n              return lineWithLine(shape1, shape2);\n            }\n        }\n        break;\n      }\n    case types.Ellipse:\n      {\n        switch (shape2.type) {\n          case types.Line:\n            {\n              return ellipseWithLine(shape1, shape2);\n            }\n          case types.Ellipse:\n            {\n              return ellipseWithEllipse(shape1, shape2);\n            }\n        }\n        break;\n      }\n    case types.Rect:\n      {\n        switch (shape2.type) {\n          case types.Line:\n            {\n              return rectWithLine(shape1, shape2);\n            }\n          case types.Ellipse:\n            {\n              return rectWithEllipse(shape1, shape2);\n            }\n          case types.Rect:\n            {\n              return rectWithRect(shape1, shape2);\n            }\n        }\n        break;\n      }\n    case types.Polyline:\n      {\n        switch (shape2.type) {\n          case types.Line:\n            {\n              return polylineWithLine(shape1, shape2);\n            }\n          case types.Ellipse:\n            {\n              return polylineWithEllipse(shape1, shape2);\n            }\n          case types.Rect:\n            {\n              return polylineWithRect(shape1, shape2);\n            }\n          case types.Polyline:\n            {\n              return polylineWithPolyline(shape1, shape2);\n            }\n        }\n        break;\n      }\n    case types.Polygon:\n      {\n        switch (shape2.type) {\n          case types.Line:\n            {\n              return polygonWithLine(shape1, shape2);\n            }\n          case types.Ellipse:\n            {\n              return polygonWithEllipse(shape1, shape2);\n            }\n          case types.Rect:\n            {\n              return polygonWithRect(shape1, shape2);\n            }\n          case types.Polyline:\n            {\n              return polygonWithPolyline(shape1, shape2);\n            }\n          case types.Polygon:\n            {\n              return polygonWithPolygon(shape1, shape2);\n            }\n        }\n        break;\n      }\n    case types.Path:\n      {\n        switch (shape2.type) {\n          case types.Line:\n            {\n              return pathWithLine(shape1, shape2, shape1opt);\n            }\n          case types.Ellipse:\n            {\n              return pathWithEllipse(shape1, shape2, shape1opt);\n            }\n          case types.Rect:\n            {\n              return pathWithRect(shape1, shape2, shape1opt);\n            }\n          case types.Polyline:\n            {\n              return pathWithPolyline(shape1, shape2, shape1opt);\n            }\n          case types.Polygon:\n            {\n              return pathWithPolygon(shape1, shape2, shape1opt);\n            }\n          case types.Path:\n            {\n              return pathWithPath(shape1, shape2, shape1opt, shape2opt);\n            }\n        }\n        break;\n      }\n  }\n  // None of the cases above\n  switch (shape2.type) {\n    case types.Ellipse:\n    case types.Rect:\n    case types.Polyline:\n    case types.Polygon:\n    case types.Path:\n      {\n        return exists(shape2, shape1, shape2opt, shape1opt);\n      }\n    default:\n      {\n        throw Error(`The intersection for ${shape1} and ${shape2} could not be found.`);\n      }\n  }\n}\n\n/* Line */\n\nexport function lineWithLine(line1, line2) {\n  const x1 = line1.start.x;\n  const y1 = line1.start.y;\n  const x2 = line1.end.x;\n  const y2 = line1.end.y;\n  const x3 = line2.start.x;\n  const y3 = line2.start.y;\n  const x4 = line2.end.x;\n  const y4 = line2.end.y;\n  const s1x = x2 - x1;\n  const s1y = y2 - y1;\n  const s2x = x4 - x3;\n  const s2y = y4 - y3;\n  const s3x = x1 - x3;\n  const s3y = y1 - y3;\n  const p = s1x * s2y - s2x * s1y;\n  const s = (s1x * s3y - s1y * s3x) / p;\n  const t = (s2x * s3y - s2y * s3x) / p;\n  return s >= 0 && s <= 1 && t >= 0 && t <= 1;\n}\n\n/* Ellipse */\n\nexport function ellipseWithLine(ellipse, line) {\n  const rex = ellipse.a;\n  const rey = ellipse.b;\n  const xe = ellipse.x;\n  const ye = ellipse.y;\n  const x1 = line.start.x - xe;\n  const x2 = line.end.x - xe;\n  const y1 = line.start.y - ye;\n  const y2 = line.end.y - ye;\n  const rex_2 = rex * rex;\n  const rey_2 = rey * rey;\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const A = dx * dx / rex_2 + dy * dy / rey_2;\n  const B = 2 * x1 * dx / rex_2 + 2 * y1 * dy / rey_2;\n  const C = x1 * x1 / rex_2 + y1 * y1 / rey_2 - 1;\n  const D = B * B - 4 * A * C;\n  if (D === 0) {\n    const t = -B / 2 / A;\n    return t >= 0 && t <= 1;\n  } else if (D > 0) {\n    const sqrt = Math.sqrt(D);\n    const t1 = (-B + sqrt) / 2 / A;\n    const t2 = (-B - sqrt) / 2 / A;\n    return t1 >= 0 && t1 <= 1 || t2 >= 0 && t2 <= 1;\n  }\n  return false;\n}\nexport function ellipseWithEllipse(ellipse1, ellipse2) {\n  return _ellipsesIntersection(ellipse1, 0, ellipse2, 0);\n}\n\n/* Rect */\n\nexport function rectWithLine(rect, line) {\n  const {\n    start,\n    end\n  } = line;\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  if (start.x > x + width && end.x > x + width || start.x < x && end.x < x || start.y > y + height && end.y > y + height || start.y < y && end.y < y) {\n    return false;\n  }\n  if (rect.containsPoint(line.start) || rect.containsPoint(line.end)) {\n    return true;\n  }\n  return lineWithLine(rect.topLine(), line) || lineWithLine(rect.rightLine(), line) || lineWithLine(rect.bottomLine(), line) || lineWithLine(rect.leftLine(), line);\n}\nexport function rectWithEllipse(rect, ellipse) {\n  if (!rectWithRect(rect, Rect.fromEllipse(ellipse))) return false;\n  return polygonWithEllipse(Polygon.fromRect(rect), ellipse);\n}\nexport function rectWithRect(rect1, rect2) {\n  return rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.y + rect1.height > rect2.y;\n}\n\n/* Polyline */\n\nexport function polylineWithLine(polyline, line) {\n  return _polylineWithLine(polyline, line, {\n    interior: false\n  });\n}\nexport function polylineWithEllipse(polyline, ellipse) {\n  return _polylineWithEllipse(polyline, ellipse, {\n    interior: false\n  });\n}\nexport function polylineWithRect(polyline, rect) {\n  return _polylineWithRect(polyline, rect, {\n    interior: false\n  });\n}\nexport function polylineWithPolyline(polyline1, polyline2) {\n  return _polylineWithPolyline(polyline1, polyline2, {\n    interior: false\n  });\n}\n\n/* Polygon */\n\nexport function polygonWithLine(polygon, line) {\n  return _polylineWithLine(polygon, line, {\n    interior: true\n  });\n}\nexport function polygonWithEllipse(polygon, ellipse) {\n  return _polylineWithEllipse(polygon, ellipse, {\n    interior: true\n  });\n}\nexport function polygonWithRect(polygon, rect) {\n  return _polylineWithRect(polygon, rect, {\n    interior: true\n  });\n}\nexport function polygonWithPolyline(polygon, polyline) {\n  return _polylineWithPolyline(polygon, polyline, {\n    interior: true\n  });\n}\nexport function polygonWithPolygon(polygon1, polygon2) {\n  return _polylineWithPolygon(polygon1, polygon2, {\n    interior: true\n  });\n}\n\n/* Path */\n\nexport function pathWithLine(path, line, pathOpt) {\n  return path.getSubpaths().some(subpath => {\n    const [polyline] = subpath.toPolylines(pathOpt);\n    const {\n      type\n    } = subpath.getSegment(-1);\n    if (type === 'Z') {\n      return polygonWithLine(polyline, line);\n    } else {\n      return polylineWithLine(polyline, line);\n    }\n  });\n}\nexport function pathWithEllipse(path, ellipse, pathOpt) {\n  return path.getSubpaths().some(subpath => {\n    const [polyline] = subpath.toPolylines(pathOpt);\n    const {\n      type\n    } = subpath.getSegment(-1);\n    if (type === 'Z') {\n      return polygonWithEllipse(polyline, ellipse);\n    } else {\n      return polylineWithEllipse(polyline, ellipse);\n    }\n  });\n}\nexport function pathWithRect(path, rect, pathOpt) {\n  return pathWithPolygon(path, Polygon.fromRect(rect), pathOpt);\n}\nexport function pathWithPolyline(path, polyline, pathOpt) {\n  return _pathWithPolyline(path, polyline, pathOpt, {\n    interior: false\n  });\n}\nexport function pathWithPolygon(path, polygon, pathOpt) {\n  return _pathWithPolyline(path, polygon, pathOpt, {\n    interior: true\n  });\n}\nexport function pathWithPath(path1, path2, pathOpt1, pathOpt2) {\n  return path1.getSubpaths().some(subpath => {\n    const [polyline1] = subpath.toPolylines(pathOpt1);\n    const {\n      type\n    } = subpath.getSegment(-1);\n    if (type === 'Z') {\n      return pathWithPolygon(path2, polyline1, pathOpt2);\n    } else {\n      return pathWithPolyline(path2, polyline1, pathOpt2);\n    }\n  });\n}\nfunction _polylineWithLine(polyline, line, opt = {}) {\n  const {\n    interior = false\n  } = opt;\n  let thisPoints;\n  if (interior) {\n    if (polyline.containsPoint(line.start)) {\n      // If any point of the polyline lies inside this polygon (interior = true)\n      // there is an intersection (we've chosen the start point)\n      return true;\n    }\n    const {\n      start,\n      end,\n      points\n    } = polyline;\n    thisPoints = end.equals(start) ? points : [...points, start];\n  } else {\n    thisPoints = polyline.points;\n  }\n  const {\n    length\n  } = thisPoints;\n  const segment = new Line();\n  for (let i = 0; i < length - 1; i++) {\n    segment.start = thisPoints[i];\n    segment.end = thisPoints[i + 1];\n    if (lineWithLine(line, segment)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction _polylineWithEllipse(polyline, ellipse, opt = {}) {\n  const {\n    start,\n    end,\n    points\n  } = polyline;\n  if (ellipse.containsPoint(start)) {\n    return true;\n  }\n  let thisPoints;\n  const {\n    interior = false\n  } = opt;\n  if (interior) {\n    if (polyline.containsPoint(ellipse.center())) {\n      // If any point of the ellipse lies inside this polygon (interior = true)\n      // there is an intersection (we've chosen the center point)\n      return true;\n    }\n    thisPoints = end.equals(start) ? points : [...points, start];\n  } else {\n    thisPoints = points;\n  }\n  const {\n    length\n  } = thisPoints;\n  const segment = new Line();\n  for (let i = 0; i < length - 1; i++) {\n    segment.start = thisPoints[i];\n    segment.end = thisPoints[i + 1];\n    if (ellipseWithLine(ellipse, segment)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction _polylineWithRect(polyline, rect, opt) {\n  const polygon = Polygon.fromRect(rect);\n  return _polylineWithPolygon(polyline, polygon, opt);\n}\nfunction _pathWithPolyline(path, polyline1, pathOpt, opt) {\n  return path.getSubpaths().some(subpath => {\n    const [polyline2] = subpath.toPolylines(pathOpt);\n    const {\n      type\n    } = subpath.getSegment(-1);\n    if (type === 'Z') {\n      return _polylineWithPolygon(polyline1, polyline2, opt);\n    } else {\n      return _polylineWithPolyline(polyline1, polyline2, opt);\n    }\n  });\n}\nfunction _polylineWithPolyline(polyline1, polyline2, opt = {}) {\n  const {\n    interior = false\n  } = opt;\n  let thisPolyline;\n  if (interior) {\n    const {\n      start\n    } = polyline2;\n    if (polyline1.containsPoint(start)) {\n      // If any point of the polyline lies inside this polygon (interior = true)\n      // there is an intersection (we've chosen the start point)\n      return true;\n    }\n    thisPolyline = polyline1.clone().close();\n  } else {\n    thisPolyline = polyline1;\n  }\n  const otherPoints = polyline2.points;\n  const {\n    length\n  } = otherPoints;\n  const segment = new Line();\n  for (let i = 0; i < length - 1; i++) {\n    segment.start = otherPoints[i];\n    segment.end = otherPoints[i + 1];\n    if (polylineWithLine(thisPolyline, segment)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction _polylineWithPolygon(polyline, polygon, opt) {\n  return polygon.containsPoint(polyline.start) || _polylineWithPolyline(polyline, polygon.clone().close(), opt);\n}\nfunction _ellipsesIntersection(e1, w1, e2, w2) {\n  const {\n    cos,\n    sin\n  } = Math;\n  const sinW1 = sin(w1);\n  const cosW1 = cos(w1);\n  const sinW2 = sin(w2);\n  const cosW2 = cos(w2);\n  const sinW1s = sinW1 * sinW1;\n  const cosW1s = cosW1 * cosW1;\n  const sinCos1 = sinW1 * cosW1;\n  const sinW2s = sinW2 * sinW2;\n  const cosW2s = cosW2 * cosW2;\n  const sinCos2 = sinW2 * cosW2;\n  const a1s = e1.a * e1.a;\n  const b1s = e1.b * e1.b;\n  const a2s = e2.a * e2.a;\n  const b2s = e2.b * e2.b;\n  const A1 = a1s * sinW1s + b1s * cosW1s;\n  const A2 = a2s * sinW2s + b2s * cosW2s;\n  const B1 = a1s * cosW1s + b1s * sinW1s;\n  const B2 = a2s * cosW2s + b2s * sinW2s;\n  let C1 = 2 * (b1s - a1s) * sinCos1;\n  let C2 = 2 * (b2s - a2s) * sinCos2;\n  let D1 = -2 * A1 * e1.x - C1 * e1.y;\n  let D2 = -2 * A2 * e2.x - C2 * e2.y;\n  let E1 = -C1 * e1.x - 2 * B1 * e1.y;\n  let E2 = -C2 * e2.x - 2 * B2 * e2.y;\n  const F1 = A1 * e1.x * e1.x + B1 * e1.y * e1.y + C1 * e1.x * e1.y - a1s * b1s;\n  const F2 = A2 * e2.x * e2.x + B2 * e2.y * e2.y + C2 * e2.x * e2.y - a2s * b2s;\n  C1 = C1 / 2;\n  C2 = C2 / 2;\n  D1 = D1 / 2;\n  D2 = D2 / 2;\n  E1 = E1 / 2;\n  E2 = E2 / 2;\n  const l3 = det3([[A1, C1, D1], [C1, B1, E1], [D1, E1, F1]]);\n  const l0 = det3([[A2, C2, D2], [C2, B2, E2], [D2, E2, F2]]);\n  const l2 = 0.33333333 * (det3([[A2, C1, D1], [C2, B1, E1], [D2, E1, F1]]) + det3([[A1, C2, D1], [C1, B2, E1], [D1, E2, F1]]) + det3([[A1, C1, D2], [C1, B1, E2], [D1, E1, F2]]));\n  const l1 = 0.33333333 * (det3([[A1, C2, D2], [C1, B2, E2], [D1, E2, F2]]) + det3([[A2, C1, D2], [C2, B1, E2], [D2, E1, F2]]) + det3([[A2, C2, D1], [C2, B2, E1], [D2, E2, F1]]));\n  const delta1 = det2([[l3, l2], [l2, l1]]);\n  const delta2 = det2([[l3, l1], [l2, l0]]);\n  const delta3 = det2([[l2, l1], [l1, l0]]);\n  const dP = det2([[2 * delta1, delta2], [delta2, 2 * delta3]]);\n  if (dP > 0 && (l1 > 0 || l2 > 0)) {\n    return false;\n  }\n  return true;\n}\nfunction det2(m) {\n  return m[0][0] * m[1][1] - m[0][1] * m[1][0];\n}\nfunction det3(m) {\n  return m[0][0] * m[1][1] * m[2][2] - m[0][0] * m[1][2] * m[2][1] - m[0][1] * m[1][0] * m[2][2] + m[0][1] * m[1][2] * m[2][0] + m[0][2] * m[1][0] * m[2][1] - m[0][2] * m[1][1] * m[2][0];\n}", "export * from './wrappers.mjs';\nexport * from './util.mjs';\nexport * from './cloneCells.mjs';\nexport * from './svgTagTemplate.mjs';\nexport { getRectPoint } from './getRectPoint.mjs';", "import Backbone from 'backbone';\nimport { uniqueId, union, result, merge, forIn, isObject, isEqual, isString, cloneDeep, omit, uuid, isEmpty, assign, uniq, toArray, setByPath, unsetByPath, getByPath, timing, interpolate, nextFrame, without, cancelFrame, defaultsDeep, has, sortBy, defaults } from '../util/util.mjs';\nimport { cloneCells } from '../util/cloneCells.mjs';\nimport { attributes } from './attributes/index.mjs';\nimport * as g from '../g/index.mjs';\n\n// Cell base model.\n// --------------------------\n\nexport const Cell = Backbone.Model.extend({\n  // This is the same as Backbone.Model with the only difference that is uses util.merge\n  // instead of just _.extend. The reason is that we want to mixin attributes set in upper classes.\n  constructor: function (attributes, options) {\n    var defaults;\n    var attrs = attributes || {};\n    if (typeof this.preinitialize === 'function') {\n      // Check to support an older version of Backbone (prior v1.4)\n      this.preinitialize.apply(this, arguments);\n    }\n    this.cid = uniqueId('c');\n    this.attributes = {};\n    if (options && options.collection) this.collection = options.collection;\n    if (options && options.parse) attrs = this.parse(attrs, options) || {};\n    if (defaults = result(this, 'defaults')) {\n      //<custom code>\n      // Replaced the call to _.defaults with util.merge.\n      attrs = merge({}, defaults, attrs);\n      //</custom code>\n    }\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  },\n  translate: function (dx, dy, opt) {\n    throw new Error('Must define a translate() method.');\n  },\n  toJSON: function () {\n    const defaults = result(this.constructor.prototype, 'defaults');\n    const defaultAttrs = defaults.attrs || {};\n    const attrs = this.attributes.attrs;\n    const finalAttrs = {};\n\n    // Loop through all the attributes and\n    // omit the default attributes as they are implicitly reconstructible by the cell 'type'.\n    forIn(attrs, function (attr, selector) {\n      const defaultAttr = defaultAttrs[selector];\n      forIn(attr, function (value, name) {\n        // attr is mainly flat though it might have one more level (consider the `style` attribute).\n        // Check if the `value` is object and if yes, go one level deep.\n        if (isObject(value) && !Array.isArray(value)) {\n          forIn(value, function (value2, name2) {\n            if (!defaultAttr || !defaultAttr[name] || !isEqual(defaultAttr[name][name2], value2)) {\n              finalAttrs[selector] = finalAttrs[selector] || {};\n              (finalAttrs[selector][name] || (finalAttrs[selector][name] = {}))[name2] = value2;\n            }\n          });\n        } else if (!defaultAttr || !isEqual(defaultAttr[name], value)) {\n          // `value` is not an object, default attribute for such a selector does not exist\n          // or it is different than the attribute value set on the model.\n\n          finalAttrs[selector] = finalAttrs[selector] || {};\n          finalAttrs[selector][name] = value;\n        }\n      });\n    });\n    const attributes = cloneDeep(omit(this.attributes, 'attrs'));\n    attributes.attrs = finalAttrs;\n    return attributes;\n  },\n  initialize: function (options) {\n    const idAttribute = this.getIdAttribute();\n    if (!options || options[idAttribute] === undefined) {\n      this.set(idAttribute, this.generateId(), {\n        silent: true\n      });\n    }\n    this._transitionIds = {};\n    this._scheduledTransitionIds = {};\n\n    // Collect ports defined in `attrs` and keep collecting whenever `attrs` object changes.\n    this.processPorts();\n    this.on('change:attrs', this.processPorts, this);\n  },\n  getIdAttribute: function () {\n    return this.idAttribute || 'id';\n  },\n  generateId: function () {\n    return uuid();\n  },\n  /**\n   * @deprecated\n   */\n  processPorts: function () {\n    // Whenever `attrs` changes, we extract ports from the `attrs` object and store it\n    // in a more accessible way. Also, if any port got removed and there were links that had `target`/`source`\n    // set to that port, we remove those links as well (to follow the same behaviour as\n    // with a removed element).\n\n    var previousPorts = this.ports;\n\n    // Collect ports from the `attrs` object.\n    var ports = {};\n    forIn(this.get('attrs'), function (attrs, selector) {\n      if (attrs && attrs.port) {\n        // `port` can either be directly an `id` or an object containing an `id` (and potentially other data).\n        if (attrs.port.id !== undefined) {\n          ports[attrs.port.id] = attrs.port;\n        } else {\n          ports[attrs.port] = {\n            id: attrs.port\n          };\n        }\n      }\n    });\n\n    // Collect ports that have been removed (compared to the previous ports) - if any.\n    // Use hash table for quick lookup.\n    var removedPorts = {};\n    forIn(previousPorts, function (port, id) {\n      if (!ports[id]) removedPorts[id] = true;\n    });\n\n    // Remove all the incoming/outgoing links that have source/target port set to any of the removed ports.\n    if (this.graph && !isEmpty(removedPorts)) {\n      var inboundLinks = this.graph.getConnectedLinks(this, {\n        inbound: true\n      });\n      inboundLinks.forEach(function (link) {\n        if (removedPorts[link.get('target').port]) link.remove();\n      });\n      var outboundLinks = this.graph.getConnectedLinks(this, {\n        outbound: true\n      });\n      outboundLinks.forEach(function (link) {\n        if (removedPorts[link.get('source').port]) link.remove();\n      });\n    }\n\n    // Update the `ports` object.\n    this.ports = ports;\n  },\n  remove: function (opt = {}) {\n    // Store the graph in a variable because `this.graph` won't be accessible\n    // after `this.trigger('remove', ...)` down below.\n    const {\n      graph,\n      collection\n    } = this;\n    if (!graph) {\n      // The collection is a common Backbone collection (not the graph collection).\n      if (collection) collection.remove(this, opt);\n      return this;\n    }\n    graph.startBatch('remove');\n\n    // First, unembed this cell from its parent cell if there is one.\n    const parentCell = this.getParentCell();\n    if (parentCell) {\n      parentCell.unembed(this, opt);\n    }\n\n    // Remove also all the cells, which were embedded into this cell\n    const embeddedCells = this.getEmbeddedCells();\n    for (let i = 0, n = embeddedCells.length; i < n; i++) {\n      const embed = embeddedCells[i];\n      if (embed) {\n        embed.remove(opt);\n      }\n    }\n    this.trigger('remove', this, graph.attributes.cells, opt);\n    graph.stopBatch('remove');\n    return this;\n  },\n  toFront: function (opt) {\n    var graph = this.graph;\n    if (graph) {\n      opt = defaults(opt || {}, {\n        foregroundEmbeds: true\n      });\n      let cells;\n      if (opt.deep) {\n        cells = this.getEmbeddedCells({\n          deep: true,\n          breadthFirst: opt.breadthFirst !== false,\n          sortSiblings: opt.foregroundEmbeds\n        });\n        cells.unshift(this);\n      } else {\n        cells = [this];\n      }\n      const sortedCells = opt.foregroundEmbeds ? cells : sortBy(cells, cell => cell.z());\n      const maxZ = graph.maxZIndex();\n      let z = maxZ - cells.length + 1;\n      const collection = graph.get('cells');\n      let shouldUpdate = collection.indexOf(sortedCells[0]) !== collection.length - cells.length;\n      if (!shouldUpdate) {\n        shouldUpdate = sortedCells.some(function (cell, index) {\n          return cell.z() !== z + index;\n        });\n      }\n      if (shouldUpdate) {\n        this.startBatch('to-front');\n        z = z + cells.length;\n        sortedCells.forEach(function (cell, index) {\n          cell.set('z', z + index, opt);\n        });\n        this.stopBatch('to-front');\n      }\n    }\n    return this;\n  },\n  toBack: function (opt) {\n    var graph = this.graph;\n    if (graph) {\n      opt = defaults(opt || {}, {\n        foregroundEmbeds: true\n      });\n      let cells;\n      if (opt.deep) {\n        cells = this.getEmbeddedCells({\n          deep: true,\n          breadthFirst: opt.breadthFirst !== false,\n          sortSiblings: opt.foregroundEmbeds\n        });\n        cells.unshift(this);\n      } else {\n        cells = [this];\n      }\n      const sortedCells = opt.foregroundEmbeds ? cells : sortBy(cells, cell => cell.z());\n      let z = graph.minZIndex();\n      var collection = graph.get('cells');\n      let shouldUpdate = collection.indexOf(sortedCells[0]) !== 0;\n      if (!shouldUpdate) {\n        shouldUpdate = sortedCells.some(function (cell, index) {\n          return cell.z() !== z + index;\n        });\n      }\n      if (shouldUpdate) {\n        this.startBatch('to-back');\n        z -= cells.length;\n        sortedCells.forEach(function (cell, index) {\n          cell.set('z', z + index, opt);\n        });\n        this.stopBatch('to-back');\n      }\n    }\n    return this;\n  },\n  parent: function (parent, opt) {\n    // getter\n    if (parent === undefined) return this.get('parent');\n    // setter\n    return this.set('parent', parent, opt);\n  },\n  embed: function (cell, opt) {\n    const cells = Array.isArray(cell) ? cell : [cell];\n    if (!this.canEmbed(cells)) {\n      throw new Error('Recursive embedding not allowed.');\n    }\n    if (cells.some(c => c.isEmbedded() && this.id !== c.parent())) {\n      throw new Error('Embedding of already embedded cells is not allowed.');\n    }\n    this._embedCells(cells, opt);\n    return this;\n  },\n  unembed: function (cell, opt) {\n    const cells = Array.isArray(cell) ? cell : [cell];\n    this._unembedCells(cells, opt);\n    return this;\n  },\n  canEmbed: function (cell) {\n    const cells = Array.isArray(cell) ? cell : [cell];\n    return cells.every(c => this !== c && !this.isEmbeddedIn(c));\n  },\n  _embedCells: function (cells, opt) {\n    const batchName = 'embed';\n    this.startBatch(batchName);\n    const embeds = assign([], this.get('embeds'));\n    cells.forEach(cell => {\n      // We keep all element ids after link ids.\n      embeds[cell.isLink() ? 'unshift' : 'push'](cell.id);\n      cell.parent(this.id, opt);\n    });\n    this.set('embeds', uniq(embeds), opt);\n    this.stopBatch(batchName);\n  },\n  _unembedCells: function (cells, opt) {\n    const batchName = 'unembed';\n    this.startBatch(batchName);\n    cells.forEach(cell => cell.unset('parent', opt));\n    this.set('embeds', without(this.get('embeds'), ...cells.map(cell => cell.id)), opt);\n    this.stopBatch(batchName);\n  },\n  getParentCell: function () {\n    // unlike link.source/target, cell.parent stores id directly as a string\n    var parentId = this.parent();\n    var graph = this.graph;\n    return parentId && graph && graph.getCell(parentId) || null;\n  },\n  // Return an array of ancestor cells.\n  // The array is ordered from the parent of the cell\n  // to the most distant ancestor.\n  getAncestors: function () {\n    var ancestors = [];\n    if (!this.graph) {\n      return ancestors;\n    }\n    var parentCell = this.getParentCell();\n    while (parentCell) {\n      ancestors.push(parentCell);\n      parentCell = parentCell.getParentCell();\n    }\n    return ancestors;\n  },\n  getEmbeddedCells: function (opt) {\n    opt = opt || {};\n\n    // Cell models can only be retrieved when this element is part of a collection.\n    // There is no way this element knows about other cells otherwise.\n    // This also means that calling e.g. `translate()` on an element with embeds before\n    // adding it to a graph does not translate its embeds.\n    if (!this.graph) {\n      return [];\n    }\n    if (opt.deep) {\n      if (opt.breadthFirst) {\n        return this._getEmbeddedCellsBfs(opt.sortSiblings);\n      } else {\n        return this._getEmbeddedCellsDfs(opt.sortSiblings);\n      }\n    }\n    const embeddedIds = this.get('embeds');\n    if (isEmpty(embeddedIds)) {\n      return [];\n    }\n    let cells = embeddedIds.map(this.graph.getCell, this.graph);\n    if (opt.sortSiblings) {\n      cells = sortBy(cells, cell => cell.z());\n    }\n    return cells;\n  },\n  _getEmbeddedCellsBfs: function (sortSiblings) {\n    const cells = [];\n    const queue = [];\n    queue.push(this);\n    while (queue.length > 0) {\n      const current = queue.shift();\n      cells.push(current);\n      const embeddedCells = current.getEmbeddedCells({\n        sortSiblings: sortSiblings\n      });\n      queue.push(...embeddedCells);\n    }\n    cells.shift();\n    return cells;\n  },\n  _getEmbeddedCellsDfs: function (sortSiblings) {\n    const cells = [];\n    const stack = [];\n    stack.push(this);\n    while (stack.length > 0) {\n      const current = stack.pop();\n      cells.push(current);\n      const embeddedCells = current.getEmbeddedCells({\n        sortSiblings: sortSiblings\n      });\n\n      // When using the stack, cells that are embedded last are processed first.\n      // To maintain the original order, we need to push the cells in reverse order\n      for (let i = embeddedCells.length - 1; i >= 0; --i) {\n        stack.push(embeddedCells[i]);\n      }\n    }\n    cells.shift();\n    return cells;\n  },\n  isEmbeddedIn: function (cell, opt) {\n    var cellId = isString(cell) ? cell : cell.id;\n    var parentId = this.parent();\n    opt = assign({\n      deep: true\n    }, opt);\n\n    // See getEmbeddedCells().\n    if (this.graph && opt.deep) {\n      while (parentId) {\n        if (parentId === cellId) {\n          return true;\n        }\n        parentId = this.graph.getCell(parentId).parent();\n      }\n      return false;\n    } else {\n      // When this cell is not part of a collection check\n      // at least whether it's a direct child of given cell.\n      return parentId === cellId;\n    }\n  },\n  // Whether or not the cell is embedded in any other cell.\n  isEmbedded: function () {\n    return !!this.parent();\n  },\n  // Isolated cloning. Isolated cloning has two versions: shallow and deep (pass `{ deep: true }` in `opt`).\n  // Shallow cloning simply clones the cell and returns a new cell with different ID.\n  // Deep cloning clones the cell and all its embedded cells recursively.\n  clone: function (opt) {\n    opt = opt || {};\n    if (!opt.deep) {\n      // Shallow cloning.\n\n      var clone = Backbone.Model.prototype.clone.apply(this, arguments);\n      // We don't want the clone to have the same ID as the original.\n      clone.set(this.getIdAttribute(), this.generateId());\n      // A shallow cloned element does not carry over the original embeds.\n      clone.unset('embeds');\n      // And can not be embedded in any cell\n      // as the clone is not part of the graph.\n      clone.unset('parent');\n      return clone;\n    } else {\n      // Deep cloning.\n\n      // For a deep clone, simply call `graph.cloneCells()` with the cell and all its embedded cells.\n      return toArray(cloneCells([this].concat(this.getEmbeddedCells({\n        deep: true\n      }))));\n    }\n  },\n  // A convenient way to set nested properties.\n  // This method merges the properties you'd like to set with the ones\n  // stored in the cell and makes sure change events are properly triggered.\n  // You can either set a nested property with one object\n  // or use a property path.\n  // The most simple use case is:\n  // `cell.prop('name/first', 'John')` or\n  // `cell.prop({ name: { first: 'John' } })`.\n  // Nested arrays are supported too:\n  // `cell.prop('series/0/data/0/degree', 50)` or\n  // `cell.prop({ series: [ { data: [ { degree: 50 } ] } ] })`.\n  prop: function (props, value, opt) {\n    var delim = '/';\n    var _isString = isString(props);\n    if (_isString || Array.isArray(props)) {\n      // Get/set an attribute by a special path syntax that delimits\n      // nested objects by the colon character.\n\n      if (arguments.length > 1) {\n        var path;\n        var pathArray;\n        if (_isString) {\n          path = props;\n          pathArray = path.split('/');\n        } else {\n          path = props.join(delim);\n          pathArray = props.slice();\n        }\n        var property = pathArray[0];\n        var pathArrayLength = pathArray.length;\n        const options = opt || {};\n        options.propertyPath = path;\n        options.propertyValue = value;\n        options.propertyPathArray = pathArray;\n        if (!('rewrite' in options)) {\n          options.rewrite = false;\n        }\n        var update = {};\n        // Initialize the nested object. Sub-objects are either arrays or objects.\n        // An empty array is created if the sub-key is an integer. Otherwise, an empty object is created.\n        // Note that this imposes a limitation on object keys one can use with Inspector.\n        // Pure integer keys will cause issues and are therefore not allowed.\n        var initializer = update;\n        var prevProperty = property;\n        for (var i = 1; i < pathArrayLength; i++) {\n          var pathItem = pathArray[i];\n          var isArrayIndex = Number.isFinite(_isString ? Number(pathItem) : pathItem);\n          initializer = initializer[prevProperty] = isArrayIndex ? [] : {};\n          prevProperty = pathItem;\n        }\n\n        // Fill update with the `value` on `path`.\n        update = setByPath(update, pathArray, value, '/');\n        var baseAttributes = merge({}, this.attributes);\n        // if rewrite mode enabled, we replace value referenced by path with\n        // the new one (we don't merge).\n        options.rewrite && unsetByPath(baseAttributes, path, '/');\n\n        // Merge update with the model attributes.\n        var attributes = merge(baseAttributes, update);\n        // Finally, set the property to the updated attributes.\n        return this.set(property, attributes[property], options);\n      } else {\n        return getByPath(this.attributes, props, delim);\n      }\n    }\n    const options = value || {};\n    // Note: '' is not the path to the root. It's a path with an empty string i.e. { '': {}}.\n    options.propertyPath = null;\n    options.propertyValue = props;\n    options.propertyPathArray = [];\n    if (!('rewrite' in options)) {\n      options.rewrite = false;\n    }\n\n    // Create a new object containing only the changed attributes.\n    const changedAttributes = {};\n    for (const key in props) {\n      // Merging the values of changed attributes with the current ones.\n      const {\n        changedValue\n      } = merge({}, {\n        changedValue: this.attributes[key]\n      }, {\n        changedValue: props[key]\n      });\n      changedAttributes[key] = changedValue;\n    }\n    return this.set(changedAttributes, options);\n  },\n  // A convenient way to unset nested properties\n  removeProp: function (path, opt) {\n    opt = opt || {};\n    var pathArray = Array.isArray(path) ? path : path.split('/');\n\n    // Once a property is removed from the `attrs` attribute\n    // the cellView will recognize a `dirty` flag and re-render itself\n    // in order to remove the attribute from SVG element.\n    var property = pathArray[0];\n    if (property === 'attrs') opt.dirty = true;\n    if (pathArray.length === 1) {\n      // A top level property\n      return this.unset(path, opt);\n    }\n\n    // A nested property\n    var nestedPath = pathArray.slice(1);\n    var propertyValue = this.get(property);\n    if (propertyValue === undefined || propertyValue === null) return this;\n    propertyValue = cloneDeep(propertyValue);\n    unsetByPath(propertyValue, nestedPath, '/');\n    return this.set(property, propertyValue, opt);\n  },\n  // A convenient way to set nested attributes.\n  attr: function (attrs, value, opt) {\n    var args = Array.from(arguments);\n    if (args.length === 0) {\n      return this.get('attrs');\n    }\n    if (Array.isArray(attrs)) {\n      args[0] = ['attrs'].concat(attrs);\n    } else if (isString(attrs)) {\n      // Get/set an attribute by a special path syntax that delimits\n      // nested objects by the colon character.\n      args[0] = 'attrs/' + attrs;\n    } else {\n      args[0] = {\n        'attrs': attrs\n      };\n    }\n    return this.prop.apply(this, args);\n  },\n  // A convenient way to unset nested attributes\n  removeAttr: function (path, opt) {\n    if (Array.isArray(path)) {\n      return this.removeProp(['attrs'].concat(path));\n    }\n    return this.removeProp('attrs/' + path, opt);\n  },\n  transition: function (path, value, opt, delim) {\n    delim = delim || '/';\n    var defaults = {\n      duration: 100,\n      delay: 10,\n      timingFunction: timing.linear,\n      valueFunction: interpolate.number\n    };\n    opt = assign(defaults, opt);\n    var firstFrameTime = 0;\n    var interpolatingFunction;\n    var setter = function (runtime) {\n      var id, progress, propertyValue;\n      firstFrameTime = firstFrameTime || runtime;\n      runtime -= firstFrameTime;\n      progress = runtime / opt.duration;\n      if (progress < 1) {\n        this._transitionIds[path] = id = nextFrame(setter);\n      } else {\n        progress = 1;\n        delete this._transitionIds[path];\n      }\n      propertyValue = interpolatingFunction(opt.timingFunction(progress));\n      opt.transitionId = id;\n      this.prop(path, propertyValue, opt);\n      if (!id) this.trigger('transition:end', this, path);\n    }.bind(this);\n    const {\n      _scheduledTransitionIds\n    } = this;\n    let initialId;\n    var initiator = callback => {\n      if (_scheduledTransitionIds[path]) {\n        _scheduledTransitionIds[path] = without(_scheduledTransitionIds[path], initialId);\n        if (_scheduledTransitionIds[path].length === 0) {\n          delete _scheduledTransitionIds[path];\n        }\n      }\n      this.stopPendingTransitions(path, delim);\n      interpolatingFunction = opt.valueFunction(getByPath(this.attributes, path, delim), value);\n      this._transitionIds[path] = nextFrame(callback);\n      this.trigger('transition:start', this, path);\n    };\n    initialId = setTimeout(initiator, opt.delay, setter);\n    _scheduledTransitionIds[path] || (_scheduledTransitionIds[path] = []);\n    _scheduledTransitionIds[path].push(initialId);\n    return initialId;\n  },\n  getTransitions: function () {\n    return union(Object.keys(this._transitionIds), Object.keys(this._scheduledTransitionIds));\n  },\n  stopScheduledTransitions: function (path, delim = '/') {\n    const {\n      _scheduledTransitionIds = {}\n    } = this;\n    let transitions = Object.keys(_scheduledTransitionIds);\n    if (path) {\n      const pathArray = path.split(delim);\n      transitions = transitions.filter(key => {\n        return isEqual(pathArray, key.split(delim).slice(0, pathArray.length));\n      });\n    }\n    transitions.forEach(key => {\n      const transitionIds = _scheduledTransitionIds[key];\n      // stop the initiator\n      transitionIds.forEach(transitionId => clearTimeout(transitionId));\n      delete _scheduledTransitionIds[key];\n      // Note: we could trigger transition:cancel` event here\n    });\n    return this;\n  },\n  stopPendingTransitions(path, delim = '/') {\n    const {\n      _transitionIds = {}\n    } = this;\n    let transitions = Object.keys(_transitionIds);\n    if (path) {\n      const pathArray = path.split(delim);\n      transitions = transitions.filter(key => {\n        return isEqual(pathArray, key.split(delim).slice(0, pathArray.length));\n      });\n    }\n    transitions.forEach(key => {\n      const transitionId = _transitionIds[key];\n      // stop the setter\n      cancelFrame(transitionId);\n      delete _transitionIds[key];\n      this.trigger('transition:end', this, key);\n    });\n  },\n  stopTransitions: function (path, delim = '/') {\n    this.stopScheduledTransitions(path, delim);\n    this.stopPendingTransitions(path, delim);\n    return this;\n  },\n  // A shorcut making it easy to create constructs like the following:\n  // `var el = (new joint.shapes.basic.Rect).addTo(graph)`.\n  addTo: function (graph, opt) {\n    graph.addCell(this, opt);\n    return this;\n  },\n  // A shortcut for an equivalent call: `paper.findViewByModel(cell)`\n  // making it easy to create constructs like the following:\n  // `cell.findView(paper).highlight()`\n  findView: function (paper) {\n    return paper.findViewByModel(this);\n  },\n  isElement: function () {\n    return false;\n  },\n  isLink: function () {\n    return false;\n  },\n  startBatch: function (name, opt) {\n    if (this.graph) {\n      this.graph.startBatch(name, assign({}, opt, {\n        cell: this\n      }));\n    }\n    return this;\n  },\n  stopBatch: function (name, opt) {\n    if (this.graph) {\n      this.graph.stopBatch(name, assign({}, opt, {\n        cell: this\n      }));\n    }\n    return this;\n  },\n  getChangeFlag: function (attributes) {\n    var flag = 0;\n    if (!attributes) return flag;\n    for (var key in attributes) {\n      if (!attributes.hasOwnProperty(key) || !this.hasChanged(key)) continue;\n      flag |= attributes[key];\n    }\n    return flag;\n  },\n  angle: function () {\n    // To be overridden.\n    return 0;\n  },\n  position: function () {\n    // To be overridden.\n    return new g.Point(0, 0);\n  },\n  z: function () {\n    return this.get('z') || 0;\n  },\n  getPointFromConnectedLink: function () {\n    // To be overridden\n    return new g.Point();\n  },\n  getBBox: function () {\n    // To be overridden\n    return new g.Rect(0, 0, 0, 0);\n  },\n  getPointRotatedAroundCenter(angle, x, y) {\n    const point = new g.Point(x, y);\n    if (angle) point.rotate(this.getBBox().center(), angle);\n    return point;\n  },\n  getAbsolutePointFromRelative(x, y) {\n    // Rotate the position to take the model angle into account\n    return this.getPointRotatedAroundCenter(-this.angle(),\n    // Transform the relative position to absolute\n    this.position().offset(x, y));\n  },\n  getRelativePointFromAbsolute(x, y) {\n    return this\n    // Rotate the coordinates to mitigate the element's rotation.\n    .getPointRotatedAroundCenter(this.angle(), x, y)\n    // Transform the absolute position into relative\n    .difference(this.position());\n  }\n}, {\n  getAttributeDefinition: function (attrName) {\n    var defNS = this.attributes;\n    var globalDefNS = attributes;\n    return defNS && defNS[attrName] || globalDefNS[attrName];\n  },\n  define: function (type, defaults, protoProps, staticProps) {\n    protoProps = assign({\n      defaults: defaultsDeep({\n        type: type\n      }, defaults, this.prototype.defaults)\n    }, protoProps);\n    var Cell = this.extend(protoProps, staticProps);\n    // es5 backward compatibility\n    /* eslint-disable no-undef */\n    if (typeof joint !== 'undefined' && has(joint, 'shapes')) {\n      setByPath(joint.shapes, type, Cell, '.');\n    }\n    /* eslint-enable no-undef */\n    return Cell;\n  }\n});", "import $ from 'jquery';\nimport V from '../V/index.mjs';\nimport { config } from '../config/index.mjs';\nimport { isBoolean, isObject, isNumber, isString, mixin, deepMixin, supplement, defaults, defaultsDeep, deepSupplement, assign, invoke, invokeProperty, sortedIndex, uniq, clone, cloneDeep, isEmpty, isEqual, isFunction, isPlainObject, toArray, debounce, groupBy, sortBy, flattenDeep, without, difference, intersection, union, has, result, omit, pick, bindAll, forIn, camelCase, uniqueId, merge } from './utilHelpers.mjs';\nexport const addClassNamePrefix = function (className) {\n  if (!className) return className;\n  return className.toString().split(' ').map(function (_className) {\n    if (_className.substr(0, config.classNamePrefix.length) !== config.classNamePrefix) {\n      _className = config.classNamePrefix + _className;\n    }\n    return _className;\n  }).join(' ');\n};\nexport const removeClassNamePrefix = function (className) {\n  if (!className) return className;\n  return className.toString().split(' ').map(function (_className) {\n    if (_className.substr(0, config.classNamePrefix.length) === config.classNamePrefix) {\n      _className = _className.substr(config.classNamePrefix.length);\n    }\n    return _className;\n  }).join(' ');\n};\nexport const parseDOMJSON = function (json, namespace) {\n  const selectors = {};\n  const groupSelectors = {};\n  const svgNamespace = V.namespace.svg;\n  const ns = namespace || svgNamespace;\n  const fragment = document.createDocumentFragment();\n  const parseNode = function (siblingsDef, parentNode, ns) {\n    for (let i = 0; i < siblingsDef.length; i++) {\n      const nodeDef = siblingsDef[i];\n\n      // Text node\n      if (typeof nodeDef === 'string') {\n        const textNode = document.createTextNode(nodeDef);\n        parentNode.appendChild(textNode);\n        continue;\n      }\n\n      // TagName\n      if (!nodeDef.hasOwnProperty('tagName')) throw new Error('json-dom-parser: missing tagName');\n      const tagName = nodeDef.tagName;\n      let node;\n\n      // Namespace URI\n      if (nodeDef.hasOwnProperty('namespaceURI')) ns = nodeDef.namespaceURI;\n      node = document.createElementNS(ns, tagName);\n      const svg = ns === svgNamespace;\n      const wrapper = svg ? V : $;\n      // Attributes\n      const attributes = nodeDef.attributes;\n      if (attributes) wrapper(node).attr(attributes);\n      // Style\n      const style = nodeDef.style;\n      if (style) $(node).css(style);\n      // ClassName\n      if (nodeDef.hasOwnProperty('className')) {\n        const className = nodeDef.className;\n        if (svg) {\n          node.className.baseVal = className;\n        } else {\n          node.className = className;\n        }\n      }\n      // TextContent\n      if (nodeDef.hasOwnProperty('textContent')) {\n        node.textContent = nodeDef.textContent;\n      }\n      // Selector\n      if (nodeDef.hasOwnProperty('selector')) {\n        const nodeSelector = nodeDef.selector;\n        if (selectors[nodeSelector]) throw new Error('json-dom-parser: selector must be unique');\n        selectors[nodeSelector] = node;\n        wrapper(node).attr('joint-selector', nodeSelector);\n      }\n      // Groups\n      if (nodeDef.hasOwnProperty('groupSelector')) {\n        let nodeGroups = nodeDef.groupSelector;\n        if (!Array.isArray(nodeGroups)) nodeGroups = [nodeGroups];\n        for (let j = 0; j < nodeGroups.length; j++) {\n          const nodeGroup = nodeGroups[j];\n          let group = groupSelectors[nodeGroup];\n          if (!group) group = groupSelectors[nodeGroup] = [];\n          group.push(node);\n        }\n      }\n      parentNode.appendChild(node);\n\n      // Children\n      const childrenDef = nodeDef.children;\n      if (Array.isArray(childrenDef)) {\n        parseNode(childrenDef, node, ns);\n      }\n    }\n  };\n  parseNode(json, fragment, ns);\n  return {\n    fragment: fragment,\n    selectors: selectors,\n    groupSelectors: groupSelectors\n  };\n};\n\n// Return a simple hash code from a string. See http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/.\nexport const hashCode = function (str) {\n  let hash = 0;\n  if (str.length === 0) return hash;\n  for (let i = 0; i < str.length; i++) {\n    const c = str.charCodeAt(i);\n    hash = (hash << 5) - hash + c;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n  return hash;\n};\nexport const getByPath = function (obj, path, delimiter) {\n  var keys = Array.isArray(path) ? path : path.split(delimiter || '/');\n  var key;\n  var i = 0;\n  var length = keys.length;\n  while (i < length) {\n    key = keys[i++];\n    if (Object(obj) === obj && key in obj) {\n      obj = obj[key];\n    } else {\n      return undefined;\n    }\n  }\n  return obj;\n};\nconst isGetSafe = function (obj, key) {\n  // Prevent prototype pollution\n  // https://snyk.io/vuln/SNYK-JS-JSON8MERGEPATCH-1038399\n  if (typeof key !== 'string' && typeof key !== 'number') {\n    key = String(key);\n  }\n  if (key === 'constructor' && typeof obj[key] === 'function') {\n    return false;\n  }\n  if (key === '__proto__') {\n    return false;\n  }\n  return true;\n};\nexport const setByPath = function (obj, path, value, delimiter) {\n  const keys = Array.isArray(path) ? path : path.split(delimiter || '/');\n  const last = keys.length - 1;\n  let diver = obj;\n  let i = 0;\n  for (; i < last; i++) {\n    const key = keys[i];\n    if (!isGetSafe(diver, key)) return obj;\n    const value = diver[key];\n    // diver creates an empty object if there is no nested object under such a key.\n    // This means that one can populate an empty nested object with setByPath().\n    diver = value || (diver[key] = {});\n  }\n  diver[keys[last]] = value;\n  return obj;\n};\nexport const unsetByPath = function (obj, path, delimiter) {\n  const keys = Array.isArray(path) ? path : path.split(delimiter || '/');\n  const last = keys.length - 1;\n  let diver = obj;\n  let i = 0;\n  for (; i < last; i++) {\n    const key = keys[i];\n    if (!isGetSafe(diver, key)) return obj;\n    const value = diver[key];\n    if (!value) return obj;\n    diver = value;\n  }\n  delete diver[keys[last]];\n  return obj;\n};\nexport const flattenObject = function (obj, delim, stop) {\n  delim = delim || '/';\n  var ret = {};\n  for (var key in obj) {\n    if (!obj.hasOwnProperty(key)) continue;\n    var shouldGoDeeper = typeof obj[key] === 'object';\n    if (shouldGoDeeper && stop && stop(obj[key])) {\n      shouldGoDeeper = false;\n    }\n    if (shouldGoDeeper) {\n      var flatObject = flattenObject(obj[key], delim, stop);\n      for (var flatKey in flatObject) {\n        if (!flatObject.hasOwnProperty(flatKey)) continue;\n        ret[key + delim + flatKey] = flatObject[flatKey];\n      }\n    } else {\n      ret[key] = obj[key];\n    }\n  }\n  return ret;\n};\nexport const uuid = function () {\n  // credit: http://stackoverflow.com/posts/2117523/revisions\n\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n};\n\n// Generates global unique id and stores it as a property of the object, if provided.\nexport const guid = function (obj) {\n  guid.id = guid.id || 1;\n  if (obj === undefined) {\n    return 'j_' + guid.id++;\n  }\n  obj.id = obj.id === undefined ? 'j_' + guid.id++ : obj.id;\n  return obj.id;\n};\nexport const toKebabCase = function (string) {\n  return string.replace(/[A-Z]/g, '-$&').toLowerCase();\n};\nexport const normalizeEvent = function (evt) {\n  if (evt.normalized) return evt;\n  const {\n    originalEvent,\n    target\n  } = evt;\n\n  // If the event is a touch event, normalize it to a mouse event.\n  const touch = originalEvent && originalEvent.changedTouches && originalEvent.changedTouches[0];\n  if (touch) {\n    for (let property in touch) {\n      // copy all the properties from the first touch that are not\n      // defined on TouchEvent (clientX, clientY, pageX, pageY, screenX, screenY, identifier, ...)\n      if (evt[property] === undefined) {\n        evt[property] = touch[property];\n      }\n    }\n  }\n  // IE: evt.target could be set to SVGElementInstance for SVGUseElement\n  if (target) {\n    const useElement = target.correspondingUseElement;\n    if (useElement) evt.target = useElement;\n  }\n  evt.normalized = true;\n  return evt;\n};\nexport const normalizeWheel = function (evt) {\n  // Sane values derived empirically\n  const PIXEL_STEP = 10;\n  const LINE_HEIGHT = 40;\n  const PAGE_HEIGHT = 800;\n  let sX = 0,\n    sY = 0,\n    pX = 0,\n    pY = 0;\n\n  // Legacy\n  if ('detail' in evt) {\n    sY = evt.detail;\n  }\n  if ('wheelDelta' in evt) {\n    sY = -evt.wheelDelta / 120;\n  }\n  if ('wheelDeltaY' in evt) {\n    sY = -evt.wheelDeltaY / 120;\n  }\n  if ('wheelDeltaX' in evt) {\n    sX = -evt.wheelDeltaX / 120;\n  }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ('axis' in evt && evt.axis === evt.HORIZONTAL_AXIS) {\n    sX = sY;\n    sY = 0;\n  }\n  pX = 'deltaX' in evt ? evt.deltaX : sX * PIXEL_STEP;\n  pY = 'deltaY' in evt ? evt.deltaY : sY * PIXEL_STEP;\n  if ((pX || pY) && evt.deltaMode) {\n    if (evt.deltaMode == 1) {\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else {\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // macOS switches deltaX and deltaY automatically when scrolling with shift key, so this is needed in other cases\n  if (evt.deltaX === 0 && evt.deltaY !== 0 && evt.shiftKey) {\n    pX = pY;\n    pY = 0;\n    sX = sY;\n    sY = 0;\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) {\n    sX = pX < 1 ? -1 : 1;\n  }\n  if (pY && !sY) {\n    sY = pY < 1 ? -1 : 1;\n  }\n  return {\n    spinX: sX,\n    spinY: sY,\n    deltaX: pX,\n    deltaY: pY\n  };\n};\nexport const cap = function (val, max) {\n  return val > max ? max : val < -max ? -max : val;\n};\nexport const nextFrame = function () {\n  var raf;\n  if (typeof window !== 'undefined') {\n    raf = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n  }\n  if (!raf) {\n    var lastTime = 0;\n    raf = function (callback) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = setTimeout(function () {\n        callback(currTime + timeToCall);\n      }, timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n  }\n  return function (callback, context, ...rest) {\n    return context !== undefined ? raf(callback.bind(context, ...rest)) : raf(callback);\n  };\n}();\nexport const cancelFrame = function () {\n  var caf;\n  var client = typeof window != 'undefined';\n  if (client) {\n    caf = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || window.msCancelAnimationFrame || window.msCancelRequestAnimationFrame || window.oCancelAnimationFrame || window.oCancelRequestAnimationFrame || window.mozCancelAnimationFrame || window.mozCancelRequestAnimationFrame;\n  }\n  caf = caf || clearTimeout;\n  return client ? caf.bind(window) : caf;\n}();\n\n/**\n * @deprecated\n */\nexport const shapePerimeterConnectionPoint = function (linkView, view, magnet, reference) {\n  var bbox;\n  var spot;\n  if (!magnet) {\n    // There is no magnet, try to make the best guess what is the\n    // wrapping SVG element. This is because we want this \"smart\"\n    // connection points to work out of the box without the\n    // programmer to put magnet marks to any of the subelements.\n    // For example, we want the function to work on basic.Path elements\n    // without any special treatment of such elements.\n    // The code below guesses the wrapping element based on\n    // one simple assumption. The wrapping elemnet is the\n    // first child of the scalable group if such a group exists\n    // or the first child of the rotatable group if not.\n    // This makese sense because usually the wrapping element\n    // is below any other sub element in the shapes.\n    var scalable = view.$('.scalable')[0];\n    var rotatable = view.$('.rotatable')[0];\n    if (scalable && scalable.firstChild) {\n      magnet = scalable.firstChild;\n    } else if (rotatable && rotatable.firstChild) {\n      magnet = rotatable.firstChild;\n    }\n  }\n  if (magnet) {\n    spot = V(magnet).findIntersection(reference, linkView.paper.cells);\n    if (!spot) {\n      bbox = V(magnet).getBBox({\n        target: linkView.paper.cells\n      });\n    }\n  } else {\n    bbox = view.model.getBBox();\n    spot = bbox.intersectionWithLineFromCenterToPoint(reference);\n  }\n  return spot || bbox.center();\n};\nexport const isPercentage = function (val) {\n  return isString(val) && val.slice(-1) === '%';\n};\nexport const parseCssNumeric = function (val, restrictUnits) {\n  function getUnit(validUnitExp) {\n    // one or more numbers, followed by\n    // any number of (\n    //  `.`, followed by\n    //  one or more numbers\n    // ), followed by\n    // `validUnitExp`, followed by\n    // end of string\n    var matches = new RegExp('(?:\\\\d+(?:\\\\.\\\\d+)*)(' + validUnitExp + ')$').exec(val);\n    if (!matches) return null;\n    return matches[1];\n  }\n  var number = parseFloat(val);\n\n  // if `val` cannot be parsed as a number, return `null`\n  if (Number.isNaN(number)) return null;\n\n  // else: we know `output.value`\n  var output = {};\n  output.value = number;\n\n  // determine the unit\n  var validUnitExp;\n  if (restrictUnits == null) {\n    // no restriction\n    // accept any unit, as well as no unit\n    validUnitExp = '[A-Za-z]*';\n  } else if (Array.isArray(restrictUnits)) {\n    // if this is an empty array, top restriction - return `null`\n    if (restrictUnits.length === 0) return null;\n\n    // else: restriction - an array of valid unit strings\n    validUnitExp = restrictUnits.join('|');\n  } else if (isString(restrictUnits)) {\n    // restriction - a single valid unit string\n    validUnitExp = restrictUnits;\n  }\n  var unit = getUnit(validUnitExp);\n\n  // if we found no matches for `restrictUnits`, return `null`\n  if (unit === null) return null;\n\n  // else: we know the unit\n  output.unit = unit;\n  return output;\n};\nconst NO_SPACE = 0;\nfunction splitWordWithEOL(word, eol) {\n  const eolWords = word.split(eol);\n  let n = 1;\n  for (let j = 0, jl = eolWords.length - 1; j < jl; j++) {\n    const replacement = [];\n    if (j > 0 || eolWords[0] !== '') replacement.push(NO_SPACE);\n    replacement.push(eol);\n    if (j < jl - 1 || eolWords[jl] !== '') replacement.push(NO_SPACE);\n    eolWords.splice(n, 0, ...replacement);\n    n += replacement.length + 1;\n  }\n  return eolWords.filter(word => word !== '');\n}\nfunction getLineHeight(heightValue, textElement) {\n  if (heightValue === null) {\n    // Default 1em lineHeight\n    return textElement.getBBox().height;\n  }\n  switch (heightValue.unit) {\n    case 'em':\n      return textElement.getBBox().height * heightValue.value;\n    case 'px':\n    case '':\n      return heightValue.value;\n  }\n}\nexport const breakText = function (text, size, styles = {}, opt = {}) {\n  var width = size.width;\n  var height = size.height;\n  var svgDocument = opt.svgDocument || V('svg').node;\n  var textSpan = V('tspan').node;\n  var textElement = V('text').attr(styles).append(textSpan).node;\n  var textNode = document.createTextNode('');\n\n  // Prevent flickering\n  textElement.style.opacity = 0;\n  // Prevent FF from throwing an uncaught exception when `getBBox()`\n  // called on element that is not in the render tree (is not measurable).\n  // <tspan>.getComputedTextLength() returns always 0 in this case.\n  // Note that the `textElement` resp. `textSpan` can become hidden\n  // when it's appended to the DOM and a `display: none` CSS stylesheet\n  // rule gets applied.\n  textElement.style.display = 'block';\n  textSpan.style.display = 'block';\n  textSpan.appendChild(textNode);\n  svgDocument.appendChild(textElement); // lgtm [js/xss-through-dom]\n\n  if (!opt.svgDocument) {\n    document.body.appendChild(svgDocument);\n  }\n  const preserveSpaces = opt.preserveSpaces;\n  const space = ' ';\n  const separator = opt.separator || opt.separator === '' ? opt.separator : space;\n  // If separator is a RegExp, we use the space character to join words together again (not ideal)\n  const separatorChar = typeof separator === 'string' ? separator : space;\n  var eol = opt.eol || '\\n';\n  var hyphen = opt.hyphen ? new RegExp(opt.hyphen) : /[^\\w\\d\\u00C0-\\u1FFF\\u2800-\\uFFFD]/;\n  var maxLineCount = opt.maxLineCount;\n  if (!isNumber(maxLineCount)) maxLineCount = Infinity;\n  var words = text.split(separator);\n  var full = [];\n  var lines = [];\n  var p, h;\n  var lineHeight;\n  if (preserveSpaces) {\n    V(textSpan).attr('xml:space', 'preserve');\n  }\n  for (var i = 0, l = 0, len = words.length; i < len; i++) {\n    var word = words[i];\n    if (!word && !preserveSpaces) continue;\n    if (typeof word !== 'string') continue;\n    var isEol = false;\n    if (eol && word.indexOf(eol) >= 0) {\n      // word contains end-of-line character\n      if (word.length > 1) {\n        // separate word and continue cycle\n        const eolWords = splitWordWithEOL(words[i], eol);\n        words.splice(i, 1, ...eolWords);\n        i--;\n        len = words.length;\n        continue;\n      } else {\n        // creates a new line\n        if (preserveSpaces && typeof words[i - 1] === 'string') {\n          words.splice(i, NO_SPACE, '', NO_SPACE);\n          len += 2;\n          i--;\n          continue;\n        }\n        lines[++l] = !preserveSpaces || typeof words[i + 1] === 'string' ? '' : undefined;\n        isEol = true;\n      }\n    }\n    if (!isEol) {\n      let data;\n      if (preserveSpaces) {\n        data = lines[l] !== undefined ? lines[l] + separatorChar + word : word;\n      } else {\n        data = lines[l] ? lines[l] + separatorChar + word : word;\n      }\n      textNode.data = data;\n      if (textSpan.getComputedTextLength() <= width) {\n        // the current line fits\n        lines[l] = data;\n        if (p || h) {\n          // We were partitioning. Put rest of the word onto next line\n          full[l++] = true;\n\n          // cancel partitioning and splitting by hyphens\n          p = 0;\n          h = 0;\n        }\n      } else {\n        if (!lines[l] || p) {\n          var partition = !!p;\n          p = word.length - 1;\n          if (partition || !p) {\n            // word has only one character.\n            if (!p) {\n              if (!lines[l]) {\n                // we won't fit this text within our rect\n                lines = [];\n                break;\n              }\n\n              // partitioning didn't help on the non-empty line\n              // try again, but this time start with a new line\n\n              // cancel partitions created\n              words.splice(i, 2, word + words[i + 1]);\n\n              // adjust word length\n              len--;\n              full[l++] = true;\n              i--;\n              continue;\n            }\n\n            // move last letter to the beginning of the next word\n            words[i] = word.substring(0, p);\n            const nextWord = words[i + 1];\n            words[i + 1] = word.substring(p) + (nextWord === undefined || nextWord === NO_SPACE ? '' : nextWord);\n          } else {\n            if (h) {\n              // cancel splitting and put the words together again\n              words.splice(i, 2, words[i] + words[i + 1]);\n              h = 0;\n            } else {\n              var hyphenIndex = word.search(hyphen);\n              if (hyphenIndex > -1 && hyphenIndex !== word.length - 1 && hyphenIndex !== 0) {\n                h = hyphenIndex + 1;\n                p = 0;\n              }\n\n              // We initiate partitioning or splitting\n              // split the long word into two words\n              words.splice(i, 1, word.substring(0, h || p), word.substring(h || p));\n              // adjust words length\n              len++;\n            }\n            if (l && !full[l - 1]) {\n              // if the previous line is not full, try to fit max part of\n              // the current word there\n              l--;\n            }\n          }\n          if (!preserveSpaces || lines[l] !== '') {\n            i--;\n          }\n          continue;\n        }\n        l++;\n        i--;\n      }\n    }\n    var lastL = null;\n    if (lines.length > maxLineCount) {\n      lastL = maxLineCount - 1;\n    } else if (height !== undefined) {\n      // if size.height is defined we have to check whether the height of the entire\n      // text exceeds the rect height\n\n      if (lineHeight === undefined && textNode.data !== '') {\n        // use the same defaults as in V.prototype.text\n        if (styles.lineHeight === 'auto') {\n          lineHeight = getLineHeight({\n            value: 1.5,\n            unit: 'em'\n          }, textElement);\n        } else {\n          const parsed = parseCssNumeric(styles.lineHeight, ['em', 'px', '']);\n          lineHeight = getLineHeight(parsed, textElement);\n        }\n      }\n      if (lineHeight * lines.length > height) {\n        // remove overflowing lines\n        lastL = Math.floor(height / lineHeight) - 1;\n      }\n    }\n    if (lastL !== null) {\n      lines.splice(lastL + 1);\n\n      // add ellipsis\n      var ellipsis = opt.ellipsis;\n      if (!ellipsis || lastL < 0) break;\n      if (typeof ellipsis !== 'string') ellipsis = '\\u2026';\n      var lastLine = lines[lastL];\n      if (!lastLine && !isEol) break;\n      var k = lastLine.length;\n      var lastLineWithOmission, lastChar;\n      do {\n        lastChar = lastLine[k];\n        lastLineWithOmission = lastLine.substring(0, k);\n        if (!lastChar) {\n          lastLineWithOmission += separatorChar;\n        } else if (lastChar.match(separator)) {\n          lastLineWithOmission += lastChar;\n        }\n        lastLineWithOmission += ellipsis;\n        textNode.data = lastLineWithOmission;\n        if (textSpan.getComputedTextLength() <= width) {\n          lines[lastL] = lastLineWithOmission;\n          break;\n        }\n        k--;\n      } while (k >= 0);\n      break;\n    }\n  }\n  if (opt.svgDocument) {\n    // svg document was provided, remove the text element only\n    svgDocument.removeChild(textElement);\n  } else {\n    // clean svg document\n    document.body.removeChild(svgDocument);\n  }\n  return lines.join(eol);\n};\n\n// Sanitize HTML\n// Based on https://gist.github.com/ufologist/5a0da51b2b9ef1b861c30254172ac3c9\n// Parses a string into an array of DOM nodes.\n// Then outputs it back as a string.\nexport const sanitizeHTML = function (html) {\n  // Ignores tags that are invalid inside a <div> tag (e.g. <body>, <head>)\n\n  // If documentContext (second parameter) is not specified or given as `null` or `undefined`, a new document is used.\n  // Inline events will not execute when the HTML is parsed; this includes, for example, sending GET requests for images.\n\n  // If keepScripts (last parameter) is `false`, scripts are not executed.\n  var output = $($.parseHTML('<div>' + html + '</div>', null, false));\n  output.find('*').each(function () {\n    // for all nodes\n    var currentNode = this;\n    $.each(currentNode.attributes, function () {\n      // for all attributes in each node\n      var currentAttribute = this;\n      var attrName = currentAttribute.name;\n      var attrValue = currentAttribute.value;\n\n      // Remove attribute names that start with \"on\" (e.g. onload, onerror...).\n      // Remove attribute values that start with \"javascript:\" pseudo protocol (e.g. `href=\"javascript:alert(1)\"`).\n      if (attrName.startsWith('on') || attrValue.startsWith('javascript:') || attrValue.startsWith('data:') || attrValue.startsWith('vbscript:')) {\n        $(currentNode).removeAttr(attrName);\n      }\n    });\n  });\n  return output.html();\n};\n\n// Download `blob` as file with `fileName`.\n// Does not work in IE9.\nexport const downloadBlob = function (blob, fileName) {\n  if (window.navigator.msSaveBlob) {\n    // requires IE 10+\n    // pulls up a save dialog\n    window.navigator.msSaveBlob(blob, fileName);\n  } else {\n    // other browsers\n    // downloads directly in Chrome and Safari\n\n    // presents a save/open dialog in Firefox\n    // Firefox bug: `from` field in save dialog always shows `from:blob:`\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1053327\n\n    var url = window.URL.createObjectURL(blob);\n    var link = document.createElement('a');\n    link.href = url;\n    link.download = fileName;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(url); // mark the url for garbage collection\n  }\n};\n\n// Download `dataUri` as file with `fileName`.\n// Does not work in IE9.\nexport const downloadDataUri = function (dataUri, fileName) {\n  const blob = dataUriToBlob(dataUri);\n  downloadBlob(blob, fileName);\n};\n\n// Convert an uri-encoded data component (possibly also base64-encoded) to a blob.\nexport const dataUriToBlob = function (dataUri) {\n  // first, make sure there are no newlines in the data uri\n  dataUri = dataUri.replace(/\\s/g, '');\n  dataUri = decodeURIComponent(dataUri);\n  var firstCommaIndex = dataUri.indexOf(','); // split dataUri as `dataTypeString`,`data`\n\n  var dataTypeString = dataUri.slice(0, firstCommaIndex); // e.g. 'data:image/jpeg;base64'\n  var mimeString = dataTypeString.split(':')[1].split(';')[0]; // e.g. 'image/jpeg'\n\n  var data = dataUri.slice(firstCommaIndex + 1);\n  var decodedString;\n  if (dataTypeString.indexOf('base64') >= 0) {\n    // data may be encoded in base64\n    decodedString = atob(data); // decode data\n  } else {\n    // convert the decoded string to UTF-8\n    decodedString = unescape(encodeURIComponent(data));\n  }\n  // write the bytes of the string to a typed array\n  var ia = new Uint8Array(decodedString.length);\n  for (var i = 0; i < decodedString.length; i++) {\n    ia[i] = decodedString.charCodeAt(i);\n  }\n  return new Blob([ia], {\n    type: mimeString\n  }); // return the typed array as Blob\n};\n\n// Read an image at `url` and return it as base64-encoded data uri.\n// The mime type of the image is inferred from the `url` file extension.\n// If data uri is provided as `url`, it is returned back unchanged.\n// `callback` is a method with `err` as first argument and `dataUri` as second argument.\n// Works with IE9.\nexport const imageToDataUri = function (url, callback) {\n  if (!url || url.substr(0, 'data:'.length) === 'data:') {\n    // No need to convert to data uri if it is already in data uri.\n\n    // This not only convenient but desired. For example,\n    // IE throws a security error if data:image/svg+xml is used to render\n    // an image to the canvas and an attempt is made to read out data uri.\n    // Now if our image is already in data uri, there is no need to render it to the canvas\n    // and so we can bypass this error.\n\n    // Keep the async nature of the function.\n    return setTimeout(function () {\n      callback(null, url);\n    }, 0);\n  }\n\n  // chrome, IE10+\n  var modernHandler = function (xhr, callback) {\n    if (xhr.status === 200) {\n      var reader = new FileReader();\n      reader.onload = function (evt) {\n        var dataUri = evt.target.result;\n        callback(null, dataUri);\n      };\n      reader.onerror = function () {\n        callback(new Error('Failed to load image ' + url));\n      };\n      reader.readAsDataURL(xhr.response);\n    } else {\n      callback(new Error('Failed to load image ' + url));\n    }\n  };\n  var legacyHandler = function (xhr, callback) {\n    var Uint8ToString = function (u8a) {\n      var CHUNK_SZ = 0x8000;\n      var c = [];\n      for (var i = 0; i < u8a.length; i += CHUNK_SZ) {\n        c.push(String.fromCharCode.apply(null, u8a.subarray(i, i + CHUNK_SZ)));\n      }\n      return c.join('');\n    };\n    if (xhr.status === 200) {\n      var bytes = new Uint8Array(xhr.response);\n      var suffix = url.split('.').pop() || 'png';\n      var map = {\n        'svg': 'svg+xml'\n      };\n      var meta = 'data:image/' + (map[suffix] || suffix) + ';base64,';\n      var b64encoded = meta + btoa(Uint8ToString(bytes));\n      callback(null, b64encoded);\n    } else {\n      callback(new Error('Failed to load image ' + url));\n    }\n  };\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url, true);\n  xhr.addEventListener('error', function () {\n    callback(new Error('Failed to load image ' + url));\n  });\n  xhr.responseType = window.FileReader ? 'blob' : 'arraybuffer';\n  xhr.addEventListener('load', function () {\n    if (window.FileReader) {\n      modernHandler(xhr, callback);\n    } else {\n      legacyHandler(xhr, callback);\n    }\n  });\n  xhr.send();\n};\nexport const getElementBBox = function (el) {\n  var $el = $(el);\n  if ($el.length === 0) {\n    throw new Error('Element not found');\n  }\n  var element = $el[0];\n  var doc = element.ownerDocument;\n  var clientBBox = element.getBoundingClientRect();\n  var strokeWidthX = 0;\n  var strokeWidthY = 0;\n\n  // Firefox correction\n  if (element.ownerSVGElement) {\n    var vel = V(element);\n    var bbox = vel.getBBox({\n      target: vel.svg()\n    });\n\n    // if FF getBoundingClientRect includes stroke-width, getBBox doesn't.\n    // To unify this across all browsers we need to adjust the final bBox with `stroke-width` value.\n    strokeWidthX = clientBBox.width - bbox.width;\n    strokeWidthY = clientBBox.height - bbox.height;\n  }\n  return {\n    x: clientBBox.left + window.pageXOffset - doc.documentElement.offsetLeft + strokeWidthX / 2,\n    y: clientBBox.top + window.pageYOffset - doc.documentElement.offsetTop + strokeWidthY / 2,\n    width: clientBBox.width - strokeWidthX,\n    height: clientBBox.height - strokeWidthY\n  };\n};\n\n// Highly inspired by the jquery.sortElements plugin by Padolsey.\n// See http://james.padolsey.com/javascript/sorting-elements-with-jquery/.\nexport const sortElements = function (elements, comparator) {\n  var $elements = $(elements);\n  var placements = $elements.map(function () {\n    var sortElement = this;\n    var parentNode = sortElement.parentNode;\n    // Since the element itself will change position, we have\n    // to have some way of storing it's original position in\n    // the DOM. The easiest way is to have a 'flag' node:\n    var nextSibling = parentNode.insertBefore(document.createTextNode(''), sortElement.nextSibling);\n    return function () {\n      if (parentNode === this) {\n        throw new Error('You can\\'t sort elements if any one is a descendant of another.');\n      }\n\n      // Insert before flag:\n      parentNode.insertBefore(this, nextSibling);\n      // Remove flag:\n      parentNode.removeChild(nextSibling);\n    };\n  });\n  return Array.prototype.sort.call($elements, comparator).each(function (i) {\n    placements[i].call(this);\n  });\n};\n\n// Sets attributes on the given element and its descendants based on the selector.\n// `attrs` object: { [SELECTOR1]: { attrs1 }, [SELECTOR2]: { attrs2}, ... } e.g. { 'input': { color : 'red' }}\nexport const setAttributesBySelector = function (element, attrs) {\n  var $element = $(element);\n  forIn(attrs, function (attrs, selector) {\n    var $elements = $element.find(selector).addBack().filter(selector);\n    // Make a special case for setting classes.\n    // We do not want to overwrite any existing class.\n    if (has(attrs, 'class')) {\n      $elements.addClass(attrs['class']);\n      attrs = omit(attrs, 'class');\n    }\n    $elements.attr(attrs);\n  });\n};\n\n// Return a new object with all four sides (top, right, bottom, left) in it.\n// Value of each side is taken from the given argument (either number or object).\n// Default value for a side is 0.\n// Examples:\n// normalizeSides(5) --> { top: 5, right: 5, bottom: 5, left: 5 }\n// normalizeSides({ horizontal: 5 }) --> { top: 0, right: 5, bottom: 0, left: 5 }\n// normalizeSides({ left: 5 }) --> { top: 0, right: 0, bottom: 0, left: 5 }\n// normalizeSides({ horizontal: 10, left: 5 }) --> { top: 0, right: 10, bottom: 0, left: 5 }\n// normalizeSides({ horizontal: 0, left: 5 }) --> { top: 0, right: 0, bottom: 0, left: 5 }\nexport const normalizeSides = function (box) {\n  if (Object(box) !== box) {\n    // `box` is not an object\n    var val = 0; // `val` left as 0 if `box` cannot be understood as finite number\n    if (isFinite(box)) val = +box; // actually also accepts string numbers (e.g. '100')\n\n    return {\n      top: val,\n      right: val,\n      bottom: val,\n      left: val\n    };\n  }\n\n  // `box` is an object\n  var top, right, bottom, left;\n  top = right = bottom = left = 0;\n  if (isFinite(box.vertical)) top = bottom = +box.vertical;\n  if (isFinite(box.horizontal)) right = left = +box.horizontal;\n  if (isFinite(box.top)) top = +box.top; // overwrite vertical\n  if (isFinite(box.right)) right = +box.right; // overwrite horizontal\n  if (isFinite(box.bottom)) bottom = +box.bottom; // overwrite vertical\n  if (isFinite(box.left)) left = +box.left; // overwrite horizontal\n\n  return {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left\n  };\n};\nexport const timing = {\n  linear: function (t) {\n    return t;\n  },\n  quad: function (t) {\n    return t * t;\n  },\n  cubic: function (t) {\n    return t * t * t;\n  },\n  inout: function (t) {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    var t2 = t * t;\n    var t3 = t2 * t;\n    return 4 * (t < .5 ? t3 : 3 * (t - t2) + t3 - .75);\n  },\n  exponential: function (t) {\n    return Math.pow(2, 10 * (t - 1));\n  },\n  bounce: function (t) {\n    for (var a = 0, b = 1; 1; a += b, b /= 2) {\n      if (t >= (7 - 4 * a) / 11) {\n        var q = (11 - 6 * a - 11 * t) / 4;\n        return -q * q + b * b;\n      }\n    }\n  },\n  reverse: function (f) {\n    return function (t) {\n      return 1 - f(1 - t);\n    };\n  },\n  reflect: function (f) {\n    return function (t) {\n      return .5 * (t < .5 ? f(2 * t) : 2 - f(2 - 2 * t));\n    };\n  },\n  clamp: function (f, n, x) {\n    n = n || 0;\n    x = x || 1;\n    return function (t) {\n      var r = f(t);\n      return r < n ? n : r > x ? x : r;\n    };\n  },\n  back: function (s) {\n    if (!s) s = 1.70158;\n    return function (t) {\n      return t * t * ((s + 1) * t - s);\n    };\n  },\n  elastic: function (x) {\n    if (!x) x = 1.5;\n    return function (t) {\n      return Math.pow(2, 10 * (t - 1)) * Math.cos(20 * Math.PI * x / 3 * t);\n    };\n  }\n};\nexport const interpolate = {\n  number: function (a, b) {\n    var d = b - a;\n    return function (t) {\n      return a + d * t;\n    };\n  },\n  object: function (a, b) {\n    var s = Object.keys(a);\n    return function (t) {\n      var i, p;\n      var r = {};\n      for (i = s.length - 1; i != -1; i--) {\n        p = s[i];\n        r[p] = a[p] + (b[p] - a[p]) * t;\n      }\n      return r;\n    };\n  },\n  hexColor: function (a, b) {\n    var ca = parseInt(a.slice(1), 16);\n    var cb = parseInt(b.slice(1), 16);\n    var ra = ca & 0x0000ff;\n    var rd = (cb & 0x0000ff) - ra;\n    var ga = ca & 0x00ff00;\n    var gd = (cb & 0x00ff00) - ga;\n    var ba = ca & 0xff0000;\n    var bd = (cb & 0xff0000) - ba;\n    return function (t) {\n      var r = ra + rd * t & 0x000000ff;\n      var g = ga + gd * t & 0x0000ff00;\n      var b = ba + bd * t & 0x00ff0000;\n      return '#' + (1 << 24 | r | g | b).toString(16).slice(1);\n    };\n  },\n  unit: function (a, b) {\n    var r = /(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/;\n    var ma = r.exec(a);\n    var mb = r.exec(b);\n    var p = mb[1].indexOf('.');\n    var f = p > 0 ? mb[1].length - p - 1 : 0;\n    a = +ma[1];\n    var d = +mb[1] - a;\n    var u = ma[2];\n    return function (t) {\n      return (a + d * t).toFixed(f) + u;\n    };\n  }\n};\n\n// SVG filters.\n// (values in parentheses are default values)\nexport const filter = {\n  // `color` ... outline color ('blue')\n  // `width`... outline width (1)\n  // `opacity` ... outline opacity (1)\n  // `margin` ... gap between outline and the element (2)\n  outline: function (args) {\n    var tpl = '<filter><feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/><feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" /><feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" /><feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/><feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/><feMerge><feMergeNode in=\"outline\"/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n    var margin = Number.isFinite(args.margin) ? args.margin : 2;\n    var width = Number.isFinite(args.width) ? args.width : 1;\n    return template(tpl)({\n      color: args.color || 'blue',\n      opacity: Number.isFinite(args.opacity) ? args.opacity : 1,\n      outerRadius: margin + width,\n      innerRadius: margin\n    });\n  },\n  // `color` ... color ('red')\n  // `width`... width (1)\n  // `blur` ... blur (0)\n  // `opacity` ... opacity (1)\n  highlight: function (args) {\n    var tpl = '<filter><feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/><feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/><feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/><feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/><feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/></filter>';\n    return template(tpl)({\n      color: args.color || 'red',\n      width: Number.isFinite(args.width) ? args.width : 1,\n      blur: Number.isFinite(args.blur) ? args.blur : 0,\n      opacity: Number.isFinite(args.opacity) ? args.opacity : 1\n    });\n  },\n  // `x` ... horizontal blur (2)\n  // `y` ... vertical blur (optional)\n  blur: function (args) {\n    var x = Number.isFinite(args.x) ? args.x : 2;\n    return template('<filter><feGaussianBlur stdDeviation=\"${stdDeviation}\"/></filter>')({\n      stdDeviation: Number.isFinite(args.y) ? [x, args.y] : x\n    });\n  },\n  // `dx` ... horizontal shift (0)\n  // `dy` ... vertical shift (0)\n  // `blur` ... blur (4)\n  // `color` ... color ('black')\n  // `opacity` ... opacity (1)\n  dropShadow: function (args) {\n    var tpl = 'SVGFEDropShadowElement' in window ? '<filter><feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\"/></filter>' : '<filter><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\"/><feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\"/><feFlood flood-color=\"${color}\"/><feComposite in2=\"offsetblur\" operator=\"in\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"${opacity}\"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n    return template(tpl)({\n      dx: args.dx || 0,\n      dy: args.dy || 0,\n      opacity: Number.isFinite(args.opacity) ? args.opacity : 1,\n      color: args.color || 'black',\n      blur: Number.isFinite(args.blur) ? args.blur : 4\n    });\n  },\n  // `amount` ... the proportion of the conversion (1). A value of 1 (default) is completely grayscale. A value of 0 leaves the input unchanged.\n  grayscale: function (args) {\n    var amount = Number.isFinite(args.amount) ? args.amount : 1;\n    return template('<filter><feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/></filter>')({\n      a: 0.2126 + 0.7874 * (1 - amount),\n      b: 0.7152 - 0.7152 * (1 - amount),\n      c: 0.0722 - 0.0722 * (1 - amount),\n      d: 0.2126 - 0.2126 * (1 - amount),\n      e: 0.7152 + 0.2848 * (1 - amount),\n      f: 0.0722 - 0.0722 * (1 - amount),\n      g: 0.2126 - 0.2126 * (1 - amount),\n      h: 0.0722 + 0.9278 * (1 - amount)\n    });\n  },\n  // `amount` ... the proportion of the conversion (1). A value of 1 (default) is completely sepia. A value of 0 leaves the input unchanged.\n  sepia: function (args) {\n    var amount = Number.isFinite(args.amount) ? args.amount : 1;\n    return template('<filter><feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/></filter>')({\n      a: 0.393 + 0.607 * (1 - amount),\n      b: 0.769 - 0.769 * (1 - amount),\n      c: 0.189 - 0.189 * (1 - amount),\n      d: 0.349 - 0.349 * (1 - amount),\n      e: 0.686 + 0.314 * (1 - amount),\n      f: 0.168 - 0.168 * (1 - amount),\n      g: 0.272 - 0.272 * (1 - amount),\n      h: 0.534 - 0.534 * (1 - amount),\n      i: 0.131 + 0.869 * (1 - amount)\n    });\n  },\n  // `amount` ... the proportion of the conversion (1). A value of 0 is completely un-saturated. A value of 1 (default) leaves the input unchanged.\n  saturate: function (args) {\n    var amount = Number.isFinite(args.amount) ? args.amount : 1;\n    return template('<filter><feColorMatrix type=\"saturate\" values=\"${amount}\"/></filter>')({\n      amount: 1 - amount\n    });\n  },\n  // `angle` ...  the number of degrees around the color circle the input samples will be adjusted (0).\n  hueRotate: function (args) {\n    return template('<filter><feColorMatrix type=\"hueRotate\" values=\"${angle}\"/></filter>')({\n      angle: args.angle || 0\n    });\n  },\n  // `amount` ... the proportion of the conversion (1). A value of 1 (default) is completely inverted. A value of 0 leaves the input unchanged.\n  invert: function (args) {\n    var amount = Number.isFinite(args.amount) ? args.amount : 1;\n    return template('<filter><feComponentTransfer><feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/><feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/><feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/></feComponentTransfer></filter>')({\n      amount: amount,\n      amount2: 1 - amount\n    });\n  },\n  // `amount` ... proportion of the conversion (1). A value of 0 will create an image that is completely black. A value of 1 (default) leaves the input unchanged.\n  brightness: function (args) {\n    return template('<filter><feComponentTransfer><feFuncR type=\"linear\" slope=\"${amount}\"/><feFuncG type=\"linear\" slope=\"${amount}\"/><feFuncB type=\"linear\" slope=\"${amount}\"/></feComponentTransfer></filter>')({\n      amount: Number.isFinite(args.amount) ? args.amount : 1\n    });\n  },\n  // `amount` ... proportion of the conversion (1). A value of 0 will create an image that is completely black. A value of 1 (default) leaves the input unchanged.\n  contrast: function (args) {\n    var amount = Number.isFinite(args.amount) ? args.amount : 1;\n    return template('<filter><feComponentTransfer><feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/><feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/><feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/></feComponentTransfer></filter>')({\n      amount: amount,\n      amount2: .5 - amount / 2\n    });\n  }\n};\nexport const format = {\n  // Formatting numbers via the Python Format Specification Mini-language.\n  // See http://docs.python.org/release/3.1.3/library/string.html#format-specification-mini-language.\n  // Heavilly inspired by the D3.js library implementation.\n  number: function (specifier, value, locale) {\n    locale = locale || {\n      currency: ['$', ''],\n      decimal: '.',\n      thousands: ',',\n      grouping: [3]\n    };\n\n    // See Python format specification mini-language: http://docs.python.org/release/3.1.3/library/string.html#format-specification-mini-language.\n    // [[fill]align][sign][symbol][0][width][,][.precision][type]\n    var re = /(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i;\n    var match = re.exec(specifier);\n    var fill = match[1] || ' ';\n    var align = match[2] || '>';\n    var sign = match[3] || '';\n    var symbol = match[4] || '';\n    var zfill = match[5];\n    var width = +match[6];\n    var comma = match[7];\n    var precision = match[8];\n    var type = match[9];\n    var scale = 1;\n    var prefix = '';\n    var suffix = '';\n    var integer = false;\n    if (precision) precision = +precision.substring(1);\n    if (zfill || fill === '0' && align === '=') {\n      zfill = fill = '0';\n      align = '=';\n      if (comma) width -= Math.floor((width - 1) / 4);\n    }\n    switch (type) {\n      case 'n':\n        comma = true;\n        type = 'g';\n        break;\n      case '%':\n        scale = 100;\n        suffix = '%';\n        type = 'f';\n        break;\n      case 'p':\n        scale = 100;\n        suffix = '%';\n        type = 'r';\n        break;\n      case 'b':\n      case 'o':\n      case 'x':\n      case 'X':\n        if (symbol === '#') prefix = '0' + type.toLowerCase();\n        break;\n      case 'c':\n      case 'd':\n        integer = true;\n        precision = 0;\n        break;\n      case 's':\n        scale = -1;\n        type = 'r';\n        break;\n    }\n    if (symbol === '$') {\n      prefix = locale.currency[0];\n      suffix = locale.currency[1];\n    }\n\n    // If no precision is specified for `'r'`, fallback to general notation.\n    if (type == 'r' && !precision) type = 'g';\n\n    // Ensure that the requested precision is in the supported range.\n    if (precision != null) {\n      if (type == 'g') precision = Math.max(1, Math.min(21, precision));else if (type == 'e' || type == 'f') precision = Math.max(0, Math.min(20, precision));\n    }\n    var zcomma = zfill && comma;\n\n    // Return the empty string for floats formatted as ints.\n    if (integer && value % 1) return '';\n\n    // Convert negative to positive, and record the sign prefix.\n    var negative = value < 0 || value === 0 && 1 / value < 0 ? (value = -value, '-') : sign;\n    var fullSuffix = suffix;\n\n    // Apply the scale, computing it from the value's exponent for si format.\n    // Preserve the existing suffix, if any, such as the currency symbol.\n    if (scale < 0) {\n      var unit = this.prefix(value, precision);\n      value = unit.scale(value);\n      fullSuffix = unit.symbol + suffix;\n    } else {\n      value *= scale;\n    }\n\n    // Convert to the desired precision.\n    value = this.convert(type, value, precision);\n\n    // Break the value into the integer part (before) and decimal part (after).\n    var i = value.lastIndexOf('.');\n    var before = i < 0 ? value : value.substring(0, i);\n    var after = i < 0 ? '' : locale.decimal + value.substring(i + 1);\n    function formatGroup(value) {\n      var i = value.length;\n      var t = [];\n      var j = 0;\n      var g = locale.grouping[0];\n      while (i > 0 && g > 0) {\n        t.push(value.substring(i -= g, i + g));\n        g = locale.grouping[j = (j + 1) % locale.grouping.length];\n      }\n      return t.reverse().join(locale.thousands);\n    }\n\n    // If the fill character is not `'0'`, grouping is applied before padding.\n    if (!zfill && comma && locale.grouping) {\n      before = formatGroup(before);\n    }\n    var length = prefix.length + before.length + after.length + (zcomma ? 0 : negative.length);\n    var padding = length < width ? new Array(length = width - length + 1).join(fill) : '';\n\n    // If the fill character is `'0'`, grouping is applied after padding.\n    if (zcomma) before = formatGroup(padding + before);\n\n    // Apply prefix.\n    negative += prefix;\n\n    // Rejoin integer and decimal parts.\n    value = before + after;\n    return (align === '<' ? negative + value + padding : align === '>' ? padding + negative + value : align === '^' ? padding.substring(0, length >>= 1) + negative + value + padding.substring(length) : negative + (zcomma ? value : padding + value)) + fullSuffix;\n  },\n  // Formatting string via the Python Format string.\n  // See https://docs.python.org/2/library/string.html#format-string-syntax)\n  string: function (formatString, value) {\n    var fieldDelimiterIndex;\n    var fieldDelimiter = '{';\n    var endPlaceholder = false;\n    var formattedStringArray = [];\n    while ((fieldDelimiterIndex = formatString.indexOf(fieldDelimiter)) !== -1) {\n      var pieceFormattedString, formatSpec, fieldName;\n      pieceFormattedString = formatString.slice(0, fieldDelimiterIndex);\n      if (endPlaceholder) {\n        formatSpec = pieceFormattedString.split(':');\n        fieldName = formatSpec.shift().split('.');\n        pieceFormattedString = value;\n        for (var i = 0; i < fieldName.length; i++) pieceFormattedString = pieceFormattedString[fieldName[i]];\n        if (formatSpec.length) pieceFormattedString = this.number(formatSpec, pieceFormattedString);\n      }\n      formattedStringArray.push(pieceFormattedString);\n      formatString = formatString.slice(fieldDelimiterIndex + 1);\n      endPlaceholder = !endPlaceholder;\n      fieldDelimiter = endPlaceholder ? '}' : '{';\n    }\n    formattedStringArray.push(formatString);\n    return formattedStringArray.join('');\n  },\n  convert: function (type, value, precision) {\n    switch (type) {\n      case 'b':\n        return value.toString(2);\n      case 'c':\n        return String.fromCharCode(value);\n      case 'o':\n        return value.toString(8);\n      case 'x':\n        return value.toString(16);\n      case 'X':\n        return value.toString(16).toUpperCase();\n      case 'g':\n        return value.toPrecision(precision);\n      case 'e':\n        return value.toExponential(precision);\n      case 'f':\n        return value.toFixed(precision);\n      case 'r':\n        return (value = this.round(value, this.precision(value, precision))).toFixed(Math.max(0, Math.min(20, this.precision(value * (1 + 1e-15), precision))));\n      default:\n        return value + '';\n    }\n  },\n  round: function (value, precision) {\n    return precision ? Math.round(value * (precision = Math.pow(10, precision))) / precision : Math.round(value);\n  },\n  precision: function (value, precision) {\n    return precision - (value ? Math.ceil(Math.log(value) / Math.LN10) : 1);\n  },\n  prefix: function (value, precision) {\n    var prefixes = ['y', 'z', 'a', 'f', 'p', 'n', '', 'm', '', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'].map(function (d, i) {\n      var k = Math.pow(10, Math.abs(8 - i) * 3);\n      return {\n        scale: i > 8 ? function (d) {\n          return d / k;\n        } : function (d) {\n          return d * k;\n        },\n        symbol: d\n      };\n    });\n    var i = 0;\n    if (value) {\n      if (value < 0) value *= -1;\n      if (precision) value = this.round(value, this.precision(value, precision));\n      i = 1 + Math.floor(1e-12 + Math.log(value) / Math.LN10);\n      i = Math.max(-24, Math.min(24, Math.floor((i <= 0 ? i + 1 : i - 1) / 3) * 3));\n    }\n    return prefixes[8 + i / 3];\n  }\n};\n\n/*\n    Pre-compile the HTML to be used as a template.\n*/\nexport const template = function (html) {\n  /*\n      Must support the variation in templating syntax found here:\n      https://lodash.com/docs#template\n  */\n  var regex = /<%= ([^ ]+) %>|\\$\\{ ?([^{} ]+) ?\\}|\\{\\{([^{} ]+)\\}\\}/g;\n  return function (data) {\n    data = data || {};\n    return html.replace(regex, function (match) {\n      var args = Array.from(arguments);\n      var attr = args.slice(1, 4).find(function (_attr) {\n        return !!_attr;\n      });\n      var attrArray = attr.split('.');\n      var value = data[attrArray.shift()];\n      while (value !== undefined && attrArray.length) {\n        value = value[attrArray.shift()];\n      }\n      return value !== undefined ? value : '';\n    });\n  };\n};\n\n/**\n * @param {Element} el Element, which content is intent to display in full-screen mode, 'window.top.document.body' is default.\n */\nexport const toggleFullScreen = function (el) {\n  var topDocument = window.top.document;\n  el = el || topDocument.body;\n  function prefixedResult(el, prop) {\n    var prefixes = ['webkit', 'moz', 'ms', 'o', ''];\n    for (var i = 0; i < prefixes.length; i++) {\n      var prefix = prefixes[i];\n      var propName = prefix ? prefix + prop : prop.substr(0, 1).toLowerCase() + prop.substr(1);\n      if (el[propName] !== undefined) {\n        return isFunction(el[propName]) ? el[propName]() : el[propName];\n      }\n    }\n  }\n  if (prefixedResult(topDocument, 'FullscreenElement') || prefixedResult(topDocument, 'FullScreenElement')) {\n    prefixedResult(topDocument, 'ExitFullscreen') ||\n    // Spec.\n    prefixedResult(topDocument, 'CancelFullScreen'); // Firefox\n  } else {\n    prefixedResult(el, 'RequestFullscreen') ||\n    // Spec.\n    prefixedResult(el, 'RequestFullScreen'); // Firefox\n  }\n};\nexport { isBoolean, isObject, isNumber, isString, mixin, deepMixin, supplement, defaults, deepSupplement, defaultsDeep, assign, invoke, invokeProperty, sortedIndex, uniq, clone, cloneDeep, isEmpty, isEqual, isFunction, isPlainObject, toArray, debounce, groupBy, sortBy, flattenDeep, without, difference, intersection, union, has, result, omit, pick, bindAll, forIn, camelCase, uniqueId, merge };\nexport const noop = function () {};", "// Vectorizer.\n// -----------\n\n// A tiny library for making your life easier when dealing with SVG.\n// The only Vectorizer dependency is the Geometry library.\n\nimport * as g from '../g/index.mjs';\nconst V = function () {\n  var hasSvg = typeof window === 'object' && !!window.SVGAngle;\n\n  // SVG support is required.\n  if (!hasSvg) {\n    // Return a function that throws an error when it is used.\n    return function () {\n      throw new Error('SVG is required to use Vectorizer.');\n    };\n  }\n\n  // XML namespaces.\n  var ns = {\n    svg: 'http://www.w3.org/2000/svg',\n    xmlns: 'http://www.w3.org/2000/xmlns/',\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xlink: 'http://www.w3.org/1999/xlink',\n    xhtml: 'http://www.w3.org/1999/xhtml'\n  };\n  var SVGVersion = '1.1';\n\n  // Declare shorthands to the most used math functions.\n  var math = Math;\n  var PI = math.PI;\n  var atan2 = math.atan2;\n  var sqrt = math.sqrt;\n  var min = math.min;\n  var max = math.max;\n  var cos = math.cos;\n  var sin = math.sin;\n  var V = function (el, attrs, children) {\n    // This allows using V() without the new keyword.\n    if (!(this instanceof V)) {\n      return V.apply(Object.create(V.prototype), arguments);\n    }\n    if (!el) return;\n    if (V.isV(el)) {\n      el = el.node;\n    }\n    attrs = attrs || {};\n    if (V.isString(el)) {\n      el = el.trim();\n      if (el.toLowerCase() === 'svg') {\n        // Create a new SVG canvas.\n        el = V.createSvgDocument();\n      } else if (el[0] === '<') {\n        // Create element from an SVG string.\n        // Allows constructs of type: `document.appendChild(V('<rect></rect>').node)`.\n\n        var svgDoc = V.createSvgDocument(el);\n\n        // Note that `V()` might also return an array should the SVG string passed as\n        // the first argument contain more than one root element.\n        if (svgDoc.childNodes.length > 1) {\n          // Map child nodes to `V`s.\n          var arrayOfVels = [];\n          var i, len;\n          for (i = 0, len = svgDoc.childNodes.length; i < len; i++) {\n            var childNode = svgDoc.childNodes[i];\n            arrayOfVels.push(new V(document.importNode(childNode, true)));\n          }\n          return arrayOfVels;\n        }\n        el = document.importNode(svgDoc.firstChild, true);\n      } else {\n        el = document.createElementNS(ns.svg, el);\n      }\n      V.ensureId(el);\n    }\n    this.node = el;\n    this.setAttributes(attrs);\n    if (children) {\n      this.append(children);\n    }\n    return this;\n  };\n  var VPrototype = V.prototype;\n  Object.defineProperty(VPrototype, 'id', {\n    enumerable: true,\n    get: function () {\n      return this.node.id;\n    },\n    set: function (id) {\n      this.node.id = id;\n    }\n  });\n\n  /**\n   * @param {SVGGElement} toElem\n   * @returns {SVGMatrix}\n   */\n  VPrototype.getTransformToElement = function (target) {\n    var node = this.node;\n    if (V.isSVGGraphicsElement(target) && V.isSVGGraphicsElement(node)) {\n      var targetCTM = V.toNode(target).getScreenCTM();\n      var nodeCTM = node.getScreenCTM();\n      if (targetCTM && nodeCTM) {\n        return targetCTM.inverse().multiply(nodeCTM);\n      }\n    }\n    // Could not get actual transformation matrix\n    return V.createSVGMatrix();\n  };\n\n  /**\n   * @param {SVGMatrix} matrix\n   * @param {Object=} opt\n   * @returns {Vectorizer|SVGMatrix} Setter / Getter\n   */\n  VPrototype.transform = function (matrix, opt) {\n    var node = this.node;\n    if (V.isUndefined(matrix)) {\n      return V.transformStringToMatrix(this.attr('transform'));\n    }\n    if (opt && opt.absolute) {\n      return this.attr('transform', V.matrixToTransformString(matrix));\n    }\n    var svgTransform = V.createSVGTransform(matrix);\n    node.transform.baseVal.appendItem(svgTransform);\n    return this;\n  };\n  VPrototype.translate = function (tx, ty, opt) {\n    opt = opt || {};\n    ty = ty || 0;\n    var transformAttr = this.attr('transform') || '';\n    var transform = V.parseTransformString(transformAttr);\n    transformAttr = transform.value;\n    // Is it a getter?\n    if (V.isUndefined(tx)) {\n      return transform.translate;\n    }\n    transformAttr = transformAttr.replace(/translate\\([^)]*\\)/g, '').trim();\n    var newTx = opt.absolute ? tx : transform.translate.tx + tx;\n    var newTy = opt.absolute ? ty : transform.translate.ty + ty;\n    var newTranslate = 'translate(' + newTx + ',' + newTy + ')';\n\n    // Note that `translate()` is always the first transformation. This is\n    // usually the desired case.\n    this.attr('transform', (newTranslate + ' ' + transformAttr).trim());\n    return this;\n  };\n  VPrototype.rotate = function (angle, cx, cy, opt) {\n    opt = opt || {};\n    var transformAttr = this.attr('transform') || '';\n    var transform = V.parseTransformString(transformAttr);\n    transformAttr = transform.value;\n\n    // Is it a getter?\n    if (V.isUndefined(angle)) {\n      return transform.rotate;\n    }\n    transformAttr = transformAttr.replace(/rotate\\([^)]*\\)/g, '').trim();\n    angle %= 360;\n    var newAngle = opt.absolute ? angle : transform.rotate.angle + angle;\n    var newOrigin = cx !== undefined && cy !== undefined ? ',' + cx + ',' + cy : '';\n    var newRotate = 'rotate(' + newAngle + newOrigin + ')';\n    this.attr('transform', (transformAttr + ' ' + newRotate).trim());\n    return this;\n  };\n\n  // Note that `scale` as the only transformation does not combine with previous values.\n  VPrototype.scale = function (sx, sy) {\n    sy = V.isUndefined(sy) ? sx : sy;\n    var transformAttr = this.attr('transform') || '';\n    var transform = V.parseTransformString(transformAttr);\n    transformAttr = transform.value;\n\n    // Is it a getter?\n    if (V.isUndefined(sx)) {\n      return transform.scale;\n    }\n    transformAttr = transformAttr.replace(/scale\\([^)]*\\)/g, '').trim();\n    var newScale = 'scale(' + sx + ',' + sy + ')';\n    this.attr('transform', (transformAttr + ' ' + newScale).trim());\n    return this;\n  };\n\n  // Get SVGRect that contains coordinates and dimension of the real bounding box,\n  // i.e. after transformations are applied.\n  // If `target` is specified, bounding box will be computed relatively to `target` element.\n  VPrototype.bbox = function (withoutTransformations, target) {\n    var box;\n    var node = this.node;\n    var ownerSVGElement = node.ownerSVGElement;\n\n    // If the element is not in the live DOM, it does not have a bounding box defined and\n    // so fall back to 'zero' dimension element.\n    if (!ownerSVGElement) {\n      return new g.Rect(0, 0, 0, 0);\n    }\n    try {\n      box = node.getBBox();\n    } catch (e) {\n      // Fallback for IE.\n      box = {\n        x: node.clientLeft,\n        y: node.clientTop,\n        width: node.clientWidth,\n        height: node.clientHeight\n      };\n    }\n    if (withoutTransformations) {\n      return new g.Rect(box);\n    }\n    var matrix = this.getTransformToElement(target || ownerSVGElement);\n    return V.transformRect(box, matrix);\n  };\n\n  // Returns an SVGRect that contains coordinates and dimensions of the real bounding box,\n  // i.e. after transformations are applied.\n  // Fixes a browser implementation bug that returns incorrect bounding boxes for groups of svg elements.\n  // Takes an (Object) `opt` argument (optional) with the following attributes:\n  // (Object) `target` (optional): if not undefined, transform bounding boxes relative to `target`; if undefined, transform relative to this\n  // (Boolean) `recursive` (optional): if true, recursively enter all groups and get a union of element bounding boxes (svg bbox fix); if false or undefined, return result of native function this.node.getBBox();\n  VPrototype.getBBox = function (opt) {\n    var options = {};\n    var outputBBox;\n    var node = this.node;\n    var ownerSVGElement = node.ownerSVGElement;\n\n    // If the element is not in the live DOM, it does not have a bounding box defined and\n    // so fall back to 'zero' dimension element.\n    // If the element is not an SVGGraphicsElement, we could not measure the bounding box either\n    if (!ownerSVGElement || !V.isSVGGraphicsElement(node)) {\n      return new g.Rect(0, 0, 0, 0);\n    }\n    if (opt) {\n      if (opt.target) {\n        // check if target exists\n        options.target = V.toNode(opt.target); // works for V objects, jquery objects, and node objects\n      }\n      if (opt.recursive) {\n        options.recursive = opt.recursive;\n      }\n    }\n    if (!options.recursive) {\n      try {\n        outputBBox = node.getBBox();\n      } catch (e) {\n        // Fallback for IE.\n        outputBBox = {\n          x: node.clientLeft,\n          y: node.clientTop,\n          width: node.clientWidth,\n          height: node.clientHeight\n        };\n      }\n      if (!options.target) {\n        // transform like this (that is, not at all)\n        return new g.Rect(outputBBox);\n      } else {\n        // transform like target\n        var matrix = this.getTransformToElement(options.target);\n        return V.transformRect(outputBBox, matrix);\n      }\n    } else {\n      // if we want to calculate the bbox recursively\n      // browsers report correct bbox around svg elements (one that envelops the path lines tightly)\n      // but some browsers fail to report the same bbox when the elements are in a group (returning a looser bbox that also includes control points, like node.getClientRect())\n      // this happens even if we wrap a single svg element into a group!\n      // this option setting makes the function recursively enter all the groups from this and deeper, get bboxes of the elements inside, then return a union of those bboxes\n\n      var children = this.children();\n      var n = children.length;\n      if (n === 0) {\n        return this.getBBox({\n          target: options.target,\n          recursive: false\n        });\n      }\n\n      // recursion's initial pass-through setting:\n      // recursive passes-through just keep the target as whatever was set up here during the initial pass-through\n      if (!options.target) {\n        // transform children/descendants like this (their parent/ancestor)\n        options.target = this;\n      } // else transform children/descendants like target\n\n      for (var i = 0; i < n; i++) {\n        var currentChild = children[i];\n        var childBBox;\n\n        // if currentChild is not a group element, get its bbox with a nonrecursive call\n        if (currentChild.children().length === 0) {\n          childBBox = currentChild.getBBox({\n            target: options.target,\n            recursive: false\n          });\n        } else {\n          // if currentChild is a group element (determined by checking the number of children), enter it with a recursive call\n          childBBox = currentChild.getBBox({\n            target: options.target,\n            recursive: true\n          });\n        }\n        if (!outputBBox) {\n          // if this is the first iteration\n          outputBBox = childBBox;\n        } else {\n          // make a new bounding box rectangle that contains this child's bounding box and previous bounding box\n          outputBBox = outputBBox.union(childBBox);\n        }\n      }\n      return outputBBox;\n    }\n  };\n\n  // Text() helpers\n\n  function createTextPathNode(attrs, vel) {\n    attrs || (attrs = {});\n    var textPathElement = V('textPath');\n    var d = attrs.d;\n    if (d && attrs['xlink:href'] === undefined) {\n      // If `opt.attrs` is a plain string, consider it to be directly the\n      // SVG path data for the text to go along (this is a shortcut).\n      // Otherwise if it is an object and contains the `d` property, then this is our path.\n      // Wrap the text in the SVG <textPath> element that points\n      // to a path defined by `opt.attrs` inside the `<defs>` element.\n      var linkedPath = V('path').attr('d', d).appendTo(vel.defs());\n      textPathElement.attr('xlink:href', '#' + linkedPath.id);\n    }\n    if (V.isObject(attrs)) {\n      // Set attributes on the `<textPath>`. The most important one\n      // is the `xlink:href` that points to our newly created `<path/>` element in `<defs/>`.\n      // Note that we also allow the following construct:\n      // `t.text('my text', { textPath: { 'xlink:href': '#my-other-path' } })`.\n      // In other words, one can completely skip the auto-creation of the path\n      // and use any other arbitrary path that is in the document.\n      textPathElement.attr(attrs);\n    }\n    return textPathElement.node;\n  }\n  function annotateTextLine(lineNode, lineAnnotations, opt) {\n    opt || (opt = {});\n    var includeAnnotationIndices = opt.includeAnnotationIndices;\n    var eol = opt.eol;\n    var lineHeight = opt.lineHeight;\n    var baseSize = opt.baseSize;\n    var maxFontSize = 0;\n    var fontMetrics = {};\n    var lastJ = lineAnnotations.length - 1;\n    for (var j = 0; j <= lastJ; j++) {\n      var annotation = lineAnnotations[j];\n      var fontSize = null;\n      if (V.isObject(annotation)) {\n        var annotationAttrs = annotation.attrs;\n        var vTSpan = V('tspan', annotationAttrs);\n        var tspanNode = vTSpan.node;\n        var t = annotation.t;\n        if (eol && j === lastJ) t += eol;\n        tspanNode.textContent = t;\n        // Per annotation className\n        var annotationClass = annotationAttrs['class'];\n        if (annotationClass) vTSpan.addClass(annotationClass);\n        // If `opt.includeAnnotationIndices` is `true`,\n        // set the list of indices of all the applied annotations\n        // in the `annotations` attribute. This list is a comma\n        // separated list of indices.\n        if (includeAnnotationIndices) vTSpan.attr('annotations', annotation.annotations);\n        // Check for max font size\n        fontSize = parseFloat(annotationAttrs['font-size']);\n        if (!isFinite(fontSize)) fontSize = baseSize;\n        if (fontSize && fontSize > maxFontSize) maxFontSize = fontSize;\n      } else {\n        if (eol && j === lastJ) annotation += eol;\n        tspanNode = document.createTextNode(annotation || ' ');\n        if (baseSize && baseSize > maxFontSize) maxFontSize = baseSize;\n      }\n      lineNode.appendChild(tspanNode);\n    }\n    if (maxFontSize) fontMetrics.maxFontSize = maxFontSize;\n    if (lineHeight) {\n      fontMetrics.lineHeight = lineHeight;\n    } else if (maxFontSize) {\n      fontMetrics.lineHeight = maxFontSize * 1.2;\n    }\n    return fontMetrics;\n  }\n  var emRegex = /em$/;\n  function convertEmToPx(em, fontSize) {\n    var numerical = parseFloat(em);\n    if (emRegex.test(em)) return numerical * fontSize;\n    return numerical;\n  }\n  function calculateDY(alignment, linesMetrics, baseSizePx, lineHeight) {\n    if (!Array.isArray(linesMetrics)) return 0;\n    var n = linesMetrics.length;\n    if (!n) return 0;\n    var lineMetrics = linesMetrics[0];\n    var flMaxFont = convertEmToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    var rLineHeights = 0;\n    var lineHeightPx = convertEmToPx(lineHeight, baseSizePx);\n    for (var i = 1; i < n; i++) {\n      lineMetrics = linesMetrics[i];\n      var iLineHeight = convertEmToPx(lineMetrics.lineHeight, baseSizePx) || lineHeightPx;\n      rLineHeights += iLineHeight;\n    }\n    var llMaxFont = convertEmToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    var dy;\n    switch (alignment) {\n      case 'middle':\n        dy = flMaxFont / 2 - 0.15 * llMaxFont - rLineHeights / 2;\n        break;\n      case 'bottom':\n        dy = -(0.25 * llMaxFont) - rLineHeights;\n        break;\n      default:\n      case 'top':\n        dy = 0.8 * flMaxFont;\n        break;\n    }\n    return dy;\n  }\n  VPrototype.text = function (content, opt) {\n    if (content && typeof content !== 'string') throw new Error('Vectorizer: text() expects the first argument to be a string.');\n\n    // Replace all spaces with the Unicode No-break space (http://www.fileformat.info/info/unicode/char/a0/index.htm).\n    // IE would otherwise collapse all spaces into one.\n    content = V.sanitizeText(content);\n    opt || (opt = {});\n    // Should we allow the text to be selected?\n    var displayEmpty = opt.displayEmpty;\n    // End of Line character\n    var eol = opt.eol;\n    // Text along path\n    var textPath = opt.textPath;\n    // Vertical shift\n    var verticalAnchor = opt.textVerticalAnchor;\n    var namedVerticalAnchor = verticalAnchor === 'middle' || verticalAnchor === 'bottom' || verticalAnchor === 'top';\n    // Horizontal shift applied to all the lines but the first.\n    var x = opt.x;\n    if (x === undefined) x = this.attr('x') || 0;\n    // Annotations\n    var iai = opt.includeAnnotationIndices;\n    var annotations = opt.annotations;\n    if (annotations && !V.isArray(annotations)) annotations = [annotations];\n    // Shift all the <tspan> but first by one line (`1em`)\n    var defaultLineHeight = opt.lineHeight;\n    var autoLineHeight = defaultLineHeight === 'auto';\n    var lineHeight = autoLineHeight ? '1.5em' : defaultLineHeight || '1em';\n    // Clearing the element\n    this.empty();\n    this.attr({\n      // Preserve spaces. In other words, we do not want consecutive spaces to get collapsed to one.\n      'xml:space': 'preserve',\n      // An empty text gets rendered into the DOM in webkit-based browsers.\n      // In order to unify this behaviour across all browsers\n      // we rather hide the text element when it's empty.\n      'display': content || displayEmpty ? null : 'none'\n    });\n\n    // Set default font-size if none\n    var fontSize = parseFloat(this.attr('font-size'));\n    if (!fontSize) {\n      fontSize = 16;\n      if (namedVerticalAnchor || annotations) this.attr('font-size', fontSize);\n    }\n    var doc = document;\n    var containerNode;\n    if (textPath) {\n      // Now all the `<tspan>`s will be inside the `<textPath>`.\n      if (typeof textPath === 'string') textPath = {\n        d: textPath\n      };\n      containerNode = createTextPathNode(textPath, this);\n    } else {\n      containerNode = doc.createDocumentFragment();\n    }\n    var offset = 0;\n    var lines = content.split('\\n');\n    var linesMetrics = [];\n    var annotatedY;\n    for (var i = 0, lastI = lines.length - 1; i <= lastI; i++) {\n      var dy = lineHeight;\n      var lineClassName = 'v-line';\n      var lineNode = doc.createElementNS(ns.svg, 'tspan');\n      var line = lines[i];\n      var lineMetrics;\n      if (line) {\n        if (annotations) {\n          // Find the *compacted* annotations for this line.\n          var lineAnnotations = V.annotateString(line, annotations, {\n            offset: -offset,\n            includeAnnotationIndices: iai\n          });\n          lineMetrics = annotateTextLine(lineNode, lineAnnotations, {\n            includeAnnotationIndices: iai,\n            eol: i !== lastI && eol,\n            lineHeight: autoLineHeight ? null : lineHeight,\n            baseSize: fontSize\n          });\n          // Get the line height based on the biggest font size in the annotations for this line.\n          var iLineHeight = lineMetrics.lineHeight;\n          if (iLineHeight && autoLineHeight && i !== 0) dy = iLineHeight;\n          if (i === 0) annotatedY = lineMetrics.maxFontSize * 0.8;\n        } else {\n          if (eol && i !== lastI) line += eol;\n          lineNode.textContent = line;\n        }\n      } else {\n        // Make sure the textContent is never empty. If it is, add a dummy\n        // character and make it invisible, making the following lines correctly\n        // relatively positioned. `dy=1em` won't work with empty lines otherwise.\n        lineNode.textContent = '-';\n        lineClassName += ' v-empty-line';\n        // 'opacity' needs to be specified with fill, stroke. Opacity without specification\n        // is not applied in Firefox\n        var lineNodeStyle = lineNode.style;\n        lineNodeStyle.fillOpacity = 0;\n        lineNodeStyle.strokeOpacity = 0;\n        if (annotations) {\n          // Empty line with annotations.\n          lineMetrics = {};\n          lineAnnotations = V.findAnnotationsAtIndex(annotations, offset);\n          let lineFontSize = fontSize;\n          // Check if any of the annotations overrides the font size.\n          for (let j = lineAnnotations.length; j > 0; j--) {\n            const attrs = lineAnnotations[j - 1].attrs;\n            if (!attrs || !('font-size' in attrs)) continue;\n            const fs = parseFloat(attrs['font-size']);\n            if (isFinite(fs)) {\n              lineFontSize = fs;\n              break;\n            }\n          }\n          if (autoLineHeight) {\n            if (i > 0) {\n              dy = lineFontSize * 1.2;\n            } else {\n              annotatedY = lineFontSize * 0.8;\n            }\n          }\n          // The font size is important for the native selection box height.\n          lineNode.setAttribute('font-size', lineFontSize);\n          lineMetrics.maxFontSize = lineFontSize;\n        }\n      }\n      if (lineMetrics) linesMetrics.push(lineMetrics);\n      if (i > 0) lineNode.setAttribute('dy', dy);\n      // Firefox requires 'x' to be set on the first line when inside a text path\n      if (i > 0 || textPath) lineNode.setAttribute('x', x);\n      lineNode.className.baseVal = lineClassName;\n      containerNode.appendChild(lineNode);\n      offset += line.length + 1; // + 1 = newline character.\n    }\n    // Y Alignment calculation\n    if (namedVerticalAnchor) {\n      if (annotations) {\n        dy = calculateDY(verticalAnchor, linesMetrics, fontSize, lineHeight);\n      } else if (verticalAnchor === 'top') {\n        // A shortcut for top alignment. It does not depend on font-size nor line-height\n        dy = '0.8em';\n      } else {\n        var rh; // remaining height\n        if (lastI > 0) {\n          rh = parseFloat(lineHeight) || 1;\n          rh *= lastI;\n          if (!emRegex.test(lineHeight)) rh /= fontSize;\n        } else {\n          // Single-line text\n          rh = 0;\n        }\n        switch (verticalAnchor) {\n          case 'middle':\n            dy = 0.3 - rh / 2 + 'em';\n            break;\n          case 'bottom':\n            dy = -rh - 0.3 + 'em';\n            break;\n        }\n      }\n    } else {\n      if (verticalAnchor === 0) {\n        dy = '0em';\n      } else if (verticalAnchor) {\n        dy = verticalAnchor;\n      } else {\n        // No vertical anchor is defined\n        dy = 0;\n        // Backwards compatibility - we change the `y` attribute instead of `dy`.\n        if (this.attr('y') === null) this.attr('y', annotatedY || '0.8em');\n      }\n    }\n    containerNode.firstChild.setAttribute('dy', dy);\n    // Appending lines to the element.\n    this.append(containerNode);\n    return this;\n  };\n\n  /**\n   * @public\n   * @param {string} name\n   * @returns {Vectorizer}\n   */\n  VPrototype.removeAttr = function (name) {\n    const trueName = attributeNames[name];\n    const {\n      ns,\n      local\n    } = V.qualifyAttr(trueName);\n    const el = this.node;\n    if (ns) {\n      if (el.hasAttributeNS(ns, local)) {\n        el.removeAttributeNS(ns, local);\n      }\n    } else if (el.hasAttribute(trueName)) {\n      el.removeAttribute(trueName);\n    }\n    return this;\n  };\n  VPrototype.attr = function (name, value) {\n    if (V.isUndefined(name)) {\n      // Return all attributes.\n      var attributes = this.node.attributes;\n      var attrs = {};\n      for (var i = 0; i < attributes.length; i++) {\n        attrs[attributes[i].name] = attributes[i].value;\n      }\n      return attrs;\n    }\n    if (V.isString(name) && V.isUndefined(value)) {\n      return this.node.getAttribute(attributeNames[name]);\n    }\n    if (typeof name === 'object') {\n      for (var attrName in name) {\n        if (name.hasOwnProperty(attrName)) {\n          this.setAttribute(attrName, name[attrName]);\n        }\n      }\n    } else {\n      this.setAttribute(name, value);\n    }\n    return this;\n  };\n  VPrototype.normalizePath = function () {\n    var tagName = this.tagName();\n    if (tagName === 'PATH') {\n      this.attr('d', V.normalizePathData(this.attr('d')));\n    }\n    return this;\n  };\n  VPrototype.remove = function () {\n    if (this.node.parentNode) {\n      this.node.parentNode.removeChild(this.node);\n    }\n    return this;\n  };\n  VPrototype.empty = function () {\n    while (this.node.firstChild) {\n      this.node.removeChild(this.node.firstChild);\n    }\n    return this;\n  };\n\n  /**\n   * @private\n   * @param {object} attrs\n   * @returns {Vectorizer}\n   */\n  VPrototype.setAttributes = function (attrs) {\n    for (var key in attrs) {\n      if (attrs.hasOwnProperty(key)) {\n        this.setAttribute(key, attrs[key]);\n      }\n    }\n    return this;\n  };\n  VPrototype.append = function (els) {\n    if (!V.isArray(els)) {\n      els = [els];\n    }\n    for (var i = 0, len = els.length; i < len; i++) {\n      this.node.appendChild(V.toNode(els[i])); // lgtm [js/xss-through-dom]\n    }\n    return this;\n  };\n  VPrototype.prepend = function (els) {\n    var child = this.node.firstChild;\n    return child ? V(child).before(els) : this.append(els);\n  };\n  VPrototype.before = function (els) {\n    var node = this.node;\n    var parent = node.parentNode;\n    if (parent) {\n      if (!V.isArray(els)) {\n        els = [els];\n      }\n      for (var i = 0, len = els.length; i < len; i++) {\n        parent.insertBefore(V.toNode(els[i]), node);\n      }\n    }\n    return this;\n  };\n  VPrototype.appendTo = function (node) {\n    V.toNode(node).appendChild(this.node); // lgtm [js/xss-through-dom]\n    return this;\n  };\n  VPrototype.svg = function () {\n    return this.node instanceof window.SVGSVGElement ? this : V(this.node.ownerSVGElement);\n  };\n  VPrototype.tagName = function () {\n    return this.node.tagName.toUpperCase();\n  };\n  VPrototype.defs = function () {\n    var context = this.svg() || this;\n    var defsNode = context.node.getElementsByTagName('defs')[0];\n    if (defsNode) return V(defsNode);\n    return V('defs').appendTo(context);\n  };\n  VPrototype.clone = function () {\n    var clone = V(this.node.cloneNode(true /* deep */));\n    // Note that clone inherits also ID. Therefore, we need to change it here.\n    clone.node.id = V.uniqueId();\n    return clone;\n  };\n  VPrototype.findOne = function (selector) {\n    var found = this.node.querySelector(selector);\n    return found ? V(found) : undefined;\n  };\n  VPrototype.find = function (selector) {\n    var vels = [];\n    var nodes = this.node.querySelectorAll(selector);\n    if (nodes) {\n      // Map DOM elements to `V`s.\n      for (var i = 0; i < nodes.length; i++) {\n        vels.push(V(nodes[i]));\n      }\n    }\n    return vels;\n  };\n\n  // Returns an array of V elements made from children of this.node.\n  VPrototype.children = function () {\n    var children = this.node.childNodes;\n    var outputArray = [];\n    for (var i = 0; i < children.length; i++) {\n      var currentChild = children[i];\n      if (currentChild.nodeType === 1) {\n        outputArray.push(V(children[i]));\n      }\n    }\n    return outputArray;\n  };\n\n  // Returns the V element from parentNode of this.node.\n  VPrototype.parent = function () {\n    return V(this.node.parentNode) || null;\n  },\n  // Find an index of an element inside its container.\n  VPrototype.index = function () {\n    var index = 0;\n    var node = this.node.previousSibling;\n    while (node) {\n      // nodeType 1 for ELEMENT_NODE\n      if (node.nodeType === 1) index++;\n      node = node.previousSibling;\n    }\n    return index;\n  };\n  VPrototype.findParentByClass = function (className, terminator) {\n    var ownerSVGElement = this.node.ownerSVGElement;\n    var node = this.node.parentNode;\n    while (node && node !== terminator && node !== ownerSVGElement) {\n      var vel = V(node);\n      if (vel.hasClass(className)) {\n        return vel;\n      }\n      node = node.parentNode;\n    }\n    return null;\n  };\n\n  // https://jsperf.com/get-common-parent\n  VPrototype.contains = function (el) {\n    var a = this.node;\n    var b = V.toNode(el);\n    var bup = b && b.parentNode;\n    return a === bup || !!(bup && bup.nodeType === 1 && a.compareDocumentPosition(bup) & 16);\n  };\n\n  // Convert global point into the coordinate space of this element.\n  VPrototype.toLocalPoint = function (x, y) {\n    var svg = this.svg().node;\n    var p = svg.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    try {\n      var globalPoint = p.matrixTransform(svg.getScreenCTM().inverse());\n      var globalToLocalMatrix = this.getTransformToElement(svg).inverse();\n    } catch (e) {\n      // IE9 throws an exception in odd cases. (`Unexpected call to method or property access`)\n      // We have to make do with the original coordianates.\n      return p;\n    }\n    return globalPoint.matrixTransform(globalToLocalMatrix);\n  };\n  VPrototype.translateCenterToPoint = function (p) {\n    var bbox = this.getBBox({\n      target: this.svg()\n    });\n    var center = bbox.center();\n    this.translate(p.x - center.x, p.y - center.y);\n    return this;\n  };\n\n  // Efficiently auto-orient an element. This basically implements the orient=auto attribute\n  // of markers. The easiest way of understanding on what this does is to imagine the element is an\n  // arrowhead. Calling this method on the arrowhead makes it point to the `position` point while\n  // being auto-oriented (properly rotated) towards the `reference` point.\n  // `target` is the element relative to which the transformations are applied. Usually a viewport.\n  VPrototype.translateAndAutoOrient = function (position, reference, target) {\n    position = new g.Point(position);\n    reference = new g.Point(reference);\n    target || (target = this.svg());\n\n    // Clean-up previously set transformations except the scale. If we didn't clean up the\n    // previous transformations then they'd add up with the old ones. Scale is an exception as\n    // it doesn't add up, consider: `this.scale(2).scale(2).scale(2)`. The result is that the\n    // element is scaled by the factor 2, not 8.\n    var scale = this.scale();\n    this.attr('transform', '');\n    var bbox = this.getBBox({\n      target: target\n    }).scale(scale.sx, scale.sy);\n\n    // 1. Translate to origin.\n    var translateToOrigin = V.createSVGTransform();\n    translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n\n    // 2. Rotate around origin.\n    var rotateAroundOrigin = V.createSVGTransform();\n    var angle = position.angleBetween(reference, position.clone().offset(1, 0));\n    if (angle) rotateAroundOrigin.setRotate(angle, 0, 0);\n\n    // 3. Translate to the `position` + the offset (half my width) towards the `reference` point.\n    var translateFromOrigin = V.createSVGTransform();\n    var finalPosition = position.clone().move(reference, bbox.width / 2);\n    translateFromOrigin.setTranslate(2 * position.x - finalPosition.x, 2 * position.y - finalPosition.y);\n\n    // 4. Get the current transformation matrix of this node\n    var ctm = this.getTransformToElement(target);\n\n    // 5. Apply transformations and the scale\n    var transform = V.createSVGTransform();\n    transform.setMatrix(translateFromOrigin.matrix.multiply(rotateAroundOrigin.matrix.multiply(translateToOrigin.matrix.multiply(ctm.scale(scale.sx, scale.sy)))));\n    this.attr('transform', V.matrixToTransformString(transform.matrix));\n    return this;\n  };\n  VPrototype.animateAlongPath = function (attrs, path) {\n    path = V.toNode(path);\n    var id = V.ensureId(path);\n    var animateMotion = V('animateMotion', attrs);\n    var mpath = V('mpath', {\n      'xlink:href': '#' + id\n    });\n    animateMotion.append(mpath);\n    this.append(animateMotion);\n    try {\n      animateMotion.node.beginElement();\n    } catch (e) {\n      // Fallback for IE 9.\n      // Run the animation programmatically if FakeSmile (`http://leunen.me/fakesmile/`) present\n      if (document.documentElement.getAttribute('smiling') === 'fake') {\n        /* global getTargets:true, Animator:true, animators:true id2anim:true */\n        // Register the animation. (See `https://answers.launchpad.net/smil/+question/203333`)\n        var animation = animateMotion.node;\n        animation.animators = [];\n        var animationID = animation.getAttribute('id');\n        if (animationID) id2anim[animationID] = animation;\n        var targets = getTargets(animation);\n        for (var i = 0, len = targets.length; i < len; i++) {\n          var target = targets[i];\n          var animator = new Animator(animation, target, i);\n          animators.push(animator);\n          animation.animators[i] = animator;\n          animator.register();\n        }\n      }\n    }\n    return this;\n  };\n\n  // Split a string into an array of tokens.\n  // https://infra.spec.whatwg.org/#ascii-whitespace\n  const noHTMLWhitespaceRegex = /[^\\x20\\t\\r\\n\\f]+/g;\n  function getTokenList(str) {\n    if (!V.isString(str)) return [];\n    return str.trim().match(noHTMLWhitespaceRegex) || [];\n  }\n  VPrototype.hasClass = function (className) {\n    if (!V.isString(className)) return false;\n    return this.node.classList.contains(className.trim());\n  };\n  VPrototype.addClass = function (className) {\n    this.node.classList.add(...getTokenList(className));\n    return this;\n  };\n  VPrototype.removeClass = function (className) {\n    this.node.classList.remove(...getTokenList(className));\n    return this;\n  };\n  VPrototype.toggleClass = function (className, toAdd) {\n    const tokens = getTokenList(className);\n    for (let i = 0; i < tokens.length; i++) {\n      this.node.classList.toggle(tokens[i], toAdd);\n    }\n    return this;\n  };\n\n  // Interpolate path by discrete points. The precision of the sampling\n  // is controlled by `interval`. In other words, `sample()` will generate\n  // a point on the path starting at the beginning of the path going to the end\n  // every `interval` pixels.\n  // The sampler can be very useful for e.g. finding intersection between two\n  // paths (finding the two closest points from two samples).\n  VPrototype.sample = function (interval) {\n    interval = interval || 1;\n    var node = this.node;\n    var length = node.getTotalLength();\n    var samples = [];\n    var distance = 0;\n    var sample;\n    while (distance < length) {\n      sample = node.getPointAtLength(distance);\n      samples.push({\n        x: sample.x,\n        y: sample.y,\n        distance: distance\n      });\n      distance += interval;\n    }\n    return samples;\n  };\n  VPrototype.convertToPath = function () {\n    var path = V('path');\n    path.attr(this.attr());\n    var d = this.convertToPathData();\n    if (d) {\n      path.attr('d', d);\n    }\n    return path;\n  };\n  VPrototype.convertToPathData = function () {\n    var tagName = this.tagName();\n    switch (tagName) {\n      case 'PATH':\n        return this.attr('d');\n      case 'LINE':\n        return V.convertLineToPathData(this.node);\n      case 'POLYGON':\n        return V.convertPolygonToPathData(this.node);\n      case 'POLYLINE':\n        return V.convertPolylineToPathData(this.node);\n      case 'ELLIPSE':\n        return V.convertEllipseToPathData(this.node);\n      case 'CIRCLE':\n        return V.convertCircleToPathData(this.node);\n      case 'RECT':\n        return V.convertRectToPathData(this.node);\n    }\n    throw new Error(tagName + ' cannot be converted to PATH.');\n  };\n  V.prototype.toGeometryShape = function () {\n    var x, y, width, height, cx, cy, r, rx, ry, points, d, x1, x2, y1, y2;\n    switch (this.tagName()) {\n      case 'RECT':\n        x = parseFloat(this.attr('x')) || 0;\n        y = parseFloat(this.attr('y')) || 0;\n        width = parseFloat(this.attr('width')) || 0;\n        height = parseFloat(this.attr('height')) || 0;\n        return new g.Rect(x, y, width, height);\n      case 'CIRCLE':\n        cx = parseFloat(this.attr('cx')) || 0;\n        cy = parseFloat(this.attr('cy')) || 0;\n        r = parseFloat(this.attr('r')) || 0;\n        return new g.Ellipse({\n          x: cx,\n          y: cy\n        }, r, r);\n      case 'ELLIPSE':\n        cx = parseFloat(this.attr('cx')) || 0;\n        cy = parseFloat(this.attr('cy')) || 0;\n        rx = parseFloat(this.attr('rx')) || 0;\n        ry = parseFloat(this.attr('ry')) || 0;\n        return new g.Ellipse({\n          x: cx,\n          y: cy\n        }, rx, ry);\n      case 'POLYLINE':\n        points = V.getPointsFromSvgNode(this);\n        return new g.Polyline(points);\n      case 'POLYGON':\n        points = V.getPointsFromSvgNode(this);\n        if (points.length > 1) points.push(points[0]);\n        return new g.Polyline(points);\n      case 'PATH':\n        d = this.attr('d');\n        if (!g.Path.isDataSupported(d)) d = V.normalizePathData(d);\n        return new g.Path(d);\n      case 'LINE':\n        x1 = parseFloat(this.attr('x1')) || 0;\n        y1 = parseFloat(this.attr('y1')) || 0;\n        x2 = parseFloat(this.attr('x2')) || 0;\n        y2 = parseFloat(this.attr('y2')) || 0;\n        return new g.Line({\n          x: x1,\n          y: y1\n        }, {\n          x: x2,\n          y: y2\n        });\n    }\n\n    // Anything else is a rectangle\n    return this.getBBox();\n  };\n\n  // Find the intersection of a line starting in the center\n  // of the SVG `node` ending in the point `ref`.\n  // `target` is an SVG element to which `node`s transformations are relative to.\n  // Note that `ref` point must be in the coordinate system of the `target` for this function to work properly.\n  // Returns a point in the `target` coordinate system (the same system as `ref` is in) if\n  // an intersection is found. Returns `undefined` otherwise.\n  VPrototype.findIntersection = function (ref, target) {\n    var svg = this.svg().node;\n    target = target || svg;\n    var bbox = this.getBBox({\n      target: target\n    });\n    var center = bbox.center();\n    if (!bbox.intersectionWithLineFromCenterToPoint(ref)) return undefined;\n    var spot;\n    var tagName = this.tagName();\n\n    // Little speed up optimization for `<rect>` element. We do not do conversion\n    // to path element and sampling but directly calculate the intersection through\n    // a transformed geometrical rectangle.\n    if (tagName === 'RECT') {\n      var gRect = new g.Rect(parseFloat(this.attr('x') || 0), parseFloat(this.attr('y') || 0), parseFloat(this.attr('width')), parseFloat(this.attr('height')));\n      // Get the rect transformation matrix with regards to the SVG document.\n      var rectMatrix = this.getTransformToElement(target);\n      // Decompose the matrix to find the rotation angle.\n      var rectMatrixComponents = V.decomposeMatrix(rectMatrix);\n      // Now we want to rotate the rectangle back so that we\n      // can use `intersectionWithLineFromCenterToPoint()` passing the angle as the second argument.\n      var resetRotation = svg.createSVGTransform();\n      resetRotation.setRotate(-rectMatrixComponents.rotation, center.x, center.y);\n      var rect = V.transformRect(gRect, resetRotation.matrix.multiply(rectMatrix));\n      spot = new g.Rect(rect).intersectionWithLineFromCenterToPoint(ref, rectMatrixComponents.rotation);\n    } else if (tagName === 'PATH' || tagName === 'POLYGON' || tagName === 'POLYLINE' || tagName === 'CIRCLE' || tagName === 'ELLIPSE') {\n      var pathNode = tagName === 'PATH' ? this : this.convertToPath();\n      var samples = pathNode.sample();\n      var minDistance = Infinity;\n      var closestSamples = [];\n      var i, sample, gp, centerDistance, refDistance, distance;\n      for (i = 0; i < samples.length; i++) {\n        sample = samples[i];\n        // Convert the sample point in the local coordinate system to the global coordinate system.\n        gp = V.createSVGPoint(sample.x, sample.y);\n        gp = gp.matrixTransform(this.getTransformToElement(target));\n        sample = new g.Point(gp);\n        centerDistance = sample.distance(center);\n        // Penalize a higher distance to the reference point by 10%.\n        // This gives better results. This is due to\n        // inaccuracies introduced by rounding errors and getPointAtLength() returns.\n        refDistance = sample.distance(ref) * 1.1;\n        distance = centerDistance + refDistance;\n        if (distance < minDistance) {\n          minDistance = distance;\n          closestSamples = [{\n            sample: sample,\n            refDistance: refDistance\n          }];\n        } else if (distance < minDistance + 1) {\n          closestSamples.push({\n            sample: sample,\n            refDistance: refDistance\n          });\n        }\n      }\n      closestSamples.sort(function (a, b) {\n        return a.refDistance - b.refDistance;\n      });\n      if (closestSamples[0]) {\n        spot = closestSamples[0].sample;\n      }\n    }\n    return spot;\n  };\n\n  /**\n   * @private\n   * @param {string} name\n   * @param {string} value\n   * @returns {Vectorizer}\n   */\n  VPrototype.setAttribute = function (name, value) {\n    const el = this.node;\n    if (value === null) {\n      this.removeAttr(name);\n      return this;\n    }\n    const trueName = attributeNames[name];\n    const {\n      ns\n    } = V.qualifyAttr(trueName);\n    if (ns) {\n      // Attribute names can be namespaced. E.g. `image` elements\n      // have a `xlink:href` attribute to set the source of the image.\n      el.setAttributeNS(ns, trueName, value);\n    } else if (trueName === 'id') {\n      el.id = value;\n    } else {\n      el.setAttribute(trueName, value);\n    }\n    return this;\n  };\n\n  // Create an SVG document element.\n  // If `content` is passed, it will be used as the SVG content of the `<svg>` root element.\n  V.createSvgDocument = function (content) {\n    if (content) {\n      const XMLString = `<svg xmlns=\"${ns.svg}\" xmlns:xlink=\"${ns.xlink}\" version=\"${SVGVersion}\">${content}</svg>`;\n      const {\n        documentElement\n      } = V.parseXML(XMLString, {\n        async: false\n      });\n      return documentElement;\n    }\n    const svg = document.createElementNS(ns.svg, 'svg');\n    svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);\n    svg.setAttribute('version', SVGVersion);\n    return svg;\n  };\n  V.createSVGStyle = function (stylesheet) {\n    const {\n      node\n    } = V('style', {\n      type: 'text/css'\n    }, [V.createCDATASection(stylesheet)]);\n    return node;\n  }, V.createCDATASection = function (data = '') {\n    const xml = document.implementation.createDocument(null, 'xml', null);\n    return xml.createCDATASection(data);\n  };\n  V.idCounter = 0;\n\n  // A function returning a unique identifier for this client session with every call.\n  V.uniqueId = function () {\n    return 'v-' + ++V.idCounter;\n  };\n  V.toNode = function (el) {\n    return V.isV(el) ? el.node : el.nodeName && el || el[0];\n  };\n  V.ensureId = function (node) {\n    node = V.toNode(node);\n    return node.id || (node.id = V.uniqueId());\n  };\n\n  // Replace all spaces with the Unicode No-break space (http://www.fileformat.info/info/unicode/char/a0/index.htm).\n  // IE would otherwise collapse all spaces into one. This is used in the text() method but it is\n  // also exposed so that the programmer can use it in case he needs to. This is useful e.g. in tests\n  // when you want to compare the actual DOM text content without having to add the unicode character in\n  // the place of all spaces.\n  V.sanitizeText = function (text) {\n    return (text || '').replace(/ /g, '\\u00A0');\n  };\n  V.isUndefined = function (value) {\n    return typeof value === 'undefined';\n  };\n  V.isString = function (value) {\n    return typeof value === 'string';\n  };\n  V.isObject = function (value) {\n    return value && typeof value === 'object';\n  };\n  V.isArray = Array.isArray;\n  V.parseXML = function (data, opt) {\n    opt = opt || {};\n    var xml;\n    try {\n      var parser = new DOMParser();\n      if (!V.isUndefined(opt.async)) {\n        parser.async = opt.async;\n      }\n      xml = parser.parseFromString(data, 'text/xml');\n    } catch (error) {\n      xml = undefined;\n    }\n    if (!xml || xml.getElementsByTagName('parsererror').length) {\n      throw new Error('Invalid XML: ' + data);\n    }\n    return xml;\n  };\n\n  // Create an empty object which does not inherit any properties from `Object.prototype`.\n  // This is useful when we want to use an object as a dictionary without having to\n  // worry about inherited properties such as `toString`, `valueOf` etc.\n  const _attributeNames = Object.create(null);\n\n  // List of attributes for which not to split camel case words.\n  // It contains known SVG attribute names and may be extended with user-defined attribute names.\n  ['baseFrequency', 'baseProfile', 'clipPathUnits', 'contentScriptType', 'contentStyleType', 'diffuseConstant', 'edgeMode', 'externalResourcesRequired', 'filterRes',\n  // deprecated\n  'filterUnits', 'gradientTransform', 'gradientUnits', 'kernelMatrix', 'kernelUnitLength', 'keyPoints', 'lengthAdjust', 'limitingConeAngle', 'markerHeight', 'markerUnits', 'markerWidth', 'maskContentUnits', 'maskUnits', 'numOctaves', 'pathLength', 'patternContentUnits', 'patternTransform', 'patternUnits', 'pointsAtX', 'pointsAtY', 'pointsAtZ', 'preserveAlpha', 'preserveAspectRatio', 'primitiveUnits', 'refX', 'refY', 'requiredExtensions', 'requiredFeatures', 'specularConstant', 'specularExponent', 'spreadMethod', 'startOffset', 'stdDeviation', 'stitchTiles', 'surfaceScale', 'systemLanguage', 'tableValues', 'targetX', 'targetY', 'textLength', 'viewBox', 'viewTarget',\n  // deprecated\n  'xChannelSelector', 'yChannelSelector', 'zoomAndPan' // deprecated\n  ].forEach(name => _attributeNames[name] = name);\n  const attributeNames = new Proxy(_attributeNames, {\n    get(cache, name) {\n      // The cache is a dictionary of attribute names. See `_attributeNames` above.\n      // If the attribute name is not in the cache, it means that it is not\n      // a camel-case attribute name. In that case, we need to convert\n      // the attribute name to dash-separated words.\n      if (!V.supportCamelCaseAttributes) return name;\n      if (name in cache) {\n        return cache[name];\n      }\n      // Convert camel case to dash-separated words.\n      return cache[name] = name.replace(/[A-Z]/g, '-$&').toLowerCase();\n    }\n  });\n\n  // Note: The `attributeNames` and `supportCamelCaseAttributes` properties are not enumerable\n  // in this version to avoid breaking changes. They will be made enumerable in the next major version.\n\n  // Dictionary of attribute names\n  Object.defineProperty(V, 'attributeNames', {\n    value: attributeNames,\n    writable: false\n  });\n\n  // Should camel case attributes be supported?\n  Object.defineProperty(V, 'supportCamelCaseAttributes', {\n    value: false,\n    writable: true\n  });\n\n  /**\n   * @param {string} name\n   * @returns {{ns: string|null, local: string}} namespace and attribute name\n   */\n  V.qualifyAttr = function (name) {\n    if (name.indexOf(':') !== -1) {\n      var combinedKey = name.split(':');\n      return {\n        ns: ns[combinedKey[0]],\n        local: combinedKey[1]\n      };\n    }\n    return {\n      ns: null,\n      local: name\n    };\n  };\n\n  // Note: This regex allows multiple commas as separator which is incorrect in SVG\n  // This regex is used by `split()`, so it doesn't need to use /g\n  V.transformSeparatorRegex = /[ ,]+/;\n  // Note: All following regexes are more restrictive than SVG specification\n  // ReDoS mitigation: Use an anchor at the beginning of the match\n  // ReDoS mitigation: Avoid backtracking (uses `[^()]+` instead of `.*?`)\n  // ReDoS mitigation: Don't match initial `(` inside repeated part\n  // The following regex needs to use /g (= cannot use capturing groups)\n  V.transformRegex = /\\b\\w+\\([^()]+\\)/g;\n  // The following regexes need to use capturing groups (= cannot use /g)\n  V.transformFunctionRegex = /\\b(\\w+)\\(([^()]+)\\)/;\n  V.transformTranslateRegex = /\\btranslate\\(([^()]+)\\)/;\n  V.transformRotateRegex = /\\brotate\\(([^()]+)\\)/;\n  V.transformScaleRegex = /\\bscale\\(([^()]+)\\)/;\n  V.transformStringToMatrix = function (transform) {\n    // Initialize result matrix as identity matrix\n    let transformationMatrix = V.createSVGMatrix();\n\n    // Note: Multiple transform functions are allowed in `transform` string\n    // `match()` returns `null` if none found\n    const transformMatches = transform && transform.match(V.transformRegex);\n    if (!transformMatches) {\n      // Return identity matrix\n      return transformationMatrix;\n    }\n    const numMatches = transformMatches.length;\n    for (let i = 0; i < numMatches; i++) {\n      const transformMatch = transformMatches[i];\n      // Use same regex as above, but with capturing groups\n      // `match()` returns values of capturing groups as `[1]`, `[2]`\n      const transformFunctionMatch = transformMatch.match(V.transformFunctionRegex);\n      if (transformFunctionMatch) {\n        let sx, sy, tx, ty, angle;\n        let ctm = V.createSVGMatrix();\n        const transformFunction = transformFunctionMatch[1].toLowerCase();\n        const args = transformFunctionMatch[2].split(V.transformSeparatorRegex);\n        switch (transformFunction) {\n          case 'scale':\n            sx = parseFloat(args[0]);\n            sy = args[1] === undefined ? sx : parseFloat(args[1]);\n            ctm = ctm.scaleNonUniform(sx, sy);\n            break;\n          case 'translate':\n            tx = parseFloat(args[0]);\n            ty = parseFloat(args[1]);\n            ctm = ctm.translate(tx, ty);\n            break;\n          case 'rotate':\n            angle = parseFloat(args[0]);\n            tx = parseFloat(args[1]) || 0;\n            ty = parseFloat(args[2]) || 0;\n            if (tx !== 0 || ty !== 0) {\n              ctm = ctm.translate(tx, ty).rotate(angle).translate(-tx, -ty);\n            } else {\n              ctm = ctm.rotate(angle);\n            }\n            break;\n          case 'skewx':\n            angle = parseFloat(args[0]);\n            ctm = ctm.skewX(angle);\n            break;\n          case 'skewy':\n            angle = parseFloat(args[0]);\n            ctm = ctm.skewY(angle);\n            break;\n          case 'matrix':\n            ctm.a = parseFloat(args[0]);\n            ctm.b = parseFloat(args[1]);\n            ctm.c = parseFloat(args[2]);\n            ctm.d = parseFloat(args[3]);\n            ctm.e = parseFloat(args[4]);\n            ctm.f = parseFloat(args[5]);\n            break;\n          default:\n            continue;\n        }\n\n        // Multiply current transformation into result matrix\n        transformationMatrix = transformationMatrix.multiply(ctm);\n      }\n    }\n    return transformationMatrix;\n  };\n  V.matrixToTransformString = function (matrix) {\n    matrix || (matrix = true);\n    return 'matrix(' + (matrix.a !== undefined ? matrix.a : 1) + ',' + (matrix.b !== undefined ? matrix.b : 0) + ',' + (matrix.c !== undefined ? matrix.c : 0) + ',' + (matrix.d !== undefined ? matrix.d : 1) + ',' + (matrix.e !== undefined ? matrix.e : 0) + ',' + (matrix.f !== undefined ? matrix.f : 0) + ')';\n  };\n  V.parseTransformString = function (transform) {\n    var translate, rotate, scale;\n    if (transform) {\n      var separator = V.transformSeparatorRegex;\n\n      // Special handling for `transform` with one or more matrix functions\n      if (transform.trim().indexOf('matrix') >= 0) {\n        // Convert EVERYTHING in `transform` string to a matrix\n        // Will combine ALL matrixes * ALL translates * ALL scales * ALL rotates\n        // Note: In non-matrix case, we only take first one of each (if any)\n        var matrix = V.transformStringToMatrix(transform);\n        var decomposedMatrix = V.decomposeMatrix(matrix);\n\n        // Extract `translate`, `scale`, `rotate` from matrix\n        translate = [decomposedMatrix.translateX, decomposedMatrix.translateY];\n        scale = [decomposedMatrix.scaleX, decomposedMatrix.scaleY];\n        rotate = [decomposedMatrix.rotation];\n\n        // Rewrite `transform` string in `translate scale rotate` format\n        var transformations = [];\n        if (translate[0] !== 0 || translate[1] !== 0) {\n          transformations.push('translate(' + translate + ')');\n        }\n        if (scale[0] !== 1 || scale[1] !== 1) {\n          transformations.push('scale(' + scale + ')');\n        }\n        if (rotate[0] !== 0) {\n          transformations.push('rotate(' + rotate + ')');\n        }\n        transform = transformations.join(' ');\n      } else {\n        // Extract `translate`, `rotate`, `scale` functions from `transform` string\n        // Note: We only detect the first match of each (if any)\n        // `match()` returns value of capturing group as `[1]`\n        const translateMatch = transform.match(V.transformTranslateRegex);\n        if (translateMatch) {\n          translate = translateMatch[1].split(separator);\n        }\n        const rotateMatch = transform.match(V.transformRotateRegex);\n        if (rotateMatch) {\n          rotate = rotateMatch[1].split(separator);\n        }\n        const scaleMatch = transform.match(V.transformScaleRegex);\n        if (scaleMatch) {\n          scale = scaleMatch[1].split(separator);\n        }\n      }\n    }\n    var sx = scale && scale[0] ? parseFloat(scale[0]) : 1;\n    return {\n      value: transform,\n      translate: {\n        tx: translate && translate[0] ? parseInt(translate[0], 10) : 0,\n        ty: translate && translate[1] ? parseInt(translate[1], 10) : 0\n      },\n      rotate: {\n        angle: rotate && rotate[0] ? parseInt(rotate[0], 10) : 0,\n        cx: rotate && rotate[1] ? parseInt(rotate[1], 10) : undefined,\n        cy: rotate && rotate[2] ? parseInt(rotate[2], 10) : undefined\n      },\n      scale: {\n        sx: sx,\n        sy: scale && scale[1] ? parseFloat(scale[1]) : sx\n      }\n    };\n  };\n  V.deltaTransformPoint = function (matrix, point) {\n    var dx = point.x * matrix.a + point.y * matrix.c + 0;\n    var dy = point.x * matrix.b + point.y * matrix.d + 0;\n    return {\n      x: dx,\n      y: dy\n    };\n  };\n  V.decomposeMatrix = function (matrix) {\n    // @see https://gist.github.com/2052247\n\n    // calculate delta transform point\n    var px = V.deltaTransformPoint(matrix, {\n      x: 0,\n      y: 1\n    });\n    var py = V.deltaTransformPoint(matrix, {\n      x: 1,\n      y: 0\n    });\n\n    // calculate skew\n    var skewX = 180 / PI * atan2(px.y, px.x) - 90;\n    var skewY = 180 / PI * atan2(py.y, py.x);\n    return {\n      translateX: matrix.e,\n      translateY: matrix.f,\n      scaleX: sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n      scaleY: sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n      skewX: skewX,\n      skewY: skewY,\n      rotation: skewX // rotation is the same as skew x\n    };\n  };\n\n  // Return the `scale` transformation from the following equation:\n  // `translate(tx, ty) . rotate(angle) . scale(sx, sy) === matrix(a,b,c,d,e,f)`\n  V.matrixToScale = function (matrix) {\n    var a, b, c, d;\n    if (matrix) {\n      a = V.isUndefined(matrix.a) ? 1 : matrix.a;\n      d = V.isUndefined(matrix.d) ? 1 : matrix.d;\n      b = matrix.b;\n      c = matrix.c;\n    } else {\n      a = d = 1;\n    }\n    return {\n      sx: b ? sqrt(a * a + b * b) : a,\n      sy: c ? sqrt(c * c + d * d) : d\n    };\n  };\n\n  // Return the `rotate` transformation from the following equation:\n  // `translate(tx, ty) . rotate(angle) . scale(sx, sy) === matrix(a,b,c,d,e,f)`\n  V.matrixToRotate = function (matrix) {\n    var p = {\n      x: 0,\n      y: 1\n    };\n    if (matrix) {\n      p = V.deltaTransformPoint(matrix, p);\n    }\n    return {\n      angle: g.normalizeAngle(g.toDeg(atan2(p.y, p.x)) - 90)\n    };\n  };\n\n  // Return the `translate` transformation from the following equation:\n  // `translate(tx, ty) . rotate(angle) . scale(sx, sy) === matrix(a,b,c,d,e,f)`\n  V.matrixToTranslate = function (matrix) {\n    return {\n      tx: matrix && matrix.e || 0,\n      ty: matrix && matrix.f || 0\n    };\n  };\n  V.isV = function (object) {\n    return object instanceof V;\n  };\n\n  // For backwards compatibility:\n  V.isVElement = V.isV;\n\n  // Element implements `getBBox()`, `getCTM()` and `getScreenCTM()`\n  // https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement\n  V.isSVGGraphicsElement = function (node) {\n    if (!node) return false;\n    node = V.toNode(node);\n    // IE/Edge does not implement SVGGraphicsElement interface, thus check for `getScreenCTM` below\n    return node instanceof SVGElement && typeof node.getScreenCTM === 'function';\n  };\n  var svgDocument = V('svg').node;\n  V.createSVGMatrix = function (matrix) {\n    var svgMatrix = svgDocument.createSVGMatrix();\n    for (var component in matrix) {\n      svgMatrix[component] = matrix[component];\n    }\n    return svgMatrix;\n  };\n  V.createSVGTransform = function (matrix) {\n    if (!V.isUndefined(matrix)) {\n      if (!(matrix instanceof SVGMatrix)) {\n        matrix = V.createSVGMatrix(matrix);\n      }\n      return svgDocument.createSVGTransformFromMatrix(matrix);\n    }\n    return svgDocument.createSVGTransform();\n  };\n  V.createSVGPoint = function (x, y) {\n    var p = svgDocument.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    return p;\n  };\n  V.transformRect = function (r, matrix) {\n    var p = svgDocument.createSVGPoint();\n    p.x = r.x;\n    p.y = r.y;\n    var corner1 = p.matrixTransform(matrix);\n    p.x = r.x + r.width;\n    p.y = r.y;\n    var corner2 = p.matrixTransform(matrix);\n    p.x = r.x + r.width;\n    p.y = r.y + r.height;\n    var corner3 = p.matrixTransform(matrix);\n    p.x = r.x;\n    p.y = r.y + r.height;\n    var corner4 = p.matrixTransform(matrix);\n    var minX = min(corner1.x, corner2.x, corner3.x, corner4.x);\n    var maxX = max(corner1.x, corner2.x, corner3.x, corner4.x);\n    var minY = min(corner1.y, corner2.y, corner3.y, corner4.y);\n    var maxY = max(corner1.y, corner2.y, corner3.y, corner4.y);\n    return new g.Rect(minX, minY, maxX - minX, maxY - minY);\n  };\n  V.transformPoint = function (p, matrix) {\n    return new g.Point(V.createSVGPoint(p.x, p.y).matrixTransform(matrix));\n  };\n  V.transformLine = function (l, matrix) {\n    return new g.Line(V.transformPoint(l.start, matrix), V.transformPoint(l.end, matrix));\n  };\n  V.transformPolyline = function (p, matrix) {\n    var inPoints = p instanceof g.Polyline ? p.points : p;\n    if (!V.isArray(inPoints)) inPoints = [];\n    var outPoints = [];\n    for (var i = 0, n = inPoints.length; i < n; i++) outPoints[i] = V.transformPoint(inPoints[i], matrix);\n    return new g.Polyline(outPoints);\n  };\n\n  // Convert a style represented as string (e.g. `'fill=\"blue\"; stroke=\"red\"'`) to\n  // an object (`{ fill: 'blue', stroke: 'red' }`).\n  V.styleToObject = function (styleString) {\n    var ret = {};\n    var styles = styleString.split(';');\n    for (var i = 0; i < styles.length; i++) {\n      var style = styles[i];\n      var pair = style.split('=');\n      ret[pair[0].trim()] = pair[1].trim();\n    }\n    return ret;\n  };\n\n  // Inspired by d3.js https://github.com/mbostock/d3/blob/master/src/svg/arc.js\n  V.createSlicePathData = function (innerRadius, outerRadius, startAngle, endAngle) {\n    var svgArcMax = 2 * PI - 1e-6;\n    var r0 = innerRadius;\n    var r1 = outerRadius;\n    var a0 = startAngle;\n    var a1 = endAngle;\n    var da = (a1 < a0 && (da = a0, a0 = a1, a1 = da), a1 - a0);\n    var df = da < PI ? '0' : '1';\n    var c0 = cos(a0);\n    var s0 = sin(a0);\n    var c1 = cos(a1);\n    var s1 = sin(a1);\n    return da >= svgArcMax ? r0 ? 'M0,' + r1 + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + -r1 + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + r1 + 'M0,' + r0 + 'A' + r0 + ',' + r0 + ' 0 1,0 0,' + -r0 + 'A' + r0 + ',' + r0 + ' 0 1,0 0,' + r0 + 'Z' : 'M0,' + r1 + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + -r1 + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + r1 + 'Z' : r0 ? 'M' + r1 * c0 + ',' + r1 * s0 + 'A' + r1 + ',' + r1 + ' 0 ' + df + ',1 ' + r1 * c1 + ',' + r1 * s1 + 'L' + r0 * c1 + ',' + r0 * s1 + 'A' + r0 + ',' + r0 + ' 0 ' + df + ',0 ' + r0 * c0 + ',' + r0 * s0 + 'Z' : 'M' + r1 * c0 + ',' + r1 * s0 + 'A' + r1 + ',' + r1 + ' 0 ' + df + ',1 ' + r1 * c1 + ',' + r1 * s1 + 'L0,0' + 'Z';\n  };\n\n  // Merge attributes from object `b` with attributes in object `a`.\n  // Note that this modifies the object `a`.\n  // Also important to note that attributes are merged but CSS classes are concatenated.\n  V.mergeAttrs = function (a, b) {\n    for (var attr in b) {\n      if (attr === 'class') {\n        // Concatenate classes.\n        a[attr] = a[attr] ? a[attr] + ' ' + b[attr] : b[attr];\n      } else if (attr === 'style') {\n        // `style` attribute can be an object.\n        if (V.isObject(a[attr]) && V.isObject(b[attr])) {\n          // `style` stored in `a` is an object.\n          a[attr] = V.mergeAttrs(a[attr], b[attr]);\n        } else if (V.isObject(a[attr])) {\n          // `style` in `a` is an object but it's a string in `b`.\n          // Convert the style represented as a string to an object in `b`.\n          a[attr] = V.mergeAttrs(a[attr], V.styleToObject(b[attr]));\n        } else if (V.isObject(b[attr])) {\n          // `style` in `a` is a string, in `b` it's an object.\n          a[attr] = V.mergeAttrs(V.styleToObject(a[attr]), b[attr]);\n        } else {\n          // Both styles are strings.\n          a[attr] = V.mergeAttrs(V.styleToObject(a[attr]), V.styleToObject(b[attr]));\n        }\n      } else {\n        a[attr] = b[attr];\n      }\n    }\n    return a;\n  };\n  V.annotateString = function (t, annotations, opt) {\n    annotations = annotations || [];\n    opt = opt || {};\n    var offset = opt.offset || 0;\n    var compacted = [];\n    var batch;\n    var ret = [];\n    var item;\n    var prev;\n    for (var i = 0; i < t.length; i++) {\n      item = ret[i] = t[i];\n      for (var j = 0; j < annotations.length; j++) {\n        var annotation = annotations[j];\n        var start = annotation.start + offset;\n        var end = annotation.end + offset;\n        if (i >= start && i < end) {\n          // Annotation applies.\n          if (V.isObject(item)) {\n            // There is more than one annotation to be applied => Merge attributes.\n            item.attrs = V.mergeAttrs(V.mergeAttrs({}, item.attrs), annotation.attrs);\n          } else {\n            item = ret[i] = {\n              t: t[i],\n              attrs: annotation.attrs\n            };\n          }\n          if (opt.includeAnnotationIndices) {\n            (item.annotations || (item.annotations = [])).push(j);\n          }\n        }\n      }\n      prev = ret[i - 1];\n      if (!prev) {\n        batch = item;\n      } else if (V.isObject(item) && V.isObject(prev)) {\n        // Both previous item and the current one are annotations. If the attributes\n        // didn't change, merge the text.\n        if (JSON.stringify(item.attrs) === JSON.stringify(prev.attrs)) {\n          batch.t += item.t;\n        } else {\n          compacted.push(batch);\n          batch = item;\n        }\n      } else if (V.isObject(item)) {\n        // Previous item was a string, current item is an annotation.\n        compacted.push(batch);\n        batch = item;\n      } else if (V.isObject(prev)) {\n        // Previous item was an annotation, current item is a string.\n        compacted.push(batch);\n        batch = item;\n      } else {\n        // Both previous and current item are strings.\n        batch = (batch || '') + item;\n      }\n    }\n    if (batch) {\n      compacted.push(batch);\n    }\n    return compacted;\n  };\n  V.findAnnotationsAtIndex = function (annotations, index) {\n    var found = [];\n    if (annotations) {\n      annotations.forEach(function (annotation) {\n        if (annotation.start < index && index <= annotation.end) {\n          found.push(annotation);\n        }\n      });\n    }\n    return found;\n  };\n  V.findAnnotationsBetweenIndexes = function (annotations, start, end) {\n    var found = [];\n    if (annotations) {\n      annotations.forEach(function (annotation) {\n        if (start >= annotation.start && start < annotation.end || end > annotation.start && end <= annotation.end || annotation.start >= start && annotation.end < end) {\n          found.push(annotation);\n        }\n      });\n    }\n    return found;\n  };\n\n  // Shift all the text annotations after character `index` by `offset` positions.\n  V.shiftAnnotations = function (annotations, index, offset) {\n    if (annotations) {\n      annotations.forEach(function (annotation) {\n        if (annotation.start < index && annotation.end >= index) {\n          annotation.end += offset;\n        } else if (annotation.start >= index) {\n          annotation.start += offset;\n          annotation.end += offset;\n        }\n      });\n    }\n    return annotations;\n  };\n  V.convertLineToPathData = function (line) {\n    line = V(line);\n    var d = ['M', line.attr('x1'), line.attr('y1'), 'L', line.attr('x2'), line.attr('y2')].join(' ');\n    return d;\n  };\n  V.convertPolygonToPathData = function (polygon) {\n    var points = V.getPointsFromSvgNode(polygon);\n    if (points.length === 0) return null;\n    return V.svgPointsToPath(points) + ' Z';\n  };\n  V.convertPolylineToPathData = function (polyline) {\n    var points = V.getPointsFromSvgNode(polyline);\n    if (points.length === 0) return null;\n    return V.svgPointsToPath(points);\n  };\n  V.svgPointsToPath = function (points) {\n    for (var i = 0, n = points.length; i < n; i++) {\n      points[i] = points[i].x + ' ' + points[i].y;\n    }\n    return 'M ' + points.join(' L');\n  };\n  V.getPointsFromSvgNode = function (node) {\n    node = V.toNode(node);\n    var points = [];\n    var nodePoints = node.points;\n    if (nodePoints) {\n      for (var i = 0, n = nodePoints.numberOfItems; i < n; i++) {\n        points.push(nodePoints.getItem(i));\n      }\n    }\n    return points;\n  };\n  V.KAPPA = 0.551784;\n  V.convertCircleToPathData = function (circle) {\n    circle = V(circle);\n    var cx = parseFloat(circle.attr('cx')) || 0;\n    var cy = parseFloat(circle.attr('cy')) || 0;\n    var r = parseFloat(circle.attr('r'));\n    var cd = r * V.KAPPA; // Control distance.\n\n    var d = ['M', cx, cy - r,\n    // Move to the first point.\n    'C', cx + cd, cy - r, cx + r, cy - cd, cx + r, cy,\n    // I. Quadrant.\n    'C', cx + r, cy + cd, cx + cd, cy + r, cx, cy + r,\n    // II. Quadrant.\n    'C', cx - cd, cy + r, cx - r, cy + cd, cx - r, cy,\n    // III. Quadrant.\n    'C', cx - r, cy - cd, cx - cd, cy - r, cx, cy - r,\n    // IV. Quadrant.\n    'Z'].join(' ');\n    return d;\n  };\n  V.convertEllipseToPathData = function (ellipse) {\n    ellipse = V(ellipse);\n    var cx = parseFloat(ellipse.attr('cx')) || 0;\n    var cy = parseFloat(ellipse.attr('cy')) || 0;\n    var rx = parseFloat(ellipse.attr('rx'));\n    var ry = parseFloat(ellipse.attr('ry')) || rx;\n    var cdx = rx * V.KAPPA; // Control distance x.\n    var cdy = ry * V.KAPPA; // Control distance y.\n\n    var d = ['M', cx, cy - ry,\n    // Move to the first point.\n    'C', cx + cdx, cy - ry, cx + rx, cy - cdy, cx + rx, cy,\n    // I. Quadrant.\n    'C', cx + rx, cy + cdy, cx + cdx, cy + ry, cx, cy + ry,\n    // II. Quadrant.\n    'C', cx - cdx, cy + ry, cx - rx, cy + cdy, cx - rx, cy,\n    // III. Quadrant.\n    'C', cx - rx, cy - cdy, cx - cdx, cy - ry, cx, cy - ry,\n    // IV. Quadrant.\n    'Z'].join(' ');\n    return d;\n  };\n  V.convertRectToPathData = function (rect) {\n    rect = V(rect);\n    return V.rectToPath({\n      x: parseFloat(rect.attr('x')) || 0,\n      y: parseFloat(rect.attr('y')) || 0,\n      width: parseFloat(rect.attr('width')) || 0,\n      height: parseFloat(rect.attr('height')) || 0,\n      rx: parseFloat(rect.attr('rx')) || 0,\n      ry: parseFloat(rect.attr('ry')) || 0\n    });\n  };\n\n  // Convert a rectangle to SVG path commands. `r` is an object of the form:\n  // `{ x: [number], y: [number], width: [number], height: [number], top-ry: [number], top-ry: [number], bottom-rx: [number], bottom-ry: [number] }`,\n  // where `x, y, width, height` are the usual rectangle attributes and [top-/bottom-]rx/ry allows for\n  // specifying radius of the rectangle for all its sides (as opposed to the built-in SVG rectangle\n  // that has only `rx` and `ry` attributes).\n  V.rectToPath = function (r) {\n    var d;\n    var x = r.x;\n    var y = r.y;\n    var width = r.width;\n    var height = r.height;\n    var topRx = min(r.rx || r['top-rx'] || 0, width / 2);\n    var bottomRx = min(r.rx || r['bottom-rx'] || 0, width / 2);\n    var topRy = min(r.ry || r['top-ry'] || 0, height / 2);\n    var bottomRy = min(r.ry || r['bottom-ry'] || 0, height / 2);\n    if (topRx || bottomRx || topRy || bottomRy) {\n      d = ['M', x, y + topRy, 'v', height - topRy - bottomRy, 'a', bottomRx, bottomRy, 0, 0, 0, bottomRx, bottomRy, 'h', width - 2 * bottomRx, 'a', bottomRx, bottomRy, 0, 0, 0, bottomRx, -bottomRy, 'v', -(height - bottomRy - topRy), 'a', topRx, topRy, 0, 0, 0, -topRx, -topRy, 'h', -(width - 2 * topRx), 'a', topRx, topRy, 0, 0, 0, -topRx, topRy, 'Z'];\n    } else {\n      d = ['M', x, y, 'H', x + width, 'V', y + height, 'H', x, 'V', y, 'Z'];\n    }\n    return d.join(' ');\n  };\n\n  // Take a path data string\n  // Return a normalized path data string\n  // If data cannot be parsed, return 'M 0 0'\n  // Adapted from Rappid normalizePath polyfill\n  // Highly inspired by Raphael Library (www.raphael.com)\n  V.normalizePathData = function () {\n    var spaces = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\n    var pathCommand = new RegExp('([a-z])[' + spaces + ',]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[' + spaces + ']*,?[' + spaces + ']*)+)', 'ig');\n    var pathValues = new RegExp('(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[' + spaces + ']*,?[' + spaces + ']*', 'ig');\n    var math = Math;\n    var PI = math.PI;\n    var sin = math.sin;\n    var cos = math.cos;\n    var tan = math.tan;\n    var asin = math.asin;\n    var sqrt = math.sqrt;\n    var abs = math.abs;\n    function q2c(x1, y1, ax, ay, x2, y2) {\n      var _13 = 1 / 3;\n      var _23 = 2 / 3;\n      return [_13 * x1 + _23 * ax, _13 * y1 + _23 * ay, _13 * x2 + _23 * ax, _13 * y2 + _23 * ay, x2, y2];\n    }\n    function rotate(x, y, rad) {\n      var X = x * cos(rad) - y * sin(rad);\n      var Y = x * sin(rad) + y * cos(rad);\n      return {\n        x: X,\n        y: Y\n      };\n    }\n    function a2c(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n      // for more information of where this math came from visit:\n      // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n      var _120 = PI * 120 / 180;\n      var rad = PI / 180 * (+angle || 0);\n      var res = [];\n      var xy;\n      if (!recursive) {\n        xy = rotate(x1, y1, -rad);\n        x1 = xy.x;\n        y1 = xy.y;\n        xy = rotate(x2, y2, -rad);\n        x2 = xy.x;\n        y2 = xy.y;\n        var x = (x1 - x2) / 2;\n        var y = (y1 - y2) / 2;\n        var h = x * x / (rx * rx) + y * y / (ry * ry);\n        if (h > 1) {\n          h = sqrt(h);\n          rx = h * rx;\n          ry = h * ry;\n        }\n        var rx2 = rx * rx;\n        var ry2 = ry * ry;\n        var k = (large_arc_flag == sweep_flag ? -1 : 1) * sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n        var cx = k * rx * y / ry + (x1 + x2) / 2;\n        var cy = k * -ry * x / rx + (y1 + y2) / 2;\n        var f1 = asin(((y1 - cy) / ry).toFixed(9));\n        var f2 = asin(((y2 - cy) / ry).toFixed(9));\n        f1 = x1 < cx ? PI - f1 : f1;\n        f2 = x2 < cx ? PI - f2 : f2;\n        if (f1 < 0) f1 = PI * 2 + f1;\n        if (f2 < 0) f2 = PI * 2 + f2;\n        if (sweep_flag && f1 > f2) f1 = f1 - PI * 2;\n        if (!sweep_flag && f2 > f1) f2 = f2 - PI * 2;\n      } else {\n        f1 = recursive[0];\n        f2 = recursive[1];\n        cx = recursive[2];\n        cy = recursive[3];\n      }\n      var df = f2 - f1;\n      if (abs(df) > _120) {\n        var f2old = f2;\n        var x2old = x2;\n        var y2old = y2;\n        f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * cos(f2);\n        y2 = cy + ry * sin(f2);\n        res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n      }\n      df = f2 - f1;\n      var c1 = cos(f1);\n      var s1 = sin(f1);\n      var c2 = cos(f2);\n      var s2 = sin(f2);\n      var t = tan(df / 4);\n      var hx = 4 / 3 * (rx * t);\n      var hy = 4 / 3 * (ry * t);\n      var m1 = [x1, y1];\n      var m2 = [x1 + hx * s1, y1 - hy * c1];\n      var m3 = [x2 + hx * s2, y2 - hy * c2];\n      var m4 = [x2, y2];\n      m2[0] = 2 * m1[0] - m2[0];\n      m2[1] = 2 * m1[1] - m2[1];\n      if (recursive) {\n        return [m2, m3, m4].concat(res);\n      } else {\n        res = [m2, m3, m4].concat(res).join().split(',');\n        var newres = [];\n        var ii = res.length;\n        for (var i = 0; i < ii; i++) {\n          newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n        }\n        return newres;\n      }\n    }\n    function parsePathString(pathString) {\n      if (!pathString) return null;\n      var paramCounts = {\n        a: 7,\n        c: 6,\n        h: 1,\n        l: 2,\n        m: 2,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        z: 0\n      };\n      var data = [];\n      String(pathString).replace(pathCommand, function (a, b, c) {\n        var params = [];\n        var name = b.toLowerCase();\n        c.replace(pathValues, function (a, b) {\n          if (b) params.push(+b);\n        });\n        if (name === 'm' && params.length > 2) {\n          data.push([b].concat(params.splice(0, 2)));\n          name = 'l';\n          b = b === 'm' ? 'l' : 'L';\n        }\n        while (params.length >= paramCounts[name]) {\n          data.push([b].concat(params.splice(0, paramCounts[name])));\n          if (!paramCounts[name]) break;\n        }\n      });\n      return data;\n    }\n    function pathToAbsolute(pathArray) {\n      if (!Array.isArray(pathArray) || !Array.isArray(pathArray && pathArray[0])) {\n        // rough assumption\n        pathArray = parsePathString(pathArray);\n      }\n\n      // if invalid string, return 'M 0 0'\n      if (!pathArray || !pathArray.length) return [['M', 0, 0]];\n      var res = [];\n      var x = 0;\n      var y = 0;\n      var mx = 0;\n      var my = 0;\n      var start = 0;\n      var pa0;\n      var ii = pathArray.length;\n      for (var i = start; i < ii; i++) {\n        var r = [];\n        res.push(r);\n        var pa = pathArray[i];\n        pa0 = pa[0];\n        if (pa0 != pa0.toUpperCase()) {\n          r[0] = pa0.toUpperCase();\n          var jj;\n          var j;\n          switch (r[0]) {\n            case 'A':\n              r[1] = pa[1];\n              r[2] = pa[2];\n              r[3] = pa[3];\n              r[4] = pa[4];\n              r[5] = pa[5];\n              r[6] = +pa[6] + x;\n              r[7] = +pa[7] + y;\n              break;\n            case 'V':\n              r[1] = +pa[1] + y;\n              break;\n            case 'H':\n              r[1] = +pa[1] + x;\n              break;\n            case 'M':\n              mx = +pa[1] + x;\n              my = +pa[2] + y;\n              jj = pa.length;\n              for (j = 1; j < jj; j++) {\n                r[j] = +pa[j] + (j % 2 ? x : y);\n              }\n              break;\n            default:\n              jj = pa.length;\n              for (j = 1; j < jj; j++) {\n                r[j] = +pa[j] + (j % 2 ? x : y);\n              }\n              break;\n          }\n        } else {\n          var kk = pa.length;\n          for (var k = 0; k < kk; k++) {\n            r[k] = pa[k];\n          }\n        }\n        switch (r[0]) {\n          case 'Z':\n            x = +mx;\n            y = +my;\n            break;\n          case 'H':\n            x = r[1];\n            break;\n          case 'V':\n            y = r[1];\n            break;\n          case 'M':\n            mx = r[r.length - 2];\n            my = r[r.length - 1];\n            x = r[r.length - 2];\n            y = r[r.length - 1];\n            break;\n          default:\n            x = r[r.length - 2];\n            y = r[r.length - 1];\n            break;\n        }\n      }\n      return res;\n    }\n    function normalize(path) {\n      var p = pathToAbsolute(path);\n      var attrs = {\n        x: 0,\n        y: 0,\n        bx: 0,\n        by: 0,\n        X: 0,\n        Y: 0,\n        qx: null,\n        qy: null\n      };\n      function processPath(path, d, pcom) {\n        var nx, ny;\n        if (!path) return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n        if (!(path[0] in {\n          T: 1,\n          Q: 1\n        })) {\n          d.qx = null;\n          d.qy = null;\n        }\n        switch (path[0]) {\n          case 'M':\n            d.X = path[1];\n            d.Y = path[2];\n            break;\n          case 'A':\n            if (parseFloat(path[1]) === 0 || parseFloat(path[2]) === 0) {\n              // https://www.w3.org/TR/SVG/paths.html#ArcOutOfRangeParameters\n              // \"If either rx or ry is 0, then this arc is treated as a\n              // straight line segment (a \"lineto\") joining the endpoints.\"\n              path = ['L', path[6], path[7]];\n            } else {\n              path = ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n            }\n            break;\n          case 'S':\n            if (pcom === 'C' || pcom === 'S') {\n              // In 'S' case we have to take into account, if the previous command is C/S.\n              nx = d.x * 2 - d.bx; // And reflect the previous\n              ny = d.y * 2 - d.by; // command's control point relative to the current point.\n            } else {\n              // or some else or nothing\n              nx = d.x;\n              ny = d.y;\n            }\n            path = ['C', nx, ny].concat(path.slice(1));\n            break;\n          case 'T':\n            if (pcom === 'Q' || pcom === 'T') {\n              // In 'T' case we have to take into account, if the previous command is Q/T.\n              d.qx = d.x * 2 - d.qx; // And make a reflection similar\n              d.qy = d.y * 2 - d.qy; // to case 'S'.\n            } else {\n              // or something else or nothing\n              d.qx = d.x;\n              d.qy = d.y;\n            }\n            path = ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n            break;\n          case 'Q':\n            d.qx = path[1];\n            d.qy = path[2];\n            path = ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n            break;\n          case 'H':\n            path = ['L'].concat(path[1], d.y);\n            break;\n          case 'V':\n            path = ['L'].concat(d.x, path[1]);\n            break;\n          case 'L':\n            break;\n          case 'Z':\n            break;\n        }\n        return path;\n      }\n      function fixArc(pp, i) {\n        if (pp[i].length > 7) {\n          pp[i].shift();\n          var pi = pp[i];\n          while (pi.length) {\n            pcoms[i] = 'A'; // if created multiple 'C's, their original seg is saved\n            pp.splice(i++, 0, ['C'].concat(pi.splice(0, 6)));\n          }\n          pp.splice(i, 1);\n          ii = p.length;\n        }\n      }\n      var pcoms = []; // path commands of original path p\n      var pfirst = ''; // temporary holder for original path command\n      var pcom = ''; // holder for previous path command of original path\n\n      var ii = p.length;\n      for (var i = 0; i < ii; i++) {\n        if (p[i]) pfirst = p[i][0]; // save current path command\n\n        if (pfirst !== 'C') {\n          // C is not saved yet, because it may be result of conversion\n          pcoms[i] = pfirst; // Save current path command\n          if (i > 0) pcom = pcoms[i - 1]; // Get previous path command pcom\n        }\n        p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\n\n        if (pcoms[i] !== 'A' && pfirst === 'C') pcoms[i] = 'C'; // 'A' is the only command\n        // which may produce multiple 'C's\n        // so we have to make sure that 'C' is also 'C' in original path\n\n        fixArc(p, i); // fixArc adds also the right amount of 'A's to pcoms\n\n        var seg = p[i];\n        var seglen = seg.length;\n        attrs.x = seg[seglen - 2];\n        attrs.y = seg[seglen - 1];\n        attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n        attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n      }\n\n      // make sure normalized path data string starts with an M segment\n      if (!p[0][0] || p[0][0] !== 'M') {\n        p.unshift(['M', 0, 0]);\n      }\n      return p;\n    }\n    return function (pathData) {\n      return normalize(pathData).join(',').split(',').join(' ');\n    };\n  }();\n  V.namespace = ns;\n  V.g = g;\n  return V;\n}();\nexport default V;", "export const config = {\n  // When set to `true` the cell selectors could be defined as CSS selectors.\n  // If not, only JSON Markup selectors are taken into account.\n  // export let useCSSSelectors = true;\n  useCSSSelectors: true,\n  // The class name prefix config is for advanced use only.\n  // Be aware that if you change the prefix, the JointJS CSS will no longer function properly.\n  // export let classNamePrefix = 'joint-';\n  // export let defaultTheme = 'default';\n  classNamePrefix: 'joint-',\n  defaultTheme: 'default',\n  // The maximum delay required for two consecutive touchend events to be interpreted\n  // as a double-tap.\n  doubleTapInterval: 300\n};", "// code is inspired by https://github.com/lodash/lodash\n\n/* eslint-disable no-case-declarations */\n// -- helper constants\nconst argsTag = '[object Arguments]';\nconst arrayTag = '[object Array]';\nconst boolTag = '[object Boolean]';\nconst dateTag = '[object Date]';\nconst errorTag = '[object Error]';\nconst funcTag = '[object Function]';\nconst mapTag = '[object Map]';\nconst numberTag = '[object Number]';\nconst nullTag = '[object Null]';\nconst objectTag = '[object Object]';\nconst regexpTag = '[object RegExp]';\nconst setTag = '[object Set]';\nconst stringTag = '[object String]';\nconst symbolTag = '[object Symbol]';\nconst undefinedTag = '[object Undefined]';\nconst weakMapTag = '[object WeakMap]';\nconst arrayBufferTag = '[object ArrayBuffer]';\nconst dataViewTag = '[object DataView]';\nconst float32Tag = '[object Float32Array]';\nconst float64Tag = '[object Float64Array]';\nconst int8Tag = '[object Int8Array]';\nconst int16Tag = '[object Int16Array]';\nconst int32Tag = '[object Int32Array]';\nconst uint8Tag = '[object Uint8Array]';\nconst uint8ClampedTag = '[object Uint8ClampedArray]';\nconst uint16Tag = '[object Uint16Array]';\nconst uint32Tag = '[object Uint32Array]';\nconst CLONEABLE_TAGS = {\n  [argsTag]: true,\n  [arrayTag]: true,\n  [arrayBufferTag]: true,\n  [dataViewTag]: true,\n  [boolTag]: true,\n  [dateTag]: true,\n  [float32Tag]: true,\n  [float64Tag]: true,\n  [int8Tag]: true,\n  [int16Tag]: true,\n  [int32Tag]: true,\n  [mapTag]: true,\n  [numberTag]: true,\n  [objectTag]: true,\n  [regexpTag]: true,\n  [setTag]: true,\n  [stringTag]: true,\n  [symbolTag]: true,\n  [uint8Tag]: true,\n  [uint8ClampedTag]: true,\n  [uint16Tag]: true,\n  [uint32Tag]: true,\n  [errorTag]: false,\n  [funcTag]: false,\n  [weakMapTag]: false\n};\n\n/** Used to compose unicode character classes. */\nconst rsAstralRange = '\\\\ud800-\\\\udfff';\nconst rsComboMarksRange = '\\\\u0300-\\\\u036f';\nconst reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f';\nconst rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff';\nconst rsComboMarksExtendedRange = '\\\\u1ab0-\\\\u1aff';\nconst rsComboMarksSupplementRange = '\\\\u1dc0-\\\\u1dff';\nconst rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange + rsComboMarksExtendedRange + rsComboMarksSupplementRange;\nconst rsDingbatRange = '\\\\u2700-\\\\u27bf';\nconst rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff';\nconst rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7';\nconst rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf';\nconst rsPunctuationRange = '\\\\u2000-\\\\u206f';\nconst rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000';\nconst rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde';\nconst rsVarRange = '\\\\ufe0e\\\\ufe0f';\nconst rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nconst rsApos = '[\\'\\u2019]';\nconst rsBreak = `[${rsBreakRange}]`;\nconst rsCombo = `[${rsComboRange}]`;\nconst rsDigit = '\\\\d';\nconst rsDingbat = `[${rsDingbatRange}]`;\nconst rsLower = `[${rsLowerRange}]`;\nconst rsMisc = `[^${rsAstralRange}${rsBreakRange + rsDigit + rsDingbatRange + rsLowerRange + rsUpperRange}]`;\nconst rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]';\nconst rsModifier = `(?:${rsCombo}|${rsFitz})`;\nconst rsNonAstral = `[^${rsAstralRange}]`;\nconst rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}';\nconst rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]';\nconst rsUpper = `[${rsUpperRange}]`;\nconst rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nconst rsMiscLower = `(?:${rsLower}|${rsMisc})`;\nconst rsMiscUpper = `(?:${rsUpper}|${rsMisc})`;\nconst rsOptContrLower = `(?:${rsApos}(?:d|ll|m|re|s|t|ve))?`;\nconst rsOptContrUpper = `(?:${rsApos}(?:D|LL|M|RE|S|T|VE))?`;\nconst reOptMod = `${rsModifier}?`;\nconst rsOptVar = `[${rsVarRange}]?`;\nconst rsOptJoin = `(?:${rsZWJ}(?:${[rsNonAstral, rsRegional, rsSurrPair].join('|')})${rsOptVar + reOptMod})*`;\nconst rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])';\nconst rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])';\nconst rsSeq = rsOptVar + reOptMod + rsOptJoin;\nconst rsEmoji = `(?:${[rsDingbat, rsRegional, rsSurrPair].join('|')})${rsSeq}`;\nconst reUnicodeWords = RegExp([`${rsUpper}?${rsLower}+${rsOptContrLower}(?=${[rsBreak, rsUpper, '$'].join('|')})`, `${rsMiscUpper}+${rsOptContrUpper}(?=${[rsBreak, rsUpper + rsMiscLower, '$'].join('|')})`, `${rsUpper}?${rsMiscLower}+${rsOptContrLower}`, `${rsUpper}+${rsOptContrUpper}`, rsOrdUpper, rsOrdLower, `${rsDigit}+`, rsEmoji].join('|'), 'g');\nconst LARGE_ARRAY_SIZE = 200;\nconst HASH_UNDEFINED = '__hash_undefined__';\n\n// Used to match `toStringTag` values of typed arrays\nconst reTypedTag = /^\\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\\]$/;\n\n// Used to compose unicode capture groups\nconst rsAstral = `[${rsAstralRange}]`;\n\n// Used to compose unicode regexes\nconst rsNonAstralCombo = `${rsNonAstral}${rsCombo}?`;\nconst rsSymbol = `(?:${[rsNonAstralCombo, rsCombo, rsRegional, rsSurrPair, rsAstral].join('|')})`;\n\n// Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode)\nconst reUnicode = RegExp(`${rsFitz}(?=${rsFitz})|${rsSymbol + rsSeq}`, 'g');\nconst reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/;\nconst reIsPlainProp = /^\\w*$/;\nconst charCodeOfDot = '.'.charCodeAt(0);\nconst reEscapeChar = /\\\\(\\\\)?/g;\nconst rePropName = RegExp(\n// Match anything that isn't a dot or bracket.\n'[^.[\\\\]]+' + '|' +\n// Or match property names within brackets.\n'\\\\[(?:' +\n// Match a non-string expression.\n'([^\"\\'][^[]*)' + '|' +\n// Or match strings (supports escaping characters).\n'([\"\\'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2' + ')\\\\]' + '|' +\n// Or match \"\" as the space between consecutive dots or empty brackets.\n'(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))', 'g');\nconst reIsUint = /^(?:0|[1-9]\\d*)$/;\nconst hasUnicodeWord = RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/);\nconst MAX_ARRAY_INDEX = 4294967295 - 1;\n\n/** Used to match words composed of alphanumeric characters. */\n// eslint-disable-next-line no-control-regex\nconst reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n// -- helper functions\nconst hasUnicode = string => {\n  return reUnicode.test(string);\n};\nconst unicodeToArray = string => {\n  return string.match(reUnicode) || [];\n};\nconst asciiToArray = string => {\n  return string.split('');\n};\nconst stringToArray = string => {\n  return hasUnicode(string) ? unicodeToArray(string) : asciiToArray(string);\n};\nconst values = object => {\n  if (object == null) {\n    return [];\n  }\n  return keys(object).map(key => object[key]);\n};\nconst keys = object => {\n  return isArrayLike(object) ? arrayLikeKeys(object) : Object.keys(Object(object));\n};\nconst baseKeys = object => {\n  if (!isPrototype(object)) {\n    return Object.keys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n};\nconst arrayLikeKeys = (value, inherited) => {\n  const isArr = Array.isArray(value);\n  const isArg = !isArr && isObjectLike(value) && getTag(value) === argsTag;\n  const isType = !isArr && !isArg && isTypedArray(value);\n  const skipIndexes = isArr || isArg || isType;\n  const length = value.length;\n  const result = new Array(skipIndexes ? length : 0);\n  let index = skipIndexes ? -1 : length;\n  while (++index < length) {\n    result[index] = `${index}`;\n  }\n  for (const key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && (\n    // Safari 9 has enumerable `arguments.length` in strict mode.\n    key === 'length' ||\n    // Skip index properties.\n    isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n};\nconst assocIndexOf = (array, key) => {\n  let {\n    length\n  } = array;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n};\nconst eq = (value, other) => {\n  return value === other || value !== value && other !== other;\n};\nconst isObjectLike = value => {\n  return value != null && typeof value == 'object';\n};\nconst isIterateeCall = (value, index, object) => {\n  if (!isObject(object)) {\n    return false;\n  }\n  const type = typeof index;\n  const isPossibleIteratee = type == 'number' ? isArrayLike(object) && index > -1 && index < object.length : type == 'string' && index in object;\n  if (isPossibleIteratee) {\n    return eq(object[index], value);\n  }\n  return false;\n};\nconst isSet = value => {\n  return isObjectLike(value) && getTag(value) == setTag;\n};\nconst isMap = value => {\n  return isObjectLike(value) && getTag(value) == mapTag;\n};\nconst isPrototype = value => {\n  const Ctor = value && value.constructor;\n  const proto = typeof Ctor === 'function' && Ctor.prototype || Object.prototype;\n  return value === proto;\n};\nconst assignValue = (object, key, value) => {\n  const objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) || value === undefined && !(key in object)) {\n    object[key] = value;\n  }\n};\nconst copyObject = (source, props, object) => {\n  let index = -1;\n  const length = props.length;\n  while (++index < length) {\n    const key = props[index];\n    assignValue(object, key, source[key]);\n  }\n  return object;\n};\nconst isArrayLike = value => {\n  return value != null && typeof value !== 'function' && typeof value.length === 'number' && value.length > -1 && value.length % 1 === 0;\n};\nconst isSymbol = value => {\n  return typeof value == 'symbol' || isObjectLike(value) && getTag(value) === symbolTag;\n};\nconst initCloneArray = array => {\n  const length = array.length;\n  let result = new array.constructor(length);\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n};\nconst copyArray = (source, array) => {\n  let index = -1;\n  const length = source.length;\n  array || (array = new Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n};\nconst getTag = value => {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return Object.prototype.toString.call(value);\n};\nconst cloneArrayBuffer = arrayBuffer => {\n  const result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n};\nconst cloneTypedArray = (typedArray, isDeep) => {\n  const buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n};\nconst cloneRegExp = regexp => {\n  const result = new regexp.constructor(regexp.source, /\\w*$/.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n};\nconst initCloneObject = object => {\n  return typeof object.constructor == 'function' && !isPrototype(object) ? Object.create(Object.getPrototypeOf(object)) : {};\n};\nconst getSymbols = object => {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  const symbols = Object.getOwnPropertySymbols(object);\n  return symbols.filter(symbol => propertyIsEnumerable.call(object, symbol));\n};\nconst copySymbols = (source, object) => {\n  return copyObject(source, getSymbols(source), object);\n};\nfunction cloneDataView(dataView, isDeep) {\n  const buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\nconst initCloneByTag = (object, tag, isDeep) => {\n  const Constructor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object, isDeep);\n    case boolTag:\n    case dateTag:\n      return new Constructor(+object);\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n    case float32Tag:\n    case float64Tag:\n    case int8Tag:\n    case int16Tag:\n    case int32Tag:\n    case uint8Tag:\n    case uint8ClampedTag:\n    case uint16Tag:\n    case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n    case mapTag:\n      return new Constructor(object);\n    case numberTag:\n    case stringTag:\n      return new Constructor(object);\n    case regexpTag:\n      return cloneRegExp(object);\n    case setTag:\n      return new Constructor();\n    case symbolTag:\n      return Symbol.prototype.valueOf ? Object(Symbol.prototype.valueOf.call(object)) : {};\n  }\n};\nconst isTypedArray = value => {\n  return isObjectLike(value) && reTypedTag.test(getTag(value));\n};\nconst getAllKeys = object => {\n  const result = Object.keys(object);\n  if (!Array.isArray(object) && object != null) {\n    result.push(...getSymbols(Object(object)));\n  }\n  return result;\n};\nconst getSymbolsIn = object => {\n  const result = [];\n  while (object) {\n    result.push(...getSymbols(object));\n    object = Object.getPrototypeOf(Object(object));\n  }\n  return result;\n};\nconst getAllKeysIn = object => {\n  const result = [];\n  for (const key in object) {\n    result.push(key);\n  }\n  if (!Array.isArray(object)) {\n    result.push(...getSymbolsIn(object));\n  }\n  return result;\n};\nconst getMapData = ({\n  __data__\n}, key) => {\n  const data = __data__;\n  return isKeyable(key) ? data[typeof key === 'string' ? 'string' : 'hash'] : data.map;\n};\nconst equalObjects = (object, other, equalFunc, stack) => {\n  const objProps = getAllKeys(object);\n  const objLength = objProps.length;\n  const othProps = getAllKeys(other);\n  const othLength = othProps.length;\n  if (objLength != othLength) {\n    return false;\n  }\n  let key;\n  let index = objLength;\n  while (index--) {\n    key = objProps[index];\n    if (!hasOwnProperty.call(other, key)) {\n      return false;\n    }\n  }\n  const objStacked = stack.get(object);\n  const othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  let result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n  let compared;\n  let skipCtor;\n  while (++index < objLength) {\n    key = objProps[index];\n    const objValue = object[key];\n    const othValue = other[key];\n    if (!(compared === undefined ? objValue === othValue || equalFunc(objValue, othValue, stack) : compared)) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    const objCtor = object.constructor;\n    const othCtor = other.constructor;\n    if (objCtor != othCtor && 'constructor' in object && 'constructor' in other && !(typeof objCtor === 'function' && objCtor instanceof objCtor && typeof othCtor === 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n};\nconst baseIsEqual = (value, other, stack) => {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, stack);\n};\nconst baseIsEqualDeep = (object, other, equalFunc, stack) => {\n  let objIsArr = Array.isArray(object);\n  const othIsArr = Array.isArray(other);\n  let objTag = objIsArr ? arrayTag : getTag(object);\n  let othTag = othIsArr ? arrayTag : getTag(other);\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n  let objIsObj = objTag == objectTag;\n  const othIsObj = othTag == objectTag;\n  const isSameTag = objTag == othTag;\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack());\n    return objIsArr || isTypedArray(object) ? equalArrays(object, other, false, equalFunc, stack) : equalByTag(object, other, objTag, equalFunc, stack);\n  }\n  const objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__');\n  const othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n  if (objIsWrapped || othIsWrapped) {\n    const objUnwrapped = objIsWrapped ? object.value() : object;\n    const othUnwrapped = othIsWrapped ? other.value() : other;\n    stack || (stack = new Stack());\n    return equalFunc(objUnwrapped, othUnwrapped, stack);\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack());\n  return equalObjects(object, other, equalFunc, stack);\n};\nconst equalArrays = (array, other, compareUnordered, equalFunc, stack) => {\n  const isPartial = false;\n  const arrLength = array.length;\n  const othLength = other.length;\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  const arrStacked = stack.get(array);\n  const othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  let index = -1;\n  let result = true;\n  const seen = compareUnordered ? new SetCache() : undefined;\n  stack.set(array, other);\n  stack.set(other, array);\n  while (++index < arrLength) {\n    let compared;\n    const arrValue = array[index];\n    const othValue = other[index];\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    if (seen) {\n      if (!some(other, (othValue, othIndex) => {\n        if (!cacheHas(seen, othIndex) && (arrValue === othValue || equalFunc(arrValue, othValue, stack))) {\n          return seen.push(othIndex);\n        }\n      })) {\n        result = false;\n        break;\n      }\n    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, stack))) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n};\nconst some = (array, predicate) => {\n  let index = -1;\n  const length = array == null ? 0 : array.length;\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n};\nconst cacheHas = (cache, key) => {\n  return cache.has(key);\n};\nconst compareArrayBufferTag = (object, other, equalFunc, stack) => {\n  if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array(object), new Uint8Array(other), stack)) {\n    return false;\n  }\n  return true;\n};\nconst equalByTag = (object, other, tag, equalFunc, stack) => {\n  switch (tag) {\n    case dataViewTag:\n      if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n      return compareArrayBufferTag(object, other, equalFunc, stack);\n    case arrayBufferTag:\n      return compareArrayBufferTag(object, other, equalFunc, stack);\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      return eq(+object, +other);\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n    case regexpTag:\n    case stringTag:\n      return object == `${other}`;\n    case mapTag:\n      let convert = mapToArray;\n    // Intentional fallthrough\n    // eslint-disable-next-line no-fallthrough\n    case setTag:\n      convert || (convert = setToArray);\n      if (object.size != other.size) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      const stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      const result = equalArrays(convert(object), convert(other), true, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n    case symbolTag:\n      return Symbol.prototype.valueOf.call(object) == Symbol.prototype.valueOf.call(other);\n  }\n  return false;\n};\nconst mapToArray = map => {\n  let index = -1;\n  let result = Array(map.size);\n  map.forEach((value, key) => {\n    result[++index] = [key, value];\n  });\n  return result;\n};\nconst setToArray = set => {\n  let index = -1;\n  const result = new Array(set.size);\n  set.forEach(value => {\n    result[++index] = value;\n  });\n  return result;\n};\nconst isKey = (value, object) => {\n  if (Array.isArray(value)) {\n    return false;\n  }\n  const type = typeof value;\n  if (type === 'number' || type === 'boolean' || value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);\n};\nconst stringToPath = string => {\n  const result = [];\n  if (string.charCodeAt(0) === charCodeOfDot) {\n    result.push('');\n  }\n  string.replace(rePropName, (match, expression, quote, subString) => {\n    let key = match;\n    if (quote) {\n      key = subString.replace(reEscapeChar, '$1');\n    } else if (expression) {\n      key = expression.trim();\n    }\n    result.push(key);\n  });\n  return result;\n};\nconst castPath = (path, object) => {\n  if (Array.isArray(path)) {\n    return path;\n  }\n  return isKey(path, object) ? [path] : stringToPath(`${path}`);\n};\nconst get = (object, path) => {\n  path = castPath(path, object);\n  let index = 0;\n  const length = path.length;\n  while (object != null && index < length) {\n    object = object[toKey(path[index])];\n    index++;\n  }\n  return index && index == length ? object : undefined;\n};\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    const valIsDefined = value !== undefined;\n    const valIsNull = value === null;\n    const valIsReflexive = value === value;\n    const valIsSymbol = isSymbol(value);\n    const othIsDefined = other !== undefined;\n    const othIsNull = other === null;\n    const othIsReflexive = other === other;\n    const othIsSymbol = isSymbol(other);\n    if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {\n      return 1;\n    }\n    if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\nfunction compareMultiple(object, other, orders) {\n  let index = -1;\n  const objCriteria = object.criteria;\n  const othCriteria = other.criteria;\n  const length = objCriteria.length;\n  const ordersLength = orders.length;\n  while (++index < length) {\n    const order = index < ordersLength ? orders[index] : null;\n    const cmpFn = order && typeof order === 'function' ? order : compareAscending;\n    const result = cmpFn(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (order && typeof order !== 'function') {\n        return result * (order == 'desc' ? -1 : 1);\n      }\n      return result;\n    }\n  }\n  return object.index - other.index;\n}\nconst diff = (array, values) => {\n  let includes = (array, value) => {\n    const length = array == null ? 0 : array.length;\n    return !!length && array.indexOf(value) > -1;\n  };\n  let isCommon = true;\n  const result = [];\n  const valuesLength = values.length;\n  if (!array.length) {\n    return result;\n  }\n  if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = (cache, key) => cache.has(key);\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer: for (let key in array) {\n    let value = array[key];\n    const computed = value;\n    value = value !== 0 ? value : 0;\n    if (isCommon && computed === computed) {\n      let valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    } else if (!includes(values, computed)) {\n      result.push(value);\n    }\n  }\n  return result;\n};\nconst intersect = arrays => {\n  const includes = (array, value) => {\n    const length = array == null ? 0 : array.length;\n    return !!length && array.indexOf(value) > -1;\n  };\n  const cacheHas = (cache, key) => cache.has(key);\n  const length = arrays[0].length;\n  const othLength = arrays.length;\n  const caches = new Array(othLength);\n  const result = [];\n  let array;\n  let maxLength = Infinity;\n  let othIndex = othLength;\n  while (othIndex--) {\n    array = arrays[othIndex];\n    maxLength = Math.min(array.length, maxLength);\n    caches[othIndex] = length >= 120 && array.length >= 120 ? new SetCache(othIndex && array) : undefined;\n  }\n  array = arrays[0];\n  let index = -1;\n  const seen = caches[0];\n  outer: while (++index < length && result.length < maxLength) {\n    let value = array[index];\n    const computed = value;\n    value = value !== 0 ? value : 0;\n    if (!(seen ? cacheHas(seen, computed) : includes(result, computed))) {\n      othIndex = othLength;\n      while (--othIndex) {\n        const cache = caches[othIndex];\n        if (!(cache ? cacheHas(cache, computed) : includes(arrays[othIndex], computed))) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n};\nconst toKey = value => {\n  if (typeof value === 'string' || isSymbol(value)) {\n    return value;\n  }\n  const result = `${value}`;\n  return result == '0' && 1 / value == -Infinity ? '-0' : result;\n};\nconst baseClone = (value, isDeep = false, isFlat = false, isFull = true, customizer, key, object, stack) => {\n  let result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  const isArr = Array.isArray(value);\n  const tag = getTag(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    const isFunc = typeof value === 'function';\n    if (tag === objectTag || tag === argsTag || isFunc && !object) {\n      result = isFlat || isFunc ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat ? copySymbolsIn(value, copyObject(value, Object.keys(value), result)) : copySymbols(value, Object.assign(result, value));\n      }\n    } else {\n      if (isFunc || !CLONEABLE_TAGS[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  stack || (stack = new Stack());\n  const stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n  if (isMap(value)) {\n    value.forEach((subValue, key) => {\n      result.set(key, baseClone(subValue, isDeep, isFlat, isFull, customizer, key, value, stack));\n    });\n    return result;\n  }\n  if (isSet(value)) {\n    value.forEach(subValue => {\n      result.add(baseClone(subValue, isDeep, isFlat, isFull, customizer, subValue, value, stack));\n    });\n    return result;\n  }\n  if (isTypedArray(value)) {\n    return result;\n  }\n  const keysFunc = isFull ? isFlat ? getAllKeysIn : getAllKeys : isFlat ? keysIn : keys;\n  const props = isArr ? undefined : keysFunc(value);\n  (props || value).forEach((subValue, key) => {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    assignValue(result, key, baseClone(subValue, isDeep, isFlat, isFull, customizer, key, value, stack));\n  });\n  return result;\n};\nconst copySymbolsIn = (source, object) => {\n  return copyObject(source, getSymbolsIn(source), object);\n};\nconst parent = (object, path) => {\n  return path.length < 2 ? object : get(object, path.slice(0, -1));\n};\nconst set = (object, path, value) => {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n  const length = path.length;\n  const lastIndex = length - 1;\n  let index = -1;\n  let nested = object;\n  while (nested != null && ++index < length) {\n    const key = toKey(path[index]);\n    let newValue = value;\n    if (index != lastIndex) {\n      const objValue = nested[key];\n      newValue = undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue) ? objValue : isIndex(path[index + 1]) ? [] : {};\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n};\nconst isIndex = (value, length) => {\n  const type = typeof value;\n  length = length == null ? Number.MAX_SAFE_INTEGER : length;\n  return !!length && (type === 'number' || type !== 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;\n};\nconst unset = (object, path) => {\n  path = castPath(path, object);\n  object = parent(object, path);\n  const lastSegment = path[path.length - 1];\n  return object == null || delete object[toKey(lastSegment)];\n};\nconst isKeyable = value => {\n  const type = typeof value;\n  return type === 'string' || type === 'number' || type === 'symbol' || type === 'boolean' ? value !== '__proto__' : value === null;\n};\nconst keysIn = object => {\n  const result = [];\n  for (const key in object) {\n    result.push(key);\n  }\n  return result;\n};\nconst toPlainObject = value => {\n  value = Object(value);\n  const result = {};\n  for (const key in value) {\n    result[key] = value[key];\n  }\n  return result;\n};\nconst safeGet = (object, key) => {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n  if (key == '__proto__') {\n    return;\n  }\n  return object[key];\n};\nfunction createAssigner(assigner, isMerge = false) {\n  return (object, ...sources) => {\n    let index = -1;\n    let length = sources.length;\n    let customizer = length > 1 ? sources[length - 1] : undefined;\n    const guard = length > 2 ? sources[2] : undefined;\n    customizer = assigner.length > 3 && typeof customizer === 'function' ? (length--, customizer) : isMerge ? (a, b) => {\n      if (Array.isArray(a) && !Array.isArray(b)) {\n        return b;\n      }\n    } : undefined;\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      const source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  };\n}\nconst baseMerge = (object, source, srcIndex, customizer, stack) => {\n  if (object === source) {\n    return;\n  }\n  forIn(source, (srcValue, key) => {\n    if (isObject(srcValue)) {\n      stack || (stack = new Stack());\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    } else {\n      let newValue = customizer ? customizer(object[key], srcValue, `${key}`, object, source, stack) : undefined;\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n};\nconst baseMergeDeep = (object, source, key, srcIndex, mergeFunc, customizer, stack) => {\n  const objValue = safeGet(object, key);\n  const srcValue = safeGet(source, key);\n  const stacked = stack.get(srcValue);\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  let newValue = customizer ? customizer(objValue, srcValue, `${key}`, object, source, stack) : undefined;\n  let isCommon = newValue === undefined;\n  if (isCommon) {\n    const isArr = Array.isArray(srcValue);\n    const isTyped = !isArr && isTypedArray(srcValue);\n    newValue = srcValue;\n    if (isArr || isTyped) {\n      if (Array.isArray(objValue)) {\n        newValue = objValue;\n      } else if (isObjectLike(objValue) && isArrayLike(objValue)) {\n        newValue = copyArray(objValue);\n      } else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      } else {\n        newValue = [];\n      }\n    } else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      } else if (typeof objValue === 'function' || !isObject(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    } else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n};\nconst assignMergeValue = (object, key, value) => {\n  if (value !== undefined && !eq(object[key], value) || value === undefined && !(key in object)) {\n    assignValue(object, key, value);\n  }\n};\nfunction baseFor(object, iteratee, keysFunc) {\n  const iterable = Object(object);\n  const props = keysFunc(object);\n  let {\n    length\n  } = props;\n  let index = -1;\n  while (length--) {\n    const key = props[++index];\n    if (iteratee(iterable[key], key, iterable) === false) {\n      break;\n    }\n  }\n  return object;\n}\nconst baseForOwn = (object, iteratee) => {\n  return object && baseFor(object, iteratee, keys);\n};\nconst baseEach = (collection, iteratee) => {\n  if (collection == null) {\n    return collection;\n  }\n  if (!isArrayLike(collection)) {\n    return baseForOwn(collection, iteratee);\n  }\n  const length = collection.length;\n  const iterable = Object(collection);\n  let index = -1;\n  while (++index < length) {\n    if (iteratee(iterable[index], index, iterable) === false) {\n      break;\n    }\n  }\n  return collection;\n};\nfunction last(array) {\n  const length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\nconst createSet = Set && 1 / setToArray(new Set([undefined, -0]))[1] == 1 / 0 ? values => new Set(values) : () => {};\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = iteratees.map(iteratee => {\n      if (Array.isArray(iteratee)) {\n        return value => get(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [value => value];\n  }\n  let criteriaIndex = -1;\n  let eachIndex = -1;\n  const result = isArrayLike(collection) ? new Array(collection.length) : [];\n  baseEach(collection, value => {\n    const criteria = iteratees.map(iteratee => iteratee(value));\n    result[++eachIndex] = {\n      criteria,\n      index: ++criteriaIndex,\n      value\n    };\n  });\n  return baseSortBy(result, (object, other) => compareMultiple(object, other, orders));\n}\nfunction baseSortBy(array, comparer) {\n  let {\n    length\n  } = array;\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\nfunction matchesStrictComparable(key, srcValue) {\n  return object => {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue && (srcValue !== undefined || key in Object(object));\n  };\n}\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return object => {\n    const objValue = get(object, path);\n    return objValue === undefined && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue);\n  };\n}\nfunction baseMatches(source) {\n  const matchData = getMatchData(source);\n  if (matchData.length === 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return object => object === source || baseIsMatch(object, source, matchData);\n}\nfunction getMatchData(object) {\n  const result = keys(object);\n  let length = result.length;\n  while (length--) {\n    const key = result[length];\n    const value = object[key];\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\nfunction baseIsMatch(object, source, matchData, customizer) {\n  let index = matchData.length;\n  const length = index;\n  const noCustomizer = !customizer;\n  if (object == null) {\n    return !length;\n  }\n  let data;\n  let result;\n  object = Object(object);\n  while (index--) {\n    data = matchData[index];\n    if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    const key = data[0];\n    const objValue = object[key];\n    const srcValue = data[1];\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      const stack = new Stack();\n      if (customizer) {\n        result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined ? baseIsEqual(srcValue, objValue, stack) : result)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\nfunction baseProperty(key) {\n  return object => object == null ? undefined : object[key];\n}\nfunction basePropertyDeep(path) {\n  return object => get(object, path);\n}\nfunction baseIteratee(value) {\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return val => val;\n  }\n  if (typeof value == 'object') {\n    return Array.isArray(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);\n  }\n  return property(value);\n}\nfunction getIteratee() {\n  const result = baseIteratee;\n  return arguments.length ? result(arguments[0], arguments[1]) : result;\n}\nconst arrayReduce = (array, iteratee, accumulator, initAccum) => {\n  let index = -1;\n  const length = array == null ? 0 : array.length;\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n};\nconst baseReduce = (collection, iteratee, accumulator, initAccum, eachFunc) => {\n  eachFunc(collection, (value, index, collection) => {\n    accumulator = initAccum ? (initAccum = false, value) : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n};\nfunction reduce(collection, iteratee, accumulator) {\n  const func = Array.isArray(collection) ? arrayReduce : baseReduce;\n  const initAccum = arguments.length < 3;\n  return func(collection, iteratee, accumulator, initAccum, baseEach);\n}\nconst isFlattenable = value => {\n  return Array.isArray(value) || isArguments(value) || !!(value && value[Symbol.isConcatSpreadable]);\n};\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  let index = -1;\n  const length = array.length;\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        result.push(...value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\nconst isArguments = value => {\n  return isObjectLike(value) && getTag(value) == '[object Arguments]';\n};\nconst basePick = (object, paths) => {\n  return basePickBy(object, paths, (value, path) => hasIn(object, path));\n};\nconst basePickBy = (object, paths, predicate) => {\n  let index = -1;\n  const length = paths.length;\n  const result = {};\n  while (++index < length) {\n    const path = paths[index];\n    const value = get(object, path);\n    if (predicate(value, path)) {\n      set(result, castPath(path, object), value);\n    }\n  }\n  return result;\n};\nconst isLength = value => {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= Number.MAX_SAFE_INTEGER;\n};\nconst baseHasIn = (object, key) => {\n  return object != null && key in Object(object);\n};\nconst hasPath = (object, path, hasFunc) => {\n  path = castPath(path, object);\n  var index = -1,\n    length = path.length,\n    result = false;\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) && (Array.isArray(object) || isArguments(object));\n};\nconst asciiWords = string => {\n  return string.match(reAsciiWord);\n};\nconst unicodeWords = string => {\n  return string.match(reUnicodeWords);\n};\nconst words = (string, pattern) => {\n  if (pattern === undefined) {\n    const result = hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n    return result || [];\n  }\n  return string.match(pattern) || [];\n};\nconst castSlice = (array, start, end) => {\n  const {\n    length\n  } = array;\n  end = end === undefined ? length : end;\n  return !start && end >= length ? array : array.slice(start, end);\n};\nconst upperFirst = createCaseFirst('toUpperCase');\nfunction createCaseFirst(methodName) {\n  return string => {\n    if (!string) {\n      return '';\n    }\n    const strSymbols = hasUnicode(string) ? stringToArray(string) : undefined;\n    const chr = strSymbols ? strSymbols[0] : string[0];\n    const trailing = strSymbols ? castSlice(strSymbols, 1).join('') : string.slice(1);\n    return chr[methodName]() + trailing;\n  };\n}\n\n// -- helper classes\nclass Stack {\n  constructor(entries) {\n    const data = this.__data__ = new ListCache(entries);\n    this.size = data.size;\n  }\n  clear() {\n    this.__data__ = new ListCache();\n    this.size = 0;\n  }\n  delete(key) {\n    const data = this.__data__;\n    const result = data['delete'](key);\n    this.size = data.size;\n    return result;\n  }\n  get(key) {\n    return this.__data__.get(key);\n  }\n  has(key) {\n    return this.__data__.has(key);\n  }\n  set(key, value) {\n    let data = this.__data__;\n    if (data instanceof ListCache) {\n      const pairs = data.__data__;\n      if (pairs.length < LARGE_ARRAY_SIZE - 1) {\n        pairs.push([key, value]);\n        this.size = ++data.size;\n        return this;\n      }\n      data = this.__data__ = new MapCache(pairs);\n    }\n    data.set(key, value);\n    this.size = data.size;\n    return this;\n  }\n}\nclass ListCache {\n  constructor(entries) {\n    let index = -1;\n    const length = entries == null ? 0 : entries.length;\n    this.clear();\n    while (++index < length) {\n      const entry = entries[index];\n      this.set(entry[0], entry[1]);\n    }\n  }\n  clear() {\n    this.__data__ = [];\n    this.size = 0;\n  }\n  delete(key) {\n    const data = this.__data__;\n    const index = assocIndexOf(data, key);\n    if (index < 0) {\n      return false;\n    }\n    const lastIndex = data.length - 1;\n    if (index == lastIndex) {\n      data.pop();\n    } else {\n      data.splice(index, 1);\n    }\n    --this.size;\n    return true;\n  }\n  get(key) {\n    const data = this.__data__;\n    const index = assocIndexOf(data, key);\n    return index < 0 ? undefined : data[index][1];\n  }\n  has(key) {\n    return assocIndexOf(this.__data__, key) > -1;\n  }\n  set(key, value) {\n    const data = this.__data__;\n    const index = assocIndexOf(data, key);\n    if (index < 0) {\n      ++this.size;\n      data.push([key, value]);\n    } else {\n      data[index][1] = value;\n    }\n    return this;\n  }\n}\nclass MapCache {\n  constructor(entries) {\n    let index = -1;\n    const length = entries == null ? 0 : entries.length;\n    this.clear();\n    while (++index < length) {\n      const entry = entries[index];\n      this.set(entry[0], entry[1]);\n    }\n  }\n  clear() {\n    this.size = 0;\n    this.__data__ = {\n      'hash': new Hash(),\n      'map': new Map(),\n      'string': new Hash()\n    };\n  }\n  delete(key) {\n    const result = getMapData(this, key)['delete'](key);\n    this.size -= result ? 1 : 0;\n    return result;\n  }\n  get(key) {\n    return getMapData(this, key).get(key);\n  }\n  has(key) {\n    return getMapData(this, key).has(key);\n  }\n  set(key, value) {\n    const data = getMapData(this, key);\n    const size = data.size;\n    data.set(key, value);\n    this.size += data.size == size ? 0 : 1;\n    return this;\n  }\n}\nclass Hash {\n  constructor(entries) {\n    let index = -1;\n    const length = entries == null ? 0 : entries.length;\n    this.clear();\n    while (++index < length) {\n      const entry = entries[index];\n      this.set(entry[0], entry[1]);\n    }\n  }\n  clear() {\n    this.__data__ = Object.create(null);\n    this.size = 0;\n  }\n  delete(key) {\n    const result = this.has(key) && delete this.__data__[key];\n    this.size -= result ? 1 : 0;\n    return result;\n  }\n  get(key) {\n    const data = this.__data__;\n    const result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  has(key) {\n    const data = this.__data__;\n    return data[key] !== undefined;\n  }\n  set(key, value) {\n    const data = this.__data__;\n    this.size += this.has(key) ? 0 : 1;\n    data[key] = value === undefined ? HASH_UNDEFINED : value;\n    return this;\n  }\n}\nclass SetCache {\n  constructor(values) {\n    let index = -1;\n    const length = values == null ? 0 : values.length;\n    this.__data__ = new MapCache();\n    while (++index < length) {\n      this.add(values[index]);\n    }\n  }\n  add(value) {\n    this.__data__.set(value, HASH_UNDEFINED);\n    return this;\n  }\n  has(value) {\n    return this.__data__.has(value);\n  }\n}\nSetCache.prototype.push = SetCache.prototype.add;\n\n// -- top level functions\n\nexport const isBoolean = function (value) {\n  var toString = Object.prototype.toString;\n  return value === true || value === false || !!value && typeof value === 'object' && toString.call(value) === boolTag;\n};\nexport const isObject = function (value) {\n  return !!value && (typeof value === 'object' || typeof value === 'function');\n};\nexport const isNumber = function (value) {\n  var toString = Object.prototype.toString;\n  return typeof value === 'number' || !!value && typeof value === 'object' && toString.call(value) === numberTag;\n};\nexport const isString = function (value) {\n  var toString = Object.prototype.toString;\n  return typeof value === 'string' || !!value && typeof value === 'object' && toString.call(value) === stringTag;\n};\nexport const assign = createAssigner((object, source) => {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\nexport const mixin = assign;\nexport const deepMixin = mixin;\nexport const supplement = (object, ...sources) => {\n  let index = -1;\n  let length = sources.length;\n  const guard = length > 2 ? sources[2] : undefined;\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n  while (++index < length) {\n    const source = sources[index];\n    if (source == null) {\n      continue;\n    }\n    const props = Object.keys(source);\n    const propsLength = props.length;\n    let propsIndex = -1;\n    while (++propsIndex < propsLength) {\n      const key = props[propsIndex];\n      const value = object[key];\n      if (value === undefined || eq(value, Object.prototype[key]) && !hasOwnProperty.call(object, key)) {\n        object[key] = source[key];\n      }\n    }\n  }\n  return object;\n};\nexport const defaults = supplement;\nexport const deepSupplement = function defaultsDeep(...args) {\n  args.push(undefined, customDefaultsMerge);\n  return merge.apply(undefined, args);\n};\nexport const defaultsDeep = deepSupplement;\n\n// _.invokeMap\nexport const invoke = (collection, path, ...args) => {\n  let index = -1;\n  const isFunc = typeof path === 'function';\n  const result = isArrayLike(collection) ? new Array(collection.length) : [];\n  baseEach(collection, value => {\n    result[++index] = isFunc ? path.apply(value, args) : invokeProperty(value, path, ...args);\n  });\n  return result;\n};\n\n// _.invoke\nexport const invokeProperty = (object, path, ...args) => {\n  path = castPath(path, object);\n  object = parent(object, path);\n  const func = object == null ? object : object[toKey(last(path))];\n  return func == null ? undefined : func.apply(object, args);\n};\nexport const sortedIndex = (array, value, iteratee) => {\n  let low = 0;\n  let high = array == null ? 0 : array.length;\n  if (high == 0) {\n    return 0;\n  }\n  iteratee = getIteratee(iteratee, 2);\n  value = iteratee(value);\n  const valIsNaN = value !== value;\n  const valIsNull = value === null;\n  const valIsSymbol = isSymbol(value);\n  const valIsUndefined = value === undefined;\n  while (low < high) {\n    let setLow;\n    const mid = Math.floor((low + high) / 2);\n    const computed = iteratee(array[mid]);\n    const othIsDefined = computed !== undefined;\n    const othIsNull = computed === null;\n    const othIsReflexive = computed === computed;\n    const othIsSymbol = isSymbol(computed);\n    if (valIsNaN) {\n      setLow = othIsReflexive;\n    } else if (valIsUndefined) {\n      setLow = othIsReflexive && othIsDefined;\n    } else if (valIsNull) {\n      setLow = othIsReflexive && othIsDefined && !othIsNull;\n    } else if (valIsSymbol) {\n      setLow = othIsReflexive && othIsDefined && !othIsNull && !othIsSymbol;\n    } else if (othIsNull || othIsSymbol) {\n      setLow = false;\n    } else {\n      setLow = computed < value;\n    }\n    if (setLow) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return Math.min(high, MAX_ARRAY_INDEX);\n};\nexport const uniq = (array, iteratee) => {\n  let index = -1;\n  let includes = (array, value) => {\n    const length = array == null ? 0 : array.length;\n    return !!length && array.indexOf(value) > -1;\n  };\n  iteratee = getIteratee(iteratee, 2);\n  let isCommon = true;\n  const {\n    length\n  } = array;\n  const result = [];\n  let seen = result;\n  if (length >= LARGE_ARRAY_SIZE) {\n    const set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = (cache, key) => cache.has(key);\n    seen = new SetCache();\n  } else {\n    seen = iteratee ? [] : result;\n  }\n  outer: while (++index < length) {\n    let value = array[index];\n    const computed = iteratee ? iteratee(value) : value;\n    value = value !== 0 ? value : 0;\n    if (isCommon && computed === computed) {\n      let seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    } else if (!includes(seen, computed)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n};\nexport const clone = value => baseClone(value);\nexport const cloneDeep = value => baseClone(value, true);\nexport const isEmpty = value => {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) && (Array.isArray(value) || typeof value === 'string' || typeof value.splice === 'function' || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  const tag = getTag(value);\n  if (tag == '[object Map]' || tag == '[object Set]') {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (const key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n};\nexport const isEqual = (object, other) => baseIsEqual(object, other);\nexport const isFunction = value => typeof value === 'function';\nexport const isPlainObject = value => {\n  if (!isObjectLike(value) || getTag(value) != '[object Object]') {\n    return false;\n  }\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n  let proto = value;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(value) === proto;\n};\nexport const toArray = value => {\n  if (!value) {\n    return [];\n  }\n  if (isArrayLike(value)) {\n    return isString(value) ? stringToArray(value) : copyArray(value);\n  }\n  if (Symbol.iterator && Symbol.iterator in Object(value)) {\n    const iterator = value[Symbol.iterator]();\n    let data;\n    const result = [];\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n  const tag = getTag(value);\n  const func = tag == mapTag ? mapToArray : tag == setTag ? setToArray : values;\n  return func(value);\n};\nexport function debounce(func, wait, opt) {\n  if (typeof func !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n  let lastArgs;\n  let lastThis;\n  let maxWait;\n  let result;\n  let timerId;\n  let lastCallTime;\n  let lastInvokeTime = 0;\n  let leading = false;\n  let maxing = false;\n  let trailing = true;\n  const useRaf = !wait && wait !== 0 && window && typeof window.requestAnimationFrame === 'function';\n  wait = +wait || 0;\n  if (isObject(opt)) {\n    leading = !!opt.leading;\n    maxing = 'maxWait' in opt;\n    maxWait = maxing ? Math.max(+opt.maxWait || 0, wait) : maxWait;\n    trailing = 'trailing' in opt ? !!opt.trailing : trailing;\n  }\n  function invokeFunc(time) {\n    const args = lastArgs;\n    const thisArg = lastThis;\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n  function startTimer(pendingFunc, wait) {\n    if (useRaf) {\n      window.cancelAnimationFrame(timerId);\n      return window.requestAnimationFrame(pendingFunc);\n    }\n    return setTimeout(pendingFunc, wait);\n  }\n  function cancelTimer(id) {\n    if (useRaf) {\n      return window.cancelAnimationFrame(id);\n    }\n    clearTimeout(id);\n  }\n  function leadingEdge(time) {\n    lastInvokeTime = time;\n    timerId = startTimer(timerExpired, wait);\n    return leading ? invokeFunc(time) : result;\n  }\n  function remainingWait(time) {\n    const timeSinceLastCall = time - lastCallTime;\n    const timeSinceLastInvoke = time - lastInvokeTime;\n    const timeWaiting = wait - timeSinceLastCall;\n    return maxing ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n  }\n  function shouldInvoke(time) {\n    const timeSinceLastCall = time - lastCallTime;\n    const timeSinceLastInvoke = time - lastInvokeTime;\n    return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n  function timerExpired() {\n    const time = Date.now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    timerId = startTimer(timerExpired, remainingWait(time));\n  }\n  function trailingEdge(time) {\n    timerId = undefined;\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n  function debounced(...args) {\n    const time = Date.now();\n    const isInvoking = shouldInvoke(time);\n    lastArgs = args;\n    lastThis = this;\n    lastCallTime = time;\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        timerId = startTimer(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = startTimer(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = () => {\n    if (timerId !== undefined) {\n      cancelTimer(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  };\n  debounced.flush = () => timerId === undefined ? result : trailingEdge(Date.now());\n  debounced.pending = () => timerId !== undefined;\n  return debounced;\n}\nexport const groupBy = (collection, iteratee) => {\n  iteratee = getIteratee(iteratee, 2);\n  return reduce(collection, (result, value, key) => {\n    key = iteratee(value);\n    if (hasOwnProperty.call(result, key)) {\n      result[key].push(value);\n    } else {\n      assignValue(result, key, [value]);\n    }\n    return result;\n  }, {});\n};\nexport const sortBy = (collection, iteratees = []) => {\n  if (collection == null) {\n    return [];\n  }\n  const length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  if (!Array.isArray(iteratees)) {\n    iteratees = [getIteratee(iteratees, 2)];\n  }\n  return baseOrderBy(collection, iteratees.flat(1), []);\n};\nexport const flattenDeep = array => {\n  const length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, Infinity) : [];\n};\nexport const without = (array, ...values) => isArrayLike(array) ? diff(array, values) : [];\nexport const difference = (array, ...values) => isObjectLike(array) && isArrayLike(array) ? diff(array, values.flat(1)) : [];\nexport const intersection = (...arrays) => {\n  const mapped = arrays.map(array => isObjectLike(array) && isArrayLike(array) ? array : []);\n  return mapped.length && mapped[0] === arrays[0] ? intersect(mapped) : [];\n};\nexport const union = (...arrays) => {\n  const array = arrays.flat(1);\n  return uniq(array);\n};\nexport const has = (object, key) => {\n  if (object == null) {\n    return false;\n  }\n  if (typeof key === 'string') {\n    key = key.split('.');\n  }\n  let index = -1;\n  let value = object;\n  while (++index < key.length) {\n    if (!value || !hasOwnProperty.call(value, key[index])) {\n      return false;\n    }\n    value = value[key[index]];\n  }\n  return true;\n};\nexport const result = (object, path, defaultValue) => {\n  path = castPath(path, object);\n  let index = -1;\n  let length = path.length;\n  if (!length) {\n    length = 1;\n    object = undefined;\n  }\n  while (++index < length) {\n    let value = object == null ? undefined : object[toKey(path[index])];\n    if (value === undefined) {\n      index = length;\n      value = defaultValue;\n    }\n    object = typeof value === 'function' ? value.call(object) : value;\n  }\n  return object;\n};\nexport const omit = (object, ...paths) => {\n  let result = {};\n  if (object == null) {\n    return result;\n  }\n  let isDeep = false;\n  paths = paths.flat(1).map(path => {\n    path = castPath(path, object);\n    isDeep || (isDeep = path.length > 1);\n    return path;\n  });\n  copyObject(object, getAllKeysIn(object), result);\n  if (isDeep) {\n    result = baseClone(result, true, true, true, value => isPlainObject(value) ? undefined : value);\n  }\n  let length = paths.length;\n  while (length--) {\n    unset(result, paths[length]);\n  }\n  return result;\n};\nexport const pick = (object, ...paths) => {\n  return object == null ? {} : basePick(object, paths.flat(Infinity));\n};\nexport const bindAll = (object, ...methodNames) => {\n  methodNames.flat(1).forEach(key => {\n    key = toKey(key);\n    assignValue(object, key, object[key].bind(object));\n  });\n  return object;\n};\nexport const forIn = (object, iteratee = value => value) => {\n  let index = -1;\n  const iterable = Object(object);\n  const props = isArrayLike(object) ? arrayLikeKeys(object, true) : keysIn(object);\n  let length = props.length;\n  while (length--) {\n    const key = props[++index];\n    if (iteratee(iterable[key], key, iterable) === false) {\n      break;\n    }\n  }\n};\nexport const camelCase = (string = '') => words(`${string}`.replace(/['\\u2019]/g, '')).reduce((result, word, index) => {\n  word = word.toLowerCase();\n  return result + (index ? upperFirst(word) : word);\n}, '');\nlet idCounter = 0;\nexport const uniqueId = (prefix = '') => {\n  const id = ++idCounter;\n  return `${prefix}` + id;\n};\nexport const merge = createAssigner((object, source, srcIndex, customizer) => {\n  baseMerge(object, source, srcIndex, customizer);\n}, true);", "import { uniq, toArray, isEmpty } from './util.mjs';\n\n// Clone `cells` returning an object that maps the original cell ID to the clone. The number\n// of clones is exactly the same as the `cells.length`.\n// This function simply clones all the `cells`. However, it also reconstructs\n// all the `source/target` and `parent/embed` references within the `cells`.\n// This is the main difference from the `cell.clone()` method. The\n// `cell.clone()` method works on one single cell only.\n// For example, for a graph: `A --- L ---> B`, `cloneCells([A, L, B])`\n// returns `[A2, L2, B2]` resulting to a graph: `A2 --- L2 ---> B2`, i.e.\n// the source and target of the link `L2` is changed to point to `A2` and `B2`.\nexport function cloneCells(cells) {\n  cells = uniq(cells);\n\n  // A map of the form [original cell ID] -> [clone] helping\n  // us to reconstruct references for source/target and parent/embeds.\n  // This is also the returned value.\n  const cloneMap = toArray(cells).reduce(function (map, cell) {\n    map[cell.id] = cell.clone();\n    return map;\n  }, {});\n  toArray(cells).forEach(function (cell) {\n    const clone = cloneMap[cell.id];\n    // assert(clone exists)\n\n    if (clone.isLink()) {\n      const source = clone.source();\n      const target = clone.target();\n      if (source.id && cloneMap[source.id]) {\n        // Source points to an element and the element is among the clones.\n        // => Update the source of the cloned link.\n        clone.prop('source/id', cloneMap[source.id].id);\n      }\n      if (target.id && cloneMap[target.id]) {\n        // Target points to an element and the element is among the clones.\n        // => Update the target of the cloned link.\n        clone.prop('target/id', cloneMap[target.id].id);\n      }\n    }\n\n    // Find the parent of the original cell\n    const parent = cell.get('parent');\n    if (parent && cloneMap[parent]) {\n      clone.set('parent', cloneMap[parent].id);\n    }\n\n    // Find the embeds of the original cell\n    const embeds = toArray(cell.get('embeds')).reduce(function (newEmbeds, embed) {\n      // Embedded cells that are not being cloned can not be carried\n      // over with other embedded cells.\n      if (cloneMap[embed]) {\n        newEmbeds.push(cloneMap[embed].id);\n      }\n      return newEmbeds;\n    }, []);\n    if (!isEmpty(embeds)) {\n      clone.set('embeds', embeds);\n    }\n  });\n  return cloneMap;\n}", "import { isPlainObject } from '../../util/util.mjs';\nconst validPropertiesList = ['checked', 'selected', 'disabled', 'readOnly', 'contentEditable', 'value', 'indeterminate'];\nconst validProperties = validPropertiesList.reduce((acc, key) => {\n  acc[key] = true;\n  return acc;\n}, {});\nconst props = {\n  qualify: function (properties) {\n    return isPlainObject(properties);\n  },\n  set: function (properties, _, node) {\n    Object.keys(properties).forEach(function (key) {\n      if (validProperties[key] && key in node) {\n        const value = properties[key];\n        if (node.tagName === 'SELECT' && Array.isArray(value)) {\n          Array.from(node.options).forEach(function (option, index) {\n            option.selected = value.includes(option.value);\n          });\n        } else {\n          node[key] = value;\n        }\n      }\n    });\n  }\n};\nexport default props;", "import { Point, Path, Polyline } from '../../g/index.mjs';\nimport { assign, isPlainObject, isObject, isPercentage, breakText } from '../../util/util.mjs';\nimport { isCalcAttribute, evalCalcAttribute } from './calc.mjs';\nimport props from './props.mjs';\nimport $ from 'jquery';\nimport V from '../../V/index.mjs';\nfunction setWrapper(attrName, dimension) {\n  return function (value, refBBox) {\n    var isValuePercentage = isPercentage(value);\n    value = parseFloat(value);\n    if (isValuePercentage) {\n      value /= 100;\n    }\n    var attrs = {};\n    if (isFinite(value)) {\n      var attrValue = isValuePercentage || value >= 0 && value <= 1 ? value * refBBox[dimension] : Math.max(value + refBBox[dimension], 0);\n      attrs[attrName] = attrValue;\n    }\n    return attrs;\n  };\n}\nfunction positionWrapper(axis, dimension, origin) {\n  return function (value, refBBox) {\n    var valuePercentage = isPercentage(value);\n    value = parseFloat(value);\n    if (valuePercentage) {\n      value /= 100;\n    }\n    var delta;\n    if (isFinite(value)) {\n      var refOrigin = refBBox[origin]();\n      if (valuePercentage || value > 0 && value < 1) {\n        delta = refOrigin[axis] + refBBox[dimension] * value;\n      } else {\n        delta = refOrigin[axis] + value;\n      }\n    }\n    var point = Point();\n    point[axis] = delta || 0;\n    return point;\n  };\n}\nfunction offsetWrapper(axis, dimension, corner) {\n  return function (value, nodeBBox) {\n    var delta;\n    if (value === 'middle') {\n      delta = nodeBBox[dimension] / 2;\n    } else if (value === corner) {\n      delta = nodeBBox[dimension];\n    } else if (isFinite(value)) {\n      // TODO: or not to do a breaking change?\n      delta = value > -1 && value < 1 ? -nodeBBox[dimension] * value : -value;\n    } else if (isPercentage(value)) {\n      delta = nodeBBox[dimension] * parseFloat(value) / 100;\n    } else {\n      delta = 0;\n    }\n    var point = Point();\n    point[axis] = -(nodeBBox[axis] + delta);\n    return point;\n  };\n}\nfunction shapeWrapper(shapeConstructor, opt) {\n  var cacheName = 'joint-shape';\n  var resetOffset = opt && opt.resetOffset;\n  return function (value, refBBox, node) {\n    var $node = $(node);\n    var cache = $node.data(cacheName);\n    if (!cache || cache.value !== value) {\n      // only recalculate if value has changed\n      var cachedShape = shapeConstructor(value);\n      cache = {\n        value: value,\n        shape: cachedShape,\n        shapeBBox: cachedShape.bbox()\n      };\n      $node.data(cacheName, cache);\n    }\n    var shape = cache.shape.clone();\n    var shapeBBox = cache.shapeBBox.clone();\n    var shapeOrigin = shapeBBox.origin();\n    var refOrigin = refBBox.origin();\n    shapeBBox.x = refOrigin.x;\n    shapeBBox.y = refOrigin.y;\n    var fitScale = refBBox.maxRectScaleToFit(shapeBBox, refOrigin);\n    // `maxRectScaleToFit` can give Infinity if width or height is 0\n    var sx = shapeBBox.width === 0 || refBBox.width === 0 ? 1 : fitScale.sx;\n    var sy = shapeBBox.height === 0 || refBBox.height === 0 ? 1 : fitScale.sy;\n    shape.scale(sx, sy, shapeOrigin);\n    if (resetOffset) {\n      shape.translate(-shapeOrigin.x, -shapeOrigin.y);\n    }\n    return shape;\n  };\n}\n\n// `d` attribute for SVGPaths\nfunction dWrapper(opt) {\n  function pathConstructor(value) {\n    return new Path(V.normalizePathData(value));\n  }\n  var shape = shapeWrapper(pathConstructor, opt);\n  return function (value, refBBox, node) {\n    var path = shape(value, refBBox, node);\n    return {\n      d: path.serialize()\n    };\n  };\n}\n\n// `points` attribute for SVGPolylines and SVGPolygons\nfunction pointsWrapper(opt) {\n  var shape = shapeWrapper(Polyline, opt);\n  return function (value, refBBox, node) {\n    var polyline = shape(value, refBBox, node);\n    return {\n      points: polyline.serialize()\n    };\n  };\n}\nfunction atConnectionWrapper(method, opt) {\n  var zeroVector = new Point(1, 0);\n  return function (value) {\n    var p, angle;\n    var tangent = this[method](value);\n    if (tangent) {\n      angle = opt.rotate ? tangent.vector().vectorAngle(zeroVector) : 0;\n      p = tangent.start;\n    } else {\n      p = this.path.start;\n      angle = 0;\n    }\n    if (angle === 0) return {\n      transform: 'translate(' + p.x + ',' + p.y + ')'\n    };\n    return {\n      transform: 'translate(' + p.x + ',' + p.y + ') rotate(' + angle + ')'\n    };\n  };\n}\nfunction setIfChangedWrapper(attribute) {\n  return function setIfChanged(value, _, node) {\n    const vel = V(node);\n    if (vel.attr(attribute) === value) return;\n    vel.attr(attribute, value);\n  };\n}\nfunction isTextInUse(_value, _node, attrs) {\n  return attrs.text !== undefined;\n}\nfunction isLinkView() {\n  return this.model.isLink();\n}\nfunction contextMarker(context) {\n  var marker = {};\n  // Stroke\n  // The context 'fill' is disregared here. The usual case is to use the marker with a connection\n  // (for which 'fill' attribute is set to 'none').\n  var stroke = context.stroke;\n  if (typeof stroke === 'string') {\n    marker['stroke'] = stroke;\n    marker['fill'] = stroke;\n  }\n  // Opacity\n  // Again the context 'fill-opacity' is ignored.\n  var strokeOpacity = context.strokeOpacity;\n  if (strokeOpacity === undefined) strokeOpacity = context['stroke-opacity'];\n  if (strokeOpacity === undefined) strokeOpacity = context.opacity;\n  if (strokeOpacity !== undefined) {\n    marker['stroke-opacity'] = strokeOpacity;\n    marker['fill-opacity'] = strokeOpacity;\n  }\n  return marker;\n}\nfunction setPaintURL(def) {\n  const {\n    paper\n  } = this;\n  const url = def.type === 'pattern' ? paper.definePattern(def) : paper.defineGradient(def);\n  return `url(#${url})`;\n}\nconst attributesNS = {\n  xlinkShow: {\n    set: 'xlink:show'\n  },\n  xlinkRole: {\n    set: 'xlink:role'\n  },\n  xlinkType: {\n    set: 'xlink:type'\n  },\n  xlinkArcrole: {\n    set: 'xlink:arcrole'\n  },\n  xlinkTitle: {\n    set: 'xlink:title'\n  },\n  xlinkActuate: {\n    set: 'xlink:actuate'\n  },\n  xmlSpace: {\n    set: 'xml:space'\n  },\n  xmlBase: {\n    set: 'xml:base'\n  },\n  xmlLang: {\n    set: 'xml:lang'\n  },\n  preserveAspectRatio: {\n    set: 'preserveAspectRatio'\n  },\n  requiredExtension: {\n    set: 'requiredExtension'\n  },\n  requiredFeatures: {\n    set: 'requiredFeatures'\n  },\n  systemLanguage: {\n    set: 'systemLanguage'\n  },\n  externalResourcesRequired: {\n    set: 'externalResourceRequired'\n  },\n  href: {\n    set: setIfChangedWrapper('href')\n  },\n  xlinkHref: {\n    set: setIfChangedWrapper('xlink:href')\n  },\n  filter: {\n    qualify: isPlainObject,\n    set: function (filter) {\n      return 'url(#' + this.paper.defineFilter(filter) + ')';\n    }\n  },\n  fill: {\n    qualify: isPlainObject,\n    set: setPaintURL\n  },\n  stroke: {\n    qualify: isPlainObject,\n    set: setPaintURL\n  },\n  sourceMarker: {\n    qualify: isPlainObject,\n    set: function (marker, refBBox, node, attrs) {\n      marker = assign(contextMarker(attrs), marker);\n      return {\n        'marker-start': 'url(#' + this.paper.defineMarker(marker) + ')'\n      };\n    }\n  },\n  targetMarker: {\n    qualify: isPlainObject,\n    set: function (marker, refBBox, node, attrs) {\n      marker = assign(contextMarker(attrs), {\n        'transform': 'rotate(180)'\n      }, marker);\n      return {\n        'marker-end': 'url(#' + this.paper.defineMarker(marker) + ')'\n      };\n    }\n  },\n  vertexMarker: {\n    qualify: isPlainObject,\n    set: function (marker, refBBox, node, attrs) {\n      marker = assign(contextMarker(attrs), marker);\n      return {\n        'marker-mid': 'url(#' + this.paper.defineMarker(marker) + ')'\n      };\n    }\n  },\n  text: {\n    qualify: function (_text, _node, attrs) {\n      return !attrs.textWrap || !isPlainObject(attrs.textWrap);\n    },\n    set: function (text, refBBox, node, attrs) {\n      const $node = $(node);\n      const cacheName = 'joint-text';\n      const cache = $node.data(cacheName);\n      const {\n        lineHeight,\n        annotations,\n        textVerticalAnchor,\n        eol,\n        displayEmpty\n      } = attrs;\n      let textPath = attrs.textPath;\n      // eval `x` if using calc()\n      let x = attrs.x;\n      if (isCalcAttribute(x)) {\n        x = evalCalcAttribute(x, refBBox);\n      }\n      // eval `font-size` if using calc()\n      let fontSize = attrs['font-size'] || attrs['fontSize'];\n      if (isCalcAttribute(fontSize)) {\n        fontSize = evalCalcAttribute(fontSize, refBBox);\n      }\n      // Update the text only if there was a change in the string\n      // or any of its attributes.\n      const textHash = JSON.stringify([text, lineHeight, annotations, textVerticalAnchor, eol, displayEmpty, textPath, x, fontSize]);\n      if (cache === undefined || cache !== textHash) {\n        // Chrome bug:\n        // <tspan> positions defined as `em` are not updated\n        // when container `font-size` change.\n        if (fontSize) node.setAttribute('font-size', fontSize);\n        // Text Along Path Selector\n        if (isObject(textPath)) {\n          const pathSelector = textPath.selector;\n          if (typeof pathSelector === 'string') {\n            const [pathNode] = this.findBySelector(pathSelector);\n            if (pathNode instanceof SVGPathElement) {\n              textPath = assign({\n                'xlink:href': '#' + pathNode.id\n              }, textPath);\n            }\n          }\n        }\n        V(node).text('' + text, {\n          lineHeight,\n          annotations,\n          textPath,\n          x,\n          textVerticalAnchor,\n          eol,\n          displayEmpty\n        });\n        $node.data(cacheName, textHash);\n      }\n    }\n  },\n  textWrap: {\n    qualify: isPlainObject,\n    set: function (value, refBBox, node, attrs) {\n      var size = {};\n      // option `width`\n      var width = value.width || 0;\n      if (isPercentage(width)) {\n        size.width = refBBox.width * parseFloat(width) / 100;\n      } else if (isCalcAttribute(width)) {\n        size.width = Number(evalCalcAttribute(width, refBBox));\n      } else {\n        if (value.width === null) {\n          // breakText() requires width to be specified.\n          size.width = Infinity;\n        } else if (width <= 0) {\n          size.width = refBBox.width + width;\n        } else {\n          size.width = width;\n        }\n      }\n      // option `height`\n      var height = value.height || 0;\n      if (isPercentage(height)) {\n        size.height = refBBox.height * parseFloat(height) / 100;\n      } else if (isCalcAttribute(height)) {\n        size.height = Number(evalCalcAttribute(height, refBBox));\n      } else {\n        if (value.height === null) {\n          // if height is not specified breakText() does not\n          // restrict the height of the text.\n        } else if (height <= 0) {\n          size.height = refBBox.height + height;\n        } else {\n          size.height = height;\n        }\n      }\n      // option `text`\n      var wrappedText;\n      var text = value.text;\n      if (text === undefined) text = attrs.text;\n      if (text !== undefined) {\n        const breakTextFn = value.breakText || breakText;\n        const fontSizeAttr = attrs['font-size'] || attrs.fontSize;\n        wrappedText = breakTextFn('' + text, size, {\n          'font-weight': attrs['font-weight'] || attrs.fontWeight,\n          'font-size': isCalcAttribute(fontSizeAttr) ? evalCalcAttribute(fontSizeAttr, refBBox) : fontSizeAttr,\n          'font-family': attrs['font-family'] || attrs.fontFamily,\n          'lineHeight': attrs.lineHeight,\n          'letter-spacing': 'letter-spacing' in attrs ? attrs['letter-spacing'] : attrs.letterSpacing\n        }, {\n          // Provide an existing SVG Document here\n          // instead of creating a temporary one over again.\n          svgDocument: this.paper.svg,\n          ellipsis: value.ellipsis,\n          hyphen: value.hyphen,\n          separator: value.separator,\n          maxLineCount: value.maxLineCount,\n          preserveSpaces: value.preserveSpaces\n        });\n      } else {\n        wrappedText = '';\n      }\n      attributesNS.text.set.call(this, wrappedText, refBBox, node, attrs);\n    }\n  },\n  title: {\n    qualify: function (title, node) {\n      // HTMLElement title is specified via an attribute (i.e. not an element)\n      return node instanceof SVGElement;\n    },\n    set: function (title, refBBox, node) {\n      var $node = $(node);\n      var cacheName = 'joint-title';\n      var cache = $node.data(cacheName);\n      if (cache === undefined || cache !== title) {\n        $node.data(cacheName, title);\n        if (node.tagName === 'title') {\n          // The target node is a <title> element.\n          node.textContent = title;\n          return;\n        }\n        // Generally <title> element should be the first child element of its parent.\n        var firstChild = node.firstElementChild;\n        if (firstChild && firstChild.tagName === 'title') {\n          // Update an existing title\n          firstChild.textContent = title;\n        } else {\n          // Create a new title\n          var titleNode = document.createElementNS(node.namespaceURI, 'title');\n          titleNode.textContent = title;\n          node.insertBefore(titleNode, firstChild);\n        }\n      }\n    }\n  },\n  lineHeight: {\n    qualify: isTextInUse\n  },\n  textVerticalAnchor: {\n    qualify: isTextInUse\n  },\n  textPath: {\n    qualify: isTextInUse\n  },\n  annotations: {\n    qualify: isTextInUse\n  },\n  eol: {\n    qualify: isTextInUse\n  },\n  displayEmpty: {\n    qualify: isTextInUse\n  },\n  // `port` attribute contains the `id` of the port that the underlying magnet represents.\n  port: {\n    set: function (port) {\n      return port === null || port.id === undefined ? port : port.id;\n    }\n  },\n  // `style` attribute is special in the sense that it sets the CSS style of the subelement.\n  style: {\n    qualify: isPlainObject,\n    set: function (styles, refBBox, node) {\n      $(node).css(styles);\n    }\n  },\n  html: {\n    set: function (html, refBBox, node) {\n      $(node).html(html + '');\n    }\n  },\n  // Properties setter (set various properties on the node)\n  props,\n  ref: {\n    // We do not set `ref` attribute directly on an element.\n    // The attribute itself does not qualify for relative positioning.\n  },\n  // if `refX` is in [0, 1] then `refX` is a fraction of bounding box width\n  // if `refX` is < 0 then `refX`'s absolute values is the right coordinate of the bounding box\n  // otherwise, `refX` is the left coordinate of the bounding box\n\n  refX: {\n    position: positionWrapper('x', 'width', 'origin')\n  },\n  refY: {\n    position: positionWrapper('y', 'height', 'origin')\n  },\n  // `ref-dx` and `ref-dy` define the offset of the subelement relative to the right and/or bottom\n  // coordinate of the reference element.\n\n  refDx: {\n    position: positionWrapper('x', 'width', 'corner')\n  },\n  refDy: {\n    position: positionWrapper('y', 'height', 'corner')\n  },\n  // 'ref-width'/'ref-height' defines the width/height of the subelement relatively to\n  // the reference element size\n  // val in 0..1         ref-width = 0.75 sets the width to 75% of the ref. el. width\n  // val < 0 || val > 1  ref-height = -20 sets the height to the ref. el. height shorter by 20\n\n  refWidth: {\n    set: setWrapper('width', 'width')\n  },\n  refHeight: {\n    set: setWrapper('height', 'height')\n  },\n  refRx: {\n    set: setWrapper('rx', 'width')\n  },\n  refRy: {\n    set: setWrapper('ry', 'height')\n  },\n  refRInscribed: {\n    set: function (attrName) {\n      var widthFn = setWrapper(attrName, 'width');\n      var heightFn = setWrapper(attrName, 'height');\n      return function (value, refBBox) {\n        var fn = refBBox.height > refBBox.width ? widthFn : heightFn;\n        return fn(value, refBBox);\n      };\n    }('r')\n  },\n  refRCircumscribed: {\n    set: function (value, refBBox) {\n      var isValuePercentage = isPercentage(value);\n      value = parseFloat(value);\n      if (isValuePercentage) {\n        value /= 100;\n      }\n      var diagonalLength = Math.sqrt(refBBox.height * refBBox.height + refBBox.width * refBBox.width);\n      var rValue;\n      if (isFinite(value)) {\n        if (isValuePercentage || value >= 0 && value <= 1) rValue = value * diagonalLength;else rValue = Math.max(value + diagonalLength, 0);\n      }\n      return {\n        r: rValue\n      };\n    }\n  },\n  refCx: {\n    set: setWrapper('cx', 'width')\n  },\n  refCy: {\n    set: setWrapper('cy', 'height')\n  },\n  // `x-alignment` when set to `middle` causes centering of the subelement around its new x coordinate.\n  // `x-alignment` when set to `right` uses the x coordinate as referenced to the right of the bbox.\n\n  xAlignment: {\n    offset: offsetWrapper('x', 'width', 'right')\n  },\n  // `y-alignment` when set to `middle` causes centering of the subelement around its new y coordinate.\n  // `y-alignment` when set to `bottom` uses the y coordinate as referenced to the bottom of the bbox.\n\n  yAlignment: {\n    offset: offsetWrapper('y', 'height', 'bottom')\n  },\n  resetOffset: {\n    offset: function (val, nodeBBox) {\n      return val ? {\n        x: -nodeBBox.x,\n        y: -nodeBBox.y\n      } : {\n        x: 0,\n        y: 0\n      };\n    }\n  },\n  refDResetOffset: {\n    set: dWrapper({\n      resetOffset: true\n    })\n  },\n  refDKeepOffset: {\n    set: dWrapper({\n      resetOffset: false\n    })\n  },\n  refPointsResetOffset: {\n    set: pointsWrapper({\n      resetOffset: true\n    })\n  },\n  refPointsKeepOffset: {\n    set: pointsWrapper({\n      resetOffset: false\n    })\n  },\n  // LinkView Attributes\n\n  connection: {\n    qualify: isLinkView,\n    set: function ({\n      stubs = 0\n    }) {\n      let d;\n      if (isFinite(stubs) && stubs !== 0) {\n        let offset;\n        if (stubs < 0) {\n          offset = (this.getConnectionLength() + stubs) / 2;\n        } else {\n          offset = stubs;\n        }\n        const path = this.getConnection();\n        const segmentSubdivisions = this.getConnectionSubdivisions();\n        const sourceParts = path.divideAtLength(offset, {\n          segmentSubdivisions\n        });\n        const targetParts = path.divideAtLength(-offset, {\n          segmentSubdivisions\n        });\n        if (sourceParts && targetParts) {\n          d = `${sourceParts[0].serialize()} ${targetParts[1].serialize()}`;\n        }\n      }\n      return {\n        d: d || this.getSerializedConnection()\n      };\n    }\n  },\n  atConnectionLengthKeepGradient: {\n    qualify: isLinkView,\n    set: atConnectionWrapper('getTangentAtLength', {\n      rotate: true\n    })\n  },\n  atConnectionLengthIgnoreGradient: {\n    qualify: isLinkView,\n    set: atConnectionWrapper('getTangentAtLength', {\n      rotate: false\n    })\n  },\n  atConnectionRatioKeepGradient: {\n    qualify: isLinkView,\n    set: atConnectionWrapper('getTangentAtRatio', {\n      rotate: true\n    })\n  },\n  atConnectionRatioIgnoreGradient: {\n    qualify: isLinkView,\n    set: atConnectionWrapper('getTangentAtRatio', {\n      rotate: false\n    })\n  }\n};\nattributesNS['xlink:href'] = attributesNS.xlinkHref;\n\n// Support `calc()` with the following SVG attributes\n['transform',\n// g\n'd',\n// path\n'points',\n// polyline / polygon\n'cx', 'cy',\n// circle / ellipse\n'x1', 'x2', 'y1', 'y2',\n// line\n'x', 'y',\n// rect / text / image\n'dx', 'dy' // text\n].forEach(attribute => {\n  attributesNS[attribute] = {\n    qualify: isCalcAttribute,\n    set: function setCalcAttribute(value, refBBox) {\n      return {\n        [attribute]: evalCalcAttribute(value, refBBox)\n      };\n    }\n  };\n});\n\n// Prevent \"A negative value is not valid\" error.\n['width', 'height',\n// rect / image\n'r',\n// circle\n'rx', 'ry',\n// rect / ellipse\n'font-size',\n// text\n'stroke-width' // elements\n].forEach(attribute => {\n  attributesNS[attribute] = {\n    qualify: isCalcAttribute,\n    set: function setCalcAttribute(value, refBBox) {\n      return {\n        [attribute]: Math.max(0, evalCalcAttribute(value, refBBox))\n      };\n    }\n  };\n});\n\n// Aliases\nattributesNS.refR = attributesNS.refRInscribed;\nattributesNS.refD = attributesNS.refDResetOffset;\nattributesNS.refPoints = attributesNS.refPointsResetOffset;\nattributesNS.atConnectionLength = attributesNS.atConnectionLengthKeepGradient;\nattributesNS.atConnectionRatio = attributesNS.atConnectionRatioKeepGradient;\nattributesNS.fontSize = attributesNS['font-size'];\nattributesNS.strokeWidth = attributesNS['stroke-width'];\n\n// This allows to combine both absolute and relative positioning\n// refX: 50%, refX2: 20\nattributesNS.refX2 = attributesNS.refX;\nattributesNS.refY2 = attributesNS.refY;\nattributesNS.refWidth2 = attributesNS.refWidth;\nattributesNS.refHeight2 = attributesNS.refHeight;\n\n// Aliases for backwards compatibility\nattributesNS['ref-x'] = attributesNS.refX;\nattributesNS['ref-y'] = attributesNS.refY;\nattributesNS['ref-dy'] = attributesNS.refDy;\nattributesNS['ref-dx'] = attributesNS.refDx;\nattributesNS['ref-width'] = attributesNS.refWidth;\nattributesNS['ref-height'] = attributesNS.refHeight;\nattributesNS['x-alignment'] = attributesNS.xAlignment;\nattributesNS['y-alignment'] = attributesNS.yAlignment;\nexport const attributes = attributesNS;", "import { Cell } from '../dia/Cell.mjs';\nimport { isFunction, isString, toArray } from './util.mjs';\nexport const wrapWith = function (object, methods, wrapper) {\n  if (isString(wrapper)) {\n    if (!wrappers[wrapper]) {\n      throw new Error('Unknown wrapper: \"' + wrapper + '\"');\n    }\n    wrapper = wrappers[wrapper];\n  }\n  if (!isFunction(wrapper)) {\n    throw new Error('Wrapper must be a function.');\n  }\n  toArray(methods).forEach(function (method) {\n    object[method] = wrapper(object[method]);\n  });\n};\nexport const wrappers = {\n  cells: function (fn) {\n    return function () {\n      var args = Array.from(arguments);\n      var n = args.length;\n      var cells = n > 0 && args[0] || [];\n      var opt = n > 1 && args[n - 1] || {};\n      if (!Array.isArray(cells)) {\n        if (opt instanceof Cell) {\n          cells = args;\n        } else if (cells instanceof Cell) {\n          if (args.length > 1) {\n            args.pop();\n          }\n          cells = args;\n        }\n      }\n      if (opt instanceof Cell) {\n        opt = {};\n      }\n      return fn.call(this, cells, opt);\n    };\n  }\n};", "import V from '../V/index.mjs';\nexport function svg(strings, ...expressions) {\n  const svgParts = [];\n  strings.forEach((part, index) => {\n    svgParts.push(part);\n    if (index in expressions) {\n      svgParts.push(expressions[index]);\n    }\n  });\n  const markup = parseFromSVGString(svgParts.join(''));\n  return markup;\n}\nfunction parseFromSVGString(str) {\n  const parser = new DOMParser();\n  const markupString = `<svg>${str.trim()}</svg>`;\n  const xmldocument = parser.parseFromString(markupString.replace(/@/g, ''), 'application/xml');\n  if (xmldocument.getElementsByTagName('parsererror')[0]) {\n    throw new Error('Invalid SVG markup');\n  }\n  const document = parser.parseFromString(markupString, 'text/html');\n  const svg = document.querySelector('svg');\n  return build(svg);\n}\nfunction buildNode(node) {\n  const markupNode = {};\n  const {\n    tagName,\n    attributes,\n    namespaceURI,\n    style,\n    childNodes\n  } = node;\n  markupNode.namespaceURI = namespaceURI;\n  markupNode.tagName = namespaceURI === V.namespace.xhtml\n  // XHTML documents must use lower case for all HTML element and attribute names.\n  // The tagName property returns upper case value for HTML elements.\n  // e.g. <DIV> vs.<div/>\n  ? tagName.toLowerCase() : tagName;\n  const stylesObject = {};\n  for (var i = style.length; i--;) {\n    var nameString = style[i];\n    stylesObject[nameString] = style.getPropertyValue(nameString);\n  }\n  markupNode.style = stylesObject;\n\n  // selector fallbacks to tagName\n  const selectorAttribute = attributes.getNamedItem('@selector');\n  if (selectorAttribute) {\n    markupNode.selector = selectorAttribute.value;\n    attributes.removeNamedItem('@selector');\n  }\n  const groupSelectorAttribute = attributes.getNamedItem('@group-selector');\n  if (groupSelectorAttribute) {\n    const groupSelectors = groupSelectorAttribute.value.split(',');\n    markupNode.groupSelector = groupSelectors.map(s => s.trim());\n    attributes.removeNamedItem('@group-selector');\n  }\n  const className = attributes.getNamedItem('class');\n  if (className) {\n    markupNode.className = className.value;\n  }\n  const children = [];\n  childNodes.forEach(node => {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE:\n        {\n          const trimmedText = node.data.replace(/\\s\\s+/g, ' ');\n          if (trimmedText.trim()) {\n            children.push(trimmedText);\n          }\n          break;\n        }\n      case Node.ELEMENT_NODE:\n        {\n          children.push(buildNode(node));\n          break;\n        }\n      default:\n        break;\n    }\n  });\n  if (children.length) {\n    markupNode.children = children;\n  }\n  const nodeAttrs = {};\n  Array.from(attributes).forEach(nodeAttribute => {\n    const {\n      name,\n      value\n    } = nodeAttribute;\n    nodeAttrs[name] = value;\n  });\n  if (Object.keys(nodeAttrs).length > 0) {\n    markupNode.attributes = nodeAttrs;\n  }\n  return markupNode;\n}\nfunction build(root) {\n  const markup = [];\n  Array.from(root.children).forEach(node => {\n    markup.push(buildNode(node));\n  });\n  return markup;\n}", "import * as g from '../g/index.mjs';\nexport const Positions = {\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right',\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER: 'center'\n};\nexport function getRectPoint(rect, position) {\n  const r = new g.Rect(rect);\n  switch (position) {\n    case undefined:\n      throw new Error('Position required');\n\n    // Middle Points\n    case Positions.LEFT:\n    case 'leftMiddle':\n      return r.leftMiddle();\n    case Positions.RIGHT:\n    case 'rightMiddle':\n      return r.rightMiddle();\n    case Positions.TOP:\n    case 'topMiddle':\n      return r.topMiddle();\n    case Positions.BOTTOM:\n    case 'bottomMiddle':\n      return r.bottomMiddle();\n\n    // Corners\n    case Positions.TOP_LEFT:\n    case 'topLeft':\n    case 'origin':\n      return r.topLeft();\n    case Positions.TOP_RIGHT:\n    case 'topRight':\n      return r.topRight();\n    case Positions.BOTTOM_LEFT:\n    case 'bottomLeft':\n      return r.bottomLeft();\n    case Positions.BOTTOM_RIGHT:\n    case 'bottomRight':\n    case 'corner':\n      return r.bottomRight();\n\n    // Center\n    case Positions.CENTER:\n      return r.center();\n\n    // TODO: calc(), percentage etc.\n    default:\n      throw new Error(`Unknown position: ${position}`);\n  }\n}", "import * as g from '../../g/index.mjs';\nimport * as util from '../../util/index.mjs';\nfunction labelAttributes(opt1, opt2) {\n  // use value from `opt2` if it is missing in `opt1`\n  // use value from this object if it is missing in `opt2` as well\n  return util.defaultsDeep({}, opt1, opt2, {\n    x: 0,\n    y: 0,\n    angle: 0,\n    attrs: {}\n  });\n}\nfunction getBBoxAngles(elBBox) {\n  var center = elBBox.center();\n  var tl = center.theta(elBBox.origin());\n  var bl = center.theta(elBBox.bottomLeft());\n  var br = center.theta(elBBox.corner());\n  var tr = center.theta(elBBox.topRight());\n  return [tl, tr, br, bl];\n}\nfunction outsideLayout(portPosition, elBBox, autoOrient, opt) {\n  opt = util.defaults({}, opt, {\n    offset: 15\n  });\n  var angle = elBBox.center().theta(portPosition);\n  var tx, ty, y, textAnchor;\n  var offset = opt.offset;\n  var orientAngle = 0;\n  const [topLeftAngle, bottomLeftAngle, bottomRightAngle, topRightAngle] = getBBoxAngles(elBBox);\n  if (angle < bottomLeftAngle || angle > bottomRightAngle) {\n    y = '.3em';\n    tx = offset;\n    ty = 0;\n    textAnchor = 'start';\n  } else if (angle < topLeftAngle) {\n    tx = 0;\n    ty = -offset;\n    if (autoOrient) {\n      orientAngle = -90;\n      textAnchor = 'start';\n      y = '.3em';\n    } else {\n      textAnchor = 'middle';\n      y = '0';\n    }\n  } else if (angle < topRightAngle) {\n    y = '.3em';\n    tx = -offset;\n    ty = 0;\n    textAnchor = 'end';\n  } else {\n    tx = 0;\n    ty = offset;\n    if (autoOrient) {\n      orientAngle = 90;\n      textAnchor = 'start';\n      y = '.3em';\n    } else {\n      textAnchor = 'middle';\n      y = '.6em';\n    }\n  }\n  var round = Math.round;\n  return labelAttributes(opt, {\n    x: round(tx),\n    y: round(ty),\n    angle: orientAngle,\n    attrs: {\n      labelText: {\n        y,\n        textAnchor\n      }\n    }\n  });\n}\nfunction insideLayout(portPosition, elBBox, autoOrient, opt) {\n  opt = util.defaults({}, opt, {\n    offset: 15\n  });\n  var angle = elBBox.center().theta(portPosition);\n  var tx, ty, y, textAnchor;\n  var offset = opt.offset;\n  var orientAngle = 0;\n  const [topLeftAngle, bottomLeftAngle, bottomRightAngle, topRightAngle] = getBBoxAngles(elBBox);\n  if (angle < bottomLeftAngle || angle > bottomRightAngle) {\n    y = '.3em';\n    tx = -offset;\n    ty = 0;\n    textAnchor = 'end';\n  } else if (angle < topLeftAngle) {\n    tx = 0;\n    ty = offset;\n    if (autoOrient) {\n      orientAngle = 90;\n      textAnchor = 'start';\n      y = '.3em';\n    } else {\n      textAnchor = 'middle';\n      y = '.6em';\n    }\n  } else if (angle < topRightAngle) {\n    y = '.3em';\n    tx = offset;\n    ty = 0;\n    textAnchor = 'start';\n  } else {\n    tx = 0;\n    ty = -offset;\n    if (autoOrient) {\n      orientAngle = -90;\n      textAnchor = 'start';\n      y = '.3em';\n    } else {\n      textAnchor = 'middle';\n      y = '0';\n    }\n  }\n  var round = Math.round;\n  return labelAttributes(opt, {\n    x: round(tx),\n    y: round(ty),\n    angle: orientAngle,\n    attrs: {\n      labelText: {\n        y,\n        textAnchor\n      }\n    }\n  });\n}\nfunction radialLayout(portCenterOffset, autoOrient, opt) {\n  opt = util.defaults({}, opt, {\n    offset: 20\n  });\n  var origin = g.point(0, 0);\n  var angle = -portCenterOffset.theta(origin);\n  var orientAngle = angle;\n  var offset = portCenterOffset.clone().move(origin, opt.offset).difference(portCenterOffset).round();\n  var y = '.3em';\n  var textAnchor;\n  if ((angle + 90) % 180 === 0) {\n    textAnchor = autoOrient ? 'end' : 'middle';\n    if (!autoOrient && angle === -270) {\n      y = '0em';\n    }\n  } else if (angle > -270 && angle < -90) {\n    textAnchor = 'start';\n    orientAngle = angle - 180;\n  } else {\n    textAnchor = 'end';\n  }\n  var round = Math.round;\n  return labelAttributes(opt, {\n    x: round(offset.x),\n    y: round(offset.y),\n    angle: autoOrient ? orientAngle : 0,\n    attrs: {\n      labelText: {\n        y,\n        textAnchor\n      }\n    }\n  });\n}\nexport const manual = function (_portPosition, _elBBox, opt) {\n  return labelAttributes(opt);\n};\nexport const left = function (portPosition, elBBox, opt) {\n  return labelAttributes(opt, {\n    x: -15,\n    attrs: {\n      labelText: {\n        y: '.3em',\n        textAnchor: 'end'\n      }\n    }\n  });\n};\nexport const right = function (portPosition, elBBox, opt) {\n  return labelAttributes(opt, {\n    x: 15,\n    attrs: {\n      labelText: {\n        y: '.3em',\n        textAnchor: 'start'\n      }\n    }\n  });\n};\nexport const top = function (portPosition, elBBox, opt) {\n  return labelAttributes(opt, {\n    y: -15,\n    attrs: {\n      labelText: {\n        y: '0',\n        textAnchor: 'middle'\n      }\n    }\n  });\n};\nexport const bottom = function (portPosition, elBBox, opt) {\n  return labelAttributes(opt, {\n    y: 15,\n    attrs: {\n      labelText: {\n        y: '.6em',\n        textAnchor: 'middle'\n      }\n    }\n  });\n};\nexport const outsideOriented = function (portPosition, elBBox, opt) {\n  return outsideLayout(portPosition, elBBox, true, opt);\n};\nexport const outside = function (portPosition, elBBox, opt) {\n  return outsideLayout(portPosition, elBBox, false, opt);\n};\nexport const insideOriented = function (portPosition, elBBox, opt) {\n  return insideLayout(portPosition, elBBox, true, opt);\n};\nexport const inside = function (portPosition, elBBox, opt) {\n  return insideLayout(portPosition, elBBox, false, opt);\n};\nexport const radial = function (portPosition, elBBox, opt) {\n  return radialLayout(portPosition.difference(elBBox.center()), false, opt);\n};\nexport const radialOriented = function (portPosition, elBBox, opt) {\n  return radialLayout(portPosition.difference(elBBox.center()), true, opt);\n};", "export * from './Graph.mjs';\nexport * from './attributes/index.mjs';\nexport * from './PaperLayer.mjs';\nexport * from './Cell.mjs';\nexport * from './CellView.mjs';\nexport * from './Element.mjs';\nexport * from './ElementView.mjs';\nexport * from './Link.mjs';\nexport * from './LinkView.mjs';\nexport * from './Paper.mjs';\nexport * from './ToolView.mjs';\nexport * from './ToolsView.mjs';\nexport * from './HighlighterView.mjs';", "import Backbone from 'backbone';\nimport * as util from '../util/index.mjs';\nimport * as g from '../g/index.mjs';\nimport { Link } from './Link.mjs';\nimport { Element } from './Element.mjs';\nimport { wrappers, wrapWith } from '../util/wrappers.mjs';\nimport { cloneCells } from '../util/index.mjs';\nconst GraphCells = Backbone.Collection.extend({\n  initialize: function (models, opt) {\n    // Set the optional namespace where all model classes are defined.\n    if (opt.cellNamespace) {\n      this.cellNamespace = opt.cellNamespace;\n    } else {\n      /* eslint-disable no-undef */\n      this.cellNamespace = typeof joint !== 'undefined' && util.has(joint, 'shapes') ? joint.shapes : null;\n      /* eslint-enable no-undef */\n    }\n    this.graph = opt.graph;\n  },\n  model: function (attrs, opt) {\n    var collection = opt.collection;\n    var namespace = collection.cellNamespace;\n\n    // Find the model class in the namespace or use the default one.\n    var ModelClass = attrs.type === 'link' ? Link : util.getByPath(namespace, attrs.type, '.') || Element;\n    var cell = new ModelClass(attrs, opt);\n    // Add a reference to the graph. It is necessary to do this here because this is the earliest place\n    // where a new model is created from a plain JS object. For other objects, see `joint.dia.Graph>>_prepareCell()`.\n    if (!opt.dry) {\n      cell.graph = collection.graph;\n    }\n    return cell;\n  },\n  // `comparator` makes it easy to sort cells based on their `z` index.\n  comparator: function (model) {\n    return model.get('z') || 0;\n  }\n});\nexport const Graph = Backbone.Model.extend({\n  initialize: function (attrs, opt) {\n    opt = opt || {};\n\n    // Passing `cellModel` function in the options object to graph allows for\n    // setting models based on attribute objects. This is especially handy\n    // when processing JSON graphs that are in a different than JointJS format.\n    var cells = new GraphCells([], {\n      model: opt.cellModel,\n      cellNamespace: opt.cellNamespace,\n      graph: this\n    });\n    Backbone.Model.prototype.set.call(this, 'cells', cells);\n\n    // Make all the events fired in the `cells` collection available.\n    // to the outside world.\n    cells.on('all', this.trigger, this);\n\n    // Backbone automatically doesn't trigger re-sort if models attributes are changed later when\n    // they're already in the collection. Therefore, we're triggering sort manually here.\n    this.on('change:z', this._sortOnChangeZ, this);\n\n    // `joint.dia.Graph` keeps an internal data structure (an adjacency list)\n    // for fast graph queries. All changes that affect the structure of the graph\n    // must be reflected in the `al` object. This object provides fast answers to\n    // questions such as \"what are the neighbours of this node\" or \"what\n    // are the sibling links of this link\".\n\n    // Outgoing edges per node. Note that we use a hash-table for the list\n    // of outgoing edges for a faster lookup.\n    // [nodeId] -> Object [edgeId] -> true\n    this._out = {};\n    // Ingoing edges per node.\n    // [nodeId] -> Object [edgeId] -> true\n    this._in = {};\n    // `_nodes` is useful for quick lookup of all the elements in the graph, without\n    // having to go through the whole cells array.\n    // [node ID] -> true\n    this._nodes = {};\n    // `_edges` is useful for quick lookup of all the links in the graph, without\n    // having to go through the whole cells array.\n    // [edgeId] -> true\n    this._edges = {};\n    this._batches = {};\n    cells.on('add', this._restructureOnAdd, this);\n    cells.on('remove', this._restructureOnRemove, this);\n    cells.on('reset', this._restructureOnReset, this);\n    cells.on('change:source', this._restructureOnChangeSource, this);\n    cells.on('change:target', this._restructureOnChangeTarget, this);\n    cells.on('remove', this._removeCell, this);\n  },\n  _sortOnChangeZ: function () {\n    this.get('cells').sort();\n  },\n  _restructureOnAdd: function (cell) {\n    if (cell.isLink()) {\n      this._edges[cell.id] = true;\n      var {\n        source,\n        target\n      } = cell.attributes;\n      if (source.id) {\n        (this._out[source.id] || (this._out[source.id] = {}))[cell.id] = true;\n      }\n      if (target.id) {\n        (this._in[target.id] || (this._in[target.id] = {}))[cell.id] = true;\n      }\n    } else {\n      this._nodes[cell.id] = true;\n    }\n  },\n  _restructureOnRemove: function (cell) {\n    if (cell.isLink()) {\n      delete this._edges[cell.id];\n      var {\n        source,\n        target\n      } = cell.attributes;\n      if (source.id && this._out[source.id] && this._out[source.id][cell.id]) {\n        delete this._out[source.id][cell.id];\n      }\n      if (target.id && this._in[target.id] && this._in[target.id][cell.id]) {\n        delete this._in[target.id][cell.id];\n      }\n    } else {\n      delete this._nodes[cell.id];\n    }\n  },\n  _restructureOnReset: function (cells) {\n    // Normalize into an array of cells. The original `cells` is GraphCells Backbone collection.\n    cells = cells.models;\n    this._out = {};\n    this._in = {};\n    this._nodes = {};\n    this._edges = {};\n    cells.forEach(this._restructureOnAdd, this);\n  },\n  _restructureOnChangeSource: function (link) {\n    var prevSource = link.previous('source');\n    if (prevSource.id && this._out[prevSource.id]) {\n      delete this._out[prevSource.id][link.id];\n    }\n    var source = link.attributes.source;\n    if (source.id) {\n      (this._out[source.id] || (this._out[source.id] = {}))[link.id] = true;\n    }\n  },\n  _restructureOnChangeTarget: function (link) {\n    var prevTarget = link.previous('target');\n    if (prevTarget.id && this._in[prevTarget.id]) {\n      delete this._in[prevTarget.id][link.id];\n    }\n    var target = link.get('target');\n    if (target.id) {\n      (this._in[target.id] || (this._in[target.id] = {}))[link.id] = true;\n    }\n  },\n  // Return all outbound edges for the node. Return value is an object\n  // of the form: [edgeId] -> true\n  getOutboundEdges: function (node) {\n    return this._out && this._out[node] || {};\n  },\n  // Return all inbound edges for the node. Return value is an object\n  // of the form: [edgeId] -> true\n  getInboundEdges: function (node) {\n    return this._in && this._in[node] || {};\n  },\n  toJSON: function () {\n    // Backbone does not recursively call `toJSON()` on attributes that are themselves models/collections.\n    // It just clones the attributes. Therefore, we must call `toJSON()` on the cells collection explicitly.\n    var json = Backbone.Model.prototype.toJSON.apply(this, arguments);\n    json.cells = this.get('cells').toJSON();\n    return json;\n  },\n  fromJSON: function (json, opt) {\n    if (!json.cells) {\n      throw new Error('Graph JSON must contain cells array.');\n    }\n    return this.set(json, opt);\n  },\n  set: function (key, val, opt) {\n    var attrs;\n\n    // Handle both `key`, value and {key: value} style arguments.\n    if (typeof key === 'object') {\n      attrs = key;\n      opt = val;\n    } else {\n      (attrs = {})[key] = val;\n    }\n\n    // Make sure that `cells` attribute is handled separately via resetCells().\n    if (attrs.hasOwnProperty('cells')) {\n      this.resetCells(attrs.cells, opt);\n      attrs = util.omit(attrs, 'cells');\n    }\n\n    // The rest of the attributes are applied via original set method.\n    return Backbone.Model.prototype.set.call(this, attrs, opt);\n  },\n  clear: function (opt) {\n    opt = util.assign({}, opt, {\n      clear: true\n    });\n    var collection = this.get('cells');\n    if (collection.length === 0) return this;\n    this.startBatch('clear', opt);\n\n    // The elements come after the links.\n    var cells = collection.sortBy(function (cell) {\n      return cell.isLink() ? 1 : 2;\n    });\n    do {\n      // Remove all the cells one by one.\n      // Note that all the links are removed first, so it's\n      // safe to remove the elements without removing the connected\n      // links first.\n      cells.shift().remove(opt);\n    } while (cells.length > 0);\n    this.stopBatch('clear');\n    return this;\n  },\n  _prepareCell: function (cell, opt) {\n    var attrs;\n    if (cell instanceof Backbone.Model) {\n      attrs = cell.attributes;\n      if (!cell.graph && (!opt || !opt.dry)) {\n        // An element can not be member of more than one graph.\n        // A cell stops being the member of the graph after it's explicitly removed.\n        cell.graph = this;\n      }\n    } else {\n      // In case we're dealing with a plain JS object, we have to set the reference\n      // to the `graph` right after the actual model is created. This happens in the `model()` function\n      // of `joint.dia.GraphCells`.\n      attrs = cell;\n    }\n    if (!util.isString(attrs.type)) {\n      throw new TypeError('dia.Graph: cell type must be a string.');\n    }\n    return cell;\n  },\n  minZIndex: function () {\n    var firstCell = this.get('cells').first();\n    return firstCell ? firstCell.get('z') || 0 : 0;\n  },\n  maxZIndex: function () {\n    var lastCell = this.get('cells').last();\n    return lastCell ? lastCell.get('z') || 0 : 0;\n  },\n  addCell: function (cell, opt) {\n    if (Array.isArray(cell)) {\n      return this.addCells(cell, opt);\n    }\n    if (cell instanceof Backbone.Model) {\n      if (!cell.has('z')) {\n        cell.set('z', this.maxZIndex() + 1);\n      }\n    } else if (cell.z === undefined) {\n      cell.z = this.maxZIndex() + 1;\n    }\n    this.get('cells').add(this._prepareCell(cell, opt), opt || {});\n    return this;\n  },\n  addCells: function (cells, opt) {\n    if (cells.length === 0) return this;\n    cells = util.flattenDeep(cells);\n    opt.maxPosition = opt.position = cells.length - 1;\n    this.startBatch('add', opt);\n    cells.forEach(function (cell) {\n      this.addCell(cell, opt);\n      opt.position--;\n    }, this);\n    this.stopBatch('add', opt);\n    return this;\n  },\n  // When adding a lot of cells, it is much more efficient to\n  // reset the entire cells collection in one go.\n  // Useful for bulk operations and optimizations.\n  resetCells: function (cells, opt) {\n    var preparedCells = util.toArray(cells).map(function (cell) {\n      return this._prepareCell(cell, opt);\n    }, this);\n    this.get('cells').reset(preparedCells, opt);\n    return this;\n  },\n  removeCells: function (cells, opt) {\n    if (cells.length) {\n      this.startBatch('remove');\n      util.invoke(cells, 'remove', opt);\n      this.stopBatch('remove');\n    }\n    return this;\n  },\n  _removeCell: function (cell, collection, options) {\n    options = options || {};\n    if (!options.clear) {\n      // Applications might provide a `disconnectLinks` option set to `true` in order to\n      // disconnect links when a cell is removed rather then removing them. The default\n      // is to remove all the associated links.\n      if (options.disconnectLinks) {\n        this.disconnectLinks(cell, options);\n      } else {\n        this.removeLinks(cell, options);\n      }\n    }\n    // Silently remove the cell from the cells collection. Silently, because\n    // `joint.dia.Cell.prototype.remove` already triggers the `remove` event which is\n    // then propagated to the graph model. If we didn't remove the cell silently, two `remove` events\n    // would be triggered on the graph model.\n    this.get('cells').remove(cell, {\n      silent: true\n    });\n    if (cell.graph === this) {\n      // Remove the element graph reference only if the cell is the member of this graph.\n      cell.graph = null;\n    }\n  },\n  // Get a cell by `id`.\n  getCell: function (id) {\n    return this.get('cells').get(id);\n  },\n  getCells: function () {\n    return this.get('cells').toArray();\n  },\n  getElements: function () {\n    return this.get('cells').filter(cell => cell.isElement());\n  },\n  getLinks: function () {\n    return this.get('cells').filter(cell => cell.isLink());\n  },\n  getFirstCell: function () {\n    return this.get('cells').first();\n  },\n  getLastCell: function () {\n    return this.get('cells').last();\n  },\n  // Get all inbound and outbound links connected to the cell `model`.\n  getConnectedLinks: function (model, opt) {\n    opt = opt || {};\n    var indirect = opt.indirect;\n    var inbound = opt.inbound;\n    var outbound = opt.outbound;\n    if (inbound === undefined && outbound === undefined) {\n      inbound = outbound = true;\n    }\n\n    // the final array of connected link models\n    var links = [];\n    // a hash table of connected edges of the form: [edgeId] -> true\n    // used for quick lookups to check if we already added a link\n    var edges = {};\n    if (outbound) {\n      addOutbounds(this, model);\n    }\n    if (inbound) {\n      addInbounds(this, model);\n    }\n    function addOutbounds(graph, model) {\n      util.forIn(graph.getOutboundEdges(model.id), function (_, edge) {\n        // skip links that were already added\n        // (those must be self-loop links)\n        // (because they are inbound and outbound edges of the same two elements)\n        if (edges[edge]) return;\n        var link = graph.getCell(edge);\n        links.push(link);\n        edges[edge] = true;\n        if (indirect) {\n          if (inbound) addInbounds(graph, link);\n          if (outbound) addOutbounds(graph, link);\n        }\n      }.bind(graph));\n      if (indirect && model.isLink()) {\n        var outCell = model.getTargetCell();\n        if (outCell && outCell.isLink()) {\n          if (!edges[outCell.id]) {\n            links.push(outCell);\n            addOutbounds(graph, outCell);\n          }\n        }\n      }\n    }\n    function addInbounds(graph, model) {\n      util.forIn(graph.getInboundEdges(model.id), function (_, edge) {\n        // skip links that were already added\n        // (those must be self-loop links)\n        // (because they are inbound and outbound edges of the same two elements)\n        if (edges[edge]) return;\n        var link = graph.getCell(edge);\n        links.push(link);\n        edges[edge] = true;\n        if (indirect) {\n          if (inbound) addInbounds(graph, link);\n          if (outbound) addOutbounds(graph, link);\n        }\n      }.bind(graph));\n      if (indirect && model.isLink()) {\n        var inCell = model.getSourceCell();\n        if (inCell && inCell.isLink()) {\n          if (!edges[inCell.id]) {\n            links.push(inCell);\n            addInbounds(graph, inCell);\n          }\n        }\n      }\n    }\n\n    // if `deep` option is `true`, check also all the links that are connected to any of the descendant cells\n    if (opt.deep) {\n      var embeddedCells = model.getEmbeddedCells({\n        deep: true\n      });\n\n      // in the first round, we collect all the embedded elements\n      var embeddedElements = {};\n      embeddedCells.forEach(function (cell) {\n        if (cell.isElement()) {\n          embeddedElements[cell.id] = true;\n        }\n      });\n      embeddedCells.forEach(function (cell) {\n        if (cell.isLink()) return;\n        if (outbound) {\n          util.forIn(this.getOutboundEdges(cell.id), function (exists, edge) {\n            if (!edges[edge]) {\n              var edgeCell = this.getCell(edge);\n              var {\n                source,\n                target\n              } = edgeCell.attributes;\n              var sourceId = source.id;\n              var targetId = target.id;\n\n              // if `includeEnclosed` option is falsy, skip enclosed links\n              if (!opt.includeEnclosed && sourceId && embeddedElements[sourceId] && targetId && embeddedElements[targetId]) {\n                return;\n              }\n              links.push(this.getCell(edge));\n              edges[edge] = true;\n            }\n          }.bind(this));\n        }\n        if (inbound) {\n          util.forIn(this.getInboundEdges(cell.id), function (exists, edge) {\n            if (!edges[edge]) {\n              var edgeCell = this.getCell(edge);\n              var {\n                source,\n                target\n              } = edgeCell.attributes;\n              var sourceId = source.id;\n              var targetId = target.id;\n\n              // if `includeEnclosed` option is falsy, skip enclosed links\n              if (!opt.includeEnclosed && sourceId && embeddedElements[sourceId] && targetId && embeddedElements[targetId]) {\n                return;\n              }\n              links.push(this.getCell(edge));\n              edges[edge] = true;\n            }\n          }.bind(this));\n        }\n      }, this);\n    }\n    return links;\n  },\n  getNeighbors: function (model, opt) {\n    opt || (opt = {});\n    var inbound = opt.inbound;\n    var outbound = opt.outbound;\n    if (inbound === undefined && outbound === undefined) {\n      inbound = outbound = true;\n    }\n    var neighbors = this.getConnectedLinks(model, opt).reduce(function (res, link) {\n      var {\n        source,\n        target\n      } = link.attributes;\n      var loop = link.hasLoop(opt);\n\n      // Discard if it is a point, or if the neighbor was already added.\n      if (inbound && util.has(source, 'id') && !res[source.id]) {\n        var sourceElement = this.getCell(source.id);\n        if (sourceElement.isElement()) {\n          if (loop || sourceElement && sourceElement !== model && (!opt.deep || !sourceElement.isEmbeddedIn(model))) {\n            res[source.id] = sourceElement;\n          }\n        }\n      }\n\n      // Discard if it is a point, or if the neighbor was already added.\n      if (outbound && util.has(target, 'id') && !res[target.id]) {\n        var targetElement = this.getCell(target.id);\n        if (targetElement.isElement()) {\n          if (loop || targetElement && targetElement !== model && (!opt.deep || !targetElement.isEmbeddedIn(model))) {\n            res[target.id] = targetElement;\n          }\n        }\n      }\n      return res;\n    }.bind(this), {});\n    if (model.isLink()) {\n      if (inbound) {\n        var sourceCell = model.getSourceCell();\n        if (sourceCell && sourceCell.isElement() && !neighbors[sourceCell.id]) {\n          neighbors[sourceCell.id] = sourceCell;\n        }\n      }\n      if (outbound) {\n        var targetCell = model.getTargetCell();\n        if (targetCell && targetCell.isElement() && !neighbors[targetCell.id]) {\n          neighbors[targetCell.id] = targetCell;\n        }\n      }\n    }\n    return util.toArray(neighbors);\n  },\n  getCommonAncestor: function /* cells */\n  () {\n    var cellsAncestors = Array.from(arguments).map(function (cell) {\n      var ancestors = [];\n      var parentId = cell.get('parent');\n      while (parentId) {\n        ancestors.push(parentId);\n        parentId = this.getCell(parentId).get('parent');\n      }\n      return ancestors;\n    }, this);\n    cellsAncestors = cellsAncestors.sort(function (a, b) {\n      return a.length - b.length;\n    });\n    var commonAncestor = util.toArray(cellsAncestors.shift()).find(function (ancestor) {\n      return cellsAncestors.every(function (cellAncestors) {\n        return cellAncestors.includes(ancestor);\n      });\n    });\n    return this.getCell(commonAncestor);\n  },\n  // Find the whole branch starting at `element`.\n  // If `opt.deep` is `true`, take into account embedded elements too.\n  // If `opt.breadthFirst` is `true`, use the Breadth-first search algorithm, otherwise use Depth-first search.\n  getSuccessors: function (element, opt) {\n    opt = opt || {};\n    var res = [];\n    // Modify the options so that it includes the `outbound` neighbors only. In other words, search forwards.\n    this.search(element, function (el) {\n      if (el !== element) {\n        res.push(el);\n      }\n    }, util.assign({}, opt, {\n      outbound: true\n    }));\n    return res;\n  },\n  cloneCells: cloneCells,\n  // Clone the whole subgraph (including all the connected links whose source/target is in the subgraph).\n  // If `opt.deep` is `true`, also take into account all the embedded cells of all the subgraph cells.\n  // Return a map of the form: [original cell ID] -> [clone].\n  cloneSubgraph: function (cells, opt) {\n    var subgraph = this.getSubgraph(cells, opt);\n    return this.cloneCells(subgraph);\n  },\n  // Return `cells` and all the connected links that connect cells in the `cells` array.\n  // If `opt.deep` is `true`, return all the cells including all their embedded cells\n  // and all the links that connect any of the returned cells.\n  // For example, for a single shallow element, the result is that very same element.\n  // For two elements connected with a link: `A --- L ---> B`, the result for\n  // `getSubgraph([A, B])` is `[A, L, B]`. The same goes for `getSubgraph([L])`, the result is again `[A, L, B]`.\n  getSubgraph: function (cells, opt) {\n    opt = opt || {};\n    var subgraph = [];\n    // `cellMap` is used for a quick lookup of existence of a cell in the `cells` array.\n    var cellMap = {};\n    var elements = [];\n    var links = [];\n    util.toArray(cells).forEach(function (cell) {\n      if (!cellMap[cell.id]) {\n        subgraph.push(cell);\n        cellMap[cell.id] = cell;\n        if (cell.isLink()) {\n          links.push(cell);\n        } else {\n          elements.push(cell);\n        }\n      }\n      if (opt.deep) {\n        var embeds = cell.getEmbeddedCells({\n          deep: true\n        });\n        embeds.forEach(function (embed) {\n          if (!cellMap[embed.id]) {\n            subgraph.push(embed);\n            cellMap[embed.id] = embed;\n            if (embed.isLink()) {\n              links.push(embed);\n            } else {\n              elements.push(embed);\n            }\n          }\n        });\n      }\n    });\n    links.forEach(function (link) {\n      // For links, return their source & target (if they are elements - not points).\n      var {\n        source,\n        target\n      } = link.attributes;\n      if (source.id && !cellMap[source.id]) {\n        var sourceElement = this.getCell(source.id);\n        subgraph.push(sourceElement);\n        cellMap[sourceElement.id] = sourceElement;\n        elements.push(sourceElement);\n      }\n      if (target.id && !cellMap[target.id]) {\n        var targetElement = this.getCell(target.id);\n        subgraph.push(this.getCell(target.id));\n        cellMap[targetElement.id] = targetElement;\n        elements.push(targetElement);\n      }\n    }, this);\n    elements.forEach(function (element) {\n      // For elements, include their connected links if their source/target is in the subgraph;\n      var links = this.getConnectedLinks(element, opt);\n      links.forEach(function (link) {\n        var {\n          source,\n          target\n        } = link.attributes;\n        if (!cellMap[link.id] && source.id && cellMap[source.id] && target.id && cellMap[target.id]) {\n          subgraph.push(link);\n          cellMap[link.id] = link;\n        }\n      });\n    }, this);\n    return subgraph;\n  },\n  // Find all the predecessors of `element`. This is a reverse operation of `getSuccessors()`.\n  // If `opt.deep` is `true`, take into account embedded elements too.\n  // If `opt.breadthFirst` is `true`, use the Breadth-first search algorithm, otherwise use Depth-first search.\n  getPredecessors: function (element, opt) {\n    opt = opt || {};\n    var res = [];\n    // Modify the options so that it includes the `inbound` neighbors only. In other words, search backwards.\n    this.search(element, function (el) {\n      if (el !== element) {\n        res.push(el);\n      }\n    }, util.assign({}, opt, {\n      inbound: true\n    }));\n    return res;\n  },\n  // Perform search on the graph.\n  // If `opt.breadthFirst` is `true`, use the Breadth-first Search algorithm, otherwise use Depth-first search.\n  // By setting `opt.inbound` to `true`, you can reverse the direction of the search.\n  // If `opt.deep` is `true`, take into account embedded elements too.\n  // `iteratee` is a function of the form `function(element) {}`.\n  // If `iteratee` explicitly returns `false`, the searching stops.\n  search: function (element, iteratee, opt) {\n    opt = opt || {};\n    if (opt.breadthFirst) {\n      this.bfs(element, iteratee, opt);\n    } else {\n      this.dfs(element, iteratee, opt);\n    }\n  },\n  // Breadth-first search.\n  // If `opt.deep` is `true`, take into account embedded elements too.\n  // If `opt.inbound` is `true`, reverse the search direction (it's like reversing all the link directions).\n  // `iteratee` is a function of the form `function(element, distance) {}`.\n  // where `element` is the currently visited element and `distance` is the distance of that element\n  // from the root `element` passed the `bfs()`, i.e. the element we started the search from.\n  // Note that the `distance` is not the shortest or longest distance, it is simply the number of levels\n  // crossed till we visited the `element` for the first time. It is especially useful for tree graphs.\n  // If `iteratee` explicitly returns `false`, the searching stops.\n  bfs: function (element, iteratee, opt = {}) {\n    const visited = {};\n    const distance = {};\n    const queue = [];\n    queue.push(element);\n    distance[element.id] = 0;\n    while (queue.length > 0) {\n      var next = queue.shift();\n      if (visited[next.id]) continue;\n      visited[next.id] = true;\n      if (iteratee.call(this, next, distance[next.id]) === false) continue;\n      const neighbors = this.getNeighbors(next, opt);\n      for (let i = 0, n = neighbors.length; i < n; i++) {\n        const neighbor = neighbors[i];\n        distance[neighbor.id] = distance[next.id] + 1;\n        queue.push(neighbor);\n      }\n    }\n  },\n  // Depth-first search.\n  // If `opt.deep` is `true`, take into account embedded elements too.\n  // If `opt.inbound` is `true`, reverse the search direction (it's like reversing all the link directions).\n  // `iteratee` is a function of the form `function(element, distance) {}`.\n  // If `iteratee` explicitly returns `false`, the search stops.\n  dfs: function (element, iteratee, opt = {}) {\n    const visited = {};\n    const distance = {};\n    const queue = [];\n    queue.push(element);\n    distance[element.id] = 0;\n    while (queue.length > 0) {\n      const next = queue.pop();\n      if (visited[next.id]) continue;\n      visited[next.id] = true;\n      if (iteratee.call(this, next, distance[next.id]) === false) continue;\n      const neighbors = this.getNeighbors(next, opt);\n      const lastIndex = queue.length;\n      for (let i = 0, n = neighbors.length; i < n; i++) {\n        const neighbor = neighbors[i];\n        distance[neighbor.id] = distance[next.id] + 1;\n        queue.splice(lastIndex, 0, neighbor);\n      }\n    }\n  },\n  // Get all the roots of the graph. Time complexity: O(|V|).\n  getSources: function () {\n    var sources = [];\n    util.forIn(this._nodes, function (exists, node) {\n      if (!this._in[node] || util.isEmpty(this._in[node])) {\n        sources.push(this.getCell(node));\n      }\n    }.bind(this));\n    return sources;\n  },\n  // Get all the leafs of the graph. Time complexity: O(|V|).\n  getSinks: function () {\n    var sinks = [];\n    util.forIn(this._nodes, function (exists, node) {\n      if (!this._out[node] || util.isEmpty(this._out[node])) {\n        sinks.push(this.getCell(node));\n      }\n    }.bind(this));\n    return sinks;\n  },\n  // Return `true` if `element` is a root. Time complexity: O(1).\n  isSource: function (element) {\n    return !this._in[element.id] || util.isEmpty(this._in[element.id]);\n  },\n  // Return `true` if `element` is a leaf. Time complexity: O(1).\n  isSink: function (element) {\n    return !this._out[element.id] || util.isEmpty(this._out[element.id]);\n  },\n  // Return `true` is `elementB` is a successor of `elementA`. Return `false` otherwise.\n  isSuccessor: function (elementA, elementB) {\n    var isSuccessor = false;\n    this.search(elementA, function (element) {\n      if (element === elementB && element !== elementA) {\n        isSuccessor = true;\n        return false;\n      }\n    }, {\n      outbound: true\n    });\n    return isSuccessor;\n  },\n  // Return `true` is `elementB` is a predecessor of `elementA`. Return `false` otherwise.\n  isPredecessor: function (elementA, elementB) {\n    var isPredecessor = false;\n    this.search(elementA, function (element) {\n      if (element === elementB && element !== elementA) {\n        isPredecessor = true;\n        return false;\n      }\n    }, {\n      inbound: true\n    });\n    return isPredecessor;\n  },\n  // Return `true` is `elementB` is a neighbor of `elementA`. Return `false` otherwise.\n  // `opt.deep` controls whether to take into account embedded elements as well. See `getNeighbors()`\n  // for more details.\n  // If `opt.outbound` is set to `true`, return `true` only if `elementB` is a successor neighbor.\n  // Similarly, if `opt.inbound` is set to `true`, return `true` only if `elementB` is a predecessor neighbor.\n  isNeighbor: function (elementA, elementB, opt) {\n    opt = opt || {};\n    var inbound = opt.inbound;\n    var outbound = opt.outbound;\n    if (inbound === undefined && outbound === undefined) {\n      inbound = outbound = true;\n    }\n    var isNeighbor = false;\n    this.getConnectedLinks(elementA, opt).forEach(function (link) {\n      var {\n        source,\n        target\n      } = link.attributes;\n\n      // Discard if it is a point.\n      if (inbound && util.has(source, 'id') && source.id === elementB.id) {\n        isNeighbor = true;\n        return false;\n      }\n\n      // Discard if it is a point, or if the neighbor was already added.\n      if (outbound && util.has(target, 'id') && target.id === elementB.id) {\n        isNeighbor = true;\n        return false;\n      }\n    });\n    return isNeighbor;\n  },\n  // Disconnect links connected to the cell `model`.\n  disconnectLinks: function (model, opt) {\n    this.getConnectedLinks(model).forEach(function (link) {\n      link.set(link.attributes.source.id === model.id ? 'source' : 'target', {\n        x: 0,\n        y: 0\n      }, opt);\n    });\n  },\n  // Remove links connected to the cell `model` completely.\n  removeLinks: function (model, opt) {\n    util.invoke(this.getConnectedLinks(model), 'remove', opt);\n  },\n  // Find all elements at given point\n  findModelsFromPoint: function (p) {\n    return this.getElements().filter(el => el.getBBox({\n      rotate: true\n    }).containsPoint(p));\n  },\n  // Find all elements in given area\n  findModelsInArea: function (rect, opt = {}) {\n    const r = new g.Rect(rect);\n    const {\n      strict = false\n    } = opt;\n    const method = strict ? 'containsRect' : 'intersect';\n    return this.getElements().filter(el => r[method](el.getBBox({\n      rotate: true\n    })));\n  },\n  // Find all elements under the given element.\n  findModelsUnderElement: function (element, opt = {}) {\n    const {\n      searchBy = 'bbox'\n    } = opt;\n    const bbox = element.getBBox().rotateAroundCenter(element.angle());\n    const elements = searchBy === 'bbox' ? this.findModelsInArea(bbox) : this.findModelsFromPoint(util.getRectPoint(bbox, searchBy));\n    // don't account element itself or any of its descendants\n    return elements.filter(el => element.id !== el.id && !el.isEmbeddedIn(element));\n  },\n  // Return bounding box of all elements.\n  getBBox: function () {\n    return this.getCellsBBox(this.getCells());\n  },\n  // Return the bounding box of all cells in array provided.\n  getCellsBBox: function (cells, opt = {}) {\n    const {\n      rotate = true\n    } = opt;\n    return util.toArray(cells).reduce(function (memo, cell) {\n      const rect = cell.getBBox({\n        rotate\n      });\n      if (!rect) return memo;\n      if (memo) {\n        return memo.union(rect);\n      }\n      return rect;\n    }, null);\n  },\n  translate: function (dx, dy, opt) {\n    // Don't translate cells that are embedded in any other cell.\n    var cells = this.getCells().filter(function (cell) {\n      return !cell.isEmbedded();\n    });\n    util.invoke(cells, 'translate', dx, dy, opt);\n    return this;\n  },\n  resize: function (width, height, opt) {\n    return this.resizeCells(width, height, this.getCells(), opt);\n  },\n  resizeCells: function (width, height, cells, opt) {\n    // `getBBox` method returns `null` if no elements provided.\n    // i.e. cells can be an array of links\n    var bbox = this.getCellsBBox(cells);\n    if (bbox) {\n      var sx = Math.max(width / bbox.width, 0);\n      var sy = Math.max(height / bbox.height, 0);\n      util.invoke(cells, 'scale', sx, sy, bbox.origin(), opt);\n    }\n    return this;\n  },\n  startBatch: function (name, data) {\n    data = data || {};\n    this._batches[name] = (this._batches[name] || 0) + 1;\n    return this.trigger('batch:start', util.assign({}, data, {\n      batchName: name\n    }));\n  },\n  stopBatch: function (name, data) {\n    data = data || {};\n    this._batches[name] = (this._batches[name] || 0) - 1;\n    return this.trigger('batch:stop', util.assign({}, data, {\n      batchName: name\n    }));\n  },\n  hasActiveBatch: function (name) {\n    const batches = this._batches;\n    let names;\n    if (arguments.length === 0) {\n      names = Object.keys(batches);\n    } else if (Array.isArray(name)) {\n      names = name;\n    } else {\n      names = [name];\n    }\n    return names.some(batch => batches[batch] > 0);\n  }\n}, {\n  validations: {\n    multiLinks: function (graph, link) {\n      // Do not allow multiple links to have the same source and target.\n      var {\n        source,\n        target\n      } = link.attributes;\n      if (source.id && target.id) {\n        var sourceModel = link.getSourceCell();\n        if (sourceModel) {\n          var connectedLinks = graph.getConnectedLinks(sourceModel, {\n            outbound: true\n          });\n          var sameLinks = connectedLinks.filter(function (_link) {\n            var {\n              source: _source,\n              target: _target\n            } = _link.attributes;\n            return _source && _source.id === source.id && (!_source.port || _source.port === source.port) && _target && _target.id === target.id && (!_target.port || _target.port === target.port);\n          });\n          if (sameLinks.length > 1) {\n            return false;\n          }\n        }\n      }\n      return true;\n    },\n    linkPinning: function (_graph, link) {\n      var {\n        source,\n        target\n      } = link.attributes;\n      return source.id && target.id;\n    }\n  }\n});\nwrapWith(Graph.prototype, ['resetCells', 'addCells', 'removeCells'], wrappers.cells);", "import { Cell } from './Cell.mjs';\nimport { clone, isPlainObject, isFunction, isString, isNumber } from '../util/index.mjs';\nimport { Point, Polyline } from '../g/index.mjs';\n\n// Link base model.\n// --------------------------\n\nexport const Link = Cell.extend({\n  // The default markup for links.\n  markup: ['<path class=\"connection\" stroke=\"black\" d=\"M 0 0 0 0\"/>', '<path class=\"marker-source\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>', '<path class=\"marker-target\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>', '<path class=\"connection-wrap\" d=\"M 0 0 0 0\"/>', '<g class=\"labels\"/>', '<g class=\"marker-vertices\"/>', '<g class=\"marker-arrowheads\"/>', '<g class=\"link-tools\"/>'].join(''),\n  toolMarkup: ['<g class=\"link-tool\">', '<g class=\"tool-remove\" event=\"remove\">', '<circle r=\"11\" />', '<path transform=\"scale(.8) translate(-16, -16)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\" />', '<title>Remove link.</title>', '</g>', '<g class=\"tool-options\" event=\"link:options\">', '<circle r=\"11\" transform=\"translate(25)\"/>', '<path fill=\"white\" transform=\"scale(.55) translate(29, -16)\" d=\"M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z\"/>', '<title>Link options.</title>', '</g>', '</g>'].join(''),\n  doubleToolMarkup: undefined,\n  // The default markup for showing/removing vertices. These elements are the children of the .marker-vertices element (see `this.markup`).\n  // Only .marker-vertex and .marker-vertex-remove element have special meaning. The former is used for\n  // dragging vertices (changing their position). The latter is used for removing vertices.\n  vertexMarkup: ['<g class=\"marker-vertex-group\" transform=\"translate(<%= x %>, <%= y %>)\">', '<circle class=\"marker-vertex\" idx=\"<%= idx %>\" r=\"10\" />', '<path class=\"marker-vertex-remove-area\" idx=\"<%= idx %>\" d=\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\" transform=\"translate(5, -33)\"/>', '<path class=\"marker-vertex-remove\" idx=\"<%= idx %>\" transform=\"scale(.8) translate(9.5, -37)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\">', '<title>Remove vertex.</title>', '</path>', '</g>'].join(''),\n  arrowheadMarkup: ['<g class=\"marker-arrowhead-group marker-arrowhead-group-<%= end %>\">', '<path class=\"marker-arrowhead\" end=\"<%= end %>\" d=\"M 26 0 L 0 13 L 26 26 z\" />', '</g>'].join(''),\n  // may be overwritten by user to change default label (its markup, size, attrs, position)\n  defaultLabel: undefined,\n  // deprecated\n  // may be overwritten by user to change default label markup\n  // lower priority than defaultLabel.markup\n  labelMarkup: undefined,\n  // private\n  _builtins: {\n    defaultLabel: {\n      // builtin default markup:\n      // used if neither defaultLabel.markup\n      // nor label.markup is set\n      markup: [{\n        tagName: 'rect',\n        selector: 'rect' // faster than tagName CSS selector\n      }, {\n        tagName: 'text',\n        selector: 'text' // faster than tagName CSS selector\n      }],\n      // builtin default attributes:\n      // applied only if builtin default markup is used\n      attrs: {\n        text: {\n          fill: '#000000',\n          fontSize: 14,\n          textAnchor: 'middle',\n          yAlignment: 'middle',\n          pointerEvents: 'none'\n        },\n        rect: {\n          ref: 'text',\n          fill: '#ffffff',\n          rx: 3,\n          ry: 3,\n          refWidth: 1,\n          refHeight: 1,\n          refX: 0,\n          refY: 0\n        }\n      },\n      // builtin default position:\n      // used if neither defaultLabel.position\n      // nor label.position is set\n      position: {\n        distance: 0.5\n      }\n    }\n  },\n  defaults: {\n    type: 'link',\n    source: {},\n    target: {}\n  },\n  isLink: function () {\n    return true;\n  },\n  disconnect: function (opt) {\n    return this.set({\n      source: {\n        x: 0,\n        y: 0\n      },\n      target: {\n        x: 0,\n        y: 0\n      }\n    }, opt);\n  },\n  source: function (source, args, opt) {\n    // getter\n    if (source === undefined) {\n      return clone(this.get('source'));\n    }\n\n    // setter\n    var setSource;\n    var setOpt;\n\n    // `source` is a cell\n    // take only its `id` and combine with `args`\n    var isCellProvided = source instanceof Cell;\n    if (isCellProvided) {\n      // three arguments\n      setSource = clone(args) || {};\n      setSource.id = source.id;\n      setOpt = opt;\n      return this.set('source', setSource, setOpt);\n    }\n\n    // `source` is a point-like object\n    // for example, a g.Point\n    // take only its `x` and `y` and combine with `args`\n    var isPointProvided = !isPlainObject(source);\n    if (isPointProvided) {\n      // three arguments\n      setSource = clone(args) || {};\n      setSource.x = source.x;\n      setSource.y = source.y;\n      setOpt = opt;\n      return this.set('source', setSource, setOpt);\n    }\n\n    // `source` is an object\n    // no checking\n    // two arguments\n    setSource = source;\n    setOpt = args;\n    return this.set('source', setSource, setOpt);\n  },\n  target: function (target, args, opt) {\n    // getter\n    if (target === undefined) {\n      return clone(this.get('target'));\n    }\n\n    // setter\n    var setTarget;\n    var setOpt;\n\n    // `target` is a cell\n    // take only its `id` argument and combine with `args`\n    var isCellProvided = target instanceof Cell;\n    if (isCellProvided) {\n      // three arguments\n      setTarget = clone(args) || {};\n      setTarget.id = target.id;\n      setOpt = opt;\n      return this.set('target', setTarget, setOpt);\n    }\n\n    // `target` is a point-like object\n    // for example, a g.Point\n    // take only its `x` and `y` and combine with `args`\n    var isPointProvided = !isPlainObject(target);\n    if (isPointProvided) {\n      // three arguments\n      setTarget = clone(args) || {};\n      setTarget.x = target.x;\n      setTarget.y = target.y;\n      setOpt = opt;\n      return this.set('target', setTarget, setOpt);\n    }\n\n    // `target` is an object\n    // no checking\n    // two arguments\n    setTarget = target;\n    setOpt = args;\n    return this.set('target', setTarget, setOpt);\n  },\n  router: function (name, args, opt) {\n    // getter\n    if (name === undefined) {\n      var router = this.get('router');\n      if (!router) {\n        if (this.get('manhattan')) return {\n          name: 'orthogonal'\n        }; // backwards compatibility\n        return null;\n      }\n      if (typeof router === 'object') return clone(router);\n      return router; // e.g. a function\n    }\n\n    // setter\n    var isRouterProvided = typeof name === 'object' || typeof name === 'function';\n    var localRouter = isRouterProvided ? name : {\n      name: name,\n      args: args\n    };\n    var localOpt = isRouterProvided ? args : opt;\n    return this.set('router', localRouter, localOpt);\n  },\n  connector: function (name, args, opt) {\n    // getter\n    if (name === undefined) {\n      var connector = this.get('connector');\n      if (!connector) {\n        if (this.get('smooth')) return {\n          name: 'smooth'\n        }; // backwards compatibility\n        return null;\n      }\n      if (typeof connector === 'object') return clone(connector);\n      return connector; // e.g. a function\n    }\n\n    // setter\n    var isConnectorProvided = typeof name === 'object' || typeof name === 'function';\n    var localConnector = isConnectorProvided ? name : {\n      name: name,\n      args: args\n    };\n    var localOpt = isConnectorProvided ? args : opt;\n    return this.set('connector', localConnector, localOpt);\n  },\n  // Labels API\n\n  // A convenient way to set labels. Currently set values will be mixined with `value` if used as a setter.\n  label: function (idx, label, opt) {\n    var labels = this.labels();\n    idx = isFinite(idx) && idx !== null ? idx | 0 : 0;\n    if (idx < 0) idx = labels.length + idx;\n\n    // getter\n    if (arguments.length <= 1) return this.prop(['labels', idx]);\n    // setter\n    return this.prop(['labels', idx], label, opt);\n  },\n  labels: function (labels, opt) {\n    // getter\n    if (arguments.length === 0) {\n      labels = this.get('labels');\n      if (!Array.isArray(labels)) return [];\n      return labels.slice();\n    }\n    // setter\n    if (!Array.isArray(labels)) labels = [];\n    return this.set('labels', labels, opt);\n  },\n  hasLabels: function () {\n    const {\n      labels\n    } = this.attributes;\n    return Array.isArray(labels) && labels.length > 0;\n  },\n  insertLabel: function (idx, label, opt) {\n    if (!label) throw new Error('dia.Link: no label provided');\n    var labels = this.labels();\n    var n = labels.length;\n    idx = isFinite(idx) && idx !== null ? idx | 0 : n;\n    if (idx < 0) idx = n + idx + 1;\n    labels.splice(idx, 0, label);\n    return this.labels(labels, opt);\n  },\n  // convenience function\n  // add label to end of labels array\n  appendLabel: function (label, opt) {\n    return this.insertLabel(-1, label, opt);\n  },\n  removeLabel: function (idx, opt) {\n    var labels = this.labels();\n    idx = isFinite(idx) && idx !== null ? idx | 0 : -1;\n    labels.splice(idx, 1);\n    return this.labels(labels, opt);\n  },\n  // Vertices API\n\n  vertex: function (idx, vertex, opt) {\n    var vertices = this.vertices();\n    idx = isFinite(idx) && idx !== null ? idx | 0 : 0;\n    if (idx < 0) idx = vertices.length + idx;\n\n    // getter\n    if (arguments.length <= 1) return this.prop(['vertices', idx]);\n\n    // setter\n    var setVertex = this._normalizeVertex(vertex);\n    return this.prop(['vertices', idx], setVertex, opt);\n  },\n  vertices: function (vertices, opt) {\n    // getter\n    if (arguments.length === 0) {\n      vertices = this.get('vertices');\n      if (!Array.isArray(vertices)) return [];\n      return vertices.slice();\n    }\n\n    // setter\n    if (!Array.isArray(vertices)) vertices = [];\n    var setVertices = [];\n    for (var i = 0; i < vertices.length; i++) {\n      var vertex = vertices[i];\n      var setVertex = this._normalizeVertex(vertex);\n      setVertices.push(setVertex);\n    }\n    return this.set('vertices', setVertices, opt);\n  },\n  insertVertex: function (idx, vertex, opt) {\n    if (!vertex) throw new Error('dia.Link: no vertex provided');\n    var vertices = this.vertices();\n    var n = vertices.length;\n    idx = isFinite(idx) && idx !== null ? idx | 0 : n;\n    if (idx < 0) idx = n + idx + 1;\n    var setVertex = this._normalizeVertex(vertex);\n    vertices.splice(idx, 0, setVertex);\n    return this.vertices(vertices, opt);\n  },\n  removeVertex: function (idx, opt) {\n    var vertices = this.vertices();\n    idx = isFinite(idx) && idx !== null ? idx | 0 : -1;\n    vertices.splice(idx, 1);\n    return this.vertices(vertices, opt);\n  },\n  _normalizeVertex: function (vertex) {\n    // is vertex a point-like object?\n    // for example, a g.Point\n    var isPointProvided = !isPlainObject(vertex);\n    if (isPointProvided) return {\n      x: vertex.x,\n      y: vertex.y\n    };\n\n    // else: return vertex unchanged\n    return vertex;\n  },\n  // Transformations\n\n  translate: function (tx, ty, opt) {\n    // enrich the option object\n    opt = opt || {};\n    opt.translateBy = opt.translateBy || this.id;\n    opt.tx = tx;\n    opt.ty = ty;\n    return this.applyToPoints(function (p) {\n      return {\n        x: (p.x || 0) + tx,\n        y: (p.y || 0) + ty\n      };\n    }, opt);\n  },\n  scale: function (sx, sy, origin, opt) {\n    return this.applyToPoints(function (p) {\n      return Point(p).scale(sx, sy, origin).toJSON();\n    }, opt);\n  },\n  applyToPoints: function (fn, opt) {\n    if (!isFunction(fn)) {\n      throw new TypeError('dia.Link: applyToPoints expects its first parameter to be a function.');\n    }\n    var attrs = {};\n    var {\n      source,\n      target\n    } = this.attributes;\n    if (!source.id) {\n      attrs.source = fn(source);\n    }\n    if (!target.id) {\n      attrs.target = fn(target);\n    }\n    var vertices = this.vertices();\n    if (vertices.length > 0) {\n      attrs.vertices = vertices.map(fn);\n    }\n    return this.set(attrs, opt);\n  },\n  getSourcePoint: function () {\n    var sourceCell = this.getSourceCell();\n    if (!sourceCell) return new Point(this.source());\n    return sourceCell.getPointFromConnectedLink(this, 'source');\n  },\n  getTargetPoint: function () {\n    var targetCell = this.getTargetCell();\n    if (!targetCell) return new Point(this.target());\n    return targetCell.getPointFromConnectedLink(this, 'target');\n  },\n  getPointFromConnectedLink: function /* link, endType */\n  () {\n    return this.getPolyline().pointAt(0.5);\n  },\n  getPolyline: function () {\n    const points = [this.getSourcePoint(), ...this.vertices().map(Point), this.getTargetPoint()];\n    return new Polyline(points);\n  },\n  getBBox: function () {\n    return this.getPolyline().bbox();\n  },\n  reparent: function (opt) {\n    var newParent;\n    if (this.graph) {\n      var source = this.getSourceElement();\n      var target = this.getTargetElement();\n      var prevParent = this.getParentCell();\n      if (source && target) {\n        if (source === target || source.isEmbeddedIn(target)) {\n          newParent = target;\n        } else if (target.isEmbeddedIn(source)) {\n          newParent = source;\n        } else {\n          newParent = this.graph.getCommonAncestor(source, target);\n        }\n      }\n      if (prevParent && (!newParent || newParent.id !== prevParent.id)) {\n        // Unembed the link if source and target has no common ancestor\n        // or common ancestor changed\n        prevParent.unembed(this, opt);\n      }\n      if (newParent) {\n        newParent.embed(this, opt);\n      }\n    }\n    return newParent;\n  },\n  hasLoop: function (opt) {\n    opt = opt || {};\n    var {\n      source,\n      target\n    } = this.attributes;\n    var sourceId = source.id;\n    var targetId = target.id;\n    if (!sourceId || !targetId) {\n      // Link \"pinned\" to the paper does not have a loop.\n      return false;\n    }\n    var loop = sourceId === targetId;\n\n    // Note that there in the deep mode a link can have a loop,\n    // even if it connects only a parent and its embed.\n    // A loop \"target equals source\" is valid in both shallow and deep mode.\n    if (!loop && opt.deep && this.graph) {\n      var sourceElement = this.getSourceCell();\n      var targetElement = this.getTargetCell();\n      loop = sourceElement.isEmbeddedIn(targetElement) || targetElement.isEmbeddedIn(sourceElement);\n    }\n    return loop;\n  },\n  // unlike source(), this method returns null if source is a point\n  getSourceCell: function () {\n    const {\n      graph,\n      attributes\n    } = this;\n    var source = attributes.source;\n    return source && source.id && graph && graph.getCell(source.id) || null;\n  },\n  getSourceElement: function () {\n    var cell = this;\n    var visited = {};\n    do {\n      if (visited[cell.id]) return null;\n      visited[cell.id] = true;\n      cell = cell.getSourceCell();\n    } while (cell && cell.isLink());\n    return cell;\n  },\n  // unlike target(), this method returns null if target is a point\n  getTargetCell: function () {\n    const {\n      graph,\n      attributes\n    } = this;\n    var target = attributes.target;\n    return target && target.id && graph && graph.getCell(target.id) || null;\n  },\n  getTargetElement: function () {\n    var cell = this;\n    var visited = {};\n    do {\n      if (visited[cell.id]) return null;\n      visited[cell.id] = true;\n      cell = cell.getTargetCell();\n    } while (cell && cell.isLink());\n    return cell;\n  },\n  // Returns the common ancestor for the source element,\n  // target element and the link itself.\n  getRelationshipAncestor: function () {\n    var connectionAncestor;\n    if (this.graph) {\n      var cells = [this, this.getSourceElement(),\n      // null if source is a point\n      this.getTargetElement() // null if target is a point\n      ].filter(function (item) {\n        return !!item;\n      });\n      connectionAncestor = this.graph.getCommonAncestor.apply(this.graph, cells);\n    }\n    return connectionAncestor || null;\n  },\n  // Is source, target and the link itself embedded in a given cell?\n  isRelationshipEmbeddedIn: function (cell) {\n    var cellId = isString(cell) || isNumber(cell) ? cell : cell.id;\n    var ancestor = this.getRelationshipAncestor();\n    return !!ancestor && (ancestor.id === cellId || ancestor.isEmbeddedIn(cellId));\n  },\n  // Get resolved default label.\n  _getDefaultLabel: function () {\n    var defaultLabel = this.get('defaultLabel') || this.defaultLabel || {};\n    var label = {};\n    label.markup = defaultLabel.markup || this.get('labelMarkup') || this.labelMarkup;\n    label.position = defaultLabel.position;\n    label.attrs = defaultLabel.attrs;\n    label.size = defaultLabel.size;\n    return label;\n  }\n}, {\n  endsEqual: function (a, b) {\n    var portsEqual = a.port === b.port || !a.port && !b.port;\n    return a.id === b.id && portsEqual;\n  }\n});", "import * as util from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { Rect, Point } from '../g/index.mjs';\nimport * as Port from '../layout/ports/port.mjs';\nimport * as PortLabel from '../layout/ports/portLabel.mjs';\nvar PortData = function (data) {\n  var clonedData = util.cloneDeep(data) || {};\n  this.ports = [];\n  this.groups = {};\n  this.portLayoutNamespace = Port;\n  this.portLabelLayoutNamespace = PortLabel;\n  this._init(clonedData);\n};\nPortData.prototype = {\n  getPorts: function () {\n    return this.ports;\n  },\n  getGroup: function (name) {\n    return this.groups[name] || {};\n  },\n  getPortsByGroup: function (groupName) {\n    return this.ports.filter(function (port) {\n      return port.group === groupName;\n    });\n  },\n  getGroupPortsMetrics: function (groupName, elBBox) {\n    var group = this.getGroup(groupName);\n    var ports = this.getPortsByGroup(groupName);\n    var groupPosition = group.position || {};\n    var groupPositionName = groupPosition.name;\n    var namespace = this.portLayoutNamespace;\n    if (!namespace[groupPositionName]) {\n      groupPositionName = 'left';\n    }\n    var groupArgs = groupPosition.args || {};\n    var portsArgs = ports.map(function (port) {\n      return port && port.position && port.position.args;\n    });\n    var groupPortTransformations = namespace[groupPositionName](portsArgs, elBBox, groupArgs);\n    var accumulator = {\n      ports: ports,\n      result: []\n    };\n    util.toArray(groupPortTransformations).reduce(function (res, portTransformation, index) {\n      var port = res.ports[index];\n      res.result.push({\n        portId: port.id,\n        portTransformation: portTransformation,\n        labelTransformation: this._getPortLabelLayout(port, Point(portTransformation), elBBox),\n        portAttrs: port.attrs,\n        portSize: port.size,\n        labelSize: port.label.size\n      });\n      return res;\n    }.bind(this), accumulator);\n    return accumulator.result;\n  },\n  _getPortLabelLayout: function (port, portPosition, elBBox) {\n    var namespace = this.portLabelLayoutNamespace;\n    var labelPosition = port.label.position.name || 'left';\n    if (namespace[labelPosition]) {\n      return namespace[labelPosition](portPosition, elBBox, port.label.position.args);\n    }\n    return null;\n  },\n  _init: function (data) {\n    // prepare groups\n    if (util.isObject(data.groups)) {\n      var groups = Object.keys(data.groups);\n      for (var i = 0, n = groups.length; i < n; i++) {\n        var key = groups[i];\n        this.groups[key] = this._evaluateGroup(data.groups[key]);\n      }\n    }\n\n    // prepare ports\n    var ports = util.toArray(data.items);\n    for (var j = 0, m = ports.length; j < m; j++) {\n      this.ports.push(this._evaluatePort(ports[j]));\n    }\n  },\n  _evaluateGroup: function (group) {\n    return util.merge(group, {\n      position: this._getPosition(group.position, true),\n      label: this._getLabel(group, true)\n    });\n  },\n  _evaluatePort: function (port) {\n    var evaluated = util.assign({}, port);\n    var group = this.getGroup(port.group);\n    evaluated.markup = evaluated.markup || group.markup;\n    evaluated.attrs = util.merge({}, group.attrs, evaluated.attrs);\n    evaluated.position = this._createPositionNode(group, evaluated);\n    evaluated.label = util.merge({}, group.label, this._getLabel(evaluated));\n    evaluated.z = this._getZIndex(group, evaluated);\n    evaluated.size = util.assign({}, group.size, evaluated.size);\n    return evaluated;\n  },\n  _getZIndex: function (group, port) {\n    if (util.isNumber(port.z)) {\n      return port.z;\n    }\n    if (util.isNumber(group.z) || group.z === 'auto') {\n      return group.z;\n    }\n    return 'auto';\n  },\n  _createPositionNode: function (group, port) {\n    return util.merge({\n      name: 'left',\n      args: {}\n    }, group.position, {\n      args: port.args\n    });\n  },\n  _getPosition: function (position, setDefault) {\n    var args = {};\n    var positionName;\n    if (util.isFunction(position)) {\n      positionName = 'fn';\n      args.fn = position;\n    } else if (util.isString(position)) {\n      positionName = position;\n    } else if (position === undefined) {\n      positionName = setDefault ? 'left' : null;\n    } else if (Array.isArray(position)) {\n      positionName = 'absolute';\n      args.x = position[0];\n      args.y = position[1];\n    } else if (util.isObject(position)) {\n      positionName = position.name;\n      util.assign(args, position.args);\n    }\n    var result = {\n      args: args\n    };\n    if (positionName) {\n      result.name = positionName;\n    }\n    return result;\n  },\n  _getLabel: function (item, setDefaults) {\n    var label = item.label || {};\n    var ret = label;\n    ret.position = this._getPosition(label.position, setDefaults);\n    return ret;\n  }\n};\nexport const elementPortPrototype = {\n  _initializePorts: function () {\n    this._createPortData();\n    this.on('change:ports', function () {\n      this._processRemovedPort();\n      this._createPortData();\n    }, this);\n  },\n  /**\n   * remove links tied wiht just removed element\n   * @private\n   */\n  _processRemovedPort: function () {\n    var current = this.get('ports') || {};\n    var currentItemsMap = {};\n    util.toArray(current.items).forEach(function (item) {\n      currentItemsMap[item.id] = true;\n    });\n    var previous = this.previous('ports') || {};\n    var removed = {};\n    util.toArray(previous.items).forEach(function (item) {\n      if (!currentItemsMap[item.id]) {\n        removed[item.id] = true;\n      }\n    });\n    var graph = this.graph;\n    if (graph && !util.isEmpty(removed)) {\n      var inboundLinks = graph.getConnectedLinks(this, {\n        inbound: true\n      });\n      inboundLinks.forEach(function (link) {\n        if (removed[link.get('target').port]) link.remove();\n      });\n      var outboundLinks = graph.getConnectedLinks(this, {\n        outbound: true\n      });\n      outboundLinks.forEach(function (link) {\n        if (removed[link.get('source').port]) link.remove();\n      });\n    }\n  },\n  /**\n   * @returns {boolean}\n   */\n  hasPorts: function () {\n    var ports = this.prop('ports/items');\n    return Array.isArray(ports) && ports.length > 0;\n  },\n  /**\n   * @param {string} id\n   * @returns {boolean}\n   */\n  hasPort: function (id) {\n    return this.getPortIndex(id) !== -1;\n  },\n  /**\n   * @returns {Array<object>}\n   */\n  getPorts: function () {\n    return util.cloneDeep(this.prop('ports/items')) || [];\n  },\n  /**\n   * @returns {Array<object>}\n   */\n  getGroupPorts: function (groupName) {\n    const groupPorts = util.toArray(this.prop(['ports', 'items'])).filter(port => port.group === groupName);\n    return util.cloneDeep(groupPorts);\n  },\n  /**\n   * @param {string} id\n   * @returns {object}\n   */\n  getPort: function (id) {\n    return util.cloneDeep(util.toArray(this.prop('ports/items')).find(function (port) {\n      return port.id && port.id === id;\n    }));\n  },\n  /**\n   * @param {string} groupName\n   * @returns {Object<portId, {x: number, y: number, angle: number}>}\n   */\n  getPortsPositions: function (groupName) {\n    var portsMetrics = this._portSettingsData.getGroupPortsMetrics(groupName, Rect(this.size()));\n    return portsMetrics.reduce(function (positions, metrics) {\n      var transformation = metrics.portTransformation;\n      positions[metrics.portId] = {\n        x: transformation.x,\n        y: transformation.y,\n        angle: transformation.angle\n      };\n      return positions;\n    }, {});\n  },\n  /**\n   * @param {string|Port} port port id or port\n   * @returns {number} port index\n   */\n  getPortIndex: function (port) {\n    var id = util.isObject(port) ? port.id : port;\n    if (!this._isValidPortId(id)) {\n      return -1;\n    }\n    return util.toArray(this.prop('ports/items')).findIndex(function (item) {\n      return item.id === id;\n    });\n  },\n  /**\n   * @param {object} port\n   * @param {object} [opt]\n   * @returns {joint.dia.Element}\n   */\n  addPort: function (port, opt) {\n    if (!util.isObject(port) || Array.isArray(port)) {\n      throw new Error('Element: addPort requires an object.');\n    }\n    var ports = util.assign([], this.prop('ports/items'));\n    ports.push(port);\n    this.prop('ports/items', ports, opt);\n    return this;\n  },\n  /**\n   * @param {string|Port|number} before\n   * @param {object} port\n   * @param {object} [opt]\n   * @returns {joint.dia.Element}\n   */\n  insertPort: function (before, port, opt) {\n    const index = typeof before === 'number' ? before : this.getPortIndex(before);\n    if (!util.isObject(port) || Array.isArray(port)) {\n      throw new Error('dia.Element: insertPort requires an object.');\n    }\n    const ports = util.assign([], this.prop('ports/items'));\n    ports.splice(index, 0, port);\n    this.prop('ports/items', ports, opt);\n    return this;\n  },\n  /**\n   * @param {string} portId\n   * @param {string|object=} path\n   * @param {*=} value\n   * @param {object=} opt\n   * @returns {joint.dia.Element}\n   */\n  portProp: function (portId, path, value, opt) {\n    var index = this.getPortIndex(portId);\n    if (index === -1) {\n      throw new Error('Element: unable to find port with id ' + portId);\n    }\n    var args = Array.prototype.slice.call(arguments, 1);\n    if (Array.isArray(path)) {\n      args[0] = ['ports', 'items', index].concat(path);\n    } else if (util.isString(path)) {\n      // Get/set an attribute by a special path syntax that delimits\n      // nested objects by the colon character.\n      args[0] = ['ports/items/', index, '/', path].join('');\n    } else {\n      args = ['ports/items/' + index];\n      if (util.isPlainObject(path)) {\n        args.push(path);\n        args.push(value);\n      }\n    }\n    return this.prop.apply(this, args);\n  },\n  _validatePorts: function () {\n    var portsAttr = this.get('ports') || {};\n    var errorMessages = [];\n    portsAttr = portsAttr || {};\n    var ports = util.toArray(portsAttr.items);\n    ports.forEach(function (p) {\n      if (typeof p !== 'object') {\n        errorMessages.push('Element: invalid port ', p);\n      }\n      if (!this._isValidPortId(p.id)) {\n        p.id = this.generatePortId();\n      }\n    }, this);\n    if (util.uniq(ports, 'id').length !== ports.length) {\n      errorMessages.push('Element: found id duplicities in ports.');\n    }\n    return errorMessages;\n  },\n  generatePortId: function () {\n    return this.generateId();\n  },\n  /**\n   * @param {string} id port id\n   * @returns {boolean}\n   * @private\n   */\n  _isValidPortId: function (id) {\n    return id !== null && id !== undefined && !util.isObject(id);\n  },\n  addPorts: function (ports, opt) {\n    if (ports.length) {\n      this.prop('ports/items', util.assign([], this.prop('ports/items')).concat(ports), opt);\n    }\n    return this;\n  },\n  removePort: function (port, opt) {\n    const options = opt || {};\n    const index = this.getPortIndex(port);\n    if (index !== -1) {\n      const ports = util.assign([], this.prop(['ports', 'items']));\n      ports.splice(index, 1);\n      options.rewrite = true;\n      this.startBatch('port-remove');\n      this.prop(['ports', 'items'], ports, options);\n      this.stopBatch('port-remove');\n    }\n    return this;\n  },\n  removePorts: function (portsForRemoval, opt) {\n    let options, newPorts;\n    if (Array.isArray(portsForRemoval)) {\n      options = opt || {};\n      if (portsForRemoval.length === 0) return this.this;\n      const currentPorts = util.assign([], this.prop(['ports', 'items']));\n      newPorts = currentPorts.filter(function (cp) {\n        return !portsForRemoval.some(function (rp) {\n          const rpId = util.isObject(rp) ? rp.id : rp;\n          return cp.id === rpId;\n        });\n      });\n    } else {\n      options = portsForRemoval || {};\n      newPorts = [];\n    }\n    this.startBatch('port-remove');\n    options.rewrite = true;\n    this.prop(['ports', 'items'], newPorts, options);\n    this.stopBatch('port-remove');\n    return this;\n  },\n  /**\n   * @private\n   */\n  _createPortData: function () {\n    var err = this._validatePorts();\n    if (err.length > 0) {\n      this.set('ports', this.previous('ports'));\n      throw new Error(err.join(' '));\n    }\n    var prevPortData;\n    if (this._portSettingsData) {\n      prevPortData = this._portSettingsData.getPorts();\n    }\n    this._portSettingsData = new PortData(this.get('ports'));\n    var curPortData = this._portSettingsData.getPorts();\n    if (prevPortData) {\n      var added = curPortData.filter(function (item) {\n        if (!prevPortData.find(function (prevPort) {\n          return prevPort.id === item.id;\n        })) {\n          return item;\n        }\n      });\n      var removed = prevPortData.filter(function (item) {\n        if (!curPortData.find(function (curPort) {\n          return curPort.id === item.id;\n        })) {\n          return item;\n        }\n      });\n      if (removed.length > 0) {\n        this.trigger('ports:remove', this, removed);\n      }\n      if (added.length > 0) {\n        this.trigger('ports:add', this, added);\n      }\n    }\n  }\n};\nexport const elementViewPortPrototype = {\n  portContainerMarkup: 'g',\n  portMarkup: [{\n    tagName: 'circle',\n    selector: 'circle',\n    attributes: {\n      'r': 10,\n      'fill': '#FFFFFF',\n      'stroke': '#000000'\n    }\n  }],\n  portLabelMarkup: [{\n    tagName: 'text',\n    selector: 'text',\n    attributes: {\n      'fill': '#000000'\n    }\n  }],\n  /** @type {Object<string, {portElement: Vectorizer, portLabelElement: Vectorizer}>} */\n  _portElementsCache: null,\n  /**\n   * @private\n   */\n  _initializePorts: function () {\n    this._cleanPortsCache();\n  },\n  /**\n   * @typedef {Object} Port\n   *\n   * @property {string} id\n   * @property {Object} position\n   * @property {Object} label\n   * @property {Object} attrs\n   * @property {string} markup\n   * @property {string} group\n   */\n\n  /**\n   * @private\n   */\n  _refreshPorts: function () {\n    this._removePorts();\n    this._cleanPortsCache();\n    this._renderPorts();\n  },\n  _cleanPortsCache: function () {\n    this._portElementsCache = {};\n  },\n  /**\n   * @private\n   */\n  _renderPorts: function () {\n    // references to rendered elements without z-index\n    var elementReferences = [];\n    var elem = this._getContainerElement();\n    for (var i = 0, count = elem.node.childNodes.length; i < count; i++) {\n      elementReferences.push(elem.node.childNodes[i]);\n    }\n    var portsGropsByZ = util.groupBy(this.model._portSettingsData.getPorts(), 'z');\n    var withoutZKey = 'auto';\n\n    // render non-z first\n    util.toArray(portsGropsByZ[withoutZKey]).forEach(function (port) {\n      var portElement = this._getPortElement(port);\n      elem.append(portElement);\n      elementReferences.push(portElement);\n    }, this);\n    var groupNames = Object.keys(portsGropsByZ);\n    for (var k = 0; k < groupNames.length; k++) {\n      var groupName = groupNames[k];\n      if (groupName !== withoutZKey) {\n        var z = parseInt(groupName, 10);\n        this._appendPorts(portsGropsByZ[groupName], z, elementReferences);\n      }\n    }\n    this._updatePorts();\n  },\n  /**\n   * @returns {V}\n   * @private\n   */\n  _getContainerElement: function () {\n    return this.rotatableNode || this.vel;\n  },\n  /**\n   * @param {Array<Port>}ports\n   * @param {number} z\n   * @param refs\n   * @private\n   */\n  _appendPorts: function (ports, z, refs) {\n    var containerElement = this._getContainerElement();\n    var portElements = util.toArray(ports).map(this._getPortElement, this);\n    if (refs[z] || z < 0) {\n      V(refs[Math.max(z, 0)]).before(portElements);\n    } else {\n      containerElement.append(portElements);\n    }\n  },\n  /**\n   * Try to get element from cache,\n   * @param port\n   * @returns {*}\n   * @private\n   */\n  _getPortElement: function (port) {\n    if (this._portElementsCache[port.id]) {\n      return this._portElementsCache[port.id].portElement;\n    }\n    return this._createPortElement(port);\n  },\n  findPortNode: function (portId, selector) {\n    const portCache = this._portElementsCache[portId];\n    if (!portCache) return null;\n    if (!selector) return portCache.portContentElement.node;\n    const portRoot = portCache.portElement.node;\n    const portSelectors = portCache.portSelectors;\n    const [node = null] = this.findBySelector(selector, portRoot, portSelectors);\n    return node;\n  },\n  /**\n   * @private\n   */\n  _updatePorts: function () {\n    // layout ports without group\n    this._updatePortGroup(undefined);\n    // layout ports with explicit group\n    var groupsNames = Object.keys(this.model._portSettingsData.groups);\n    groupsNames.forEach(this._updatePortGroup, this);\n  },\n  /**\n   * @private\n   */\n  _removePorts: function () {\n    util.invoke(this._portElementsCache, 'portElement.remove');\n  },\n  /**\n   * @param {Port} port\n   * @returns {V}\n   * @private\n   */\n  _createPortElement: function (port) {\n    let portElement;\n    let labelElement;\n    let labelSelectors;\n    let portSelectors;\n    var portContainerElement = V(this.portContainerMarkup).addClass('joint-port');\n    var portMarkup = this._getPortMarkup(port);\n    if (Array.isArray(portMarkup)) {\n      var portDoc = this.parseDOMJSON(portMarkup, portContainerElement.node);\n      var portFragment = portDoc.fragment;\n      if (portFragment.childNodes.length > 1) {\n        portElement = V('g').append(portFragment);\n      } else {\n        portElement = V(portFragment.firstChild);\n      }\n      portSelectors = portDoc.selectors;\n    } else {\n      portElement = V(portMarkup);\n      if (Array.isArray(portElement)) {\n        portElement = V('g').append(portElement);\n      }\n    }\n    if (!portElement) {\n      throw new Error('ElementView: Invalid port markup.');\n    }\n    portElement.attr({\n      'port': port.id,\n      'port-group': port.group\n    });\n    const labelMarkupDef = this._getPortLabelMarkup(port.label);\n    if (Array.isArray(labelMarkupDef)) {\n      // JSON Markup\n      const {\n        fragment,\n        selectors\n      } = this.parseDOMJSON(labelMarkupDef, portContainerElement.node);\n      const childCount = fragment.childNodes.length;\n      if (childCount > 0) {\n        labelSelectors = selectors;\n        labelElement = childCount === 1 ? V(fragment.firstChild) : V('g').append(fragment);\n      }\n    } else {\n      // String Markup\n      labelElement = V(labelMarkupDef);\n      if (Array.isArray(labelElement)) {\n        labelElement = V('g').append(labelElement);\n      }\n    }\n    var portContainerSelectors;\n    if (portSelectors && labelSelectors) {\n      for (var key in labelSelectors) {\n        if (portSelectors[key] && key !== this.selector) throw new Error('ElementView: selectors within port must be unique.');\n      }\n      portContainerSelectors = util.assign({}, portSelectors, labelSelectors);\n    } else {\n      portContainerSelectors = portSelectors || labelSelectors || {};\n    }\n\n    // The `portRootSelector` points to the root SVGNode of the port.\n    // Either the implicit wrapping group <g/> in case the port consist of multiple SVGNodes.\n    // Or the single SVGNode of the port.\n    const portRootSelector = 'portRoot';\n    // The `labelRootSelector` points to the root SVGNode of the label.\n    const labelRootSelector = 'labelRoot';\n    // The `labelTextSelector` points to all text SVGNodes of the label.\n    const labelTextSelector = 'labelText';\n    if (!(portRootSelector in portContainerSelectors)) {\n      portContainerSelectors[portRootSelector] = portElement.node;\n    }\n    if (labelElement) {\n      const labelNode = labelElement.node;\n      if (!(labelRootSelector in portContainerSelectors)) {\n        portContainerSelectors[labelRootSelector] = labelNode;\n      }\n      if (!(labelTextSelector in portContainerSelectors)) {\n        // If the label is a <text> element, we can use it directly.\n        // Otherwise, we need to find the <text> element within the label.\n        const labelTextNode = labelElement.tagName() === 'TEXT' ? labelNode : Array.from(labelNode.querySelectorAll('text'));\n        portContainerSelectors[labelTextSelector] = labelTextNode;\n        if (!labelSelectors) labelSelectors = {};\n        labelSelectors[labelTextSelector] = labelTextNode;\n      }\n    }\n    portContainerElement.append(portElement.addClass('joint-port-body'));\n    if (labelElement) {\n      portContainerElement.append(labelElement.addClass('joint-port-label'));\n    }\n    this._portElementsCache[port.id] = {\n      portElement: portContainerElement,\n      portLabelElement: labelElement,\n      portSelectors: portContainerSelectors,\n      portLabelSelectors: labelSelectors,\n      portContentElement: portElement,\n      portContentSelectors: portSelectors\n    };\n    return portContainerElement;\n  },\n  /**\n   * @param {string=} groupName\n   * @private\n   */\n  _updatePortGroup: function (groupName) {\n    var elementBBox = Rect(this.model.size());\n    var portsMetrics = this.model._portSettingsData.getGroupPortsMetrics(groupName, elementBBox);\n    for (var i = 0, n = portsMetrics.length; i < n; i++) {\n      var metrics = portsMetrics[i];\n      var portId = metrics.portId;\n      var cached = this._portElementsCache[portId] || {};\n      var portTransformation = metrics.portTransformation;\n      var labelTransformation = metrics.labelTransformation;\n      if (labelTransformation && cached.portLabelElement) {\n        this.updateDOMSubtreeAttributes(cached.portLabelElement.node, labelTransformation.attrs, {\n          rootBBox: new Rect(metrics.labelSize),\n          selectors: cached.portLabelSelectors\n        });\n        this.applyPortTransform(cached.portLabelElement, labelTransformation, -portTransformation.angle || 0);\n      }\n      this.updateDOMSubtreeAttributes(cached.portElement.node, metrics.portAttrs, {\n        rootBBox: new Rect(metrics.portSize),\n        selectors: cached.portSelectors\n      });\n      this.applyPortTransform(cached.portElement, portTransformation);\n    }\n  },\n  /**\n   * @param {Vectorizer} element\n   * @param {{dx:number, dy:number, angle: number, attrs: Object, x:number: y:number}} transformData\n   * @param {number=} initialAngle\n   * @constructor\n   */\n  applyPortTransform: function (element, transformData, initialAngle) {\n    var matrix = V.createSVGMatrix().rotate(initialAngle || 0).translate(transformData.x || 0, transformData.y || 0).rotate(transformData.angle || 0);\n    element.transform(matrix, {\n      absolute: true\n    });\n  },\n  /**\n   * @param {Port} port\n   * @returns {string}\n   * @private\n   */\n  _getPortMarkup: function (port) {\n    return port.markup || this.model.get('portMarkup') || this.model.portMarkup || this.portMarkup;\n  },\n  /**\n   * @param {Object} label\n   * @returns {string}\n   * @private\n   */\n  _getPortLabelMarkup: function (label) {\n    return label.markup || this.model.get('portLabelMarkup') || this.model.portLabelMarkup || this.portLabelMarkup;\n  }\n};", "import { Cell } from './Cell.mjs';\nimport { Point, toRad, normalizeAngle, Rect } from '../g/index.mjs';\nimport { isNumber, isObject, interpolate, assign, invoke, normalizeSides } from '../util/index.mjs';\nimport { elementPortPrototype } from './ports.mjs';\n\n// Element base model.\n// -----------------------------\n\nexport const Element = Cell.extend({\n  defaults: {\n    position: {\n      x: 0,\n      y: 0\n    },\n    size: {\n      width: 1,\n      height: 1\n    },\n    angle: 0\n  },\n  initialize: function () {\n    this._initializePorts();\n    Cell.prototype.initialize.apply(this, arguments);\n  },\n  /**\n   * @abstract\n   */\n  _initializePorts: function () {\n    // implemented in ports.js\n  },\n  _refreshPorts: function () {\n    // implemented in ports.js\n  },\n  isElement: function () {\n    return true;\n  },\n  position: function (x, y, opt) {\n    const isSetter = isNumber(y);\n    opt = (isSetter ? opt : x) || {};\n    const {\n      parentRelative,\n      deep,\n      restrictedArea\n    } = opt;\n\n    // option `parentRelative` for setting the position relative to the element's parent.\n    let parentPosition;\n    if (parentRelative) {\n      // Getting the parent's position requires the collection.\n      // Cell.parent() holds cell id only.\n      if (!this.graph) throw new Error('Element must be part of a graph.');\n      const parent = this.getParentCell();\n      if (parent && !parent.isLink()) {\n        parentPosition = parent.get('position');\n      }\n    }\n    if (isSetter) {\n      if (parentPosition) {\n        x += parentPosition.x;\n        y += parentPosition.y;\n      }\n      if (deep || restrictedArea) {\n        const {\n          x: x0,\n          y: y0\n        } = this.get('position');\n        this.translate(x - x0, y - y0, opt);\n      } else {\n        this.set('position', {\n          x,\n          y\n        }, opt);\n      }\n      return this;\n    } else {\n      // Getter returns a geometry point.\n\n      const elementPosition = Point(this.get('position'));\n      return parentRelative ? elementPosition.difference(parentPosition) : elementPosition;\n    }\n  },\n  translate: function (tx, ty, opt) {\n    tx = tx || 0;\n    ty = ty || 0;\n    if (tx === 0 && ty === 0) {\n      // Like nothing has happened.\n      return this;\n    }\n    opt = opt || {};\n    // Pass the initiator of the translation.\n    opt.translateBy = opt.translateBy || this.id;\n    var position = this.get('position') || {\n      x: 0,\n      y: 0\n    };\n    var ra = opt.restrictedArea;\n    if (ra && opt.translateBy === this.id) {\n      if (typeof ra === 'function') {\n        var newPosition = ra.call(this, position.x + tx, position.y + ty, opt);\n        tx = newPosition.x - position.x;\n        ty = newPosition.y - position.y;\n      } else {\n        // We are restricting the translation for the element itself only. We get\n        // the bounding box of the element including all its embeds.\n        // All embeds have to be translated the exact same way as the element.\n        var bbox = this.getBBox({\n          deep: true\n        });\n        //- - - - - - - - - - - - -> ra.x + ra.width\n        // - - - -> position.x      |\n        // -> bbox.x\n        //                   |\n        //         \n        //                 |\n        //   \n        //                  |\n        //   <-dx->                     | restricted area right border\n        //         <-width->        |    translated element\n        //   <- - bbox.width - ->        embedded element\n        var dx = position.x - bbox.x;\n        var dy = position.y - bbox.y;\n        // Find the maximal/minimal coordinates that the element can be translated\n        // while complies the restrictions.\n        var x = Math.max(ra.x + dx, Math.min(ra.x + ra.width + dx - bbox.width, position.x + tx));\n        var y = Math.max(ra.y + dy, Math.min(ra.y + ra.height + dy - bbox.height, position.y + ty));\n        // recalculate the translation taking the restrictions into account.\n        tx = x - position.x;\n        ty = y - position.y;\n      }\n    }\n    var translatedPosition = {\n      x: position.x + tx,\n      y: position.y + ty\n    };\n\n    // To find out by how much an element was translated in event 'change:position' handlers.\n    opt.tx = tx;\n    opt.ty = ty;\n    if (opt.transition) {\n      if (!isObject(opt.transition)) opt.transition = {};\n      this.transition('position', translatedPosition, assign({}, opt.transition, {\n        valueFunction: interpolate.object\n      }));\n\n      // Recursively call `translate()` on all the embeds cells.\n      invoke(this.getEmbeddedCells(), 'translate', tx, ty, opt);\n    } else {\n      this.startBatch('translate', opt);\n      this.set('position', translatedPosition, opt);\n      invoke(this.getEmbeddedCells(), 'translate', tx, ty, opt);\n      this.stopBatch('translate', opt);\n    }\n    return this;\n  },\n  size: function (width, height, opt) {\n    var currentSize = this.get('size');\n    // Getter\n    // () signature\n    if (width === undefined) {\n      return {\n        width: currentSize.width,\n        height: currentSize.height\n      };\n    }\n    // Setter\n    // (size, opt) signature\n    if (isObject(width)) {\n      opt = height;\n      height = isNumber(width.height) ? width.height : currentSize.height;\n      width = isNumber(width.width) ? width.width : currentSize.width;\n    }\n    return this.resize(width, height, opt);\n  },\n  resize: function (width, height, opt) {\n    opt = opt || {};\n    this.startBatch('resize', opt);\n    if (opt.direction) {\n      var currentSize = this.get('size');\n      switch (opt.direction) {\n        case 'left':\n        case 'right':\n          // Don't change height when resizing horizontally.\n          height = currentSize.height;\n          break;\n        case 'top':\n        case 'bottom':\n          // Don't change width when resizing vertically.\n          width = currentSize.width;\n          break;\n      }\n\n      // Get the angle and clamp its value between 0 and 360 degrees.\n      var angle = normalizeAngle(this.get('angle') || 0);\n\n      // This is a rectangle in size of the un-rotated element.\n      var bbox = this.getBBox();\n      var origin;\n      if (angle) {\n        var quadrant = {\n          'top-right': 0,\n          'right': 0,\n          'top-left': 1,\n          'top': 1,\n          'bottom-left': 2,\n          'left': 2,\n          'bottom-right': 3,\n          'bottom': 3\n        }[opt.direction];\n        if (opt.absolute) {\n          // We are taking the element's rotation into account\n          quadrant += Math.floor((angle + 45) / 90);\n          quadrant %= 4;\n        }\n\n        // Pick the corner point on the element, which meant to stay on its place before and\n        // after the rotation.\n        var fixedPoint = bbox[['bottomLeft', 'corner', 'topRight', 'origin'][quadrant]]();\n\n        // Find  an image of the previous indent point. This is the position, where is the\n        // point actually located on the screen.\n        var imageFixedPoint = Point(fixedPoint).rotate(bbox.center(), -angle);\n\n        // Every point on the element rotates around a circle with the centre of rotation\n        // in the middle of the element while the whole element is being rotated. That means\n        // that the distance from a point in the corner of the element (supposed its always rect) to\n        // the center of the element doesn't change during the rotation and therefore it equals\n        // to a distance on un-rotated element.\n        // We can find the distance as DISTANCE = (ELEMENTWIDTH/2)^2 + (ELEMENTHEIGHT/2)^2)^0.5.\n        var radius = Math.sqrt(width * width + height * height) / 2;\n\n        // Now we are looking for an angle between x-axis and the line starting at image of fixed point\n        // and ending at the center of the element. We call this angle `alpha`.\n\n        // The image of a fixed point is located in n-th quadrant. For each quadrant passed\n        // going anti-clockwise we have to add 90 degrees. Note that the first quadrant has index 0.\n        //\n        // 3 | 2\n        // --c-- Quadrant positions around the element's center `c`\n        // 0 | 1\n        //\n        var alpha = quadrant * Math.PI / 2;\n\n        // Add an angle between the beginning of the current quadrant (line parallel with x-axis or y-axis\n        // going through the center of the element) and line crossing the indent of the fixed point and the center\n        // of the element. This is the angle we need but on the un-rotated element.\n        alpha += Math.atan(quadrant % 2 == 0 ? height / width : width / height);\n\n        // Lastly we have to deduct the original angle the element was rotated by and that's it.\n        alpha -= toRad(angle);\n\n        // With this angle and distance we can easily calculate the centre of the un-rotated element.\n        // Note that fromPolar constructor accepts an angle in radians.\n        var center = Point.fromPolar(radius, alpha, imageFixedPoint);\n\n        // The top left corner on the un-rotated element has to be half a width on the left\n        // and half a height to the top from the center. This will be the origin of rectangle\n        // we were looking for.\n        origin = Point(center).offset(width / -2, height / -2);\n      } else {\n        // calculation for the origin Point when there is no rotation of the element\n        origin = bbox.topLeft();\n        switch (opt.direction) {\n          case 'top':\n          case 'top-right':\n            origin.offset(0, bbox.height - height);\n            break;\n          case 'left':\n          case 'bottom-left':\n            origin.offset(bbox.width - width, 0);\n            break;\n          case 'top-left':\n            origin.offset(bbox.width - width, bbox.height - height);\n            break;\n        }\n      }\n\n      // Resize the element (before re-positioning it).\n      this.set('size', {\n        width: width,\n        height: height\n      }, opt);\n\n      // Finally, re-position the element.\n      this.position(origin.x, origin.y, opt);\n    } else {\n      // Resize the element.\n      this.set('size', {\n        width: width,\n        height: height\n      }, opt);\n    }\n    this.stopBatch('resize', opt);\n    return this;\n  },\n  scale: function (sx, sy, origin, opt) {\n    var scaledBBox = this.getBBox().scale(sx, sy, origin);\n    this.startBatch('scale', opt);\n    this.position(scaledBBox.x, scaledBBox.y, opt);\n    this.resize(scaledBBox.width, scaledBBox.height, opt);\n    this.stopBatch('scale');\n    return this;\n  },\n  fitEmbeds: function (opt) {\n    return this.fitToChildren(opt);\n  },\n  fitToChildren: function (opt = {}) {\n    // Getting the children's size and position requires the collection.\n    // Cell.get('embeds') holds an array of cell ids only.\n    const {\n      graph\n    } = this;\n    if (!graph) throw new Error('Element must be part of a graph.');\n    const childElements = this.getEmbeddedCells().filter(cell => cell.isElement());\n    if (childElements.length === 0) return this;\n    this.startBatch('fit-embeds', opt);\n    if (opt.deep) {\n      // `opt.deep = true` means \"fit to all descendants\".\n      // As the first action of the fitting algorithm, recursively apply `fitToChildren()` on all descendants.\n      // - i.e. the algorithm is applied in reverse-depth order - start from deepest descendant, then go up (= this element).\n      invoke(childElements, 'fitToChildren', opt);\n    }\n\n    // Set new size and position of this element, based on:\n    // - union of bboxes of all children\n    // - inflated by given `opt.padding`\n    this._fitToElements(Object.assign({\n      elements: childElements\n    }, opt));\n    this.stopBatch('fit-embeds');\n    return this;\n  },\n  fitParent: function (opt = {}) {\n    const {\n      graph\n    } = this;\n    if (!graph) throw new Error('Element must be part of a graph.');\n\n    // When `opt.deep = true`, we want `opt.terminator` to be the last ancestor processed.\n    // If the current element is `opt.terminator`, it means that this element has already been processed as parent so we can exit now.\n    if (opt.deep && opt.terminator && (opt.terminator === this || opt.terminator === this.id)) return this;\n    const parentElement = this.getParentCell();\n    if (!parentElement || !parentElement.isElement()) return this;\n\n    // Get all children of parent element (i.e. this element + any sibling elements).\n    const siblingElements = parentElement.getEmbeddedCells().filter(cell => cell.isElement());\n    if (siblingElements.length === 0) return this;\n    this.startBatch('fit-parent', opt);\n\n    // Set new size and position of parent element, based on:\n    // - union of bboxes of all children of parent element (i.e. this element + any sibling elements)\n    // - inflated by given `opt.padding`\n    parentElement._fitToElements(Object.assign({\n      elements: siblingElements\n    }, opt));\n    if (opt.deep) {\n      // `opt.deep = true` means \"fit all ancestors to their respective children\".\n      // As the last action of the fitting algorithm, recursively apply `fitParent()` on all ancestors.\n      // - i.e. the algorithm is applied in reverse-depth order - start from deepest descendant (= this element), then go up.\n      parentElement.fitParent(opt);\n    }\n    this.stopBatch('fit-parent');\n    return this;\n  },\n  // Assumption: This element is part of a graph.\n  _fitToElements: function (opt = {}) {\n    const elementsBBox = this.graph.getCellsBBox(opt.elements);\n    // If no `opt.elements` were provided, do nothing.\n    if (!elementsBBox) return;\n    const {\n      expandOnly,\n      shrinkOnly\n    } = opt;\n    // This combination is meaningless, do nothing.\n    if (expandOnly && shrinkOnly) return;\n\n    // Calculate new size and position of this element based on:\n    // - union of bboxes of `opt.elements`\n    // - inflated by `opt.padding` (if not provided, all four properties = 0)\n    let {\n      x,\n      y,\n      width,\n      height\n    } = elementsBBox;\n    const {\n      left,\n      right,\n      top,\n      bottom\n    } = normalizeSides(opt.padding);\n    x -= left;\n    y -= top;\n    width += left + right;\n    height += bottom + top;\n    let resultBBox = new Rect(x, y, width, height);\n    if (expandOnly) {\n      // Non-shrinking is enforced by taking union of this element's current bbox with bbox calculated from `opt.elements`.\n      resultBBox = this.getBBox().union(resultBBox);\n    } else if (shrinkOnly) {\n      // Non-expansion is enforced by taking intersection of this element's current bbox with bbox calculated from `opt.elements`.\n      const intersectionBBox = this.getBBox().intersect(resultBBox);\n      // If all children are outside this element's current bbox, then `intersectionBBox` is `null` - does not make sense, do nothing.\n      if (!intersectionBBox) return;\n      resultBBox = intersectionBBox;\n    }\n\n    // Set the new size and position of this element.\n    this.set({\n      position: {\n        x: resultBBox.x,\n        y: resultBBox.y\n      },\n      size: {\n        width: resultBBox.width,\n        height: resultBBox.height\n      }\n    }, opt);\n  },\n  // Rotate element by `angle` degrees, optionally around `origin` point.\n  // If `origin` is not provided, it is considered to be the center of the element.\n  // If `absolute` is `true`, the `angle` is considered is absolute, i.e. it is not\n  // the difference from the previous angle.\n  rotate: function (angle, absolute, origin, opt) {\n    if (origin) {\n      var center = this.getBBox().center();\n      var size = this.get('size');\n      var position = this.get('position');\n      center.rotate(origin, this.get('angle') - angle);\n      var dx = center.x - size.width / 2 - position.x;\n      var dy = center.y - size.height / 2 - position.y;\n      this.startBatch('rotate', {\n        angle: angle,\n        absolute: absolute,\n        origin: origin\n      });\n      this.position(position.x + dx, position.y + dy, opt);\n      this.rotate(angle, absolute, null, opt);\n      this.stopBatch('rotate');\n    } else {\n      this.set('angle', absolute ? angle : (this.get('angle') + angle) % 360, opt);\n    }\n    return this;\n  },\n  angle: function () {\n    return normalizeAngle(this.get('angle') || 0);\n  },\n  getBBox: function (opt = {}) {\n    const {\n      graph,\n      attributes\n    } = this;\n    const {\n      deep,\n      rotate\n    } = opt;\n    if (deep && graph) {\n      // Get all the embedded elements using breadth first algorithm.\n      const elements = this.getEmbeddedCells({\n        deep: true,\n        breadthFirst: true\n      });\n      // Add the model itself.\n      elements.push(this);\n      // Note: the default of getCellsBBox() is rotate=true and can't be\n      // changed without a breaking change\n      return graph.getCellsBBox(elements, opt);\n    }\n    const {\n      angle = 0,\n      position: {\n        x,\n        y\n      },\n      size: {\n        width,\n        height\n      }\n    } = attributes;\n    const bbox = new Rect(x, y, width, height);\n    if (rotate) {\n      bbox.rotateAroundCenter(angle);\n    }\n    return bbox;\n  },\n  getPointFromConnectedLink: function (link, endType) {\n    // Center of the model\n    var bbox = this.getBBox();\n    var center = bbox.center();\n    // Center of a port\n    var endDef = link.get(endType);\n    if (!endDef) return center;\n    var portId = endDef.port;\n    if (!portId || !this.hasPort(portId)) return center;\n    var portGroup = this.portProp(portId, ['group']);\n    var portsPositions = this.getPortsPositions(portGroup);\n    var portCenter = new Point(portsPositions[portId]).offset(bbox.origin());\n    var angle = this.angle();\n    if (angle) portCenter.rotate(center, -angle);\n    return portCenter;\n  }\n});\nassign(Element.prototype, elementPortPrototype);", "export * from './View.mjs';\nexport * from './Listener.mjs';", "import Backbone from 'backbone';\nimport $ from 'jquery';\nimport * as util from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { config } from '../config/index.mjs';\nexport const views = {};\nexport const View = Backbone.View.extend({\n  options: {},\n  theme: null,\n  themeClassNamePrefix: util.addClassNamePrefix('theme-'),\n  requireSetThemeOverride: false,\n  defaultTheme: config.defaultTheme,\n  children: null,\n  childNodes: null,\n  DETACHABLE: true,\n  UPDATE_PRIORITY: 2,\n  FLAG_INSERT: 1 << 30,\n  FLAG_REMOVE: 1 << 29,\n  FLAG_INIT: 1 << 28,\n  constructor: function (options) {\n    this.requireSetThemeOverride = options && !!options.theme;\n    this.options = util.assign({}, this.options, options);\n    Backbone.View.call(this, options);\n  },\n  initialize: function () {\n    views[this.cid] = this;\n    this.setTheme(this.options.theme || this.defaultTheme);\n    this.init();\n  },\n  unmount: function () {\n    if (this.svgElement) {\n      this.vel.remove();\n    } else {\n      this.$el.remove();\n    }\n  },\n  isMounted: function () {\n    return this.el.parentNode !== null;\n  },\n  renderChildren: function (children) {\n    children || (children = util.result(this, 'children'));\n    if (children) {\n      var isSVG = this.svgElement;\n      var namespace = V.namespace[isSVG ? 'svg' : 'xhtml'];\n      var doc = util.parseDOMJSON(children, namespace);\n      (isSVG ? this.vel : this.$el).empty().append(doc.fragment);\n      this.childNodes = doc.selectors;\n    }\n    return this;\n  },\n  findAttribute: function (attributeName, node) {\n    var currentNode = node;\n    while (currentNode && currentNode.nodeType === 1) {\n      var attributeValue = currentNode.getAttribute(attributeName);\n      // attribute found\n      if (attributeValue) return attributeValue;\n      // do not climb up the DOM\n      if (currentNode === this.el) return null;\n      // try parent node\n      currentNode = currentNode.parentNode;\n    }\n    return null;\n  },\n  // Override the Backbone `_ensureElement()` method in order to create an\n  // svg element (e.g., `<g>`) node that wraps all the nodes of the Cell view.\n  // Expose class name setter as a separate method.\n  _ensureElement: function () {\n    if (!this.el) {\n      var tagName = util.result(this, 'tagName');\n      var attrs = util.assign({}, util.result(this, 'attributes'));\n      var style = util.assign({}, util.result(this, 'style'));\n      if (this.id) attrs.id = util.result(this, 'id');\n      this.setElement(this._createElement(tagName));\n      this._setAttributes(attrs);\n      this._setStyle(style);\n    } else {\n      this.setElement(util.result(this, 'el'));\n    }\n    this._ensureElClassName();\n  },\n  _setAttributes: function (attrs) {\n    if (this.svgElement) {\n      this.vel.attr(attrs);\n    } else {\n      this.$el.attr(attrs);\n    }\n  },\n  _setStyle: function (style) {\n    this.$el.css(style);\n  },\n  _createElement: function (tagName) {\n    if (this.svgElement) {\n      return document.createElementNS(V.namespace.svg, tagName);\n    } else {\n      return document.createElement(tagName);\n    }\n  },\n  // Utilize an alternative DOM manipulation API by\n  // adding an element reference wrapped in Vectorizer.\n  _setElement: function (el) {\n    this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n    this.el = this.$el[0];\n    if (this.svgElement) this.vel = V(this.el);\n  },\n  _ensureElClassName: function () {\n    var className = util.result(this, 'className');\n    if (!className) return;\n    var prefixedClassName = util.addClassNamePrefix(className);\n    // Note: className removal here kept for backwards compatibility only\n    if (this.svgElement) {\n      this.vel.removeClass(className).addClass(prefixedClassName);\n    } else {\n      this.$el.removeClass(className).addClass(prefixedClassName);\n    }\n  },\n  init: function () {\n    // Intentionally empty.\n    // This method is meant to be overridden.\n  },\n  onRender: function () {\n    // Intentionally empty.\n    // This method is meant to be overridden.\n  },\n  confirmUpdate: function () {\n    // Intentionally empty.\n    // This method is meant to be overridden.\n    return 0;\n  },\n  setTheme: function (theme, opt) {\n    opt = opt || {};\n\n    // Theme is already set, override is required, and override has not been set.\n    // Don't set the theme.\n    if (this.theme && this.requireSetThemeOverride && !opt.override) {\n      return this;\n    }\n    this.removeThemeClassName();\n    this.addThemeClassName(theme);\n    this.onSetTheme(this.theme /* oldTheme */, theme /* newTheme */);\n    this.theme = theme;\n    return this;\n  },\n  addThemeClassName: function (theme) {\n    theme = theme || this.theme;\n    if (!theme) return this;\n    var className = this.themeClassNamePrefix + theme;\n    if (this.svgElement) {\n      this.vel.addClass(className);\n    } else {\n      this.$el.addClass(className);\n    }\n    return this;\n  },\n  removeThemeClassName: function (theme) {\n    theme = theme || this.theme;\n    var className = this.themeClassNamePrefix + theme;\n    if (this.svgElement) {\n      this.vel.removeClass(className);\n    } else {\n      this.$el.removeClass(className);\n    }\n    return this;\n  },\n  onSetTheme: function (oldTheme, newTheme) {\n    // Intentionally empty.\n    // This method is meant to be overridden.\n  },\n  remove: function () {\n    this.onRemove();\n    this.undelegateDocumentEvents();\n    views[this.cid] = null;\n    Backbone.View.prototype.remove.apply(this, arguments);\n    return this;\n  },\n  onRemove: function () {\n    // Intentionally empty.\n    // This method is meant to be overridden.\n  },\n  getEventNamespace: function () {\n    // Returns a per-session unique namespace\n    return '.joint-event-ns-' + this.cid;\n  },\n  delegateElementEvents: function (element, events, data) {\n    if (!events) return this;\n    data || (data = {});\n    var eventNS = this.getEventNamespace();\n    for (var eventName in events) {\n      var method = events[eventName];\n      if (typeof method !== 'function') method = this[method];\n      if (!method) continue;\n      $(element).on(eventName + eventNS, data, method.bind(this));\n    }\n    return this;\n  },\n  undelegateElementEvents: function (element) {\n    $(element).off(this.getEventNamespace());\n    return this;\n  },\n  delegateDocumentEvents: function (events, data) {\n    events || (events = util.result(this, 'documentEvents'));\n    return this.delegateElementEvents(document, events, data);\n  },\n  undelegateDocumentEvents: function () {\n    return this.undelegateElementEvents(document);\n  },\n  eventData: function (evt, data) {\n    if (!evt) throw new Error('eventData(): event object required.');\n    var currentData = evt.data;\n    var key = '__' + this.cid + '__';\n    if (data === undefined) {\n      if (!currentData) return {};\n      return currentData[key] || {};\n    }\n    currentData || (currentData = evt.data = {});\n    currentData[key] || (currentData[key] = {});\n    util.assign(currentData[key], data);\n    return this;\n  },\n  stopPropagation: function (evt) {\n    this.eventData(evt, {\n      propagationStopped: true\n    });\n    return this;\n  },\n  isPropagationStopped: function (evt) {\n    return !!this.eventData(evt).propagationStopped;\n  }\n}, {\n  extend: function () {\n    var args = Array.from(arguments);\n\n    // Deep clone the prototype and static properties objects.\n    // This prevents unexpected behavior where some properties are overwritten outside of this function.\n    var protoProps = args[0] && util.assign({}, args[0]) || {};\n    var staticProps = args[1] && util.assign({}, args[1]) || {};\n\n    // Need the real render method so that we can wrap it and call it later.\n    var renderFn = protoProps.render || this.prototype && this.prototype.render || null;\n\n    /*\n        Wrap the real render method so that:\n            .. `onRender` is always called.\n            .. `this` is always returned.\n    */\n    protoProps.render = function () {\n      if (typeof renderFn === 'function') {\n        // Call the original render method.\n        renderFn.apply(this, arguments);\n      }\n      if (this.render.__render__ === renderFn) {\n        // Should always call onRender() method.\n        // Should call it only once when renderFn is actual prototype method i.e. not the wrapper\n        this.onRender();\n      }\n\n      // Should always return itself.\n      return this;\n    };\n    protoProps.render.__render__ = renderFn;\n    return Backbone.View.extend.call(this, protoProps, staticProps);\n  }\n});\nconst DoubleTapEventName = 'dbltap';\nif ($.event && !(DoubleTapEventName in $.event.special)) {\n  const maxDelay = config.doubleTapInterval;\n  const minDelay = 30;\n  $.event.special[DoubleTapEventName] = {\n    bindType: 'touchend',\n    delegateType: 'touchend',\n    handle: function (event, ...args) {\n      const {\n        handleObj,\n        target\n      } = event;\n      const targetData = $.data(target);\n      const now = new Date().getTime();\n      const delta = 'lastTouch' in targetData ? now - targetData.lastTouch : 0;\n      if (delta < maxDelay && delta > minDelay) {\n        targetData.lastTouch = null;\n        event.type = handleObj.origType;\n        // let jQuery handle the triggering of \"dbltap\" event handlers\n        handleObj.handler.call(this, event, ...args);\n      } else {\n        targetData.lastTouch = now;\n      }\n    }\n  };\n}", "import Backbone from 'backbone';\nimport V from '../V/index.mjs';\nexport class Listener {\n  constructor(...callbackArguments) {\n    this.callbackArguments = callbackArguments;\n  }\n  listenTo(object, evt, ...args) {\n    const {\n      callbackArguments\n    } = this;\n    // signature 1 - (object, eventHashMap, context)\n    if (V.isObject(evt)) {\n      const [context = null] = args;\n      Object.entries(evt).forEach(([eventName, cb]) => {\n        if (typeof cb !== 'function') return;\n        // Invoke the callback with callbackArguments passed first\n        if (context || callbackArguments.length > 0) cb = cb.bind(context, ...callbackArguments);\n        Backbone.Events.listenTo.call(this, object, eventName, cb);\n      });\n    }\n    // signature 2 - (object, event, callback, context)\n    else if (typeof evt === 'string' && typeof args[0] === 'function') {\n      let [cb, context = null] = args;\n      // Invoke the callback with callbackArguments passed first\n      if (context || callbackArguments.length > 0) cb = cb.bind(context, ...callbackArguments);\n      Backbone.Events.listenTo.call(this, object, evt, cb);\n    }\n  }\n  stopListening() {\n    Backbone.Events.stopListening.call(this);\n  }\n}", "import { View } from '../mvc/index.mjs';\nimport { addClassNamePrefix } from '../util/util.mjs';\nexport const LayersNames = {\n  CELLS: 'cells',\n  BACK: 'back',\n  FRONT: 'front',\n  TOOLS: 'tools',\n  LABELS: 'labels'\n};\nexport const PaperLayer = View.extend({\n  tagName: 'g',\n  svgElement: true,\n  pivotNodes: null,\n  defaultTheme: null,\n  options: {\n    name: ''\n  },\n  className: function () {\n    return addClassNamePrefix(`${this.options.name}-layer`);\n  },\n  init: function () {\n    this.pivotNodes = {};\n  },\n  insertSortedNode: function (node, z) {\n    this.el.insertBefore(node, this.insertPivot(z));\n  },\n  insertNode: function (node) {\n    const {\n      el\n    } = this;\n    if (node.parentNode !== el) {\n      el.appendChild(node);\n    }\n  },\n  insertPivot: function (z) {\n    const {\n      el,\n      pivotNodes\n    } = this;\n    z = +z;\n    z || (z = 0);\n    let pivotNode = pivotNodes[z];\n    if (pivotNode) return pivotNode;\n    pivotNode = pivotNodes[z] = document.createComment('z-index:' + (z + 1));\n    let neighborZ = -Infinity;\n    for (let currentZ in pivotNodes) {\n      currentZ = +currentZ;\n      if (currentZ < z && currentZ > neighborZ) {\n        neighborZ = currentZ;\n        if (neighborZ === z - 1) continue;\n      }\n    }\n    if (neighborZ !== -Infinity) {\n      const neighborPivot = pivotNodes[neighborZ];\n      // Insert After\n      el.insertBefore(pivotNode, neighborPivot.nextSibling);\n    } else {\n      // First Child\n      el.insertBefore(pivotNode, el.firstChild);\n    }\n    return pivotNode;\n  },\n  removePivots: function () {\n    const {\n      el,\n      pivotNodes\n    } = this;\n    for (let z in pivotNodes) el.removeChild(pivotNodes[z]);\n    this.pivotNodes = {};\n  }\n});", "import { config } from '../config/index.mjs';\nimport { View } from '../mvc/index.mjs';\nimport { assign, guid, omit, parseDOMJSON, isFunction, isObject, isPlainObject, isBoolean, isEmpty, isString, toKebabCase, result, sortedIndex, merge, uniq } from '../util/index.mjs';\nimport { Point, Rect } from '../g/index.mjs';\nimport V from '../V/index.mjs';\nimport $ from 'jquery';\nimport { HighlighterView } from './HighlighterView.mjs';\nconst HighlightingTypes = {\n  DEFAULT: 'default',\n  EMBEDDING: 'embedding',\n  CONNECTING: 'connecting',\n  MAGNET_AVAILABILITY: 'magnetAvailability',\n  ELEMENT_AVAILABILITY: 'elementAvailability'\n};\nconst Flags = {\n  TOOLS: 'TOOLS'\n};\n\n// CellView base view and controller.\n// --------------------------------------------\n\n// This is the base view and controller for `ElementView` and `LinkView`.\nexport const CellView = View.extend({\n  tagName: 'g',\n  svgElement: true,\n  selector: 'root',\n  metrics: null,\n  className: function () {\n    var classNames = ['cell'];\n    var type = this.model.get('type');\n    if (type) {\n      type.toLowerCase().split('.').forEach(function (value, index, list) {\n        classNames.push('type-' + list.slice(0, index + 1).join('-'));\n      });\n    }\n    return classNames.join(' ');\n  },\n  _presentationAttributes: null,\n  _flags: null,\n  setFlags: function () {\n    var flags = {};\n    var attributes = {};\n    var shift = 0;\n    var i, n, label;\n    var presentationAttributes = result(this, 'presentationAttributes');\n    for (var attribute in presentationAttributes) {\n      if (!presentationAttributes.hasOwnProperty(attribute)) continue;\n      var labels = presentationAttributes[attribute];\n      if (!Array.isArray(labels)) labels = [labels];\n      for (i = 0, n = labels.length; i < n; i++) {\n        label = labels[i];\n        var flag = flags[label];\n        if (!flag) {\n          flag = flags[label] = 1 << shift++;\n        }\n        attributes[attribute] |= flag;\n      }\n    }\n    var initFlag = result(this, 'initFlag');\n    if (!Array.isArray(initFlag)) initFlag = [initFlag];\n    for (i = 0, n = initFlag.length; i < n; i++) {\n      label = initFlag[i];\n      if (!flags[label]) flags[label] = 1 << shift++;\n    }\n\n    // 26 - 30 are reserved for paper flags\n    // 31+ overflows maximal number\n    if (shift > 25) throw new Error('dia.CellView: Maximum number of flags exceeded.');\n    this._flags = flags;\n    this._presentationAttributes = attributes;\n  },\n  hasFlag: function (flag, label) {\n    return flag & this.getFlag(label);\n  },\n  removeFlag: function (flag, label) {\n    return flag ^ flag & this.getFlag(label);\n  },\n  getFlag: function (label) {\n    var flags = this._flags;\n    if (!flags) return 0;\n    var flag = 0;\n    if (Array.isArray(label)) {\n      for (var i = 0, n = label.length; i < n; i++) flag |= flags[label[i]];\n    } else {\n      flag |= flags[label];\n    }\n    return flag;\n  },\n  attributes: function () {\n    var cell = this.model;\n    return {\n      'model-id': cell.id,\n      'data-type': cell.attributes.type\n    };\n  },\n  constructor: function (options) {\n    // Make sure a global unique id is assigned to this view. Store this id also to the properties object.\n    // The global unique id makes sure that the same view can be rendered on e.g. different machines and\n    // still be associated to the same object among all those clients. This is necessary for real-time\n    // collaboration mechanism.\n    options.id = options.id || guid(this);\n    View.call(this, options);\n  },\n  initialize: function () {\n    this.setFlags();\n    View.prototype.initialize.apply(this, arguments);\n    this.cleanNodesCache();\n\n    // Store reference to this to the <g> DOM element so that the view is accessible through the DOM tree.\n    this.$el.data('view', this);\n    this.startListening();\n  },\n  startListening: function () {\n    this.listenTo(this.model, 'change', this.onAttributesChange);\n  },\n  onAttributesChange: function (model, opt) {\n    var flag = model.getChangeFlag(this._presentationAttributes);\n    if (opt.updateHandled || !flag) return;\n    if (opt.dirty && this.hasFlag(flag, 'UPDATE')) flag |= this.getFlag('RENDER');\n    // TODO: tool changes does not need to be sync\n    // Fix Segments tools\n    if (opt.tool) opt.async = false;\n    this.requestUpdate(flag, opt);\n  },\n  requestUpdate: function (flags, opt) {\n    const {\n      paper\n    } = this;\n    if (paper && flags > 0) {\n      paper.requestViewUpdate(this, flags, this.UPDATE_PRIORITY, opt);\n    }\n  },\n  parseDOMJSON: function (markup, root) {\n    var doc = parseDOMJSON(markup);\n    var selectors = doc.selectors;\n    var groups = doc.groupSelectors;\n    for (var group in groups) {\n      if (selectors[group]) throw new Error('dia.CellView: ambiguous group selector');\n      selectors[group] = groups[group];\n    }\n    if (root) {\n      var rootSelector = this.selector;\n      if (selectors[rootSelector]) throw new Error('dia.CellView: ambiguous root selector.');\n      selectors[rootSelector] = root;\n    }\n    return {\n      fragment: doc.fragment,\n      selectors: selectors\n    };\n  },\n  // Return `true` if cell link is allowed to perform a certain UI `feature`.\n  // Example: `can('vertexMove')`, `can('labelMove')`.\n  can: function (feature) {\n    var interactive = isFunction(this.options.interactive) ? this.options.interactive(this) : this.options.interactive;\n    return isObject(interactive) && interactive[feature] !== false || isBoolean(interactive) && interactive !== false;\n  },\n  findBySelector: function (selector, root, selectors) {\n    root || (root = this.el);\n    selectors || (selectors = this.selectors);\n\n    // These are either descendants of `this.$el` of `this.$el` itself.\n    // `.` is a special selector used to select the wrapping `<g>` element.\n    if (!selector || selector === '.') return [root];\n    if (selectors) {\n      var nodes = selectors[selector];\n      if (nodes) {\n        if (Array.isArray(nodes)) return nodes;\n        return [nodes];\n      }\n    }\n\n    // Maintaining backwards compatibility\n    // e.g. `circle:first` would fail with querySelector() call\n    if (config.useCSSSelectors) return $(root).find(selector).toArray();\n    return [];\n  },\n  notify: function (eventName) {\n    if (this.paper) {\n      var args = Array.prototype.slice.call(arguments, 1);\n\n      // Trigger the event on both the element itself and also on the paper.\n      this.trigger.apply(this, [eventName].concat(args));\n\n      // Paper event handlers receive the view object as the first argument.\n      this.paper.trigger.apply(this.paper, [eventName, this].concat(args));\n    }\n  },\n  getBBox: function (opt) {\n    var bbox;\n    if (opt && opt.useModelGeometry) {\n      var model = this.model;\n      bbox = model.getBBox().bbox(model.angle());\n    } else {\n      bbox = this.getNodeBBox(this.el);\n    }\n    return this.paper.localToPaperRect(bbox);\n  },\n  getNodeBBox: function (magnet) {\n    const rect = this.getNodeBoundingRect(magnet);\n    const transformMatrix = this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(magnet));\n    const magnetMatrix = this.getNodeMatrix(magnet);\n    return V.transformRect(rect, transformMatrix.multiply(magnetMatrix));\n  },\n  getNodeRotateMatrix(node) {\n    if (!this.rotatableNode || this.rotatableNode.contains(node)) {\n      // Rotate transformation is applied to all nodes when no rotatableGroup\n      // is present or to nodes inside the rotatableGroup only.\n      return this.getRootRotateMatrix();\n    }\n    // Nodes outside the rotatable group\n    return V.createSVGMatrix();\n  },\n  getNodeUnrotatedBBox: function (magnet) {\n    var rect = this.getNodeBoundingRect(magnet);\n    var magnetMatrix = this.getNodeMatrix(magnet);\n    var translateMatrix = this.getRootTranslateMatrix();\n    return V.transformRect(rect, translateMatrix.multiply(magnetMatrix));\n  },\n  getRootTranslateMatrix: function () {\n    var model = this.model;\n    var position = model.position();\n    var mt = V.createSVGMatrix().translate(position.x, position.y);\n    return mt;\n  },\n  getRootRotateMatrix: function () {\n    var mr = V.createSVGMatrix();\n    var model = this.model;\n    var angle = model.angle();\n    if (angle) {\n      var bbox = model.getBBox();\n      var cx = bbox.width / 2;\n      var cy = bbox.height / 2;\n      mr = mr.translate(cx, cy).rotate(angle).translate(-cx, -cy);\n    }\n    return mr;\n  },\n  _notifyHighlight: function (eventName, el, opt = {}) {\n    const {\n      el: rootNode\n    } = this;\n    let node;\n    if (typeof el === 'string') {\n      [node = rootNode] = this.findBySelector(el);\n    } else {\n      [node = rootNode] = this.$(el);\n    }\n    // set partial flag if the highlighted element is not the entire view.\n    opt.partial = node !== rootNode;\n    // translate type flag into a type string\n    if (opt.type === undefined) {\n      let type;\n      switch (true) {\n        case opt.embedding:\n          type = HighlightingTypes.EMBEDDING;\n          break;\n        case opt.connecting:\n          type = HighlightingTypes.CONNECTING;\n          break;\n        case opt.magnetAvailability:\n          type = HighlightingTypes.MAGNET_AVAILABILITY;\n          break;\n        case opt.elementAvailability:\n          type = HighlightingTypes.ELEMENT_AVAILABILITY;\n          break;\n        default:\n          type = HighlightingTypes.DEFAULT;\n          break;\n      }\n      opt.type = type;\n    }\n    this.notify(eventName, node, opt);\n    return this;\n  },\n  highlight: function (el, opt) {\n    return this._notifyHighlight('cell:highlight', el, opt);\n  },\n  unhighlight: function (el, opt = {}) {\n    return this._notifyHighlight('cell:unhighlight', el, opt);\n  },\n  // Find the closest element that has the `magnet` attribute set to `true`. If there was not such\n  // an element found, return the root element of the cell view.\n  findMagnet: function (el) {\n    const root = this.el;\n    let magnet = this.$(el)[0];\n    if (!magnet) {\n      magnet = root;\n    }\n    do {\n      const magnetAttribute = magnet.getAttribute('magnet');\n      const isMagnetRoot = magnet === root;\n      if ((magnetAttribute || isMagnetRoot) && magnetAttribute !== 'false') {\n        return magnet;\n      }\n      if (isMagnetRoot) {\n        // If the overall cell has set `magnet === false`, then return `undefined` to\n        // announce there is no magnet found for this cell.\n        // This is especially useful to set on cells that have 'ports'. In this case,\n        // only the ports have set `magnet === true` and the overall element has `magnet === false`.\n        return undefined;\n      }\n      magnet = magnet.parentNode;\n    } while (magnet);\n    return undefined;\n  },\n  findProxyNode: function (el, type) {\n    el || (el = this.el);\n    const nodeSelector = el.getAttribute(`${type}-selector`);\n    if (nodeSelector) {\n      const [proxyNode] = this.findBySelector(nodeSelector);\n      if (proxyNode) return proxyNode;\n    }\n    return el;\n  },\n  // Construct a unique selector for the `el` element within this view.\n  // `prevSelector` is being collected through the recursive call.\n  // No value for `prevSelector` is expected when using this method.\n  getSelector: function (el, prevSelector) {\n    var selector;\n    if (el === this.el) {\n      if (typeof prevSelector === 'string') selector = '> ' + prevSelector;\n      return selector;\n    }\n    if (el) {\n      var nthChild = V(el).index() + 1;\n      selector = el.tagName + ':nth-child(' + nthChild + ')';\n      if (prevSelector) {\n        selector += ' > ' + prevSelector;\n      }\n      selector = this.getSelector(el.parentNode, selector);\n    }\n    return selector;\n  },\n  addLinkFromMagnet: function (magnet, x, y) {\n    var paper = this.paper;\n    var graph = paper.model;\n    var link = paper.getDefaultLink(this, magnet);\n    link.set({\n      source: this.getLinkEnd(magnet, x, y, link, 'source'),\n      target: {\n        x: x,\n        y: y\n      }\n    }).addTo(graph, {\n      async: false,\n      ui: true\n    });\n    return link.findView(paper);\n  },\n  getLinkEnd: function (magnet, ...args) {\n    var model = this.model;\n    var id = model.id;\n    var port = this.findAttribute('port', magnet);\n    // Find a unique `selector` of the element under pointer that is a magnet.\n    var selector = magnet.getAttribute('joint-selector');\n    var end = {\n      id: id\n    };\n    if (selector != null) end.magnet = selector;\n    if (port != null) {\n      end.port = port;\n      if (!model.hasPort(port) && !selector) {\n        // port created via the `port` attribute (not API)\n        end.selector = this.getSelector(magnet);\n      }\n    } else if (selector == null && this.el !== magnet) {\n      end.selector = this.getSelector(magnet);\n    }\n    return this.customizeLinkEnd(end, magnet, ...args);\n  },\n  customizeLinkEnd: function (end, magnet, x, y, link, endType) {\n    const {\n      paper\n    } = this;\n    const {\n      connectionStrategy\n    } = paper.options;\n    if (typeof connectionStrategy === 'function') {\n      var strategy = connectionStrategy.call(paper, end, this, magnet, new Point(x, y), link, endType, paper);\n      if (strategy) return strategy;\n    }\n    return end;\n  },\n  getMagnetFromLinkEnd: function (end) {\n    var root = this.el;\n    var port = end.port;\n    var selector = end.magnet;\n    var model = this.model;\n    var magnet;\n    if (port != null && model.isElement() && model.hasPort(port)) {\n      magnet = this.findPortNode(port, selector) || root;\n    } else {\n      if (!selector) selector = end.selector;\n      if (!selector && port != null) {\n        // link end has only `id` and `port` property referencing\n        // a port created via the `port` attribute (not API).\n        selector = '[port=\"' + port + '\"]';\n      }\n      magnet = this.findBySelector(selector, root, this.selectors)[0];\n    }\n    return this.findProxyNode(magnet, 'magnet');\n  },\n  dragLinkStart: function (evt, magnet, x, y) {\n    this.model.startBatch('add-link');\n    const linkView = this.addLinkFromMagnet(magnet, x, y);\n    // backwards compatibility events\n    linkView.notifyPointerdown(evt, x, y);\n    linkView.eventData(evt, linkView.startArrowheadMove('target', {\n      whenNotAllowed: 'remove'\n    }));\n    this.eventData(evt, {\n      linkView\n    });\n  },\n  dragLink: function (evt, x, y) {\n    var data = this.eventData(evt);\n    var linkView = data.linkView;\n    if (linkView) {\n      linkView.pointermove(evt, x, y);\n    } else {\n      var paper = this.paper;\n      var magnetThreshold = paper.options.magnetThreshold;\n      var currentTarget = this.getEventTarget(evt);\n      var targetMagnet = data.targetMagnet;\n      if (magnetThreshold === 'onleave') {\n        // magnetThreshold when the pointer leaves the magnet\n        if (targetMagnet === currentTarget || V(targetMagnet).contains(currentTarget)) return;\n      } else {\n        // magnetThreshold defined as a number of movements\n        if (paper.eventData(evt).mousemoved <= magnetThreshold) return;\n      }\n      this.dragLinkStart(evt, targetMagnet, x, y);\n    }\n  },\n  dragLinkEnd: function (evt, x, y) {\n    var data = this.eventData(evt);\n    var linkView = data.linkView;\n    if (!linkView) return;\n    linkView.pointerup(evt, x, y);\n    this.model.stopBatch('add-link');\n  },\n  getAttributeDefinition: function (attrName) {\n    return this.model.constructor.getAttributeDefinition(attrName);\n  },\n  setNodeAttributes: function (node, attrs) {\n    if (!isEmpty(attrs)) {\n      if (node instanceof SVGElement) {\n        V(node).attr(attrs);\n      } else {\n        $(node).attr(attrs);\n      }\n    }\n  },\n  processNodeAttributes: function (node, attrs) {\n    var attrName, attrVal, def, i, n;\n    var normalAttrs, setAttrs, positionAttrs, offsetAttrs;\n    var relatives = [];\n    // divide the attributes between normal and special\n    for (attrName in attrs) {\n      if (!attrs.hasOwnProperty(attrName)) continue;\n      attrVal = attrs[attrName];\n      def = this.getAttributeDefinition(attrName);\n      if (def && (!isFunction(def.qualify) || def.qualify.call(this, attrVal, node, attrs, this))) {\n        if (isString(def.set)) {\n          normalAttrs || (normalAttrs = {});\n          normalAttrs[def.set] = attrVal;\n        }\n        if (attrVal !== null) {\n          relatives.push(attrName, def);\n        }\n      } else {\n        normalAttrs || (normalAttrs = {});\n        normalAttrs[toKebabCase(attrName)] = attrVal;\n      }\n    }\n\n    // handle the rest of attributes via related method\n    // from the special attributes namespace.\n    for (i = 0, n = relatives.length; i < n; i += 2) {\n      attrName = relatives[i];\n      def = relatives[i + 1];\n      attrVal = attrs[attrName];\n      if (isFunction(def.set)) {\n        setAttrs || (setAttrs = {});\n        setAttrs[attrName] = attrVal;\n      }\n      if (isFunction(def.position)) {\n        positionAttrs || (positionAttrs = {});\n        positionAttrs[attrName] = attrVal;\n      }\n      if (isFunction(def.offset)) {\n        offsetAttrs || (offsetAttrs = {});\n        offsetAttrs[attrName] = attrVal;\n      }\n    }\n    return {\n      raw: attrs,\n      normal: normalAttrs,\n      set: setAttrs,\n      position: positionAttrs,\n      offset: offsetAttrs\n    };\n  },\n  updateRelativeAttributes: function (node, attrs, refBBox, opt) {\n    opt || (opt = {});\n    var attrName, attrVal, def;\n    var rawAttrs = attrs.raw || {};\n    var nodeAttrs = attrs.normal || {};\n    var setAttrs = attrs.set;\n    var positionAttrs = attrs.position;\n    var offsetAttrs = attrs.offset;\n    for (attrName in setAttrs) {\n      attrVal = setAttrs[attrName];\n      def = this.getAttributeDefinition(attrName);\n      // SET - set function should return attributes to be set on the node,\n      // which will affect the node dimensions based on the reference bounding\n      // box. e.g. `width`, `height`, `d`, `rx`, `ry`, `points\n      var setResult = def.set.call(this, attrVal, refBBox.clone(), node, rawAttrs, this);\n      if (isObject(setResult)) {\n        assign(nodeAttrs, setResult);\n      } else if (setResult !== undefined) {\n        nodeAttrs[attrName] = setResult;\n      }\n    }\n    if (node instanceof HTMLElement) {\n      // TODO: setting the `transform` attribute on HTMLElements\n      // via `node.style.transform = 'matrix(...)';` would introduce\n      // a breaking change (e.g. basic.TextBlock).\n      this.setNodeAttributes(node, nodeAttrs);\n      return;\n    }\n\n    // The final translation of the subelement.\n    var nodeTransform = nodeAttrs.transform;\n    var nodeMatrix = V.transformStringToMatrix(nodeTransform);\n    var nodePosition = Point(nodeMatrix.e, nodeMatrix.f);\n    if (nodeTransform) {\n      nodeAttrs = omit(nodeAttrs, 'transform');\n      nodeMatrix.e = nodeMatrix.f = 0;\n    }\n\n    // Calculate node scale determined by the scalable group\n    // only if later needed.\n    var sx, sy, translation;\n    if (positionAttrs || offsetAttrs) {\n      var nodeScale = this.getNodeScale(node, opt.scalableNode);\n      sx = nodeScale.sx;\n      sy = nodeScale.sy;\n    }\n    var positioned = false;\n    for (attrName in positionAttrs) {\n      attrVal = positionAttrs[attrName];\n      def = this.getAttributeDefinition(attrName);\n      // POSITION - position function should return a point from the\n      // reference bounding box. The default position of the node is x:0, y:0 of\n      // the reference bounding box or could be further specify by some\n      // SVG attributes e.g. `x`, `y`\n      translation = def.position.call(this, attrVal, refBBox.clone(), node, rawAttrs, this);\n      if (translation) {\n        nodePosition.offset(Point(translation).scale(sx, sy));\n        positioned || (positioned = true);\n      }\n    }\n\n    // The node bounding box could depend on the `size` set from the previous loop.\n    // Here we know, that all the size attributes have been already set.\n    this.setNodeAttributes(node, nodeAttrs);\n    var offseted = false;\n    if (offsetAttrs) {\n      // Check if the node is visible\n      var nodeBoundingRect = this.getNodeBoundingRect(node);\n      if (nodeBoundingRect.width > 0 && nodeBoundingRect.height > 0) {\n        var nodeBBox = V.transformRect(nodeBoundingRect, nodeMatrix).scale(1 / sx, 1 / sy);\n        for (attrName in offsetAttrs) {\n          attrVal = offsetAttrs[attrName];\n          def = this.getAttributeDefinition(attrName);\n          // OFFSET - offset function should return a point from the element\n          // bounding box. The default offset point is x:0, y:0 (origin) or could be further\n          // specify with some SVG attributes e.g. `text-anchor`, `cx`, `cy`\n          translation = def.offset.call(this, attrVal, nodeBBox, node, rawAttrs, this);\n          if (translation) {\n            nodePosition.offset(Point(translation).scale(sx, sy));\n            offseted || (offseted = true);\n          }\n        }\n      }\n    }\n\n    // Do not touch node's transform attribute if there is no transformation applied.\n    if (nodeTransform !== undefined || positioned || offseted) {\n      // Round the coordinates to 1 decimal point.\n      nodePosition.round(1);\n      nodeMatrix.e = nodePosition.x;\n      nodeMatrix.f = nodePosition.y;\n      node.setAttribute('transform', V.matrixToTransformString(nodeMatrix));\n      // TODO: store nodeMatrix metrics?\n    }\n  },\n  getNodeScale: function (node, scalableNode) {\n    // Check if the node is a descendant of the scalable group.\n    var sx, sy;\n    if (scalableNode && scalableNode.contains(node)) {\n      var scale = scalableNode.scale();\n      sx = 1 / scale.sx;\n      sy = 1 / scale.sy;\n    } else {\n      sx = 1;\n      sy = 1;\n    }\n    return {\n      sx: sx,\n      sy: sy\n    };\n  },\n  cleanNodesCache: function () {\n    this.metrics = {};\n  },\n  nodeCache: function (magnet) {\n    var metrics = this.metrics;\n    // Don't use cache? It most likely a custom view with overridden update.\n    if (!metrics) return {};\n    var id = V.ensureId(magnet);\n    var value = metrics[id];\n    if (!value) value = metrics[id] = {};\n    return value;\n  },\n  getNodeData: function (magnet) {\n    var metrics = this.nodeCache(magnet);\n    if (!metrics.data) metrics.data = {};\n    return metrics.data;\n  },\n  getNodeBoundingRect: function (magnet) {\n    var metrics = this.nodeCache(magnet);\n    if (metrics.boundingRect === undefined) metrics.boundingRect = V(magnet).getBBox();\n    return new Rect(metrics.boundingRect);\n  },\n  getNodeMatrix: function (magnet) {\n    const metrics = this.nodeCache(magnet);\n    if (metrics.magnetMatrix === undefined) {\n      const {\n        rotatableNode,\n        el\n      } = this;\n      let target;\n      if (rotatableNode && rotatableNode.contains(magnet)) {\n        target = rotatableNode;\n      } else {\n        target = el;\n      }\n      metrics.magnetMatrix = V(magnet).getTransformToElement(target);\n    }\n    return V.createSVGMatrix(metrics.magnetMatrix);\n  },\n  getNodeShape: function (magnet) {\n    var metrics = this.nodeCache(magnet);\n    if (metrics.geometryShape === undefined) metrics.geometryShape = V(magnet).toGeometryShape();\n    return metrics.geometryShape.clone();\n  },\n  isNodeConnection: function (node) {\n    return this.model.isLink() && (!node || node === this.el);\n  },\n  findNodesAttributes: function (attrs, root, selectorCache, selectors) {\n    var i, n, nodeAttrs, nodeId;\n    var nodesAttrs = {};\n    var mergeIds = [];\n    for (var selector in attrs) {\n      if (!attrs.hasOwnProperty(selector)) continue;\n      nodeAttrs = attrs[selector];\n      if (!isPlainObject(nodeAttrs)) continue; // Not a valid selector-attributes pair\n      var selected = selectorCache[selector] = this.findBySelector(selector, root, selectors);\n      for (i = 0, n = selected.length; i < n; i++) {\n        var node = selected[i];\n        nodeId = V.ensureId(node);\n        // \"unique\" selectors are selectors that referencing a single node (defined by `selector`)\n        // groupSelector referencing a single node is not \"unique\"\n        var unique = selectors && selectors[selector] === node;\n        var prevNodeAttrs = nodesAttrs[nodeId];\n        if (prevNodeAttrs) {\n          // Note, that nodes referenced by deprecated `CSS selectors` are not taken into account.\n          // e.g. css:`.circle` and selector:`circle` can be applied in a random order\n          if (!prevNodeAttrs.array) {\n            mergeIds.push(nodeId);\n            prevNodeAttrs.array = true;\n            prevNodeAttrs.attributes = [prevNodeAttrs.attributes];\n            prevNodeAttrs.selectedLength = [prevNodeAttrs.selectedLength];\n          }\n          var attributes = prevNodeAttrs.attributes;\n          var selectedLength = prevNodeAttrs.selectedLength;\n          if (unique) {\n            // node referenced by `selector`\n            attributes.unshift(nodeAttrs);\n            selectedLength.unshift(-1);\n          } else {\n            // node referenced by `groupSelector`\n            var sortIndex = sortedIndex(selectedLength, n);\n            attributes.splice(sortIndex, 0, nodeAttrs);\n            selectedLength.splice(sortIndex, 0, n);\n          }\n        } else {\n          nodesAttrs[nodeId] = {\n            attributes: nodeAttrs,\n            selectedLength: unique ? -1 : n,\n            node: node,\n            array: false\n          };\n        }\n      }\n    }\n    for (i = 0, n = mergeIds.length; i < n; i++) {\n      nodeId = mergeIds[i];\n      nodeAttrs = nodesAttrs[nodeId];\n      nodeAttrs.attributes = merge({}, ...nodeAttrs.attributes.reverse());\n    }\n    return nodesAttrs;\n  },\n  getEventTarget: function (evt, opt = {}) {\n    const {\n      target,\n      type,\n      clientX = 0,\n      clientY = 0\n    } = evt;\n    if (\n    // Explicitly defined `fromPoint` option\n    opt.fromPoint ||\n    // Touchmove/Touchend event's target is not reflecting the element under the coordinates as mousemove does.\n    // It holds the element when a touchstart triggered.\n    type === 'touchmove' || type === 'touchend' ||\n    // Pointermove/Pointerup event with the pointer captured\n    'pointerId' in evt && target.hasPointerCapture(evt.pointerId)) {\n      return document.elementFromPoint(clientX, clientY);\n    }\n    return target;\n  },\n  // Default is to process the `model.attributes.attrs` object and set attributes on subelements based on the selectors,\n  // unless `attrs` parameter was passed.\n  updateDOMSubtreeAttributes: function (rootNode, attrs, opt) {\n    opt || (opt = {});\n    opt.rootBBox || (opt.rootBBox = Rect());\n    opt.selectors || (opt.selectors = this.selectors); // selector collection to use\n\n    // Cache table for query results and bounding box calculation.\n    // Note that `selectorCache` needs to be invalidated for all\n    // `updateAttributes` calls, as the selectors might pointing\n    // to nodes designated by an attribute or elements dynamically\n    // created.\n    var selectorCache = {};\n    var bboxCache = {};\n    var relativeItems = [];\n    var relativeRefItems = [];\n    var item, node, nodeAttrs, nodeData, processedAttrs;\n    var roAttrs = opt.roAttributes;\n    var nodesAttrs = this.findNodesAttributes(roAttrs || attrs, rootNode, selectorCache, opt.selectors);\n    // `nodesAttrs` are different from all attributes, when\n    // rendering only  attributes sent to this method.\n    var nodesAllAttrs = roAttrs ? this.findNodesAttributes(attrs, rootNode, selectorCache, opt.selectors) : nodesAttrs;\n    for (var nodeId in nodesAttrs) {\n      nodeData = nodesAttrs[nodeId];\n      nodeAttrs = nodeData.attributes;\n      node = nodeData.node;\n      processedAttrs = this.processNodeAttributes(node, nodeAttrs);\n      if (!processedAttrs.set && !processedAttrs.position && !processedAttrs.offset) {\n        // Set all the normal attributes right on the SVG/HTML element.\n        this.setNodeAttributes(node, processedAttrs.normal);\n      } else {\n        var nodeAllAttrs = nodesAllAttrs[nodeId] && nodesAllAttrs[nodeId].attributes;\n        var refSelector = nodeAllAttrs && nodeAttrs.ref === undefined ? nodeAllAttrs.ref : nodeAttrs.ref;\n        var refNode;\n        if (refSelector) {\n          refNode = (selectorCache[refSelector] || this.findBySelector(refSelector, rootNode, opt.selectors))[0];\n          if (!refNode) {\n            throw new Error('dia.CellView: \"' + refSelector + '\" reference does not exist.');\n          }\n        } else {\n          refNode = null;\n        }\n        item = {\n          node: node,\n          refNode: refNode,\n          processedAttributes: processedAttrs,\n          allAttributes: nodeAllAttrs\n        };\n        if (refNode) {\n          // If an element in the list is positioned relative to this one, then\n          // we want to insert this one before it in the list.\n          var itemIndex = relativeRefItems.findIndex(function (item) {\n            return item.refNode === node;\n          });\n          if (itemIndex > -1) {\n            relativeRefItems.splice(itemIndex, 0, item);\n          } else {\n            relativeRefItems.push(item);\n          }\n        } else {\n          // A node with no ref attribute. To be updated before the nodes referencing other nodes.\n          // The order of no-ref-items is not specified/important.\n          relativeItems.push(item);\n        }\n      }\n    }\n    relativeItems.push(...relativeRefItems);\n    for (let i = 0, n = relativeItems.length; i < n; i++) {\n      item = relativeItems[i];\n      node = item.node;\n      refNode = item.refNode;\n\n      // Find the reference element bounding box. If no reference was provided, we\n      // use the optional bounding box.\n      const refNodeId = refNode ? V.ensureId(refNode) : '';\n      let refBBox = bboxCache[refNodeId];\n      if (!refBBox) {\n        // Get the bounding box of the reference element using to the common ancestor\n        // transformation space.\n        //\n        // @example 1\n        // <g transform=\"translate(11, 13)\">\n        //     <rect @selector=\"b\" x=\"1\" y=\"2\" width=\"3\" height=\"4\"/>\n        //     <rect @selector=\"a\"/>\n        // </g>\n        //\n        // In this case, the reference bounding box can not be affected\n        // by the `transform` attribute of the `<g>` element,\n        // because the exact transformation will be applied to the `a` element\n        // as well as to the `b` element.\n        //\n        // @example 2\n        // <g transform=\"translate(11, 13)\">\n        //     <rect @selector=\"b\" x=\"1\" y=\"2\" width=\"3\" height=\"4\"/>\n        // </g>\n        // <rect @selector=\"a\"/>\n        //\n        // In this case, the reference bounding box have to be affected by the\n        // `transform` attribute of the `<g>` element, because the `a` element\n        // is not descendant of the `<g>` element and will not be affected\n        // by the transformation.\n        refBBox = bboxCache[refNodeId] = refNode ? V(refNode).getBBox({\n          target: getCommonAncestorNode(node, refNode)\n        }) : opt.rootBBox;\n      }\n      if (roAttrs) {\n        // if there was a special attribute affecting the position amongst passed-in attributes\n        // we have to merge it with the rest of the element's attributes as they are necessary\n        // to update the position relatively (i.e `ref-x` && 'ref-dx')\n        processedAttrs = this.processNodeAttributes(node, item.allAttributes);\n        this.mergeProcessedAttributes(processedAttrs, item.processedAttributes);\n      } else {\n        processedAttrs = item.processedAttributes;\n      }\n      this.updateRelativeAttributes(node, processedAttrs, refBBox, opt);\n    }\n  },\n  mergeProcessedAttributes: function (processedAttrs, roProcessedAttrs) {\n    processedAttrs.set || (processedAttrs.set = {});\n    processedAttrs.position || (processedAttrs.position = {});\n    processedAttrs.offset || (processedAttrs.offset = {});\n    assign(processedAttrs.set, roProcessedAttrs.set);\n    assign(processedAttrs.position, roProcessedAttrs.position);\n    assign(processedAttrs.offset, roProcessedAttrs.offset);\n\n    // Handle also the special transform property.\n    var transform = processedAttrs.normal && processedAttrs.normal.transform;\n    if (transform !== undefined && roProcessedAttrs.normal) {\n      roProcessedAttrs.normal.transform = transform;\n    }\n    processedAttrs.normal = roProcessedAttrs.normal;\n  },\n  // Lifecycle methods\n\n  // Called when the view is attached to the DOM,\n  // as result of `cell.addTo(graph)` being called (isInitialMount === true)\n  // or `paper.options.viewport` returning `true` (isInitialMount === false).\n  onMount(isInitialMount) {\n    if (isInitialMount) return;\n    this.mountTools();\n    HighlighterView.mount(this);\n  },\n  // Called when the view is detached from the DOM,\n  // as result of `paper.options.viewport` returning `false`.\n  onDetach() {\n    this.unmountTools();\n    HighlighterView.unmount(this);\n  },\n  // Called when the view is removed from the DOM\n  // as result of `cell.remove()`.\n  onRemove: function () {\n    this.removeTools();\n    this.removeHighlighters();\n  },\n  _toolsView: null,\n  hasTools: function (name) {\n    var toolsView = this._toolsView;\n    if (!toolsView) return false;\n    if (!name) return true;\n    return toolsView.getName() === name;\n  },\n  addTools: function (toolsView) {\n    this.removeTools();\n    if (toolsView) {\n      this._toolsView = toolsView;\n      toolsView.configure({\n        relatedView: this\n      });\n      toolsView.listenTo(this.paper, 'tools:event', this.onToolEvent.bind(this));\n    }\n    return this;\n  },\n  unmountTools() {\n    const toolsView = this._toolsView;\n    if (toolsView) toolsView.unmount();\n    return this;\n  },\n  mountTools() {\n    const toolsView = this._toolsView;\n    // Prevent unnecessary re-appending of the tools.\n    if (toolsView && !toolsView.isMounted()) toolsView.mount();\n    return this;\n  },\n  updateTools: function (opt) {\n    var toolsView = this._toolsView;\n    if (toolsView) toolsView.update(opt);\n    return this;\n  },\n  removeTools: function () {\n    var toolsView = this._toolsView;\n    if (toolsView) {\n      toolsView.remove();\n      this._toolsView = null;\n    }\n    return this;\n  },\n  hideTools: function () {\n    var toolsView = this._toolsView;\n    if (toolsView) toolsView.hide();\n    return this;\n  },\n  showTools: function () {\n    var toolsView = this._toolsView;\n    if (toolsView) toolsView.show();\n    return this;\n  },\n  onToolEvent: function (event) {\n    switch (event) {\n      case 'remove':\n        this.removeTools();\n        break;\n      case 'hide':\n        this.hideTools();\n        break;\n      case 'show':\n        this.showTools();\n        break;\n    }\n  },\n  removeHighlighters: function () {\n    HighlighterView.remove(this);\n  },\n  updateHighlighters: function (dirty = false) {\n    HighlighterView.update(this, null, dirty);\n  },\n  transformHighlighters: function () {\n    HighlighterView.transform(this);\n  },\n  // Interaction. The controller part.\n  // ---------------------------------\n\n  preventDefaultInteraction(evt) {\n    this.eventData(evt, {\n      defaultInteractionPrevented: true\n    });\n  },\n  isDefaultInteractionPrevented(evt) {\n    const {\n      defaultInteractionPrevented = false\n    } = this.eventData(evt);\n    return defaultInteractionPrevented;\n  },\n  // Interaction is handled by the paper and delegated to the view in interest.\n  // `x` & `y` parameters passed to these functions represent the coordinates already snapped to the paper grid.\n  // If necessary, real coordinates can be obtained from the `evt` event object.\n\n  // These functions are supposed to be overridden by the views that inherit from `joint.dia.Cell`,\n  // i.e. `joint.dia.Element` and `joint.dia.Link`.\n\n  pointerdblclick: function (evt, x, y) {\n    this.notify('cell:pointerdblclick', evt, x, y);\n  },\n  pointerclick: function (evt, x, y) {\n    this.notify('cell:pointerclick', evt, x, y);\n  },\n  contextmenu: function (evt, x, y) {\n    this.notify('cell:contextmenu', evt, x, y);\n  },\n  pointerdown: function (evt, x, y) {\n    const {\n      model\n    } = this;\n    const {\n      graph\n    } = model;\n    if (graph) {\n      model.startBatch('pointer');\n      this.eventData(evt, {\n        graph\n      });\n    }\n    this.notify('cell:pointerdown', evt, x, y);\n  },\n  pointermove: function (evt, x, y) {\n    this.notify('cell:pointermove', evt, x, y);\n  },\n  pointerup: function (evt, x, y) {\n    const {\n      graph\n    } = this.eventData(evt);\n    this.notify('cell:pointerup', evt, x, y);\n    if (graph) {\n      // we don't want to trigger event on model as model doesn't\n      // need to be member of collection anymore (remove)\n      graph.stopBatch('pointer', {\n        cell: this.model\n      });\n    }\n  },\n  mouseover: function (evt) {\n    this.notify('cell:mouseover', evt);\n  },\n  mouseout: function (evt) {\n    this.notify('cell:mouseout', evt);\n  },\n  mouseenter: function (evt) {\n    this.notify('cell:mouseenter', evt);\n  },\n  mouseleave: function (evt) {\n    this.notify('cell:mouseleave', evt);\n  },\n  mousewheel: function (evt, x, y, delta) {\n    this.notify('cell:mousewheel', evt, x, y, delta);\n  },\n  onevent: function (evt, eventName, x, y) {\n    this.notify(eventName, evt, x, y);\n  },\n  onmagnet: function () {\n\n    // noop\n  },\n  magnetpointerdblclick: function () {\n\n    // noop\n  },\n  magnetcontextmenu: function () {\n\n    // noop\n  },\n  checkMouseleave(evt) {\n    const {\n      paper,\n      model\n    } = this;\n    if (paper.isAsync()) {\n      // Make sure the source/target views are updated before this view.\n      // It's not 100% bulletproof (see below) but it's a good enough solution for now.\n      // The connected cells could be links as well. In that case, we would\n      // need to recursively go through all the connected links and update\n      // their source/target views as well.\n      if (model.isLink()) {\n        // The `this.sourceView` and `this.targetView` might not be updated yet.\n        // We need to find the view by the model.\n        const sourceElement = model.getSourceElement();\n        if (sourceElement) {\n          const sourceView = paper.findViewByModel(sourceElement);\n          if (sourceView) {\n            paper.dumpView(sourceView);\n            paper.checkViewVisibility(sourceView);\n          }\n        }\n        const targetElement = model.getTargetElement();\n        if (targetElement) {\n          const targetView = paper.findViewByModel(targetElement);\n          if (targetView) {\n            paper.dumpView(targetView);\n            paper.checkViewVisibility(targetView);\n          }\n        }\n      }\n      // Do the updates of the current view synchronously now\n      paper.dumpView(this);\n      paper.checkViewVisibility(this);\n    }\n    const target = this.getEventTarget(evt, {\n      fromPoint: true\n    });\n    const view = paper.findView(target);\n    if (view === this) return;\n    // Leaving the current view\n    this.mouseleave(evt);\n    if (!view) return;\n    // Entering another view\n    view.mouseenter(evt);\n  },\n  setInteractivity: function (value) {\n    this.options.interactive = value;\n  }\n}, {\n  Flags,\n  Highlighting: HighlightingTypes,\n  addPresentationAttributes: function (presentationAttributes) {\n    return merge({}, result(this.prototype, 'presentationAttributes'), presentationAttributes, function (a, b) {\n      if (!a || !b) return;\n      if (typeof a === 'string') a = [a];\n      if (typeof b === 'string') b = [b];\n      if (Array.isArray(a) && Array.isArray(b)) return uniq(a.concat(b));\n    });\n  }\n});\n\n// TODO: Move to Vectorizer library.\nfunction getCommonAncestorNode(node1, node2) {\n  let parent = node1;\n  do {\n    if (parent.contains(node2)) return parent;\n    parent = parent.parentNode;\n  } while (parent);\n  return null;\n}", "import * as mvc from '../mvc/index.mjs';\nimport V from '../V/index.mjs';\nimport { isPlainObject, result } from '../util/util.mjs';\nfunction toArray(obj) {\n  if (!obj) return [];\n  if (Array.isArray(obj)) return obj;\n  return [obj];\n}\nexport const HighlighterView = mvc.View.extend({\n  tagName: 'g',\n  svgElement: true,\n  className: 'highlight',\n  HIGHLIGHT_FLAG: 1,\n  UPDATE_PRIORITY: 3,\n  DETACHABLE: false,\n  UPDATABLE: true,\n  MOUNTABLE: true,\n  cellView: null,\n  nodeSelector: null,\n  node: null,\n  updateRequested: false,\n  postponedUpdate: false,\n  transformGroup: null,\n  detachedTransformGroup: null,\n  requestUpdate(cellView, nodeSelector) {\n    const {\n      paper\n    } = cellView;\n    this.cellView = cellView;\n    this.nodeSelector = nodeSelector;\n    if (paper) {\n      this.updateRequested = true;\n      paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n    }\n  },\n  confirmUpdate() {\n    // The cellView is now rendered/updated since it has a higher update priority.\n    this.updateRequested = false;\n    const {\n      cellView,\n      nodeSelector\n    } = this;\n    if (!cellView.isMounted()) {\n      this.postponedUpdate = true;\n      return 0;\n    }\n    this.update(cellView, nodeSelector);\n    this.mount();\n    this.transform();\n    return 0;\n  },\n  findNode(cellView, nodeSelector = null) {\n    let el;\n    if (typeof nodeSelector === 'string') {\n      [el] = cellView.findBySelector(nodeSelector);\n    } else if (isPlainObject(nodeSelector)) {\n      const isLink = cellView.model.isLink();\n      const {\n        label = null,\n        port,\n        selector\n      } = nodeSelector;\n      if (isLink && label !== null) {\n        // Link Label Selector\n        el = cellView.findLabelNode(label, selector);\n      } else if (!isLink && port) {\n        // Element Port Selector\n        el = cellView.findPortNode(port, selector);\n      } else {\n        // Cell Selector\n        [el] = cellView.findBySelector(selector);\n      }\n    } else if (nodeSelector) {\n      el = V.toNode(nodeSelector);\n      if (!(el instanceof SVGElement)) el = null;\n    }\n    return el ? el : null;\n  },\n  getNodeMatrix(cellView, node) {\n    const {\n      options\n    } = this;\n    const {\n      layer\n    } = options;\n    const {\n      rotatableNode\n    } = cellView;\n    const nodeMatrix = cellView.getNodeMatrix(node);\n    if (rotatableNode) {\n      if (layer) {\n        if (rotatableNode.contains(node)) {\n          return nodeMatrix;\n        }\n        // The node is outside of the rotatable group.\n        // Compensate the rotation set by transformGroup.\n        return cellView.getRootRotateMatrix().inverse().multiply(nodeMatrix);\n      } else {\n        return cellView.getNodeRotateMatrix(node).multiply(nodeMatrix);\n      }\n    }\n    return nodeMatrix;\n  },\n  mount() {\n    const {\n      MOUNTABLE,\n      cellView,\n      el,\n      options,\n      transformGroup,\n      detachedTransformGroup,\n      postponedUpdate,\n      nodeSelector\n    } = this;\n    if (!MOUNTABLE || transformGroup) return;\n    if (postponedUpdate) {\n      // The cellView was not mounted when the update was requested.\n      // The update was postponed until the cellView is mounted.\n      this.update(cellView, nodeSelector);\n      this.transform();\n      return;\n    }\n    const {\n      vel: cellViewRoot,\n      paper\n    } = cellView;\n    const {\n      layer: layerName\n    } = options;\n    if (layerName) {\n      let vGroup;\n      if (detachedTransformGroup) {\n        vGroup = detachedTransformGroup;\n        this.detachedTransformGroup = null;\n      } else {\n        vGroup = V('g').addClass('highlight-transform').append(el);\n      }\n      this.transformGroup = vGroup;\n      paper.getLayerView(layerName).insertSortedNode(vGroup.node, options.z);\n    } else {\n      // TODO: prepend vs append\n      if (!el.parentNode || el.nextSibling) {\n        // Not appended yet or not the last child\n        cellViewRoot.append(el);\n      }\n    }\n  },\n  unmount() {\n    const {\n      MOUNTABLE,\n      transformGroup,\n      vel\n    } = this;\n    if (!MOUNTABLE) return;\n    if (transformGroup) {\n      this.transformGroup = null;\n      this.detachedTransformGroup = transformGroup;\n      transformGroup.remove();\n    } else {\n      vel.remove();\n    }\n  },\n  transform() {\n    const {\n      transformGroup,\n      cellView,\n      updateRequested\n    } = this;\n    if (!transformGroup || cellView.model.isLink() || updateRequested) return;\n    const translateMatrix = cellView.getRootTranslateMatrix();\n    const rotateMatrix = cellView.getRootRotateMatrix();\n    const transformMatrix = translateMatrix.multiply(rotateMatrix);\n    transformGroup.attr('transform', V.matrixToTransformString(transformMatrix));\n  },\n  update() {\n    const {\n      node: prevNode,\n      cellView,\n      nodeSelector,\n      updateRequested,\n      id\n    } = this;\n    if (updateRequested) return;\n    this.postponedUpdate = false;\n    const node = this.node = this.findNode(cellView, nodeSelector);\n    if (prevNode) {\n      this.unhighlight(cellView, prevNode);\n    }\n    if (node) {\n      this.highlight(cellView, node);\n      this.mount();\n    } else {\n      this.unmount();\n      cellView.notify('cell:highlight:invalid', id, this);\n    }\n  },\n  onRemove() {\n    const {\n      node,\n      cellView,\n      id,\n      constructor\n    } = this;\n    if (node) {\n      this.unhighlight(cellView, node);\n    }\n    this.unmount();\n    constructor._removeRef(cellView, id);\n  },\n  highlight(_cellView, _node) {\n    // to be overridden\n  },\n  unhighlight(_cellView, _node) {\n    // to be overridden\n  },\n  // Update Attributes\n\n  listenToUpdateAttributes(cellView) {\n    const attributes = result(this, 'UPDATE_ATTRIBUTES');\n    if (!Array.isArray(attributes) || attributes.length === 0) return;\n    this.listenTo(cellView.model, 'change', this.onCellAttributeChange);\n  },\n  onCellAttributeChange() {\n    const {\n      cellView\n    } = this;\n    if (!cellView) return;\n    const {\n      model,\n      paper\n    } = cellView;\n    const attributes = result(this, 'UPDATE_ATTRIBUTES');\n    if (!attributes.some(attribute => model.hasChanged(attribute))) return;\n    paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n  }\n}, {\n  _views: {},\n  // Used internally by CellView highlight()\n  highlight: function (cellView, node, opt) {\n    const id = this.uniqueId(node, opt);\n    this.add(cellView, node, id, opt);\n  },\n  // Used internally by CellView unhighlight()\n  unhighlight: function (cellView, node, opt) {\n    const id = this.uniqueId(node, opt);\n    this.remove(cellView, id);\n  },\n  get(cellView, id = null) {\n    const {\n      cid\n    } = cellView;\n    const {\n      _views\n    } = this;\n    const refs = _views[cid];\n    if (id === null) {\n      // all highlighters\n      const views = [];\n      if (!refs) return views;\n      for (let hid in refs) {\n        const ref = refs[hid];\n        if (ref instanceof this) {\n          views.push(ref);\n        }\n      }\n      return views;\n    } else {\n      // single highlighter\n      if (!refs) return null;\n      if (id in refs) {\n        const ref = refs[id];\n        if (ref instanceof this) return ref;\n      }\n      return null;\n    }\n  },\n  add(cellView, nodeSelector, id, opt = {}) {\n    if (!id) throw new Error('dia.HighlighterView: An ID required.');\n    // Search the existing view amongst all the highlighters\n    const previousView = HighlighterView.get(cellView, id);\n    if (previousView) previousView.remove();\n    const view = new this(opt);\n    view.id = id;\n    this._addRef(cellView, id, view);\n    view.requestUpdate(cellView, nodeSelector);\n    view.listenToUpdateAttributes(cellView);\n    return view;\n  },\n  _addRef(cellView, id, view) {\n    const {\n      cid\n    } = cellView;\n    const {\n      _views\n    } = this;\n    let refs = _views[cid];\n    if (!refs) refs = _views[cid] = {};\n    refs[id] = view;\n  },\n  _removeRef(cellView, id) {\n    const {\n      cid\n    } = cellView;\n    const {\n      _views\n    } = this;\n    const refs = _views[cid];\n    if (!refs) return;\n    if (id) delete refs[id];\n    for (let _ in refs) return;\n    delete _views[cid];\n  },\n  remove(cellView, id = null) {\n    toArray(this.get(cellView, id)).forEach(view => {\n      view.remove();\n    });\n  },\n  removeAll(paper, id = null) {\n    const {\n      _views\n    } = this;\n    for (let cid in _views) {\n      for (let hid in _views[cid]) {\n        const view = _views[cid][hid];\n        if (view.cellView.paper === paper && view instanceof this && (id === null || hid === id)) {\n          view.remove();\n        }\n      }\n    }\n  },\n  update(cellView, id = null, dirty = false) {\n    toArray(this.get(cellView, id)).forEach(view => {\n      if (dirty || view.UPDATABLE) view.update();\n    });\n  },\n  transform(cellView, id = null) {\n    toArray(this.get(cellView, id)).forEach(view => {\n      if (view.UPDATABLE) view.transform();\n    });\n  },\n  unmount(cellView, id = null) {\n    toArray(this.get(cellView, id)).forEach(view => view.unmount());\n  },\n  mount(cellView, id = null) {\n    toArray(this.get(cellView, id)).forEach(view => view.mount());\n  },\n  uniqueId(node, opt = '') {\n    return V.ensureId(node) + JSON.stringify(opt);\n  }\n});", "import { config } from '../config/index.mjs';\nimport { assign, isFunction, toArray } from '../util/index.mjs';\nimport { CellView } from './CellView.mjs';\nimport { Cell } from './Cell.mjs';\nimport V from '../V/index.mjs';\nimport { elementViewPortPrototype } from './ports.mjs';\nimport { Rect, snapToGrid } from '../g/index.mjs';\nconst Flags = {\n  TOOLS: CellView.Flags.TOOLS,\n  UPDATE: 'UPDATE',\n  TRANSLATE: 'TRANSLATE',\n  RESIZE: 'RESIZE',\n  PORTS: 'PORTS',\n  ROTATE: 'ROTATE',\n  RENDER: 'RENDER'\n};\nconst DragActions = {\n  MOVE: 'move',\n  MAGNET: 'magnet'\n};\n// Element base view and controller.\n// -------------------------------------------\n\nexport const ElementView = CellView.extend({\n  /**\n   * @abstract\n   */\n  _removePorts: function () {\n    // implemented in ports.js\n  },\n  /**\n   *\n   * @abstract\n   */\n  _renderPorts: function () {\n    // implemented in ports.js\n  },\n  className: function () {\n    var classNames = CellView.prototype.className.apply(this).split(' ');\n    classNames.push('element');\n    return classNames.join(' ');\n  },\n  initialize: function () {\n    CellView.prototype.initialize.apply(this, arguments);\n    this._initializePorts();\n  },\n  presentationAttributes: {\n    'attrs': [Flags.UPDATE],\n    'position': [Flags.TRANSLATE, Flags.TOOLS],\n    'size': [Flags.RESIZE, Flags.PORTS, Flags.TOOLS],\n    'angle': [Flags.ROTATE, Flags.TOOLS],\n    'markup': [Flags.RENDER],\n    'ports': [Flags.PORTS]\n  },\n  initFlag: [Flags.RENDER],\n  UPDATE_PRIORITY: 0,\n  confirmUpdate: function (flag, opt) {\n    const {\n      useCSSSelectors\n    } = config;\n    if (this.hasFlag(flag, Flags.PORTS)) {\n      this._removePorts();\n      this._cleanPortsCache();\n    }\n    let transformHighlighters = false;\n    if (this.hasFlag(flag, Flags.RENDER)) {\n      this.render();\n      this.updateTools(opt);\n      this.updateHighlighters(true);\n      transformHighlighters = true;\n      flag = this.removeFlag(flag, [Flags.RENDER, Flags.UPDATE, Flags.RESIZE, Flags.TRANSLATE, Flags.ROTATE, Flags.PORTS, Flags.TOOLS]);\n    } else {\n      let updateHighlighters = false;\n\n      // Skip this branch if render is required\n      if (this.hasFlag(flag, Flags.RESIZE)) {\n        this.resize(opt);\n        updateHighlighters = true;\n        // Resize method is calling `update()` internally\n        flag = this.removeFlag(flag, [Flags.RESIZE, Flags.UPDATE]);\n        if (useCSSSelectors) {\n          // `resize()` rendered the ports when useCSSSelectors are enabled\n          flag = this.removeFlag(flag, Flags.PORTS);\n        }\n      }\n      if (this.hasFlag(flag, Flags.UPDATE)) {\n        this.update(this.model, null, opt);\n        flag = this.removeFlag(flag, Flags.UPDATE);\n        updateHighlighters = true;\n        if (useCSSSelectors) {\n          // `update()` will render ports when useCSSSelectors are enabled\n          flag = this.removeFlag(flag, Flags.PORTS);\n        }\n      }\n      if (this.hasFlag(flag, Flags.TRANSLATE)) {\n        this.translate();\n        flag = this.removeFlag(flag, Flags.TRANSLATE);\n        transformHighlighters = true;\n      }\n      if (this.hasFlag(flag, Flags.ROTATE)) {\n        this.rotate();\n        flag = this.removeFlag(flag, Flags.ROTATE);\n        transformHighlighters = true;\n      }\n      if (this.hasFlag(flag, Flags.PORTS)) {\n        this._renderPorts();\n        updateHighlighters = true;\n        flag = this.removeFlag(flag, Flags.PORTS);\n      }\n      if (updateHighlighters) {\n        this.updateHighlighters(false);\n      }\n    }\n    if (transformHighlighters) {\n      this.transformHighlighters();\n    }\n    if (this.hasFlag(flag, Flags.TOOLS)) {\n      this.updateTools(opt);\n      flag = this.removeFlag(flag, Flags.TOOLS);\n    }\n    return flag;\n  },\n  /**\n   * @abstract\n   */\n  _initializePorts: function () {},\n  update: function (_, renderingOnlyAttrs) {\n    this.cleanNodesCache();\n\n    // When CSS selector strings are used, make sure no rule matches port nodes.\n    const {\n      useCSSSelectors\n    } = config;\n    if (useCSSSelectors) this._removePorts();\n    var model = this.model;\n    var modelAttrs = model.attr();\n    this.updateDOMSubtreeAttributes(this.el, modelAttrs, {\n      rootBBox: new Rect(model.size()),\n      selectors: this.selectors,\n      scalableNode: this.scalableNode,\n      rotatableNode: this.rotatableNode,\n      // Use rendering only attributes if they differs from the model attributes\n      roAttributes: renderingOnlyAttrs === modelAttrs ? null : renderingOnlyAttrs\n    });\n    if (useCSSSelectors) {\n      this._renderPorts();\n    }\n  },\n  rotatableSelector: 'rotatable',\n  scalableSelector: 'scalable',\n  scalableNode: null,\n  rotatableNode: null,\n  // `prototype.markup` is rendered by default. Set the `markup` attribute on the model if the\n  // default markup is not desirable.\n  renderMarkup: function () {\n    var element = this.model;\n    var markup = element.get('markup') || element.markup;\n    if (!markup) throw new Error('dia.ElementView: markup required');\n    if (Array.isArray(markup)) return this.renderJSONMarkup(markup);\n    if (typeof markup === 'string') return this.renderStringMarkup(markup);\n    throw new Error('dia.ElementView: invalid markup');\n  },\n  renderJSONMarkup: function (markup) {\n    var doc = this.parseDOMJSON(markup, this.el);\n    var selectors = this.selectors = doc.selectors;\n    this.rotatableNode = V(selectors[this.rotatableSelector]) || null;\n    this.scalableNode = V(selectors[this.scalableSelector]) || null;\n    // Fragment\n    this.vel.append(doc.fragment);\n  },\n  renderStringMarkup: function (markup) {\n    var vel = this.vel;\n    vel.append(V(markup));\n    // Cache transformation groups\n    this.rotatableNode = vel.findOne('.rotatable');\n    this.scalableNode = vel.findOne('.scalable');\n    var selectors = this.selectors = {};\n    selectors[this.selector] = this.el;\n  },\n  render: function () {\n    this.vel.empty();\n    this.renderMarkup();\n    if (this.scalableNode) {\n      // Double update is necessary for elements with the scalable group only\n      // Note the resize() triggers the other `update`.\n      this.update();\n    }\n    this.resize();\n    if (this.rotatableNode) {\n      // Translate transformation is applied on `this.el` while the rotation transformation\n      // on `this.rotatableNode`\n      this.rotate();\n      this.translate();\n    } else {\n      this.updateTransformation();\n    }\n    if (!config.useCSSSelectors) this._renderPorts();\n    return this;\n  },\n  resize: function (opt) {\n    if (this.scalableNode) return this.sgResize(opt);\n    if (this.model.attributes.angle) this.rotate();\n    this.update();\n  },\n  translate: function () {\n    if (this.rotatableNode) return this.rgTranslate();\n    this.updateTransformation();\n  },\n  rotate: function () {\n    if (this.rotatableNode) {\n      this.rgRotate();\n      // It's necessary to call the update for the nodes outside\n      // the rotatable group referencing nodes inside the group\n      this.update();\n      return;\n    }\n    this.updateTransformation();\n  },\n  updateTransformation: function () {\n    var transformation = this.getTranslateString();\n    var rotateString = this.getRotateString();\n    if (rotateString) transformation += ' ' + rotateString;\n    this.vel.attr('transform', transformation);\n  },\n  getTranslateString: function () {\n    var position = this.model.attributes.position;\n    return 'translate(' + position.x + ',' + position.y + ')';\n  },\n  getRotateString: function () {\n    var attributes = this.model.attributes;\n    var angle = attributes.angle;\n    if (!angle) return null;\n    var size = attributes.size;\n    return 'rotate(' + angle + ',' + size.width / 2 + ',' + size.height / 2 + ')';\n  },\n  // Rotatable & Scalable Group\n  // always slower, kept mainly for backwards compatibility\n\n  rgRotate: function () {\n    this.rotatableNode.attr('transform', this.getRotateString());\n  },\n  rgTranslate: function () {\n    this.vel.attr('transform', this.getTranslateString());\n  },\n  sgResize: function (opt) {\n    var model = this.model;\n    var angle = model.angle();\n    var size = model.size();\n    var scalable = this.scalableNode;\n\n    // Getting scalable group's bbox.\n    // Due to a bug in webkit's native SVG .getBBox implementation, the bbox of groups with path children includes the paths' control points.\n    // To work around the issue, we need to check whether there are any path elements inside the scalable group.\n    var recursive = false;\n    if (scalable.node.getElementsByTagName('path').length > 0) {\n      // If scalable has at least one descendant that is a path, we need to switch to recursive bbox calculation.\n      // If there are no path descendants, group bbox calculation works and so we can use the (faster) native function directly.\n      recursive = true;\n    }\n    var scalableBBox = scalable.getBBox({\n      recursive: recursive\n    });\n\n    // Make sure `scalableBbox.width` and `scalableBbox.height` are not zero which can happen if the element does not have any content. By making\n    // the width/height 1, we prevent HTML errors of the type `scale(Infinity, Infinity)`.\n    var sx = size.width / (scalableBBox.width || 1);\n    var sy = size.height / (scalableBBox.height || 1);\n    scalable.attr('transform', 'scale(' + sx + ',' + sy + ')');\n\n    // Now the interesting part. The goal is to be able to store the object geometry via just `x`, `y`, `angle`, `width` and `height`\n    // Order of transformations is significant but we want to reconstruct the object always in the order:\n    // resize(), rotate(), translate() no matter of how the object was transformed. For that to work,\n    // we must adjust the `x` and `y` coordinates of the object whenever we resize it (because the origin of the\n    // rotation changes). The new `x` and `y` coordinates are computed by canceling the previous rotation\n    // around the center of the resized object (which is a different origin then the origin of the previous rotation)\n    // and getting the top-left corner of the resulting object. Then we clean up the rotation back to what it originally was.\n\n    // Cancel the rotation but now around a different origin, which is the center of the scaled object.\n    var rotatable = this.rotatableNode;\n    var rotation = rotatable && rotatable.attr('transform');\n    if (rotation) {\n      rotatable.attr('transform', rotation + ' rotate(' + -angle + ',' + size.width / 2 + ',' + size.height / 2 + ')');\n      var rotatableBBox = scalable.getBBox({\n        target: this.paper.cells\n      });\n\n      // Store new x, y and perform rotate() again against the new rotation origin.\n      model.set('position', {\n        x: rotatableBBox.x,\n        y: rotatableBBox.y\n      }, assign({\n        updateHandled: true\n      }, opt));\n      this.translate();\n      this.rotate();\n    }\n\n    // Update must always be called on non-rotated element. Otherwise, relative positioning\n    // would work with wrong (rotated) bounding boxes.\n    this.update();\n  },\n  // Embedding mode methods.\n  // -----------------------\n\n  prepareEmbedding: function (data = {}) {\n    const element = data.model || this.model;\n    const paper = data.paper || this.paper;\n    const graph = paper.model;\n    const initialZIndices = data.initialZIndices = {};\n    const embeddedCells = element.getEmbeddedCells({\n      deep: true\n    });\n    const connectedLinks = graph.getConnectedLinks(element, {\n      deep: true,\n      includeEnclosed: true\n    });\n\n    // Note: an embedded cell can be a connect link, but it's fine\n    // to iterate over the cell twice.\n    [element, ...embeddedCells, ...connectedLinks].forEach(cell => initialZIndices[cell.id] = cell.attributes.z);\n    element.startBatch('to-front');\n\n    // Bring the model to the front with all his embeds.\n    element.toFront({\n      deep: true,\n      ui: true\n    });\n\n    // Note that at this point cells in the collection are not sorted by z index (it's running in the batch, see\n    // the dia.Graph._sortOnChangeZ), so we can't assume that the last cell in the collection has the highest z.\n    const maxZ = graph.getElements().reduce((max, cell) => Math.max(max, cell.attributes.z || 0), 0);\n\n    // Move to front also all the inbound and outbound links that are connected\n    // to any of the element descendant. If we bring to front only embedded elements,\n    // links connected to them would stay in the background.\n    connectedLinks.forEach(link => {\n      if (link.attributes.z <= maxZ) {\n        link.set('z', maxZ + 1, {\n          ui: true\n        });\n      }\n    });\n    element.stopBatch('to-front');\n\n    // Before we start looking for suitable parent we remove the current one.\n    const parentId = element.parent();\n    if (parentId) {\n      const parent = graph.getCell(parentId);\n      parent.unembed(element, {\n        ui: true\n      });\n      data.initialParentId = parentId;\n    } else {\n      data.initialParentId = null;\n    }\n  },\n  processEmbedding: function (data = {}, evt, x, y) {\n    const model = data.model || this.model;\n    const paper = data.paper || this.paper;\n    const graph = paper.model;\n    const {\n      findParentBy,\n      frontParentOnly,\n      validateEmbedding\n    } = paper.options;\n    let candidates;\n    if (isFunction(findParentBy)) {\n      candidates = toArray(findParentBy.call(graph, this, evt, x, y));\n    } else if (findParentBy === 'pointer') {\n      candidates = toArray(graph.findModelsFromPoint({\n        x,\n        y\n      }));\n    } else {\n      candidates = graph.findModelsUnderElement(model, {\n        searchBy: findParentBy\n      });\n    }\n    candidates = candidates.filter(el => {\n      return el instanceof Cell && model.id !== el.id && !el.isEmbeddedIn(model);\n    });\n    if (frontParentOnly) {\n      // pick the element with the highest `z` index\n      candidates = candidates.slice(-1);\n    }\n    let newCandidateView = null;\n    const prevCandidateView = data.candidateEmbedView;\n\n    // iterate over all candidates starting from the last one (has the highest z-index).\n    for (let i = candidates.length - 1; i >= 0; i--) {\n      const candidate = candidates[i];\n      if (prevCandidateView && prevCandidateView.model.id == candidate.id) {\n        // candidate remains the same\n        newCandidateView = prevCandidateView;\n        break;\n      } else {\n        const view = candidate.findView(paper);\n        if (!isFunction(validateEmbedding) || validateEmbedding.call(paper, this, view)) {\n          // flip to the new candidate\n          newCandidateView = view;\n          break;\n        }\n      }\n    }\n    if (newCandidateView && newCandidateView != prevCandidateView) {\n      // A new candidate view found. Highlight the new one.\n      this.clearEmbedding(data);\n      data.candidateEmbedView = newCandidateView.highlight(newCandidateView.findProxyNode(null, 'container'), {\n        embedding: true\n      });\n    }\n    if (!newCandidateView && prevCandidateView) {\n      // No candidate view found. Unhighlight the previous candidate.\n      this.clearEmbedding(data);\n    }\n  },\n  clearEmbedding: function (data) {\n    data || (data = {});\n    var candidateView = data.candidateEmbedView;\n    if (candidateView) {\n      // No candidate view found. Unhighlight the previous candidate.\n      candidateView.unhighlight(candidateView.findProxyNode(null, 'container'), {\n        embedding: true\n      });\n      data.candidateEmbedView = null;\n    }\n  },\n  finalizeEmbedding: function (data = {}) {\n    const candidateView = data.candidateEmbedView;\n    const element = data.model || this.model;\n    const paper = data.paper || this.paper;\n    if (candidateView) {\n      // We finished embedding. Candidate view is chosen to become the parent of the model.\n      candidateView.model.embed(element, {\n        ui: true\n      });\n      candidateView.unhighlight(candidateView.findProxyNode(null, 'container'), {\n        embedding: true\n      });\n      data.candidateEmbedView = null;\n    } else {\n      const {\n        validateUnembedding\n      } = paper.options;\n      const {\n        initialParentId\n      } = data;\n      // The element was originally embedded into another element.\n      // The interaction would unembed the element. Let's validate\n      // if the element can be unembedded.\n      if (initialParentId && typeof validateUnembedding === 'function' && !validateUnembedding.call(paper, this)) {\n        this._disallowUnembed(data);\n        return;\n      }\n    }\n    paper.model.getConnectedLinks(element, {\n      deep: true\n    }).forEach(link => {\n      link.reparent({\n        ui: true\n      });\n    });\n  },\n  _disallowUnembed: function (data) {\n    const {\n      model,\n      whenNotAllowed = 'revert'\n    } = data;\n    const element = model || this.model;\n    const paper = data.paper || this.paper;\n    const graph = paper.model;\n    switch (whenNotAllowed) {\n      case 'remove':\n        {\n          element.remove({\n            ui: true\n          });\n          break;\n        }\n      case 'revert':\n        {\n          const {\n            initialParentId,\n            initialPosition,\n            initialZIndices\n          } = data;\n          // Revert the element's position (and the position of its embedded cells if any)\n          if (initialPosition) {\n            const {\n              x,\n              y\n            } = initialPosition;\n            element.position(x, y, {\n              deep: true,\n              ui: true\n            });\n          }\n          // Revert all the z-indices changed during the embedding\n          if (initialZIndices) {\n            Object.keys(initialZIndices).forEach(id => {\n              const cell = graph.getCell(id);\n              if (cell) {\n                cell.set('z', initialZIndices[id], {\n                  ui: true\n                });\n              }\n            });\n          }\n          // Revert the original parent\n          const parent = graph.getCell(initialParentId);\n          if (parent) {\n            parent.embed(element, {\n              ui: true\n            });\n          }\n          break;\n        }\n    }\n  },\n  getDelegatedView: function () {\n    var view = this;\n    var model = view.model;\n    var paper = view.paper;\n    while (view) {\n      if (model.isLink()) break;\n      if (!model.isEmbedded() || view.can('stopDelegation')) return view;\n      model = model.getParentCell();\n      view = paper.findViewByModel(model);\n    }\n    return null;\n  },\n  findProxyNode: function (el, type) {\n    el || (el = this.el);\n    const nodeSelector = el.getAttribute(`${type}-selector`);\n    if (nodeSelector) {\n      const port = this.findAttribute('port', el);\n      if (port) {\n        const proxyPortNode = this.findPortNode(port, nodeSelector);\n        if (proxyPortNode) return proxyPortNode;\n      } else {\n        const [proxyNode] = this.findBySelector(nodeSelector);\n        if (proxyNode) return proxyNode;\n      }\n    }\n    return el;\n  },\n  // Interaction. The controller part.\n  // ---------------------------------\n\n  notifyPointerdown(evt, x, y) {\n    CellView.prototype.pointerdown.call(this, evt, x, y);\n    this.notify('element:pointerdown', evt, x, y);\n  },\n  notifyPointermove(evt, x, y) {\n    CellView.prototype.pointermove.call(this, evt, x, y);\n    this.notify('element:pointermove', evt, x, y);\n  },\n  notifyPointerup(evt, x, y) {\n    this.notify('element:pointerup', evt, x, y);\n    CellView.prototype.pointerup.call(this, evt, x, y);\n  },\n  pointerdblclick: function (evt, x, y) {\n    CellView.prototype.pointerdblclick.apply(this, arguments);\n    this.notify('element:pointerdblclick', evt, x, y);\n  },\n  pointerclick: function (evt, x, y) {\n    CellView.prototype.pointerclick.apply(this, arguments);\n    this.notify('element:pointerclick', evt, x, y);\n  },\n  contextmenu: function (evt, x, y) {\n    CellView.prototype.contextmenu.apply(this, arguments);\n    this.notify('element:contextmenu', evt, x, y);\n  },\n  pointerdown: function (evt, x, y) {\n    this.notifyPointerdown(evt, x, y);\n    this.dragStart(evt, x, y);\n  },\n  pointermove: function (evt, x, y) {\n    const data = this.eventData(evt);\n    const {\n      targetMagnet,\n      action,\n      delegatedView\n    } = data;\n    if (targetMagnet) {\n      this.magnetpointermove(evt, targetMagnet, x, y);\n    }\n    switch (action) {\n      case DragActions.MAGNET:\n        this.dragMagnet(evt, x, y);\n        break;\n      case DragActions.MOVE:\n        (delegatedView || this).drag(evt, x, y);\n      // eslint: no-fallthrough=false\n      default:\n        if (data.preventPointerEvents) break;\n        this.notifyPointermove(evt, x, y);\n        break;\n    }\n\n    // Make sure the element view data is passed along.\n    // It could have been wiped out in the handlers above.\n    this.eventData(evt, data);\n  },\n  pointerup: function (evt, x, y) {\n    const data = this.eventData(evt);\n    const {\n      targetMagnet,\n      action,\n      delegatedView\n    } = data;\n    if (targetMagnet) {\n      this.magnetpointerup(evt, targetMagnet, x, y);\n    }\n    switch (action) {\n      case DragActions.MAGNET:\n        this.dragMagnetEnd(evt, x, y);\n        break;\n      case DragActions.MOVE:\n        (delegatedView || this).dragEnd(evt, x, y);\n      // eslint: no-fallthrough=false\n      default:\n        if (data.preventPointerEvents) break;\n        this.notifyPointerup(evt, x, y);\n    }\n    if (targetMagnet) {\n      this.magnetpointerclick(evt, targetMagnet, x, y);\n    }\n    this.checkMouseleave(evt);\n  },\n  mouseover: function (evt) {\n    CellView.prototype.mouseover.apply(this, arguments);\n    this.notify('element:mouseover', evt);\n  },\n  mouseout: function (evt) {\n    CellView.prototype.mouseout.apply(this, arguments);\n    this.notify('element:mouseout', evt);\n  },\n  mouseenter: function (evt) {\n    CellView.prototype.mouseenter.apply(this, arguments);\n    this.notify('element:mouseenter', evt);\n  },\n  mouseleave: function (evt) {\n    CellView.prototype.mouseleave.apply(this, arguments);\n    this.notify('element:mouseleave', evt);\n  },\n  mousewheel: function (evt, x, y, delta) {\n    CellView.prototype.mousewheel.apply(this, arguments);\n    this.notify('element:mousewheel', evt, x, y, delta);\n  },\n  onmagnet: function (evt, x, y) {\n    const {\n      currentTarget: targetMagnet\n    } = evt;\n    this.magnetpointerdown(evt, targetMagnet, x, y);\n    this.eventData(evt, {\n      targetMagnet\n    });\n    this.dragMagnetStart(evt, x, y);\n  },\n  magnetpointerdown: function (evt, magnet, x, y) {\n    this.notify('element:magnet:pointerdown', evt, magnet, x, y);\n  },\n  magnetpointermove: function (evt, magnet, x, y) {\n    this.notify('element:magnet:pointermove', evt, magnet, x, y);\n  },\n  magnetpointerup: function (evt, magnet, x, y) {\n    this.notify('element:magnet:pointerup', evt, magnet, x, y);\n  },\n  magnetpointerdblclick: function (evt, magnet, x, y) {\n    this.notify('element:magnet:pointerdblclick', evt, magnet, x, y);\n  },\n  magnetcontextmenu: function (evt, magnet, x, y) {\n    this.notify('element:magnet:contextmenu', evt, magnet, x, y);\n  },\n  // Drag Start Handlers\n\n  dragStart: function (evt, x, y) {\n    if (this.isDefaultInteractionPrevented(evt)) return;\n    var view = this.getDelegatedView();\n    if (!view || !view.can('elementMove')) return;\n    this.eventData(evt, {\n      action: DragActions.MOVE,\n      delegatedView: view\n    });\n    const position = view.model.position();\n    view.eventData(evt, {\n      initialPosition: position,\n      pointerOffset: position.difference(x, y),\n      restrictedArea: this.paper.getRestrictedArea(view, x, y)\n    });\n  },\n  dragMagnetStart: function (evt, x, y) {\n    const {\n      paper\n    } = this;\n    const isPropagationAlreadyStopped = evt.isPropagationStopped();\n    if (isPropagationAlreadyStopped) {\n      // Special case when the propagation was already stopped\n      // on the `element:magnet:pointerdown` event.\n      // Do not trigger any `element:pointer*` events\n      // but still start the magnet dragging.\n      this.eventData(evt, {\n        preventPointerEvents: true\n      });\n    }\n    if (this.isDefaultInteractionPrevented(evt) || !this.can('addLinkFromMagnet')) {\n      // Stop the default action, which is to start dragging a link.\n      return;\n    }\n    const {\n      targetMagnet = evt.currentTarget\n    } = this.eventData(evt);\n    evt.stopPropagation();\n\n    // Invalid (Passive) magnet. Start dragging the element.\n    if (!paper.options.validateMagnet.call(paper, this, targetMagnet, evt)) {\n      if (isPropagationAlreadyStopped) {\n        // Do not trigger `element:pointerdown` and start element dragging\n        // if the propagation was stopped.\n        this.dragStart(evt, x, y);\n        // The `element:pointerdown` event is not triggered because\n        // of `preventPointerEvents` flag.\n      } else {\n        // We need to reset the action\n        // to `MOVE` so that the element is dragged.\n        this.pointerdown(evt, x, y);\n      }\n      return;\n    }\n\n    // Valid magnet. Start dragging a link.\n    if (paper.options.magnetThreshold <= 0) {\n      this.dragLinkStart(evt, targetMagnet, x, y);\n    }\n    this.eventData(evt, {\n      action: DragActions.MAGNET\n    });\n  },\n  // Drag Handlers\n\n  drag: function (evt, x, y) {\n    var paper = this.paper;\n    var grid = paper.options.gridSize;\n    var element = this.model;\n    var data = this.eventData(evt);\n    var {\n      pointerOffset,\n      restrictedArea,\n      embedding\n    } = data;\n\n    // Make sure the new element's position always snaps to the current grid\n    var elX = snapToGrid(x + pointerOffset.x, grid);\n    var elY = snapToGrid(y + pointerOffset.y, grid);\n    element.position(elX, elY, {\n      restrictedArea,\n      deep: true,\n      ui: true\n    });\n    if (paper.options.embeddingMode) {\n      if (!embedding) {\n        // Prepare the element for embedding only if the pointer moves.\n        // We don't want to do unnecessary action with the element\n        // if an user only clicks/dblclicks on it.\n        this.prepareEmbedding(data);\n        embedding = true;\n      }\n      this.processEmbedding(data, evt, x, y);\n    }\n    this.eventData(evt, {\n      embedding\n    });\n  },\n  dragMagnet: function (evt, x, y) {\n    this.dragLink(evt, x, y);\n  },\n  // Drag End Handlers\n\n  dragEnd: function (evt, x, y) {\n    var data = this.eventData(evt);\n    if (data.embedding) this.finalizeEmbedding(data);\n  },\n  dragMagnetEnd: function (evt, x, y) {\n    this.dragLinkEnd(evt, x, y);\n  },\n  magnetpointerclick: function (evt, magnet, x, y) {\n    var paper = this.paper;\n    if (paper.eventData(evt).mousemoved > paper.options.clickThreshold) return;\n    this.notify('element:magnet:pointerclick', evt, magnet, x, y);\n  }\n}, {\n  Flags: Flags\n});\nassign(ElementView.prototype, elementViewPortPrototype);", "export * from './normal.mjs';\nexport * from './oneSide.mjs';\nexport * from './orthogonal.mjs';\nexport * from './manhattan.mjs';\nexport * from './metro.mjs';\nexport * from './rightAngle.mjs';", "// Does not make any changes to vertices.\n// Returns the arguments that are passed to it, unchanged.\nexport const normal = function (vertices, opt, linkView) {\n  return vertices;\n};", "import * as util from '../util/index.mjs';\n\n// Routes the link always to/from a certain side\n//\n// Arguments:\n//   padding ... gap between the element and the first vertex. :: Default 40.\n//   side ... 'left' | 'right' | 'top' | 'bottom' :: Default 'bottom'.\n//\nexport const oneSide = function (vertices, opt, linkView) {\n  var side = opt.side || 'bottom';\n  var padding = util.normalizeSides(opt.padding || 40);\n\n  // LinkView contains cached source an target bboxes.\n  // Note that those are Geometry rectangle objects.\n  var sourceBBox = linkView.sourceBBox;\n  var targetBBox = linkView.targetBBox;\n  var sourcePoint = sourceBBox.center();\n  var targetPoint = targetBBox.center();\n  var coordinate, dimension, direction;\n  switch (side) {\n    case 'bottom':\n      direction = 1;\n      coordinate = 'y';\n      dimension = 'height';\n      break;\n    case 'top':\n      direction = -1;\n      coordinate = 'y';\n      dimension = 'height';\n      break;\n    case 'left':\n      direction = -1;\n      coordinate = 'x';\n      dimension = 'width';\n      break;\n    case 'right':\n      direction = 1;\n      coordinate = 'x';\n      dimension = 'width';\n      break;\n    default:\n      throw new Error('Router: invalid side');\n  }\n\n  // move the points from the center of the element to outside of it.\n  sourcePoint[coordinate] += direction * (sourceBBox[dimension] / 2 + padding[side]);\n  targetPoint[coordinate] += direction * (targetBBox[dimension] / 2 + padding[side]);\n\n  // make link orthogonal (at least the first and last vertex).\n  if (direction * (sourcePoint[coordinate] - targetPoint[coordinate]) > 0) {\n    targetPoint[coordinate] = sourcePoint[coordinate];\n  } else {\n    sourcePoint[coordinate] = targetPoint[coordinate];\n  }\n  return [sourcePoint].concat(vertices, targetPoint);\n};", "import * as g from '../g/index.mjs';\nimport * as util from '../util/index.mjs';\n\n// bearing -> opposite bearing\nvar opposites = {\n  N: 'S',\n  S: 'N',\n  E: 'W',\n  W: 'E'\n};\n\n// bearing -> radians\nvar radians = {\n  N: -Math.PI / 2 * 3,\n  S: -Math.PI / 2,\n  E: 0,\n  W: Math.PI\n};\n\n// HELPERS //\n\n// returns a point `p` where lines p,p1 and p,p2 are perpendicular and p is not contained\n// in the given box\nfunction freeJoin(p1, p2, bbox) {\n  var p = new g.Point(p1.x, p2.y);\n  if (bbox.containsPoint(p)) p = new g.Point(p2.x, p1.y);\n  // kept for reference\n  // if (bbox.containsPoint(p)) p = null;\n\n  return p;\n}\n\n// returns either width or height of a bbox based on the given bearing\nfunction getBBoxSize(bbox, bearing) {\n  return bbox[bearing === 'W' || bearing === 'E' ? 'width' : 'height'];\n}\n\n// simple bearing method (calculates only orthogonal cardinals)\nfunction getBearing(from, to) {\n  if (from.x === to.x) return from.y > to.y ? 'N' : 'S';\n  if (from.y === to.y) return from.x > to.x ? 'W' : 'E';\n  return null;\n}\n\n// transform point to a rect\nfunction getPointBox(p) {\n  return new g.Rect(p.x, p.y, 0, 0);\n}\nfunction getPaddingBox(opt) {\n  // if both provided, opt.padding wins over opt.elementPadding\n  var sides = util.normalizeSides(opt.padding || opt.elementPadding || 20);\n  return {\n    x: -sides.left,\n    y: -sides.top,\n    width: sides.left + sides.right,\n    height: sides.top + sides.bottom\n  };\n}\n\n// return source bbox\nfunction getSourceBBox(linkView, opt) {\n  return linkView.sourceBBox.clone().moveAndExpand(getPaddingBox(opt));\n}\n\n// return target bbox\nfunction getTargetBBox(linkView, opt) {\n  return linkView.targetBBox.clone().moveAndExpand(getPaddingBox(opt));\n}\n\n// return source anchor\nfunction getSourceAnchor(linkView, opt) {\n  if (linkView.sourceAnchor) return linkView.sourceAnchor;\n\n  // fallback: center of bbox\n  var sourceBBox = getSourceBBox(linkView, opt);\n  return sourceBBox.center();\n}\n\n// return target anchor\nfunction getTargetAnchor(linkView, opt) {\n  if (linkView.targetAnchor) return linkView.targetAnchor;\n\n  // fallback: center of bbox\n  var targetBBox = getTargetBBox(linkView, opt);\n  return targetBBox.center(); // default\n}\n\n// PARTIAL ROUTERS //\n\nfunction vertexVertex(from, to, bearing) {\n  var p1 = new g.Point(from.x, to.y);\n  var p2 = new g.Point(to.x, from.y);\n  var d1 = getBearing(from, p1);\n  var d2 = getBearing(from, p2);\n  var opposite = opposites[bearing];\n  var p = d1 === bearing || d1 !== opposite && (d2 === opposite || d2 !== bearing) ? p1 : p2;\n  return {\n    points: [p],\n    direction: getBearing(p, to)\n  };\n}\nfunction elementVertex(from, to, fromBBox) {\n  var p = freeJoin(from, to, fromBBox);\n  return {\n    points: [p],\n    direction: getBearing(p, to)\n  };\n}\nfunction vertexElement(from, to, toBBox, bearing) {\n  var route = {};\n  var points = [new g.Point(from.x, to.y), new g.Point(to.x, from.y)];\n  var freePoints = points.filter(function (pt) {\n    return !toBBox.containsPoint(pt);\n  });\n  var freeBearingPoints = freePoints.filter(function (pt) {\n    return getBearing(pt, from) !== bearing;\n  });\n  var p;\n  if (freeBearingPoints.length > 0) {\n    // Try to pick a point which bears the same direction as the previous segment.\n\n    p = freeBearingPoints.filter(function (pt) {\n      return getBearing(from, pt) === bearing;\n    }).pop();\n    p = p || freeBearingPoints[0];\n    route.points = [p];\n    route.direction = getBearing(p, to);\n  } else {\n    // Here we found only points which are either contained in the element or they would create\n    // a link segment going in opposite direction from the previous one.\n    // We take the point inside element and move it outside the element in the direction the\n    // route is going. Now we can join this point with the current end (using freeJoin).\n\n    p = util.difference(points, freePoints)[0];\n    var p2 = new g.Point(to).move(p, -getBBoxSize(toBBox, bearing) / 2);\n    var p1 = freeJoin(p2, from, toBBox);\n    route.points = [p1, p2];\n    route.direction = getBearing(p2, to);\n  }\n  return route;\n}\nfunction elementElement(from, to, fromBBox, toBBox) {\n  var route = elementVertex(to, from, toBBox);\n  var p1 = route.points[0];\n  if (fromBBox.containsPoint(p1)) {\n    route = elementVertex(from, to, fromBBox);\n    var p2 = route.points[0];\n    if (toBBox.containsPoint(p2)) {\n      var fromBorder = new g.Point(from).move(p2, -getBBoxSize(fromBBox, getBearing(from, p2)) / 2);\n      var toBorder = new g.Point(to).move(p1, -getBBoxSize(toBBox, getBearing(to, p1)) / 2);\n      var mid = new g.Line(fromBorder, toBorder).midpoint();\n      var startRoute = elementVertex(from, mid, fromBBox);\n      var endRoute = vertexVertex(mid, to, startRoute.direction);\n      route.points = [startRoute.points[0], endRoute.points[0]];\n      route.direction = endRoute.direction;\n    }\n  }\n  return route;\n}\n\n// Finds route for situations where one element is inside the other.\n// Typically the route is directed outside the outer element first and\n// then back towards the inner element.\nfunction insideElement(from, to, fromBBox, toBBox, bearing) {\n  var route = {};\n  var boundary = fromBBox.union(toBBox).inflate(1);\n\n  // start from the point which is closer to the boundary\n  var reversed = boundary.center().distance(to) > boundary.center().distance(from);\n  var start = reversed ? to : from;\n  var end = reversed ? from : to;\n  var p1, p2, p3;\n  if (bearing) {\n    // Points on circle with radius equals 'W + H` are always outside the rectangle\n    // with width W and height H if the center of that circle is the center of that rectangle.\n    p1 = g.Point.fromPolar(boundary.width + boundary.height, radians[bearing], start);\n    p1 = boundary.pointNearestToPoint(p1).move(p1, -1);\n  } else {\n    p1 = boundary.pointNearestToPoint(start).move(start, 1);\n  }\n  p2 = freeJoin(p1, end, boundary);\n  if (p1.round().equals(p2.round())) {\n    p2 = g.Point.fromPolar(boundary.width + boundary.height, g.toRad(p1.theta(start)) + Math.PI / 2, end);\n    p2 = boundary.pointNearestToPoint(p2).move(end, 1).round();\n    p3 = freeJoin(p1, p2, boundary);\n    route.points = reversed ? [p2, p3, p1] : [p1, p3, p2];\n  } else {\n    route.points = reversed ? [p2, p1] : [p1, p2];\n  }\n  route.direction = reversed ? getBearing(p1, to) : getBearing(p2, to);\n  return route;\n}\n\n// MAIN ROUTER //\n\n// Return points through which a connection needs to be drawn in order to obtain an orthogonal link\n// routing from source to target going through `vertices`.\nexport function orthogonal(vertices, opt, linkView) {\n  var sourceBBox = getSourceBBox(linkView, opt);\n  var targetBBox = getTargetBBox(linkView, opt);\n  var sourceAnchor = getSourceAnchor(linkView, opt);\n  var targetAnchor = getTargetAnchor(linkView, opt);\n\n  // if anchor lies outside of bbox, the bbox expands to include it\n  sourceBBox = sourceBBox.union(getPointBox(sourceAnchor));\n  targetBBox = targetBBox.union(getPointBox(targetAnchor));\n  vertices = util.toArray(vertices).map(g.Point);\n  vertices.unshift(sourceAnchor);\n  vertices.push(targetAnchor);\n  var bearing; // bearing of previous route segment\n\n  var orthogonalVertices = []; // the array of found orthogonal vertices to be returned\n  for (var i = 0, max = vertices.length - 1; i < max; i++) {\n    var route = null;\n    var from = vertices[i];\n    var to = vertices[i + 1];\n    var isOrthogonal = !!getBearing(from, to);\n    if (i === 0) {\n      // source\n\n      if (i + 1 === max) {\n        // route source -> target\n\n        // Expand one of the elements by 1px to detect situations when the two\n        // elements are positioned next to each other with no gap in between.\n        if (sourceBBox.intersect(targetBBox.clone().inflate(1))) {\n          route = insideElement(from, to, sourceBBox, targetBBox);\n        } else if (!isOrthogonal) {\n          route = elementElement(from, to, sourceBBox, targetBBox);\n        }\n      } else {\n        // route source -> vertex\n\n        if (sourceBBox.containsPoint(to)) {\n          route = insideElement(from, to, sourceBBox, getPointBox(to).moveAndExpand(getPaddingBox(opt)));\n        } else if (!isOrthogonal) {\n          route = elementVertex(from, to, sourceBBox);\n        }\n      }\n    } else if (i + 1 === max) {\n      // route vertex -> target\n\n      // prevent overlaps with previous line segment\n      var isOrthogonalLoop = isOrthogonal && getBearing(to, from) === bearing;\n      if (targetBBox.containsPoint(from) || isOrthogonalLoop) {\n        route = insideElement(from, to, getPointBox(from).moveAndExpand(getPaddingBox(opt)), targetBBox, bearing);\n      } else if (!isOrthogonal) {\n        route = vertexElement(from, to, targetBBox, bearing);\n      }\n    } else if (!isOrthogonal) {\n      // route vertex -> vertex\n      route = vertexVertex(from, to, bearing);\n    }\n\n    // applicable to all routes:\n\n    // set bearing for next iteration\n    if (route) {\n      Array.prototype.push.apply(orthogonalVertices, route.points);\n      bearing = route.direction;\n    } else {\n      // orthogonal route and not looped\n      bearing = getBearing(from, to);\n    }\n\n    // push `to` point to identified orthogonal vertices array\n    if (i + 1 < max) {\n      orthogonalVertices.push(to);\n    }\n  }\n  return orthogonalVertices;\n}", "import * as g from '../g/index.mjs';\nimport * as util from '../util/index.mjs';\nimport { orthogonal } from './orthogonal.mjs';\nvar config = {\n  // size of the step to find a route (the grid of the manhattan pathfinder)\n  step: 10,\n  // the number of route finding loops that cause the router to abort\n  // returns fallback route instead\n  maximumLoops: 2000,\n  // the number of decimal places to round floating point coordinates\n  precision: 1,\n  // maximum change of direction\n  maxAllowedDirectionChange: 90,\n  // should the router use perpendicular linkView option?\n  // does not connect anchor of element but rather a point close-by that is orthogonal\n  // this looks much better\n  perpendicular: true,\n  // should the source and/or target not be considered as obstacles?\n  excludeEnds: [],\n  // 'source', 'target'\n\n  // should certain types of elements not be considered as obstacles?\n  excludeTypes: ['basic.Text'],\n  // possible starting directions from an element\n  startDirections: ['top', 'right', 'bottom', 'left'],\n  // possible ending directions to an element\n  endDirections: ['top', 'right', 'bottom', 'left'],\n  // specify the directions used above and what they mean\n  directionMap: {\n    top: {\n      x: 0,\n      y: -1\n    },\n    right: {\n      x: 1,\n      y: 0\n    },\n    bottom: {\n      x: 0,\n      y: 1\n    },\n    left: {\n      x: -1,\n      y: 0\n    }\n  },\n  // cost of an orthogonal step\n  cost: function () {\n    return this.step;\n  },\n  // an array of directions to find next points on the route\n  // different from start/end directions\n  directions: function () {\n    var step = this.step;\n    var cost = this.cost();\n    return [{\n      offsetX: step,\n      offsetY: 0,\n      cost: cost\n    }, {\n      offsetX: -step,\n      offsetY: 0,\n      cost: cost\n    }, {\n      offsetX: 0,\n      offsetY: step,\n      cost: cost\n    }, {\n      offsetX: 0,\n      offsetY: -step,\n      cost: cost\n    }];\n  },\n  // a penalty received for direction change\n  penalties: function () {\n    return {\n      0: 0,\n      45: this.step / 2,\n      90: this.step / 2\n    };\n  },\n  // padding applied on the element bounding boxes\n  paddingBox: function () {\n    var step = this.step;\n    return {\n      x: -step,\n      y: -step,\n      width: 2 * step,\n      height: 2 * step\n    };\n  },\n  // A function that determines whether a given point is an obstacle or not.\n  // If used, the `padding`, `excludeEnds`and `excludeTypes` options are ignored.\n  // (point: dia.Point) => boolean;\n  isPointObstacle: null,\n  // a router to use when the manhattan router fails\n  // (one of the partial routes returns null)\n  fallbackRouter: function (vertices, opt, linkView) {\n    if (!util.isFunction(orthogonal)) {\n      throw new Error('Manhattan requires the orthogonal router as default fallback.');\n    }\n    return orthogonal(vertices, util.assign({}, config, opt), linkView);\n  },\n  /* Deprecated */\n  // a simple route used in situations when main routing method fails\n  // (exceed max number of loop iterations, inaccessible)\n  fallbackRoute: function (from, to, opt) {\n    return null; // null result will trigger the fallbackRouter\n\n    // left for reference:\n    /*// Find an orthogonal route ignoring obstacles.\n     var point = ((opt.previousDirAngle || 0) % 180 === 0)\n            ? new g.Point(from.x, to.y)\n            : new g.Point(to.x, from.y);\n     return [point];*/\n  },\n  // if a function is provided, it's used to route the link while dragging an end\n  // i.e. function(from, to, opt) { return []; }\n  draggingRoute: null\n};\n\n// HELPER CLASSES //\n\n// Map of obstacles\n// Helper structure to identify whether a point lies inside an obstacle.\nfunction ObstacleMap(opt) {\n  this.map = {};\n  this.options = opt;\n  // tells how to divide the paper when creating the elements map\n  this.mapGridSize = 100;\n}\nObstacleMap.prototype.build = function (graph, link) {\n  var opt = this.options;\n\n  // source or target element could be excluded from set of obstacles\n  var excludedEnds = util.toArray(opt.excludeEnds).reduce(function (res, item) {\n    var end = link.get(item);\n    if (end) {\n      var cell = graph.getCell(end.id);\n      if (cell) {\n        res.push(cell);\n      }\n    }\n    return res;\n  }, []);\n\n  // Exclude any embedded elements from the source and the target element.\n  var excludedAncestors = [];\n  var source = graph.getCell(link.get('source').id);\n  if (source) {\n    excludedAncestors = util.union(excludedAncestors, source.getAncestors().map(function (cell) {\n      return cell.id;\n    }));\n  }\n  var target = graph.getCell(link.get('target').id);\n  if (target) {\n    excludedAncestors = util.union(excludedAncestors, target.getAncestors().map(function (cell) {\n      return cell.id;\n    }));\n  }\n\n  // Builds a map of all elements for quicker obstacle queries (i.e. is a point contained\n  // in any obstacle?) (a simplified grid search).\n  // The paper is divided into smaller cells, where each holds information about which\n  // elements belong to it. When we query whether a point lies inside an obstacle we\n  // don't need to go through all obstacles, we check only those in a particular cell.\n  var mapGridSize = this.mapGridSize;\n  graph.getElements().reduce(function (map, element) {\n    var isExcludedType = util.toArray(opt.excludeTypes).includes(element.get('type'));\n    var isExcludedEnd = excludedEnds.find(function (excluded) {\n      return excluded.id === element.id;\n    });\n    var isExcludedAncestor = excludedAncestors.includes(element.id);\n    var isExcluded = isExcludedType || isExcludedEnd || isExcludedAncestor;\n    if (!isExcluded) {\n      var bbox = element.getBBox().moveAndExpand(opt.paddingBox);\n      var origin = bbox.origin().snapToGrid(mapGridSize);\n      var corner = bbox.corner().snapToGrid(mapGridSize);\n      for (var x = origin.x; x <= corner.x; x += mapGridSize) {\n        for (var y = origin.y; y <= corner.y; y += mapGridSize) {\n          var gridKey = x + '@' + y;\n          map[gridKey] = map[gridKey] || [];\n          map[gridKey].push(bbox);\n        }\n      }\n    }\n    return map;\n  }, this.map);\n  return this;\n};\nObstacleMap.prototype.isPointAccessible = function (point) {\n  var mapKey = point.clone().snapToGrid(this.mapGridSize).toString();\n  return util.toArray(this.map[mapKey]).every(function (obstacle) {\n    return !obstacle.containsPoint(point);\n  });\n};\n\n// Sorted Set\n// Set of items sorted by given value.\nfunction SortedSet() {\n  this.items = [];\n  this.hash = {};\n  this.values = {};\n  this.OPEN = 1;\n  this.CLOSE = 2;\n}\nSortedSet.prototype.add = function (item, value) {\n  if (this.hash[item]) {\n    // item removal\n    this.items.splice(this.items.indexOf(item), 1);\n  } else {\n    this.hash[item] = this.OPEN;\n  }\n  this.values[item] = value;\n  var index = util.sortedIndex(this.items, item, function (i) {\n    return this.values[i];\n  }.bind(this));\n  this.items.splice(index, 0, item);\n};\nSortedSet.prototype.remove = function (item) {\n  this.hash[item] = this.CLOSE;\n};\nSortedSet.prototype.isOpen = function (item) {\n  return this.hash[item] === this.OPEN;\n};\nSortedSet.prototype.isClose = function (item) {\n  return this.hash[item] === this.CLOSE;\n};\nSortedSet.prototype.isEmpty = function () {\n  return this.items.length === 0;\n};\nSortedSet.prototype.pop = function () {\n  var item = this.items.shift();\n  this.remove(item);\n  return item;\n};\n\n// HELPERS //\n\n// return source bbox\nfunction getSourceBBox(linkView, opt) {\n  // expand by padding box\n  if (opt && opt.paddingBox) return linkView.sourceBBox.clone().moveAndExpand(opt.paddingBox);\n  return linkView.sourceBBox.clone();\n}\n\n// return target bbox\nfunction getTargetBBox(linkView, opt) {\n  // expand by padding box\n  if (opt && opt.paddingBox) return linkView.targetBBox.clone().moveAndExpand(opt.paddingBox);\n  return linkView.targetBBox.clone();\n}\n\n// return source anchor\nfunction getSourceAnchor(linkView, opt) {\n  if (linkView.sourceAnchor) return linkView.sourceAnchor;\n\n  // fallback: center of bbox\n  var sourceBBox = getSourceBBox(linkView, opt);\n  return sourceBBox.center();\n}\n\n// return target anchor\nfunction getTargetAnchor(linkView, opt) {\n  if (linkView.targetAnchor) return linkView.targetAnchor;\n\n  // fallback: center of bbox\n  var targetBBox = getTargetBBox(linkView, opt);\n  return targetBBox.center(); // default\n}\n\n// returns a direction index from start point to end point\n// corrects for grid deformation between start and end\nfunction getDirectionAngle(start, end, numDirections, grid, opt) {\n  var quadrant = 360 / numDirections;\n  var angleTheta = start.theta(fixAngleEnd(start, end, grid, opt));\n  var normalizedAngle = g.normalizeAngle(angleTheta + quadrant / 2);\n  return quadrant * Math.floor(normalizedAngle / quadrant);\n}\n\n// helper function for getDirectionAngle()\n// corrects for grid deformation\n// (if a point is one grid steps away from another in both dimensions,\n// it is considered to be 45 degrees away, even if the real angle is different)\n// this causes visible angle discrepancies if `opt.step` is much larger than `paper.gridSize`\nfunction fixAngleEnd(start, end, grid, opt) {\n  var step = opt.step;\n  var diffX = end.x - start.x;\n  var diffY = end.y - start.y;\n  var gridStepsX = diffX / grid.x;\n  var gridStepsY = diffY / grid.y;\n  var distanceX = gridStepsX * step;\n  var distanceY = gridStepsY * step;\n  return new g.Point(start.x + distanceX, start.y + distanceY);\n}\n\n// return the change in direction between two direction angles\nfunction getDirectionChange(angle1, angle2) {\n  var directionChange = Math.abs(angle1 - angle2);\n  return directionChange > 180 ? 360 - directionChange : directionChange;\n}\n\n// fix direction offsets according to current grid\nfunction getGridOffsets(directions, grid, opt) {\n  var step = opt.step;\n  util.toArray(opt.directions).forEach(function (direction) {\n    direction.gridOffsetX = direction.offsetX / step * grid.x;\n    direction.gridOffsetY = direction.offsetY / step * grid.y;\n  });\n}\n\n// get grid size in x and y dimensions, adapted to source and target positions\nfunction getGrid(step, source, target) {\n  return {\n    source: source.clone(),\n    x: getGridDimension(target.x - source.x, step),\n    y: getGridDimension(target.y - source.y, step)\n  };\n}\n\n// helper function for getGrid()\nfunction getGridDimension(diff, step) {\n  // return step if diff = 0\n  if (!diff) return step;\n  var absDiff = Math.abs(diff);\n  var numSteps = Math.round(absDiff / step);\n\n  // return absDiff if less than one step apart\n  if (!numSteps) return absDiff;\n\n  // otherwise, return corrected step\n  var roundedDiff = numSteps * step;\n  var remainder = absDiff - roundedDiff;\n  var stepCorrection = remainder / numSteps;\n  return step + stepCorrection;\n}\n\n// return a clone of point snapped to grid\nfunction snapToGrid(point, grid) {\n  var source = grid.source;\n  var snappedX = g.snapToGrid(point.x - source.x, grid.x) + source.x;\n  var snappedY = g.snapToGrid(point.y - source.y, grid.y) + source.y;\n  return new g.Point(snappedX, snappedY);\n}\n\n// round the point to opt.precision\nfunction round(point, precision) {\n  return point.round(precision);\n}\n\n// snap to grid and then round the point\nfunction align(point, grid, precision) {\n  return round(snapToGrid(point.clone(), grid), precision);\n}\n\n// return a string representing the point\n// string is rounded in both dimensions\nfunction getKey(point) {\n  return point.clone().toString();\n}\n\n// return a normalized vector from given point\n// used to determine the direction of a difference of two points\nfunction normalizePoint(point) {\n  return new g.Point(point.x === 0 ? 0 : Math.abs(point.x) / point.x, point.y === 0 ? 0 : Math.abs(point.y) / point.y);\n}\n\n// PATHFINDING //\n\n// reconstructs a route by concatenating points with their parents\nfunction reconstructRoute(parents, points, tailPoint, from, to, grid, opt) {\n  var route = [];\n  var prevDiff = normalizePoint(to.difference(tailPoint));\n\n  // tailPoint is assumed to be aligned already\n  var currentKey = getKey(tailPoint);\n  var parent = parents[currentKey];\n  var point;\n  while (parent) {\n    // point is assumed to be aligned already\n    point = points[currentKey];\n    var diff = normalizePoint(point.difference(parent));\n    if (!diff.equals(prevDiff)) {\n      route.unshift(point);\n      prevDiff = diff;\n    }\n\n    // parent is assumed to be aligned already\n    currentKey = getKey(parent);\n    parent = parents[currentKey];\n  }\n\n  // leadPoint is assumed to be aligned already\n  var leadPoint = points[currentKey];\n  var fromDiff = normalizePoint(leadPoint.difference(from));\n  if (!fromDiff.equals(prevDiff)) {\n    route.unshift(leadPoint);\n  }\n  return route;\n}\n\n// heuristic method to determine the distance between two points\nfunction estimateCost(from, endPoints) {\n  var min = Infinity;\n  for (var i = 0, len = endPoints.length; i < len; i++) {\n    var cost = from.manhattanDistance(endPoints[i]);\n    if (cost < min) min = cost;\n  }\n  return min;\n}\n\n// find points around the bbox taking given directions into account\n// lines are drawn from anchor in given directions, intersections recorded\n// if anchor is outside bbox, only those directions that intersect get a rect point\n// the anchor itself is returned as rect point (representing some directions)\n// (since those directions are unobstructed by the bbox)\nfunction getRectPoints(anchor, bbox, directionList, grid, opt) {\n  var precision = opt.precision;\n  var directionMap = opt.directionMap;\n  var anchorCenterVector = anchor.difference(bbox.center());\n  var keys = util.isObject(directionMap) ? Object.keys(directionMap) : [];\n  var dirList = util.toArray(directionList);\n  var rectPoints = keys.reduce(function (res, key) {\n    if (dirList.includes(key)) {\n      var direction = directionMap[key];\n\n      // create a line that is guaranteed to intersect the bbox if bbox is in the direction\n      // even if anchor lies outside of bbox\n      var endpoint = new g.Point(anchor.x + direction.x * (Math.abs(anchorCenterVector.x) + bbox.width), anchor.y + direction.y * (Math.abs(anchorCenterVector.y) + bbox.height));\n      var intersectionLine = new g.Line(anchor, endpoint);\n\n      // get the farther intersection, in case there are two\n      // (that happens if anchor lies next to bbox)\n      var intersections = intersectionLine.intersect(bbox) || [];\n      var numIntersections = intersections.length;\n      var farthestIntersectionDistance;\n      var farthestIntersection = null;\n      for (var i = 0; i < numIntersections; i++) {\n        var currentIntersection = intersections[i];\n        var distance = anchor.squaredDistance(currentIntersection);\n        if (farthestIntersectionDistance === undefined || distance > farthestIntersectionDistance) {\n          farthestIntersectionDistance = distance;\n          farthestIntersection = currentIntersection;\n        }\n      }\n\n      // if an intersection was found in this direction, it is our rectPoint\n      if (farthestIntersection) {\n        var point = align(farthestIntersection, grid, precision);\n\n        // if the rectPoint lies inside the bbox, offset it by one more step\n        if (bbox.containsPoint(point)) {\n          point = align(point.offset(direction.x * grid.x, direction.y * grid.y), grid, precision);\n        }\n\n        // then add the point to the result array\n        // aligned\n        res.push(point);\n      }\n    }\n    return res;\n  }, []);\n\n  // if anchor lies outside of bbox, add it to the array of points\n  if (!bbox.containsPoint(anchor)) {\n    // aligned\n    rectPoints.push(align(anchor, grid, precision));\n  }\n  return rectPoints;\n}\n\n// finds the route between two points/rectangles (`from`, `to`) implementing A* algorithm\n// rectangles get rect points assigned by getRectPoints()\nfunction findRoute(from, to, isPointObstacle, opt) {\n  var precision = opt.precision;\n\n  // Get grid for this route.\n\n  var sourceAnchor, targetAnchor;\n  if (from instanceof g.Rect) {\n    // `from` is sourceBBox\n    sourceAnchor = round(getSourceAnchor(this, opt).clone(), precision);\n  } else {\n    sourceAnchor = round(from.clone(), precision);\n  }\n  if (to instanceof g.Rect) {\n    // `to` is targetBBox\n    targetAnchor = round(getTargetAnchor(this, opt).clone(), precision);\n  } else {\n    targetAnchor = round(to.clone(), precision);\n  }\n  var grid = getGrid(opt.step, sourceAnchor, targetAnchor);\n\n  // Get pathfinding points.\n\n  var start, end; // aligned with grid by definition\n  var startPoints, endPoints; // assumed to be aligned with grid already\n\n  // set of points we start pathfinding from\n  if (from instanceof g.Rect) {\n    // `from` is sourceBBox\n    start = sourceAnchor;\n    startPoints = getRectPoints(start, from, opt.startDirections, grid, opt);\n  } else {\n    start = sourceAnchor;\n    startPoints = [start];\n  }\n\n  // set of points we want the pathfinding to finish at\n  if (to instanceof g.Rect) {\n    // `to` is targetBBox\n    end = targetAnchor;\n    endPoints = getRectPoints(targetAnchor, to, opt.endDirections, grid, opt);\n  } else {\n    end = targetAnchor;\n    endPoints = [end];\n  }\n\n  // take into account only accessible rect points (those not under obstacles)\n  startPoints = startPoints.filter(p => !isPointObstacle(p));\n  endPoints = endPoints.filter(p => !isPointObstacle(p));\n\n  // Check that there is an accessible route point on both sides.\n  // Otherwise, use fallbackRoute().\n  if (startPoints.length > 0 && endPoints.length > 0) {\n    // The set of tentative points to be evaluated, initially containing the start points.\n    // Rounded to nearest integer for simplicity.\n    var openSet = new SortedSet();\n    // Keeps reference to actual points for given elements of the open set.\n    var points = {};\n    // Keeps reference to a point that is immediate predecessor of given element.\n    var parents = {};\n    // Cost from start to a point along best known path.\n    var costs = {};\n    for (var i = 0, n = startPoints.length; i < n; i++) {\n      // startPoint is assumed to be aligned already\n      var startPoint = startPoints[i];\n      var key = getKey(startPoint);\n      openSet.add(key, estimateCost(startPoint, endPoints));\n      points[key] = startPoint;\n      costs[key] = 0;\n    }\n    var previousRouteDirectionAngle = opt.previousDirectionAngle; // undefined for first route\n    var isPathBeginning = previousRouteDirectionAngle === undefined;\n\n    // directions\n    var direction, directionChange;\n    var directions = opt.directions;\n    getGridOffsets(directions, grid, opt);\n    var numDirections = directions.length;\n    var endPointsKeys = util.toArray(endPoints).reduce(function (res, endPoint) {\n      // endPoint is assumed to be aligned already\n\n      var key = getKey(endPoint);\n      res.push(key);\n      return res;\n    }, []);\n\n    // main route finding loop\n    var loopsRemaining = opt.maximumLoops;\n    while (!openSet.isEmpty() && loopsRemaining > 0) {\n      // remove current from the open list\n      var currentKey = openSet.pop();\n      var currentPoint = points[currentKey];\n      var currentParent = parents[currentKey];\n      var currentCost = costs[currentKey];\n      var isRouteBeginning = currentParent === undefined; // undefined for route starts\n      var isStart = currentPoint.equals(start); // (is source anchor or `from` point) = can leave in any direction\n\n      var previousDirectionAngle;\n      if (!isRouteBeginning) previousDirectionAngle = getDirectionAngle(currentParent, currentPoint, numDirections, grid, opt); // a vertex on the route\n      else if (!isPathBeginning) previousDirectionAngle = previousRouteDirectionAngle; // beginning of route on the path\n      else if (!isStart) previousDirectionAngle = getDirectionAngle(start, currentPoint, numDirections, grid, opt); // beginning of path, start rect point\n      else previousDirectionAngle = null; // beginning of path, source anchor or `from` point\n\n      // check if we reached any endpoint\n      var samePoints = startPoints.length === endPoints.length;\n      if (samePoints) {\n        for (var j = 0; j < startPoints.length; j++) {\n          if (!startPoints[j].equals(endPoints[j])) {\n            samePoints = false;\n            break;\n          }\n        }\n      }\n      var skipEndCheck = isRouteBeginning && samePoints;\n      if (!skipEndCheck && endPointsKeys.indexOf(currentKey) >= 0) {\n        opt.previousDirectionAngle = previousDirectionAngle;\n        return reconstructRoute(parents, points, currentPoint, start, end, grid, opt);\n      }\n\n      // go over all possible directions and find neighbors\n      for (i = 0; i < numDirections; i++) {\n        direction = directions[i];\n        var directionAngle = direction.angle;\n        directionChange = getDirectionChange(previousDirectionAngle, directionAngle);\n\n        // if the direction changed rapidly, don't use this point\n        // any direction is allowed for starting points\n        if (!(isPathBeginning && isStart) && directionChange > opt.maxAllowedDirectionChange) continue;\n        var neighborPoint = align(currentPoint.clone().offset(direction.gridOffsetX, direction.gridOffsetY), grid, precision);\n        var neighborKey = getKey(neighborPoint);\n\n        // Closed points from the openSet were already evaluated.\n        if (openSet.isClose(neighborKey) || isPointObstacle(neighborPoint)) continue;\n\n        // We can only enter end points at an acceptable angle.\n        if (endPointsKeys.indexOf(neighborKey) >= 0) {\n          // neighbor is an end point\n\n          var isNeighborEnd = neighborPoint.equals(end); // (is target anchor or `to` point) = can be entered in any direction\n\n          if (!isNeighborEnd) {\n            var endDirectionAngle = getDirectionAngle(neighborPoint, end, numDirections, grid, opt);\n            var endDirectionChange = getDirectionChange(directionAngle, endDirectionAngle);\n            if (endDirectionChange > opt.maxAllowedDirectionChange) continue;\n          }\n        }\n\n        // The current direction is ok.\n\n        var neighborCost = direction.cost;\n        var neighborPenalty = isStart ? 0 : opt.penalties[directionChange]; // no penalties for start point\n        var costFromStart = currentCost + neighborCost + neighborPenalty;\n        if (!openSet.isOpen(neighborKey) || costFromStart < costs[neighborKey]) {\n          // neighbor point has not been processed yet\n          // or the cost of the path from start is lower than previously calculated\n\n          points[neighborKey] = neighborPoint;\n          parents[neighborKey] = currentPoint;\n          costs[neighborKey] = costFromStart;\n          openSet.add(neighborKey, costFromStart + estimateCost(neighborPoint, endPoints));\n        }\n      }\n      loopsRemaining--;\n    }\n  }\n\n  // no route found (`to` point either wasn't accessible or finding route took\n  // way too much calculation)\n  return opt.fallbackRoute.call(this, start, end, opt);\n}\n\n// resolve some of the options\nfunction resolveOptions(opt) {\n  opt.directions = util.result(opt, 'directions');\n  opt.penalties = util.result(opt, 'penalties');\n  opt.paddingBox = util.result(opt, 'paddingBox');\n  opt.padding = util.result(opt, 'padding');\n  if (opt.padding) {\n    // if both provided, opt.padding wins over opt.paddingBox\n    var sides = util.normalizeSides(opt.padding);\n    opt.paddingBox = {\n      x: -sides.left,\n      y: -sides.top,\n      width: sides.left + sides.right,\n      height: sides.top + sides.bottom\n    };\n  }\n  util.toArray(opt.directions).forEach(function (direction) {\n    var point1 = new g.Point(0, 0);\n    var point2 = new g.Point(direction.offsetX, direction.offsetY);\n    direction.angle = g.normalizeAngle(point1.theta(point2));\n  });\n}\n\n// initialization of the route finding\nfunction router(vertices, opt, linkView) {\n  resolveOptions(opt);\n\n  // enable/disable linkView perpendicular option\n  linkView.options.perpendicular = !!opt.perpendicular;\n  var sourceBBox = getSourceBBox(linkView, opt);\n  var targetBBox = getTargetBBox(linkView, opt);\n  var sourceAnchor = getSourceAnchor(linkView, opt);\n  //var targetAnchor = getTargetAnchor(linkView, opt);\n\n  // pathfinding\n  let isPointObstacle;\n  if (typeof opt.isPointObstacle === 'function') {\n    isPointObstacle = opt.isPointObstacle;\n  } else {\n    const map = new ObstacleMap(opt);\n    map.build(linkView.paper.model, linkView.model);\n    isPointObstacle = point => !map.isPointAccessible(point);\n  }\n  var oldVertices = util.toArray(vertices).map(g.Point);\n  var newVertices = [];\n  var tailPoint = sourceAnchor; // the origin of first route's grid, does not need snapping\n\n  // find a route by concatenating all partial routes (routes need to pass through vertices)\n  // source -> vertex[1] -> ... -> vertex[n] -> target\n  var to, from;\n  for (var i = 0, len = oldVertices.length; i <= len; i++) {\n    var partialRoute = null;\n    from = to || sourceBBox;\n    to = oldVertices[i];\n    if (!to) {\n      // this is the last iteration\n      // we ran through all vertices in oldVertices\n      // 'to' is not a vertex.\n\n      to = targetBBox;\n\n      // If the target is a point (i.e. it's not an element), we\n      // should use dragging route instead of main routing method if it has been provided.\n      var isEndingAtPoint = !linkView.model.get('source').id || !linkView.model.get('target').id;\n      if (isEndingAtPoint && util.isFunction(opt.draggingRoute)) {\n        // Make sure we are passing points only (not rects).\n        var dragFrom = from === sourceBBox ? sourceAnchor : from;\n        var dragTo = to.origin();\n        partialRoute = opt.draggingRoute.call(linkView, dragFrom, dragTo, opt);\n      }\n    }\n\n    // if partial route has not been calculated yet use the main routing method to find one\n    partialRoute = partialRoute || findRoute.call(linkView, from, to, isPointObstacle, opt);\n    if (partialRoute === null) {\n      // the partial route cannot be found\n      return opt.fallbackRouter(vertices, opt, linkView);\n    }\n    var leadPoint = partialRoute[0];\n\n    // remove the first point if the previous partial route had the same point as last\n    if (leadPoint && leadPoint.equals(tailPoint)) partialRoute.shift();\n\n    // save tailPoint for next iteration\n    tailPoint = partialRoute[partialRoute.length - 1] || tailPoint;\n    Array.prototype.push.apply(newVertices, partialRoute);\n  }\n  return newVertices;\n}\n\n// public function\nexport const manhattan = function (vertices, opt, linkView) {\n  return router(vertices, util.assign({}, config, opt), linkView);\n};", "import { manhattan } from './manhattan.mjs';\nimport * as util from '../util/index.mjs';\nimport * as g from '../g/index.mjs';\nvar config = {\n  maxAllowedDirectionChange: 45,\n  // cost of a diagonal step\n  diagonalCost: function () {\n    var step = this.step;\n    return Math.ceil(Math.sqrt(step * step << 1));\n  },\n  // an array of directions to find next points on the route\n  // different from start/end directions\n  directions: function () {\n    var step = this.step;\n    var cost = this.cost();\n    var diagonalCost = this.diagonalCost();\n    return [{\n      offsetX: step,\n      offsetY: 0,\n      cost: cost\n    }, {\n      offsetX: step,\n      offsetY: step,\n      cost: diagonalCost\n    }, {\n      offsetX: 0,\n      offsetY: step,\n      cost: cost\n    }, {\n      offsetX: -step,\n      offsetY: step,\n      cost: diagonalCost\n    }, {\n      offsetX: -step,\n      offsetY: 0,\n      cost: cost\n    }, {\n      offsetX: -step,\n      offsetY: -step,\n      cost: diagonalCost\n    }, {\n      offsetX: 0,\n      offsetY: -step,\n      cost: cost\n    }, {\n      offsetX: step,\n      offsetY: -step,\n      cost: diagonalCost\n    }];\n  },\n  // a simple route used in situations when main routing method fails\n  // (exceed max number of loop iterations, inaccessible)\n  fallbackRoute: function (from, to, opt) {\n    // Find a route which breaks by 45 degrees ignoring all obstacles.\n\n    var theta = from.theta(to);\n    var route = [];\n    var a = {\n      x: to.x,\n      y: from.y\n    };\n    var b = {\n      x: from.x,\n      y: to.y\n    };\n    if (theta % 180 > 90) {\n      var t = a;\n      a = b;\n      b = t;\n    }\n    var p1 = theta % 90 < 45 ? a : b;\n    var l1 = new g.Line(from, p1);\n    var alpha = 90 * Math.ceil(theta / 90);\n    var p2 = g.Point.fromPolar(l1.squaredLength(), g.toRad(alpha + 135), p1);\n    var l2 = new g.Line(to, p2);\n    var intersectionPoint = l1.intersection(l2);\n    var point = intersectionPoint ? intersectionPoint : to;\n    var directionFrom = intersectionPoint ? point : from;\n    var quadrant = 360 / opt.directions.length;\n    var angleTheta = directionFrom.theta(to);\n    var normalizedAngle = g.normalizeAngle(angleTheta + quadrant / 2);\n    var directionAngle = quadrant * Math.floor(normalizedAngle / quadrant);\n    opt.previousDirectionAngle = directionAngle;\n    if (point) route.push(point.round());\n    route.push(to);\n    return route;\n  }\n};\n\n// public function\nexport const metro = function (vertices, opt, linkView) {\n  if (!util.isFunction(manhattan)) {\n    throw new Error('Metro requires the manhattan router.');\n  }\n  return manhattan(vertices, util.assign({}, config, opt), linkView);\n};", "import * as g from '../g/index.mjs';\nconst Directions = {\n  AUTO: 'auto',\n  LEFT: 'left',\n  RIGHT: 'right',\n  TOP: 'top',\n  BOTTOM: 'bottom',\n  ANCHOR_SIDE: 'anchor-side',\n  MAGNET_SIDE: 'magnet-side'\n};\nconst DEFINED_DIRECTIONS = [Directions.LEFT, Directions.RIGHT, Directions.TOP, Directions.BOTTOM];\nconst OPPOSITE_DIRECTIONS = {\n  [Directions.LEFT]: Directions.RIGHT,\n  [Directions.RIGHT]: Directions.LEFT,\n  [Directions.TOP]: Directions.BOTTOM,\n  [Directions.BOTTOM]: Directions.TOP\n};\nconst VERTICAL_DIRECTIONS = [Directions.TOP, Directions.BOTTOM];\nconst ANGLE_DIRECTION_MAP = {\n  0: Directions.RIGHT,\n  180: Directions.LEFT,\n  270: Directions.TOP,\n  90: Directions.BOTTOM\n};\nfunction getSegmentAngle(line) {\n  // TODO: the angle() method is general and therefore unnecessarily heavy for orthogonal links\n  return line.angle();\n}\nfunction simplifyPoints(points) {\n  // TODO: use own more efficient implementation (filter points that do not change direction).\n  // To simplify segments that are almost aligned (start and end points differ by e.g. 0.5px), use a threshold of 1.\n  return new g.Polyline(points).simplify({\n    threshold: 1\n  }).points;\n}\nfunction resolveSides(source, target) {\n  const {\n    point: sourcePoint,\n    x0: sx0,\n    y0: sy0,\n    view: sourceView,\n    bbox: sourceBBox,\n    direction: sourceDirection\n  } = source;\n  const {\n    point: targetPoint,\n    x0: tx0,\n    y0: ty0,\n    view: targetView,\n    bbox: targetBBox,\n    direction: targetDirection\n  } = target;\n  let sourceSide;\n  if (!sourceView) {\n    const sourceLinkAnchorBBox = new g.Rect(sx0, sy0, 0, 0);\n    sourceSide = DEFINED_DIRECTIONS.includes(sourceDirection) ? sourceDirection : sourceLinkAnchorBBox.sideNearestToPoint(targetPoint);\n  } else if (sourceView.model.isLink()) {\n    sourceSide = getDirectionForLinkConnection(targetPoint, sourcePoint, sourceView);\n  } else if (sourceDirection === Directions.ANCHOR_SIDE) {\n    sourceSide = sourceBBox.sideNearestToPoint(sourcePoint);\n  } else if (sourceDirection === Directions.MAGNET_SIDE) {\n    sourceSide = sourceView.model.getBBox().sideNearestToPoint(sourcePoint);\n  } else {\n    sourceSide = sourceDirection;\n  }\n  let targetSide;\n  if (!targetView) {\n    const targetLinkAnchorBBox = new g.Rect(tx0, ty0, 0, 0);\n    targetSide = DEFINED_DIRECTIONS.includes(targetDirection) ? targetDirection : targetLinkAnchorBBox.sideNearestToPoint(sourcePoint);\n  } else if (targetView.model.isLink()) {\n    targetSide = getDirectionForLinkConnection(sourcePoint, targetPoint, targetView);\n  } else if (targetDirection === Directions.ANCHOR_SIDE) {\n    targetSide = targetBBox.sideNearestToPoint(targetPoint);\n  } else if (targetDirection === Directions.MAGNET_SIDE) {\n    targetSide = targetView.model.getBBox().sideNearestToPoint(targetPoint);\n  } else {\n    targetSide = targetDirection;\n  }\n  return [sourceSide, targetSide];\n}\nfunction resolveForTopSourceSide(source, target, nextInLine) {\n  const {\n    x0: sx0,\n    y0: sy0,\n    width,\n    height,\n    point: anchor,\n    margin\n  } = source;\n  const sx1 = sx0 + width;\n  const sy1 = sy0 + height;\n  const smx0 = sx0 - margin;\n  const smx1 = sx1 + margin;\n  const smy0 = sy0 - margin;\n  const {\n    x: ax\n  } = anchor;\n  const {\n    x0: tx,\n    y0: ty\n  } = target;\n  if (tx === ax && ty < sy0) return Directions.BOTTOM;\n  if (tx < ax && ty < smy0) return Directions.RIGHT;\n  if (tx > ax && ty < smy0) return Directions.LEFT;\n  if (tx < smx0 && ty >= sy0) return Directions.TOP;\n  if (tx > smx1 && ty >= sy0) return Directions.TOP;\n  if (tx >= smx0 && tx <= ax && ty > sy1) {\n    if (nextInLine.point.x < tx) {\n      return Directions.RIGHT;\n    }\n    return Directions.LEFT;\n  }\n  if (tx <= smx1 && tx >= ax && ty > sy1) {\n    if (nextInLine.point.x < tx) {\n      return Directions.RIGHT;\n    }\n    return Directions.LEFT;\n  }\n  return Directions.TOP;\n}\nfunction resolveForBottomSourceSide(source, target, nextInLine) {\n  const {\n    x0: sx0,\n    y0: sy0,\n    width,\n    height,\n    point: anchor,\n    margin\n  } = source;\n  const sx1 = sx0 + width;\n  const sy1 = sy0 + height;\n  const smx0 = sx0 - margin;\n  const smx1 = sx1 + margin;\n  const smy1 = sy1 + margin;\n  const {\n    x: ax\n  } = anchor;\n  const {\n    x0: tx,\n    y0: ty\n  } = target;\n  if (tx === ax && ty > sy1) return Directions.TOP;\n  if (tx < ax && ty > smy1) return Directions.RIGHT;\n  if (tx > ax && ty > smy1) return Directions.LEFT;\n  if (tx < smx0 && ty <= sy1) return Directions.BOTTOM;\n  if (tx > smx1 && ty <= sy1) return Directions.BOTTOM;\n  if (tx >= smx0 && tx <= ax && ty < sy0) {\n    if (nextInLine.point.x < tx) {\n      return Directions.RIGHT;\n    }\n    return Directions.LEFT;\n  }\n  if (tx <= smx1 && tx >= ax && ty < sy0) {\n    if (nextInLine.point.x < tx) {\n      return Directions.RIGHT;\n    }\n    return Directions.LEFT;\n  }\n  return Directions.BOTTOM;\n}\nfunction resolveForLeftSourceSide(source, target, nextInLine) {\n  const {\n    y0: sy0,\n    x0: sx0,\n    width,\n    height,\n    point: anchor,\n    margin\n  } = source;\n  const sx1 = sx0 + width;\n  const sy1 = sy0 + height;\n  const smx0 = sx0 - margin;\n  const smy0 = sy0 - margin;\n  const smy1 = sy1 + margin;\n  const {\n    x: ax,\n    y: ay\n  } = anchor;\n  const {\n    x0: tx,\n    y0: ty\n  } = target;\n  if (tx < ax && ty === ay) return Directions.RIGHT;\n  if (tx <= smx0 && ty < ay) return Directions.BOTTOM;\n  if (tx <= smx0 && ty > ay) return Directions.TOP;\n  if (tx >= sx0 && ty <= smy0) return Directions.LEFT;\n  if (tx >= sx0 && ty >= smy1) return Directions.LEFT;\n  if (tx > sx1 && ty >= smy0 && ty <= ay) {\n    if (nextInLine.point.y < ty) {\n      return Directions.BOTTOM;\n    }\n    return Directions.TOP;\n  }\n  if (tx > sx1 && ty <= smy1 && ty >= ay) {\n    if (nextInLine.point.y < ty) {\n      return Directions.BOTTOM;\n    }\n    return Directions.TOP;\n  }\n  return Directions.LEFT;\n}\nfunction resolveForRightSourceSide(source, target, nextInLine) {\n  const {\n    y0: sy0,\n    x0: sx0,\n    width,\n    height,\n    point: anchor,\n    margin\n  } = source;\n  const sx1 = sx0 + width;\n  const sy1 = sy0 + height;\n  const smx1 = sx1 + margin;\n  const smy0 = sy0 - margin;\n  const smy1 = sy1 + margin;\n  const {\n    x: ax,\n    y: ay\n  } = anchor;\n  const {\n    x0: tx,\n    y0: ty\n  } = target;\n  if (tx > ax && ty === ay) return Directions.LEFT;\n  if (tx >= smx1 && ty < ay) return Directions.BOTTOM;\n  if (tx >= smx1 && ty > ay) return Directions.TOP;\n  if (tx <= sx1 && ty <= smy0) return Directions.RIGHT;\n  if (tx <= sx1 && ty >= smy1) return Directions.RIGHT;\n  if (tx < sx0 && ty >= smy0 && ty <= ay) {\n    if (nextInLine.point.y < ty) {\n      return Directions.BOTTOM;\n    }\n    return Directions.TOP;\n  }\n  if (tx < sx0 && ty <= smy1 && ty >= ay) {\n    if (nextInLine.point.y < ty) {\n      return Directions.BOTTOM;\n    }\n    return Directions.TOP;\n  }\n  return Directions.RIGHT;\n}\nfunction resolveInitialDirection(source, target, nextInLine) {\n  const [sourceSide] = resolveSides(source, target);\n  switch (sourceSide) {\n    case Directions.TOP:\n      return resolveForTopSourceSide(source, target, nextInLine);\n    case Directions.RIGHT:\n      return resolveForRightSourceSide(source, target, nextInLine);\n    case Directions.BOTTOM:\n      return resolveForBottomSourceSide(source, target, nextInLine);\n    case Directions.LEFT:\n      return resolveForLeftSourceSide(source, target, nextInLine);\n  }\n}\nfunction getDirectionForLinkConnection(linkOrigin, connectionPoint, linkView) {\n  const tangent = linkView.getTangentAtLength(linkView.getClosestPointLength(connectionPoint));\n  const roundedAngle = Math.round(getSegmentAngle(tangent) / 90) * 90;\n  if (roundedAngle % 180 === 0 && linkOrigin.y === connectionPoint.y) {\n    return linkOrigin.x < connectionPoint.x ? Directions.LEFT : Directions.RIGHT;\n  } else if (linkOrigin.x === connectionPoint.x) {\n    return linkOrigin.y < connectionPoint.y ? Directions.TOP : Directions.BOTTOM;\n  }\n  switch (roundedAngle) {\n    case 0:\n    case 180:\n    case 360:\n      return linkOrigin.y < connectionPoint.y ? Directions.TOP : Directions.BOTTOM;\n    case 90:\n    case 270:\n      return linkOrigin.x < connectionPoint.x ? Directions.LEFT : Directions.RIGHT;\n  }\n}\nfunction pointDataFromAnchor(view, point, bbox, direction, isPort, fallBackAnchor, margin) {\n  if (direction === Directions.AUTO) {\n    direction = isPort ? Directions.MAGNET_SIDE : Directions.ANCHOR_SIDE;\n  }\n  const isElement = view && view.model.isElement();\n  const {\n    x: x0,\n    y: y0,\n    width = 0,\n    height = 0\n  } = isElement ? g.Rect.fromRectUnion(bbox, view.model.getBBox()) : fallBackAnchor;\n  return {\n    point,\n    x0,\n    y0,\n    view,\n    bbox,\n    width,\n    height,\n    direction,\n    margin: isElement ? margin : 0\n  };\n}\nfunction pointDataFromVertex({\n  x,\n  y\n}) {\n  const point = new g.Point(x, y);\n  return {\n    point,\n    x0: point.x,\n    y0: point.y,\n    view: null,\n    bbox: new g.Rect(x, y, 0, 0),\n    width: 0,\n    height: 0,\n    direction: null,\n    margin: 0\n  };\n}\nfunction getOutsidePoint(side, pointData, margin) {\n  const outsidePoint = pointData.point.clone();\n  const {\n    x0,\n    y0,\n    width,\n    height\n  } = pointData;\n  switch (side) {\n    case 'left':\n      outsidePoint.x = x0 - margin;\n      break;\n    case 'right':\n      outsidePoint.x = x0 + width + margin;\n      break;\n    case 'top':\n      outsidePoint.y = y0 - margin;\n      break;\n    case 'bottom':\n      outsidePoint.y = y0 + height + margin;\n      break;\n  }\n  return outsidePoint;\n}\nfunction routeBetweenPoints(source, target) {\n  const {\n    point: sourcePoint,\n    x0: sx0,\n    y0: sy0,\n    view: sourceView,\n    width: sourceWidth,\n    height: sourceHeight,\n    margin: sourceMargin\n  } = source;\n  const {\n    point: targetPoint,\n    x0: tx0,\n    y0: ty0,\n    width: targetWidth,\n    height: targetHeight,\n    margin: targetMargin\n  } = target;\n  const tx1 = tx0 + targetWidth;\n  const ty1 = ty0 + targetHeight;\n  const sx1 = sx0 + sourceWidth;\n  const sy1 = sy0 + sourceHeight;\n  const isSourceEl = sourceView && sourceView.model.isElement();\n\n  // Key coordinates including the margin\n  const smx0 = sx0 - sourceMargin;\n  const smx1 = sx1 + sourceMargin;\n  const smy0 = sy0 - sourceMargin;\n  const smy1 = sy1 + sourceMargin;\n  const tmx0 = tx0 - targetMargin;\n  const tmx1 = tx1 + targetMargin;\n  const tmy0 = ty0 - targetMargin;\n  const tmy1 = ty1 + targetMargin;\n  const [sourceSide, targetSide] = resolveSides(source, target);\n  const sourceOutsidePoint = getOutsidePoint(sourceSide, {\n    point: sourcePoint,\n    x0: sx0,\n    y0: sy0,\n    width: sourceWidth,\n    height: sourceHeight\n  }, sourceMargin);\n  const targetOutsidePoint = getOutsidePoint(targetSide, {\n    point: targetPoint,\n    x0: tx0,\n    y0: ty0,\n    width: targetWidth,\n    height: targetHeight\n  }, targetMargin);\n  const {\n    x: sox,\n    y: soy\n  } = sourceOutsidePoint;\n  const {\n    x: tox,\n    y: toy\n  } = targetOutsidePoint;\n  const tcx = (tx0 + tx1) / 2;\n  const tcy = (ty0 + ty1) / 2;\n  const scx = (sx0 + sx1) / 2;\n  const scy = (sy0 + sy1) / 2;\n  const middleOfVerticalSides = (scx < tcx ? sx1 + tx0 : tx1 + sx0) / 2;\n  const middleOfHorizontalSides = (scy < tcy ? sy1 + ty0 : ty1 + sy0) / 2;\n  if (sourceSide === 'left' && targetSide === 'right') {\n    if (smx0 <= tmx1) {\n      let y = middleOfHorizontalSides;\n      if (sx1 <= tx0) {\n        if (ty1 >= smy0 && toy < soy) {\n          y = Math.min(tmy0, smy0);\n        } else if (ty0 <= smy1 && toy >= soy) {\n          y = Math.max(tmy1, smy1);\n        }\n      }\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: sox,\n        y\n      }, {\n        x: tox,\n        y\n      }, {\n        x: tox,\n        y: toy\n      }];\n    }\n    const x = (sox + tox) / 2;\n    return [{\n      x,\n      y: soy\n    }, {\n      x,\n      y: toy\n    }];\n  } else if (sourceSide === 'right' && targetSide === 'left') {\n    if (smx1 >= tmx0) {\n      let y = middleOfHorizontalSides;\n      if (sox > tx1) {\n        if (ty1 >= smy0 && toy < soy) {\n          y = Math.min(tmy0, smy0);\n        } else if (ty0 <= smy1 && toy >= soy) {\n          y = Math.max(tmy1, smy1);\n        }\n      }\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: sox,\n        y\n      }, {\n        x: tox,\n        y\n      }, {\n        x: tox,\n        y: toy\n      }];\n    }\n    const x = (sox + tox) / 2;\n    return [{\n      x,\n      y: soy\n    }, {\n      x,\n      y: toy\n    }];\n  } else if (sourceSide === 'top' && targetSide === 'bottom') {\n    if (soy < toy) {\n      let x = middleOfVerticalSides;\n      let y = soy;\n      if (soy < ty0) {\n        if (tx1 >= smx0 && tox < sox) {\n          x = Math.min(tmx0, smx0);\n        } else if (tx0 <= smx1 && tox >= sox) {\n          x = Math.max(tmx1, smx1);\n        }\n      }\n      return [{\n        x: sox,\n        y\n      }, {\n        x,\n        y\n      }, {\n        x,\n        y: toy\n      }, {\n        x: tox,\n        y: toy\n      }];\n    }\n    const y = (soy + toy) / 2;\n    return [{\n      x: sox,\n      y\n    }, {\n      x: tox,\n      y\n    }];\n  } else if (sourceSide === 'bottom' && targetSide === 'top') {\n    if (soy - sourceMargin > toy) {\n      let x = middleOfVerticalSides;\n      let y = soy;\n      if (soy > ty1) {\n        if (tx1 >= smx0 && tox < sox) {\n          x = Math.min(tmx0, smx0);\n        } else if (tx0 <= smx1 && tox >= sox) {\n          x = Math.max(tmx1, smx1);\n        }\n      }\n      return [{\n        x: sox,\n        y\n      }, {\n        x,\n        y\n      }, {\n        x,\n        y: toy\n      }, {\n        x: tox,\n        y: toy\n      }];\n    }\n    const y = (soy + toy) / 2;\n    return [{\n      x: sox,\n      y\n    }, {\n      x: tox,\n      y\n    }];\n  } else if (sourceSide === 'top' && targetSide === 'top') {\n    let x;\n    let y1 = Math.min((sy1 + ty0) / 2, toy);\n    let y2 = Math.min((sy0 + ty1) / 2, soy);\n    if (toy < soy) {\n      if (sox >= tmx1 || sox <= tmx0) {\n        return [{\n          x: sox,\n          y: Math.min(soy, toy)\n        }, {\n          x: tox,\n          y: Math.min(soy, toy)\n        }];\n      } else if (tox > sox) {\n        x = Math.min(sox, tmx0);\n      } else {\n        x = Math.max(sox, tmx1);\n      }\n    } else {\n      if (tox >= smx1 || tox <= smx0) {\n        return [{\n          x: sox,\n          y: Math.min(soy, toy)\n        }, {\n          x: tox,\n          y: Math.min(soy, toy)\n        }];\n      } else if (tox >= sox) {\n        x = Math.max(tox, smx1);\n      } else {\n        x = Math.min(tox, smx0);\n      }\n    }\n    return [{\n      x: sox,\n      y: y2\n    }, {\n      x,\n      y: y2\n    }, {\n      x,\n      y: y1\n    }, {\n      x: tox,\n      y: y1\n    }];\n  } else if (sourceSide === 'bottom' && targetSide === 'bottom') {\n    let x;\n    let y1 = Math.max((sy0 + ty1) / 2, toy);\n    let y2 = Math.max((sy1 + ty0) / 2, soy);\n    if (toy > soy) {\n      if (sox >= tmx1 || sox <= tmx0) {\n        return [{\n          x: sox,\n          y: Math.max(soy, toy)\n        }, {\n          x: tox,\n          y: Math.max(soy, toy)\n        }];\n      } else if (tox > sox) {\n        x = Math.min(sox, tmx0);\n      } else {\n        x = Math.max(sox, tmx1);\n      }\n    } else {\n      if (tox >= smx1 || tox <= smx0) {\n        return [{\n          x: sox,\n          y: Math.max(soy, toy)\n        }, {\n          x: tox,\n          y: Math.max(soy, toy)\n        }];\n      } else if (tox >= sox) {\n        x = Math.max(tox, smx1);\n      } else {\n        x = Math.min(tox, smx0);\n      }\n    }\n    return [{\n      x: sox,\n      y: y2\n    }, {\n      x,\n      y: y2\n    }, {\n      x,\n      y: y1\n    }, {\n      x: tox,\n      y: y1\n    }];\n  } else if (sourceSide === 'left' && targetSide === 'left') {\n    let y;\n    let x1 = Math.min((sx1 + tx0) / 2, tox);\n    let x2 = Math.min((sx0 + tx1) / 2, sox);\n    if (tox > sox) {\n      if (toy <= soy) {\n        y = Math.min(smy0, toy);\n      } else {\n        y = Math.max(smy1, toy);\n      }\n    } else {\n      if (toy >= soy) {\n        y = Math.min(tmy0, soy);\n      } else {\n        y = Math.max(tmy1, soy);\n      }\n    }\n    return [{\n      x: x2,\n      y: soy\n    }, {\n      x: x2,\n      y\n    }, {\n      x: x1,\n      y\n    }, {\n      x: x1,\n      y: toy\n    }];\n  } else if (sourceSide === 'right' && targetSide === 'right') {\n    let y;\n    let x1 = Math.max((sx0 + tx1) / 2, tox);\n    let x2 = Math.max((sx1 + tx0) / 2, sox);\n    if (tox < sox) {\n      if (toy <= soy) {\n        y = Math.min(smy0, toy);\n      } else {\n        y = Math.max(smy1, toy);\n      }\n    } else {\n      if (toy >= soy) {\n        y = Math.min(tmy0, soy);\n      } else {\n        y = Math.max(tmy1, soy);\n      }\n    }\n    return [{\n      x: x2,\n      y: soy\n    }, {\n      x: x2,\n      y\n    }, {\n      x: x1,\n      y\n    }, {\n      x: x1,\n      y: toy\n    }];\n  } else if (sourceSide === 'top' && targetSide === 'right') {\n    if (soy > toy) {\n      if (sox < tox) {\n        let y = middleOfHorizontalSides;\n        if ((y > tcy || !isSourceEl) && y < tmy1 && sox < tx0) {\n          y = tmy0;\n        }\n        return [{\n          x: sox,\n          y\n        }, {\n          x: tox,\n          y\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      return [{\n        x: sox,\n        y: toy\n      }];\n    }\n    const x = Math.max(middleOfVerticalSides, tmx1);\n    if (tox < sox && toy > sy0 && toy < sy1) {\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: x,\n        y: soy\n      }, {\n        x: x,\n        y: toy\n      }];\n    }\n    if (x > smx0 && toy > sy0 || tx0 > sx1) {\n      const y = Math.min(sy0 - sourceMargin, ty0 - targetMargin);\n      const x = Math.max(sx1 + sourceMargin, tx1 + targetMargin);\n      return [{\n        x: sox,\n        y\n      }, {\n        x,\n        y\n      }, {\n        x,\n        y: toy\n      }];\n    }\n    return [{\n      x: sox,\n      y: soy\n    }, {\n      x: Math.max(x, tox),\n      y: soy\n    }, {\n      x: Math.max(x, tox),\n      y: toy\n    }];\n  } else if (sourceSide === 'top' && targetSide === 'left') {\n    if (soy > toy) {\n      if (sox > tox) {\n        let y = middleOfHorizontalSides;\n        if ((y > tcy || !isSourceEl) && y < tmy1 && sox > tx1) {\n          y = tmy0;\n        }\n        return [{\n          x: sox,\n          y\n        }, {\n          x: tox,\n          y\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      return [{\n        x: sox,\n        y: toy\n      }];\n    }\n    const x = Math.min(tmx0, middleOfVerticalSides);\n    if (sox < tox && sy1 >= toy) {\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x,\n        y: soy\n      }, {\n        x,\n        y: toy\n      }];\n    }\n    if (x < smx1 && soy < ty1) {\n      const y = Math.min(smy0, tmy0);\n      const x = Math.min(smx0, tmx0);\n      return [{\n        x: sox,\n        y\n      }, {\n        x,\n        y\n      }, {\n        x,\n        y: toy\n      }];\n    }\n    return [{\n      x: sox,\n      y: soy\n    }, {\n      x,\n      y: soy\n    }, {\n      x,\n      y: toy\n    }];\n  } else if (sourceSide === 'bottom' && targetSide === 'right') {\n    if (soy < toy) {\n      if (sox < tox) {\n        let y = middleOfHorizontalSides;\n        if ((y < tcy || !isSourceEl) && y > tmy0 && sox < tx0) {\n          y = tmy1;\n        }\n        return [{\n          x: sox,\n          y\n        }, {\n          x: tox,\n          y\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      return [{\n        x: sox,\n        y: toy\n      }];\n    } else {\n      if (sx0 < tox) {\n        const y = Math.max(smy1, tmy1);\n        const x = Math.max(smx1, tmx1);\n        return [{\n          x: sox,\n          y\n        }, {\n          x,\n          y\n        }, {\n          x,\n          y: toy\n        }];\n      }\n    }\n    const x = middleOfVerticalSides;\n    return [{\n      x: sox,\n      y: soy\n    }, {\n      x,\n      y: soy\n    }, {\n      x,\n      y: toy\n    }];\n  } else if (sourceSide === 'bottom' && targetSide === 'left') {\n    if (soy < toy) {\n      if (sox > tox) {\n        let y = middleOfHorizontalSides;\n        if ((y < tcy || !isSourceEl) && y > tmy0 && sox > tx1) {\n          y = tmy1;\n        }\n        return [{\n          x: sox,\n          y\n        }, {\n          x: tox,\n          y\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n      return [{\n        x: sox,\n        y: toy\n      }];\n    } else {\n      if (sx1 > tox) {\n        const y = Math.max(smy1, tmy1);\n        const x = Math.min(smx0, tmx0);\n        return [{\n          x: sox,\n          y\n        }, {\n          x,\n          y\n        }, {\n          x,\n          y: toy\n        }];\n      }\n    }\n    const x = middleOfVerticalSides;\n    return [{\n      x: sox,\n      y: soy\n    }, {\n      x,\n      y: soy\n    }, {\n      x,\n      y: toy\n    }];\n  } else if (sourceSide === 'left' && targetSide === 'bottom') {\n    if (sox >= tox && soy >= tmy1) {\n      return [{\n        x: tox,\n        y: soy\n      }];\n    }\n    if (sox >= tx1 && soy < toy) {\n      const x = middleOfVerticalSides;\n      return [{\n        x,\n        y: soy\n      }, {\n        x,\n        y: toy\n      }, {\n        x: tox,\n        y: toy\n      }];\n    }\n    if (tox < sx1 && ty1 <= sy0) {\n      const y = middleOfHorizontalSides;\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: sox,\n        y\n      }, {\n        x: tox,\n        y\n      }];\n    }\n    const x = Math.min(tmx0, sox);\n    const y = Math.max(smy1, tmy1);\n    return [{\n      x,\n      y: soy\n    }, {\n      x,\n      y\n    }, {\n      x: tox,\n      y\n    }];\n  } else if (sourceSide === 'left' && targetSide === 'top') {\n    if (sox > tox && soy < tmy0) {\n      return [{\n        x: tox,\n        y: soy\n      }];\n    }\n    if (sox >= tx1) {\n      if (soy > toy) {\n        const x = middleOfVerticalSides;\n        return [{\n          x,\n          y: soy\n        }, {\n          x,\n          y: toy\n        }, {\n          x: tox,\n          y: toy\n        }];\n      }\n    }\n    if (tox <= sx1 && toy > soy) {\n      const y = middleOfHorizontalSides;\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: sox,\n        y\n      }, {\n        x: tox,\n        y\n      }];\n    }\n    const x = toy < soy ? Math.min(smx0, tmx0) : smx0;\n    const y = Math.min(smy0, tmy0);\n    return [{\n      x,\n      y: soy\n    }, {\n      x,\n      y\n    }, {\n      x: tox,\n      y\n    }];\n  } else if (sourceSide === 'right' && targetSide === 'top') {\n    if (sox <= tox && soy < tmy0) {\n      return [{\n        x: tox,\n        y: soy\n      }];\n    }\n    if (sx1 < tx0 && soy > toy) {\n      let x = middleOfVerticalSides;\n      return [{\n        x,\n        y: soy\n      }, {\n        x,\n        y: toy\n      }, {\n        x: tox,\n        y: toy\n      }];\n    }\n    if (tox < sox && ty0 > sy1) {\n      const y = middleOfHorizontalSides;\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: sox,\n        y\n      }, {\n        x: tox,\n        y\n      }];\n    }\n    const x = Math.max(smx1, tmx1);\n    const y = Math.min(smy0, tmy0);\n    return [{\n      x,\n      y: soy\n    }, {\n      x,\n      y\n    }, {\n      x: tox,\n      y\n    }];\n  } else if (sourceSide === 'right' && targetSide === 'bottom') {\n    if (sox <= tox && soy >= tmy1) {\n      return [{\n        x: tox,\n        y: soy\n      }];\n    }\n    if (sox <= tmx0 && soy < toy) {\n      const x = middleOfVerticalSides;\n      return [{\n        x,\n        y: soy\n      }, {\n        x,\n        y: toy\n      }, {\n        x: tox,\n        y: toy\n      }];\n    }\n    if (tox > sx0 && ty1 < sy0) {\n      const y = middleOfHorizontalSides;\n      return [{\n        x: sox,\n        y: soy\n      }, {\n        x: sox,\n        y\n      }, {\n        x: tox,\n        y\n      }];\n    }\n    const x = Math.max(tmx1, sox);\n    const y = Math.max(smy1, tmy1);\n    return [{\n      x,\n      y: soy\n    }, {\n      x,\n      y\n    }, {\n      x: tox,\n      y\n    }];\n  }\n}\nfunction rightAngleRouter(vertices, opt, linkView) {\n  const {\n    sourceDirection = Directions.AUTO,\n    targetDirection = Directions.AUTO\n  } = opt;\n  const margin = opt.margin || 20;\n  const useVertices = opt.useVertices || false;\n  const isSourcePort = !!linkView.model.source().port;\n  const sourcePoint = pointDataFromAnchor(linkView.sourceView, linkView.sourceAnchor, linkView.sourceBBox, sourceDirection, isSourcePort, linkView.sourceAnchor, margin);\n  const isTargetPort = !!linkView.model.target().port;\n  const targetPoint = pointDataFromAnchor(linkView.targetView, linkView.targetAnchor, linkView.targetBBox, targetDirection, isTargetPort, linkView.targetAnchor, margin);\n  let resultVertices = [];\n  if (!useVertices || vertices.length === 0) {\n    return simplifyPoints(routeBetweenPoints(sourcePoint, targetPoint));\n  }\n  const verticesData = vertices.map(v => pointDataFromVertex(v));\n  const [firstVertex] = verticesData;\n  if (sourcePoint.view && sourcePoint.view.model.isElement() && sourcePoint.view.model.getBBox().inflate(margin).containsPoint(firstVertex.point)) {\n    const [fromDirection] = resolveSides(sourcePoint, firstVertex);\n    const toDirection = fromDirection;\n    const dummySource = pointDataFromVertex(sourcePoint.point);\n    // Points do not usually have margin. Here we create a point with a margin.\n    dummySource.margin = margin;\n    dummySource.direction = fromDirection;\n    firstVertex.direction = toDirection;\n    resultVertices.push(...routeBetweenPoints(dummySource, firstVertex), firstVertex.point);\n  } else {\n    // The first point responsible for the initial direction of the route\n    const next = verticesData[1] || targetPoint;\n    const direction = resolveInitialDirection(sourcePoint, firstVertex, next);\n    firstVertex.direction = direction;\n    resultVertices.push(...routeBetweenPoints(sourcePoint, firstVertex), firstVertex.point);\n  }\n  for (let i = 0; i < verticesData.length - 1; i++) {\n    const from = verticesData[i];\n    const to = verticesData[i + 1];\n    const segment = new g.Line(from.point, to.point);\n    const segmentAngle = getSegmentAngle(segment);\n    if (segmentAngle % 90 === 0) {\n      // Since the segment is horizontal or vertical, we can skip the routing and just connect them with a straight line\n      const toDirection = ANGLE_DIRECTION_MAP[segmentAngle];\n      const accessDirection = OPPOSITE_DIRECTIONS[toDirection];\n      if (toDirection !== from.direction) {\n        resultVertices.push(from.point, to.point);\n        to.direction = accessDirection;\n      } else {\n        const angle = g.normalizeAngle(segmentAngle - 90);\n        let dx = 0;\n        let dy = 0;\n        if (angle === 90) {\n          dy = -margin;\n        } else if (angle === 180) {\n          dx = -margin;\n        } else if (angle === 270) {\n          dy = margin;\n        } else if (angle === 0) {\n          dx = margin;\n        }\n        const p1 = {\n          x: from.point.x + dx,\n          y: from.point.y + dy\n        };\n        const p2 = {\n          x: to.point.x + dx,\n          y: to.point.y + dy\n        };\n        const segment2 = new g.Line(to.point, p2);\n        to.direction = ANGLE_DIRECTION_MAP[getSegmentAngle(segment2)];\n\n        // Constructing a loop\n        resultVertices.push(from.point, p1, p2, to.point);\n      }\n      continue;\n    }\n    const [fromDirection, toDirection] = resolveDirection(from, to);\n    from.direction = fromDirection;\n    to.direction = toDirection;\n    resultVertices.push(...routeBetweenPoints(from, to), to.point);\n  }\n  const lastVertex = verticesData[verticesData.length - 1];\n  if (targetPoint.view && targetPoint.view.model.isElement()) {\n    if (targetPoint.view.model.getBBox().inflate(margin).containsPoint(lastVertex.point)) {\n      const [fromDirection] = resolveDirection(lastVertex, targetPoint);\n      const dummyTarget = pointDataFromVertex(targetPoint.point);\n      const [, toDirection] = resolveSides(lastVertex, targetPoint);\n      // we are creating a point that has a margin\n      dummyTarget.margin = margin;\n      dummyTarget.direction = toDirection;\n      lastVertex.direction = fromDirection;\n      resultVertices.push(...routeBetweenPoints(lastVertex, dummyTarget));\n    } else {\n      // the last point of `simplified` array is the last defined vertex\n      // grab the penultimate point and construct a line segment from it to the last vertex\n      // this will ensure that the last segment continues in a straight line\n\n      const simplified = simplifyPoints(resultVertices);\n      const segment = new g.Line(simplified[simplified.length - 2], lastVertex.point);\n      const definedDirection = ANGLE_DIRECTION_MAP[Math.round(getSegmentAngle(segment))];\n      lastVertex.direction = definedDirection;\n      let lastSegmentRoute = routeBetweenPoints(lastVertex, targetPoint);\n      const [p1, p2] = simplifyPoints([...lastSegmentRoute, targetPoint.point]);\n      const lastSegment = new g.Line(p1, p2);\n      const roundedLastSegmentAngle = Math.round(getSegmentAngle(lastSegment));\n      const lastSegmentDirection = ANGLE_DIRECTION_MAP[roundedLastSegmentAngle];\n      if (lastSegmentDirection !== definedDirection && definedDirection === OPPOSITE_DIRECTIONS[lastSegmentDirection]) {\n        lastVertex.margin = margin;\n        lastSegmentRoute = routeBetweenPoints(lastVertex, targetPoint);\n      }\n      resultVertices.push(...lastSegmentRoute);\n    }\n  } else {\n    // since the target is only a point we can apply the same logic as if we connected two verticesData\n    const [vertexDirection] = resolveDirection(lastVertex, targetPoint);\n    lastVertex.direction = vertexDirection;\n    resultVertices.push(...routeBetweenPoints(lastVertex, targetPoint));\n  }\n  return simplifyPoints(resultVertices);\n}\nfunction resolveDirection(from, to) {\n  const accessDirection = from.direction;\n  const isDirectionVertical = VERTICAL_DIRECTIONS.includes(accessDirection);\n  let sourceDirection = from.direction;\n  let targetDirection = to.direction;\n  if (isDirectionVertical) {\n    const isToAbove = from.point.y > to.point.y;\n    const dx = to.point.x - from.point.x;\n    if (accessDirection === Directions.BOTTOM) {\n      // If isToAbove === false and we need figure out if to go left or right\n      sourceDirection = isToAbove ? OPPOSITE_DIRECTIONS[accessDirection] : dx >= 0 ? Directions.RIGHT : Directions.LEFT;\n      if (dx > 0) {\n        targetDirection = isToAbove ? Directions.LEFT : Directions.TOP;\n      } else if (dx < 0) {\n        targetDirection = isToAbove ? Directions.RIGHT : Directions.TOP;\n      }\n    } else {\n      // If isToAbove === true and we need figure out if to go left or right\n      sourceDirection = isToAbove ? dx >= 0 ? Directions.RIGHT : Directions.LEFT : OPPOSITE_DIRECTIONS[accessDirection];\n      if (dx > 0) {\n        targetDirection = isToAbove ? Directions.BOTTOM : Directions.LEFT;\n      } else if (dx < 0) {\n        targetDirection = isToAbove ? Directions.BOTTOM : Directions.RIGHT;\n      }\n    }\n  } else {\n    const isToLeft = from.point.x > to.point.x;\n    const dy = to.point.y - from.point.y;\n    if (accessDirection === Directions.RIGHT) {\n      sourceDirection = isToLeft ? OPPOSITE_DIRECTIONS[accessDirection] : dy >= 0 ? Directions.BOTTOM : Directions.TOP;\n      if (dy > 0) {\n        targetDirection = isToLeft ? Directions.TOP : Directions.LEFT;\n      } else if (dy < 0) {\n        targetDirection = isToLeft ? Directions.BOTTOM : Directions.LEFT;\n      }\n    } else {\n      sourceDirection = isToLeft ? dy >= 0 ? Directions.BOTTOM : Directions.TOP : OPPOSITE_DIRECTIONS[accessDirection];\n      if (dy > 0) {\n        targetDirection = isToLeft ? Directions.RIGHT : Directions.TOP;\n      } else if (dy < 0) {\n        targetDirection = isToLeft ? Directions.RIGHT : Directions.BOTTOM;\n      }\n    }\n  }\n  return [sourceDirection, targetDirection];\n}\nrightAngleRouter.Directions = Directions;\nexport const rightAngle = rightAngleRouter;", "export * from './straight.mjs';\nexport * from './jumpover.mjs';\nexport * from './normal.mjs';\nexport * from './rounded.mjs';\nexport * from './smooth.mjs';\nexport * from './curve.mjs';", "import * as g from '../g/index.mjs';\nconst CornerTypes = {\n  POINT: 'point',\n  CUBIC: 'cubic',\n  LINE: 'line',\n  GAP: 'gap'\n};\nconst DEFINED_CORNER_TYPES = Object.values(CornerTypes);\nconst CORNER_RADIUS = 10;\nconst PRECISION = 1;\nexport const straight = function (sourcePoint, targetPoint, routePoints = [], opt = {}) {\n  const {\n    cornerType = CornerTypes.POINT,\n    cornerRadius = CORNER_RADIUS,\n    cornerPreserveAspectRatio = false,\n    precision = PRECISION,\n    raw = false\n  } = opt;\n  if (DEFINED_CORNER_TYPES.indexOf(cornerType) === -1) {\n    // unknown `cornerType` provided => error\n    throw new Error('Invalid `cornerType` provided to `straight` connector.');\n  }\n  let path;\n  if (cornerType === CornerTypes.POINT || !cornerRadius) {\n    // default option => normal connector\n    // simply connect all points with straight lines\n    const points = [sourcePoint].concat(routePoints).concat([targetPoint]);\n    const polyline = new g.Polyline(points);\n    path = new g.Path(polyline);\n  } else {\n    // `cornerType` is not unknown and not 'point' (default) => must be one of other valid types\n    path = new g.Path();\n\n    // add initial gap segment = to source point\n    path.appendSegment(g.Path.createSegment('M', sourcePoint));\n    let nextDistance;\n    const routePointsLength = routePoints.length;\n    for (let i = 0; i < routePointsLength; i++) {\n      const curr = new g.Point(routePoints[i]);\n      const prev = routePoints[i - 1] || sourcePoint;\n      const next = routePoints[i + 1] || targetPoint;\n      const prevDistance = nextDistance || curr.distance(prev) / 2; // try to re-use previously-computed `nextDistance`\n      nextDistance = curr.distance(next) / 2;\n      let startMove, endMove;\n      if (!cornerPreserveAspectRatio) {\n        // `startMove` and `endMove` may be different\n        // (this happens when next or previous path point is closer than `2 * cornerRadius`)\n        startMove = -Math.min(cornerRadius, prevDistance);\n        endMove = -Math.min(cornerRadius, nextDistance);\n      } else {\n        // force `startMove` and `endMove` to be the same\n        startMove = endMove = -Math.min(cornerRadius, prevDistance, nextDistance);\n      }\n\n      // to find `cornerStart` and `cornerEnd`, the logic is as follows (using `cornerStart` as example):\n      // - find a point lying on the line `prev - startMove` such that...\n      // - ...the point lies `abs(startMove)` distance away from `curr`...\n      // - ...and its coordinates are rounded to whole numbers\n      const cornerStart = curr.clone().move(prev, startMove).round(precision);\n      const cornerEnd = curr.clone().move(next, endMove).round(precision);\n\n      // add in-between straight segment = from previous route point to corner start point\n      // (may have zero length)\n      path.appendSegment(g.Path.createSegment('L', cornerStart));\n\n      // add corner segment = from corner start point to corner end point\n      switch (cornerType) {\n        case CornerTypes.CUBIC:\n          {\n            // corner is rounded\n            const _13 = 1 / 3;\n            const _23 = 2 / 3;\n            const control1 = new g.Point(_13 * cornerStart.x + _23 * curr.x, _23 * curr.y + _13 * cornerStart.y);\n            const control2 = new g.Point(_13 * cornerEnd.x + _23 * curr.x, _23 * curr.y + _13 * cornerEnd.y);\n            path.appendSegment(g.Path.createSegment('C', control1, control2, cornerEnd));\n            break;\n          }\n        case CornerTypes.LINE:\n          {\n            // corner has bevel\n            path.appendSegment(g.Path.createSegment('L', cornerEnd));\n            break;\n          }\n        case CornerTypes.GAP:\n          {\n            // corner has empty space\n            path.appendSegment(g.Path.createSegment('M', cornerEnd));\n            break;\n          }\n        // default: no segment is created\n      }\n    }\n\n    // add final straight segment = from last corner end point to target point\n    // (= or from start point to end point, if there are no route points)\n    // (may have zero length)\n    path.appendSegment(g.Path.createSegment('L', targetPoint));\n  }\n  return raw ? path : path.serialize();\n};", "import * as util from '../util/index.mjs';\nimport * as g from '../g/index.mjs';\n\n// default size of jump if not specified in options\nvar JUMP_SIZE = 5;\n\n// available jump types\n// first one taken as default\nvar JUMP_TYPES = ['arc', 'gap', 'cubic'];\n\n// default radius\nvar RADIUS = 0;\n\n// takes care of math. error for case when jump is too close to end of line\nvar CLOSE_PROXIMITY_PADDING = 1;\n\n// list of connector types not to jump over.\nvar IGNORED_CONNECTORS = ['smooth'];\n\n// internal constants for round segment\nvar _13 = 1 / 3;\nvar _23 = 2 / 3;\nfunction sortPointsAscending(p1, p2) {\n  let {\n    x: x1,\n    y: y1\n  } = p1;\n  let {\n    x: x2,\n    y: y2\n  } = p2;\n  if (x1 > x2) {\n    let swap = x1;\n    x1 = x2;\n    x2 = swap;\n    swap = y1;\n    y1 = y2;\n    y2 = swap;\n  }\n  if (y1 > y2) {\n    let swap = x1;\n    x1 = x2;\n    x2 = swap;\n    swap = y1;\n    y1 = y2;\n    y2 = swap;\n  }\n  return [new g.Point(x1, y1), new g.Point(x2, y2)];\n}\nfunction overlapExists(line1, line2) {\n  const [{\n    x: x1,\n    y: y1\n  }, {\n    x: x2,\n    y: y2\n  }] = sortPointsAscending(line1.start, line1.end);\n  const [{\n    x: x3,\n    y: y3\n  }, {\n    x: x4,\n    y: y4\n  }] = sortPointsAscending(line2.start, line2.end);\n  const xMatch = x1 <= x4 && x3 <= x2;\n  const yMatch = y1 <= y4 && y3 <= y2;\n  return xMatch && yMatch;\n}\n\n/**\n * Transform start/end and route into series of lines\n * @param {g.point} sourcePoint start point\n * @param {g.point} targetPoint end point\n * @param {g.point[]} route optional list of route\n * @return {g.line[]} [description]\n */\nfunction createLines(sourcePoint, targetPoint, route) {\n  // make a flattened array of all points\n  var points = [].concat(sourcePoint, route, targetPoint);\n  return points.reduce(function (resultLines, point, idx) {\n    // if there is a next point, make a line with it\n    var nextPoint = points[idx + 1];\n    if (nextPoint != null) {\n      resultLines[idx] = g.line(point, nextPoint);\n    }\n    return resultLines;\n  }, []);\n}\nfunction setupUpdating(jumpOverLinkView) {\n  var paper = jumpOverLinkView.paper;\n  var updateList = paper._jumpOverUpdateList;\n\n  // first time setup for this paper\n  if (updateList == null) {\n    updateList = paper._jumpOverUpdateList = [];\n    var graph = paper.model;\n    graph.on('batch:stop', function () {\n      if (this.hasActiveBatch()) return;\n      updateJumpOver(paper);\n    });\n    graph.on('reset', function () {\n      updateList = paper._jumpOverUpdateList = [];\n    });\n  }\n\n  // add this link to a list so it can be updated when some other link is updated\n  if (updateList.indexOf(jumpOverLinkView) < 0) {\n    updateList.push(jumpOverLinkView);\n\n    // watch for change of connector type or removal of link itself\n    // to remove the link from a list of jump over connectors\n    jumpOverLinkView.listenToOnce(jumpOverLinkView.model, 'change:connector remove', function () {\n      updateList.splice(updateList.indexOf(jumpOverLinkView), 1);\n    });\n  }\n}\n\n/**\n * Handler for a batch:stop event to force\n * update of all registered links with jump over connector\n * @param {object} batchEvent optional object with info about batch\n */\nfunction updateJumpOver(paper) {\n  var updateList = paper._jumpOverUpdateList;\n  for (var i = 0; i < updateList.length; i++) {\n    const linkView = updateList[i];\n    const updateFlag = linkView.getFlag(linkView.constructor.Flags.CONNECTOR);\n    linkView.requestUpdate(updateFlag);\n  }\n}\n\n/**\n * Utility function to collect all intersection points of a single\n * line against group of other lines.\n * @param {g.line} line where to find points\n * @param {g.line[]} crossCheckLines lines to cross\n * @return {g.point[]} list of intersection points\n */\nfunction findLineIntersections(line, crossCheckLines) {\n  return util.toArray(crossCheckLines).reduce(function (res, crossCheckLine) {\n    var intersection = line.intersection(crossCheckLine);\n    if (intersection) {\n      res.push(intersection);\n    }\n    return res;\n  }, []);\n}\n\n/**\n * Sorting function for list of points by their distance.\n * @param {g.point} p1 first point\n * @param {g.point} p2 second point\n * @return {number} squared distance between points\n */\nfunction sortPoints(p1, p2) {\n  return g.line(p1, p2).squaredLength();\n}\n\n/**\n * Split input line into multiple based on intersection points.\n * @param {g.line} line input line to split\n * @param {g.point[]} intersections points where to split the line\n * @param {number} jumpSize the size of jump arc (length empty spot on a line)\n * @return {g.line[]} list of lines being split\n */\nfunction createJumps(line, intersections, jumpSize) {\n  return intersections.reduce(function (resultLines, point, idx) {\n    // skipping points that were merged with the previous line\n    // to make bigger arc over multiple lines that are close to each other\n    if (point.skip === true) {\n      return resultLines;\n    }\n\n    // always grab the last line from buffer and modify it\n    var lastLine = resultLines.pop() || line;\n\n    // calculate start and end of jump by moving by a given size of jump\n    var jumpStart = g.point(point).move(lastLine.start, -jumpSize);\n    var jumpEnd = g.point(point).move(lastLine.start, +jumpSize);\n\n    // now try to look at the next intersection point\n    var nextPoint = intersections[idx + 1];\n    if (nextPoint != null) {\n      var distance = jumpEnd.distance(nextPoint);\n      if (distance <= jumpSize) {\n        // next point is close enough, move the jump end by this\n        // difference and mark the next point to be skipped\n        jumpEnd = nextPoint.move(lastLine.start, distance);\n        nextPoint.skip = true;\n      }\n    } else {\n      // this block is inside of `else` as an optimization so the distance is\n      // not calculated when we know there are no other intersection points\n      var endDistance = jumpStart.distance(lastLine.end);\n      // if the end is too close to possible jump, draw remaining line instead of a jump\n      if (endDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n        resultLines.push(lastLine);\n        return resultLines;\n      }\n    }\n    var startDistance = jumpEnd.distance(lastLine.start);\n    if (startDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n      // if the start of line is too close to jump, draw that line instead of a jump\n      resultLines.push(lastLine);\n      return resultLines;\n    }\n\n    // finally create a jump line\n    var jumpLine = g.line(jumpStart, jumpEnd);\n    // it's just simple line but with a `isJump` property\n    jumpLine.isJump = true;\n    resultLines.push(g.line(lastLine.start, jumpStart), jumpLine, g.line(jumpEnd, lastLine.end));\n    return resultLines;\n  }, []);\n}\n\n/**\n * Assemble `D` attribute of a SVG path by iterating given lines.\n * @param {g.line[]} lines source lines to use\n * @param {number} jumpSize the size of jump arc (length empty spot on a line)\n * @param {number} radius the radius\n * @return {string}\n */\nfunction buildPath(lines, jumpSize, jumpType, radius) {\n  var path = new g.Path();\n  var segment;\n\n  // first move to the start of a first line\n  segment = g.Path.createSegment('M', lines[0].start);\n  path.appendSegment(segment);\n\n  // make a paths from lines\n  util.toArray(lines).forEach(function (line, index) {\n    if (line.isJump) {\n      var angle, diff;\n      var control1, control2;\n      if (jumpType === 'arc') {\n        // approximates semicircle with 2 curves\n        angle = -90;\n        // determine rotation of arc based on difference between points\n        diff = line.start.difference(line.end);\n        // make sure the arc always points up (or right)\n        var xAxisRotate = Number(diff.x < 0 || diff.x === 0 && diff.y < 0);\n        if (xAxisRotate) angle += 180;\n        var midpoint = line.midpoint();\n        var centerLine = new g.Line(midpoint, line.end).rotate(midpoint, angle);\n        var halfLine;\n\n        // first half\n        halfLine = new g.Line(line.start, midpoint);\n        control1 = halfLine.pointAt(2 / 3).rotate(line.start, angle);\n        control2 = centerLine.pointAt(1 / 3).rotate(centerLine.end, -angle);\n        segment = g.Path.createSegment('C', control1, control2, centerLine.end);\n        path.appendSegment(segment);\n\n        // second half\n        halfLine = new g.Line(midpoint, line.end);\n        control1 = centerLine.pointAt(1 / 3).rotate(centerLine.end, angle);\n        control2 = halfLine.pointAt(1 / 3).rotate(line.end, -angle);\n        segment = g.Path.createSegment('C', control1, control2, line.end);\n        path.appendSegment(segment);\n      } else if (jumpType === 'gap') {\n        segment = g.Path.createSegment('M', line.end);\n        path.appendSegment(segment);\n      } else if (jumpType === 'cubic') {\n        // approximates semicircle with 1 curve\n        angle = line.start.theta(line.end);\n        var xOffset = jumpSize * 0.6;\n        var yOffset = jumpSize * 1.35;\n\n        // determine rotation of arc based on difference between points\n        diff = line.start.difference(line.end);\n        // make sure the arc always points up (or right)\n        xAxisRotate = Number(diff.x < 0 || diff.x === 0 && diff.y < 0);\n        if (xAxisRotate) yOffset *= -1;\n        control1 = g.Point(line.start.x + xOffset, line.start.y + yOffset).rotate(line.start, angle);\n        control2 = g.Point(line.end.x - xOffset, line.end.y + yOffset).rotate(line.end, angle);\n        segment = g.Path.createSegment('C', control1, control2, line.end);\n        path.appendSegment(segment);\n      }\n    } else {\n      var nextLine = lines[index + 1];\n      if (radius == 0 || !nextLine || nextLine.isJump) {\n        segment = g.Path.createSegment('L', line.end);\n        path.appendSegment(segment);\n      } else {\n        buildRoundedSegment(radius, path, line.end, line.start, nextLine.end);\n      }\n    }\n  });\n  return path;\n}\nfunction buildRoundedSegment(offset, path, curr, prev, next) {\n  var prevDistance = curr.distance(prev) / 2;\n  var nextDistance = curr.distance(next) / 2;\n  var startMove = -Math.min(offset, prevDistance);\n  var endMove = -Math.min(offset, nextDistance);\n  var roundedStart = curr.clone().move(prev, startMove).round();\n  var roundedEnd = curr.clone().move(next, endMove).round();\n  var control1 = new g.Point(_13 * roundedStart.x + _23 * curr.x, _23 * curr.y + _13 * roundedStart.y);\n  var control2 = new g.Point(_13 * roundedEnd.x + _23 * curr.x, _23 * curr.y + _13 * roundedEnd.y);\n  var segment;\n  segment = g.Path.createSegment('L', roundedStart);\n  path.appendSegment(segment);\n  segment = g.Path.createSegment('C', control1, control2, roundedEnd);\n  path.appendSegment(segment);\n}\n\n/**\n * Actual connector function that will be run on every update.\n * @param {g.point} sourcePoint start point of this link\n * @param {g.point} targetPoint end point of this link\n * @param {g.point[]} route of this link\n * @param {object} opt options\n * @property {number} size optional size of a jump arc\n * @return {string} created `D` attribute of SVG path\n */\nexport const jumpover = function (sourcePoint, targetPoint, route, opt) {\n  // eslint-disable-line max-params\n\n  setupUpdating(this);\n  var raw = opt.raw;\n  var jumpSize = opt.size || JUMP_SIZE;\n  var jumpType = opt.jump && ('' + opt.jump).toLowerCase();\n  var radius = opt.radius || RADIUS;\n  var ignoreConnectors = opt.ignoreConnectors || IGNORED_CONNECTORS;\n\n  // grab the first jump type as a default if specified one is invalid\n  if (JUMP_TYPES.indexOf(jumpType) === -1) {\n    jumpType = JUMP_TYPES[0];\n  }\n  var paper = this.paper;\n  var graph = paper.model;\n  var allLinks = graph.getLinks();\n\n  // there is just one link, draw it directly\n  if (allLinks.length === 1) {\n    return buildPath(createLines(sourcePoint, targetPoint, route), jumpSize, jumpType, radius);\n  }\n  var thisModel = this.model;\n  var thisIndex = allLinks.indexOf(thisModel);\n  var defaultConnector = paper.options.defaultConnector || {};\n\n  // not all links are meant to be jumped over.\n  var links = allLinks.filter(function (link, idx) {\n    var connector = link.get('connector') || defaultConnector;\n\n    // avoid jumping over links with connector type listed in `ignored connectors`.\n    if (util.toArray(ignoreConnectors).includes(connector.name)) {\n      return false;\n    }\n    // filter out links that are above this one and  have the same connector type\n    // otherwise there would double hoops for each intersection\n    if (idx > thisIndex) {\n      return connector.name !== 'jumpover';\n    }\n    return true;\n  });\n\n  // find views for all links\n  var linkViews = links.map(function (link) {\n    return paper.findViewByModel(link);\n  });\n\n  // create lines for this link\n  var thisLines = createLines(sourcePoint, targetPoint, route);\n\n  // create lines for all other links\n  var linkLines = linkViews.map(function (linkView) {\n    if (linkView == null) {\n      return [];\n    }\n    if (linkView === this) {\n      return thisLines;\n    }\n    return createLines(linkView.sourcePoint, linkView.targetPoint, linkView.route);\n  }, this);\n\n  // transform lines for this link by splitting with jump lines at\n  // points of intersection with other links\n  var jumpingLines = thisLines.reduce(function (resultLines, thisLine) {\n    // iterate all links and grab the intersections with this line\n    // these are then sorted by distance so the line can be split more easily\n    var intersections = links.reduce(function (res, link, i) {\n      // don't intersection with itself\n      if (link !== thisModel) {\n        const linkLinesToTest = linkLines[i].slice();\n        const overlapIndex = linkLinesToTest.findIndex(line => overlapExists(thisLine, line));\n\n        // Overlap occurs and the end point of one segment lies on thisLine\n        if (overlapIndex > -1 && thisLine.containsPoint(linkLinesToTest[overlapIndex].end)) {\n          // Remove the next segment because there will never be a jump\n          linkLinesToTest.splice(overlapIndex + 1, 1);\n        }\n        const lineIntersections = findLineIntersections(thisLine, linkLinesToTest);\n        res.push.apply(res, lineIntersections);\n      }\n      return res;\n    }, []).sort(function (a, b) {\n      return sortPoints(thisLine.start, a) - sortPoints(thisLine.start, b);\n    });\n    if (intersections.length > 0) {\n      // split the line based on found intersection points\n      resultLines.push.apply(resultLines, createJumps(thisLine, intersections, jumpSize));\n    } else {\n      // without any intersection the line goes uninterrupted\n      resultLines.push(thisLine);\n    }\n    return resultLines;\n  }, []);\n  var path = buildPath(jumpingLines, jumpSize, jumpType, radius);\n  return raw ? path : path.serialize();\n};", "import { straight } from './straight.mjs';\nexport const normal = function (sourcePoint, targetPoint, route = [], opt = {}) {\n  const {\n    raw\n  } = opt;\n  const localOpt = {\n    cornerType: 'point',\n    raw\n  };\n  return straight(sourcePoint, targetPoint, route, localOpt);\n};", "import { straight } from './straight.mjs';\nconst CORNER_RADIUS = 10;\nconst PRECISION = 0;\nexport const rounded = function (sourcePoint, targetPoint, route = [], opt = {}) {\n  const {\n    radius = CORNER_RADIUS,\n    raw\n  } = opt;\n  const localOpt = {\n    cornerType: 'cubic',\n    cornerRadius: radius,\n    precision: PRECISION,\n    raw\n  };\n  return straight(sourcePoint, targetPoint, route, localOpt);\n};", "import * as g from '../g/index.mjs';\nexport const smooth = function (sourcePoint, targetPoint, route, opt) {\n  var raw = opt && opt.raw;\n  var path;\n  if (route && route.length !== 0) {\n    var points = [sourcePoint].concat(route).concat([targetPoint]);\n    var curves = g.Curve.throughPoints(points);\n    path = new g.Path(curves);\n  } else {\n    // if we have no route, use a default cubic bezier curve\n    // cubic bezier requires two control points\n    // the control points have `x` midway between source and target\n    // this produces an S-like curve\n\n    path = new g.Path();\n    var segment;\n    segment = g.Path.createSegment('M', sourcePoint);\n    path.appendSegment(segment);\n    if (Math.abs(sourcePoint.x - targetPoint.x) >= Math.abs(sourcePoint.y - targetPoint.y)) {\n      var controlPointX = (sourcePoint.x + targetPoint.x) / 2;\n      segment = g.Path.createSegment('C', controlPointX, sourcePoint.y, controlPointX, targetPoint.y, targetPoint.x, targetPoint.y);\n      path.appendSegment(segment);\n    } else {\n      var controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n      segment = g.Path.createSegment('C', sourcePoint.x, controlPointY, targetPoint.x, controlPointY, targetPoint.x, targetPoint.y);\n      path.appendSegment(segment);\n    }\n  }\n  return raw ? path : path.serialize();\n};", "import { Path, Point, Curve } from '../g/index.mjs';\nconst Directions = {\n  AUTO: 'auto',\n  HORIZONTAL: 'horizontal',\n  VERTICAL: 'vertical',\n  CLOSEST_POINT: 'closest-point',\n  OUTWARDS: 'outwards'\n};\nconst TangentDirections = {\n  UP: 'up',\n  DOWN: 'down',\n  LEFT: 'left',\n  RIGHT: 'right',\n  AUTO: 'auto',\n  CLOSEST_POINT: 'closest-point',\n  OUTWARDS: 'outwards'\n};\nexport const curve = function (sourcePoint, targetPoint, route = [], opt = {}, linkView) {\n  const raw = Boolean(opt.raw);\n  // distanceCoefficient - a coefficient of the tangent vector length relative to the distance between points.\n  // angleTangentCoefficient - a coefficient of the end tangents length in the case of angles larger than 45 degrees.\n  // tension - a Catmull-Rom curve tension parameter.\n  // sourceTangent - a tangent vector along the curve at the sourcePoint.\n  // sourceDirection - a unit direction vector along the curve at the sourcePoint.\n  // targetTangent - a tangent vector along the curve at the targetPoint.\n  // targetDirection - a unit direction vector along the curve at the targetPoint.\n  // precision - a rounding precision for path values.\n  const {\n    direction = Directions.AUTO,\n    precision = 3\n  } = opt;\n  const options = {\n    coeff: opt.distanceCoefficient || 0.6,\n    angleTangentCoefficient: opt.angleTangentCoefficient || 80,\n    tau: opt.tension || 0.5,\n    sourceTangent: opt.sourceTangent ? new Point(opt.sourceTangent) : null,\n    targetTangent: opt.targetTangent ? new Point(opt.targetTangent) : null,\n    rotate: Boolean(opt.rotate)\n  };\n  if (typeof opt.sourceDirection === 'string') options.sourceDirection = opt.sourceDirection;else if (typeof opt.sourceDirection === 'number') options.sourceDirection = new Point(1, 0).rotate(null, opt.sourceDirection);else options.sourceDirection = opt.sourceDirection ? new Point(opt.sourceDirection).normalize() : null;\n  if (typeof opt.targetDirection === 'string') options.targetDirection = opt.targetDirection;else if (typeof opt.targetDirection === 'number') options.targetDirection = new Point(1, 0).rotate(null, opt.targetDirection);else options.targetDirection = opt.targetDirection ? new Point(opt.targetDirection).normalize() : null;\n  const completeRoute = [sourcePoint, ...route, targetPoint].map(p => new Point(p));\n\n  // The calculation of a sourceTangent\n  let sourceTangent;\n  if (options.sourceTangent) {\n    sourceTangent = options.sourceTangent;\n  } else {\n    const sourceDirection = getSourceTangentDirection(linkView, completeRoute, direction, options);\n    const tangentLength = completeRoute[0].distance(completeRoute[1]) * options.coeff;\n    const pointsVector = completeRoute[1].difference(completeRoute[0]).normalize();\n    const angle = angleBetweenVectors(sourceDirection, pointsVector);\n    if (angle > Math.PI / 4) {\n      const updatedLength = tangentLength + (angle - Math.PI / 4) * options.angleTangentCoefficient;\n      sourceTangent = sourceDirection.clone().scale(updatedLength, updatedLength);\n    } else {\n      sourceTangent = sourceDirection.clone().scale(tangentLength, tangentLength);\n    }\n  }\n\n  // The calculation of a targetTangent\n  let targetTangent;\n  if (options.targetTangent) {\n    targetTangent = options.targetTangent;\n  } else {\n    const targetDirection = getTargetTangentDirection(linkView, completeRoute, direction, options);\n    const last = completeRoute.length - 1;\n    const tangentLength = completeRoute[last - 1].distance(completeRoute[last]) * options.coeff;\n    const pointsVector = completeRoute[last - 1].difference(completeRoute[last]).normalize();\n    const angle = angleBetweenVectors(targetDirection, pointsVector);\n    if (angle > Math.PI / 4) {\n      const updatedLength = tangentLength + (angle - Math.PI / 4) * options.angleTangentCoefficient;\n      targetTangent = targetDirection.clone().scale(updatedLength, updatedLength);\n    } else {\n      targetTangent = targetDirection.clone().scale(tangentLength, tangentLength);\n    }\n  }\n  const catmullRomCurves = createCatmullRomCurves(completeRoute, sourceTangent, targetTangent, options);\n  const bezierCurves = catmullRomCurves.map(curve => catmullRomToBezier(curve, options));\n  const path = new Path(bezierCurves).round(precision);\n  return raw ? path : path.serialize();\n};\ncurve.Directions = Directions;\ncurve.TangentDirections = TangentDirections;\nfunction getHorizontalSourceDirection(linkView, route, options) {\n  const {\n    sourceBBox\n  } = linkView;\n  let sourceSide;\n  let rotation;\n  if (!linkView.sourceView) {\n    if (sourceBBox.x > route[1].x) sourceSide = 'right';else sourceSide = 'left';\n  } else {\n    rotation = linkView.sourceView.model.angle();\n    if (options.rotate && rotation) {\n      const unrotatedBBox = linkView.sourceView.getNodeUnrotatedBBox(linkView.sourceView.el);\n      const sourcePoint = route[0].clone();\n      sourcePoint.rotate(sourceBBox.center(), rotation);\n      sourceSide = unrotatedBBox.sideNearestToPoint(sourcePoint);\n    } else {\n      sourceSide = sourceBBox.sideNearestToPoint(route[0]);\n    }\n  }\n  let direction;\n  switch (sourceSide) {\n    case 'left':\n      direction = new Point(-1, 0);\n      break;\n    case 'right':\n    default:\n      direction = new Point(1, 0);\n      break;\n  }\n  if (options.rotate && rotation) {\n    direction.rotate(null, -rotation);\n  }\n  return direction;\n}\nfunction getHorizontalTargetDirection(linkView, route, options) {\n  const {\n    targetBBox\n  } = linkView;\n  let targetSide;\n  let rotation;\n  if (!linkView.targetView) {\n    if (targetBBox.x > route[route.length - 2].x) targetSide = 'left';else targetSide = 'right';\n  } else {\n    rotation = linkView.targetView.model.angle();\n    if (options.rotate && rotation) {\n      const unrotatedBBox = linkView.targetView.getNodeUnrotatedBBox(linkView.targetView.el);\n      const targetPoint = route[route.length - 1].clone();\n      targetPoint.rotate(targetBBox.center(), rotation);\n      targetSide = unrotatedBBox.sideNearestToPoint(targetPoint);\n    } else {\n      targetSide = targetBBox.sideNearestToPoint(route[route.length - 1]);\n    }\n  }\n  let direction;\n  switch (targetSide) {\n    case 'left':\n      direction = new Point(-1, 0);\n      break;\n    case 'right':\n    default:\n      direction = new Point(1, 0);\n      break;\n  }\n  if (options.rotate && rotation) {\n    direction.rotate(null, -rotation);\n  }\n  return direction;\n}\nfunction getVerticalSourceDirection(linkView, route, options) {\n  const {\n    sourceBBox\n  } = linkView;\n  let sourceSide;\n  let rotation;\n  if (!linkView.sourceView) {\n    if (sourceBBox.y > route[1].y) sourceSide = 'bottom';else sourceSide = 'top';\n  } else {\n    rotation = linkView.sourceView.model.angle();\n    if (options.rotate && rotation) {\n      const unrotatedBBox = linkView.sourceView.getNodeUnrotatedBBox(linkView.sourceView.el);\n      const sourcePoint = route[0].clone();\n      sourcePoint.rotate(sourceBBox.center(), rotation);\n      sourceSide = unrotatedBBox.sideNearestToPoint(sourcePoint);\n    } else {\n      sourceSide = sourceBBox.sideNearestToPoint(route[0]);\n    }\n  }\n  let direction;\n  switch (sourceSide) {\n    case 'top':\n      direction = new Point(0, -1);\n      break;\n    case 'bottom':\n    default:\n      direction = new Point(0, 1);\n      break;\n  }\n  if (options.rotate && rotation) {\n    direction.rotate(null, -rotation);\n  }\n  return direction;\n}\nfunction getVerticalTargetDirection(linkView, route, options) {\n  const {\n    targetBBox\n  } = linkView;\n  let targetSide;\n  let rotation;\n  if (!linkView.targetView) {\n    if (targetBBox.y > route[route.length - 2].y) targetSide = 'top';else targetSide = 'bottom';\n  } else {\n    rotation = linkView.targetView.model.angle();\n    if (options.rotate && rotation) {\n      const unrotatedBBox = linkView.targetView.getNodeUnrotatedBBox(linkView.targetView.el);\n      const targetPoint = route[route.length - 1].clone();\n      targetPoint.rotate(targetBBox.center(), rotation);\n      targetSide = unrotatedBBox.sideNearestToPoint(targetPoint);\n    } else {\n      targetSide = targetBBox.sideNearestToPoint(route[route.length - 1]);\n    }\n  }\n  let direction;\n  switch (targetSide) {\n    case 'top':\n      direction = new Point(0, -1);\n      break;\n    case 'bottom':\n    default:\n      direction = new Point(0, 1);\n      break;\n  }\n  if (options.rotate && rotation) {\n    direction.rotate(null, -rotation);\n  }\n  return direction;\n}\nfunction getAutoSourceDirection(linkView, route, options) {\n  const {\n    sourceBBox\n  } = linkView;\n  let sourceSide;\n  let rotation;\n  if (!linkView.sourceView) {\n    sourceSide = sourceBBox.sideNearestToPoint(route[1]);\n  } else {\n    rotation = linkView.sourceView.model.angle();\n    if (options.rotate && rotation) {\n      const unrotatedBBox = linkView.sourceView.getNodeUnrotatedBBox(linkView.sourceView.el);\n      const sourcePoint = route[0].clone();\n      sourcePoint.rotate(sourceBBox.center(), rotation);\n      sourceSide = unrotatedBBox.sideNearestToPoint(sourcePoint);\n    } else {\n      sourceSide = sourceBBox.sideNearestToPoint(route[0]);\n    }\n  }\n  let direction;\n  switch (sourceSide) {\n    case 'top':\n      direction = new Point(0, -1);\n      break;\n    case 'bottom':\n      direction = new Point(0, 1);\n      break;\n    case 'right':\n      direction = new Point(1, 0);\n      break;\n    case 'left':\n      direction = new Point(-1, 0);\n      break;\n  }\n  if (options.rotate && rotation) {\n    direction.rotate(null, -rotation);\n  }\n  return direction;\n}\nfunction getAutoTargetDirection(linkView, route, options) {\n  const {\n    targetBBox\n  } = linkView;\n  let targetSide;\n  let rotation;\n  if (!linkView.targetView) {\n    targetSide = targetBBox.sideNearestToPoint(route[route.length - 2]);\n  } else {\n    rotation = linkView.targetView.model.angle();\n    if (options.rotate && rotation) {\n      const unrotatedBBox = linkView.targetView.getNodeUnrotatedBBox(linkView.targetView.el);\n      const targetPoint = route[route.length - 1].clone();\n      targetPoint.rotate(targetBBox.center(), rotation);\n      targetSide = unrotatedBBox.sideNearestToPoint(targetPoint);\n    } else {\n      targetSide = targetBBox.sideNearestToPoint(route[route.length - 1]);\n    }\n  }\n  let direction;\n  switch (targetSide) {\n    case 'top':\n      direction = new Point(0, -1);\n      break;\n    case 'bottom':\n      direction = new Point(0, 1);\n      break;\n    case 'right':\n      direction = new Point(1, 0);\n      break;\n    case 'left':\n      direction = new Point(-1, 0);\n      break;\n  }\n  if (options.rotate && rotation) {\n    direction.rotate(null, -rotation);\n  }\n  return direction;\n}\nfunction getClosestPointSourceDirection(linkView, route, options) {\n  return route[1].difference(route[0]).normalize();\n}\nfunction getClosestPointTargetDirection(linkView, route, options) {\n  const last = route.length - 1;\n  return route[last - 1].difference(route[last]).normalize();\n}\nfunction getOutwardsSourceDirection(linkView, route, options) {\n  const {\n    sourceBBox\n  } = linkView;\n  const sourceCenter = sourceBBox.center();\n  return route[0].difference(sourceCenter).normalize();\n}\nfunction getOutwardsTargetDirection(linkView, route, options) {\n  const {\n    targetBBox\n  } = linkView;\n  const targetCenter = targetBBox.center();\n  return route[route.length - 1].difference(targetCenter).normalize();\n}\nfunction getSourceTangentDirection(linkView, route, direction, options) {\n  if (options.sourceDirection) {\n    switch (options.sourceDirection) {\n      case TangentDirections.UP:\n        return new Point(0, -1);\n      case TangentDirections.DOWN:\n        return new Point(0, 1);\n      case TangentDirections.LEFT:\n        return new Point(-1, 0);\n      case TangentDirections.RIGHT:\n        return new Point(1, 0);\n      case TangentDirections.AUTO:\n        return getAutoSourceDirection(linkView, route, options);\n      case TangentDirections.CLOSEST_POINT:\n        return getClosestPointSourceDirection(linkView, route, options);\n      case TangentDirections.OUTWARDS:\n        return getOutwardsSourceDirection(linkView, route, options);\n      default:\n        return options.sourceDirection;\n    }\n  }\n  switch (direction) {\n    case Directions.HORIZONTAL:\n      return getHorizontalSourceDirection(linkView, route, options);\n    case Directions.VERTICAL:\n      return getVerticalSourceDirection(linkView, route, options);\n    case Directions.CLOSEST_POINT:\n      return getClosestPointSourceDirection(linkView, route, options);\n    case Directions.OUTWARDS:\n      return getOutwardsSourceDirection(linkView, route, options);\n    case Directions.AUTO:\n    default:\n      return getAutoSourceDirection(linkView, route, options);\n  }\n}\nfunction getTargetTangentDirection(linkView, route, direction, options) {\n  if (options.targetDirection) {\n    switch (options.targetDirection) {\n      case TangentDirections.UP:\n        return new Point(0, -1);\n      case TangentDirections.DOWN:\n        return new Point(0, 1);\n      case TangentDirections.LEFT:\n        return new Point(-1, 0);\n      case TangentDirections.RIGHT:\n        return new Point(1, 0);\n      case TangentDirections.AUTO:\n        return getAutoTargetDirection(linkView, route, options);\n      case TangentDirections.CLOSEST_POINT:\n        return getClosestPointTargetDirection(linkView, route, options);\n      case TangentDirections.OUTWARDS:\n        return getOutwardsTargetDirection(linkView, route, options);\n      default:\n        return options.targetDirection;\n    }\n  }\n  switch (direction) {\n    case Directions.HORIZONTAL:\n      return getHorizontalTargetDirection(linkView, route, options);\n    case Directions.VERTICAL:\n      return getVerticalTargetDirection(linkView, route, options);\n    case Directions.CLOSEST_POINT:\n      return getClosestPointTargetDirection(linkView, route, options);\n    case Directions.OUTWARDS:\n      return getOutwardsTargetDirection(linkView, route, options);\n    case Directions.AUTO:\n    default:\n      return getAutoTargetDirection(linkView, route, options);\n  }\n}\nfunction rotateVector(vector, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const x = cos * vector.x - sin * vector.y;\n  const y = sin * vector.x + cos * vector.y;\n  vector.x = x;\n  vector.y = y;\n}\nfunction angleBetweenVectors(v1, v2) {\n  let cos = v1.dot(v2) / (v1.magnitude() * v2.magnitude());\n  if (cos < -1) cos = -1;\n  if (cos > 1) cos = 1;\n  return Math.acos(cos);\n}\nfunction determinant(v1, v2) {\n  return v1.x * v2.y - v1.y * v2.x;\n}\nfunction createCatmullRomCurves(points, sourceTangent, targetTangent, options) {\n  const {\n    tau,\n    coeff\n  } = options;\n  const distances = [];\n  const tangents = [];\n  const catmullRomCurves = [];\n  const n = points.length - 1;\n  for (let i = 0; i < n; i++) {\n    distances[i] = points[i].distance(points[i + 1]);\n  }\n  tangents[0] = sourceTangent;\n  tangents[n] = targetTangent;\n\n  // The calculation of tangents of vertices\n  for (let i = 1; i < n; i++) {\n    let tpPrev;\n    let tpNext;\n    if (i === 1) {\n      tpPrev = points[i - 1].clone().offset(tangents[i - 1].x, tangents[i - 1].y);\n    } else {\n      tpPrev = points[i - 1].clone();\n    }\n    if (i === n - 1) {\n      tpNext = points[i + 1].clone().offset(tangents[i + 1].x, tangents[i + 1].y);\n    } else {\n      tpNext = points[i + 1].clone();\n    }\n    const v1 = tpPrev.difference(points[i]).normalize();\n    const v2 = tpNext.difference(points[i]).normalize();\n    const vAngle = angleBetweenVectors(v1, v2);\n    let rot = (Math.PI - vAngle) / 2;\n    let t;\n    const vectorDeterminant = determinant(v1, v2);\n    let pointsDeterminant;\n    pointsDeterminant = determinant(points[i].difference(points[i + 1]), points[i].difference(points[i - 1]));\n    if (vectorDeterminant < 0) {\n      rot = -rot;\n    }\n    if (vAngle < Math.PI / 2 && (rot < 0 && pointsDeterminant < 0 || rot > 0 && pointsDeterminant > 0)) {\n      rot = rot - Math.PI;\n    }\n    t = v2.clone();\n    rotateVector(t, rot);\n    const t1 = t.clone();\n    const t2 = t.clone();\n    const scaleFactor1 = distances[i - 1] * coeff;\n    const scaleFactor2 = distances[i] * coeff;\n    t1.scale(scaleFactor1, scaleFactor1);\n    t2.scale(scaleFactor2, scaleFactor2);\n    tangents[i] = [t1, t2];\n  }\n\n  // The building of a Catmull-Rom curve based of tangents of points\n  for (let i = 0; i < n; i++) {\n    let p0;\n    let p3;\n    if (i === 0) {\n      p0 = points[i + 1].difference(tangents[i].x / tau, tangents[i].y / tau);\n    } else {\n      p0 = points[i + 1].difference(tangents[i][1].x / tau, tangents[i][1].y / tau);\n    }\n    if (i === n - 1) {\n      p3 = points[i].clone().offset(tangents[i + 1].x / tau, tangents[i + 1].y / tau);\n    } else {\n      p3 = points[i].difference(tangents[i + 1][0].x / tau, tangents[i + 1][0].y / tau);\n    }\n    catmullRomCurves[i] = [p0, points[i], points[i + 1], p3];\n  }\n  return catmullRomCurves;\n}\n\n// The function to convert Catmull-Rom curve to Bezier curve using the tension (tau)\nfunction catmullRomToBezier(points, options) {\n  const {\n    tau\n  } = options;\n  const bcp1 = new Point();\n  bcp1.x = points[1].x + (points[2].x - points[0].x) / (6 * tau);\n  bcp1.y = points[1].y + (points[2].y - points[0].y) / (6 * tau);\n  const bcp2 = new Point();\n  bcp2.x = points[2].x + (points[3].x - points[1].x) / (6 * tau);\n  bcp2.y = points[2].y + (points[3].y - points[1].y) / (6 * tau);\n  return new Curve(points[1], bcp1, bcp2, points[2]);\n}", "import { CellView } from './CellView.mjs';\nimport { Link } from './Link.mjs';\nimport V from '../V/index.mjs';\nimport { addClassNamePrefix, removeClassNamePrefix, merge, template, assign, toArray, isObject, isFunction, clone, isPercentage, result, isEqual } from '../util/index.mjs';\nimport { Point, Line, Path, normalizeAngle, Rect, Polyline } from '../g/index.mjs';\nimport * as routers from '../routers/index.mjs';\nimport * as connectors from '../connectors/index.mjs';\nimport $ from 'jquery';\nconst Flags = {\n  TOOLS: CellView.Flags.TOOLS,\n  RENDER: 'RENDER',\n  UPDATE: 'UPDATE',\n  LEGACY_TOOLS: 'LEGACY_TOOLS',\n  LABELS: 'LABELS',\n  VERTICES: 'VERTICES',\n  SOURCE: 'SOURCE',\n  TARGET: 'TARGET',\n  CONNECTOR: 'CONNECTOR'\n};\n\n// Link base view and controller.\n// ----------------------------------------\n\nexport const LinkView = CellView.extend({\n  className: function () {\n    var classNames = CellView.prototype.className.apply(this).split(' ');\n    classNames.push('link');\n    return classNames.join(' ');\n  },\n  options: {\n    shortLinkLength: 105,\n    doubleLinkTools: false,\n    longLinkLength: 155,\n    linkToolsOffset: 40,\n    doubleLinkToolsOffset: 65,\n    sampleInterval: 50\n  },\n  _labelCache: null,\n  _labelSelectors: null,\n  _markerCache: null,\n  _V: null,\n  _dragData: null,\n  // deprecated\n\n  metrics: null,\n  decimalsRounding: 2,\n  initialize: function () {\n    CellView.prototype.initialize.apply(this, arguments);\n\n    // `_.labelCache` is a mapping of indexes of labels in the `this.get('labels')` array to\n    // `<g class=\"label\">` nodes wrapped by Vectorizer. This allows for quick access to the\n    // nodes in `updateLabelPosition()` in order to update the label positions.\n    this._labelCache = {};\n\n    // a cache of label selectors\n    this._labelSelectors = {};\n\n    // keeps markers bboxes and positions again for quicker access\n    this._markerCache = {};\n\n    // cache of default markup nodes\n    this._V = {};\n\n    // connection path metrics\n    this.cleanNodesCache();\n  },\n  presentationAttributes: {\n    markup: [Flags.RENDER],\n    attrs: [Flags.UPDATE],\n    router: [Flags.UPDATE],\n    connector: [Flags.CONNECTOR],\n    smooth: [Flags.UPDATE],\n    manhattan: [Flags.UPDATE],\n    toolMarkup: [Flags.LEGACY_TOOLS],\n    labels: [Flags.LABELS],\n    labelMarkup: [Flags.LABELS],\n    vertices: [Flags.VERTICES, Flags.UPDATE],\n    vertexMarkup: [Flags.VERTICES],\n    source: [Flags.SOURCE, Flags.UPDATE],\n    target: [Flags.TARGET, Flags.UPDATE]\n  },\n  initFlag: [Flags.RENDER, Flags.SOURCE, Flags.TARGET, Flags.TOOLS],\n  UPDATE_PRIORITY: 1,\n  confirmUpdate: function (flags, opt) {\n    opt || (opt = {});\n    if (this.hasFlag(flags, Flags.SOURCE)) {\n      if (!this.updateEndProperties('source')) return flags;\n      flags = this.removeFlag(flags, Flags.SOURCE);\n    }\n    if (this.hasFlag(flags, Flags.TARGET)) {\n      if (!this.updateEndProperties('target')) return flags;\n      flags = this.removeFlag(flags, Flags.TARGET);\n    }\n    const {\n      paper,\n      sourceView,\n      targetView\n    } = this;\n    if (paper && (sourceView && !paper.isViewMounted(sourceView) || targetView && !paper.isViewMounted(targetView))) {\n      // Wait for the sourceView and targetView to be rendered\n      return flags;\n    }\n    if (this.hasFlag(flags, Flags.RENDER)) {\n      this.render();\n      this.updateHighlighters(true);\n      this.updateTools(opt);\n      flags = this.removeFlag(flags, [Flags.RENDER, Flags.UPDATE, Flags.VERTICES, Flags.LABELS, Flags.TOOLS, Flags.LEGACY_TOOLS, Flags.CONNECTOR]);\n      return flags;\n    }\n    let updateHighlighters = false;\n    if (this.hasFlag(flags, Flags.VERTICES)) {\n      this.renderVertexMarkers();\n      flags = this.removeFlag(flags, Flags.VERTICES);\n    }\n    const {\n      model\n    } = this;\n    const {\n      attributes\n    } = model;\n    let updateLabels = this.hasFlag(flags, Flags.LABELS);\n    let updateLegacyTools = this.hasFlag(flags, Flags.LEGACY_TOOLS);\n    if (updateLabels) {\n      this.onLabelsChange(model, attributes.labels, opt);\n      flags = this.removeFlag(flags, Flags.LABELS);\n      updateHighlighters = true;\n    }\n    if (updateLegacyTools) {\n      this.renderTools();\n      flags = this.removeFlag(flags, Flags.LEGACY_TOOLS);\n    }\n    const updateAll = this.hasFlag(flags, Flags.UPDATE);\n    const updateConnector = this.hasFlag(flags, Flags.CONNECTOR);\n    if (updateAll || updateConnector) {\n      if (!updateAll) {\n        // Keep the current route and update the geometry\n        this.updatePath();\n        this.updateDOM();\n      } else if (opt.translateBy && model.isRelationshipEmbeddedIn(opt.translateBy)) {\n        // The link is being translated by an ancestor that will\n        // shift source point, target point and all vertices\n        // by an equal distance.\n        this.translate(opt.tx, opt.ty);\n      } else {\n        this.update();\n      }\n      this.updateTools(opt);\n      flags = this.removeFlag(flags, [Flags.UPDATE, Flags.TOOLS, Flags.CONNECTOR]);\n      updateLabels = false;\n      updateLegacyTools = false;\n      updateHighlighters = true;\n    }\n    if (updateLabels) {\n      this.updateLabelPositions();\n    }\n    if (updateLegacyTools) {\n      this.updateToolsPosition();\n    }\n    if (updateHighlighters) {\n      this.updateHighlighters();\n    }\n    if (this.hasFlag(flags, Flags.TOOLS)) {\n      this.updateTools(opt);\n      flags = this.removeFlag(flags, Flags.TOOLS);\n    }\n    return flags;\n  },\n  requestConnectionUpdate: function (opt) {\n    this.requestUpdate(this.getFlag(Flags.UPDATE), opt);\n  },\n  isLabelsRenderRequired: function (opt = {}) {\n    const previousLabels = this.model.previous('labels');\n    if (!previousLabels) return true;\n\n    // Here is an optimization for cases when we know, that change does\n    // not require re-rendering of all labels.\n    if ('propertyPathArray' in opt && 'propertyValue' in opt) {\n      // The label is setting by `prop()` method\n      var pathArray = opt.propertyPathArray || [];\n      var pathLength = pathArray.length;\n      if (pathLength > 1) {\n        // We are changing a single label here e.g. 'labels/0/position'\n        var labelExists = !!previousLabels[pathArray[1]];\n        if (labelExists) {\n          if (pathLength === 2) {\n            // We are changing the entire label. Need to check if the\n            // markup is also being changed.\n            return 'markup' in Object(opt.propertyValue);\n          } else if (pathArray[2] !== 'markup') {\n            // We are changing a label property but not the markup\n            return false;\n          }\n        }\n      }\n    }\n    return true;\n  },\n  onLabelsChange: function (_link, _labels, opt) {\n    // Note: this optimization works in async=false mode only\n    if (this.isLabelsRenderRequired(opt)) {\n      this.renderLabels();\n    } else {\n      this.updateLabels();\n    }\n  },\n  // Rendering.\n  // ----------\n\n  render: function () {\n    this.vel.empty();\n    this.unmountLabels();\n    this._V = {};\n    this.renderMarkup();\n    // rendering labels has to be run after the link is appended to DOM tree. (otherwise <Text> bbox\n    // returns zero values)\n    this.renderLabels();\n    this.update();\n    return this;\n  },\n  renderMarkup: function () {\n    var link = this.model;\n    var markup = link.get('markup') || link.markup;\n    if (!markup) throw new Error('dia.LinkView: markup required');\n    if (Array.isArray(markup)) return this.renderJSONMarkup(markup);\n    if (typeof markup === 'string') return this.renderStringMarkup(markup);\n    throw new Error('dia.LinkView: invalid markup');\n  },\n  renderJSONMarkup: function (markup) {\n    var doc = this.parseDOMJSON(markup, this.el);\n    // Selectors\n    this.selectors = doc.selectors;\n    // Fragment\n    this.vel.append(doc.fragment);\n  },\n  renderStringMarkup: function (markup) {\n    // A special markup can be given in the `properties.markup` property. This might be handy\n    // if e.g. arrowhead markers should be `<image>` elements or any other element than `<path>`s.\n    // `.connection`, `.connection-wrap`, `.marker-source` and `.marker-target` selectors\n    // of elements with special meaning though. Therefore, those classes should be preserved in any\n    // special markup passed in `properties.markup`.\n    var children = V(markup);\n    // custom markup may contain only one children\n    if (!Array.isArray(children)) children = [children];\n    // Cache all children elements for quicker access.\n    var cache = this._V; // vectorized markup;\n    for (var i = 0, n = children.length; i < n; i++) {\n      var child = children[i];\n      var className = child.attr('class');\n      if (className) {\n        // Strip the joint class name prefix, if there is one.\n        className = removeClassNamePrefix(className);\n        cache[$.camelCase(className)] = child;\n      }\n    }\n    // partial rendering\n    this.renderTools();\n    this.renderVertexMarkers();\n    this.renderArrowheadMarkers();\n    this.vel.append(children);\n  },\n  _getLabelMarkup: function (labelMarkup) {\n    if (!labelMarkup) return undefined;\n    if (Array.isArray(labelMarkup)) return this.parseDOMJSON(labelMarkup, null);\n    if (typeof labelMarkup === 'string') return this._getLabelStringMarkup(labelMarkup);\n    throw new Error('dia.linkView: invalid label markup');\n  },\n  _getLabelStringMarkup: function (labelMarkup) {\n    var children = V(labelMarkup);\n    var fragment = document.createDocumentFragment();\n    if (!Array.isArray(children)) {\n      fragment.appendChild(children.node);\n    } else {\n      for (var i = 0, n = children.length; i < n; i++) {\n        var currentChild = children[i].node;\n        fragment.appendChild(currentChild);\n      }\n    }\n    return {\n      fragment: fragment,\n      selectors: {}\n    }; // no selectors\n  },\n  // Label markup fragment may come wrapped in <g class=\"label\" />, or not.\n  // If it doesn't, add the <g /> container here.\n  _normalizeLabelMarkup: function (markup) {\n    if (!markup) return undefined;\n    var fragment = markup.fragment;\n    if (!(markup.fragment instanceof DocumentFragment) || !markup.fragment.hasChildNodes()) throw new Error('dia.LinkView: invalid label markup.');\n    var vNode;\n    var childNodes = fragment.childNodes;\n    if (childNodes.length > 1 || childNodes[0].nodeName.toUpperCase() !== 'G') {\n      // default markup fragment is not wrapped in <g />\n      // add a <g /> container\n      vNode = V('g').append(fragment);\n    } else {\n      vNode = V(childNodes[0]);\n    }\n    vNode.addClass('label');\n    return {\n      node: vNode.node,\n      selectors: markup.selectors\n    };\n  },\n  renderLabels: function () {\n    var cache = this._V;\n    var vLabels = cache.labels;\n    var labelCache = this._labelCache = {};\n    var labelSelectors = this._labelSelectors = {};\n    var model = this.model;\n    var labels = model.attributes.labels || [];\n    var labelsCount = labels.length;\n    if (labelsCount === 0) {\n      if (vLabels) vLabels.remove();\n      return this;\n    }\n    if (vLabels) {\n      vLabels.empty();\n    } else {\n      // there is no label container in the markup but some labels are defined\n      // add a <g class=\"labels\" /> container\n      vLabels = cache.labels = V('g').addClass('labels');\n      if (this.options.labelsLayer) {\n        vLabels.addClass(addClassNamePrefix(result(this, 'className')));\n        vLabels.attr('model-id', model.id);\n      }\n    }\n    for (var i = 0; i < labelsCount; i++) {\n      var label = labels[i];\n      var labelMarkup = this._normalizeLabelMarkup(this._getLabelMarkup(label.markup));\n      var labelNode;\n      var selectors;\n      if (labelMarkup) {\n        labelNode = labelMarkup.node;\n        selectors = labelMarkup.selectors;\n      } else {\n        var builtinDefaultLabel = model._builtins.defaultLabel;\n        var builtinDefaultLabelMarkup = this._normalizeLabelMarkup(this._getLabelMarkup(builtinDefaultLabel.markup));\n        var defaultLabel = model._getDefaultLabel();\n        var defaultLabelMarkup = this._normalizeLabelMarkup(this._getLabelMarkup(defaultLabel.markup));\n        var defaultMarkup = defaultLabelMarkup || builtinDefaultLabelMarkup;\n        labelNode = defaultMarkup.node;\n        selectors = defaultMarkup.selectors;\n      }\n      labelNode.setAttribute('label-idx', i); // assign label-idx\n      vLabels.append(labelNode);\n      labelCache[i] = labelNode; // cache node for `updateLabels()` so it can just update label node positions\n\n      var rootSelector = this.selector;\n      if (selectors[rootSelector]) throw new Error('dia.LinkView: ambiguous label root selector.');\n      selectors[rootSelector] = labelNode;\n      labelSelectors[i] = selectors; // cache label selectors for `updateLabels()`\n    }\n    if (!vLabels.parent()) {\n      this.mountLabels();\n    }\n    this.updateLabels();\n    return this;\n  },\n  mountLabels: function () {\n    const {\n      el,\n      paper,\n      model,\n      _V,\n      options\n    } = this;\n    const {\n      labels: vLabels\n    } = _V;\n    if (!vLabels || !model.hasLabels()) return;\n    const {\n      node\n    } = vLabels;\n    if (options.labelsLayer) {\n      paper.getLayerView(options.labelsLayer).insertSortedNode(node, model.get('z'));\n    } else {\n      if (node.parentNode !== el) {\n        el.appendChild(node);\n      }\n    }\n  },\n  unmountLabels: function () {\n    const {\n      options,\n      _V\n    } = this;\n    if (!_V) return;\n    const {\n      labels: vLabels\n    } = _V;\n    if (vLabels && options.labelsLayer) {\n      vLabels.remove();\n    }\n  },\n  findLabelNode: function (labelIndex, selector) {\n    const labelRoot = this._labelCache[labelIndex];\n    if (!labelRoot) return null;\n    const labelSelectors = this._labelSelectors[labelIndex];\n    const [node = null] = this.findBySelector(selector, labelRoot, labelSelectors);\n    return node;\n  },\n  // merge default label attrs into label attrs (or use built-in default label attrs if neither is provided)\n  // keep `undefined` or `null` because `{}` means something else\n  _mergeLabelAttrs: function (hasCustomMarkup, labelAttrs, defaultLabelAttrs, builtinDefaultLabelAttrs) {\n    if (labelAttrs === null) return null;\n    if (labelAttrs === undefined) {\n      if (defaultLabelAttrs === null) return null;\n      if (defaultLabelAttrs === undefined) {\n        if (hasCustomMarkup) return undefined;\n        return builtinDefaultLabelAttrs;\n      }\n      if (hasCustomMarkup) return defaultLabelAttrs;\n      return merge({}, builtinDefaultLabelAttrs, defaultLabelAttrs);\n    }\n    if (hasCustomMarkup) return merge({}, defaultLabelAttrs, labelAttrs);\n    return merge({}, builtinDefaultLabelAttrs, defaultLabelAttrs, labelAttrs);\n  },\n  // merge default label size into label size (no built-in default)\n  // keep `undefined` or `null` because `{}` means something else\n  _mergeLabelSize: function (labelSize, defaultLabelSize) {\n    if (labelSize === null) return null;\n    if (labelSize === undefined) {\n      if (defaultLabelSize === null) return null;\n      if (defaultLabelSize === undefined) return undefined;\n      return defaultLabelSize;\n    }\n    return merge({}, defaultLabelSize, labelSize);\n  },\n  updateLabels: function () {\n    if (!this._V.labels) return this;\n    var model = this.model;\n    var labels = model.get('labels') || [];\n    var canLabelMove = this.can('labelMove');\n    var builtinDefaultLabel = model._builtins.defaultLabel;\n    var builtinDefaultLabelAttrs = builtinDefaultLabel.attrs;\n    var defaultLabel = model._getDefaultLabel();\n    var defaultLabelMarkup = defaultLabel.markup;\n    var defaultLabelAttrs = defaultLabel.attrs;\n    var defaultLabelSize = defaultLabel.size;\n    for (var i = 0, n = labels.length; i < n; i++) {\n      var labelNode = this._labelCache[i];\n      labelNode.setAttribute('cursor', canLabelMove ? 'move' : 'default');\n      var selectors = this._labelSelectors[i];\n      var label = labels[i];\n      var labelMarkup = label.markup;\n      var labelAttrs = label.attrs;\n      var labelSize = label.size;\n      var attrs = this._mergeLabelAttrs(labelMarkup || defaultLabelMarkup, labelAttrs, defaultLabelAttrs, builtinDefaultLabelAttrs);\n      var size = this._mergeLabelSize(labelSize, defaultLabelSize);\n      this.updateDOMSubtreeAttributes(labelNode, attrs, {\n        rootBBox: new Rect(size),\n        selectors: selectors\n      });\n    }\n    return this;\n  },\n  renderTools: function () {\n    if (!this._V.linkTools) return this;\n\n    // Tools are a group of clickable elements that manipulate the whole link.\n    // A good example of this is the remove tool that removes the whole link.\n    // Tools appear after hovering the link close to the `source` element/point of the link\n    // but are offset a bit so that they don't cover the `marker-arrowhead`.\n\n    var $tools = $(this._V.linkTools.node).empty();\n    var toolTemplate = template(this.model.get('toolMarkup') || this.model.toolMarkup);\n    var tool = V(toolTemplate());\n    $tools.append(tool.node);\n\n    // Cache the tool node so that the `updateToolsPosition()` can update the tool position quickly.\n    this._toolCache = tool;\n\n    // If `doubleLinkTools` is enabled, we render copy of the tools on the other side of the\n    // link as well but only if the link is longer than `longLinkLength`.\n    if (this.options.doubleLinkTools) {\n      var tool2;\n      if (this.model.get('doubleToolMarkup') || this.model.doubleToolMarkup) {\n        toolTemplate = template(this.model.get('doubleToolMarkup') || this.model.doubleToolMarkup);\n        tool2 = V(toolTemplate());\n      } else {\n        tool2 = tool.clone();\n      }\n      $tools.append(tool2.node);\n      this._tool2Cache = tool2;\n    }\n    return this;\n  },\n  renderVertexMarkers: function () {\n    if (!this._V.markerVertices) return this;\n    var $markerVertices = $(this._V.markerVertices.node).empty();\n\n    // A special markup can be given in the `properties.vertexMarkup` property. This might be handy\n    // if default styling (elements) are not desired. This makes it possible to use any\n    // SVG elements for .marker-vertex and .marker-vertex-remove tools.\n    var markupTemplate = template(this.model.get('vertexMarkup') || this.model.vertexMarkup);\n    this.model.vertices().forEach(function (vertex, idx) {\n      $markerVertices.append(V(markupTemplate(assign({\n        idx: idx\n      }, vertex))).node);\n    });\n    return this;\n  },\n  renderArrowheadMarkers: function () {\n    // Custom markups might not have arrowhead markers. Therefore, jump of this function immediately if that's the case.\n    if (!this._V.markerArrowheads) return this;\n    var $markerArrowheads = $(this._V.markerArrowheads.node);\n    $markerArrowheads.empty();\n\n    // A special markup can be given in the `properties.vertexMarkup` property. This might be handy\n    // if default styling (elements) are not desired. This makes it possible to use any\n    // SVG elements for .marker-vertex and .marker-vertex-remove tools.\n    var markupTemplate = template(this.model.get('arrowheadMarkup') || this.model.arrowheadMarkup);\n    this._V.sourceArrowhead = V(markupTemplate({\n      end: 'source'\n    }));\n    this._V.targetArrowhead = V(markupTemplate({\n      end: 'target'\n    }));\n    $markerArrowheads.append(this._V.sourceArrowhead.node, this._V.targetArrowhead.node);\n    return this;\n  },\n  // remove vertices that lie on (or nearly on) straight lines within the link\n  // return the number of removed points\n  removeRedundantLinearVertices: function (opt) {\n    const SIMPLIFY_THRESHOLD = 0.001;\n    const link = this.model;\n    const vertices = link.vertices();\n    const routePoints = [this.sourceAnchor, ...vertices, this.targetAnchor];\n    const numRoutePoints = routePoints.length;\n\n    // put routePoints into a polyline and try to simplify\n    const polyline = new Polyline(routePoints);\n    polyline.simplify({\n      threshold: SIMPLIFY_THRESHOLD\n    });\n    const polylinePoints = polyline.points.map(point => point.toJSON()); // JSON of points after simplification\n    const numPolylinePoints = polylinePoints.length; // number of points after simplification\n\n    // shortcut if simplification did not remove any redundant vertices:\n    if (numRoutePoints === numPolylinePoints) return 0;\n\n    // else: set simplified polyline points as link vertices\n    // remove first and last polyline points again (= source/target anchors)\n    link.vertices(polylinePoints.slice(1, numPolylinePoints - 1), opt);\n    return numRoutePoints - numPolylinePoints;\n  },\n  updateDefaultConnectionPath: function () {\n    var cache = this._V;\n    if (cache.connection) {\n      cache.connection.attr('d', this.getSerializedConnection());\n    }\n    if (cache.connectionWrap) {\n      cache.connectionWrap.attr('d', this.getSerializedConnection());\n    }\n    if (cache.markerSource && cache.markerTarget) {\n      this._translateAndAutoOrientArrows(cache.markerSource, cache.markerTarget);\n    }\n  },\n  getEndView: function (type) {\n    switch (type) {\n      case 'source':\n        return this.sourceView || null;\n      case 'target':\n        return this.targetView || null;\n      default:\n        throw new Error('dia.LinkView: type parameter required.');\n    }\n  },\n  getEndAnchor: function (type) {\n    switch (type) {\n      case 'source':\n        return new Point(this.sourceAnchor);\n      case 'target':\n        return new Point(this.targetAnchor);\n      default:\n        throw new Error('dia.LinkView: type parameter required.');\n    }\n  },\n  getEndConnectionPoint: function (type) {\n    switch (type) {\n      case 'source':\n        return new Point(this.sourcePoint);\n      case 'target':\n        return new Point(this.targetPoint);\n      default:\n        throw new Error('dia.LinkView: type parameter required.');\n    }\n  },\n  getEndMagnet: function (type) {\n    switch (type) {\n      case 'source':\n        var sourceView = this.sourceView;\n        if (!sourceView) break;\n        return this.sourceMagnet || sourceView.el;\n      case 'target':\n        var targetView = this.targetView;\n        if (!targetView) break;\n        return this.targetMagnet || targetView.el;\n      default:\n        throw new Error('dia.LinkView: type parameter required.');\n    }\n    return null;\n  },\n  // Updating.\n  // ---------\n\n  update: function () {\n    this.updateRoute();\n    this.updatePath();\n    this.updateDOM();\n    return this;\n  },\n  translate: function (tx = 0, ty = 0) {\n    const {\n      route,\n      path\n    } = this;\n    if (!route || !path) return;\n    // translate the route\n    const polyline = new Polyline(route);\n    polyline.translate(tx, ty);\n    this.route = polyline.points;\n    // translate source and target connection and marker points.\n    this._translateConnectionPoints(tx, ty);\n    // translate the geometry path\n    path.translate(tx, ty);\n    this.updateDOM();\n  },\n  updateDOM() {\n    const {\n      el,\n      model,\n      selectors\n    } = this;\n    this.cleanNodesCache();\n    // update SVG attributes defined by 'attrs/'.\n    this.updateDOMSubtreeAttributes(el, model.attr(), {\n      selectors\n    });\n    // legacy link path update\n    this.updateDefaultConnectionPath();\n    // update the label position etc.\n    this.updateLabelPositions();\n    this.updateToolsPosition();\n    this.updateArrowheadMarkers();\n    // *Deprecated*\n    // Local perpendicular flag (as opposed to one defined on paper).\n    // Could be enabled inside a connector/router. It's valid only\n    // during the update execution.\n    this.options.perpendicular = null;\n  },\n  updateRoute: function () {\n    const {\n      model\n    } = this;\n    const vertices = model.vertices();\n    // 1. Find Anchors\n    const anchors = this.findAnchors(vertices);\n    const sourceAnchor = this.sourceAnchor = anchors.source;\n    const targetAnchor = this.targetAnchor = anchors.target;\n    // 2. Find Route\n    const route = this.findRoute(vertices);\n    this.route = route;\n    // 3. Find Connection Points\n    var connectionPoints = this.findConnectionPoints(route, sourceAnchor, targetAnchor);\n    this.sourcePoint = connectionPoints.source;\n    this.targetPoint = connectionPoints.target;\n  },\n  updatePath: function () {\n    const {\n      route,\n      sourcePoint,\n      targetPoint\n    } = this;\n    // 3b. Find Marker Connection Point - Backwards Compatibility\n    const markerPoints = this.findMarkerPoints(route, sourcePoint, targetPoint);\n    // 4. Find Connection\n    const path = this.findPath(route, markerPoints.source || sourcePoint, markerPoints.target || targetPoint);\n    this.path = path;\n  },\n  findMarkerPoints: function (route, sourcePoint, targetPoint) {\n    var firstWaypoint = route[0];\n    var lastWaypoint = route[route.length - 1];\n\n    // Move the source point by the width of the marker taking into account\n    // its scale around x-axis. Note that scale is the only transform that\n    // makes sense to be set in `.marker-source` attributes object\n    // as all other transforms (translate/rotate) will be replaced\n    // by the `translateAndAutoOrient()` function.\n    var cache = this._markerCache;\n    // cache source and target points\n    var sourceMarkerPoint, targetMarkerPoint;\n    if (this._V.markerSource) {\n      cache.sourceBBox = cache.sourceBBox || this._V.markerSource.getBBox();\n      sourceMarkerPoint = Point(sourcePoint).move(firstWaypoint || targetPoint, cache.sourceBBox.width * this._V.markerSource.scale().sx * -1).round();\n    }\n    if (this._V.markerTarget) {\n      cache.targetBBox = cache.targetBBox || this._V.markerTarget.getBBox();\n      targetMarkerPoint = Point(targetPoint).move(lastWaypoint || sourcePoint, cache.targetBBox.width * this._V.markerTarget.scale().sx * -1).round();\n    }\n\n    // if there was no markup for the marker, use the connection point.\n    cache.sourcePoint = sourceMarkerPoint || sourcePoint.clone();\n    cache.targetPoint = targetMarkerPoint || targetPoint.clone();\n    return {\n      source: sourceMarkerPoint,\n      target: targetMarkerPoint\n    };\n  },\n  findAnchorsOrdered: function (firstEndType, firstRef, secondEndType, secondRef) {\n    var firstAnchor, secondAnchor;\n    var firstAnchorRef, secondAnchorRef;\n    var model = this.model;\n    var firstDef = model.get(firstEndType);\n    var secondDef = model.get(secondEndType);\n    var firstView = this.getEndView(firstEndType);\n    var secondView = this.getEndView(secondEndType);\n    var firstMagnet = this.getEndMagnet(firstEndType);\n    var secondMagnet = this.getEndMagnet(secondEndType);\n\n    // Anchor first\n    if (firstView) {\n      if (firstRef) {\n        firstAnchorRef = new Point(firstRef);\n      } else if (secondView) {\n        firstAnchorRef = secondMagnet;\n      } else {\n        firstAnchorRef = new Point(secondDef);\n      }\n      firstAnchor = this.getAnchor(firstDef.anchor, firstView, firstMagnet, firstAnchorRef, firstEndType);\n    } else {\n      firstAnchor = new Point(firstDef);\n    }\n\n    // Anchor second\n    if (secondView) {\n      secondAnchorRef = new Point(secondRef || firstAnchor);\n      secondAnchor = this.getAnchor(secondDef.anchor, secondView, secondMagnet, secondAnchorRef, secondEndType);\n    } else {\n      secondAnchor = new Point(secondDef);\n    }\n    var res = {};\n    res[firstEndType] = firstAnchor;\n    res[secondEndType] = secondAnchor;\n    return res;\n  },\n  findAnchors: function (vertices) {\n    var model = this.model;\n    var firstVertex = vertices[0];\n    var lastVertex = vertices[vertices.length - 1];\n    if (model.target().priority && !model.source().priority) {\n      // Reversed order\n      return this.findAnchorsOrdered('target', lastVertex, 'source', firstVertex);\n    }\n\n    // Usual order\n    return this.findAnchorsOrdered('source', firstVertex, 'target', lastVertex);\n  },\n  findConnectionPoints: function (route, sourceAnchor, targetAnchor) {\n    var firstWaypoint = route[0];\n    var lastWaypoint = route[route.length - 1];\n    var model = this.model;\n    var sourceDef = model.get('source');\n    var targetDef = model.get('target');\n    var sourceView = this.sourceView;\n    var targetView = this.targetView;\n    var paperOptions = this.paper.options;\n    var sourceMagnet, targetMagnet;\n\n    // Connection Point Source\n    var sourcePoint;\n    if (sourceView && !sourceView.isNodeConnection(this.sourceMagnet)) {\n      sourceMagnet = this.sourceMagnet || sourceView.el;\n      var sourceConnectionPointDef = sourceDef.connectionPoint || paperOptions.defaultConnectionPoint;\n      var sourcePointRef = firstWaypoint || targetAnchor;\n      var sourceLine = new Line(sourcePointRef, sourceAnchor);\n      sourcePoint = this.getConnectionPoint(sourceConnectionPointDef, sourceView, sourceMagnet, sourceLine, 'source');\n    } else {\n      sourcePoint = sourceAnchor;\n    }\n    // Connection Point Target\n    var targetPoint;\n    if (targetView && !targetView.isNodeConnection(this.targetMagnet)) {\n      targetMagnet = this.targetMagnet || targetView.el;\n      var targetConnectionPointDef = targetDef.connectionPoint || paperOptions.defaultConnectionPoint;\n      var targetPointRef = lastWaypoint || sourceAnchor;\n      var targetLine = new Line(targetPointRef, targetAnchor);\n      targetPoint = this.getConnectionPoint(targetConnectionPointDef, targetView, targetMagnet, targetLine, 'target');\n    } else {\n      targetPoint = targetAnchor;\n    }\n    return {\n      source: sourcePoint,\n      target: targetPoint\n    };\n  },\n  getAnchor: function (anchorDef, cellView, magnet, ref, endType) {\n    var isConnection = cellView.isNodeConnection(magnet);\n    var paperOptions = this.paper.options;\n    if (!anchorDef) {\n      if (isConnection) {\n        anchorDef = paperOptions.defaultLinkAnchor;\n      } else {\n        if (paperOptions.perpendicularLinks || this.options.perpendicular) {\n          // Backwards compatibility\n          // If `perpendicularLinks` flag is set on the paper and there are vertices\n          // on the link, then try to find a connection point that makes the link perpendicular\n          // even though the link won't point to the center of the targeted object.\n          anchorDef = {\n            name: 'perpendicular'\n          };\n        } else {\n          anchorDef = paperOptions.defaultAnchor;\n        }\n      }\n    }\n    if (!anchorDef) throw new Error('Anchor required.');\n    var anchorFn;\n    if (typeof anchorDef === 'function') {\n      anchorFn = anchorDef;\n    } else {\n      var anchorName = anchorDef.name;\n      var anchorNamespace = isConnection ? 'linkAnchorNamespace' : 'anchorNamespace';\n      anchorFn = paperOptions[anchorNamespace][anchorName];\n      if (typeof anchorFn !== 'function') throw new Error('Unknown anchor: ' + anchorName);\n    }\n    var anchor = anchorFn.call(this, cellView, magnet, ref, anchorDef.args || {}, endType, this);\n    if (!anchor) return new Point();\n    return anchor.round(this.decimalsRounding);\n  },\n  getConnectionPoint: function (connectionPointDef, view, magnet, line, endType) {\n    var connectionPoint;\n    var anchor = line.end;\n    var paperOptions = this.paper.options;\n\n    // Backwards compatibility\n    if (typeof paperOptions.linkConnectionPoint === 'function') {\n      var linkConnectionMagnet = magnet === view.el ? undefined : magnet;\n      connectionPoint = paperOptions.linkConnectionPoint(this, view, linkConnectionMagnet, line.start, endType);\n      if (connectionPoint) return connectionPoint;\n    }\n    if (!connectionPointDef) return anchor;\n    var connectionPointFn;\n    if (typeof connectionPointDef === 'function') {\n      connectionPointFn = connectionPointDef;\n    } else {\n      var connectionPointName = connectionPointDef.name;\n      connectionPointFn = paperOptions.connectionPointNamespace[connectionPointName];\n      if (typeof connectionPointFn !== 'function') throw new Error('Unknown connection point: ' + connectionPointName);\n    }\n    connectionPoint = connectionPointFn.call(this, line, view, magnet, connectionPointDef.args || {}, endType, this);\n    if (!connectionPoint) return anchor;\n    return connectionPoint.round(this.decimalsRounding);\n  },\n  _translateConnectionPoints: function (tx, ty) {\n    var cache = this._markerCache;\n    cache.sourcePoint.offset(tx, ty);\n    cache.targetPoint.offset(tx, ty);\n    this.sourcePoint.offset(tx, ty);\n    this.targetPoint.offset(tx, ty);\n    this.sourceAnchor.offset(tx, ty);\n    this.targetAnchor.offset(tx, ty);\n  },\n  // combine default label position with built-in default label position\n  _getDefaultLabelPositionProperty: function () {\n    var model = this.model;\n    var builtinDefaultLabel = model._builtins.defaultLabel;\n    var builtinDefaultLabelPosition = builtinDefaultLabel.position;\n    var defaultLabel = model._getDefaultLabel();\n    var defaultLabelPosition = this._normalizeLabelPosition(defaultLabel.position);\n    return merge({}, builtinDefaultLabelPosition, defaultLabelPosition);\n  },\n  // if label position is a number, normalize it to a position object\n  // this makes sure that label positions can be merged properly\n  _normalizeLabelPosition: function (labelPosition) {\n    if (typeof labelPosition === 'number') return {\n      distance: labelPosition,\n      offset: null,\n      angle: 0,\n      args: null\n    };\n    return labelPosition;\n  },\n  // expects normalized position properties\n  // e.g. `this._normalizeLabelPosition(labelPosition)` and `this._getDefaultLabelPositionProperty()`\n  _mergeLabelPositionProperty: function (normalizedLabelPosition, normalizedDefaultLabelPosition) {\n    if (normalizedLabelPosition === null) return null;\n    if (normalizedLabelPosition === undefined) {\n      if (normalizedDefaultLabelPosition === null) return null;\n      return normalizedDefaultLabelPosition;\n    }\n    return merge({}, normalizedDefaultLabelPosition, normalizedLabelPosition);\n  },\n  updateLabelPositions: function () {\n    if (!this._V.labels) return this;\n    var path = this.path;\n    if (!path) return this;\n\n    // This method assumes all the label nodes are stored in the `this._labelCache` hash table\n    // by their indices in the `this.get('labels')` array. This is done in the `renderLabels()` method.\n\n    var model = this.model;\n    var labels = model.get('labels') || [];\n    if (!labels.length) return this;\n    var defaultLabelPosition = this._getDefaultLabelPositionProperty();\n    for (var idx = 0, n = labels.length; idx < n; idx++) {\n      var labelNode = this._labelCache[idx];\n      if (!labelNode) continue;\n      var label = labels[idx];\n      var labelPosition = this._normalizeLabelPosition(label.position);\n      var position = this._mergeLabelPositionProperty(labelPosition, defaultLabelPosition);\n      var transformationMatrix = this._getLabelTransformationMatrix(position);\n      labelNode.setAttribute('transform', V.matrixToTransformString(transformationMatrix));\n      this._cleanLabelMatrices(idx);\n    }\n    return this;\n  },\n  _cleanLabelMatrices: function (index) {\n    // Clean magnetMatrix for all nodes of the label.\n    // Cached BoundingRect does not need to updated when the position changes\n    // TODO: this doesn't work for labels with XML String markups.\n    const {\n      metrics,\n      _labelSelectors\n    } = this;\n    const selectors = _labelSelectors[index];\n    if (!selectors) return;\n    for (let selector in selectors) {\n      const {\n        id\n      } = selectors[selector];\n      if (id && id in metrics) delete metrics[id].magnetMatrix;\n    }\n  },\n  updateToolsPosition: function () {\n    if (!this._V.linkTools) return this;\n\n    // Move the tools a bit to the target position but don't cover the `sourceArrowhead` marker.\n    // Note that the offset is hardcoded here. The offset should be always\n    // more than the `this.$('.marker-arrowhead[end=\"source\"]')[0].bbox().width` but looking\n    // this up all the time would be slow.\n\n    var scale = '';\n    var offset = this.options.linkToolsOffset;\n    var connectionLength = this.getConnectionLength();\n\n    // Firefox returns connectionLength=NaN in odd cases (for bezier curves).\n    // In that case we won't update tools position at all.\n    if (!Number.isNaN(connectionLength)) {\n      // If the link is too short, make the tools half the size and the offset twice as low.\n      if (connectionLength < this.options.shortLinkLength) {\n        scale = 'scale(.5)';\n        offset /= 2;\n      }\n      var toolPosition = this.getPointAtLength(offset);\n      this._toolCache.attr('transform', 'translate(' + toolPosition.x + ', ' + toolPosition.y + ') ' + scale);\n      if (this.options.doubleLinkTools && connectionLength >= this.options.longLinkLength) {\n        var doubleLinkToolsOffset = this.options.doubleLinkToolsOffset || offset;\n        toolPosition = this.getPointAtLength(connectionLength - doubleLinkToolsOffset);\n        this._tool2Cache.attr('transform', 'translate(' + toolPosition.x + ', ' + toolPosition.y + ') ' + scale);\n        this._tool2Cache.attr('display', 'inline');\n      } else if (this.options.doubleLinkTools) {\n        this._tool2Cache.attr('display', 'none');\n      }\n    }\n    return this;\n  },\n  updateArrowheadMarkers: function () {\n    if (!this._V.markerArrowheads) return this;\n\n    // getting bbox of an element with `display=\"none\"` in IE9 ends up with access violation\n    if ($.css(this._V.markerArrowheads.node, 'display') === 'none') return this;\n    var sx = this.getConnectionLength() < this.options.shortLinkLength ? .5 : 1;\n    this._V.sourceArrowhead.scale(sx);\n    this._V.targetArrowhead.scale(sx);\n    this._translateAndAutoOrientArrows(this._V.sourceArrowhead, this._V.targetArrowhead);\n    return this;\n  },\n  updateEndProperties: function (endType) {\n    const {\n      model,\n      paper\n    } = this;\n    const endViewProperty = `${endType}View`;\n    const endDef = model.get(endType);\n    const endId = endDef && endDef.id;\n    if (!endId) {\n      // the link end is a point ~ rect 0x0\n      this[endViewProperty] = null;\n      this.updateEndMagnet(endType);\n      return true;\n    }\n    const endModel = paper.getModelById(endId);\n    if (!endModel) throw new Error('LinkView: invalid ' + endType + ' cell.');\n    const endView = endModel.findView(paper);\n    if (!endView) {\n      // A view for a model should always exist\n      return false;\n    }\n    this[endViewProperty] = endView;\n    this.updateEndMagnet(endType);\n    return true;\n  },\n  updateEndMagnet: function (endType) {\n    const endMagnetProperty = `${endType}Magnet`;\n    const endView = this.getEndView(endType);\n    if (endView) {\n      let connectedMagnet = endView.getMagnetFromLinkEnd(this.model.get(endType));\n      if (connectedMagnet === endView.el) connectedMagnet = null;\n      this[endMagnetProperty] = connectedMagnet;\n    } else {\n      this[endMagnetProperty] = null;\n    }\n  },\n  _translateAndAutoOrientArrows: function (sourceArrow, targetArrow) {\n    // Make the markers \"point\" to their sticky points being auto-oriented towards\n    // `targetPosition`/`sourcePosition`. And do so only if there is a markup for them.\n    var route = toArray(this.route);\n    if (sourceArrow) {\n      sourceArrow.translateAndAutoOrient(this.sourcePoint, route[0] || this.targetPoint, this.paper.cells);\n    }\n    if (targetArrow) {\n      targetArrow.translateAndAutoOrient(this.targetPoint, route[route.length - 1] || this.sourcePoint, this.paper.cells);\n    }\n  },\n  _getLabelPositionProperty: function (idx) {\n    return this.model.label(idx).position || {};\n  },\n  _getLabelPositionAngle: function (idx) {\n    var labelPosition = this._getLabelPositionProperty(idx);\n    return labelPosition.angle || 0;\n  },\n  _getLabelPositionArgs: function (idx) {\n    var labelPosition = this._getLabelPositionProperty(idx);\n    return labelPosition.args;\n  },\n  _getDefaultLabelPositionArgs: function () {\n    var defaultLabel = this.model._getDefaultLabel();\n    var defaultLabelPosition = defaultLabel.position || {};\n    return defaultLabelPosition.args;\n  },\n  // merge default label position args into label position args\n  // keep `undefined` or `null` because `{}` means something else\n  _mergeLabelPositionArgs: function (labelPositionArgs, defaultLabelPositionArgs) {\n    if (labelPositionArgs === null) return null;\n    if (labelPositionArgs === undefined) {\n      if (defaultLabelPositionArgs === null) return null;\n      return defaultLabelPositionArgs;\n    }\n    return merge({}, defaultLabelPositionArgs, labelPositionArgs);\n  },\n  // Add default label at given position at end of `labels` array.\n  // Four signatures:\n  // - obj, obj = point, opt\n  // - obj, num, obj = point, angle, opt\n  // - num, num, obj = x, y, opt\n  // - num, num, num, obj = x, y, angle, opt\n  // Assigns relative coordinates by default:\n  // `opt.absoluteDistance` forces absolute coordinates.\n  // `opt.reverseDistance` forces reverse absolute coordinates (if absoluteDistance = true).\n  // `opt.absoluteOffset` forces absolute coordinates for offset.\n  // Additional args:\n  // `opt.keepGradient` auto-adjusts the angle of the label to match path gradient at position.\n  // `opt.ensureLegibility` rotates labels so they are never upside-down.\n  addLabel: function (p1, p2, p3, p4) {\n    // normalize data from the four possible signatures\n    var localX;\n    var localY;\n    var localAngle = 0;\n    var localOpt;\n    if (typeof p1 !== 'number') {\n      // {x, y} object provided as first parameter\n      localX = p1.x;\n      localY = p1.y;\n      if (typeof p2 === 'number') {\n        // angle and opt provided as second and third parameters\n        localAngle = p2;\n        localOpt = p3;\n      } else {\n        // opt provided as second parameter\n        localOpt = p2;\n      }\n    } else {\n      // x and y provided as first and second parameters\n      localX = p1;\n      localY = p2;\n      if (typeof p3 === 'number') {\n        // angle and opt provided as third and fourth parameters\n        localAngle = p3;\n        localOpt = p4;\n      } else {\n        // opt provided as third parameter\n        localOpt = p3;\n      }\n    }\n\n    // merge label position arguments\n    var defaultLabelPositionArgs = this._getDefaultLabelPositionArgs();\n    var labelPositionArgs = localOpt;\n    var positionArgs = this._mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n\n    // append label to labels array\n    var label = {\n      position: this.getLabelPosition(localX, localY, localAngle, positionArgs)\n    };\n    var idx = -1;\n    this.model.insertLabel(idx, label, localOpt);\n    return idx;\n  },\n  // Add a new vertex at calculated index to the `vertices` array.\n  addVertex: function (x, y, opt) {\n    // accept input in form `{ x, y }, opt` or `x, y, opt`\n    var isPointProvided = typeof x !== 'number';\n    var localX = isPointProvided ? x.x : x;\n    var localY = isPointProvided ? x.y : y;\n    var localOpt = isPointProvided ? y : opt;\n    var vertex = {\n      x: localX,\n      y: localY\n    };\n    var idx = this.getVertexIndex(localX, localY);\n    this.model.insertVertex(idx, vertex, localOpt);\n    return idx;\n  },\n  // Send a token (an SVG element, usually a circle) along the connection path.\n  // Example: `link.findView(paper).sendToken(V('circle', { r: 7, fill: 'green' }).node)`\n  // `opt.duration` is optional and is a time in milliseconds that the token travels from the source to the target of the link. Default is `1000`.\n  // `opt.directon` is optional and it determines whether the token goes from source to target or other way round (`reverse`)\n  // `opt.connection` is an optional selector to the connection path.\n  // `callback` is optional and is a function to be called once the token reaches the target.\n  sendToken: function (token, opt, callback) {\n    function onAnimationEnd(vToken, callback) {\n      return function () {\n        vToken.remove();\n        if (typeof callback === 'function') {\n          callback();\n        }\n      };\n    }\n    var duration, isReversed, selector;\n    if (isObject(opt)) {\n      duration = opt.duration;\n      isReversed = opt.direction === 'reverse';\n      selector = opt.connection;\n    } else {\n      // Backwards compatibility\n      duration = opt;\n      isReversed = false;\n      selector = null;\n    }\n    duration = duration || 1000;\n    var animationAttributes = {\n      dur: duration + 'ms',\n      repeatCount: 1,\n      calcMode: 'linear',\n      fill: 'freeze'\n    };\n    if (isReversed) {\n      animationAttributes.keyPoints = '1;0';\n      animationAttributes.keyTimes = '0;1';\n    }\n    var vToken = V(token);\n    var connection;\n    if (typeof selector === 'string') {\n      // Use custom connection path.\n      connection = this.findBySelector(selector, this.el, this.selectors)[0];\n    } else {\n      // Select connection path automatically.\n      var cache = this._V;\n      connection = cache.connection ? cache.connection.node : this.el.querySelector('path');\n    }\n    if (!(connection instanceof SVGPathElement)) {\n      throw new Error('dia.LinkView: token animation requires a valid connection path.');\n    }\n    vToken.appendTo(this.paper.cells).animateAlongPath(animationAttributes, connection);\n    setTimeout(onAnimationEnd(vToken, callback), duration);\n  },\n  findRoute: function (vertices) {\n    vertices || (vertices = []);\n    var namespace = this.paper.options.routerNamespace || routers;\n    var router = this.model.router();\n    var defaultRouter = this.paper.options.defaultRouter;\n    if (!router) {\n      if (defaultRouter) router = defaultRouter;else return vertices.map(Point); // no router specified\n    }\n    var routerFn = isFunction(router) ? router : namespace[router.name];\n    if (!isFunction(routerFn)) {\n      throw new Error('dia.LinkView: unknown router: \"' + router.name + '\".');\n    }\n    var args = router.args || {};\n    var route = routerFn.call(this,\n    // context\n    vertices,\n    // vertices\n    args,\n    // options\n    this // linkView\n    );\n    if (!route) return vertices.map(Point);\n    return route;\n  },\n  // Return the `d` attribute value of the `<path>` element representing the link\n  // between `source` and `target`.\n  findPath: function (route, sourcePoint, targetPoint) {\n    var namespace = this.paper.options.connectorNamespace || connectors;\n    var connector = this.model.connector();\n    var defaultConnector = this.paper.options.defaultConnector;\n    if (!connector) {\n      connector = defaultConnector || {};\n    }\n    var connectorFn = isFunction(connector) ? connector : namespace[connector.name];\n    if (!isFunction(connectorFn)) {\n      throw new Error('dia.LinkView: unknown connector: \"' + connector.name + '\".');\n    }\n    var args = clone(connector.args || {});\n    args.raw = true; // Request raw g.Path as the result.\n\n    var path = connectorFn.call(this,\n    // context\n    sourcePoint,\n    // start point\n    targetPoint,\n    // end point\n    route,\n    // vertices\n    args,\n    // options\n    this // linkView\n    );\n    if (typeof path === 'string') {\n      // Backwards compatibility for connectors not supporting `raw` option.\n      path = new Path(V.normalizePathData(path));\n    }\n    return path;\n  },\n  // Public API.\n  // -----------\n\n  getConnection: function () {\n    var path = this.path;\n    if (!path) return null;\n    return path.clone();\n  },\n  getSerializedConnection: function () {\n    var path = this.path;\n    if (!path) return null;\n    var metrics = this.metrics;\n    if (metrics.hasOwnProperty('data')) return metrics.data;\n    var data = path.serialize();\n    metrics.data = data;\n    return data;\n  },\n  getConnectionSubdivisions: function () {\n    var path = this.path;\n    if (!path) return null;\n    var metrics = this.metrics;\n    if (metrics.hasOwnProperty('segmentSubdivisions')) return metrics.segmentSubdivisions;\n    var subdivisions = path.getSegmentSubdivisions();\n    metrics.segmentSubdivisions = subdivisions;\n    return subdivisions;\n  },\n  getConnectionLength: function () {\n    var path = this.path;\n    if (!path) return 0;\n    var metrics = this.metrics;\n    if (metrics.hasOwnProperty('length')) return metrics.length;\n    var length = path.length({\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    });\n    metrics.length = length;\n    return length;\n  },\n  getPointAtLength: function (length) {\n    var path = this.path;\n    if (!path) return null;\n    return path.pointAtLength(length, {\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    });\n  },\n  getPointAtRatio: function (ratio) {\n    var path = this.path;\n    if (!path) return null;\n    if (isPercentage(ratio)) ratio = parseFloat(ratio) / 100;\n    return path.pointAt(ratio, {\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    });\n  },\n  getTangentAtLength: function (length) {\n    var path = this.path;\n    if (!path) return null;\n    return path.tangentAtLength(length, {\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    });\n  },\n  getTangentAtRatio: function (ratio) {\n    var path = this.path;\n    if (!path) return null;\n    return path.tangentAt(ratio, {\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    });\n  },\n  getClosestPoint: function (point) {\n    var path = this.path;\n    if (!path) return null;\n    return path.closestPoint(point, {\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    });\n  },\n  getClosestPointLength: function (point) {\n    var path = this.path;\n    if (!path) return null;\n    return path.closestPointLength(point, {\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    });\n  },\n  getClosestPointRatio: function (point) {\n    var path = this.path;\n    if (!path) return null;\n    return path.closestPointNormalizedLength(point, {\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    });\n  },\n  // Get label position object based on two provided coordinates, x and y.\n  // (Used behind the scenes when user moves labels around.)\n  // Two signatures:\n  // - num, num, obj = x, y, options\n  // - num, num, num, obj = x, y, angle, options\n  // Accepts distance/offset options = `absoluteDistance: boolean`, `reverseDistance: boolean`, `absoluteOffset: boolean`\n  // - `absoluteOffset` is necessary in order to move beyond connection endpoints\n  // Additional options = `keepGradient: boolean`, `ensureLegibility: boolean`\n  getLabelPosition: function (x, y, p3, p4) {\n    var position = {};\n\n    // normalize data from the two possible signatures\n    var localAngle = 0;\n    var localOpt;\n    if (typeof p3 === 'number') {\n      // angle and opt provided as third and fourth argument\n      localAngle = p3;\n      localOpt = p4;\n    } else {\n      // opt provided as third argument\n      localOpt = p3;\n    }\n\n    // save localOpt as `args` of the position object that is passed along\n    if (localOpt) position.args = localOpt;\n\n    // identify distance/offset settings\n    var isDistanceRelative = !(localOpt && localOpt.absoluteDistance); // relative by default\n    var isDistanceAbsoluteReverse = localOpt && localOpt.absoluteDistance && localOpt.reverseDistance; // non-reverse by default\n    var isOffsetAbsolute = localOpt && localOpt.absoluteOffset; // offset is non-absolute by default\n\n    // find closest point t\n    var path = this.path;\n    var pathOpt = {\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    };\n    var labelPoint = new Point(x, y);\n    var t = path.closestPointT(labelPoint, pathOpt);\n\n    // DISTANCE:\n    var labelDistance = path.lengthAtT(t, pathOpt);\n    if (isDistanceRelative) labelDistance = labelDistance / this.getConnectionLength() || 0; // fix to prevent NaN for 0 length\n    if (isDistanceAbsoluteReverse) labelDistance = -1 * (this.getConnectionLength() - labelDistance) || 1; // fix for end point (-0 => 1)\n    position.distance = labelDistance;\n\n    // OFFSET:\n    // use absolute offset if:\n    // - opt.absoluteOffset is true,\n    // - opt.absoluteOffset is not true but there is no tangent\n    var tangent;\n    if (!isOffsetAbsolute) tangent = path.tangentAtT(t);\n    var labelOffset;\n    if (tangent) {\n      labelOffset = tangent.pointOffset(labelPoint);\n    } else {\n      var closestPoint = path.pointAtT(t);\n      var labelOffsetDiff = labelPoint.difference(closestPoint);\n      labelOffset = {\n        x: labelOffsetDiff.x,\n        y: labelOffsetDiff.y\n      };\n    }\n    position.offset = labelOffset;\n\n    // ANGLE:\n    position.angle = localAngle;\n    return position;\n  },\n  _getLabelTransformationMatrix: function (labelPosition) {\n    var labelDistance;\n    var labelAngle = 0;\n    var args = {};\n    if (typeof labelPosition === 'number') {\n      labelDistance = labelPosition;\n    } else if (typeof labelPosition.distance === 'number') {\n      args = labelPosition.args || {};\n      labelDistance = labelPosition.distance;\n      labelAngle = labelPosition.angle || 0;\n    } else {\n      throw new Error('dia.LinkView: invalid label position distance.');\n    }\n    var isDistanceRelative = labelDistance > 0 && labelDistance <= 1;\n    var labelOffset = 0;\n    var labelOffsetCoordinates = {\n      x: 0,\n      y: 0\n    };\n    if (labelPosition.offset) {\n      var positionOffset = labelPosition.offset;\n      if (typeof positionOffset === 'number') labelOffset = positionOffset;\n      if (positionOffset.x) labelOffsetCoordinates.x = positionOffset.x;\n      if (positionOffset.y) labelOffsetCoordinates.y = positionOffset.y;\n    }\n    var isOffsetAbsolute = labelOffsetCoordinates.x !== 0 || labelOffsetCoordinates.y !== 0 || labelOffset === 0;\n    var isKeepGradient = args.keepGradient;\n    var isEnsureLegibility = args.ensureLegibility;\n    var path = this.path;\n    var pathOpt = {\n      segmentSubdivisions: this.getConnectionSubdivisions()\n    };\n    var distance = isDistanceRelative ? labelDistance * this.getConnectionLength() : labelDistance;\n    var tangent = path.tangentAtLength(distance, pathOpt);\n    var translation;\n    var angle = labelAngle;\n    if (tangent) {\n      if (isOffsetAbsolute) {\n        translation = tangent.start.clone();\n        translation.offset(labelOffsetCoordinates);\n      } else {\n        var normal = tangent.clone();\n        normal.rotate(tangent.start, -90);\n        normal.setLength(labelOffset);\n        translation = normal.end;\n      }\n      if (isKeepGradient) {\n        angle = tangent.angle() + labelAngle;\n        if (isEnsureLegibility) {\n          angle = normalizeAngle((angle + 90) % 180 - 90);\n        }\n      }\n    } else {\n      // fallback - the connection has zero length\n      translation = path.start.clone();\n      if (isOffsetAbsolute) translation.offset(labelOffsetCoordinates);\n    }\n    return V.createSVGMatrix().translate(translation.x, translation.y).rotate(angle);\n  },\n  getLabelCoordinates: function (labelPosition) {\n    var transformationMatrix = this._getLabelTransformationMatrix(labelPosition);\n    return new Point(transformationMatrix.e, transformationMatrix.f);\n  },\n  getVertexIndex: function (x, y) {\n    var model = this.model;\n    var vertices = model.vertices();\n    var vertexLength = this.getClosestPointLength(new Point(x, y));\n    var idx = 0;\n    for (var n = vertices.length; idx < n; idx++) {\n      var currentVertex = vertices[idx];\n      var currentVertexLength = this.getClosestPointLength(currentVertex);\n      if (vertexLength < currentVertexLength) break;\n    }\n    return idx;\n  },\n  // Interaction. The controller part.\n  // ---------------------------------\n\n  notifyPointerdown(evt, x, y) {\n    CellView.prototype.pointerdown.call(this, evt, x, y);\n    this.notify('link:pointerdown', evt, x, y);\n  },\n  notifyPointermove(evt, x, y) {\n    CellView.prototype.pointermove.call(this, evt, x, y);\n    this.notify('link:pointermove', evt, x, y);\n  },\n  notifyPointerup(evt, x, y) {\n    this.notify('link:pointerup', evt, x, y);\n    CellView.prototype.pointerup.call(this, evt, x, y);\n  },\n  pointerdblclick: function (evt, x, y) {\n    CellView.prototype.pointerdblclick.apply(this, arguments);\n    this.notify('link:pointerdblclick', evt, x, y);\n  },\n  pointerclick: function (evt, x, y) {\n    CellView.prototype.pointerclick.apply(this, arguments);\n    this.notify('link:pointerclick', evt, x, y);\n  },\n  contextmenu: function (evt, x, y) {\n    CellView.prototype.contextmenu.apply(this, arguments);\n    this.notify('link:contextmenu', evt, x, y);\n  },\n  pointerdown: function (evt, x, y) {\n    this.notifyPointerdown(evt, x, y);\n\n    // Backwards compatibility for the default markup\n    var className = evt.target.getAttribute('class');\n    switch (className) {\n      case 'marker-vertex':\n        this.dragVertexStart(evt, x, y);\n        return;\n      case 'marker-vertex-remove':\n      case 'marker-vertex-remove-area':\n        this.dragVertexRemoveStart(evt, x, y);\n        return;\n      case 'marker-arrowhead':\n        this.dragArrowheadStart(evt, x, y);\n        return;\n      case 'connection':\n      case 'connection-wrap':\n        this.dragConnectionStart(evt, x, y);\n        return;\n      case 'marker-source':\n      case 'marker-target':\n        return;\n    }\n    this.dragStart(evt, x, y);\n  },\n  pointermove: function (evt, x, y) {\n    // Backwards compatibility\n    var dragData = this._dragData;\n    if (dragData) this.eventData(evt, dragData);\n    var data = this.eventData(evt);\n    switch (data.action) {\n      case 'vertex-move':\n        this.dragVertex(evt, x, y);\n        break;\n      case 'label-move':\n        this.dragLabel(evt, x, y);\n        break;\n      case 'arrowhead-move':\n        this.dragArrowhead(evt, x, y);\n        break;\n      case 'move':\n        this.drag(evt, x, y);\n        break;\n    }\n\n    // Backwards compatibility\n    if (dragData) assign(dragData, this.eventData(evt));\n    this.notifyPointermove(evt, x, y);\n  },\n  pointerup: function (evt, x, y) {\n    // Backwards compatibility\n    var dragData = this._dragData;\n    if (dragData) {\n      this.eventData(evt, dragData);\n      this._dragData = null;\n    }\n    var data = this.eventData(evt);\n    switch (data.action) {\n      case 'vertex-move':\n        this.dragVertexEnd(evt, x, y);\n        break;\n      case 'label-move':\n        this.dragLabelEnd(evt, x, y);\n        break;\n      case 'arrowhead-move':\n        this.dragArrowheadEnd(evt, x, y);\n        break;\n      case 'move':\n        this.dragEnd(evt, x, y);\n    }\n    this.notifyPointerup(evt, x, y);\n    this.checkMouseleave(evt);\n  },\n  mouseover: function (evt) {\n    CellView.prototype.mouseover.apply(this, arguments);\n    this.notify('link:mouseover', evt);\n  },\n  mouseout: function (evt) {\n    CellView.prototype.mouseout.apply(this, arguments);\n    this.notify('link:mouseout', evt);\n  },\n  mouseenter: function (evt) {\n    CellView.prototype.mouseenter.apply(this, arguments);\n    this.notify('link:mouseenter', evt);\n  },\n  mouseleave: function (evt) {\n    CellView.prototype.mouseleave.apply(this, arguments);\n    this.notify('link:mouseleave', evt);\n  },\n  mousewheel: function (evt, x, y, delta) {\n    CellView.prototype.mousewheel.apply(this, arguments);\n    this.notify('link:mousewheel', evt, x, y, delta);\n  },\n  onevent: function (evt, eventName, x, y) {\n    // Backwards compatibility\n    var linkTool = V(evt.target).findParentByClass('link-tool', this.el);\n    if (linkTool) {\n      // No further action to be executed\n      evt.stopPropagation();\n\n      // Allow `interactive.useLinkTools=false`\n      if (this.can('useLinkTools')) {\n        if (eventName === 'remove') {\n          // Built-in remove event\n          this.model.remove({\n            ui: true\n          });\n          // Do not trigger link pointerdown\n          return;\n        } else {\n          // link:options and other custom events inside the link tools\n          this.notify(eventName, evt, x, y);\n        }\n      }\n      this.notifyPointerdown(evt, x, y);\n      this.paper.delegateDragEvents(this, evt.data);\n    } else {\n      CellView.prototype.onevent.apply(this, arguments);\n    }\n  },\n  onlabel: function (evt, x, y) {\n    this.notifyPointerdown(evt, x, y);\n    this.dragLabelStart(evt, x, y);\n    var stopPropagation = this.eventData(evt).stopPropagation;\n    if (stopPropagation) evt.stopPropagation();\n  },\n  // Drag Start Handlers\n\n  dragConnectionStart: function (evt, x, y) {\n    if (!this.can('vertexAdd')) return;\n\n    // Store the index at which the new vertex has just been placed.\n    // We'll be update the very same vertex position in `pointermove()`.\n    var vertexIdx = this.addVertex({\n      x: x,\n      y: y\n    }, {\n      ui: true\n    });\n    this.eventData(evt, {\n      action: 'vertex-move',\n      vertexIdx: vertexIdx\n    });\n  },\n  dragLabelStart: function (evt, x, y) {\n    if (this.can('labelMove')) {\n      if (this.isDefaultInteractionPrevented(evt)) return;\n      var labelNode = evt.currentTarget;\n      var labelIdx = parseInt(labelNode.getAttribute('label-idx'), 10);\n      var defaultLabelPosition = this._getDefaultLabelPositionProperty();\n      var initialLabelPosition = this._normalizeLabelPosition(this._getLabelPositionProperty(labelIdx));\n      var position = this._mergeLabelPositionProperty(initialLabelPosition, defaultLabelPosition);\n      var coords = this.getLabelCoordinates(position);\n      var dx = coords.x - x; // how much needs to be added to cursor x to get to label x\n      var dy = coords.y - y; // how much needs to be added to cursor y to get to label y\n\n      var positionAngle = this._getLabelPositionAngle(labelIdx);\n      var labelPositionArgs = this._getLabelPositionArgs(labelIdx);\n      var defaultLabelPositionArgs = this._getDefaultLabelPositionArgs();\n      var positionArgs = this._mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n      this.eventData(evt, {\n        action: 'label-move',\n        labelIdx: labelIdx,\n        dx: dx,\n        dy: dy,\n        positionAngle: positionAngle,\n        positionArgs: positionArgs,\n        stopPropagation: true\n      });\n    } else {\n      // Backwards compatibility:\n      // If labels can't be dragged no default action is triggered.\n      this.eventData(evt, {\n        stopPropagation: true\n      });\n    }\n    this.paper.delegateDragEvents(this, evt.data);\n  },\n  dragVertexStart: function (evt, x, y) {\n    if (!this.can('vertexMove')) return;\n    var vertexNode = evt.target;\n    var vertexIdx = parseInt(vertexNode.getAttribute('idx'), 10);\n    this.eventData(evt, {\n      action: 'vertex-move',\n      vertexIdx: vertexIdx\n    });\n  },\n  dragVertexRemoveStart: function (evt, x, y) {\n    if (!this.can('vertexRemove')) return;\n    var removeNode = evt.target;\n    var vertexIdx = parseInt(removeNode.getAttribute('idx'), 10);\n    this.model.removeVertex(vertexIdx);\n  },\n  dragArrowheadStart: function (evt, x, y) {\n    if (!this.can('arrowheadMove')) return;\n    var arrowheadNode = evt.target;\n    var arrowheadType = arrowheadNode.getAttribute('end');\n    var data = this.startArrowheadMove(arrowheadType, {\n      ignoreBackwardsCompatibility: true\n    });\n    this.eventData(evt, data);\n  },\n  dragStart: function (evt, x, y) {\n    if (this.isDefaultInteractionPrevented(evt)) return;\n    if (!this.can('linkMove')) return;\n    this.eventData(evt, {\n      action: 'move',\n      dx: x,\n      dy: y\n    });\n  },\n  // Drag Handlers\n  dragLabel: function (evt, x, y) {\n    var data = this.eventData(evt);\n    var label = {\n      position: this.getLabelPosition(x + data.dx, y + data.dy, data.positionAngle, data.positionArgs)\n    };\n    if (this.paper.options.snapLabels) delete label.position.offset;\n    // The `touchmove' events are not fired\n    // when the original event target is removed from the DOM.\n    // The labels are currently re-rendered completely when only\n    // the position changes. This is why we need to make sure that\n    // the label is updated synchronously.\n    // TODO: replace `touchmove` with `pointermove` (breaking change).\n    const setOptions = {\n      ui: true\n    };\n    if (this.paper.isAsync() && evt.type === 'touchmove') {\n      setOptions.async = false;\n    }\n    this.model.label(data.labelIdx, label, setOptions);\n  },\n  dragVertex: function (evt, x, y) {\n    var data = this.eventData(evt);\n    this.model.vertex(data.vertexIdx, {\n      x: x,\n      y: y\n    }, {\n      ui: true\n    });\n  },\n  dragArrowhead: function (evt, x, y) {\n    if (this.paper.options.snapLinks) {\n      const isSnapped = this._snapArrowhead(evt, x, y);\n      if (!isSnapped && this.paper.options.snapLinksSelf) {\n        this._snapArrowheadSelf(evt, x, y);\n      }\n    } else {\n      if (this.paper.options.snapLinksSelf) {\n        this._snapArrowheadSelf(evt, x, y);\n      } else {\n        this._connectArrowhead(this.getEventTarget(evt), x, y, this.eventData(evt));\n      }\n    }\n  },\n  drag: function (evt, x, y) {\n    var data = this.eventData(evt);\n    this.model.translate(x - data.dx, y - data.dy, {\n      ui: true\n    });\n    this.eventData(evt, {\n      dx: x,\n      dy: y\n    });\n  },\n  // Drag End Handlers\n\n  dragLabelEnd: function () {\n    // noop\n  },\n  dragVertexEnd: function () {\n    // noop\n  },\n  dragArrowheadEnd: function (evt, x, y) {\n    var data = this.eventData(evt);\n    var paper = this.paper;\n    if (paper.options.snapLinks) {\n      this._snapArrowheadEnd(data);\n    } else {\n      this._connectArrowheadEnd(data, x, y);\n    }\n    if (!paper.linkAllowed(this)) {\n      // If the changed link is not allowed, revert to its previous state.\n      this._disallow(data);\n    } else {\n      this._finishEmbedding(data);\n      this._notifyConnectEvent(data, evt);\n    }\n    this._afterArrowheadMove(data);\n  },\n  dragEnd: function () {\n    // noop\n  },\n  _disallow: function (data) {\n    switch (data.whenNotAllowed) {\n      case 'remove':\n        this.model.remove({\n          ui: true\n        });\n        break;\n      case 'revert':\n      default:\n        this.model.set(data.arrowhead, data.initialEnd, {\n          ui: true\n        });\n        break;\n    }\n  },\n  _finishEmbedding: function (data) {\n    // Reparent the link if embedding is enabled\n    if (this.paper.options.embeddingMode && this.model.reparent()) {\n      // Make sure we don't reverse to the original 'z' index (see afterArrowheadMove()).\n      data.z = null;\n    }\n  },\n  _notifyConnectEvent: function (data, evt) {\n    var arrowhead = data.arrowhead;\n    var initialEnd = data.initialEnd;\n    var currentEnd = this.model.prop(arrowhead);\n    var endChanged = currentEnd && !Link.endsEqual(initialEnd, currentEnd);\n    if (endChanged) {\n      var paper = this.paper;\n      if (initialEnd.id) {\n        this.notify('link:disconnect', evt, paper.findViewByModel(initialEnd.id), data.initialMagnet, arrowhead);\n      }\n      if (currentEnd.id) {\n        this.notify('link:connect', evt, paper.findViewByModel(currentEnd.id), data.magnetUnderPointer, arrowhead);\n      }\n    }\n  },\n  _snapToPoints: function (snapPoint, points, radius) {\n    let closestPointX = null;\n    let closestDistanceX = Infinity;\n    let closestPointY = null;\n    let closestDistanceY = Infinity;\n    let x = snapPoint.x;\n    let y = snapPoint.y;\n    for (let i = 0; i < points.length; i++) {\n      const distX = Math.abs(points[i].x - snapPoint.x);\n      if (distX < closestDistanceX) {\n        closestDistanceX = distX;\n        closestPointX = points[i];\n      }\n      const distY = Math.abs(points[i].y - snapPoint.y);\n      if (distY < closestDistanceY) {\n        closestDistanceY = distY;\n        closestPointY = points[i];\n      }\n    }\n    if (closestDistanceX < radius) {\n      x = closestPointX.x;\n    }\n    if (closestDistanceY < radius) {\n      y = closestPointY.y;\n    }\n    return {\n      x,\n      y\n    };\n  },\n  _snapArrowheadSelf: function (evt, x, y) {\n    const {\n      paper,\n      model\n    } = this;\n    const {\n      snapLinksSelf\n    } = paper.options;\n    const data = this.eventData(evt);\n    const radius = snapLinksSelf.radius || 20;\n    const anchor = this.getEndAnchor(data.arrowhead === 'source' ? 'target' : 'source');\n    const vertices = model.vertices();\n    const points = [anchor, ...vertices];\n    const snapPoint = this._snapToPoints({\n      x: x,\n      y: y\n    }, points, radius);\n    const point = paper.localToClientPoint(snapPoint);\n    this._connectArrowhead(document.elementFromPoint(point.x, point.y), snapPoint.x, snapPoint.y, this.eventData(evt));\n  },\n  _snapArrowhead: function (evt, x, y) {\n    const {\n      paper\n    } = this;\n    const {\n      snapLinks,\n      connectionStrategy\n    } = paper.options;\n    const data = this.eventData(evt);\n    let isSnapped = false;\n    // checking view in close area of the pointer\n\n    var r = snapLinks.radius || 50;\n    var viewsInArea = paper.findViewsInArea({\n      x: x - r,\n      y: y - r,\n      width: 2 * r,\n      height: 2 * r\n    });\n    var prevClosestView = data.closestView || null;\n    var prevClosestMagnet = data.closestMagnet || null;\n    var prevMagnetProxy = data.magnetProxy || null;\n    data.closestView = data.closestMagnet = data.magnetProxy = null;\n    var minDistance = Number.MAX_VALUE;\n    var pointer = new Point(x, y);\n    viewsInArea.forEach(function (view) {\n      const candidates = [];\n      // skip connecting to the element in case '.': { magnet: false } attribute present\n      if (view.el.getAttribute('magnet') !== 'false') {\n        candidates.push({\n          bbox: view.model.getBBox(),\n          magnet: view.el\n        });\n      }\n      view.$('[magnet]').toArray().forEach(magnet => {\n        candidates.push({\n          bbox: view.getNodeBBox(magnet),\n          magnet\n        });\n      });\n      candidates.forEach(candidate => {\n        const {\n          magnet,\n          bbox\n        } = candidate;\n        // find distance from the center of the model to pointer coordinates\n        const distance = bbox.center().squaredDistance(pointer);\n        // the connection is looked up in a circle area by `distance < r`\n        if (distance < minDistance) {\n          const isAlreadyValidated = prevClosestMagnet === magnet;\n          if (isAlreadyValidated || paper.options.validateConnection.apply(paper, data.validateConnectionArgs(view, view.el === magnet ? null : magnet))) {\n            minDistance = distance;\n            data.closestView = view;\n            data.closestMagnet = magnet;\n          }\n        }\n      });\n    }, this);\n    var end;\n    var magnetProxy = null;\n    var closestView = data.closestView;\n    var closestMagnet = data.closestMagnet;\n    if (closestMagnet) {\n      magnetProxy = data.magnetProxy = closestView.findProxyNode(closestMagnet, 'highlighter');\n    }\n    var endType = data.arrowhead;\n    var newClosestMagnet = prevClosestMagnet !== closestMagnet;\n    if (prevClosestView && newClosestMagnet) {\n      prevClosestView.unhighlight(prevMagnetProxy, {\n        connecting: true,\n        snapping: true\n      });\n    }\n    if (closestView) {\n      const {\n        prevEnd,\n        prevX,\n        prevY\n      } = data;\n      data.prevX = x;\n      data.prevY = y;\n      isSnapped = true;\n      if (!newClosestMagnet) {\n        if (typeof connectionStrategy !== 'function' || prevX === x && prevY === y) {\n          // the magnet has not changed and the link's end does not depend on the x and y\n          return isSnapped;\n        }\n      }\n      end = closestView.getLinkEnd(closestMagnet, x, y, this.model, endType);\n      if (!newClosestMagnet && isEqual(prevEnd, end)) {\n        // the source/target json has not changed\n        return isSnapped;\n      }\n      data.prevEnd = end;\n      if (newClosestMagnet) {\n        closestView.highlight(magnetProxy, {\n          connecting: true,\n          snapping: true\n        });\n      }\n    } else {\n      end = {\n        x: x,\n        y: y\n      };\n    }\n    this.model.set(endType, end || {\n      x: x,\n      y: y\n    }, {\n      ui: true\n    });\n    if (prevClosestView) {\n      this.notify('link:snap:disconnect', evt, prevClosestView, prevClosestMagnet, endType);\n    }\n    if (closestView) {\n      this.notify('link:snap:connect', evt, closestView, closestMagnet, endType);\n    }\n    return isSnapped;\n  },\n  _snapArrowheadEnd: function (data) {\n    // Finish off link snapping.\n    // Everything except view unhighlighting was already done on pointermove.\n    var closestView = data.closestView;\n    var closestMagnet = data.closestMagnet;\n    if (closestView && closestMagnet) {\n      closestView.unhighlight(data.magnetProxy, {\n        connecting: true,\n        snapping: true\n      });\n      data.magnetUnderPointer = closestView.findMagnet(closestMagnet);\n    }\n    data.closestView = data.closestMagnet = null;\n  },\n  _connectArrowhead: function (target, x, y, data) {\n    // checking views right under the pointer\n    const {\n      paper,\n      model\n    } = this;\n    if (data.eventTarget !== target) {\n      // Unhighlight the previous view under pointer if there was one.\n      if (data.magnetProxy) {\n        data.viewUnderPointer.unhighlight(data.magnetProxy, {\n          connecting: true\n        });\n      }\n      const viewUnderPointer = data.viewUnderPointer = paper.findView(target);\n      if (viewUnderPointer) {\n        // If we found a view that is under the pointer, we need to find the closest\n        // magnet based on the real target element of the event.\n        const magnetUnderPointer = data.magnetUnderPointer = viewUnderPointer.findMagnet(target);\n        const magnetProxy = data.magnetProxy = viewUnderPointer.findProxyNode(magnetUnderPointer, 'highlighter');\n        if (magnetUnderPointer && this.paper.options.validateConnection.apply(paper, data.validateConnectionArgs(viewUnderPointer, magnetUnderPointer))) {\n          // If there was no magnet found, do not highlight anything and assume there\n          // is no view under pointer we're interested in reconnecting to.\n          // This can only happen if the overall element has the attribute `'.': { magnet: false }`.\n          if (magnetProxy) {\n            viewUnderPointer.highlight(magnetProxy, {\n              connecting: true\n            });\n          }\n        } else {\n          // This type of connection is not valid. Disregard this magnet.\n          data.magnetUnderPointer = null;\n          data.magnetProxy = null;\n        }\n      } else {\n        // Make sure we'll unset previous magnet.\n        data.magnetUnderPointer = null;\n        data.magnetProxy = null;\n      }\n    }\n    data.eventTarget = target;\n    model.set(data.arrowhead, {\n      x: x,\n      y: y\n    }, {\n      ui: true\n    });\n  },\n  _connectArrowheadEnd: function (data = {}, x, y) {\n    const {\n      model\n    } = this;\n    const {\n      viewUnderPointer,\n      magnetUnderPointer,\n      magnetProxy,\n      arrowhead\n    } = data;\n    if (!magnetUnderPointer || !magnetProxy || !viewUnderPointer) return;\n    viewUnderPointer.unhighlight(magnetProxy, {\n      connecting: true\n    });\n\n    // The link end is taken from the magnet under the pointer, not the proxy.\n    const end = viewUnderPointer.getLinkEnd(magnetUnderPointer, x, y, model, arrowhead);\n    model.set(arrowhead, end, {\n      ui: true\n    });\n  },\n  _beforeArrowheadMove: function (data) {\n    data.z = this.model.get('z');\n    this.model.toFront();\n\n    // Let the pointer propagate through the link view elements so that\n    // the `evt.target` is another element under the pointer, not the link itself.\n    var style = this.el.style;\n    data.pointerEvents = style.pointerEvents;\n    style.pointerEvents = 'none';\n    if (this.paper.options.markAvailable) {\n      this._markAvailableMagnets(data);\n    }\n  },\n  _afterArrowheadMove: function (data) {\n    if (data.z !== null) {\n      this.model.set('z', data.z, {\n        ui: true\n      });\n      data.z = null;\n    }\n\n    // Put `pointer-events` back to its original value. See `_beforeArrowheadMove()` for explanation.\n    this.el.style.pointerEvents = data.pointerEvents;\n    if (this.paper.options.markAvailable) {\n      this._unmarkAvailableMagnets(data);\n    }\n  },\n  _createValidateConnectionArgs: function (arrowhead) {\n    // It makes sure the arguments for validateConnection have the following form:\n    // (source view, source magnet, target view, target magnet and link view)\n    var args = [];\n    args[4] = arrowhead;\n    args[5] = this;\n    var oppositeArrowhead;\n    var i = 0;\n    var j = 0;\n    if (arrowhead === 'source') {\n      i = 2;\n      oppositeArrowhead = 'target';\n    } else {\n      j = 2;\n      oppositeArrowhead = 'source';\n    }\n    var end = this.model.get(oppositeArrowhead);\n    if (end.id) {\n      var view = args[i] = this.paper.findViewByModel(end.id);\n      var magnet = view.getMagnetFromLinkEnd(end);\n      if (magnet === view.el) magnet = undefined;\n      args[i + 1] = magnet;\n    }\n    function validateConnectionArgs(cellView, magnet) {\n      args[j] = cellView;\n      args[j + 1] = cellView.el === magnet ? undefined : magnet;\n      return args;\n    }\n    return validateConnectionArgs;\n  },\n  _markAvailableMagnets: function (data) {\n    function isMagnetAvailable(view, magnet) {\n      var paper = view.paper;\n      var validate = paper.options.validateConnection;\n      return validate.apply(paper, this.validateConnectionArgs(view, magnet));\n    }\n    var paper = this.paper;\n    var elements = paper.model.getCells();\n    data.marked = {};\n    for (var i = 0, n = elements.length; i < n; i++) {\n      var view = elements[i].findView(paper);\n      if (!view) {\n        continue;\n      }\n      var magnets = Array.prototype.slice.call(view.el.querySelectorAll('[magnet]'));\n      if (view.el.getAttribute('magnet') !== 'false') {\n        // Element wrapping group is also a magnet\n        magnets.push(view.el);\n      }\n      var availableMagnets = magnets.filter(isMagnetAvailable.bind(data, view));\n      if (availableMagnets.length > 0) {\n        // highlight all available magnets\n        for (var j = 0, m = availableMagnets.length; j < m; j++) {\n          view.highlight(availableMagnets[j], {\n            magnetAvailability: true\n          });\n        }\n        // highlight the entire view\n        view.highlight(null, {\n          elementAvailability: true\n        });\n        data.marked[view.model.id] = availableMagnets;\n      }\n    }\n  },\n  _unmarkAvailableMagnets: function (data) {\n    var markedKeys = Object.keys(data.marked);\n    var id;\n    var markedMagnets;\n    for (var i = 0, n = markedKeys.length; i < n; i++) {\n      id = markedKeys[i];\n      markedMagnets = data.marked[id];\n      var view = this.paper.findViewByModel(id);\n      if (view) {\n        for (var j = 0, m = markedMagnets.length; j < m; j++) {\n          view.unhighlight(markedMagnets[j], {\n            magnetAvailability: true\n          });\n        }\n        view.unhighlight(null, {\n          elementAvailability: true\n        });\n      }\n    }\n    data.marked = null;\n  },\n  startArrowheadMove: function (end, opt) {\n    opt || (opt = {});\n\n    // Allow to delegate events from an another view to this linkView in order to trigger arrowhead\n    // move without need to click on the actual arrowhead dom element.\n    var data = {\n      action: 'arrowhead-move',\n      arrowhead: end,\n      whenNotAllowed: opt.whenNotAllowed || 'revert',\n      initialMagnet: this[end + 'Magnet'] || (this[end + 'View'] ? this[end + 'View'].el : null),\n      initialEnd: clone(this.model.get(end)),\n      validateConnectionArgs: this._createValidateConnectionArgs(end)\n    };\n    this._beforeArrowheadMove(data);\n    if (opt.ignoreBackwardsCompatibility !== true) {\n      this._dragData = data;\n    }\n    return data;\n  },\n  // Lifecycle methods\n\n  onMount: function () {\n    CellView.prototype.onMount.apply(this, arguments);\n    this.mountLabels();\n  },\n  onDetach: function () {\n    CellView.prototype.onDetach.apply(this, arguments);\n    this.unmountLabels();\n  },\n  onRemove: function () {\n    CellView.prototype.onRemove.apply(this, arguments);\n    this.unmountLabels();\n  }\n}, {\n  Flags: Flags\n});\nObject.defineProperty(LinkView.prototype, 'sourceBBox', {\n  enumerable: true,\n  get: function () {\n    var sourceView = this.sourceView;\n    if (!sourceView) {\n      var sourceDef = this.model.source();\n      return new Rect(sourceDef.x, sourceDef.y);\n    }\n    var sourceMagnet = this.sourceMagnet;\n    if (sourceView.isNodeConnection(sourceMagnet)) {\n      return new Rect(this.sourceAnchor);\n    }\n    return sourceView.getNodeBBox(sourceMagnet || sourceView.el);\n  }\n});\nObject.defineProperty(LinkView.prototype, 'targetBBox', {\n  enumerable: true,\n  get: function () {\n    var targetView = this.targetView;\n    if (!targetView) {\n      var targetDef = this.model.target();\n      return new Rect(targetDef.x, targetDef.y);\n    }\n    var targetMagnet = this.targetMagnet;\n    if (targetView.isNodeConnection(targetMagnet)) {\n      return new Rect(this.targetAnchor);\n    }\n    return targetView.getNodeBBox(targetMagnet || targetView.el);\n  }\n});", "export * from './stroke.mjs';\nexport * from './mask.mjs';\nexport * from './opacity.mjs';\nexport * from './addClass.mjs';\nexport * from './list.mjs';", "import { assign } from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\nexport const stroke = HighlighterView.extend({\n  tagName: 'path',\n  className: 'highlight-stroke',\n  attributes: {\n    'pointer-events': 'none',\n    'vector-effect': 'non-scaling-stroke',\n    'fill': 'none'\n  },\n  options: {\n    padding: 3,\n    rx: 0,\n    ry: 0,\n    useFirstSubpath: false,\n    attrs: {\n      'stroke-width': 3,\n      'stroke': '#FEB663'\n    }\n  },\n  getPathData(cellView, node) {\n    const {\n      options\n    } = this;\n    const {\n      useFirstSubpath\n    } = options;\n    let d;\n    try {\n      const vNode = V(node);\n      d = vNode.convertToPathData().trim();\n      if (vNode.tagName() === 'PATH' && useFirstSubpath) {\n        const secondSubpathIndex = d.search(/.M/i) + 1;\n        if (secondSubpathIndex > 0) {\n          d = d.substr(0, secondSubpathIndex);\n        }\n      }\n    } catch (error) {\n      // Failed to get path data from magnet element.\n      // Draw a rectangle around the node instead.\n      const nodeBBox = cellView.getNodeBoundingRect(node);\n      d = V.rectToPath(assign({}, options, nodeBBox.toJSON()));\n    }\n    return d;\n  },\n  highlightConnection(cellView) {\n    this.vel.attr('d', cellView.getSerializedConnection());\n  },\n  highlightNode(cellView, node) {\n    const {\n      vel,\n      options\n    } = this;\n    const {\n      padding,\n      layer\n    } = options;\n    let highlightMatrix = this.getNodeMatrix(cellView, node);\n    // Add padding to the highlight element.\n    if (padding) {\n      if (!layer && node === cellView.el) {\n        // If the highlighter is appended to the cellView\n        // and we measure the size of the cellView wrapping group\n        // it's necessary to remove the highlighter first\n        vel.remove();\n      }\n      let nodeBBox = cellView.getNodeBoundingRect(node);\n      const cx = nodeBBox.x + nodeBBox.width / 2;\n      const cy = nodeBBox.y + nodeBBox.height / 2;\n      nodeBBox = V.transformRect(nodeBBox, highlightMatrix);\n      const width = Math.max(nodeBBox.width, 1);\n      const height = Math.max(nodeBBox.height, 1);\n      const sx = (width + padding) / width;\n      const sy = (height + padding) / height;\n      const paddingMatrix = V.createSVGMatrix({\n        a: sx,\n        b: 0,\n        c: 0,\n        d: sy,\n        e: cx - sx * cx,\n        f: cy - sy * cy\n      });\n      highlightMatrix = highlightMatrix.multiply(paddingMatrix);\n    }\n    vel.attr({\n      'd': this.getPathData(cellView, node),\n      'transform': V.matrixToTransformString(highlightMatrix)\n    });\n  },\n  highlight(cellView, node) {\n    const {\n      vel,\n      options\n    } = this;\n    vel.attr(options.attrs);\n    if (cellView.isNodeConnection(node)) {\n      this.highlightConnection(cellView);\n    } else {\n      this.highlightNode(cellView, node);\n    }\n  }\n});", "import V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\nconst MASK_CLIP = 20;\nfunction forEachDescendant(vel, fn) {\n  const descendants = vel.children();\n  while (descendants.length > 0) {\n    const descendant = descendants.shift();\n    if (fn(descendant)) {\n      descendants.push(...descendant.children());\n    }\n  }\n}\nexport const mask = HighlighterView.extend({\n  tagName: 'rect',\n  className: 'highlight-mask',\n  attributes: {\n    'pointer-events': 'none'\n  },\n  options: {\n    padding: 3,\n    maskClip: MASK_CLIP,\n    deep: false,\n    attrs: {\n      'stroke': '#FEB663',\n      'stroke-width': 3,\n      'stroke-linecap': 'butt',\n      'stroke-linejoin': 'miter'\n    }\n  },\n  VISIBLE: 'white',\n  INVISIBLE: 'black',\n  MASK_ROOT_ATTRIBUTE_BLACKLIST: ['marker-start', 'marker-end', 'marker-mid', 'transform', 'stroke-dasharray', 'class'],\n  MASK_CHILD_ATTRIBUTE_BLACKLIST: ['stroke', 'fill', 'stroke-width', 'stroke-opacity', 'stroke-dasharray', 'fill-opacity', 'marker-start', 'marker-end', 'marker-mid', 'class'],\n  // TODO: change the list to a function callback\n  MASK_REPLACE_TAGS: ['FOREIGNOBJECT', 'IMAGE', 'USE', 'TEXT', 'TSPAN', 'TEXTPATH'],\n  // TODO: change the list to a function callback\n  MASK_REMOVE_TAGS: ['TEXT', 'TSPAN', 'TEXTPATH'],\n  transformMaskChild(cellView, childEl) {\n    const {\n      MASK_CHILD_ATTRIBUTE_BLACKLIST,\n      MASK_REPLACE_TAGS,\n      MASK_REMOVE_TAGS\n    } = this;\n    const childTagName = childEl.tagName();\n    // Do not include the element in the mask's image\n    if (!V.isSVGGraphicsElement(childEl) || MASK_REMOVE_TAGS.includes(childTagName)) {\n      childEl.remove();\n      return false;\n    }\n    // Replace the element with a rectangle\n    if (MASK_REPLACE_TAGS.includes(childTagName)) {\n      // Note: clone() method does not change the children ids\n      const originalChild = cellView.vel.findOne(`#${childEl.id}`);\n      if (originalChild) {\n        const {\n          node: originalNode\n        } = originalChild;\n        let childBBox = cellView.getNodeBoundingRect(originalNode);\n        if (cellView.model.isElement()) {\n          childBBox = V.transformRect(childBBox, cellView.getNodeMatrix(originalNode));\n        }\n        const replacement = V('rect', childBBox.toJSON());\n        const {\n          x: ox,\n          y: oy\n        } = childBBox.center();\n        const {\n          angle,\n          cx = ox,\n          cy = oy\n        } = originalChild.rotate();\n        if (angle) replacement.rotate(angle, cx, cy);\n        // Note: it's not important to keep the same sibling index since all subnodes are filled\n        childEl.parent().append(replacement);\n      }\n      childEl.remove();\n      return false;\n    }\n    // Keep the element, but clean it from certain attributes\n    MASK_CHILD_ATTRIBUTE_BLACKLIST.forEach(attrName => {\n      if (attrName === 'fill' && childEl.attr('fill') === 'none') return;\n      childEl.removeAttr(attrName);\n    });\n    return true;\n  },\n  transformMaskRoot(_cellView, rootEl) {\n    const {\n      MASK_ROOT_ATTRIBUTE_BLACKLIST\n    } = this;\n    MASK_ROOT_ATTRIBUTE_BLACKLIST.forEach(attrName => {\n      rootEl.removeAttr(attrName);\n    });\n  },\n  getMaskShape(cellView, vel) {\n    const {\n      options,\n      MASK_REPLACE_TAGS\n    } = this;\n    const {\n      deep\n    } = options;\n    const tagName = vel.tagName();\n    let maskRoot;\n    if (tagName === 'G') {\n      if (!deep) return null;\n      maskRoot = vel.clone();\n      forEachDescendant(maskRoot, maskChild => this.transformMaskChild(cellView, maskChild));\n    } else {\n      if (MASK_REPLACE_TAGS.includes(tagName)) return null;\n      maskRoot = vel.clone();\n    }\n    this.transformMaskRoot(cellView, maskRoot);\n    return maskRoot;\n  },\n  getMaskId() {\n    return `highlight-mask-${this.cid}`;\n  },\n  getMask(cellView, vNode) {\n    const {\n      VISIBLE,\n      INVISIBLE,\n      options\n    } = this;\n    const {\n      padding,\n      attrs\n    } = options;\n    const strokeWidth = 'stroke-width' in attrs ? attrs['stroke-width'] : 1;\n    const hasNodeFill = vNode.attr('fill') !== 'none';\n    let magnetStrokeWidth = parseFloat(vNode.attr('stroke-width'));\n    if (isNaN(magnetStrokeWidth)) magnetStrokeWidth = 1;\n    // stroke of the invisible shape\n    const minStrokeWidth = magnetStrokeWidth + padding * 2;\n    // stroke of the visible shape\n    const maxStrokeWidth = minStrokeWidth + strokeWidth * 2;\n    let maskEl = this.getMaskShape(cellView, vNode);\n    if (!maskEl) {\n      const nodeBBox = cellView.getNodeBoundingRect(vNode.node);\n      // Make sure the rect is visible\n      nodeBBox.inflate(nodeBBox.width ? 0 : 0.5, nodeBBox.height ? 0 : 0.5);\n      maskEl = V('rect', nodeBBox.toJSON());\n    }\n    maskEl.attr(attrs);\n    return V('mask', {\n      'id': this.getMaskId()\n    }).append([maskEl.clone().attr({\n      'fill': hasNodeFill ? VISIBLE : 'none',\n      'stroke': VISIBLE,\n      'stroke-width': maxStrokeWidth\n    }), maskEl.clone().attr({\n      'fill': hasNodeFill ? INVISIBLE : 'none',\n      'stroke': INVISIBLE,\n      'stroke-width': minStrokeWidth\n    })]);\n  },\n  removeMask(paper) {\n    const maskNode = paper.svg.getElementById(this.getMaskId());\n    if (maskNode) {\n      paper.defs.removeChild(maskNode);\n    }\n  },\n  addMask(paper, maskEl) {\n    paper.defs.appendChild(maskEl.node);\n  },\n  highlight(cellView, node) {\n    const {\n      options,\n      vel\n    } = this;\n    const {\n      padding,\n      attrs,\n      maskClip = MASK_CLIP,\n      layer\n    } = options;\n    const color = 'stroke' in attrs ? attrs['stroke'] : '#000000';\n    if (!layer && node === cellView.el) {\n      // If the highlighter is appended to the cellView\n      // and we measure the size of the cellView wrapping group\n      // it's necessary to remove the highlighter first\n      vel.remove();\n    }\n    const highlighterBBox = cellView.getNodeBoundingRect(node).inflate(padding + maskClip);\n    const highlightMatrix = this.getNodeMatrix(cellView, node);\n    const maskEl = this.getMask(cellView, V(node));\n    this.addMask(cellView.paper, maskEl);\n    vel.attr(highlighterBBox.toJSON());\n    vel.attr({\n      'transform': V.matrixToTransformString(highlightMatrix),\n      'mask': `url(#${maskEl.id})`,\n      'fill': color\n    });\n  },\n  unhighlight(cellView) {\n    this.removeMask(cellView.paper);\n  }\n});", "import * as util from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\nexport const opacity = HighlighterView.extend({\n  UPDATABLE: false,\n  MOUNTABLE: false,\n  opacityClassName: util.addClassNamePrefix('highlight-opacity'),\n  highlight: function (_cellView, node) {\n    V(node).addClass(this.opacityClassName);\n  },\n  unhighlight: function (_cellView, node) {\n    V(node).removeClass(this.opacityClassName);\n  }\n});", "import * as util from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\nconst className = util.addClassNamePrefix('highlighted');\nexport const addClass = HighlighterView.extend({\n  UPDATABLE: false,\n  MOUNTABLE: false,\n  options: {\n    className\n  },\n  highlight: function (_cellView, node) {\n    V(node).addClass(this.options.className);\n  },\n  unhighlight: function (_cellView, node) {\n    V(node).removeClass(this.options.className);\n  }\n}, {\n  // Backwards Compatibility\n  className\n});", "import { Rect } from '../g/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\nimport { normalizeSides, isEqual } from '../util/index.mjs';\nimport { Positions, getRectPoint } from '../util/getRectPoint.mjs';\nconst Directions = {\n  ROW: 'row',\n  COLUMN: 'column'\n};\nexport const list = HighlighterView.extend({\n  tagName: 'g',\n  MOUNTABLE: true,\n  UPDATE_ATTRIBUTES: function () {\n    return [this.options.attribute];\n  },\n  _prevItems: null,\n  highlight(elementView, node) {\n    const element = elementView.model;\n    const {\n      attribute,\n      size = 20,\n      gap = 5,\n      direction = Directions.ROW\n    } = this.options;\n    if (!attribute) throw new Error('List: attribute is required');\n    const normalizedSize = typeof size === 'number' ? {\n      width: size,\n      height: size\n    } : size;\n    const isRowDirection = direction === Directions.ROW;\n    const itemWidth = isRowDirection ? normalizedSize.width : normalizedSize.height;\n    let items = element.get(attribute);\n    if (!Array.isArray(items)) items = [];\n    const prevItems = this._prevItems || [];\n    const comparison = items.map((item, index) => isEqual(prevItems[index], items[index]));\n    if (prevItems.length !== items.length || comparison.some(unchanged => !unchanged)) {\n      const prevEls = this.vel.children();\n      const itemsEls = items.map((item, index) => {\n        const prevEl = index in prevEls ? prevEls[index].node : null;\n        if (comparison[index]) return prevEl;\n        const itemEl = this.createListItem(item, normalizedSize, prevEl);\n        if (!itemEl) return null;\n        if (!(itemEl instanceof SVGElement)) throw new Error('List: item must be an SVGElement');\n        itemEl.dataset.index = index;\n        itemEl.dataset.attribute = attribute;\n        const offset = index * (itemWidth + gap);\n        itemEl.setAttribute('transform', isRowDirection ? `translate(${offset}, 0)` : `translate(0, ${offset})`);\n        return itemEl;\n      });\n      this.vel.empty().append(itemsEls);\n      this._prevItems = items;\n    }\n    const itemsCount = items.length;\n    const length = itemsCount === 0 ? 0 : itemsCount * itemWidth + (itemsCount - 1) * gap;\n    const listSize = isRowDirection ? {\n      width: length,\n      height: normalizedSize.height\n    } : {\n      width: normalizedSize.width,\n      height: length\n    };\n    this.position(element, listSize);\n  },\n  position(element, listSize) {\n    const {\n      vel,\n      options\n    } = this;\n    const {\n      margin = 5,\n      position = 'top-left'\n    } = options;\n    const {\n      width,\n      height\n    } = element.size();\n    const {\n      left,\n      right,\n      top,\n      bottom\n    } = normalizeSides(margin);\n    const bbox = new Rect(left, top, width - (left + right), height - (top + bottom));\n    let {\n      x,\n      y\n    } = getRectPoint(bbox, position);\n    // x\n    switch (position) {\n      case Positions.CENTER:\n      case Positions.TOP:\n      case Positions.BOTTOM:\n        {\n          x -= listSize.width / 2;\n          break;\n        }\n      case Positions.RIGHT:\n      case Positions.BOTTOM_RIGHT:\n      case Positions.TOP_RIGHT:\n        {\n          x -= listSize.width;\n          break;\n        }\n    }\n    // y\n    switch (position) {\n      case Positions.CENTER:\n      case Positions.RIGHT:\n      case Positions.LEFT:\n        {\n          y -= listSize.height / 2;\n          break;\n        }\n      case Positions.BOTTOM:\n      case Positions.BOTTOM_RIGHT:\n      case Positions.BOTTOM_LEFT:\n        {\n          y -= listSize.height;\n          break;\n        }\n    }\n    vel.attr('transform', `translate(${x}, ${y})`);\n  }\n}, {\n  Directions,\n  Positions\n});", "import { Line, Point } from '../g/index.mjs';\nimport { isPercentage } from '../util/index.mjs';\nfunction connectionRatio(view, _magnet, _refPoint, opt) {\n  var ratio = 'ratio' in opt ? opt.ratio : 0.5;\n  return view.getPointAtRatio(ratio);\n}\nfunction connectionLength(view, _magnet, _refPoint, opt) {\n  var length = 'length' in opt ? opt.length : 20;\n  return view.getPointAtLength(length);\n}\nfunction _connectionPerpendicular(view, _magnet, refPoint, opt) {\n  var OFFSET = 1e6;\n  var path = view.getConnection();\n  var segmentSubdivisions = view.getConnectionSubdivisions();\n  var verticalLine = new Line(refPoint.clone().offset(0, OFFSET), refPoint.clone().offset(0, -OFFSET));\n  var horizontalLine = new Line(refPoint.clone().offset(OFFSET, 0), refPoint.clone().offset(-OFFSET, 0));\n  var verticalIntersections = verticalLine.intersect(path, {\n    segmentSubdivisions: segmentSubdivisions\n  });\n  var horizontalIntersections = horizontalLine.intersect(path, {\n    segmentSubdivisions: segmentSubdivisions\n  });\n  var intersections = [];\n  if (verticalIntersections) Array.prototype.push.apply(intersections, verticalIntersections);\n  if (horizontalIntersections) Array.prototype.push.apply(intersections, horizontalIntersections);\n  if (intersections.length > 0) return refPoint.chooseClosest(intersections);\n  if ('fallbackAt' in opt) {\n    return getPointAtLink(view, opt.fallbackAt);\n  }\n  return connectionClosest(view, _magnet, refPoint, opt);\n}\nfunction _connectionClosest(view, _magnet, refPoint, _opt) {\n  var closestPoint = view.getClosestPoint(refPoint);\n  if (!closestPoint) return new Point();\n  return closestPoint;\n}\nexport function resolveRef(fn) {\n  return function (view, magnet, ref, opt) {\n    if (ref instanceof Element) {\n      var refView = this.paper.findView(ref);\n      var refPoint;\n      if (refView) {\n        if (refView.isNodeConnection(ref)) {\n          var distance = 'fixedAt' in opt ? opt.fixedAt : '50%';\n          refPoint = getPointAtLink(refView, distance);\n        } else {\n          refPoint = refView.getNodeBBox(ref).center();\n        }\n      } else {\n        // Something went wrong\n        refPoint = new Point();\n      }\n      return fn.call(this, view, magnet, refPoint, opt);\n    }\n    return fn.apply(this, arguments);\n  };\n}\nfunction getPointAtLink(view, value) {\n  var parsedValue = parseFloat(value);\n  if (isPercentage(value)) {\n    return view.getPointAtRatio(parsedValue / 100);\n  } else {\n    return view.getPointAtLength(parsedValue);\n  }\n}\n\n// joint.linkAnchors\nexport { connectionRatio, connectionLength };\nexport const connectionPerpendicular = resolveRef(_connectionPerpendicular);\nexport const connectionClosest = resolveRef(_connectionClosest);", "import * as g from '../g/index.mjs';\nimport V from '../V/index.mjs';\nimport * as util from '../util/index.mjs';\nfunction offsetPoint(p1, p2, offset) {\n  if (util.isPlainObject(offset)) {\n    const {\n      x,\n      y\n    } = offset;\n    if (isFinite(y)) {\n      const line = new g.Line(p2, p1);\n      const {\n        start,\n        end\n      } = line.parallel(y);\n      p2 = start;\n      p1 = end;\n    }\n    offset = x;\n  }\n  if (!isFinite(offset)) return p1;\n  var length = p1.distance(p2);\n  if (offset === 0 && length > 0) return p1;\n  return p1.move(p2, -Math.min(offset, length - 1));\n}\nfunction stroke(magnet) {\n  var stroke = magnet.getAttribute('stroke-width');\n  if (stroke === null) return 0;\n  return parseFloat(stroke) || 0;\n}\nfunction alignLine(line, type, offset = 0) {\n  let coordinate, a, b, direction;\n  const {\n    start,\n    end\n  } = line;\n  switch (type) {\n    case 'left':\n      coordinate = 'x';\n      a = end;\n      b = start;\n      direction = -1;\n      break;\n    case 'right':\n      coordinate = 'x';\n      a = start;\n      b = end;\n      direction = 1;\n      break;\n    case 'top':\n      coordinate = 'y';\n      a = end;\n      b = start;\n      direction = -1;\n      break;\n    case 'bottom':\n      coordinate = 'y';\n      a = start;\n      b = end;\n      direction = 1;\n      break;\n    default:\n      return;\n  }\n  if (start[coordinate] < end[coordinate]) {\n    a[coordinate] = b[coordinate];\n  } else {\n    b[coordinate] = a[coordinate];\n  }\n  if (isFinite(offset)) {\n    a[coordinate] += direction * offset;\n    b[coordinate] += direction * offset;\n  }\n}\n\n// Connection Points\n\nfunction anchorConnectionPoint(line, _view, _magnet, opt) {\n  let {\n    offset,\n    alignOffset,\n    align\n  } = opt;\n  if (align) alignLine(line, align, alignOffset);\n  return offsetPoint(line.end, line.start, offset);\n}\nfunction bboxIntersection(line, view, magnet, opt) {\n  var bbox = view.getNodeBBox(magnet);\n  if (opt.stroke) bbox.inflate(stroke(magnet) / 2);\n  var intersections = line.intersect(bbox);\n  var cp = intersections ? line.start.chooseClosest(intersections) : line.end;\n  return offsetPoint(cp, line.start, opt.offset);\n}\nfunction rectangleIntersection(line, view, magnet, opt) {\n  var angle = view.model.angle();\n  if (angle === 0) {\n    return bboxIntersection(line, view, magnet, opt);\n  }\n  var bboxWORotation = view.getNodeUnrotatedBBox(magnet);\n  if (opt.stroke) bboxWORotation.inflate(stroke(magnet) / 2);\n  var center = bboxWORotation.center();\n  var lineWORotation = line.clone().rotate(center, angle);\n  var intersections = lineWORotation.setLength(1e6).intersect(bboxWORotation);\n  var cp = intersections ? lineWORotation.start.chooseClosest(intersections).rotate(center, -angle) : line.end;\n  return offsetPoint(cp, line.start, opt.offset);\n}\nfunction findShapeNode(magnet) {\n  if (!magnet) return null;\n  var node = magnet;\n  do {\n    var tagName = node.tagName;\n    if (typeof tagName !== 'string') return null;\n    tagName = tagName.toUpperCase();\n    if (tagName === 'G') {\n      node = node.firstElementChild;\n    } else if (tagName === 'TITLE') {\n      node = node.nextElementSibling;\n    } else break;\n  } while (node);\n  return node;\n}\nvar BNDR_SUBDIVISIONS = 'segmentSubdivisons';\nvar BNDR_SHAPE_BBOX = 'shapeBBox';\nfunction boundaryIntersection(line, view, magnet, opt) {\n  var node, intersection;\n  var selector = opt.selector;\n  var anchor = line.end;\n  if (typeof selector === 'string') {\n    node = view.findBySelector(selector)[0];\n  } else if (selector === false) {\n    node = magnet;\n  } else if (Array.isArray(selector)) {\n    node = util.getByPath(magnet, selector);\n  } else {\n    node = findShapeNode(magnet);\n  }\n  if (!V.isSVGGraphicsElement(node)) {\n    if (node === magnet || !V.isSVGGraphicsElement(magnet)) return anchor;\n    node = magnet;\n  }\n  var localShape = view.getNodeShape(node);\n  var magnetMatrix = view.getNodeMatrix(node);\n  var translateMatrix = view.getRootTranslateMatrix();\n  var rotateMatrix = view.getRootRotateMatrix();\n  var targetMatrix = translateMatrix.multiply(rotateMatrix).multiply(magnetMatrix);\n  var localMatrix = targetMatrix.inverse();\n  var localLine = V.transformLine(line, localMatrix);\n  var localRef = localLine.start.clone();\n  var data = view.getNodeData(node);\n  if (opt.insideout === false) {\n    if (!data[BNDR_SHAPE_BBOX]) data[BNDR_SHAPE_BBOX] = localShape.bbox();\n    var localBBox = data[BNDR_SHAPE_BBOX];\n    if (localBBox.containsPoint(localRef)) return anchor;\n  }\n\n  // Caching segment subdivisions for paths\n  var pathOpt;\n  if (localShape instanceof g.Path) {\n    var precision = opt.precision || 2;\n    if (!data[BNDR_SUBDIVISIONS]) data[BNDR_SUBDIVISIONS] = localShape.getSegmentSubdivisions({\n      precision: precision\n    });\n    pathOpt = {\n      precision: precision,\n      segmentSubdivisions: data[BNDR_SUBDIVISIONS]\n    };\n  }\n  if (opt.extrapolate === true) localLine.setLength(1e6);\n  intersection = localLine.intersect(localShape, pathOpt);\n  if (intersection) {\n    // More than one intersection\n    if (V.isArray(intersection)) intersection = localRef.chooseClosest(intersection);\n  } else if (opt.sticky === true) {\n    // No intersection, find the closest point instead\n    if (localShape instanceof g.Rect) {\n      intersection = localShape.pointNearestToPoint(localRef);\n    } else if (localShape instanceof g.Ellipse) {\n      intersection = localShape.intersectionWithLineFromCenterToPoint(localRef);\n    } else {\n      intersection = localShape.closestPoint(localRef, pathOpt);\n    }\n  }\n  var cp = intersection ? V.transformPoint(intersection, targetMatrix) : anchor;\n  var cpOffset = opt.offset || 0;\n  if (opt.stroke) cpOffset += stroke(node) / 2;\n  return offsetPoint(cp, line.start, cpOffset);\n}\nexport const anchor = anchorConnectionPoint;\nexport const bbox = bboxIntersection;\nexport const rectangle = rectangleIntersection;\nexport const boundary = boundaryIntersection;", "import * as util from '../util/index.mjs';\nimport { toRad } from '../g/index.mjs';\nimport { resolveRef } from '../linkAnchors/index.mjs';\nfunction bboxWrapper(method) {\n  return function (view, magnet, ref, opt) {\n    var rotate = !!opt.rotate;\n    var bbox = rotate ? view.getNodeUnrotatedBBox(magnet) : view.getNodeBBox(magnet);\n    var anchor = bbox[method]();\n    var dx = opt.dx;\n    if (dx) {\n      var dxPercentage = util.isPercentage(dx);\n      dx = parseFloat(dx);\n      if (isFinite(dx)) {\n        if (dxPercentage) {\n          dx /= 100;\n          dx *= bbox.width;\n        }\n        anchor.x += dx;\n      }\n    }\n    var dy = opt.dy;\n    if (dy) {\n      var dyPercentage = util.isPercentage(dy);\n      dy = parseFloat(dy);\n      if (isFinite(dy)) {\n        if (dyPercentage) {\n          dy /= 100;\n          dy *= bbox.height;\n        }\n        anchor.y += dy;\n      }\n    }\n    return rotate ? anchor.rotate(view.model.getBBox().center(), -view.model.angle()) : anchor;\n  };\n}\nfunction _perpendicular(view, magnet, refPoint, opt) {\n  var angle = view.model.angle();\n  var bbox = view.getNodeBBox(magnet);\n  var anchor = bbox.center();\n  var topLeft = bbox.origin();\n  var bottomRight = bbox.corner();\n  var padding = opt.padding;\n  if (!isFinite(padding)) padding = 0;\n  if (topLeft.y + padding <= refPoint.y && refPoint.y <= bottomRight.y - padding) {\n    var dy = refPoint.y - anchor.y;\n    anchor.x += angle === 0 || angle === 180 ? 0 : dy * 1 / Math.tan(toRad(angle));\n    anchor.y += dy;\n  } else if (topLeft.x + padding <= refPoint.x && refPoint.x <= bottomRight.x - padding) {\n    var dx = refPoint.x - anchor.x;\n    anchor.y += angle === 90 || angle === 270 ? 0 : dx * Math.tan(toRad(angle));\n    anchor.x += dx;\n  }\n  return anchor;\n}\nfunction _midSide(view, magnet, refPoint, opt) {\n  var rotate = !!opt.rotate;\n  var bbox, angle, center;\n  if (rotate) {\n    bbox = view.getNodeUnrotatedBBox(magnet);\n    center = view.model.getBBox().center();\n    angle = view.model.angle();\n  } else {\n    bbox = view.getNodeBBox(magnet);\n  }\n  var padding = opt.padding;\n  if (isFinite(padding)) bbox.inflate(padding);\n  if (rotate) refPoint.rotate(center, angle);\n  var side = bbox.sideNearestToPoint(refPoint);\n  var anchor;\n  switch (side) {\n    case 'left':\n      anchor = bbox.leftMiddle();\n      break;\n    case 'right':\n      anchor = bbox.rightMiddle();\n      break;\n    case 'top':\n      anchor = bbox.topMiddle();\n      break;\n    case 'bottom':\n      anchor = bbox.bottomMiddle();\n      break;\n  }\n  return rotate ? anchor.rotate(center, -angle) : anchor;\n}\n\n// Can find anchor from model, when there is no selector or the link end\n// is connected to a port\nfunction _modelCenter(view, _magnet, _refPoint, opt, endType) {\n  return view.model.getPointFromConnectedLink(this.model, endType).offset(opt.dx, opt.dy);\n}\n\n//joint.anchors\nexport const center = bboxWrapper('center');\nexport const top = bboxWrapper('topMiddle');\nexport const bottom = bboxWrapper('bottomMiddle');\nexport const left = bboxWrapper('leftMiddle');\nexport const right = bboxWrapper('rightMiddle');\nexport const topLeft = bboxWrapper('origin');\nexport const topRight = bboxWrapper('topRight');\nexport const bottomLeft = bboxWrapper('bottomLeft');\nexport const bottomRight = bboxWrapper('corner');\nexport const perpendicular = resolveRef(_perpendicular);\nexport const midSide = resolveRef(_midSide);\nexport const modelCenter = _modelCenter;", "import V from '../V/index.mjs';\nimport { isNumber, assign, nextFrame, isObject, cancelFrame, defaults, defaultsDeep, addClassNamePrefix, normalizeSides, isFunction, isPlainObject, getByPath, sortElements, isString, guid, normalizeEvent, normalizeWheel, cap, debounce, omit, result, merge, camelCase, cloneDeep, invoke, hashCode, filter as _filter, parseDOMJSON, toArray, has } from '../util/index.mjs';\nimport { Rect, Point, toRad } from '../g/index.mjs';\nimport { View, views } from '../mvc/index.mjs';\nimport { CellView } from './CellView.mjs';\nimport { ElementView } from './ElementView.mjs';\nimport { LinkView } from './LinkView.mjs';\nimport { Link } from './Link.mjs';\nimport { Cell } from './Cell.mjs';\nimport { Graph } from './Graph.mjs';\nimport { LayersNames, PaperLayer } from './PaperLayer.mjs';\nimport * as highlighters from '../highlighters/index.mjs';\nimport * as linkAnchors from '../linkAnchors/index.mjs';\nimport * as connectionPoints from '../connectionPoints/index.mjs';\nimport * as anchors from '../anchors/index.mjs';\nimport $ from 'jquery';\nimport Backbone from 'backbone';\nconst sortingTypes = {\n  NONE: 'sorting-none',\n  APPROX: 'sorting-approximate',\n  EXACT: 'sorting-exact'\n};\nconst WHEEL_CAP = 50;\nconst WHEEL_WAIT_MS = 20;\nconst MOUNT_BATCH_SIZE = 1000;\nconst UPDATE_BATCH_SIZE = Infinity;\nconst MIN_PRIORITY = 9007199254740991; // Number.MAX_SAFE_INTEGER\n\nconst HighlightingTypes = CellView.Highlighting;\nconst defaultHighlighting = {\n  [HighlightingTypes.DEFAULT]: {\n    name: 'stroke',\n    options: {\n      padding: 3\n    }\n  },\n  [HighlightingTypes.MAGNET_AVAILABILITY]: {\n    name: 'addClass',\n    options: {\n      className: 'available-magnet'\n    }\n  },\n  [HighlightingTypes.ELEMENT_AVAILABILITY]: {\n    name: 'addClass',\n    options: {\n      className: 'available-cell'\n    }\n  }\n};\nconst defaultLayers = [{\n  name: LayersNames.BACK\n}, {\n  name: LayersNames.CELLS\n}, {\n  name: LayersNames.LABELS\n}, {\n  name: LayersNames.FRONT\n}, {\n  name: LayersNames.TOOLS\n}];\nexport const Paper = View.extend({\n  className: 'paper',\n  options: {\n    width: 800,\n    height: 600,\n    origin: {\n      x: 0,\n      y: 0\n    },\n    // x,y coordinates in top-left corner\n    gridSize: 1,\n    // Whether or not to draw the grid lines on the paper's DOM element.\n    // e.g drawGrid: true, drawGrid: { color: 'red', thickness: 2 }\n    drawGrid: false,\n    // If not set, the size of the visual grid is the same as the `gridSize`.\n    drawGridSize: null,\n    // Whether or not to draw the background on the paper's DOM element.\n    // e.g. background: { color: 'lightblue', image: '/paper-background.png', repeat: 'flip-xy' }\n    background: false,\n    perpendicularLinks: false,\n    elementView: ElementView,\n    linkView: LinkView,\n    snapLabels: false,\n    // false, true\n    snapLinks: false,\n    // false, true, { radius: value }\n    snapLinksSelf: false,\n    // false, true, { radius: value }\n\n    // Should the link labels be rendered into its own layer?\n    // `false` - the labels are part of the links\n    // `true` - the labels are appended to LayersName.LABELS\n    // [LayersName] - the labels are appended to the layer specified\n    labelsLayer: false,\n    // When set to FALSE, an element may not have more than 1 link with the same source and target element.\n    multiLinks: true,\n    // For adding custom guard logic.\n    guard: function (evt, view) {\n      // FALSE means the event isn't guarded.\n      return false;\n    },\n    highlighting: defaultHighlighting,\n    // Prevent the default context menu from being displayed.\n    preventContextMenu: true,\n    // Prevent the default action for blank:pointer<action>.\n    preventDefaultBlankAction: true,\n    // Prevent the default action for cell:pointer<action>.\n    preventDefaultViewAction: true,\n    // Restrict the translation of elements by given bounding box.\n    // Option accepts a boolean:\n    //  true - the translation is restricted to the paper area\n    //  false - no restrictions\n    // A method:\n    // restrictTranslate: function(elementView) {\n    //     var parentId = elementView.model.get('parent');\n    //     return parentId && this.model.getCell(parentId).getBBox();\n    // },\n    // Or a bounding box:\n    // restrictTranslate: { x: 10, y: 10, width: 790, height: 590 }\n    restrictTranslate: false,\n    // Marks all available magnets with 'available-magnet' class name and all available cells with\n    // 'available-cell' class name. Marks them when dragging a link is started and unmark\n    // when the dragging is stopped.\n    markAvailable: false,\n    // Defines what link model is added to the graph after an user clicks on an active magnet.\n    // Value could be the Backbone.model or a function returning the Backbone.model\n    // defaultLink: function(elementView, magnet) { return condition ? new customLink1() : new customLink2() }\n    defaultLink: new Link(),\n    // A connector that is used by links with no connector defined on the model.\n    // e.g. { name: 'rounded', args: { radius: 5 }} or a function\n    defaultConnector: {\n      name: 'normal'\n    },\n    // A router that is used by links with no router defined on the model.\n    // e.g. { name: 'oneSide', args: { padding: 10 }} or a function\n    defaultRouter: {\n      name: 'normal'\n    },\n    defaultAnchor: {\n      name: 'center'\n    },\n    defaultLinkAnchor: {\n      name: 'connectionRatio'\n    },\n    defaultConnectionPoint: {\n      name: 'bbox'\n    },\n    /* CONNECTING */\n\n    connectionStrategy: null,\n    // Check whether to add a new link to the graph when user clicks on an a magnet.\n    validateMagnet: function (_cellView, magnet, _evt) {\n      return magnet.getAttribute('magnet') !== 'passive';\n    },\n    // Check whether to allow or disallow the link connection while an arrowhead end (source/target)\n    // being changed.\n    validateConnection: function (cellViewS, _magnetS, cellViewT, _magnetT, end, _linkView) {\n      return (end === 'target' ? cellViewT : cellViewS) instanceof ElementView;\n    },\n    /* EMBEDDING */\n\n    // Enables embedding. Re-parent the dragged element with elements under it and makes sure that\n    // all links and elements are visible taken the level of embedding into account.\n    embeddingMode: false,\n    // Check whether to allow or disallow the element embedding while an element being translated.\n    validateEmbedding: function (childView, parentView) {\n      // by default all elements can be in relation child-parent\n      return true;\n    },\n    // Check whether to allow or disallow an embedded element to be unembedded / to become a root.\n    validateUnembedding: function (childView) {\n      // by default all elements can become roots\n      return true;\n    },\n    // Determines the way how a cell finds a suitable parent when it's dragged over the paper.\n    // The cell with the highest z-index (visually on the top) will be chosen.\n    findParentBy: 'bbox',\n    // 'bbox'|'center'|'origin'|'corner'|'topRight'|'bottomLeft'\n\n    // If enabled only the element on the very front is taken into account for the embedding.\n    // If disabled the elements under the dragged view are tested one by one\n    // (from front to back) until a valid parent found.\n    frontParentOnly: true,\n    // Interactive flags. See online docs for the complete list of interactive flags.\n    interactive: {\n      labelMove: false\n    },\n    // When set to true the links can be pinned to the paper.\n    // i.e. link source/target can be a point e.g. link.get('source') ==> { x: 100, y: 100 };\n    linkPinning: true,\n    // Custom validation after an interaction with a link ends.\n    // Recognizes a function. If `false` is returned, the link is disallowed (removed or reverted)\n    // (linkView, paper) => boolean\n    allowLink: null,\n    // Allowed number of mousemove events after which the pointerclick event will be still triggered.\n    clickThreshold: 0,\n    // Number of required mousemove events before the first pointermove event will be triggered.\n    moveThreshold: 0,\n    // Number of required mousemove events before a link is created out of the magnet.\n    // Or string `onleave` so the link is created when the pointer leaves the magnet\n    magnetThreshold: 0,\n    // Rendering Options\n\n    sorting: sortingTypes.EXACT,\n    frozen: false,\n    autoFreeze: false,\n    // no docs yet\n    onViewUpdate: function (view, flag, priority, opt, paper) {\n      // Do not update connected links when:\n      // 1. the view was just inserted (added to the graph and rendered)\n      // 2. the view was just mounted (added back to the paper by viewport function)\n      // 3. the change was marked as `isolate`.\n      // 4. the view model was just removed from the graph\n      if (flag & (view.FLAG_INSERT | view.FLAG_REMOVE) || opt.mounting || opt.isolate) return;\n      paper.requestConnectedLinksUpdate(view, priority, opt);\n    },\n    // no docs yet\n    onViewPostponed: function (view, flag, paper) {\n      return paper.forcePostponedViewUpdate(view, flag);\n    },\n    beforeRender: null,\n    // function(opt, paper) { },\n\n    afterRender: null,\n    // function(stats, opt, paper) {\n\n    viewport: null,\n    // Default namespaces\n\n    cellViewNamespace: null,\n    routerNamespace: null,\n    connectorNamespace: null,\n    highlighterNamespace: highlighters,\n    anchorNamespace: anchors,\n    linkAnchorNamespace: linkAnchors,\n    connectionPointNamespace: connectionPoints,\n    overflow: false\n  },\n  events: {\n    'dblclick': 'pointerdblclick',\n    'dbltap': 'pointerdblclick',\n    'contextmenu': 'contextmenu',\n    'mousedown': 'pointerdown',\n    'touchstart': 'pointerdown',\n    'mouseover': 'mouseover',\n    'mouseout': 'mouseout',\n    'mouseenter': 'mouseenter',\n    'mouseleave': 'mouseleave',\n    'wheel': 'mousewheel',\n    'mouseenter .joint-cell': 'mouseenter',\n    'mouseleave .joint-cell': 'mouseleave',\n    'mouseenter .joint-tools': 'mouseenter',\n    'mouseleave .joint-tools': 'mouseleave',\n    'dblclick .joint-cell [magnet]': 'magnetpointerdblclick',\n    'contextmenu .joint-cell [magnet]': 'magnetcontextmenu',\n    'mousedown .joint-link .label': 'onlabel',\n    // interaction with link label\n    'touchstart .joint-link .label': 'onlabel',\n    'dragstart .joint-cell image': 'onImageDragStart' // firefox fix\n  },\n  documentEvents: {\n    'mousemove': 'pointermove',\n    'touchmove': 'pointermove',\n    'mouseup': 'pointerup',\n    'touchend': 'pointerup',\n    'touchcancel': 'pointerup'\n  },\n  svg: null,\n  viewport: null,\n  defs: null,\n  tools: null,\n  $background: null,\n  layers: null,\n  $grid: null,\n  $document: null,\n  // For storing the current transformation matrix (CTM) of the paper's viewport.\n  _viewportMatrix: null,\n  // For verifying whether the CTM is up-to-date. The viewport transform attribute\n  // could have been manipulated directly.\n  _viewportTransformString: null,\n  // Updates data (priorities, unmounted views etc.)\n  _updates: null,\n  // Paper Layers\n  _layers: null,\n  SORT_DELAYING_BATCHES: ['add', 'to-front', 'to-back'],\n  UPDATE_DELAYING_BATCHES: ['translate'],\n  // If you interact with these elements,\n  // the default interaction such as `element move` is prevented.\n  FORM_CONTROL_TAG_NAMES: ['TEXTAREA', 'INPUT', 'BUTTON', 'SELECT', 'OPTION'],\n  // If you interact with these elements, the events are not propagated to the paper\n  // i.e. paper events such as `element:pointerdown` are not triggered.\n  GUARDED_TAG_NAMES: [\n  // Guard <select> for consistency. When you click on it:\n  // Chrome: triggers `pointerdown`, `pointerup`, `pointerclick` to open\n  // Firefox: triggers `pointerdown` on open, `pointerup` (and `pointerclick` only if you haven't moved).\n  //          on close. However, if you open and then close by clicking elsewhere on the page,\n  //           no other event is triggered.\n  // Safari: when you open it, it triggers `pointerdown`. That's it.\n  'SELECT'],\n  MIN_SCALE: 1e-6,\n  init: function () {\n    const {\n      options,\n      el\n    } = this;\n    if (!options.cellViewNamespace) {\n      /* eslint-disable no-undef */\n      options.cellViewNamespace = typeof joint !== 'undefined' && has(joint, 'shapes') ? joint.shapes : null;\n      /* eslint-enable no-undef */\n    }\n    const model = this.model = options.model || new Graph();\n\n    // Layers (SVGGroups)\n    this._layers = {};\n    this.setGrid(options.drawGrid);\n    this.cloneOptions();\n    this.render();\n    this._setDimensions();\n    this.startListening();\n\n    // Hash of all cell views.\n    this._views = {};\n\n    // Mouse wheel events buffer\n    this._mw_evt_buffer = {\n      event: null,\n      deltas: []\n    };\n\n    // Reference to the paper owner document\n    this.$document = $(el.ownerDocument);\n    // Render existing cells in the graph\n    this.resetViews(model.attributes.cells.models);\n    // Start the Rendering Loop\n    if (!this.isFrozen() && this.isAsync()) this.updateViewsAsync();\n  },\n  _resetUpdates: function () {\n    return this._updates = {\n      id: null,\n      priorities: [{}, {}, {}],\n      unmountedCids: [],\n      mountedCids: [],\n      unmounted: {},\n      mounted: {},\n      count: 0,\n      keyFrozen: false,\n      freezeKey: null,\n      sort: false,\n      disabled: false,\n      idle: false\n    };\n  },\n  startListening: function () {\n    var model = this.model;\n    this.listenTo(model, 'add', this.onCellAdded).listenTo(model, 'remove', this.onCellRemoved).listenTo(model, 'change', this.onCellChange).listenTo(model, 'reset', this.onGraphReset).listenTo(model, 'sort', this.onGraphSort).listenTo(model, 'batch:stop', this.onGraphBatchStop);\n    this.on('cell:highlight', this.onCellHighlight).on('cell:unhighlight', this.onCellUnhighlight).on('scale translate', this.update);\n  },\n  onCellAdded: function (cell, _, opt) {\n    var position = opt.position;\n    if (this.isAsync() || !isNumber(position)) {\n      this.renderView(cell, opt);\n    } else {\n      if (opt.maxPosition === position) this.freeze({\n        key: 'addCells'\n      });\n      this.renderView(cell, opt);\n      if (position === 0) this.unfreeze({\n        key: 'addCells'\n      });\n    }\n  },\n  onCellRemoved: function (cell, _, opt) {\n    const view = this.findViewByModel(cell);\n    if (view) this.requestViewUpdate(view, view.FLAG_REMOVE, view.UPDATE_PRIORITY, opt);\n  },\n  onCellChange: function (cell, opt) {\n    if (cell === this.model.attributes.cells) return;\n    if (cell.hasChanged('z') && this.options.sorting === sortingTypes.APPROX) {\n      const view = this.findViewByModel(cell);\n      if (view) this.requestViewUpdate(view, view.FLAG_INSERT, view.UPDATE_PRIORITY, opt);\n    }\n  },\n  onGraphReset: function (collection, opt) {\n    this.resetLayers();\n    this.resetViews(collection.models, opt);\n  },\n  onGraphSort: function () {\n    if (this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)) return;\n    this.sortViews();\n  },\n  onGraphBatchStop: function (data) {\n    if (this.isFrozen()) return;\n    var name = data && data.batchName;\n    var graph = this.model;\n    if (!this.isAsync()) {\n      var updateDelayingBatches = this.UPDATE_DELAYING_BATCHES;\n      if (updateDelayingBatches.includes(name) && !graph.hasActiveBatch(updateDelayingBatches)) {\n        this.updateViews(data);\n      }\n    }\n    var sortDelayingBatches = this.SORT_DELAYING_BATCHES;\n    if (sortDelayingBatches.includes(name) && !graph.hasActiveBatch(sortDelayingBatches)) {\n      this.sortViews();\n    }\n  },\n  cloneOptions: function () {\n    const {\n      options\n    } = this;\n    const {\n      defaultConnector,\n      defaultRouter,\n      defaultConnectionPoint,\n      defaultAnchor,\n      defaultLinkAnchor,\n      origin,\n      highlighting,\n      cellViewNamespace,\n      interactive\n    } = options;\n\n    // Default cellView namespace for ES5\n    /* eslint-disable no-undef */\n    if (!cellViewNamespace && typeof joint !== 'undefined' && has(joint, 'shapes')) {\n      options.cellViewNamespace = joint.shapes;\n    }\n    /* eslint-enable no-undef */\n\n    // Here if a function was provided, we can not clone it, as this would result in loosing the function.\n    // If the default is used, the cloning is necessary in order to prevent modifying the options on prototype.\n    if (!isFunction(defaultConnector)) {\n      options.defaultConnector = cloneDeep(defaultConnector);\n    }\n    if (!isFunction(defaultRouter)) {\n      options.defaultRouter = cloneDeep(defaultRouter);\n    }\n    if (!isFunction(defaultConnectionPoint)) {\n      options.defaultConnectionPoint = cloneDeep(defaultConnectionPoint);\n    }\n    if (!isFunction(defaultAnchor)) {\n      options.defaultAnchor = cloneDeep(defaultAnchor);\n    }\n    if (!isFunction(defaultLinkAnchor)) {\n      options.defaultLinkAnchor = cloneDeep(defaultLinkAnchor);\n    }\n    if (isPlainObject(interactive)) {\n      options.interactive = assign({}, interactive);\n    }\n    if (isPlainObject(highlighting)) {\n      // Return the default highlighting options into the user specified options.\n      options.highlighting = defaultsDeep({}, highlighting, defaultHighlighting);\n    }\n    options.origin = assign({}, origin);\n  },\n  children: function () {\n    var ns = V.namespace;\n    return [{\n      namespaceURI: ns.xhtml,\n      tagName: 'div',\n      className: addClassNamePrefix('paper-background'),\n      selector: 'background'\n    }, {\n      namespaceURI: ns.xhtml,\n      tagName: 'div',\n      className: addClassNamePrefix('paper-grid'),\n      selector: 'grid'\n    }, {\n      namespaceURI: ns.svg,\n      tagName: 'svg',\n      attributes: {\n        'width': '100%',\n        'height': '100%',\n        'xmlns:xlink': ns.xlink\n      },\n      selector: 'svg',\n      children: [{\n        // Append `<defs>` element to the SVG document. This is useful for filters and gradients.\n        // It's desired to have the defs defined before the viewport (e.g. to make a PDF document pick up defs properly).\n        tagName: 'defs',\n        selector: 'defs'\n      }, {\n        tagName: 'g',\n        className: addClassNamePrefix('layers'),\n        selector: 'layers'\n      }]\n    }];\n  },\n  hasLayerView(layerName) {\n    return layerName in this._layers;\n  },\n  getLayerView(layerName) {\n    const {\n      _layers\n    } = this;\n    if (layerName in _layers) return _layers[layerName];\n    throw new Error(`dia.Paper: Unknown layer \"${layerName}\"`);\n  },\n  getLayerNode(layerName) {\n    return this.getLayerView(layerName).el;\n  },\n  render: function () {\n    this.renderChildren();\n    const {\n      childNodes,\n      options\n    } = this;\n    const {\n      svg,\n      defs,\n      layers,\n      background,\n      grid\n    } = childNodes;\n    svg.style.overflow = options.overflow ? 'visible' : 'hidden';\n    this.svg = svg;\n    this.defs = defs;\n    this.layers = layers;\n    this.$background = $(background);\n    this.$grid = $(grid);\n    this.renderLayers();\n    V.ensureId(svg);\n    if (options.background) {\n      this.drawBackground(options.background);\n    }\n    if (options.drawGrid) {\n      this.drawGrid();\n    }\n    return this;\n  },\n  renderLayers: function (layers = defaultLayers) {\n    this.removeLayers();\n    // TODO: Layers to be read from the graph `layers` attribute\n    layers.forEach(({\n      name,\n      sorted\n    }) => {\n      const layerView = new PaperLayer({\n        name\n      });\n      this.layers.appendChild(layerView.el);\n      this._layers[name] = layerView;\n    });\n    // Throws an exception if doesn't exist\n    const cellsLayerView = this.getLayerView(LayersNames.CELLS);\n    const toolsLayerView = this.getLayerView(LayersNames.TOOLS);\n    const labelsLayerView = this.getLayerView(LayersNames.LABELS);\n    // backwards compatibility\n    this.tools = toolsLayerView.el;\n    this.cells = this.viewport = cellsLayerView.el;\n    // user-select: none;\n    cellsLayerView.vel.addClass(addClassNamePrefix('viewport'));\n    labelsLayerView.vel.addClass(addClassNamePrefix('viewport'));\n  },\n  removeLayers: function () {\n    const {\n      _layers\n    } = this;\n    Object.keys(_layers).forEach(name => {\n      _layers[name].remove();\n      delete _layers[name];\n    });\n  },\n  resetLayers: function () {\n    const {\n      _layers\n    } = this;\n    Object.keys(_layers).forEach(name => {\n      _layers[name].removePivots();\n    });\n  },\n  update: function () {\n    if (this.options.drawGrid) {\n      this.drawGrid();\n    }\n    if (this._background) {\n      this.updateBackgroundImage(this._background);\n    }\n    return this;\n  },\n  matrix: function (ctm) {\n    var viewport = this.layers;\n\n    // Getter:\n    if (ctm === undefined) {\n      var transformString = viewport.getAttribute('transform');\n      if ((this._viewportTransformString || null) === transformString) {\n        // It's ok to return the cached matrix. The transform attribute has not changed since\n        // the matrix was stored.\n        ctm = this._viewportMatrix;\n      } else {\n        // The viewport transform attribute has changed. Measure the matrix and cache again.\n        ctm = viewport.getCTM();\n        this._viewportMatrix = ctm;\n        this._viewportTransformString = transformString;\n      }\n\n      // Clone the cached current transformation matrix.\n      // If no matrix previously stored the identity matrix is returned.\n      return V.createSVGMatrix(ctm);\n    }\n\n    // Setter:\n    ctm = V.createSVGMatrix(ctm);\n    var ctmString = V.matrixToTransformString(ctm);\n    viewport.setAttribute('transform', ctmString);\n    this._viewportMatrix = ctm;\n    this._viewportTransformString = viewport.getAttribute('transform');\n    return this;\n  },\n  clientMatrix: function () {\n    return V.createSVGMatrix(this.cells.getScreenCTM());\n  },\n  requestConnectedLinksUpdate: function (view, priority, opt) {\n    if (view instanceof CellView) {\n      var model = view.model;\n      var links = this.model.getConnectedLinks(model);\n      for (var j = 0, n = links.length; j < n; j++) {\n        var link = links[j];\n        var linkView = this.findViewByModel(link);\n        if (!linkView) continue;\n        var flagLabels = ['UPDATE'];\n        if (link.getTargetCell() === model) flagLabels.push('TARGET');\n        if (link.getSourceCell() === model) flagLabels.push('SOURCE');\n        var nextPriority = Math.max(priority + 1, linkView.UPDATE_PRIORITY);\n        this.scheduleViewUpdate(linkView, linkView.getFlag(flagLabels), nextPriority, opt);\n      }\n    }\n  },\n  forcePostponedViewUpdate: function (view, flag) {\n    if (!view || !(view instanceof CellView)) return false;\n    var model = view.model;\n    if (model.isElement()) return false;\n    if ((flag & view.getFlag(['SOURCE', 'TARGET'])) === 0) {\n      var dumpOptions = {\n        silent: true\n      };\n      // LinkView is waiting for the target or the source cellView to be rendered\n      // This can happen when the cells are not in the viewport.\n      var sourceFlag = 0;\n      var sourceView = this.findViewByModel(model.getSourceCell());\n      if (sourceView && !this.isViewMounted(sourceView)) {\n        sourceFlag = this.dumpView(sourceView, dumpOptions);\n        view.updateEndMagnet('source');\n      }\n      var targetFlag = 0;\n      var targetView = this.findViewByModel(model.getTargetCell());\n      if (targetView && !this.isViewMounted(targetView)) {\n        targetFlag = this.dumpView(targetView, dumpOptions);\n        view.updateEndMagnet('target');\n      }\n      if (sourceFlag === 0 && targetFlag === 0) {\n        // If leftover flag is 0, all view updates were done.\n        return !this.dumpView(view, dumpOptions);\n      }\n    }\n    return false;\n  },\n  requestViewUpdate: function (view, flag, priority, opt) {\n    opt || (opt = {});\n    this.scheduleViewUpdate(view, flag, priority, opt);\n    var isAsync = this.isAsync();\n    if (this.isFrozen() || isAsync && opt.async !== false) return;\n    if (this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)) return;\n    var stats = this.updateViews(opt);\n    if (isAsync) this.notifyAfterRender(stats, opt);\n  },\n  scheduleViewUpdate: function (view, type, priority, opt) {\n    const {\n      _updates: updates,\n      options\n    } = this;\n    if (updates.idle) {\n      if (options.autoFreeze) {\n        updates.idle = false;\n        this.unfreeze();\n      }\n    }\n    const {\n      FLAG_REMOVE,\n      FLAG_INSERT,\n      UPDATE_PRIORITY,\n      cid\n    } = view;\n    let priorityUpdates = updates.priorities[priority];\n    if (!priorityUpdates) priorityUpdates = updates.priorities[priority] = {};\n    // Move higher priority updates to this priority\n    if (priority > UPDATE_PRIORITY) {\n      // Not the default priority for this view. It's most likely a link view\n      // connected to another link view, which triggered the update.\n      // TODO: If there is an update scheduled with a lower priority already, we should\n      // change the requested priority to the lowest one. Does not seem to be critical\n      // right now, as it \"only\" results in multiple updates on the same view.\n      for (let i = priority - 1; i >= UPDATE_PRIORITY; i--) {\n        const prevPriorityUpdates = updates.priorities[i];\n        if (!prevPriorityUpdates || !(cid in prevPriorityUpdates)) continue;\n        priorityUpdates[cid] |= prevPriorityUpdates[cid];\n        delete prevPriorityUpdates[cid];\n      }\n    }\n    let currentType = priorityUpdates[cid] || 0;\n    // Prevent cycling\n    if ((currentType & type) === type) return;\n    if (!currentType) updates.count++;\n    if (type & FLAG_REMOVE && currentType & FLAG_INSERT) {\n      // When a view is removed we need to remove the insert flag as this is a reinsert\n      priorityUpdates[cid] ^= FLAG_INSERT;\n    } else if (type & FLAG_INSERT && currentType & FLAG_REMOVE) {\n      // When a view is added we need to remove the remove flag as this is view was previously removed\n      priorityUpdates[cid] ^= FLAG_REMOVE;\n    }\n    priorityUpdates[cid] |= type;\n    const viewUpdateFn = options.onViewUpdate;\n    if (typeof viewUpdateFn === 'function') viewUpdateFn.call(this, view, type, priority, opt || {}, this);\n  },\n  dumpViewUpdate: function (view) {\n    if (!view) return 0;\n    var updates = this._updates;\n    var cid = view.cid;\n    var priorityUpdates = updates.priorities[view.UPDATE_PRIORITY];\n    var flag = this.registerMountedView(view) | priorityUpdates[cid];\n    delete priorityUpdates[cid];\n    return flag;\n  },\n  dumpView: function (view, opt = {}) {\n    const flag = this.dumpViewUpdate(view);\n    if (!flag) return 0;\n    const shouldNotify = !opt.silent;\n    if (shouldNotify) this.notifyBeforeRender(opt);\n    const leftover = this.updateView(view, flag, opt);\n    if (shouldNotify) {\n      const stats = {\n        updated: 1,\n        priority: view.UPDATE_PRIORITY\n      };\n      this.notifyAfterRender(stats, opt);\n    }\n    return leftover;\n  },\n  updateView: function (view, flag, opt) {\n    if (!view) return 0;\n    const {\n      FLAG_REMOVE,\n      FLAG_INSERT,\n      FLAG_INIT,\n      model\n    } = view;\n    if (view instanceof CellView) {\n      if (flag & FLAG_REMOVE) {\n        this.removeView(model);\n        return 0;\n      }\n      if (flag & FLAG_INSERT) {\n        const isInitialInsert = !!(flag & FLAG_INIT);\n        if (isInitialInsert) {\n          flag ^= FLAG_INIT;\n        }\n        this.insertView(view, isInitialInsert);\n        flag ^= FLAG_INSERT;\n      }\n    }\n    if (!flag) return 0;\n    return view.confirmUpdate(flag, opt || {});\n  },\n  requireView: function (model, opt) {\n    var view = this.findViewByModel(model);\n    if (!view) return null;\n    this.dumpView(view, opt);\n    return view;\n  },\n  registerUnmountedView: function (view) {\n    var cid = view.cid;\n    var updates = this._updates;\n    if (cid in updates.unmounted) return 0;\n    var flag = updates.unmounted[cid] |= view.FLAG_INSERT;\n    updates.unmountedCids.push(cid);\n    delete updates.mounted[cid];\n    return flag;\n  },\n  registerMountedView: function (view) {\n    var cid = view.cid;\n    var updates = this._updates;\n    if (cid in updates.mounted) return 0;\n    updates.mounted[cid] = true;\n    updates.mountedCids.push(cid);\n    var flag = updates.unmounted[cid] || 0;\n    delete updates.unmounted[cid];\n    return flag;\n  },\n  isViewMounted: function (view) {\n    if (!view) return false;\n    var cid = view.cid;\n    var updates = this._updates;\n    return cid in updates.mounted;\n  },\n  dumpViews: function (opt) {\n    var passingOpt = defaults({}, opt, {\n      viewport: null\n    });\n    this.checkViewport(passingOpt);\n    this.updateViews(passingOpt);\n  },\n  // Synchronous views update\n  updateViews: function (opt) {\n    this.notifyBeforeRender(opt);\n    let batchStats;\n    let updateCount = 0;\n    let batchCount = 0;\n    let priority = MIN_PRIORITY;\n    do {\n      batchCount++;\n      batchStats = this.updateViewsBatch(opt);\n      updateCount += batchStats.updated;\n      priority = Math.min(batchStats.priority, priority);\n    } while (!batchStats.empty);\n    const stats = {\n      updated: updateCount,\n      batches: batchCount,\n      priority\n    };\n    this.notifyAfterRender(stats, opt);\n    return stats;\n  },\n  hasScheduledUpdates: function () {\n    const priorities = this._updates.priorities;\n    const priorityIndexes = Object.keys(priorities); // convert priorities to a dense array\n    let i = priorityIndexes.length;\n    while (i > 0 && i--) {\n      // a faster way how to check if an object is empty\n      for (let _key in priorities[priorityIndexes[i]]) return true;\n    }\n    return false;\n  },\n  updateViewsAsync: function (opt, data) {\n    opt || (opt = {});\n    data || (data = {\n      processed: 0,\n      priority: MIN_PRIORITY\n    });\n    const {\n      _updates: updates,\n      options\n    } = this;\n    const id = updates.id;\n    if (id) {\n      cancelFrame(id);\n      if (data.processed === 0 && this.hasScheduledUpdates()) {\n        this.notifyBeforeRender(opt);\n      }\n      const stats = this.updateViewsBatch(opt);\n      const passingOpt = defaults({}, opt, {\n        mountBatchSize: MOUNT_BATCH_SIZE - stats.mounted,\n        unmountBatchSize: MOUNT_BATCH_SIZE - stats.unmounted\n      });\n      const checkStats = this.checkViewport(passingOpt);\n      const unmountCount = checkStats.unmounted;\n      const mountCount = checkStats.mounted;\n      let processed = data.processed;\n      const total = updates.count;\n      if (stats.updated > 0) {\n        // Some updates have been just processed\n        processed += stats.updated + stats.unmounted;\n        stats.processed = processed;\n        data.priority = Math.min(stats.priority, data.priority);\n        if (stats.empty && mountCount === 0) {\n          stats.unmounted += unmountCount;\n          stats.mounted += mountCount;\n          stats.priority = data.priority;\n          this.notifyAfterRender(stats, opt);\n          data.processed = 0;\n          data.priority = MIN_PRIORITY;\n          updates.count = 0;\n        } else {\n          data.processed = processed;\n        }\n      } else {\n        if (!updates.idle) {\n          if (options.autoFreeze) {\n            this.freeze();\n            updates.idle = true;\n            this.trigger('render:idle', opt);\n          }\n        }\n      }\n      // Progress callback\n      const progressFn = opt.progress;\n      if (total && typeof progressFn === 'function') {\n        progressFn.call(this, stats.empty, processed, total, stats, this);\n      }\n      // The current frame could have been canceled in a callback\n      if (updates.id !== id) return;\n    }\n    if (updates.disabled) {\n      throw new Error('dia.Paper: can not unfreeze the paper after it was removed');\n    }\n    updates.id = nextFrame(this.updateViewsAsync, this, opt, data);\n  },\n  notifyBeforeRender: function (opt = {}) {\n    let beforeFn = opt.beforeRender;\n    if (typeof beforeFn !== 'function') {\n      beforeFn = this.options.beforeRender;\n      if (typeof beforeFn !== 'function') return;\n    }\n    beforeFn.call(this, opt, this);\n  },\n  notifyAfterRender: function (stats, opt = {}) {\n    let afterFn = opt.afterRender;\n    if (typeof afterFn !== 'function') {\n      afterFn = this.options.afterRender;\n    }\n    if (typeof afterFn === 'function') {\n      afterFn.call(this, stats, opt, this);\n    }\n    this.trigger('render:done', stats, opt);\n  },\n  updateViewsBatch: function (opt) {\n    opt || (opt = {});\n    var batchSize = opt.batchSize || UPDATE_BATCH_SIZE;\n    var updates = this._updates;\n    var updateCount = 0;\n    var postponeCount = 0;\n    var unmountCount = 0;\n    var mountCount = 0;\n    var maxPriority = MIN_PRIORITY;\n    var empty = true;\n    var options = this.options;\n    var priorities = updates.priorities;\n    var viewportFn = 'viewport' in opt ? opt.viewport : options.viewport;\n    if (typeof viewportFn !== 'function') viewportFn = null;\n    var postponeViewFn = options.onViewPostponed;\n    if (typeof postponeViewFn !== 'function') postponeViewFn = null;\n    var priorityIndexes = Object.keys(priorities); // convert priorities to a dense array\n    main: for (var i = 0, n = priorityIndexes.length; i < n; i++) {\n      var priority = +priorityIndexes[i];\n      var priorityUpdates = priorities[priority];\n      for (var cid in priorityUpdates) {\n        if (updateCount >= batchSize) {\n          empty = false;\n          break main;\n        }\n        var view = views[cid];\n        if (!view) {\n          // This should not occur\n          delete priorityUpdates[cid];\n          continue;\n        }\n        var currentFlag = priorityUpdates[cid];\n        if ((currentFlag & view.FLAG_REMOVE) === 0) {\n          // We should never check a view for viewport if we are about to remove the view\n          var isDetached = cid in updates.unmounted;\n          if (view.DETACHABLE && viewportFn && !viewportFn.call(this, view, !isDetached, this)) {\n            // Unmount View\n            if (!isDetached) {\n              this.registerUnmountedView(view);\n              this.detachView(view);\n            }\n            updates.unmounted[cid] |= currentFlag;\n            delete priorityUpdates[cid];\n            unmountCount++;\n            continue;\n          }\n          // Mount View\n          if (isDetached) {\n            currentFlag |= view.FLAG_INSERT;\n            mountCount++;\n          }\n          currentFlag |= this.registerMountedView(view);\n        }\n        var leftoverFlag = this.updateView(view, currentFlag, opt);\n        if (leftoverFlag > 0) {\n          // View update has not finished completely\n          priorityUpdates[cid] = leftoverFlag;\n          if (!postponeViewFn || !postponeViewFn.call(this, view, leftoverFlag, this) || priorityUpdates[cid]) {\n            postponeCount++;\n            empty = false;\n            continue;\n          }\n        }\n        if (maxPriority > priority) maxPriority = priority;\n        updateCount++;\n        delete priorityUpdates[cid];\n      }\n    }\n    return {\n      priority: maxPriority,\n      updated: updateCount,\n      postponed: postponeCount,\n      unmounted: unmountCount,\n      mounted: mountCount,\n      empty: empty\n    };\n  },\n  getUnmountedViews: function () {\n    const updates = this._updates;\n    const unmountedCids = Object.keys(updates.unmounted);\n    const n = unmountedCids.length;\n    const unmountedViews = new Array(n);\n    for (var i = 0; i < n; i++) {\n      unmountedViews[i] = views[unmountedCids[i]];\n    }\n    return unmountedViews;\n  },\n  getMountedViews: function () {\n    const updates = this._updates;\n    const mountedCids = Object.keys(updates.mounted);\n    const n = mountedCids.length;\n    const mountedViews = new Array(n);\n    for (var i = 0; i < n; i++) {\n      mountedViews[i] = views[mountedCids[i]];\n    }\n    return mountedViews;\n  },\n  checkUnmountedViews: function (viewportFn, opt) {\n    opt || (opt = {});\n    var mountCount = 0;\n    if (typeof viewportFn !== 'function') viewportFn = null;\n    var batchSize = 'mountBatchSize' in opt ? opt.mountBatchSize : Infinity;\n    var updates = this._updates;\n    var unmountedCids = updates.unmountedCids;\n    var unmounted = updates.unmounted;\n    for (var i = 0, n = Math.min(unmountedCids.length, batchSize); i < n; i++) {\n      var cid = unmountedCids[i];\n      if (!(cid in unmounted)) continue;\n      var view = views[cid];\n      if (!view) continue;\n      if (view.DETACHABLE && viewportFn && !viewportFn.call(this, view, false, this)) {\n        // Push at the end of all unmounted ids, so this can be check later again\n        unmountedCids.push(cid);\n        continue;\n      }\n      mountCount++;\n      var flag = this.registerMountedView(view);\n      if (flag) this.scheduleViewUpdate(view, flag, view.UPDATE_PRIORITY, {\n        mounting: true\n      });\n    }\n    // Get rid of views, that have been mounted\n    unmountedCids.splice(0, i);\n    return mountCount;\n  },\n  checkMountedViews: function (viewportFn, opt) {\n    opt || (opt = {});\n    var unmountCount = 0;\n    if (typeof viewportFn !== 'function') return unmountCount;\n    var batchSize = 'unmountBatchSize' in opt ? opt.unmountBatchSize : Infinity;\n    var updates = this._updates;\n    var mountedCids = updates.mountedCids;\n    var mounted = updates.mounted;\n    for (var i = 0, n = Math.min(mountedCids.length, batchSize); i < n; i++) {\n      var cid = mountedCids[i];\n      if (!(cid in mounted)) continue;\n      var view = views[cid];\n      if (!view) continue;\n      if (!view.DETACHABLE || viewportFn.call(this, view, true, this)) {\n        // Push at the end of all mounted ids, so this can be check later again\n        mountedCids.push(cid);\n        continue;\n      }\n      unmountCount++;\n      var flag = this.registerUnmountedView(view);\n      if (flag) this.detachView(view);\n    }\n    // Get rid of views, that have been unmounted\n    mountedCids.splice(0, i);\n    return unmountCount;\n  },\n  checkViewVisibility: function (cellView, opt = {}) {\n    let viewportFn = 'viewport' in opt ? opt.viewport : this.options.viewport;\n    if (typeof viewportFn !== 'function') viewportFn = null;\n    const updates = this._updates;\n    const {\n      mounted,\n      unmounted\n    } = updates;\n    const visible = !cellView.DETACHABLE || !viewportFn || viewportFn.call(this, cellView, false, this);\n    let isUnmounted = false;\n    let isMounted = false;\n    if (cellView.cid in mounted && !visible) {\n      const flag = this.registerUnmountedView(cellView);\n      if (flag) this.detachView(cellView);\n      const i = updates.mountedCids.indexOf(cellView.cid);\n      updates.mountedCids.splice(i, 1);\n      isUnmounted = true;\n    }\n    if (!isUnmounted && cellView.cid in unmounted && visible) {\n      const i = updates.unmountedCids.indexOf(cellView.cid);\n      updates.unmountedCids.splice(i, 1);\n      var flag = this.registerMountedView(cellView);\n      if (flag) this.scheduleViewUpdate(cellView, flag, cellView.UPDATE_PRIORITY, {\n        mounting: true\n      });\n      isMounted = true;\n    }\n    return {\n      mounted: isMounted ? 1 : 0,\n      unmounted: isUnmounted ? 1 : 0\n    };\n  },\n  checkViewport: function (opt) {\n    var passingOpt = defaults({}, opt, {\n      mountBatchSize: Infinity,\n      unmountBatchSize: Infinity\n    });\n    var viewportFn = 'viewport' in passingOpt ? passingOpt.viewport : this.options.viewport;\n    var unmountedCount = this.checkMountedViews(viewportFn, passingOpt);\n    if (unmountedCount > 0) {\n      // Do not check views, that have been just unmounted and pushed at the end of the cids array\n      var unmountedCids = this._updates.unmountedCids;\n      passingOpt.mountBatchSize = Math.min(unmountedCids.length - unmountedCount, passingOpt.mountBatchSize);\n    }\n    var mountedCount = this.checkUnmountedViews(viewportFn, passingOpt);\n    return {\n      mounted: mountedCount,\n      unmounted: unmountedCount\n    };\n  },\n  freeze: function (opt) {\n    opt || (opt = {});\n    var updates = this._updates;\n    var key = opt.key;\n    var isFrozen = this.options.frozen;\n    var freezeKey = updates.freezeKey;\n    if (key && key !== freezeKey) {\n      // key passed, but the paper is already freezed with another key\n      if (isFrozen && freezeKey) return;\n      updates.freezeKey = key;\n      updates.keyFrozen = isFrozen;\n    }\n    this.options.frozen = true;\n    var id = updates.id;\n    updates.id = null;\n    if (this.isAsync() && id) cancelFrame(id);\n  },\n  unfreeze: function (opt) {\n    opt || (opt = {});\n    var updates = this._updates;\n    var key = opt.key;\n    var freezeKey = updates.freezeKey;\n    // key passed, but the paper is already freezed with another key\n    if (key && freezeKey && key !== freezeKey) return;\n    updates.freezeKey = null;\n    // key passed, but the paper is already freezed\n    if (key && key === freezeKey && updates.keyFrozen) return;\n    if (this.isAsync()) {\n      this.freeze();\n      this.updateViewsAsync(opt);\n    } else {\n      this.updateViews(opt);\n    }\n    this.options.frozen = updates.keyFrozen = false;\n    if (updates.sort) {\n      this.sortViews();\n      updates.sort = false;\n    }\n  },\n  isAsync: function () {\n    return !!this.options.async;\n  },\n  isFrozen: function () {\n    return !!this.options.frozen;\n  },\n  isExactSorting: function () {\n    return this.options.sorting === sortingTypes.EXACT;\n  },\n  onRemove: function () {\n    this.freeze();\n    this._updates.disabled = true;\n    //clean up all DOM elements/views to prevent memory leaks\n    this.removeLayers();\n    this.removeViews();\n  },\n  getComputedSize: function () {\n    var options = this.options;\n    var w = options.width;\n    var h = options.height;\n    if (!isNumber(w)) w = this.el.clientWidth;\n    if (!isNumber(h)) h = this.el.clientHeight;\n    return {\n      width: w,\n      height: h\n    };\n  },\n  setDimensions: function (width, height) {\n    const {\n      options\n    } = this;\n    const {\n      width: currentWidth,\n      height: currentHeight\n    } = options;\n    let w = width === undefined ? currentWidth : width;\n    let h = height === undefined ? currentHeight : height;\n    if (currentWidth === w && currentHeight === h) return;\n    options.width = w;\n    options.height = h;\n    this._setDimensions();\n    const computedSize = this.getComputedSize();\n    this.trigger('resize', computedSize.width, computedSize.height);\n  },\n  _setDimensions: function () {\n    const {\n      options\n    } = this;\n    let w = options.width;\n    let h = options.height;\n    if (isNumber(w)) w = Math.round(w);\n    if (isNumber(h)) h = Math.round(h);\n    this.$el.css({\n      width: w === null ? '' : w,\n      height: h === null ? '' : h\n    });\n  },\n  setOrigin: function (ox, oy) {\n    return this.translate(ox || 0, oy || 0);\n  },\n  // Expand/shrink the paper to fit the content.\n  // Alternatively signature function(opt)\n  fitToContent: function (gridWidth, gridHeight, padding, opt) {\n    if (isObject(gridWidth)) {\n      // first parameter is an option object\n      opt = gridWidth;\n    } else {\n      // Support for a deprecated signature\n      opt = assign({\n        gridWidth,\n        gridHeight,\n        padding\n      }, opt);\n    }\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.getFitToContentArea(opt);\n    const {\n      sx,\n      sy\n    } = this.scale();\n    this.setOrigin(-x * sx, -y * sy);\n    this.setDimensions(width * sx, height * sy);\n    return new Rect(x, y, width, height);\n  },\n  getFitToContentArea: function (opt = {}) {\n    // Calculate the paper size to accommodate all the graph's elements.\n\n    const gridWidth = opt.gridWidth || 1;\n    const gridHeight = opt.gridHeight || 1;\n    const padding = normalizeSides(opt.padding || 0);\n    const minWidth = Math.max(opt.minWidth || 0, gridWidth);\n    const minHeight = Math.max(opt.minHeight || 0, gridHeight);\n    const maxWidth = opt.maxWidth || Number.MAX_VALUE;\n    const maxHeight = opt.maxHeight || Number.MAX_VALUE;\n    const newOrigin = opt.allowNewOrigin;\n    const area = 'contentArea' in opt ? new Rect(opt.contentArea) : this.getContentArea(opt);\n    const {\n      sx,\n      sy\n    } = this.scale();\n    area.x *= sx;\n    area.y *= sy;\n    area.width *= sx;\n    area.height *= sy;\n    let calcWidth = Math.ceil((area.width + area.x) / gridWidth);\n    let calcHeight = Math.ceil((area.height + area.y) / gridHeight);\n    if (!opt.allowNegativeBottomRight) {\n      calcWidth = Math.max(calcWidth, 1);\n      calcHeight = Math.max(calcHeight, 1);\n    }\n    calcWidth *= gridWidth;\n    calcHeight *= gridHeight;\n    let tx = 0;\n    if (newOrigin === 'negative' && area.x < 0 || newOrigin === 'positive' && area.x >= 0 || newOrigin === 'any') {\n      tx = Math.ceil(-area.x / gridWidth) * gridWidth;\n      tx += padding.left;\n      calcWidth += tx;\n    }\n    let ty = 0;\n    if (newOrigin === 'negative' && area.y < 0 || newOrigin === 'positive' && area.y >= 0 || newOrigin === 'any') {\n      ty = Math.ceil(-area.y / gridHeight) * gridHeight;\n      ty += padding.top;\n      calcHeight += ty;\n    }\n    calcWidth += padding.right;\n    calcHeight += padding.bottom;\n\n    // Make sure the resulting width and height are greater than minimum.\n    calcWidth = Math.max(calcWidth, minWidth);\n    calcHeight = Math.max(calcHeight, minHeight);\n\n    // Make sure the resulting width and height are lesser than maximum.\n    calcWidth = Math.min(calcWidth, maxWidth);\n    calcHeight = Math.min(calcHeight, maxHeight);\n    return new Rect(-tx / sx, -ty / sy, calcWidth / sx, calcHeight / sy);\n  },\n  transformToFitContent: function (opt) {\n    opt || (opt = {});\n    let contentBBox, contentLocalOrigin;\n    if ('contentArea' in opt) {\n      const contentArea = opt.contentArea;\n      contentBBox = this.localToPaperRect(contentArea);\n      contentLocalOrigin = new Point(contentArea);\n    } else {\n      contentBBox = this.getContentBBox(opt);\n      contentLocalOrigin = this.paperToLocalPoint(contentBBox);\n    }\n    if (!contentBBox.width || !contentBBox.height) return;\n    defaults(opt, {\n      padding: 0,\n      preserveAspectRatio: true,\n      scaleGrid: null,\n      minScale: 0,\n      maxScale: Number.MAX_VALUE,\n      verticalAlign: 'top',\n      horizontalAlign: 'left'\n      //minScaleX\n      //minScaleY\n      //maxScaleX\n      //maxScaleY\n      //fittingBBox\n    });\n    const padding = normalizeSides(opt.padding);\n    const minScaleX = opt.minScaleX || opt.minScale;\n    const maxScaleX = opt.maxScaleX || opt.maxScale;\n    const minScaleY = opt.minScaleY || opt.minScale;\n    const maxScaleY = opt.maxScaleY || opt.maxScale;\n    let fittingBBox;\n    if (opt.fittingBBox) {\n      fittingBBox = opt.fittingBBox;\n    } else {\n      const currentTranslate = this.translate();\n      const computedSize = this.getComputedSize();\n      fittingBBox = {\n        x: currentTranslate.tx,\n        y: currentTranslate.ty,\n        width: computedSize.width,\n        height: computedSize.height\n      };\n    }\n    fittingBBox = new Rect(fittingBBox).moveAndExpand({\n      x: padding.left,\n      y: padding.top,\n      width: -padding.left - padding.right,\n      height: -padding.top - padding.bottom\n    });\n    const currentScale = this.scale();\n    let newSx = fittingBBox.width / contentBBox.width * currentScale.sx;\n    let newSy = fittingBBox.height / contentBBox.height * currentScale.sy;\n    if (opt.preserveAspectRatio) {\n      newSx = newSy = Math.min(newSx, newSy);\n    }\n\n    // snap scale to a grid\n    if (opt.scaleGrid) {\n      const gridSize = opt.scaleGrid;\n      newSx = gridSize * Math.floor(newSx / gridSize);\n      newSy = gridSize * Math.floor(newSy / gridSize);\n    }\n\n    // scale min/max boundaries\n    newSx = Math.min(maxScaleX, Math.max(minScaleX, newSx));\n    newSy = Math.min(maxScaleY, Math.max(minScaleY, newSy));\n    const scaleDiff = {\n      x: newSx / currentScale.sx,\n      y: newSy / currentScale.sy\n    };\n    const origin = this.options.origin;\n    let newOx = fittingBBox.x - contentLocalOrigin.x * newSx - origin.x;\n    let newOy = fittingBBox.y - contentLocalOrigin.y * newSy - origin.y;\n    switch (opt.verticalAlign) {\n      case 'middle':\n        newOy = newOy + (fittingBBox.height - contentBBox.height * scaleDiff.y) / 2;\n        break;\n      case 'bottom':\n        newOy = newOy + (fittingBBox.height - contentBBox.height * scaleDiff.y);\n        break;\n      case 'top':\n      default:\n        break;\n    }\n    switch (opt.horizontalAlign) {\n      case 'middle':\n        newOx = newOx + (fittingBBox.width - contentBBox.width * scaleDiff.x) / 2;\n        break;\n      case 'right':\n        newOx = newOx + (fittingBBox.width - contentBBox.width * scaleDiff.x);\n        break;\n      case 'left':\n      default:\n        break;\n    }\n    this.scale(newSx, newSy);\n    this.translate(newOx, newOy);\n  },\n  scaleContentToFit: function (opt) {\n    this.transformToFitContent(opt);\n  },\n  // Return the dimensions of the content area in local units (without transformations).\n  getContentArea: function (opt) {\n    if (opt && opt.useModelGeometry) {\n      return this.model.getBBox() || new Rect();\n    }\n    return V(this.cells).getBBox();\n  },\n  // Return the dimensions of the content bbox in the paper units (as it appears on screen).\n  getContentBBox: function (opt) {\n    return this.localToPaperRect(this.getContentArea(opt));\n  },\n  // Returns a geometry rectangle representing the entire\n  // paper area (coordinates from the left paper border to the right one\n  // and the top border to the bottom one).\n  getArea: function () {\n    return this.paperToLocalRect(this.getComputedSize());\n  },\n  getRestrictedArea: function (...args) {\n    const {\n      restrictTranslate\n    } = this.options;\n    let restrictedArea;\n    if (isFunction(restrictTranslate)) {\n      // A method returning a bounding box\n      restrictedArea = restrictTranslate.apply(this, args);\n    } else if (restrictTranslate === true) {\n      // The paper area\n      restrictedArea = this.getArea();\n    } else if (!restrictTranslate) {\n      // falsy value\n      restrictedArea = null;\n    } else {\n      // any other value\n      restrictedArea = new Rect(restrictTranslate);\n    }\n    return restrictedArea;\n  },\n  createViewForModel: function (cell) {\n    const {\n      options\n    } = this;\n    // A class taken from the paper options.\n    var optionalViewClass;\n\n    // A default basic class (either dia.ElementView or dia.LinkView)\n    var defaultViewClass;\n\n    // A special class defined for this model in the corresponding namespace.\n    // e.g. joint.shapes.basic.Rect searches for joint.shapes.basic.RectView\n    var namespace = options.cellViewNamespace;\n    var type = cell.get('type') + 'View';\n    var namespaceViewClass = getByPath(namespace, type, '.');\n    if (cell.isLink()) {\n      optionalViewClass = options.linkView;\n      defaultViewClass = LinkView;\n    } else {\n      optionalViewClass = options.elementView;\n      defaultViewClass = ElementView;\n    }\n\n    // a) the paper options view is a class (deprecated)\n    //  1. search the namespace for a view\n    //  2. if no view was found, use view from the paper options\n    // b) the paper options view is a function\n    //  1. call the function from the paper options\n    //  2. if no view was return, search the namespace for a view\n    //  3. if no view was found, use the default\n    var ViewClass = optionalViewClass.prototype instanceof Backbone.View ? namespaceViewClass || optionalViewClass : optionalViewClass.call(this, cell) || namespaceViewClass || defaultViewClass;\n    return new ViewClass({\n      model: cell,\n      interactive: options.interactive,\n      labelsLayer: options.labelsLayer === true ? LayersNames.LABELS : options.labelsLayer\n    });\n  },\n  removeView: function (cell) {\n    const {\n      id\n    } = cell;\n    const {\n      _views,\n      _updates\n    } = this;\n    const view = _views[id];\n    if (view) {\n      var {\n        cid\n      } = view;\n      const {\n        mounted,\n        unmounted\n      } = _updates;\n      view.remove();\n      delete _views[id];\n      delete mounted[cid];\n      delete unmounted[cid];\n    }\n    return view;\n  },\n  renderView: function (cell, opt) {\n    const {\n      id\n    } = cell;\n    const views = this._views;\n    let view, flag;\n    let create = true;\n    if (id in views) {\n      view = views[id];\n      if (view.model === cell) {\n        flag = view.FLAG_INSERT;\n        create = false;\n      } else {\n        // The view for this `id` already exist.\n        // The cell is a new instance of the model with identical id\n        // We simply remove the existing view and create a new one\n        this.removeView(cell);\n      }\n    }\n    if (create) {\n      view = views[id] = this.createViewForModel(cell);\n      view.paper = this;\n      flag = this.registerUnmountedView(view) | this.FLAG_INIT | view.getFlag(result(view, 'initFlag'));\n    }\n    this.requestViewUpdate(view, flag, view.UPDATE_PRIORITY, opt);\n    return view;\n  },\n  onImageDragStart: function () {\n    // This is the only way to prevent image dragging in Firefox that works.\n    // Setting -moz-user-select: none, draggable=\"false\" attribute or user-drag: none didn't help.\n\n    return false;\n  },\n  resetViews: function (cells, opt) {\n    opt || (opt = {});\n    cells || (cells = []);\n    this._resetUpdates();\n    // clearing views removes any event listeners\n    this.removeViews();\n    // Allows to unfreeze normally while in the idle state using autoFreeze option\n    const key = this.options.autoFreeze ? null : 'reset';\n    this.freeze({\n      key\n    });\n    for (var i = 0, n = cells.length; i < n; i++) {\n      this.renderView(cells[i], opt);\n    }\n    this.unfreeze({\n      key\n    });\n    this.sortViews();\n  },\n  removeViews: function () {\n    invoke(this._views, 'remove');\n    this._views = {};\n  },\n  sortViews: function () {\n    if (!this.isExactSorting()) {\n      // noop\n      return;\n    }\n    if (this.isFrozen()) {\n      // sort views once unfrozen\n      this._updates.sort = true;\n      return;\n    }\n    this.sortViewsExact();\n  },\n  sortViewsExact: function () {\n    // Run insertion sort algorithm in order to efficiently sort DOM elements according to their\n    // associated model `z` attribute.\n\n    var $cells = $(this.cells).children('[model-id]');\n    var cells = this.model.get('cells');\n    sortElements($cells, function (a, b) {\n      var cellA = cells.get(a.getAttribute('model-id'));\n      var cellB = cells.get(b.getAttribute('model-id'));\n      var zA = cellA.attributes.z || 0;\n      var zB = cellB.attributes.z || 0;\n      return zA === zB ? 0 : zA < zB ? -1 : 1;\n    });\n  },\n  insertView: function (view, isInitialInsert) {\n    const layerView = this.getLayerView(LayersNames.CELLS);\n    const {\n      el,\n      model\n    } = view;\n    switch (this.options.sorting) {\n      case sortingTypes.APPROX:\n        layerView.insertSortedNode(el, model.get('z'));\n        break;\n      case sortingTypes.EXACT:\n      default:\n        layerView.insertNode(el);\n        break;\n    }\n    view.onMount(isInitialInsert);\n  },\n  detachView(view) {\n    view.unmount();\n    view.onDetach();\n  },\n  scale: function (sx, sy, ox, oy) {\n    // getter\n    if (sx === undefined) {\n      return V.matrixToScale(this.matrix());\n    }\n\n    // setter\n    if (sy === undefined) {\n      sy = sx;\n    }\n    if (ox === undefined) {\n      ox = 0;\n      oy = 0;\n    }\n    var translate = this.translate();\n    if (ox || oy || translate.tx || translate.ty) {\n      var newTx = translate.tx - ox * (sx - 1);\n      var newTy = translate.ty - oy * (sy - 1);\n      this.translate(newTx, newTy);\n    }\n    sx = Math.max(sx || 0, this.MIN_SCALE);\n    sy = Math.max(sy || 0, this.MIN_SCALE);\n    var ctm = this.matrix();\n    ctm.a = sx;\n    ctm.d = sy;\n    this.matrix(ctm);\n    this.trigger('scale', sx, sy, ox, oy);\n    return this;\n  },\n  // Experimental - do not use in production.\n  rotate: function (angle, cx, cy) {\n    // getter\n    if (angle === undefined) {\n      return V.matrixToRotate(this.matrix());\n    }\n\n    // setter\n\n    // If the origin is not set explicitely, rotate around the center. Note that\n    // we must use the plain bounding box (`this.el.getBBox()` instead of the one that gives us\n    // the real bounding box (`bbox()`) including transformations).\n    if (cx === undefined) {\n      var bbox = this.cells.getBBox();\n      cx = bbox.width / 2;\n      cy = bbox.height / 2;\n    }\n    var ctm = this.matrix().translate(cx, cy).rotate(angle).translate(-cx, -cy);\n    this.matrix(ctm);\n    return this;\n  },\n  translate: function (tx, ty) {\n    // getter\n    if (tx === undefined) {\n      return V.matrixToTranslate(this.matrix());\n    }\n    const {\n      options\n    } = this;\n    const {\n      origin,\n      drawGrid\n    } = options;\n\n    // setter\n    tx || (tx = 0);\n    ty || (ty = 0);\n    const ctm = this.matrix();\n    if (ctm.e === tx && ctm.f === ty) return this;\n    ctm.e = tx;\n    ctm.f = ty;\n    this.matrix(ctm);\n    const {\n      tx: ox,\n      ty: oy\n    } = this.translate();\n    origin.x = ox;\n    origin.y = oy;\n    this.trigger('translate', ox, oy);\n    if (drawGrid) {\n      this.drawGrid();\n    }\n    return this;\n  },\n  // Find the first view climbing up the DOM tree starting at element `el`. Note that `el` can also\n  // be a selector or a jQuery object.\n  findView: function ($el) {\n    var el = isString($el) ? this.cells.querySelector($el) : $el instanceof $ ? $el[0] : $el;\n    var id = this.findAttribute('model-id', el);\n    if (id) return this._views[id];\n    return undefined;\n  },\n  // Find a view for a model `cell`. `cell` can also be a string or number representing a model `id`.\n  findViewByModel: function (cell) {\n    var id = isString(cell) || isNumber(cell) ? cell : cell && cell.id;\n    return this._views[id];\n  },\n  // Find all views at given point\n  findViewsFromPoint: function (p) {\n    p = new Point(p);\n    var views = this.model.getElements().map(this.findViewByModel, this);\n    return views.filter(function (view) {\n      return view && view.vel.getBBox({\n        target: this.cells\n      }).containsPoint(p);\n    }, this);\n  },\n  // Find all views in given area\n  findViewsInArea: function (rect, opt) {\n    opt = defaults(opt || {}, {\n      strict: false\n    });\n    rect = new Rect(rect);\n    var views = this.model.getElements().map(this.findViewByModel, this);\n    var method = opt.strict ? 'containsRect' : 'intersect';\n    return views.filter(function (view) {\n      return view && rect[method](view.vel.getBBox({\n        target: this.cells\n      }));\n    }, this);\n  },\n  removeTools: function () {\n    this.dispatchToolsEvent('remove');\n    return this;\n  },\n  hideTools: function () {\n    this.dispatchToolsEvent('hide');\n    return this;\n  },\n  showTools: function () {\n    this.dispatchToolsEvent('show');\n    return this;\n  },\n  dispatchToolsEvent: function (event, ...args) {\n    if (typeof event !== 'string') return;\n    this.trigger('tools:event', event, ...args);\n  },\n  getModelById: function (id) {\n    return this.model.getCell(id);\n  },\n  snapToGrid: function (x, y) {\n    // Convert global coordinates to the local ones of the `viewport`. Otherwise,\n    // improper transformation would be applied when the viewport gets transformed (scaled/rotated).\n    return this.clientToLocalPoint(x, y).snapToGrid(this.options.gridSize);\n  },\n  localToPaperPoint: function (x, y) {\n    // allow `x` to be a point and `y` undefined\n    var localPoint = new Point(x, y);\n    var paperPoint = V.transformPoint(localPoint, this.matrix());\n    return paperPoint;\n  },\n  localToPaperRect: function (x, y, width, height) {\n    // allow `x` to be a rectangle and rest arguments undefined\n    var localRect = new Rect(x, y, width, height);\n    var paperRect = V.transformRect(localRect, this.matrix());\n    return paperRect;\n  },\n  paperToLocalPoint: function (x, y) {\n    // allow `x` to be a point and `y` undefined\n    var paperPoint = new Point(x, y);\n    var localPoint = V.transformPoint(paperPoint, this.matrix().inverse());\n    return localPoint;\n  },\n  paperToLocalRect: function (x, y, width, height) {\n    // allow `x` to be a rectangle and rest arguments undefined\n    var paperRect = new Rect(x, y, width, height);\n    var localRect = V.transformRect(paperRect, this.matrix().inverse());\n    return localRect;\n  },\n  localToClientPoint: function (x, y) {\n    // allow `x` to be a point and `y` undefined\n    var localPoint = new Point(x, y);\n    var clientPoint = V.transformPoint(localPoint, this.clientMatrix());\n    return clientPoint;\n  },\n  localToClientRect: function (x, y, width, height) {\n    // allow `x` to be a point and `y` undefined\n    var localRect = new Rect(x, y, width, height);\n    var clientRect = V.transformRect(localRect, this.clientMatrix());\n    return clientRect;\n  },\n  // Transform client coordinates to the paper local coordinates.\n  // Useful when you have a mouse event object and you'd like to get coordinates\n  // inside the paper that correspond to `evt.clientX` and `evt.clientY` point.\n  // Example: var localPoint = paper.clientToLocalPoint({ x: evt.clientX, y: evt.clientY });\n  clientToLocalPoint: function (x, y) {\n    // allow `x` to be a point and `y` undefined\n    var clientPoint = new Point(x, y);\n    var localPoint = V.transformPoint(clientPoint, this.clientMatrix().inverse());\n    return localPoint;\n  },\n  clientToLocalRect: function (x, y, width, height) {\n    // allow `x` to be a point and `y` undefined\n    var clientRect = new Rect(x, y, width, height);\n    var localRect = V.transformRect(clientRect, this.clientMatrix().inverse());\n    return localRect;\n  },\n  localToPagePoint: function (x, y) {\n    return this.localToPaperPoint(x, y).offset(this.pageOffset());\n  },\n  localToPageRect: function (x, y, width, height) {\n    return this.localToPaperRect(x, y, width, height).offset(this.pageOffset());\n  },\n  pageToLocalPoint: function (x, y) {\n    var pagePoint = new Point(x, y);\n    var paperPoint = pagePoint.difference(this.pageOffset());\n    return this.paperToLocalPoint(paperPoint);\n  },\n  pageToLocalRect: function (x, y, width, height) {\n    var pageOffset = this.pageOffset();\n    var paperRect = new Rect(x, y, width, height);\n    paperRect.x -= pageOffset.x;\n    paperRect.y -= pageOffset.y;\n    return this.paperToLocalRect(paperRect);\n  },\n  clientOffset: function () {\n    var clientRect = this.svg.getBoundingClientRect();\n    return new Point(clientRect.left, clientRect.top);\n  },\n  pageOffset: function () {\n    return this.clientOffset().offset(window.scrollX, window.scrollY);\n  },\n  linkAllowed: function (linkView) {\n    if (!(linkView instanceof LinkView)) {\n      throw new Error('Must provide a linkView.');\n    }\n    var link = linkView.model;\n    var paperOptions = this.options;\n    var graph = this.model;\n    var ns = graph.constructor.validations;\n    if (!paperOptions.multiLinks) {\n      if (!ns.multiLinks.call(this, graph, link)) return false;\n    }\n    if (!paperOptions.linkPinning) {\n      // Link pinning is not allowed and the link is not connected to the target.\n      if (!ns.linkPinning.call(this, graph, link)) return false;\n    }\n    if (typeof paperOptions.allowLink === 'function') {\n      if (!paperOptions.allowLink.call(this, linkView, this)) return false;\n    }\n    return true;\n  },\n  getDefaultLink: function (cellView, magnet) {\n    return isFunction(this.options.defaultLink)\n    // default link is a function producing link model\n    ? this.options.defaultLink.call(this, cellView, magnet)\n    // default link is the Backbone model\n    : this.options.defaultLink.clone();\n  },\n  // Cell highlighting.\n  // ------------------\n\n  resolveHighlighter: function (opt = {}) {\n    let {\n      highlighter: highlighterDef,\n      type\n    } = opt;\n    const {\n      highlighting,\n      highlighterNamespace\n    } = this.options;\n\n    /*\n        Expecting opt.highlighter to have the following structure:\n        {\n            name: 'highlighter-name',\n            options: {\n                some: 'value'\n            }\n        }\n    */\n    if (highlighterDef === undefined) {\n      // Is highlighting disabled?\n      if (!highlighting) return false;\n      // check for built-in types\n      if (type) {\n        highlighterDef = highlighting[type];\n        // Is a specific type highlight disabled?\n        if (highlighterDef === false) return false;\n      }\n      if (!highlighterDef) {\n        // Type not defined use default highlight\n        highlighterDef = highlighting['default'];\n      }\n    }\n\n    // Do nothing if opt.highlighter is falsy.\n    // This allows the case to not highlight cell(s) in certain cases.\n    // For example, if you want to NOT highlight when embedding elements\n    // or use a custom highlighter.\n    if (!highlighterDef) return false;\n\n    // Allow specifying a highlighter by name.\n    if (isString(highlighterDef)) {\n      highlighterDef = {\n        name: highlighterDef\n      };\n    }\n    const name = highlighterDef.name;\n    const highlighter = highlighterNamespace[name];\n\n    // Highlighter validation\n    if (!highlighter) {\n      throw new Error('Unknown highlighter (\"' + name + '\")');\n    }\n    if (typeof highlighter.highlight !== 'function') {\n      throw new Error('Highlighter (\"' + name + '\") is missing required highlight() method');\n    }\n    if (typeof highlighter.unhighlight !== 'function') {\n      throw new Error('Highlighter (\"' + name + '\") is missing required unhighlight() method');\n    }\n    return {\n      highlighter,\n      options: highlighterDef.options || {},\n      name\n    };\n  },\n  onCellHighlight: function (cellView, magnetEl, opt) {\n    const highlighterDescriptor = this.resolveHighlighter(opt);\n    if (!highlighterDescriptor) return;\n    const {\n      highlighter,\n      options\n    } = highlighterDescriptor;\n    highlighter.highlight(cellView, magnetEl, options);\n  },\n  onCellUnhighlight: function (cellView, magnetEl, opt) {\n    const highlighterDescriptor = this.resolveHighlighter(opt);\n    if (!highlighterDescriptor) return;\n    const {\n      highlighter,\n      options\n    } = highlighterDescriptor;\n    highlighter.unhighlight(cellView, magnetEl, options);\n  },\n  // Interaction.\n  // ------------\n\n  pointerdblclick: function (evt) {\n    evt.preventDefault();\n\n    // magnetpointerdblclick can stop propagation\n\n    evt = normalizeEvent(evt);\n    var view = this.findView(evt.target);\n    if (this.guard(evt, view)) return;\n    var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n    if (view) {\n      view.pointerdblclick(evt, localPoint.x, localPoint.y);\n    } else {\n      this.trigger('blank:pointerdblclick', evt, localPoint.x, localPoint.y);\n    }\n  },\n  pointerclick: function (evt) {\n    // magnetpointerclick can stop propagation\n\n    var data = this.eventData(evt);\n    // Trigger event only if mouse has not moved.\n    if (data.mousemoved <= this.options.clickThreshold) {\n      evt = normalizeEvent(evt);\n      var view = this.findView(evt.target);\n      if (this.guard(evt, view)) return;\n      var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n      if (view) {\n        view.pointerclick(evt, localPoint.x, localPoint.y);\n      } else {\n        this.trigger('blank:pointerclick', evt, localPoint.x, localPoint.y);\n      }\n    }\n  },\n  contextmenu: function (evt) {\n    if (this.options.preventContextMenu) evt.preventDefault();\n    if (this.contextMenuFired) {\n      this.contextMenuFired = false;\n      return;\n    }\n    evt = normalizeEvent(evt);\n    this.contextMenuTrigger(evt);\n  },\n  contextMenuTrigger: function (evt) {\n    var view = this.findView(evt.target);\n    if (this.guard(evt, view)) return;\n    var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n    if (view) {\n      view.contextmenu(evt, localPoint.x, localPoint.y);\n    } else {\n      this.trigger('blank:contextmenu', evt, localPoint.x, localPoint.y);\n    }\n  },\n  pointerdown: function (evt) {\n    evt = normalizeEvent(evt);\n    const {\n      target,\n      button\n    } = evt;\n    const view = this.findView(target);\n    const isContextMenu = button === 2;\n    if (view) {\n      if (!isContextMenu && this.guard(evt, view)) return;\n      const isTargetFormNode = this.FORM_CONTROL_TAG_NAMES.includes(target.tagName);\n      if (this.options.preventDefaultViewAction && !isTargetFormNode) {\n        // If the target is a form element, we do not want to prevent the default action.\n        // For example, we want to be able to select text in a text input or\n        // to be able to click on a checkbox.\n        evt.preventDefault();\n      }\n      if (isTargetFormNode) {\n        // If the target is a form element, we do not want to start dragging the element.\n        // For example, we want to be able to select text by dragging the mouse.\n        view.preventDefaultInteraction(evt);\n      }\n\n      // Custom event\n      const eventEvt = this.customEventTrigger(evt, view);\n      if (eventEvt) {\n        // `onevent` could have stopped propagation\n        if (eventEvt.isPropagationStopped()) return;\n        evt.data = eventEvt.data;\n      }\n\n      // Element magnet\n      const magnetNode = target.closest('[magnet]');\n      if (magnetNode && view.el !== magnetNode && view.el.contains(magnetNode)) {\n        const magnetEvt = normalizeEvent($.Event(evt.originalEvent, {\n          data: evt.data,\n          // Originally the event listener was attached to the magnet element.\n          currentTarget: magnetNode\n        }));\n        this.onmagnet(magnetEvt);\n        if (magnetEvt.isDefaultPrevented()) {\n          evt.preventDefault();\n        }\n        // `onmagnet` stops propagation when `addLinkFromMagnet` is allowed\n        if (magnetEvt.isPropagationStopped()) {\n          // `magnet:pointermove` and `magnet:pointerup` events must be fired\n          if (isContextMenu) return;\n          this.delegateDragEvents(view, magnetEvt.data);\n          return;\n        }\n        evt.data = magnetEvt.data;\n      }\n    }\n    if (isContextMenu) {\n      this.contextMenuFired = true;\n      const contextmenuEvt = $.Event(evt.originalEvent, {\n        type: 'contextmenu',\n        data: evt.data\n      });\n      this.contextMenuTrigger(contextmenuEvt);\n    } else {\n      const localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n      if (view) {\n        view.pointerdown(evt, localPoint.x, localPoint.y);\n      } else {\n        if (this.options.preventDefaultBlankAction) {\n          evt.preventDefault();\n        }\n        this.trigger('blank:pointerdown', evt, localPoint.x, localPoint.y);\n      }\n      this.delegateDragEvents(view, evt.data);\n    }\n  },\n  pointermove: function (evt) {\n    // mouse moved counter\n    var data = this.eventData(evt);\n    if (!data.mousemoved) {\n      data.mousemoved = 0;\n      // Make sure that events like `mouseenter` and `mouseleave` are\n      // not triggered while the user is dragging a cellView.\n      this.undelegateEvents();\n      // Note: the events are undelegated after the first `pointermove` event.\n      // Not on `pointerdown` to make sure that `dbltap` is recognized.\n    }\n    var mousemoved = ++data.mousemoved;\n    if (mousemoved <= this.options.moveThreshold) return;\n    evt = normalizeEvent(evt);\n    var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n    var view = data.sourceView;\n    if (view) {\n      view.pointermove(evt, localPoint.x, localPoint.y);\n    } else {\n      this.trigger('blank:pointermove', evt, localPoint.x, localPoint.y);\n    }\n    this.eventData(evt, data);\n  },\n  pointerup: function (evt) {\n    this.undelegateDocumentEvents();\n    var normalizedEvt = normalizeEvent(evt);\n    var localPoint = this.snapToGrid(normalizedEvt.clientX, normalizedEvt.clientY);\n    var view = this.eventData(evt).sourceView;\n    if (view) {\n      view.pointerup(normalizedEvt, localPoint.x, localPoint.y);\n    } else {\n      this.trigger('blank:pointerup', normalizedEvt, localPoint.x, localPoint.y);\n    }\n    if (!normalizedEvt.isPropagationStopped()) {\n      this.pointerclick($.Event(evt.originalEvent, {\n        type: 'click',\n        data: evt.data\n      }));\n    }\n    this.delegateEvents();\n  },\n  mouseover: function (evt) {\n    evt = normalizeEvent(evt);\n    var view = this.findView(evt.target);\n    if (this.guard(evt, view)) return;\n    if (view) {\n      view.mouseover(evt);\n    } else {\n      if (this.el === evt.target) return; // prevent border of paper from triggering this\n      this.trigger('blank:mouseover', evt);\n    }\n  },\n  mouseout: function (evt) {\n    evt = normalizeEvent(evt);\n    var view = this.findView(evt.target);\n    if (this.guard(evt, view)) return;\n    if (view) {\n      view.mouseout(evt);\n    } else {\n      if (this.el === evt.target) return; // prevent border of paper from triggering this\n      this.trigger('blank:mouseout', evt);\n    }\n  },\n  mouseenter: function (evt) {\n    evt = normalizeEvent(evt);\n    const {\n      target,\n      // The EventTarget the pointing device entered to\n      relatedTarget,\n      // The EventTarget the pointing device exited from\n      currentTarget // The EventTarget on which the event listener was registered\n    } = evt;\n    const view = this.findView(target);\n    if (this.guard(evt, view)) return;\n    const relatedView = this.findView(relatedTarget);\n    if (view) {\n      if (relatedView === view) {\n        // Mouse left a cell tool\n        return;\n      }\n      view.mouseenter(evt);\n      if (this.el.contains(relatedTarget)) {\n        // The pointer remains inside the paper.\n        return;\n      }\n    }\n    if (relatedView) {\n      return;\n    }\n    // prevent double `mouseenter` event if the `relatedTarget` is outside the paper\n    // (mouseenter method would be fired twice)\n    if (currentTarget === this.el) {\n      // `paper` (more descriptive), not `blank`\n      this.trigger('paper:mouseenter', evt);\n    }\n  },\n  mouseleave: function (evt) {\n    evt = normalizeEvent(evt);\n    const {\n      target,\n      // The EventTarget the pointing device exited from\n      relatedTarget,\n      // The EventTarget the pointing device entered to\n      currentTarget // The EventTarget on which the event listener was registered\n    } = evt;\n    const view = this.findView(target);\n    if (this.guard(evt, view)) return;\n    const relatedView = this.findView(relatedTarget);\n    if (view) {\n      if (relatedView === view) {\n        // Mouse entered a cell tool\n        return;\n      }\n      view.mouseleave(evt);\n      if (this.el.contains(relatedTarget)) {\n        // The pointer has exited a cellView. The pointer is still inside of the paper.\n        return;\n      }\n    }\n    if (relatedView) {\n      // The pointer has entered a new cellView\n      return;\n    }\n    // prevent double `mouseleave` event if the `relatedTarget` is outside the paper\n    // (mouseleave method would be fired twice)\n    if (currentTarget === this.el) {\n      // There is no cellView under the pointer, nor the blank area of the paper\n      this.trigger('paper:mouseleave', evt);\n    }\n  },\n  _processMouseWheelEvtBuf: debounce(function () {\n    const {\n      event,\n      deltas\n    } = this._mw_evt_buffer;\n    const deltaY = deltas.reduce((acc, deltaY) => acc + cap(deltaY, WHEEL_CAP), 0);\n    const scale = Math.pow(0.995, deltaY); // 1.005 for inverted pinch/zoom\n    const {\n      x,\n      y\n    } = this.clientToLocalPoint(event.clientX, event.clientY);\n    this.trigger('paper:pinch', event, x, y, scale);\n    this._mw_evt_buffer = {\n      event: null,\n      deltas: []\n    };\n  }, WHEEL_WAIT_MS, {\n    maxWait: WHEEL_WAIT_MS\n  }),\n  mousewheel: function (evt) {\n    evt = normalizeEvent(evt);\n    const view = this.findView(evt.target);\n    if (this.guard(evt, view)) return;\n    const originalEvent = evt.originalEvent;\n    const localPoint = this.snapToGrid(originalEvent.clientX, originalEvent.clientY);\n    const {\n      deltaX,\n      deltaY\n    } = normalizeWheel(originalEvent);\n    const pinchHandlers = this._events['paper:pinch'];\n\n    // Touchpad devices will send a fake CTRL press when a pinch is performed\n    //\n    // We also check if there are any subscribers to paper:pinch event. If there are none,\n    // just skip the entire block of code (we don't want to blindly call\n    // .preventDefault() if we really don't have to).\n    if (evt.ctrlKey && pinchHandlers && pinchHandlers.length > 0) {\n      // This is a pinch gesture, it's safe to assume that we must call .preventDefault()\n      originalEvent.preventDefault();\n      this._mw_evt_buffer.event = originalEvent;\n      this._mw_evt_buffer.deltas.push(deltaY);\n      this._processMouseWheelEvtBuf();\n    } else {\n      const delta = Math.max(-1, Math.min(1, originalEvent.wheelDelta));\n      if (view) {\n        view.mousewheel(evt, localPoint.x, localPoint.y, delta);\n      } else {\n        this.trigger('blank:mousewheel', evt, localPoint.x, localPoint.y, delta);\n      }\n      this.trigger('paper:pan', evt, deltaX, deltaY);\n    }\n  },\n  onevent: function (evt) {\n    var eventNode = evt.currentTarget;\n    var eventName = eventNode.getAttribute('event');\n    if (eventName) {\n      var view = this.findView(eventNode);\n      if (view) {\n        evt = normalizeEvent(evt);\n        if (this.guard(evt, view)) return;\n        var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n        view.onevent(evt, eventName, localPoint.x, localPoint.y);\n      }\n    }\n  },\n  magnetEvent: function (evt, handler) {\n    var magnetNode = evt.currentTarget;\n    var magnetValue = magnetNode.getAttribute('magnet');\n    if (magnetValue) {\n      var view = this.findView(magnetNode);\n      if (view) {\n        evt = normalizeEvent(evt);\n        if (this.guard(evt, view)) return;\n        var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n        handler.call(this, view, evt, magnetNode, localPoint.x, localPoint.y);\n      }\n    }\n  },\n  onmagnet: function (evt) {\n    if (evt.button === 2) {\n      this.contextMenuFired = true;\n      this.magnetContextMenuFired = true;\n      const contextmenuEvt = $.Event(evt.originalEvent, {\n        type: 'contextmenu',\n        data: evt.data,\n        currentTarget: evt.currentTarget\n      });\n      this.magnetContextMenuTrigger(contextmenuEvt);\n      if (contextmenuEvt.isPropagationStopped()) {\n        evt.stopPropagation();\n      }\n    } else {\n      this.magnetEvent(evt, function (view, evt, _, x, y) {\n        view.onmagnet(evt, x, y);\n      });\n    }\n  },\n  magnetpointerdblclick: function (evt) {\n    this.magnetEvent(evt, function (view, evt, magnet, x, y) {\n      view.magnetpointerdblclick(evt, magnet, x, y);\n    });\n  },\n  magnetcontextmenu: function (evt) {\n    if (this.options.preventContextMenu) evt.preventDefault();\n    if (this.magnetContextMenuFired) {\n      this.magnetContextMenuFired = false;\n      return;\n    }\n    this.magnetContextMenuTrigger(evt);\n  },\n  magnetContextMenuTrigger: function (evt) {\n    this.magnetEvent(evt, function (view, evt, magnet, x, y) {\n      view.magnetcontextmenu(evt, magnet, x, y);\n    });\n  },\n  onlabel: function (evt) {\n    var labelNode = evt.currentTarget;\n    var view = this.findView(labelNode);\n    if (!view) return;\n    evt = normalizeEvent(evt);\n    if (this.guard(evt, view)) return;\n\n    // Custom event\n    const eventEvt = this.customEventTrigger(evt, view, labelNode);\n    if (eventEvt) {\n      // `onevent` could have stopped propagation\n      if (eventEvt.isPropagationStopped()) return;\n      evt.data = eventEvt.data;\n    }\n    var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n    view.onlabel(evt, localPoint.x, localPoint.y);\n  },\n  getPointerArgs(evt) {\n    const normalizedEvt = normalizeEvent(evt);\n    const {\n      x,\n      y\n    } = this.snapToGrid(normalizedEvt.clientX, normalizedEvt.clientY);\n    return [normalizedEvt, x, y];\n  },\n  delegateDragEvents: function (view, data) {\n    data || (data = {});\n    this.eventData({\n      data: data\n    }, {\n      sourceView: view || null,\n      mousemoved: 0\n    });\n    this.delegateDocumentEvents(null, data);\n  },\n  // Guard the specified event. If the event should be ignored, guard returns `true`.\n  // Otherwise, it returns `false`.\n  guard: function (evt, view) {\n    if (evt.type === 'mousedown' && evt.button === 2) {\n      // handled as `contextmenu` type\n      return true;\n    }\n    if (this.options.guard && this.options.guard(evt, view)) {\n      return true;\n    }\n    if (evt.data && evt.data.guarded !== undefined) {\n      return evt.data.guarded;\n    }\n    const {\n      target\n    } = evt;\n    if (this.GUARDED_TAG_NAMES.includes(target.tagName)) {\n      return true;\n    }\n    if (view && view.model && view.model instanceof Cell) {\n      return false;\n    }\n    if (this.svg === target || this.el === target || $.contains(this.svg, target)) {\n      return false;\n    }\n    return true; // Event guarded. Paper should not react on it in any way.\n  },\n  setGridSize: function (gridSize) {\n    const {\n      options\n    } = this;\n    options.gridSize = gridSize;\n    if (options.drawGrid && !options.drawGridSize) {\n      // Do not redraw the grid if the `drawGridSize` is set.\n      this.drawGrid();\n    }\n    return this;\n  },\n  clearGrid: function () {\n    if (this.$grid) {\n      this.$grid.css('backgroundImage', 'none');\n    }\n    return this;\n  },\n  _getGridRefs: function () {\n    if (!this._gridCache) {\n      this._gridCache = {\n        root: V('svg', {\n          width: '100%',\n          height: '100%'\n        }, V('defs')),\n        patterns: {},\n        add: function (id, vel) {\n          V(this.root.node.childNodes[0]).append(vel);\n          this.patterns[id] = vel;\n          this.root.append(V('rect', {\n            width: '100%',\n            height: '100%',\n            fill: 'url(#' + id + ')'\n          }));\n        },\n        get: function (id) {\n          return this.patterns[id];\n        },\n        exist: function (id) {\n          return this.patterns[id] !== undefined;\n        }\n      };\n    }\n    return this._gridCache;\n  },\n  setGrid: function (drawGrid) {\n    this.clearGrid();\n    this._gridCache = null;\n    this._gridSettings = [];\n    var optionsList = Array.isArray(drawGrid) ? drawGrid : [drawGrid || {}];\n    optionsList.forEach(function (item) {\n      this._gridSettings.push.apply(this._gridSettings, this._resolveDrawGridOption(item));\n    }, this);\n    return this;\n  },\n  _resolveDrawGridOption: function (opt) {\n    var namespace = this.constructor.gridPatterns;\n    if (isString(opt) && Array.isArray(namespace[opt])) {\n      return namespace[opt].map(function (item) {\n        return assign({}, item);\n      });\n    }\n    var options = opt || {\n      args: [{}]\n    };\n    var isArray = Array.isArray(options);\n    var name = options.name;\n    if (!isArray && !name && !options.markup) {\n      name = 'dot';\n    }\n    if (name && Array.isArray(namespace[name])) {\n      var pattern = namespace[name].map(function (item) {\n        return assign({}, item);\n      });\n      var args = Array.isArray(options.args) ? options.args : [options.args || {}];\n      defaults(args[0], omit(opt, 'args'));\n      for (var i = 0; i < args.length; i++) {\n        if (pattern[i]) {\n          assign(pattern[i], args[i]);\n        }\n      }\n      return pattern;\n    }\n    return isArray ? options : [options];\n  },\n  drawGrid: function (opt) {\n    const gridSize = this.options.drawGridSize || this.options.gridSize;\n    if (gridSize <= 1) {\n      return this.clearGrid();\n    }\n    var localOptions = Array.isArray(opt) ? opt : [opt];\n    var ctm = this.matrix();\n    var refs = this._getGridRefs();\n    this._gridSettings.forEach(function (gridLayerSetting, index) {\n      var id = 'pattern_' + index;\n      var options = merge(gridLayerSetting, localOptions[index], {\n        sx: ctm.a || 1,\n        sy: ctm.d || 1,\n        ox: ctm.e || 0,\n        oy: ctm.f || 0\n      });\n      options.width = gridSize * (ctm.a || 1) * (options.scaleFactor || 1);\n      options.height = gridSize * (ctm.d || 1) * (options.scaleFactor || 1);\n      if (!refs.exist(id)) {\n        refs.add(id, V('pattern', {\n          id: id,\n          patternUnits: 'userSpaceOnUse'\n        }, V(options.markup)));\n      }\n      var patternDefVel = refs.get(id);\n      if (isFunction(options.update)) {\n        options.update(patternDefVel.node.childNodes[0], options);\n      }\n      var x = options.ox % options.width;\n      if (x < 0) x += options.width;\n      var y = options.oy % options.height;\n      if (y < 0) y += options.height;\n      patternDefVel.attr({\n        x: x,\n        y: y,\n        width: options.width,\n        height: options.height\n      });\n    });\n    var patternUri = new XMLSerializer().serializeToString(refs.root.node);\n    patternUri = 'url(data:image/svg+xml;base64,' + btoa(patternUri) + ')';\n    this.$grid.css('backgroundImage', patternUri);\n    return this;\n  },\n  updateBackgroundImage: function (opt) {\n    opt = opt || {};\n    var backgroundPosition = opt.position || 'center';\n    var backgroundSize = opt.size || 'auto auto';\n    var currentScale = this.scale();\n    var currentTranslate = this.translate();\n\n    // backgroundPosition\n    if (isObject(backgroundPosition)) {\n      var x = currentTranslate.tx + currentScale.sx * (backgroundPosition.x || 0);\n      var y = currentTranslate.ty + currentScale.sy * (backgroundPosition.y || 0);\n      backgroundPosition = x + 'px ' + y + 'px';\n    }\n\n    // backgroundSize\n    if (isObject(backgroundSize)) {\n      backgroundSize = new Rect(backgroundSize).scale(currentScale.sx, currentScale.sy);\n      backgroundSize = backgroundSize.width + 'px ' + backgroundSize.height + 'px';\n    }\n    this.$background.css({\n      backgroundSize: backgroundSize,\n      backgroundPosition: backgroundPosition\n    });\n  },\n  drawBackgroundImage: function (img, opt) {\n    // Clear the background image if no image provided\n    if (!(img instanceof HTMLImageElement)) {\n      this.$background.css('backgroundImage', '');\n      return;\n    }\n    if (!this._background || this._background.id !== opt.id) {\n      // Draw only the last image requested (see drawBackground())\n      return;\n    }\n    opt = opt || {};\n    var backgroundImage;\n    var backgroundSize = opt.size;\n    var backgroundRepeat = opt.repeat || 'no-repeat';\n    var backgroundOpacity = opt.opacity || 1;\n    var backgroundQuality = Math.abs(opt.quality) || 1;\n    var backgroundPattern = this.constructor.backgroundPatterns[camelCase(backgroundRepeat)];\n    if (isFunction(backgroundPattern)) {\n      // 'flip-x', 'flip-y', 'flip-xy', 'watermark' and custom\n      img.width *= backgroundQuality;\n      img.height *= backgroundQuality;\n      var canvas = backgroundPattern(img, opt);\n      if (!(canvas instanceof HTMLCanvasElement)) {\n        throw new Error('dia.Paper: background pattern must return an HTML Canvas instance');\n      }\n      backgroundImage = canvas.toDataURL('image/png');\n      backgroundRepeat = 'repeat';\n      if (isObject(backgroundSize)) {\n        // recalculate the tile size if an object passed in\n        backgroundSize.width *= canvas.width / img.width;\n        backgroundSize.height *= canvas.height / img.height;\n      } else if (backgroundSize === undefined) {\n        // calculate the tile size if no provided\n        opt.size = {\n          width: canvas.width / backgroundQuality,\n          height: canvas.height / backgroundQuality\n        };\n      }\n    } else {\n      // backgroundRepeat:\n      // no-repeat', 'round', 'space', 'repeat', 'repeat-x', 'repeat-y'\n      backgroundImage = img.src;\n      if (backgroundSize === undefined) {\n        // pass the image size for  the backgroundSize if no size provided\n        opt.size = {\n          width: img.width,\n          height: img.height\n        };\n      }\n    }\n    this.$background.css({\n      opacity: backgroundOpacity,\n      backgroundRepeat: backgroundRepeat,\n      backgroundImage: 'url(' + backgroundImage + ')'\n    });\n    this.updateBackgroundImage(opt);\n  },\n  updateBackgroundColor: function (color) {\n    this.$el.css('backgroundColor', color || '');\n  },\n  drawBackground: function (opt) {\n    opt = opt || {};\n    this.updateBackgroundColor(opt.color);\n    if (opt.image) {\n      opt = this._background = cloneDeep(opt);\n      guid(opt);\n      var img = document.createElement('img');\n      img.onload = this.drawBackgroundImage.bind(this, img, opt);\n      img.src = opt.image;\n    } else {\n      this.drawBackgroundImage(null);\n      this._background = null;\n    }\n    return this;\n  },\n  setInteractivity: function (value) {\n    this.options.interactive = value;\n    invoke(this._views, 'setInteractivity', value);\n  },\n  // Paper definitions.\n  // ------------------\n\n  isDefined: function (defId) {\n    return !!this.svg.getElementById(defId);\n  },\n  defineFilter: function (filter) {\n    if (!isObject(filter)) {\n      throw new TypeError('dia.Paper: defineFilter() requires 1. argument to be an object.');\n    }\n    var filterId = filter.id;\n    var name = filter.name;\n    // Generate a hash code from the stringified filter definition. This gives us\n    // a unique filter ID for different definitions.\n    if (!filterId) {\n      filterId = name + this.svg.id + hashCode(JSON.stringify(filter));\n    }\n    // If the filter already exists in the document,\n    // we're done and we can just use it (reference it using `url()`).\n    // If not, create one.\n    if (!this.isDefined(filterId)) {\n      var namespace = _filter;\n      var filterSVGString = namespace[name] && namespace[name](filter.args || {});\n      if (!filterSVGString) {\n        throw new Error('Non-existing filter ' + name);\n      }\n\n      // Set the filter area to be 3x the bounding box of the cell\n      // and center the filter around the cell.\n      var filterAttrs = assign({\n        filterUnits: 'objectBoundingBox',\n        x: -1,\n        y: -1,\n        width: 3,\n        height: 3\n      }, filter.attrs, {\n        id: filterId\n      });\n      V(filterSVGString, filterAttrs).appendTo(this.defs);\n    }\n    return filterId;\n  },\n  defineGradient: function (gradient) {\n    if (!isObject(gradient)) {\n      throw new TypeError('dia.Paper: defineGradient() requires 1. argument to be an object.');\n    }\n    const {\n      svg,\n      defs\n    } = this;\n    const {\n      type,\n      // Generate a hash code from the stringified filter definition. This gives us\n      // a unique filter ID for different definitions.\n      id = type + svg.id + hashCode(JSON.stringify(gradient)),\n      stops,\n      attrs = {}\n    } = gradient;\n    // If the gradient already exists in the document,\n    // we're done and we can just use it (reference it using `url()`).\n    if (this.isDefined(id)) return id;\n    // If not, create one.\n    const stopVEls = toArray(stops).map(({\n      offset,\n      color,\n      opacity\n    }) => {\n      return V('stop').attr({\n        'offset': offset,\n        'stop-color': color,\n        'stop-opacity': Number.isFinite(opacity) ? opacity : 1\n      });\n    });\n    const gradientVEl = V(type, attrs, stopVEls);\n    gradientVEl.id = id;\n    gradientVEl.appendTo(defs);\n    return id;\n  },\n  definePattern: function (pattern) {\n    if (!isObject(pattern)) {\n      throw new TypeError('dia.Paper: definePattern() requires 1. argument to be an object.');\n    }\n    const {\n      svg,\n      defs\n    } = this;\n    const {\n      // Generate a hash code from the stringified filter definition. This gives us\n      // a unique filter ID for different definitions.\n      id = svg.id + hashCode(JSON.stringify(pattern)),\n      markup,\n      attrs = {}\n    } = pattern;\n    if (!markup) {\n      throw new TypeError('dia.Paper: definePattern() requires markup.');\n    }\n    // If the gradient already exists in the document,\n    // we're done and we can just use it (reference it using `url()`).\n    if (this.isDefined(id)) return id;\n    // If not, create one.\n    const patternVEl = V('pattern', {\n      patternUnits: 'userSpaceOnUse'\n    });\n    patternVEl.id = id;\n    patternVEl.attr(attrs);\n    if (typeof markup === 'string') {\n      patternVEl.append(V(markup));\n    } else {\n      const {\n        fragment\n      } = parseDOMJSON(markup);\n      patternVEl.append(fragment);\n    }\n    patternVEl.appendTo(defs);\n    return id;\n  },\n  defineMarker: function (marker) {\n    if (!isObject(marker)) {\n      throw new TypeError('dia.Paper: defineMarker() requires the first argument to be an object.');\n    }\n    const {\n      svg,\n      defs\n    } = this;\n    const {\n      // Generate a hash code from the stringified filter definition. This gives us\n      // a unique filter ID for different definitions.\n      id = svg.id + hashCode(JSON.stringify(marker)),\n      // user-provided markup\n      // (e.g. defined when creating link via `attrs/line/sourceMarker/markup`)\n      markup,\n      // user-provided attributes\n      // (e.g. defined when creating link via `attrs/line/sourceMarker/attrs`)\n      // note: `transform` attrs are ignored by browsers\n      attrs = {},\n      // deprecated - use `attrs/markerUnits` instead (which has higher priority)\n      markerUnits = 'userSpaceOnUse'\n    } = marker;\n    // If the marker already exists in the document,\n    // we're done and we can just use it (reference it using `url()`).\n    if (this.isDefined(id)) return id;\n    // If not, create one.\n    const markerVEl = V('marker', {\n      orient: 'auto',\n      overflow: 'visible',\n      markerUnits: markerUnits\n    });\n    markerVEl.id = id;\n    markerVEl.attr(attrs);\n    let markerContentVEl;\n    if (markup) {\n      let markupVEl;\n      if (typeof markup === 'string') {\n        // Marker object has a `markup` property of type string.\n        // - Construct V from the provided string.\n        markupVEl = V(markup);\n        // `markupVEl` is now either a single VEl, or an array of VEls.\n        // - Coerce it to an array.\n        markupVEl = Array.isArray(markupVEl) ? markupVEl : [markupVEl];\n      } else {\n        // Marker object has a `markup` property of type object.\n        // - Construct V from the object by parsing it as DOM JSON.\n        const {\n          fragment\n        } = parseDOMJSON(markup);\n        markupVEl = V(fragment).children();\n      }\n      // `markupVEl` is an array with one or more VEls inside.\n      // - If there are multiple VEls, wrap them in a newly-constructed <g> element\n      if (markupVEl.length > 1) {\n        markerContentVEl = V('g').append(markupVEl);\n      } else {\n        markerContentVEl = markupVEl[0];\n      }\n    } else {\n      // Marker object is a flat structure.\n      // - Construct a new V of type `marker.type`.\n      const {\n        type = 'path'\n      } = marker;\n      markerContentVEl = V(type);\n    }\n    // `markerContentVEl` is a single VEl.\n    // Assign additional attributes to it (= context attributes + marker attributes):\n    // - Attribute values are taken from non-special properties of `marker`.\n    const markerAttrs = omit(marker, 'type', 'id', 'markup', 'attrs', 'markerUnits');\n    const markerAttrsKeys = Object.keys(markerAttrs);\n    markerAttrsKeys.forEach(key => {\n      const value = markerAttrs[key];\n      const markupValue = markerContentVEl.attr(key); // value coming from markupVEl (if any) = higher priority\n      if (markupValue == null) {\n        // Default logic:\n        markerContentVEl.attr(key, value);\n      } else {\n        // Properties with special logic should be added as cases to this switch block:\n        switch (key) {\n          case 'transform':\n            // - Prepend `transform` to existing value.\n            markerContentVEl.attr(key, value + ' ' + markupValue);\n            break;\n        }\n      }\n    });\n    markerContentVEl.appendTo(markerVEl);\n    markerVEl.appendTo(defs);\n    return id;\n  },\n  customEventTrigger: function (evt, view, rootNode = view.el) {\n    const eventNode = evt.target.closest('[event]');\n    if (eventNode && rootNode !== eventNode && view.el.contains(eventNode)) {\n      const eventEvt = normalizeEvent($.Event(evt.originalEvent, {\n        data: evt.data,\n        // Originally the event listener was attached to the event element.\n        currentTarget: eventNode\n      }));\n      this.onevent(eventEvt);\n      if (eventEvt.isDefaultPrevented()) {\n        evt.preventDefault();\n      }\n      return eventEvt;\n    }\n    return null;\n  }\n}, {\n  sorting: sortingTypes,\n  Layers: LayersNames,\n  backgroundPatterns: {\n    flipXy: function (img) {\n      // d b\n      // q p\n\n      var canvas = document.createElement('canvas');\n      var imgWidth = img.width;\n      var imgHeight = img.height;\n      canvas.width = 2 * imgWidth;\n      canvas.height = 2 * imgHeight;\n      var ctx = canvas.getContext('2d');\n      // top-left image\n      ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n      // xy-flipped bottom-right image\n      ctx.setTransform(-1, 0, 0, -1, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n      // x-flipped top-right image\n      ctx.setTransform(-1, 0, 0, 1, canvas.width, 0);\n      ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n      // y-flipped bottom-left image\n      ctx.setTransform(1, 0, 0, -1, 0, canvas.height);\n      ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n      return canvas;\n    },\n    flipX: function (img) {\n      // d b\n      // d b\n\n      var canvas = document.createElement('canvas');\n      var imgWidth = img.width;\n      var imgHeight = img.height;\n      canvas.width = imgWidth * 2;\n      canvas.height = imgHeight;\n      var ctx = canvas.getContext('2d');\n      // left image\n      ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n      // flipped right image\n      ctx.translate(2 * imgWidth, 0);\n      ctx.scale(-1, 1);\n      ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n      return canvas;\n    },\n    flipY: function (img) {\n      // d d\n      // q q\n\n      var canvas = document.createElement('canvas');\n      var imgWidth = img.width;\n      var imgHeight = img.height;\n      canvas.width = imgWidth;\n      canvas.height = imgHeight * 2;\n      var ctx = canvas.getContext('2d');\n      // top image\n      ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n      // flipped bottom image\n      ctx.translate(0, 2 * imgHeight);\n      ctx.scale(1, -1);\n      ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n      return canvas;\n    },\n    watermark: function (img, opt) {\n      //   d\n      // d\n\n      opt = opt || {};\n      var imgWidth = img.width;\n      var imgHeight = img.height;\n      var canvas = document.createElement('canvas');\n      canvas.width = imgWidth * 3;\n      canvas.height = imgHeight * 3;\n      var ctx = canvas.getContext('2d');\n      var angle = isNumber(opt.watermarkAngle) ? -opt.watermarkAngle : -20;\n      var radians = toRad(angle);\n      var stepX = canvas.width / 4;\n      var stepY = canvas.height / 4;\n      for (var i = 0; i < 4; i++) {\n        for (var j = 0; j < 4; j++) {\n          if ((i + j) % 2 > 0) {\n            // reset the current transformations\n            ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n            ctx.rotate(radians);\n            ctx.drawImage(img, -imgWidth / 2, -imgHeight / 2, imgWidth, imgHeight);\n          }\n        }\n      }\n      return canvas;\n    }\n  },\n  gridPatterns: {\n    dot: [{\n      color: '#AAAAAA',\n      thickness: 1,\n      markup: 'rect',\n      update: function (el, opt) {\n        V(el).attr({\n          width: opt.thickness * opt.sx,\n          height: opt.thickness * opt.sy,\n          fill: opt.color\n        });\n      }\n    }],\n    fixedDot: [{\n      color: '#AAAAAA',\n      thickness: 1,\n      markup: 'rect',\n      update: function (el, opt) {\n        var size = opt.sx <= 1 ? opt.thickness * opt.sx : opt.thickness;\n        V(el).attr({\n          width: size,\n          height: size,\n          fill: opt.color\n        });\n      }\n    }],\n    mesh: [{\n      color: '#AAAAAA',\n      thickness: 1,\n      markup: 'path',\n      update: function (el, opt) {\n        var d;\n        var width = opt.width;\n        var height = opt.height;\n        var thickness = opt.thickness;\n        if (width - thickness >= 0 && height - thickness >= 0) {\n          d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n        } else {\n          d = 'M 0 0 0 0';\n        }\n        V(el).attr({\n          'd': d,\n          stroke: opt.color,\n          'stroke-width': opt.thickness\n        });\n      }\n    }],\n    doubleMesh: [{\n      color: '#AAAAAA',\n      thickness: 1,\n      markup: 'path',\n      update: function (el, opt) {\n        var d;\n        var width = opt.width;\n        var height = opt.height;\n        var thickness = opt.thickness;\n        if (width - thickness >= 0 && height - thickness >= 0) {\n          d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n        } else {\n          d = 'M 0 0 0 0';\n        }\n        V(el).attr({\n          'd': d,\n          stroke: opt.color,\n          'stroke-width': opt.thickness\n        });\n      }\n    }, {\n      color: '#000000',\n      thickness: 3,\n      scaleFactor: 4,\n      markup: 'path',\n      update: function (el, opt) {\n        var d;\n        var width = opt.width;\n        var height = opt.height;\n        var thickness = opt.thickness;\n        if (width - thickness >= 0 && height - thickness >= 0) {\n          d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n        } else {\n          d = 'M 0 0 0 0';\n        }\n        V(el).attr({\n          'd': d,\n          stroke: opt.color,\n          'stroke-width': opt.thickness\n        });\n      }\n    }]\n  }\n});", "import * as mvc from '../mvc/index.mjs';\nexport const ToolView = mvc.View.extend({\n  name: null,\n  tagName: 'g',\n  className: 'tool',\n  svgElement: true,\n  _visible: true,\n  init: function () {\n    var name = this.name;\n    if (name) this.vel.attr('data-tool-name', name);\n  },\n  configure: function (view, toolsView) {\n    this.relatedView = view;\n    this.paper = view.paper;\n    this.parentView = toolsView;\n    this.simulateRelatedView(this.el);\n    // Delegate events in case the ToolView was removed from the DOM and reused.\n    this.delegateEvents();\n    return this;\n  },\n  simulateRelatedView: function (el) {\n    if (el) el.setAttribute('model-id', this.relatedView.model.id);\n  },\n  getName: function () {\n    return this.name;\n  },\n  show: function () {\n    this.el.style.display = '';\n    this._visible = true;\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._visible = false;\n  },\n  isVisible: function () {\n    return !!this._visible;\n  },\n  focus: function () {\n    var opacity = this.options.focusOpacity;\n    if (isFinite(opacity)) this.el.style.opacity = opacity;\n    this.parentView.focusTool(this);\n  },\n  blur: function () {\n    this.el.style.opacity = '';\n    this.parentView.blurTool(this);\n  },\n  update: function () {\n    // to be overridden\n  },\n  guard: function (evt) {\n    // Let the context-menu event bubble up to the relatedView\n    const {\n      paper,\n      relatedView\n    } = this;\n    if (!paper || !relatedView) return true;\n    return paper.guard(evt, relatedView);\n  }\n});", "import * as mvc from '../mvc/index.mjs';\nimport * as util from '../util/index.mjs';\nimport { CellView } from './CellView.mjs';\nimport { LayersNames } from './PaperLayer.mjs';\nimport { ToolView } from './ToolView.mjs';\nexport const ToolsView = mvc.View.extend({\n  tagName: 'g',\n  className: 'tools',\n  svgElement: true,\n  tools: null,\n  isRendered: false,\n  options: {\n    tools: null,\n    relatedView: null,\n    name: null\n    // layer?: LayersNames.TOOLS\n    // z?: number\n  },\n  configure: function (options) {\n    options = util.assign(this.options, options);\n    var tools = options.tools;\n    if (!Array.isArray(tools)) return this;\n    var relatedView = options.relatedView;\n    if (!(relatedView instanceof CellView)) return this;\n    var views = this.tools = [];\n    for (var i = 0, n = tools.length; i < n; i++) {\n      var tool = tools[i];\n      if (!(tool instanceof ToolView)) continue;\n      tool.configure(relatedView, this);\n      this.vel.append(tool.el);\n      views.push(tool);\n    }\n    this.isRendered = false;\n    relatedView.requestUpdate(relatedView.getFlag('TOOLS'));\n    return this;\n  },\n  getName: function () {\n    return this.options.name;\n  },\n  update: function (opt) {\n    opt || (opt = {});\n    var tools = this.tools;\n    if (!tools) return this;\n    var isRendered = this.isRendered;\n    for (var i = 0, n = tools.length; i < n; i++) {\n      var tool = tools[i];\n      if (!isRendered) {\n        // First update executes render()\n        tool.render();\n      } else if (opt.tool !== tool.cid && tool.isVisible()) {\n        tool.update();\n      }\n    }\n    if (!this.isMounted()) {\n      this.mount();\n    }\n    if (!isRendered) {\n      // Make sure tools are visible (if they were hidden and the tool removed)\n      this.blurTool();\n      this.isRendered = true;\n    }\n    return this;\n  },\n  focusTool: function (focusedTool) {\n    var tools = this.tools;\n    if (!tools) return this;\n    for (var i = 0, n = tools.length; i < n; i++) {\n      var tool = tools[i];\n      if (focusedTool === tool) {\n        tool.show();\n      } else {\n        tool.hide();\n      }\n    }\n    return this;\n  },\n  blurTool: function (blurredTool) {\n    var tools = this.tools;\n    if (!tools) return this;\n    for (var i = 0, n = tools.length; i < n; i++) {\n      var tool = tools[i];\n      if (tool !== blurredTool && !tool.isVisible()) {\n        tool.show();\n        tool.update();\n      }\n    }\n    return this;\n  },\n  hide: function () {\n    return this.focusTool(null);\n  },\n  show: function () {\n    return this.blurTool(null);\n  },\n  onRemove: function () {\n    var tools = this.tools;\n    if (!tools) return this;\n    for (var i = 0, n = tools.length; i < n; i++) {\n      tools[i].remove();\n    }\n    this.tools = null;\n  },\n  mount: function () {\n    const {\n      options,\n      el\n    } = this;\n    const {\n      relatedView,\n      layer = LayersNames.TOOLS,\n      z\n    } = options;\n    if (relatedView) {\n      if (layer) {\n        relatedView.paper.getLayerView(layer).insertSortedNode(el, z);\n      } else {\n        relatedView.el.appendChild(el);\n      }\n    }\n    return this;\n  }\n});", "import * as util from '../../util/index.mjs';\nimport { Graph } from '../../dia/index.mjs';\nimport * as g from '../../g/index.mjs';\nexport const DirectedGraph = {\n  exportElement: function (element) {\n    // The width and height of the element.\n    return element.size();\n  },\n  exportLink: function (link) {\n    var labelSize = link.get('labelSize') || {};\n    var edge = {\n      // The number of ranks to keep between the source and target of the edge.\n      minLen: link.get('minLen') || 1,\n      // The weight to assign edges. Higher weight edges are generally\n      // made shorter and straighter than lower weight edges.\n      weight: link.get('weight') || 1,\n      // Where to place the label relative to the edge.\n      // l = left, c = center r = right.\n      labelpos: link.get('labelPosition') || 'c',\n      // How many pixels to move the label away from the edge.\n      // Applies only when labelpos is l or r.\n      labeloffset: link.get('labelOffset') || 0,\n      // The width of the edge label in pixels.\n      width: labelSize.width || 0,\n      // The height of the edge label in pixels.\n      height: labelSize.height || 0\n    };\n    return edge;\n  },\n  importElement: function (opt, v, gl) {\n    var element = this.getCell(v);\n    var glNode = gl.node(v);\n    if (opt.setPosition) {\n      opt.setPosition(element, glNode);\n    } else {\n      element.set('position', {\n        x: glNode.x - glNode.width / 2,\n        y: glNode.y - glNode.height / 2\n      });\n    }\n  },\n  importLink: function (opt, edgeObj, gl) {\n    const SIMPLIFY_THRESHOLD = 0.001;\n    const link = this.getCell(edgeObj.name);\n    const glEdge = gl.edge(edgeObj);\n    const points = glEdge.points || [];\n    const polyline = new g.Polyline(points);\n\n    // check the `setLinkVertices` here for backwards compatibility\n    if (opt.setVertices || opt.setLinkVertices) {\n      if (util.isFunction(opt.setVertices)) {\n        opt.setVertices(link, points);\n      } else {\n        // simplify the `points` polyline\n        polyline.simplify({\n          threshold: SIMPLIFY_THRESHOLD\n        });\n        const polylinePoints = polyline.points.map(point => point.toJSON()); // JSON of points after simplification\n        const numPolylinePoints = polylinePoints.length; // number of points after simplification\n        // set simplified polyline points as link vertices\n        // remove first and last polyline points (= source/target sonnectionPoints)\n        link.set('vertices', polylinePoints.slice(1, numPolylinePoints - 1));\n      }\n    }\n    if (opt.setLabels && 'x' in glEdge && 'y' in glEdge) {\n      const labelPosition = {\n        x: glEdge.x,\n        y: glEdge.y\n      };\n      if (util.isFunction(opt.setLabels)) {\n        opt.setLabels(link, labelPosition, points);\n      } else {\n        // convert the absolute label position to a relative position\n        // towards the closest point on the edge\n        const length = polyline.closestPointLength(labelPosition);\n        const closestPoint = polyline.pointAtLength(length);\n        const distance = length / polyline.length();\n        const offset = new g.Point(labelPosition).difference(closestPoint).toJSON();\n        link.label(0, {\n          position: {\n            distance: distance,\n            offset: offset\n          }\n        });\n      }\n    }\n  },\n  layout: function (graphOrCells, opt) {\n    var graph;\n    if (graphOrCells instanceof Graph) {\n      graph = graphOrCells;\n    } else {\n      // Reset cells in dry mode so the graph reference is not stored on the cells.\n      // `sort: false` to prevent elements to change their order based on the z-index\n      graph = new Graph().resetCells(graphOrCells, {\n        dry: true,\n        sort: false\n      });\n    }\n\n    // This is not needed anymore.\n    graphOrCells = null;\n    opt = util.defaults(opt || {}, {\n      resizeClusters: true,\n      clusterPadding: 10,\n      exportElement: this.exportElement,\n      exportLink: this.exportLink\n    });\n\n    /* eslint-disable no-undef */\n    const dagreUtil = opt.dagre || (typeof dagre !== 'undefined' ? dagre : undefined);\n    /* eslint-enable no-undef */\n\n    if (dagreUtil === undefined) throw new Error('The the \"dagre\" utility is a mandatory dependency.');\n\n    // create a graphlib.Graph that represents the joint.dia.Graph\n    // var glGraph = graph.toGraphLib({\n    var glGraph = DirectedGraph.toGraphLib(graph, {\n      graphlib: opt.graphlib,\n      directed: true,\n      // We are about to use edge naming feature.\n      multigraph: true,\n      // We are able to layout graphs with embeds.\n      compound: true,\n      setNodeLabel: opt.exportElement,\n      setEdgeLabel: opt.exportLink,\n      setEdgeName: function (link) {\n        // Graphlib edges have no ids. We use edge name property\n        // to store and retrieve ids instead.\n        return link.id;\n      }\n    });\n    var glLabel = {};\n    var marginX = opt.marginX || 0;\n    var marginY = opt.marginY || 0;\n\n    // Dagre layout accepts options as lower case.\n    // Direction for rank nodes. Can be TB, BT, LR, or RL\n    if (opt.rankDir) glLabel.rankdir = opt.rankDir;\n    // Alignment for rank nodes. Can be UL, UR, DL, or DR\n    if (opt.align) glLabel.align = opt.align;\n    // Number of pixels that separate nodes horizontally in the layout.\n    if (opt.nodeSep) glLabel.nodesep = opt.nodeSep;\n    // Number of pixels that separate edges horizontally in the layout.\n    if (opt.edgeSep) glLabel.edgesep = opt.edgeSep;\n    // Number of pixels between each rank in the layout.\n    if (opt.rankSep) glLabel.ranksep = opt.rankSep;\n    // Type of algorithm to assign a rank to each node in the input graph.\n    // Possible values: network-simplex, tight-tree or longest-path\n    if (opt.ranker) glLabel.ranker = opt.ranker;\n    // Number of pixels to use as a margin around the left and right of the graph.\n    if (marginX) glLabel.marginx = marginX;\n    // Number of pixels to use as a margin around the top and bottom of the graph.\n    if (marginY) glLabel.marginy = marginY;\n\n    // Set the option object for the graph label.\n    glGraph.setGraph(glLabel);\n\n    // Executes the layout.\n    dagreUtil.layout(glGraph, {\n      debugTiming: !!opt.debugTiming\n    });\n\n    // Wrap all graph changes into a batch.\n    graph.startBatch('layout');\n    DirectedGraph.fromGraphLib(glGraph, {\n      importNode: this.importElement.bind(graph, opt),\n      importEdge: this.importLink.bind(graph, opt)\n    });\n\n    // // Update the graph.\n    // graph.fromGraphLib(glGraph, {\n    //     importNode: this.importElement.bind(graph, opt),\n    //     importEdge: this.importLink.bind(graph, opt)\n    // });\n\n    if (opt.resizeClusters) {\n      // Resize and reposition cluster elements (parents of other elements)\n      // to fit their children.\n      // 1. filter clusters only\n      // 2. map id on cells\n      // 3. sort cells by their depth (the deepest first)\n      // 4. resize cell to fit their direct children only.\n      var clusters = glGraph.nodes().filter(function (v) {\n        return glGraph.children(v).length > 0;\n      }).map(graph.getCell.bind(graph)).sort(function (aCluster, bCluster) {\n        return bCluster.getAncestors().length - aCluster.getAncestors().length;\n      });\n      util.invoke(clusters, 'fitToChildren', {\n        padding: opt.clusterPadding\n      });\n    }\n    graph.stopBatch('layout');\n\n    // Width and height of the graph extended by margins.\n    var glSize = glGraph.graph();\n    // Return the bounding box of the graph after the layout.\n    return new g.Rect(marginX, marginY, Math.abs(glSize.width - 2 * marginX), Math.abs(glSize.height - 2 * marginY));\n  },\n  fromGraphLib: function (glGraph, opt) {\n    opt = opt || {};\n    var importNode = opt.importNode || util.noop;\n    var importEdge = opt.importEdge || util.noop;\n    var graph = this instanceof Graph ? this : new Graph();\n\n    // Import all nodes.\n    glGraph.nodes().forEach(function (node) {\n      importNode.call(graph, node, glGraph, graph, opt);\n    });\n\n    // Import all edges.\n    glGraph.edges().forEach(function (edge) {\n      importEdge.call(graph, edge, glGraph, graph, opt);\n    });\n    return graph;\n  },\n  // Create new graphlib graph from existing JointJS graph.\n  toGraphLib: function (graph, opt) {\n    opt = opt || {};\n\n    /* eslint-disable no-undef */\n    const graphlibUtil = opt.graphlib || (typeof graphlib !== 'undefined' ? graphlib : undefined);\n    /* eslint-enable no-undef */\n\n    if (graphlibUtil === undefined) throw new Error('The the \"graphlib\" utility is a mandatory dependency.');\n    var glGraphType = util.pick(opt, 'directed', 'compound', 'multigraph');\n    var glGraph = new graphlibUtil.Graph(glGraphType);\n    var setNodeLabel = opt.setNodeLabel || util.noop;\n    var setEdgeLabel = opt.setEdgeLabel || util.noop;\n    var setEdgeName = opt.setEdgeName || util.noop;\n    var collection = graph.get('cells');\n    for (var i = 0, n = collection.length; i < n; i++) {\n      var cell = collection.at(i);\n      if (cell.isLink()) {\n        var source = cell.get('source');\n        var target = cell.get('target');\n\n        // Links that end at a point are ignored.\n        if (!source.id || !target.id) break;\n\n        // Note that if we are creating a multigraph we can name the edges. If\n        // we try to name edges on a non-multigraph an exception is thrown.\n        glGraph.setEdge(source.id, target.id, setEdgeLabel(cell), setEdgeName(cell));\n      } else {\n        glGraph.setNode(cell.id, setNodeLabel(cell));\n\n        // For the compound graphs we have to take embeds into account.\n        if (glGraph.isCompound() && cell.has('parent')) {\n          var parentId = cell.get('parent');\n          if (collection.has(parentId)) {\n            // Make sure the parent cell is included in the graph (this can\n            // happen when the layout is run on part of the graph only).\n            glGraph.setParent(cell.id, parentId);\n          }\n        }\n      }\n    }\n    return glGraph;\n  }\n};\nGraph.prototype.toGraphLib = function (opt) {\n  return DirectedGraph.toGraphLib(this, opt);\n};\nGraph.prototype.fromGraphLib = function (glGraph, opt) {\n  return DirectedGraph.fromGraphLib.call(this, glGraph, opt);\n};", "import * as basic from './basic.mjs';\nimport * as standard from './standard.mjs';\nimport * as devs from './devs.mjs';\nimport * as logic from './logic.mjs';\nimport * as chess from './chess.mjs';\nimport * as erd from './erd.mjs';\nimport * as fsa from './fsa.mjs';\nimport * as org from './org.mjs';\nimport * as pn from './pn.mjs';\nimport * as uml from './uml.mjs';\nexport { basic, standard, devs, logic, chess, erd, fsa, org, pn, uml };", "import { Element } from '../dia/Element.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport { omit, assign, sanitizeHTML, merge, has, breakText, setByPath } from '../util/index.mjs';\nimport { env } from '../env/index.mjs';\nexport const Generic = Element.define('basic.Generic', {\n  attrs: {\n    '.': {\n      fill: '#ffffff',\n      stroke: 'none'\n    }\n  }\n});\nexport const Rect = Generic.define('basic.Rect', {\n  attrs: {\n    'rect': {\n      fill: '#ffffff',\n      stroke: '#000000',\n      width: 100,\n      height: 60\n    },\n    'text': {\n      fill: '#000000',\n      text: '',\n      'font-size': 14,\n      'ref-x': .5,\n      'ref-y': .5,\n      'text-anchor': 'middle',\n      'y-alignment': 'middle',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect/></g><text/></g>'\n});\nexport const TextView = ElementView.extend({\n  presentationAttributes: ElementView.addPresentationAttributes({\n    // The element view is not automatically re-scaled to fit the model size\n    // when the attribute 'attrs' is changed.\n    attrs: ['SCALE']\n  }),\n  confirmUpdate: function () {\n    var flags = ElementView.prototype.confirmUpdate.apply(this, arguments);\n    if (this.hasFlag(flags, 'SCALE')) {\n      this.resize();\n      flags = this.removeFlag(flags, 'SCALE');\n    }\n    return flags;\n  }\n});\nexport const Text = Generic.define('basic.Text', {\n  attrs: {\n    'text': {\n      'font-size': 18,\n      fill: '#000000'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><text/></g></g>'\n});\nexport const Circle = Generic.define('basic.Circle', {\n  size: {\n    width: 60,\n    height: 60\n  },\n  attrs: {\n    'circle': {\n      fill: '#ffffff',\n      stroke: '#000000',\n      r: 30,\n      cx: 30,\n      cy: 30\n    },\n    'text': {\n      'font-size': 14,\n      text: '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': .5,\n      'y-alignment': 'middle',\n      fill: '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle/></g><text/></g>'\n});\nexport const Ellipse = Generic.define('basic.Ellipse', {\n  size: {\n    width: 60,\n    height: 40\n  },\n  attrs: {\n    'ellipse': {\n      fill: '#ffffff',\n      stroke: '#000000',\n      rx: 30,\n      ry: 20,\n      cx: 30,\n      cy: 20\n    },\n    'text': {\n      'font-size': 14,\n      text: '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': .5,\n      'y-alignment': 'middle',\n      fill: '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><ellipse/></g><text/></g>'\n});\nexport const Polygon = Generic.define('basic.Polygon', {\n  size: {\n    width: 60,\n    height: 40\n  },\n  attrs: {\n    'polygon': {\n      fill: '#ffffff',\n      stroke: '#000000'\n    },\n    'text': {\n      'font-size': 14,\n      text: '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-dy': 20,\n      'y-alignment': 'middle',\n      fill: '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon/></g><text/></g>'\n});\nexport const Polyline = Generic.define('basic.Polyline', {\n  size: {\n    width: 60,\n    height: 40\n  },\n  attrs: {\n    'polyline': {\n      fill: '#ffffff',\n      stroke: '#000000'\n    },\n    'text': {\n      'font-size': 14,\n      text: '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-dy': 20,\n      'y-alignment': 'middle',\n      fill: '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><polyline/></g><text/></g>'\n});\nexport const Image = Generic.define('basic.Image', {\n  attrs: {\n    'text': {\n      'font-size': 14,\n      text: '',\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-dy': 20,\n      'y-alignment': 'middle',\n      fill: '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><image/></g><text/></g>'\n});\nexport const Path = Generic.define('basic.Path', {\n  size: {\n    width: 60,\n    height: 60\n  },\n  attrs: {\n    'path': {\n      fill: '#ffffff',\n      stroke: '#000000'\n    },\n    'text': {\n      'font-size': 14,\n      text: '',\n      'text-anchor': 'middle',\n      'ref': 'path',\n      'ref-x': .5,\n      'ref-dy': 10,\n      fill: '#000000',\n      'font-family': 'Arial, helvetica, sans-serif'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><path/></g><text/></g>'\n});\nexport const Rhombus = Path.define('basic.Rhombus', {\n  attrs: {\n    'path': {\n      d: 'M 30 0 L 60 30 30 60 0 30 z'\n    },\n    'text': {\n      'ref-y': .5,\n      'ref-dy': null,\n      'y-alignment': 'middle'\n    }\n  }\n});\nconst svgForeignObjectSupported = env.test('svgforeignobject');\nexport const TextBlock = Generic.define('basic.TextBlock', {\n  // see joint.css for more element styles\n  attrs: {\n    rect: {\n      fill: '#ffffff',\n      stroke: '#000000',\n      width: 80,\n      height: 100\n    },\n    text: {\n      fill: '#000000',\n      'font-size': 14,\n      'font-family': 'Arial, helvetica, sans-serif'\n    },\n    '.content': {\n      text: '',\n      'ref-x': .5,\n      'ref-y': .5,\n      'y-alignment': 'middle',\n      'x-alignment': 'middle'\n    }\n  },\n  content: ''\n}, {\n  markup: ['<g class=\"rotatable\">', '<g class=\"scalable\"><rect/></g>', svgForeignObjectSupported ? '<foreignObject class=\"fobj\"><body xmlns=\"http://www.w3.org/1999/xhtml\"><div class=\"content\"/></body></foreignObject>' : '<text class=\"content\"/>', '</g>'].join(''),\n  initialize: function () {\n    this.listenTo(this, 'change:size', this.updateSize);\n    this.listenTo(this, 'change:content', this.updateContent);\n    this.updateSize(this, this.get('size'));\n    this.updateContent(this, this.get('content'));\n    Generic.prototype.initialize.apply(this, arguments);\n  },\n  updateSize: function (cell, size) {\n    // Selector `foreignObject' doesn't work across all browsers, we're using class selector instead.\n    // We have to clone size as we don't want attributes.div.style to be same object as attributes.size.\n    this.attr({\n      '.fobj': assign({}, size),\n      div: {\n        style: assign({}, size)\n      }\n    });\n  },\n  updateContent: function (cell, content) {\n    if (svgForeignObjectSupported) {\n      // Content element is a <div> element.\n      this.attr({\n        '.content': {\n          html: sanitizeHTML(content)\n        }\n      });\n    } else {\n      // Content element is a <text> element.\n      // SVG elements don't have innerHTML attribute.\n      this.attr({\n        '.content': {\n          text: content\n        }\n      });\n    }\n  },\n  // Here for backwards compatibility:\n  setForeignObjectSize: function () {\n    this.updateSize.apply(this, arguments);\n  },\n  // Here for backwards compatibility:\n  setDivContent: function () {\n    this.updateContent.apply(this, arguments);\n  }\n});\n\n// TextBlockView implements the fallback for IE when no foreignObject exists and\n// the text needs to be manually broken.\nexport const TextBlockView = ElementView.extend({\n  presentationAttributes: svgForeignObjectSupported ? ElementView.prototype.presentationAttributes : ElementView.addPresentationAttributes({\n    content: ['CONTENT'],\n    size: ['CONTENT']\n  }),\n  initFlag: ['RENDER', 'CONTENT'],\n  confirmUpdate: function () {\n    var flags = ElementView.prototype.confirmUpdate.apply(this, arguments);\n    if (this.hasFlag(flags, 'CONTENT')) {\n      this.updateContent(this.model);\n      flags = this.removeFlag(flags, 'CONTENT');\n    }\n    return flags;\n  },\n  update: function (_, renderingOnlyAttrs) {\n    var model = this.model;\n    if (!svgForeignObjectSupported) {\n      // Update everything but the content first.\n      var noTextAttrs = omit(renderingOnlyAttrs || model.get('attrs'), '.content');\n      ElementView.prototype.update.call(this, model, noTextAttrs);\n      if (!renderingOnlyAttrs || has(renderingOnlyAttrs, '.content')) {\n        // Update the content itself.\n        this.updateContent(model, renderingOnlyAttrs);\n      }\n    } else {\n      ElementView.prototype.update.call(this, model, renderingOnlyAttrs);\n    }\n  },\n  updateContent: function (cell, renderingOnlyAttrs) {\n    // Create copy of the text attributes\n    var textAttrs = merge({}, (renderingOnlyAttrs || cell.get('attrs'))['.content']);\n    textAttrs = omit(textAttrs, 'text');\n\n    // Break the content to fit the element size taking into account the attributes\n    // set on the model.\n    var text = breakText(cell.get('content'), cell.get('size'), textAttrs, {\n      // measuring sandbox svg document\n      svgDocument: this.paper.svg\n    });\n\n    // Create a new attrs with same structure as the model attrs { text: { *textAttributes* }}\n    var attrs = setByPath({}, '.content', textAttrs, '/');\n\n    // Replace text attribute with the one we just processed.\n    attrs['.content'].text = text;\n\n    // Update the view using renderingOnlyAttributes parameter.\n    ElementView.prototype.update.call(this, cell, attrs);\n  }\n});", "export const env = {\n  _results: {},\n  _tests: {\n    svgforeignobject: function () {\n      return !!document.createElementNS && /SVGForeignObject/.test({}.toString.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));\n    }\n  },\n  addTest: function (name, fn) {\n    return this._tests[name] = fn;\n  },\n  test: function (name) {\n    var fn = this._tests[name];\n    if (!fn) {\n      throw new Error('Test not defined (\"' + name + '\"). Use `joint.env.addTest(name, fn) to add a new test.`');\n    }\n    var result = this._results[name];\n    if (typeof result !== 'undefined') {\n      return result;\n    }\n    try {\n      result = fn();\n    } catch (error) {\n      result = false;\n    }\n\n    // Cache the test result.\n    this._results[name] = result;\n    return result;\n  }\n};", "import V from '../V/index.mjs';\nimport { Element } from '../dia/Element.mjs';\nimport { Link as LinkBase } from '../dia/Link.mjs';\nimport { isPercentage, assign } from '../util/index.mjs';\nimport { attributes } from '../dia/attributes/index.mjs';\nimport { env } from '../env/index.mjs';\n\n// ELEMENTS\n\nexport const Rectangle = Element.define('standard.Rectangle', {\n  attrs: {\n    body: {\n      refWidth: '100%',\n      refHeight: '100%',\n      strokeWidth: 2,\n      stroke: '#000000',\n      fill: '#FFFFFF'\n    },\n    label: {\n      textVerticalAnchor: 'middle',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '50%',\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'rect',\n    selector: 'body'\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const Circle = Element.define('standard.Circle', {\n  attrs: {\n    body: {\n      refCx: '50%',\n      refCy: '50%',\n      refR: '50%',\n      strokeWidth: 2,\n      stroke: '#333333',\n      fill: '#FFFFFF'\n    },\n    label: {\n      textVerticalAnchor: 'middle',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '50%',\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'circle',\n    selector: 'body'\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const Ellipse = Element.define('standard.Ellipse', {\n  attrs: {\n    body: {\n      refCx: '50%',\n      refCy: '50%',\n      refRx: '50%',\n      refRy: '50%',\n      strokeWidth: 2,\n      stroke: '#333333',\n      fill: '#FFFFFF'\n    },\n    label: {\n      textVerticalAnchor: 'middle',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '50%',\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'ellipse',\n    selector: 'body'\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const Path = Element.define('standard.Path', {\n  attrs: {\n    body: {\n      refD: 'M 0 0 L 10 0 10 10 0 10 Z',\n      strokeWidth: 2,\n      stroke: '#333333',\n      fill: '#FFFFFF'\n    },\n    label: {\n      textVerticalAnchor: 'middle',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '50%',\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'path',\n    selector: 'body'\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const Polygon = Element.define('standard.Polygon', {\n  attrs: {\n    body: {\n      refPoints: '0 0 10 0 10 10 0 10',\n      strokeWidth: 2,\n      stroke: '#333333',\n      fill: '#FFFFFF'\n    },\n    label: {\n      textVerticalAnchor: 'middle',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '50%',\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'polygon',\n    selector: 'body'\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const Polyline = Element.define('standard.Polyline', {\n  attrs: {\n    body: {\n      refPoints: '0 0 10 0 10 10 0 10 0 0',\n      strokeWidth: 2,\n      stroke: '#333333',\n      fill: '#FFFFFF'\n    },\n    label: {\n      textVerticalAnchor: 'middle',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '50%',\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'polyline',\n    selector: 'body'\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const Image = Element.define('standard.Image', {\n  attrs: {\n    image: {\n      refWidth: '100%',\n      refHeight: '100%'\n      // xlinkHref: '[URL]'\n    },\n    label: {\n      textVerticalAnchor: 'top',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '100%',\n      refY2: 10,\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'image',\n    selector: 'image'\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const BorderedImage = Element.define('standard.BorderedImage', {\n  attrs: {\n    border: {\n      refWidth: '100%',\n      refHeight: '100%',\n      stroke: '#333333',\n      strokeWidth: 2\n    },\n    background: {\n      refWidth: -1,\n      refHeight: -1,\n      x: 0.5,\n      y: 0.5,\n      fill: '#FFFFFF'\n    },\n    image: {\n      // xlinkHref: '[URL]'\n      refWidth: -1,\n      refHeight: -1,\n      x: 0.5,\n      y: 0.5\n    },\n    label: {\n      textVerticalAnchor: 'top',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '100%',\n      refY2: 10,\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'rect',\n    selector: 'background',\n    attributes: {\n      'stroke': 'none'\n    }\n  }, {\n    tagName: 'image',\n    selector: 'image'\n  }, {\n    tagName: 'rect',\n    selector: 'border',\n    attributes: {\n      'fill': 'none'\n    }\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const EmbeddedImage = Element.define('standard.EmbeddedImage', {\n  attrs: {\n    body: {\n      refWidth: '100%',\n      refHeight: '100%',\n      stroke: '#333333',\n      fill: '#FFFFFF',\n      strokeWidth: 2\n    },\n    image: {\n      // xlinkHref: '[URL]'\n      refWidth: '30%',\n      refHeight: -20,\n      x: 10,\n      y: 10,\n      preserveAspectRatio: 'xMidYMin'\n    },\n    label: {\n      textVerticalAnchor: 'top',\n      textAnchor: 'left',\n      refX: '30%',\n      refX2: 20,\n      // 10 + 10\n      refY: 10,\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'rect',\n    selector: 'body'\n  }, {\n    tagName: 'image',\n    selector: 'image'\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const InscribedImage = Element.define('standard.InscribedImage', {\n  attrs: {\n    border: {\n      refRx: '50%',\n      refRy: '50%',\n      refCx: '50%',\n      refCy: '50%',\n      stroke: '#333333',\n      strokeWidth: 2\n    },\n    background: {\n      refRx: '50%',\n      refRy: '50%',\n      refCx: '50%',\n      refCy: '50%',\n      fill: '#FFFFFF'\n    },\n    image: {\n      // The image corners touch the border when its size is Math.sqrt(2) / 2 = 0.707.. ~= 70%\n      refWidth: '68%',\n      refHeight: '68%',\n      // The image offset is calculated as (100% - 68%) / 2\n      refX: '16%',\n      refY: '16%',\n      preserveAspectRatio: 'xMidYMid'\n      // xlinkHref: '[URL]'\n    },\n    label: {\n      textVerticalAnchor: 'top',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '100%',\n      refY2: 10,\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'ellipse',\n    selector: 'background'\n  }, {\n    tagName: 'image',\n    selector: 'image'\n  }, {\n    tagName: 'ellipse',\n    selector: 'border',\n    attributes: {\n      'fill': 'none'\n    }\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }]\n});\nexport const HeaderedRectangle = Element.define('standard.HeaderedRectangle', {\n  attrs: {\n    body: {\n      refWidth: '100%',\n      refHeight: '100%',\n      strokeWidth: 2,\n      stroke: '#000000',\n      fill: '#FFFFFF'\n    },\n    header: {\n      refWidth: '100%',\n      height: 30,\n      strokeWidth: 2,\n      stroke: '#000000',\n      fill: '#FFFFFF'\n    },\n    headerText: {\n      textVerticalAnchor: 'middle',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: 15,\n      fontSize: 16,\n      fill: '#333333'\n    },\n    bodyText: {\n      textVerticalAnchor: 'middle',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '50%',\n      refY2: 15,\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'rect',\n    selector: 'body'\n  }, {\n    tagName: 'rect',\n    selector: 'header'\n  }, {\n    tagName: 'text',\n    selector: 'headerText'\n  }, {\n    tagName: 'text',\n    selector: 'bodyText'\n  }]\n});\nvar CYLINDER_TILT = 10;\nexport const Cylinder = Element.define('standard.Cylinder', {\n  attrs: {\n    body: {\n      lateralArea: CYLINDER_TILT,\n      fill: '#FFFFFF',\n      stroke: '#333333',\n      strokeWidth: 2\n    },\n    top: {\n      refCx: '50%',\n      cy: CYLINDER_TILT,\n      refRx: '50%',\n      ry: CYLINDER_TILT,\n      fill: '#FFFFFF',\n      stroke: '#333333',\n      strokeWidth: 2\n    },\n    label: {\n      textVerticalAnchor: 'middle',\n      textAnchor: 'middle',\n      refX: '50%',\n      refY: '100%',\n      refY2: 15,\n      fontSize: 14,\n      fill: '#333333'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'path',\n    selector: 'body'\n  }, {\n    tagName: 'ellipse',\n    selector: 'top'\n  }, {\n    tagName: 'text',\n    selector: 'label'\n  }],\n  topRy: function (t, opt) {\n    // getter\n    if (t === undefined) return this.attr('body/lateralArea');\n\n    // setter\n    var isPercentageSetter = isPercentage(t);\n    var bodyAttrs = {\n      lateralArea: t\n    };\n    var topAttrs = isPercentageSetter ? {\n      refCy: t,\n      refRy: t,\n      cy: null,\n      ry: null\n    } : {\n      refCy: null,\n      refRy: null,\n      cy: t,\n      ry: t\n    };\n    return this.attr({\n      body: bodyAttrs,\n      top: topAttrs\n    }, opt);\n  }\n}, {\n  attributes: {\n    lateralArea: {\n      set: function (t, refBBox) {\n        var isPercentageSetter = isPercentage(t);\n        if (isPercentageSetter) t = parseFloat(t) / 100;\n        var x = refBBox.x;\n        var y = refBBox.y;\n        var w = refBBox.width;\n        var h = refBBox.height;\n\n        // curve control point variables\n        var rx = w / 2;\n        var ry = isPercentageSetter ? h * t : t;\n        var kappa = V.KAPPA;\n        var cx = kappa * rx;\n        var cy = kappa * (isPercentageSetter ? h * t : t);\n\n        // shape variables\n        var xLeft = x;\n        var xCenter = x + w / 2;\n        var xRight = x + w;\n        var ySideTop = y + ry;\n        var yCurveTop = ySideTop - ry;\n        var ySideBottom = y + h - ry;\n        var yCurveBottom = y + h;\n\n        // return calculated shape\n        var data = ['M', xLeft, ySideTop, 'L', xLeft, ySideBottom, 'C', x, ySideBottom + cy, xCenter - cx, yCurveBottom, xCenter, yCurveBottom, 'C', xCenter + cx, yCurveBottom, xRight, ySideBottom + cy, xRight, ySideBottom, 'L', xRight, ySideTop, 'C', xRight, ySideTop - cy, xCenter + cx, yCurveTop, xCenter, yCurveTop, 'C', xCenter - cx, yCurveTop, xLeft, ySideTop - cy, xLeft, ySideTop, 'Z'];\n        return {\n          d: data.join(' ')\n        };\n      }\n    }\n  }\n});\nvar foLabelMarkup = {\n  tagName: 'foreignObject',\n  selector: 'foreignObject',\n  attributes: {\n    'overflow': 'hidden'\n  },\n  children: [{\n    tagName: 'div',\n    namespaceURI: 'http://www.w3.org/1999/xhtml',\n    selector: 'label',\n    style: {\n      width: '100%',\n      height: '100%',\n      position: 'static',\n      backgroundColor: 'transparent',\n      textAlign: 'center',\n      margin: 0,\n      padding: '0px 5px',\n      boxSizing: 'border-box',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  }]\n};\nvar svgLabelMarkup = {\n  tagName: 'text',\n  selector: 'label',\n  attributes: {\n    'text-anchor': 'middle'\n  }\n};\nvar labelMarkup = env.test('svgforeignobject') ? foLabelMarkup : svgLabelMarkup;\nexport const TextBlock = Element.define('standard.TextBlock', {\n  attrs: {\n    body: {\n      refWidth: '100%',\n      refHeight: '100%',\n      stroke: '#333333',\n      fill: '#ffffff',\n      strokeWidth: 2\n    },\n    foreignObject: {\n      refWidth: '100%',\n      refHeight: '100%'\n    },\n    label: {\n      style: {\n        fontSize: 14\n      }\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'rect',\n    selector: 'body'\n  }, labelMarkup]\n}, {\n  attributes: {\n    text: {\n      set: function (text, refBBox, node, attrs) {\n        if (node instanceof HTMLElement) {\n          node.textContent = text;\n        } else {\n          // No foreign object\n          var style = attrs.style || {};\n          var wrapValue = {\n            text: text,\n            width: -5,\n            height: '100%'\n          };\n          var wrapAttrs = assign({\n            textVerticalAnchor: 'middle'\n          }, style);\n          attributes.textWrap.set.call(this, wrapValue, refBBox, node, wrapAttrs);\n          return {\n            fill: style.color || null\n          };\n        }\n      },\n      position: function (text, refBBox, node) {\n        // No foreign object\n        if (node instanceof SVGElement) return refBBox.center();\n      }\n    }\n  }\n});\n\n// LINKS\n\nexport const Link = LinkBase.define('standard.Link', {\n  attrs: {\n    line: {\n      connection: true,\n      stroke: '#333333',\n      strokeWidth: 2,\n      strokeLinejoin: 'round',\n      targetMarker: {\n        'type': 'path',\n        'd': 'M 10 -5 0 0 10 5 z'\n      }\n    },\n    wrapper: {\n      connection: true,\n      strokeWidth: 10,\n      strokeLinejoin: 'round'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'path',\n    selector: 'wrapper',\n    attributes: {\n      'fill': 'none',\n      'cursor': 'pointer',\n      'stroke': 'transparent',\n      'stroke-linecap': 'round'\n    }\n  }, {\n    tagName: 'path',\n    selector: 'line',\n    attributes: {\n      'fill': 'none',\n      'pointer-events': 'none'\n    }\n  }]\n});\nexport const DoubleLink = LinkBase.define('standard.DoubleLink', {\n  attrs: {\n    line: {\n      connection: true,\n      stroke: '#DDDDDD',\n      strokeWidth: 4,\n      strokeLinejoin: 'round',\n      targetMarker: {\n        type: 'path',\n        stroke: '#000000',\n        d: 'M 10 -3 10 -10 -2 0 10 10 10 3'\n      }\n    },\n    outline: {\n      connection: true,\n      stroke: '#000000',\n      strokeWidth: 6,\n      strokeLinejoin: 'round'\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'path',\n    selector: 'outline',\n    attributes: {\n      'fill': 'none',\n      'cursor': 'pointer'\n    }\n  }, {\n    tagName: 'path',\n    selector: 'line',\n    attributes: {\n      'fill': 'none',\n      'pointer-events': 'none'\n    }\n  }]\n});\nexport const ShadowLink = LinkBase.define('standard.ShadowLink', {\n  attrs: {\n    line: {\n      connection: true,\n      stroke: '#FF0000',\n      strokeWidth: 20,\n      strokeLinejoin: 'round',\n      targetMarker: {\n        'type': 'path',\n        'stroke': 'none',\n        'd': 'M 0 -10 -10 0 0 10 z'\n      },\n      sourceMarker: {\n        'type': 'path',\n        'stroke': 'none',\n        'd': 'M -10 -10 0 0 -10 10 0 10 0 -10 z'\n      }\n    },\n    shadow: {\n      connection: true,\n      refX: 3,\n      refY: 6,\n      stroke: '#000000',\n      strokeOpacity: 0.2,\n      strokeWidth: 20,\n      strokeLinejoin: 'round',\n      targetMarker: {\n        'type': 'path',\n        'd': 'M 0 -10 -10 0 0 10 z',\n        'stroke': 'none'\n      },\n      sourceMarker: {\n        'type': 'path',\n        'stroke': 'none',\n        'd': 'M -10 -10 0 0 -10 10 0 10 0 -10 z'\n      }\n    }\n  }\n}, {\n  markup: [{\n    tagName: 'path',\n    selector: 'shadow',\n    attributes: {\n      'fill': 'none',\n      'pointer-events': 'none'\n    }\n  }, {\n    tagName: 'path',\n    selector: 'line',\n    attributes: {\n      'fill': 'none',\n      'cursor': 'pointer'\n    }\n  }]\n});", "import { Generic } from './basic.mjs';\nimport { Link as LinkBase } from '../dia/Link.mjs';\nimport { uniq, difference, assign, toArray, without, isObject } from '../util/index.mjs';\n\n/**\n * @deprecated use the port api instead\n */\nexport const Model = Generic.define('devs.Model', {\n  inPorts: [],\n  outPorts: [],\n  size: {\n    width: 80,\n    height: 80\n  },\n  attrs: {\n    '.': {\n      magnet: false\n    },\n    '.label': {\n      text: 'Model',\n      'ref-x': .5,\n      'ref-y': 10,\n      'font-size': 18,\n      'text-anchor': 'middle',\n      fill: '#000'\n    },\n    '.body': {\n      'ref-width': '100%',\n      'ref-height': '100%',\n      stroke: '#000'\n    }\n  },\n  ports: {\n    groups: {\n      'in': {\n        position: {\n          name: 'left'\n        },\n        attrs: {\n          '.port-label': {\n            fill: '#000'\n          },\n          '.port-body': {\n            fill: '#fff',\n            stroke: '#000',\n            r: 10,\n            magnet: true\n          }\n        },\n        label: {\n          position: {\n            name: 'left',\n            args: {\n              y: 10\n            }\n          }\n        }\n      },\n      'out': {\n        position: {\n          name: 'right'\n        },\n        attrs: {\n          '.port-label': {\n            fill: '#000'\n          },\n          '.port-body': {\n            fill: '#fff',\n            stroke: '#000',\n            r: 10,\n            magnet: true\n          }\n        },\n        label: {\n          position: {\n            name: 'right',\n            args: {\n              y: 10\n            }\n          }\n        }\n      }\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><rect class=\"body\"/><text class=\"label\"/></g>',\n  portMarkup: '<circle class=\"port-body\"/>',\n  portLabelMarkup: '<text class=\"port-label\"/>',\n  initialize: function () {\n    Generic.prototype.initialize.apply(this, arguments);\n    this.on('change:inPorts change:outPorts', this.updatePortItems, this);\n    this.updatePortItems();\n  },\n  updatePortItems: function (model, changed, opt) {\n    // Make sure all ports are unique.\n    var inPorts = uniq(this.get('inPorts'));\n    var outPorts = difference(uniq(this.get('outPorts')), inPorts);\n    var inPortItems = this.createPortItems('in', inPorts);\n    var outPortItems = this.createPortItems('out', outPorts);\n    this.prop('ports/items', inPortItems.concat(outPortItems), assign({\n      rewrite: true\n    }, opt));\n  },\n  createPortItem: function (group, port) {\n    return {\n      id: port,\n      group: group,\n      attrs: {\n        '.port-label': {\n          text: port\n        }\n      }\n    };\n  },\n  createPortItems: function (group, ports) {\n    return toArray(ports).map(this.createPortItem.bind(this, group));\n  },\n  _addGroupPort: function (port, group, opt) {\n    var ports = this.get(group);\n    return this.set(group, Array.isArray(ports) ? ports.concat(port) : [port], opt);\n  },\n  addOutPort: function (port, opt) {\n    return this._addGroupPort(port, 'outPorts', opt);\n  },\n  addInPort: function (port, opt) {\n    return this._addGroupPort(port, 'inPorts', opt);\n  },\n  _removeGroupPort: function (port, group, opt) {\n    return this.set(group, without(this.get(group), port), opt);\n  },\n  removeOutPort: function (port, opt) {\n    return this._removeGroupPort(port, 'outPorts', opt);\n  },\n  removeInPort: function (port, opt) {\n    return this._removeGroupPort(port, 'inPorts', opt);\n  },\n  _changeGroup: function (group, properties, opt) {\n    return this.prop('ports/groups/' + group, isObject(properties) ? properties : {}, opt);\n  },\n  changeInGroup: function (properties, opt) {\n    return this._changeGroup('in', properties, opt);\n  },\n  changeOutGroup: function (properties, opt) {\n    return this._changeGroup('out', properties, opt);\n  }\n});\nexport const Atomic = Model.define('devs.Atomic', {\n  size: {\n    width: 80,\n    height: 80\n  },\n  attrs: {\n    '.label': {\n      text: 'Atomic'\n    }\n  }\n});\nexport const Coupled = Model.define('devs.Coupled', {\n  size: {\n    width: 200,\n    height: 300\n  },\n  attrs: {\n    '.label': {\n      text: 'Coupled'\n    }\n  }\n});\nexport const Link = LinkBase.define('devs.Link', {\n  attrs: {\n    '.connection': {\n      'stroke-width': 2\n    }\n  }\n});", "import { Generic } from './basic.mjs';\nimport { Link } from '../dia/Link.mjs';\nexport const Gate = Generic.define('logic.Gate', {\n  size: {\n    width: 80,\n    height: 40\n  },\n  attrs: {\n    '.': {\n      magnet: false\n    },\n    '.body': {\n      width: 100,\n      height: 50\n    },\n    circle: {\n      r: 7,\n      stroke: 'black',\n      fill: 'transparent',\n      'stroke-width': 2\n    }\n  }\n}, {\n  operation: function () {\n    return true;\n  }\n});\nexport const IO = Gate.define('logic.IO', {\n  size: {\n    width: 60,\n    height: 30\n  },\n  attrs: {\n    '.body': {\n      fill: 'white',\n      stroke: 'black',\n      'stroke-width': 2\n    },\n    '.wire': {\n      ref: '.body',\n      'ref-y': .5,\n      stroke: 'black'\n    },\n    text: {\n      fill: 'black',\n      ref: '.body',\n      'ref-x': .5,\n      'ref-y': .5,\n      'y-alignment': 'middle',\n      'text-anchor': 'middle',\n      'font-weight': 'bold',\n      'font-variant': 'small-caps',\n      'text-transform': 'capitalize',\n      'font-size': '14px'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"body\"/></g><path class=\"wire\"/><circle/><text/></g>'\n});\nexport const Input = IO.define('logic.Input', {\n  attrs: {\n    '.wire': {\n      'ref-dx': 0,\n      d: 'M 0 0 L 23 0'\n    },\n    circle: {\n      ref: '.body',\n      'ref-dx': 30,\n      'ref-y': 0.5,\n      magnet: true,\n      'class': 'output',\n      port: 'out'\n    },\n    text: {\n      text: 'input'\n    }\n  }\n});\nexport const Output = IO.define('logic.Output', {\n  attrs: {\n    '.wire': {\n      'ref-x': 0,\n      d: 'M 0 0 L -23 0'\n    },\n    circle: {\n      ref: '.body',\n      'ref-x': -30,\n      'ref-y': 0.5,\n      magnet: 'passive',\n      'class': 'input',\n      port: 'in'\n    },\n    text: {\n      text: 'output'\n    }\n  }\n});\nexport const Gate11 = Gate.define('logic.Gate11', {\n  attrs: {\n    '.input': {\n      ref: '.body',\n      'ref-x': -2,\n      'ref-y': 0.5,\n      magnet: 'passive',\n      port: 'in'\n    },\n    '.output': {\n      ref: '.body',\n      'ref-dx': 2,\n      'ref-y': 0.5,\n      magnet: true,\n      port: 'out'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><image class=\"body\"/></g><circle class=\"input\"/><circle class=\"output\"/></g>'\n});\nexport const Gate21 = Gate.define('logic.Gate21', {\n  attrs: {\n    '.input1': {\n      ref: '.body',\n      'ref-x': -2,\n      'ref-y': 0.3,\n      magnet: 'passive',\n      port: 'in1'\n    },\n    '.input2': {\n      ref: '.body',\n      'ref-x': -2,\n      'ref-y': 0.7,\n      magnet: 'passive',\n      port: 'in2'\n    },\n    '.output': {\n      ref: '.body',\n      'ref-dx': 2,\n      'ref-y': 0.5,\n      magnet: true,\n      port: 'out'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><image class=\"body\"/></g><circle class=\"input input1\"/><circle  class=\"input input2\"/><circle class=\"output\"/></g>'\n});\nexport const Repeater = Gate11.define('logic.Repeater', {\n  attrs: {\n    image: {\n      'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo='\n    }\n  }\n}, {\n  operation: function (input) {\n    return input;\n  }\n});\nexport const Not = Gate11.define('logic.Not', {\n  attrs: {\n    image: {\n      'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K'\n    }\n  }\n}, {\n  operation: function (input) {\n    return !input;\n  }\n});\nexport const Or = Gate21.define('logic.Or', {\n  attrs: {\n    image: {\n      'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo='\n    }\n  }\n}, {\n  operation: function (input1, input2) {\n    return input1 || input2;\n  }\n});\nexport const And = Gate21.define('logic.And', {\n  attrs: {\n    image: {\n      'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=='\n    }\n  }\n}, {\n  operation: function (input1, input2) {\n    return input1 && input2;\n  }\n});\nexport const Nor = Gate21.define('logic.Nor', {\n  attrs: {\n    image: {\n      'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K'\n    }\n  }\n}, {\n  operation: function (input1, input2) {\n    return !(input1 || input2);\n  }\n});\nexport const Nand = Gate21.define('logic.Nand', {\n  attrs: {\n    image: {\n      'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=='\n    }\n  }\n}, {\n  operation: function (input1, input2) {\n    return !(input1 && input2);\n  }\n});\nexport const Xor = Gate21.define('logic.Xor', {\n  attrs: {\n    image: {\n      'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K'\n    }\n  }\n}, {\n  operation: function (input1, input2) {\n    return (!input1 || input2) && (input1 || !input2);\n  }\n});\nexport const Xnor = Gate21.define('logic.Xnor', {\n  attrs: {\n    image: {\n      'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=='\n    }\n  }\n}, {\n  operation: function (input1, input2) {\n    return (!input1 || !input2) && (input1 || input2);\n  }\n});\nexport const Wire = Link.define('logic.Wire', {\n  attrs: {\n    '.connection': {\n      'stroke-width': 2\n    },\n    '.marker-vertex': {\n      r: 7\n    }\n  },\n  router: {\n    name: 'orthogonal'\n  },\n  connector: {\n    name: 'rounded',\n    args: {\n      radius: 10\n    }\n  }\n}, {\n  arrowheadMarkup: ['<g class=\"marker-arrowhead-group marker-arrowhead-group-<%= end %>\">', '<circle class=\"marker-arrowhead\" end=\"<%= end %>\" r=\"7\"/>', '</g>'].join(''),\n  vertexMarkup: ['<g class=\"marker-vertex-group\" transform=\"translate(<%= x %>, <%= y %>)\">', '<circle class=\"marker-vertex\" idx=\"<%= idx %>\" r=\"10\" />', '<g class=\"marker-vertex-remove-group\">', '<path class=\"marker-vertex-remove-area\" idx=\"<%= idx %>\" d=\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\" transform=\"translate(5, -33)\"/>', '<path class=\"marker-vertex-remove\" idx=\"<%= idx %>\" transform=\"scale(.8) translate(9.5, -37)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\">', '<title>Remove vertex.</title>', '</path>', '</g>', '</g>'].join('')\n});", "import { Generic } from './basic.mjs';\nexport const KingWhite = Generic.define('chess.KingWhite', {\n  size: {\n    width: 42,\n    height: 38\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\"><path      d=\"M 22.5,11.63 L 22.5,6\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path      d=\"M 20,8 L 25,8\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path      d=\"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\"      style=\"fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;\" />    <path      d=\"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z \"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 11.5,30 C 17,27 27,27 32.5,30\"      style=\"fill:none; stroke:#000000;\" />    <path      d=\"M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5\"      style=\"fill:none; stroke:#000000;\" />    <path      d=\"M 11.5,37 C 17,34 27,34 32.5,37\"      style=\"fill:none; stroke:#000000;\" />  </g></g></g>'\n});\nexport const KingBlack = Generic.define('chess.KingBlack', {\n  size: {\n    width: 42,\n    height: 38\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path       d=\"M 22.5,11.63 L 22.5,6\"       style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\"       id=\"path6570\" />    <path       d=\"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\"       style=\"fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;\" />    <path       d=\"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z \"       style=\"fill:#000000; stroke:#000000;\" />    <path       d=\"M 20,8 L 25,8\"       style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path       d=\"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37\"       style=\"fill:none; stroke:#ffffff;\" />  </g></g></g>'\n});\nexport const QueenWhite = Generic.define('chess.QueenWhite', {\n  size: {\n    width: 42,\n    height: 38\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(-1,-1)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(15.5,-5.5)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(32,-1)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(7,-4.5)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(24,-4)\" />    <path      d=\"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11.5,30 C 15,29 30,29 33.5,30\"      style=\"fill:none;\" />    <path      d=\"M 12,33.5 C 18,32.5 27,32.5 33,33.5\"      style=\"fill:none;\" />  </g></g></g>'\n});\nexport const QueenBlack = Generic.define('chess.QueenBlack', {\n  size: {\n    width: 42,\n    height: 38\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#000000; stroke:none;\">      <circle cx=\"6\"    cy=\"12\" r=\"2.75\" />      <circle cx=\"14\"   cy=\"9\"  r=\"2.75\" />      <circle cx=\"22.5\" cy=\"8\"  r=\"2.75\" />      <circle cx=\"31\"   cy=\"9\"  r=\"2.75\" />      <circle cx=\"39\"   cy=\"12\" r=\"2.75\" />    </g>    <path       d=\"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\"       style=\"stroke-linecap:butt; stroke:#000000;\" />    <path       d=\"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z\"       style=\"stroke-linecap:butt;\" />    <path       d=\"M 11,38.5 A 35,35 1 0 0 34,38.5\"       style=\"fill:none; stroke:#000000; stroke-linecap:butt;\" />    <path       d=\"M 11,29 A 35,35 1 0 1 34,29\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 12.5,31.5 L 32.5,31.5\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5\"       style=\"fill:none; stroke:#ffffff;\" />  </g></g></g>'\n});\nexport const RookWhite = Generic.define('chess.RookWhite', {\n  size: {\n    width: 32,\n    height: 34\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14\"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 34,14 L 31,17 L 14,17 L 11,14\" />    <path      d=\"M 31,17 L 31,29.5 L 14,29.5 L 14,17\"      style=\"stroke-linecap:butt; stroke-linejoin:miter;\" />    <path      d=\"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5\" />    <path      d=\"M 11,14 L 34,14\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />  </g></g></g>'\n});\nexport const RookBlack = Generic.define('chess.RookBlack', {\n  size: {\n    width: 32,\n    height: 34\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z \"      style=\"stroke-linecap:butt;stroke-linejoin:miter;\" />    <path      d=\"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,35.5 L 33,35.5 L 33,35.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 13,31.5 L 32,31.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 14,29.5 L 31,29.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 14,16.5 L 31,16.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 11,14 L 34,14\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />  </g></g></g>'\n});\nexport const BishopWhite = Generic.define('chess.BishopWhite', {\n  size: {\n    width: 38,\n    height: 38\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#ffffff; stroke:#000000; stroke-linecap:butt;\">       <path        d=\"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z\" />      <path        d=\"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\" />      <path        d=\"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\" />    </g>    <path      d=\"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />  </g></g></g>'\n});\nexport const BishopBlack = Generic.define('chess.BishopBlack', {\n  size: {\n    width: 38,\n    height: 38\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#000000; stroke:#000000; stroke-linecap:butt;\">       <path        d=\"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z\" />      <path        d=\"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\" />      <path        d=\"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\" />    </g>    <path       d=\"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\"       style=\"fill:none; stroke:#ffffff; stroke-linejoin:miter;\" />  </g></g></g>'\n});\nexport const KnightWhite = Generic.define('chess.KnightWhite', {\n  size: {\n    width: 38,\n    height: 37\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\"      transform=\"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\"      style=\"fill:#000000; stroke:#000000;\" />  </g></g></g>'\n});\nexport const KnightBlack = Generic.define('chess.KnightBlack', {\n  size: {\n    width: 38,\n    height: 37\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\"      style=\"fill:#ffffff; stroke:#ffffff;\" />    <path      d=\"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\"      transform=\"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\"      style=\"fill:#ffffff; stroke:#ffffff;\" />    <path      d=\"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z \"      style=\"fill:#ffffff; stroke:none;\" />  </g></g></g>'\n});\nexport const PawnWhite = Generic.define('chess.PawnWhite', {\n  size: {\n    width: 28,\n    height: 33\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><path d=\"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z \"  style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\" /></g></g>'\n});\nexport const PawnBlack = Generic.define('chess.PawnBlack', {\n  size: {\n    width: 28,\n    height: 33\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><path d=\"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z \"  style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\" /></g></g>'\n});", "import { Element } from '../dia/Element.mjs';\nimport { Link } from '../dia/Link.mjs';\nexport const Entity = Element.define('erd.Entity', {\n  size: {\n    width: 150,\n    height: 60\n  },\n  attrs: {\n    '.outer': {\n      fill: '#2ECC71',\n      stroke: '#27AE60',\n      'stroke-width': 2,\n      points: '100,0 100,60 0,60 0,0'\n    },\n    '.inner': {\n      fill: '#2ECC71',\n      stroke: '#27AE60',\n      'stroke-width': 2,\n      points: '95,5 95,55 5,55 5,5',\n      display: 'none'\n    },\n    text: {\n      text: 'Entity',\n      'font-family': 'Arial',\n      'font-size': 14,\n      'ref-x': .5,\n      'ref-y': .5,\n      'y-alignment': 'middle',\n      'text-anchor': 'middle'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"outer\"/><polygon class=\"inner\"/></g><text/></g>'\n});\nexport const WeakEntity = Entity.define('erd.WeakEntity', {\n  attrs: {\n    '.inner': {\n      display: 'auto'\n    },\n    text: {\n      text: 'Weak Entity'\n    }\n  }\n});\nexport const Relationship = Element.define('erd.Relationship', {\n  size: {\n    width: 80,\n    height: 80\n  },\n  attrs: {\n    '.outer': {\n      fill: '#3498DB',\n      stroke: '#2980B9',\n      'stroke-width': 2,\n      points: '40,0 80,40 40,80 0,40'\n    },\n    '.inner': {\n      fill: '#3498DB',\n      stroke: '#2980B9',\n      'stroke-width': 2,\n      points: '40,5 75,40 40,75 5,40',\n      display: 'none'\n    },\n    text: {\n      text: 'Relationship',\n      'font-family': 'Arial',\n      'font-size': 12,\n      'ref-x': .5,\n      'ref-y': .5,\n      'y-alignment': 'middle',\n      'text-anchor': 'middle'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"outer\"/><polygon class=\"inner\"/></g><text/></g>'\n});\nexport const IdentifyingRelationship = Relationship.define('erd.IdentifyingRelationship', {\n  attrs: {\n    '.inner': {\n      display: 'auto'\n    },\n    text: {\n      text: 'Identifying'\n    }\n  }\n});\nexport const Attribute = Element.define('erd.Attribute', {\n  size: {\n    width: 100,\n    height: 50\n  },\n  attrs: {\n    'ellipse': {\n      transform: 'translate(50, 25)'\n    },\n    '.outer': {\n      stroke: '#D35400',\n      'stroke-width': 2,\n      cx: 0,\n      cy: 0,\n      rx: 50,\n      ry: 25,\n      fill: '#E67E22'\n    },\n    '.inner': {\n      stroke: '#D35400',\n      'stroke-width': 2,\n      cx: 0,\n      cy: 0,\n      rx: 45,\n      ry: 20,\n      fill: '#E67E22',\n      display: 'none'\n    },\n    text: {\n      'font-family': 'Arial',\n      'font-size': 14,\n      'ref-x': .5,\n      'ref-y': .5,\n      'y-alignment': 'middle',\n      'text-anchor': 'middle'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><ellipse class=\"outer\"/><ellipse class=\"inner\"/></g><text/></g>'\n});\nexport const Multivalued = Attribute.define('erd.Multivalued', {\n  attrs: {\n    '.inner': {\n      display: 'block'\n    },\n    text: {\n      text: 'multivalued'\n    }\n  }\n});\nexport const Derived = Attribute.define('erd.Derived', {\n  attrs: {\n    '.outer': {\n      'stroke-dasharray': '3,5'\n    },\n    text: {\n      text: 'derived'\n    }\n  }\n});\nexport const Key = Attribute.define('erd.Key', {\n  attrs: {\n    ellipse: {\n      'stroke-width': 4\n    },\n    text: {\n      text: 'key',\n      'font-weight': '800',\n      'text-decoration': 'underline'\n    }\n  }\n});\nexport const Normal = Attribute.define('erd.Normal', {\n  attrs: {\n    text: {\n      text: 'Normal'\n    }\n  }\n});\nexport const ISA = Element.define('erd.ISA', {\n  type: 'erd.ISA',\n  size: {\n    width: 100,\n    height: 50\n  },\n  attrs: {\n    polygon: {\n      points: '0,0 50,50 100,0',\n      fill: '#F1C40F',\n      stroke: '#F39C12',\n      'stroke-width': 2\n    },\n    text: {\n      text: 'ISA',\n      'font-size': 18,\n      'ref-x': .5,\n      'ref-y': .3,\n      'y-alignment': 'middle',\n      'text-anchor': 'middle'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon/></g><text/></g>'\n});\nexport const Line = Link.define('erd.Line', {}, {\n  cardinality: function (value) {\n    this.set('labels', [{\n      position: -20,\n      attrs: {\n        text: {\n          dy: -8,\n          text: value\n        }\n      }\n    }]);\n  }\n});", "import { Circle } from './basic.mjs';\nimport { Element } from '../dia/Element.mjs';\nimport { Link } from '../dia/Link.mjs';\nexport const State = Circle.define('fsa.State', {\n  attrs: {\n    circle: {\n      'stroke-width': 3\n    },\n    text: {\n      'font-weight': '800'\n    }\n  }\n});\nexport const StartState = Element.define('fsa.StartState', {\n  size: {\n    width: 20,\n    height: 20\n  },\n  attrs: {\n    circle: {\n      transform: 'translate(10, 10)',\n      r: 10,\n      fill: '#000000'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle/></g></g>'\n});\nexport const EndState = Element.define('fsa.EndState', {\n  size: {\n    width: 20,\n    height: 20\n  },\n  attrs: {\n    '.outer': {\n      transform: 'translate(10, 10)',\n      r: 10,\n      fill: '#ffffff',\n      stroke: '#000000'\n    },\n    '.inner': {\n      transform: 'translate(10, 10)',\n      r: 6,\n      fill: '#000000'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"outer\"/><circle class=\"inner\"/></g></g>'\n});\nexport const Arrow = Link.define('fsa.Arrow', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 10 0 L 0 5 L 10 10 z'\n    }\n  },\n  smooth: true\n});", "import { Element } from '../dia/Element.mjs';\nimport { Link } from '../dia/Link.mjs';\nexport const Member = Element.define('org.Member', {\n  size: {\n    width: 180,\n    height: 70\n  },\n  attrs: {\n    rect: {\n      width: 170,\n      height: 60\n    },\n    '.card': {\n      fill: '#FFFFFF',\n      stroke: '#000000',\n      'stroke-width': 2,\n      'pointer-events': 'visiblePainted',\n      rx: 10,\n      ry: 10\n    },\n    image: {\n      width: 48,\n      height: 48,\n      ref: '.card',\n      'ref-x': 10,\n      'ref-y': 5\n    },\n    '.rank': {\n      'text-decoration': 'underline',\n      ref: '.card',\n      'ref-x': 0.9,\n      'ref-y': 0.2,\n      'font-family': 'Courier New',\n      'font-size': 14,\n      'text-anchor': 'end'\n    },\n    '.name': {\n      'font-weight': '800',\n      ref: '.card',\n      'ref-x': 0.9,\n      'ref-y': 0.6,\n      'font-family': 'Courier New',\n      'font-size': 14,\n      'text-anchor': 'end'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"card\"/><image/></g><text class=\"rank\"/><text class=\"name\"/></g>'\n});\nexport const Arrow = Link.define('org.Arrow', {\n  source: {\n    selector: '.card'\n  },\n  target: {\n    selector: '.card'\n  },\n  attrs: {\n    '.connection': {\n      stroke: '#585858',\n      'stroke-width': 3\n    }\n  },\n  z: -1\n});", "import { Generic } from './basic.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport V from '../V/index.mjs';\nimport { Link as diaLink } from '../dia/Link.mjs';\nexport const Place = Generic.define('pn.Place', {\n  size: {\n    width: 50,\n    height: 50\n  },\n  attrs: {\n    '.root': {\n      r: 25,\n      fill: '#ffffff',\n      stroke: '#000000',\n      transform: 'translate(25, 25)'\n    },\n    '.label': {\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': -20,\n      ref: '.root',\n      fill: '#000000',\n      'font-size': 12\n    },\n    '.tokens > circle': {\n      fill: '#000000',\n      r: 5\n    },\n    '.tokens.one > circle': {\n      transform: 'translate(25, 25)'\n    },\n    '.tokens.two > circle:nth-child(1)': {\n      transform: 'translate(19, 25)'\n    },\n    '.tokens.two > circle:nth-child(2)': {\n      transform: 'translate(31, 25)'\n    },\n    '.tokens.three > circle:nth-child(1)': {\n      transform: 'translate(18, 29)'\n    },\n    '.tokens.three > circle:nth-child(2)': {\n      transform: 'translate(25, 19)'\n    },\n    '.tokens.three > circle:nth-child(3)': {\n      transform: 'translate(32, 29)'\n    },\n    '.tokens.alot > text': {\n      transform: 'translate(25, 18)',\n      'text-anchor': 'middle',\n      fill: '#000000'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>'\n});\nexport const PlaceView = ElementView.extend({\n  presentationAttributes: ElementView.addPresentationAttributes({\n    tokens: ['TOKENS']\n  }),\n  initFlag: ElementView.prototype.initFlag.concat(['TOKENS']),\n  confirmUpdate: function (...args) {\n    let flags = ElementView.prototype.confirmUpdate.call(this, ...args);\n    if (this.hasFlag(flags, 'TOKENS')) {\n      this.renderTokens();\n      this.update();\n      flags = this.removeFlag(flags, 'TOKENS');\n    }\n    return flags;\n  },\n  renderTokens: function () {\n    const vTokens = this.vel.findOne('.tokens').empty();\n    ['one', 'two', 'three', 'alot'].forEach(function (className) {\n      vTokens.removeClass(className);\n    });\n    var tokens = this.model.get('tokens');\n    if (!tokens) return;\n    switch (tokens) {\n      case 1:\n        vTokens.addClass('one');\n        vTokens.append(V('circle'));\n        break;\n      case 2:\n        vTokens.addClass('two');\n        vTokens.append([V('circle'), V('circle')]);\n        break;\n      case 3:\n        vTokens.addClass('three');\n        vTokens.append([V('circle'), V('circle'), V('circle')]);\n        break;\n      default:\n        vTokens.addClass('alot');\n        vTokens.append(V('text').text(tokens + ''));\n        break;\n    }\n  }\n});\nexport const Transition = Generic.define('pn.Transition', {\n  size: {\n    width: 12,\n    height: 50\n  },\n  attrs: {\n    'rect': {\n      width: 12,\n      height: 50,\n      fill: '#000000',\n      stroke: '#000000'\n    },\n    '.label': {\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': -20,\n      ref: 'rect',\n      fill: '#000000',\n      'font-size': 12\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>'\n});\nexport const Link = diaLink.define('pn.Link', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 10 0 L 0 5 L 10 10 z'\n    }\n  }\n});", "import { ElementView } from '../dia/ElementView.mjs';\nimport { Link } from '../dia/Link.mjs';\nimport { Generic, Circle } from './basic.mjs';\nexport const Class = Generic.define('uml.Class', {\n  attrs: {\n    rect: {\n      'width': 200\n    },\n    '.uml-class-name-rect': {\n      'stroke': 'black',\n      'stroke-width': 2,\n      'fill': '#3498db'\n    },\n    '.uml-class-attrs-rect': {\n      'stroke': 'black',\n      'stroke-width': 2,\n      'fill': '#2980b9'\n    },\n    '.uml-class-methods-rect': {\n      'stroke': 'black',\n      'stroke-width': 2,\n      'fill': '#2980b9'\n    },\n    '.uml-class-name-text': {\n      'ref': '.uml-class-name-rect',\n      'ref-y': .5,\n      'ref-x': .5,\n      'text-anchor': 'middle',\n      'y-alignment': 'middle',\n      'font-weight': 'bold',\n      'fill': 'black',\n      'font-size': 12,\n      'font-family': 'Times New Roman'\n    },\n    '.uml-class-attrs-text': {\n      'ref': '.uml-class-attrs-rect',\n      'ref-y': 5,\n      'ref-x': 5,\n      'fill': 'black',\n      'font-size': 12,\n      'font-family': 'Times New Roman'\n    },\n    '.uml-class-methods-text': {\n      'ref': '.uml-class-methods-rect',\n      'ref-y': 5,\n      'ref-x': 5,\n      'fill': 'black',\n      'font-size': 12,\n      'font-family': 'Times New Roman'\n    }\n  },\n  name: [],\n  attributes: [],\n  methods: []\n}, {\n  markup: ['<g class=\"rotatable\">', '<g class=\"scalable\">', '<rect class=\"uml-class-name-rect\"/><rect class=\"uml-class-attrs-rect\"/><rect class=\"uml-class-methods-rect\"/>', '</g>', '<text class=\"uml-class-name-text\"/><text class=\"uml-class-attrs-text\"/><text class=\"uml-class-methods-text\"/>', '</g>'].join(''),\n  initialize: function () {\n    this.on('change:name change:attributes change:methods', function () {\n      this.updateRectangles();\n      this.trigger('uml-update');\n    }, this);\n    this.updateRectangles();\n    Generic.prototype.initialize.apply(this, arguments);\n  },\n  getClassName: function () {\n    return this.get('name');\n  },\n  updateRectangles: function () {\n    var attrs = this.get('attrs');\n    var rects = [{\n      type: 'name',\n      text: this.getClassName()\n    }, {\n      type: 'attrs',\n      text: this.get('attributes')\n    }, {\n      type: 'methods',\n      text: this.get('methods')\n    }];\n    var offsetY = 0;\n    rects.forEach(function (rect) {\n      var lines = Array.isArray(rect.text) ? rect.text : [rect.text];\n      var rectHeight = lines.length * 20 + 20;\n      attrs['.uml-class-' + rect.type + '-text'].text = lines.join('\\n');\n      attrs['.uml-class-' + rect.type + '-rect'].height = rectHeight;\n      attrs['.uml-class-' + rect.type + '-rect'].transform = 'translate(0,' + offsetY + ')';\n      offsetY += rectHeight;\n    });\n  }\n});\nexport const ClassView = ElementView.extend({\n  initialize: function () {\n    ElementView.prototype.initialize.apply(this, arguments);\n    this.listenTo(this.model, 'uml-update', function () {\n      this.update();\n      this.resize();\n    });\n  }\n});\nexport const Abstract = Class.define('uml.Abstract', {\n  attrs: {\n    '.uml-class-name-rect': {\n      fill: '#e74c3c'\n    },\n    '.uml-class-attrs-rect': {\n      fill: '#c0392b'\n    },\n    '.uml-class-methods-rect': {\n      fill: '#c0392b'\n    }\n  }\n}, {\n  getClassName: function () {\n    return ['<<Abstract>>', this.get('name')];\n  }\n});\nexport const AbstractView = ClassView;\nexport const Interface = Class.define('uml.Interface', {\n  attrs: {\n    '.uml-class-name-rect': {\n      fill: '#f1c40f'\n    },\n    '.uml-class-attrs-rect': {\n      fill: '#f39c12'\n    },\n    '.uml-class-methods-rect': {\n      fill: '#f39c12'\n    }\n  }\n}, {\n  getClassName: function () {\n    return ['<<Interface>>', this.get('name')];\n  }\n});\nexport const InterfaceView = ClassView;\nexport const Generalization = Link.define('uml.Generalization', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 20 0 L 0 10 L 20 20 z',\n      fill: 'white'\n    }\n  }\n});\nexport const Implementation = Link.define('uml.Implementation', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 20 0 L 0 10 L 20 20 z',\n      fill: 'white'\n    },\n    '.connection': {\n      'stroke-dasharray': '3,3'\n    }\n  }\n});\nexport const Aggregation = Link.define('uml.Aggregation', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 40 10 L 20 20 L 0 10 L 20 0 z',\n      fill: 'white'\n    }\n  }\n});\nexport const Composition = Link.define('uml.Composition', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 40 10 L 20 20 L 0 10 L 20 0 z',\n      fill: 'black'\n    }\n  }\n});\nexport const Association = Link.define('uml.Association');\n\n// Statechart\n\nexport const State = Generic.define('uml.State', {\n  attrs: {\n    '.uml-state-body': {\n      'width': 200,\n      'height': 200,\n      'rx': 10,\n      'ry': 10,\n      'fill': '#ecf0f1',\n      'stroke': '#bdc3c7',\n      'stroke-width': 3\n    },\n    '.uml-state-separator': {\n      'stroke': '#bdc3c7',\n      'stroke-width': 2\n    },\n    '.uml-state-name': {\n      'ref': '.uml-state-body',\n      'ref-x': .5,\n      'ref-y': 5,\n      'text-anchor': 'middle',\n      'fill': '#000000',\n      'font-family': 'Courier New',\n      'font-size': 14\n    },\n    '.uml-state-events': {\n      'ref': '.uml-state-separator',\n      'ref-x': 5,\n      'ref-y': 5,\n      'fill': '#000000',\n      'font-family': 'Courier New',\n      'font-size': 14\n    }\n  },\n  name: 'State',\n  events: []\n}, {\n  markup: ['<g class=\"rotatable\">', '<g class=\"scalable\">', '<rect class=\"uml-state-body\"/>', '</g>', '<path class=\"uml-state-separator\"/>', '<text class=\"uml-state-name\"/>', '<text class=\"uml-state-events\"/>', '</g>'].join(''),\n  initialize: function () {\n    this.on({\n      'change:name': this.updateName,\n      'change:events': this.updateEvents,\n      'change:size': this.updatePath\n    }, this);\n    this.updateName();\n    this.updateEvents();\n    this.updatePath();\n    Generic.prototype.initialize.apply(this, arguments);\n  },\n  updateName: function () {\n    this.attr('.uml-state-name/text', this.get('name'));\n  },\n  updateEvents: function () {\n    this.attr('.uml-state-events/text', this.get('events').join('\\n'));\n  },\n  updatePath: function () {\n    var d = 'M 0 20 L ' + this.get('size').width + ' 20';\n\n    // We are using `silent: true` here because updatePath() is meant to be called\n    // on resize and there's no need to to update the element twice (`change:size`\n    // triggers also an update).\n    this.attr('.uml-state-separator/d', d, {\n      silent: true\n    });\n  }\n});\nexport const StartState = Circle.define('uml.StartState', {\n  type: 'uml.StartState',\n  attrs: {\n    circle: {\n      'fill': '#34495e',\n      'stroke': '#2c3e50',\n      'stroke-width': 2,\n      'rx': 1\n    }\n  }\n});\nexport const EndState = Generic.define('uml.EndState', {\n  size: {\n    width: 20,\n    height: 20\n  },\n  attrs: {\n    'circle.outer': {\n      transform: 'translate(10, 10)',\n      r: 10,\n      fill: '#ffffff',\n      stroke: '#2c3e50'\n    },\n    'circle.inner': {\n      transform: 'translate(10, 10)',\n      r: 6,\n      fill: '#34495e'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"outer\"/><circle class=\"inner\"/></g></g>'\n});\nexport const Transition = Link.define('uml.Transition', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 10 0 L 0 5 L 10 10 z',\n      fill: '#34495e',\n      stroke: '#2c3e50'\n    },\n    '.connection': {\n      stroke: '#2c3e50'\n    }\n  }\n});", "import * as util from '../util/index.mjs';\nfunction abs2rel(absolute, max) {\n  if (max === 0) return '0%';\n  // round to 3 decimal places\n  const dp = 1000;\n  const relative = Math.round(absolute / max * 100 * dp) / dp;\n  return `${relative}%`;\n}\nfunction pin(relative) {\n  return function (end, view, magnet, coords) {\n    var fn = view.isNodeConnection(magnet) ? pinnedLinkEnd : pinnedElementEnd;\n    return fn(relative, end, view, magnet, coords);\n  };\n}\nfunction pinnedElementEnd(relative, end, view, magnet, coords) {\n  var angle = view.model.angle();\n  var bbox = view.getNodeUnrotatedBBox(magnet);\n  var origin = view.model.getBBox().center();\n  coords.rotate(origin, angle);\n  var dx = coords.x - bbox.x;\n  var dy = coords.y - bbox.y;\n  if (relative) {\n    dx = abs2rel(dx, bbox.width);\n    dy = abs2rel(dy, bbox.height);\n  }\n  end.anchor = {\n    name: 'topLeft',\n    args: {\n      dx: dx,\n      dy: dy,\n      rotate: true\n    }\n  };\n  return end;\n}\nfunction pinnedLinkEnd(relative, end, view, _magnet, coords) {\n  var connection = view.getConnection();\n  if (!connection) return end;\n  var length = connection.closestPointLength(coords);\n  if (relative) {\n    var totalLength = connection.length();\n    end.anchor = {\n      name: 'connectionRatio',\n      args: {\n        ratio: length / totalLength\n      }\n    };\n  } else {\n    end.anchor = {\n      name: 'connectionLength',\n      args: {\n        length: length\n      }\n    };\n  }\n  return end;\n}\nexport const useDefaults = util.noop;\nexport const pinAbsolute = pin(false);\nexport const pinRelative = pin(true);", "export * from './Vertices.mjs';\nexport * from './Segments.mjs';\nexport * from './Arrowhead.mjs';\nexport * from './Boundary.mjs';\nexport * from './Anchor.mjs';\nexport * from './Button.mjs';\nexport * from './Connect.mjs';\nexport * from './HoverConnect.mjs';", "import * as g from '../g/index.mjs';\nimport * as util from '../util/index.mjs';\nimport * as mvc from '../mvc/index.mjs';\nimport { ToolView } from '../dia/ToolView.mjs';\nimport V from '../V/index.mjs';\n\n// Vertex Handles\nvar VertexHandle = mvc.View.extend({\n  tagName: 'circle',\n  svgElement: true,\n  className: 'marker-vertex',\n  events: {\n    mousedown: 'onPointerDown',\n    touchstart: 'onPointerDown',\n    dblclick: 'onDoubleClick',\n    dbltap: 'onDoubleClick'\n  },\n  documentEvents: {\n    mousemove: 'onPointerMove',\n    touchmove: 'onPointerMove',\n    mouseup: 'onPointerUp',\n    touchend: 'onPointerUp',\n    touchcancel: 'onPointerUp'\n  },\n  attributes: {\n    'r': 6,\n    'fill': '#33334F',\n    'stroke': '#FFFFFF',\n    'stroke-width': 2,\n    'cursor': 'move'\n  },\n  position: function (x, y) {\n    const {\n      vel,\n      options\n    } = this;\n    const {\n      scale\n    } = options;\n    let matrix = V.createSVGMatrix().translate(x, y);\n    if (scale) matrix = matrix.scale(scale);\n    vel.transform(matrix, {\n      absolute: true\n    });\n  },\n  onPointerDown: function (evt) {\n    if (this.options.guard(evt)) return;\n    evt.stopPropagation();\n    evt.preventDefault();\n    this.options.paper.undelegateEvents();\n    this.delegateDocumentEvents(null, evt.data);\n    this.trigger('will-change', this, evt);\n  },\n  onPointerMove: function (evt) {\n    this.trigger('changing', this, evt);\n  },\n  onDoubleClick: function (evt) {\n    this.trigger('remove', this, evt);\n  },\n  onPointerUp: function (evt) {\n    this.trigger('changed', this, evt);\n    this.undelegateDocumentEvents();\n    this.options.paper.delegateEvents();\n  }\n});\nexport const Vertices = ToolView.extend({\n  name: 'vertices',\n  options: {\n    handleClass: VertexHandle,\n    snapRadius: 20,\n    redundancyRemoval: true,\n    vertexAdding: true,\n    stopPropagation: true,\n    scale: null\n  },\n  children: [{\n    tagName: 'path',\n    selector: 'connection',\n    className: 'joint-vertices-path',\n    attributes: {\n      'fill': 'none',\n      'stroke': 'transparent',\n      'stroke-width': 10,\n      'cursor': 'cell'\n    }\n  }],\n  handles: null,\n  events: {\n    'mousedown .joint-vertices-path': 'onPathPointerDown',\n    'touchstart .joint-vertices-path': 'onPathPointerDown'\n  },\n  onRender: function () {\n    if (this.options.vertexAdding) {\n      this.renderChildren();\n      this.updatePath();\n    }\n    this.resetHandles();\n    this.renderHandles();\n    return this;\n  },\n  update: function () {\n    var relatedView = this.relatedView;\n    var vertices = relatedView.model.vertices();\n    if (vertices.length === this.handles.length) {\n      this.updateHandles();\n    } else {\n      this.resetHandles();\n      this.renderHandles();\n    }\n    if (this.options.vertexAdding) {\n      this.updatePath();\n    }\n    return this;\n  },\n  resetHandles: function () {\n    var handles = this.handles;\n    this.handles = [];\n    this.stopListening();\n    if (!Array.isArray(handles)) return;\n    for (var i = 0, n = handles.length; i < n; i++) {\n      handles[i].remove();\n    }\n  },\n  renderHandles: function () {\n    var relatedView = this.relatedView;\n    var vertices = relatedView.model.vertices();\n    for (var i = 0, n = vertices.length; i < n; i++) {\n      var vertex = vertices[i];\n      var handle = new this.options.handleClass({\n        index: i,\n        paper: this.paper,\n        scale: this.options.scale,\n        guard: evt => this.guard(evt)\n      });\n      handle.render();\n      handle.position(vertex.x, vertex.y);\n      this.simulateRelatedView(handle.el);\n      handle.vel.appendTo(this.el);\n      this.handles.push(handle);\n      this.startHandleListening(handle);\n    }\n  },\n  updateHandles: function () {\n    var relatedView = this.relatedView;\n    var vertices = relatedView.model.vertices();\n    for (var i = 0, n = vertices.length; i < n; i++) {\n      var vertex = vertices[i];\n      var handle = this.handles[i];\n      if (!handle) return;\n      handle.position(vertex.x, vertex.y);\n    }\n  },\n  updatePath: function () {\n    var connection = this.childNodes.connection;\n    if (connection) connection.setAttribute('d', this.relatedView.getSerializedConnection());\n  },\n  startHandleListening: function (handle) {\n    var relatedView = this.relatedView;\n    if (relatedView.can('vertexMove')) {\n      this.listenTo(handle, 'will-change', this.onHandleWillChange);\n      this.listenTo(handle, 'changing', this.onHandleChanging);\n      this.listenTo(handle, 'changed', this.onHandleChanged);\n    }\n    if (relatedView.can('vertexRemove')) {\n      this.listenTo(handle, 'remove', this.onHandleRemove);\n    }\n  },\n  getNeighborPoints: function (index) {\n    var linkView = this.relatedView;\n    var vertices = linkView.model.vertices();\n    var prev = index > 0 ? vertices[index - 1] : linkView.sourceAnchor;\n    var next = index < vertices.length - 1 ? vertices[index + 1] : linkView.targetAnchor;\n    return {\n      prev: new g.Point(prev),\n      next: new g.Point(next)\n    };\n  },\n  onHandleWillChange: function (_handle, evt) {\n    this.focus();\n    const {\n      relatedView,\n      options\n    } = this;\n    relatedView.model.startBatch('vertex-move', {\n      ui: true,\n      tool: this.cid\n    });\n    if (!options.stopPropagation) relatedView.notifyPointerdown(...relatedView.paper.getPointerArgs(evt));\n  },\n  onHandleChanging: function (handle, evt) {\n    const {\n      options,\n      relatedView: linkView\n    } = this;\n    var index = handle.options.index;\n    var [normalizedEvent, x, y] = linkView.paper.getPointerArgs(evt);\n    var vertex = {\n      x,\n      y\n    };\n    this.snapVertex(vertex, index);\n    linkView.model.vertex(index, vertex, {\n      ui: true,\n      tool: this.cid\n    });\n    handle.position(vertex.x, vertex.y);\n    if (!options.stopPropagation) linkView.notifyPointermove(normalizedEvent, x, y);\n  },\n  onHandleChanged: function (_handle, evt) {\n    const {\n      options,\n      relatedView: linkView\n    } = this;\n    if (options.vertexAdding) this.updatePath();\n    if (!options.redundancyRemoval) return;\n    var verticesRemoved = linkView.removeRedundantLinearVertices({\n      ui: true,\n      tool: this.cid\n    });\n    if (verticesRemoved) this.render();\n    this.blur();\n    linkView.model.stopBatch('vertex-move', {\n      ui: true,\n      tool: this.cid\n    });\n    if (this.eventData(evt).vertexAdded) {\n      linkView.model.stopBatch('vertex-add', {\n        ui: true,\n        tool: this.cid\n      });\n    }\n    var [normalizedEvt, x, y] = linkView.paper.getPointerArgs(evt);\n    if (!options.stopPropagation) linkView.notifyPointerup(normalizedEvt, x, y);\n    linkView.checkMouseleave(normalizedEvt);\n  },\n  snapVertex: function (vertex, index) {\n    var snapRadius = this.options.snapRadius;\n    if (snapRadius > 0) {\n      var neighbors = this.getNeighborPoints(index);\n      var prev = neighbors.prev;\n      var next = neighbors.next;\n      if (Math.abs(vertex.x - prev.x) < snapRadius) {\n        vertex.x = prev.x;\n      } else if (Math.abs(vertex.x - next.x) < snapRadius) {\n        vertex.x = next.x;\n      }\n      if (Math.abs(vertex.y - prev.y) < snapRadius) {\n        vertex.y = neighbors.prev.y;\n      } else if (Math.abs(vertex.y - next.y) < snapRadius) {\n        vertex.y = next.y;\n      }\n    }\n  },\n  onHandleRemove: function (handle, evt) {\n    var index = handle.options.index;\n    var linkView = this.relatedView;\n    linkView.model.removeVertex(index, {\n      ui: true\n    });\n    if (this.options.vertexAdding) this.updatePath();\n    linkView.checkMouseleave(util.normalizeEvent(evt));\n  },\n  onPathPointerDown: function (evt) {\n    if (this.guard(evt)) return;\n    evt.stopPropagation();\n    evt.preventDefault();\n    var normalizedEvent = util.normalizeEvent(evt);\n    var vertex = this.paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY).toJSON();\n    var relatedView = this.relatedView;\n    relatedView.model.startBatch('vertex-add', {\n      ui: true,\n      tool: this.cid\n    });\n    var index = relatedView.getVertexIndex(vertex.x, vertex.y);\n    this.snapVertex(vertex, index);\n    relatedView.model.insertVertex(index, vertex, {\n      ui: true,\n      tool: this.cid\n    });\n    this.update();\n    var handle = this.handles[index];\n    this.eventData(normalizedEvent, {\n      vertexAdded: true\n    });\n    handle.onPointerDown(normalizedEvent);\n  },\n  onRemove: function () {\n    this.resetHandles();\n  }\n}, {\n  VertexHandle: VertexHandle // keep as class property\n});", "import * as connectionStrategies from '../connectionStrategies/index.mjs';\nexport function getViewBBox(view, useModelGeometry) {\n  const {\n    model\n  } = view;\n  if (useModelGeometry) return model.getBBox();\n  return model.isLink() ? view.getConnection().bbox() : view.getNodeUnrotatedBBox(view.el);\n}\nexport function getAnchor(coords, view, magnet) {\n  // take advantage of an existing logic inside of the\n  // pin relative connection strategy\n  var end = connectionStrategies.pinRelative.call(this.paper, {}, view, magnet, coords, this.model);\n  return end.anchor;\n}\nexport function snapAnchor(coords, view, magnet, type, relatedView, toolView) {\n  var snapRadius = toolView.options.snapRadius;\n  var isSource = type === 'source';\n  var refIndex = isSource ? 0 : -1;\n  var ref = this.model.vertex(refIndex) || this.getEndAnchor(isSource ? 'target' : 'source');\n  if (ref) {\n    if (Math.abs(ref.x - coords.x) < snapRadius) coords.x = ref.x;\n    if (Math.abs(ref.y - coords.y) < snapRadius) coords.y = ref.y;\n  }\n  return coords;\n}", "import * as g from '../g/index.mjs';\nimport V from '../V/index.mjs';\nimport * as util from '../util/index.mjs';\nimport * as mvc from '../mvc/index.mjs';\nimport { ToolView } from '../dia/ToolView.mjs';\nimport { getAnchor } from './helpers.mjs';\nvar SegmentHandle = mvc.View.extend({\n  tagName: 'g',\n  svgElement: true,\n  className: 'marker-segment',\n  events: {\n    mousedown: 'onPointerDown',\n    touchstart: 'onPointerDown'\n  },\n  documentEvents: {\n    mousemove: 'onPointerMove',\n    touchmove: 'onPointerMove',\n    mouseup: 'onPointerUp',\n    touchend: 'onPointerUp',\n    touchcancel: 'onPointerUp'\n  },\n  children: [{\n    tagName: 'line',\n    selector: 'line',\n    attributes: {\n      'stroke': '#33334F',\n      'stroke-width': 2,\n      'fill': 'none',\n      'pointer-events': 'none'\n    }\n  }, {\n    tagName: 'rect',\n    selector: 'handle',\n    attributes: {\n      'width': 20,\n      'height': 8,\n      'x': -10,\n      'y': -4,\n      'rx': 4,\n      'ry': 4,\n      'fill': '#33334F',\n      'stroke': '#FFFFFF',\n      'stroke-width': 2\n    }\n  }],\n  onRender: function () {\n    this.renderChildren();\n  },\n  position: function (x, y, angle, view) {\n    const {\n      scale\n    } = this.options;\n    let matrix = V.createSVGMatrix().translate(x, y).rotate(angle);\n    if (scale) matrix = matrix.scale(scale);\n    var handle = this.childNodes.handle;\n    handle.setAttribute('transform', V.matrixToTransformString(matrix));\n    handle.setAttribute('cursor', angle % 180 === 0 ? 'row-resize' : 'col-resize');\n    var viewPoint = view.getClosestPoint(new g.Point(x, y));\n    var line = this.childNodes.line;\n    line.setAttribute('x1', x);\n    line.setAttribute('y1', y);\n    line.setAttribute('x2', viewPoint.x);\n    line.setAttribute('y2', viewPoint.y);\n  },\n  onPointerDown: function (evt) {\n    if (this.options.guard(evt)) return;\n    this.trigger('change:start', this, evt);\n    evt.stopPropagation();\n    evt.preventDefault();\n    this.options.paper.undelegateEvents();\n    this.delegateDocumentEvents(null, evt.data);\n  },\n  onPointerMove: function (evt) {\n    this.trigger('changing', this, evt);\n  },\n  onPointerUp: function (evt) {\n    this.undelegateDocumentEvents();\n    this.options.paper.delegateEvents();\n    this.trigger('change:end', this, evt);\n  },\n  show: function () {\n    this.el.style.display = '';\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n  }\n});\nexport const Segments = ToolView.extend({\n  name: 'segments',\n  precision: .5,\n  options: {\n    handleClass: SegmentHandle,\n    segmentLengthThreshold: 40,\n    redundancyRemoval: true,\n    anchor: getAnchor,\n    snapRadius: 10,\n    snapHandle: true,\n    stopPropagation: true\n  },\n  handles: null,\n  onRender: function () {\n    this.resetHandles();\n    var relatedView = this.relatedView;\n    var vertices = relatedView.model.vertices();\n    vertices.unshift(relatedView.sourcePoint);\n    vertices.push(relatedView.targetPoint);\n    for (var i = 0, n = vertices.length; i < n - 1; i++) {\n      var vertex = vertices[i];\n      var nextVertex = vertices[i + 1];\n      var handle = this.renderHandle(vertex, nextVertex);\n      this.simulateRelatedView(handle.el);\n      this.handles.push(handle);\n      handle.options.index = i;\n    }\n    return this;\n  },\n  renderHandle: function (vertex, nextVertex) {\n    var handle = new this.options.handleClass({\n      paper: this.paper,\n      scale: this.options.scale,\n      guard: evt => this.guard(evt)\n    });\n    handle.render();\n    this.updateHandle(handle, vertex, nextVertex);\n    handle.vel.appendTo(this.el);\n    this.startHandleListening(handle);\n    return handle;\n  },\n  update: function () {\n    this.render();\n    return this;\n  },\n  startHandleListening: function (handle) {\n    this.listenTo(handle, 'change:start', this.onHandleChangeStart);\n    this.listenTo(handle, 'changing', this.onHandleChanging);\n    this.listenTo(handle, 'change:end', this.onHandleChangeEnd);\n  },\n  resetHandles: function () {\n    var handles = this.handles;\n    this.handles = [];\n    this.stopListening();\n    if (!Array.isArray(handles)) return;\n    for (var i = 0, n = handles.length; i < n; i++) {\n      handles[i].remove();\n    }\n  },\n  shiftHandleIndexes: function (value) {\n    var handles = this.handles;\n    for (var i = 0, n = handles.length; i < n; i++) handles[i].options.index += value;\n  },\n  resetAnchor: function (type, anchor) {\n    var relatedModel = this.relatedView.model;\n    if (anchor) {\n      relatedModel.prop([type, 'anchor'], anchor, {\n        rewrite: true,\n        ui: true,\n        tool: this.cid\n      });\n    } else {\n      relatedModel.removeProp([type, 'anchor'], {\n        ui: true,\n        tool: this.cid\n      });\n    }\n  },\n  snapHandle: function (handle, position, data) {\n    var index = handle.options.index;\n    var linkView = this.relatedView;\n    var link = linkView.model;\n    var vertices = link.vertices();\n    var axis = handle.options.axis;\n    var prev = vertices[index - 2] || data.sourceAnchor;\n    var next = vertices[index + 1] || data.targetAnchor;\n    var snapRadius = this.options.snapRadius;\n    if (Math.abs(position[axis] - prev[axis]) < snapRadius) {\n      position[axis] = prev[axis];\n    } else if (Math.abs(position[axis] - next[axis]) < snapRadius) {\n      position[axis] = next[axis];\n    }\n    return position;\n  },\n  onHandleChanging: function (handle, evt) {\n    const {\n      options\n    } = this;\n    var data = this.eventData(evt);\n    var relatedView = this.relatedView;\n    var paper = relatedView.paper;\n    var index = handle.options.index - 1;\n    var normalizedEvent = util.normalizeEvent(evt);\n    var coords = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n    var position = this.snapHandle(handle, coords.clone(), data);\n    var axis = handle.options.axis;\n    var offset = this.options.snapHandle ? 0 : coords[axis] - position[axis];\n    var link = relatedView.model;\n    var vertices = util.cloneDeep(link.vertices());\n    var anchorFn = this.options.anchor;\n    if (typeof anchorFn !== 'function') anchorFn = null;\n    const handleIndex = handle.options.index;\n    const vertexPoints = [relatedView.sourcePoint.clone(), ...vertices, relatedView.targetPoint.clone()];\n    let indexOffset = 0;\n\n    // check if vertex before handle vertex exists\n    if (handleIndex - 1 >= 0) {\n      const v1 = vertexPoints[handleIndex - 1];\n      const v2 = vertexPoints[handleIndex];\n      const theta = new g.Line(v1, v2).vector().theta();\n\n      // check only non-orthogonal segments\n      if (theta % 90 !== 0) {\n        vertices.splice(handleIndex - 1, 0, data.originalVertices[handleIndex - 1]);\n        indexOffset++;\n        this.shiftHandleIndexes(1);\n      }\n    }\n    var vertex = vertices[index + indexOffset];\n    var nextVertex = vertices[index + 1 + indexOffset];\n\n    // check if vertex after handle vertex exists\n    if (handleIndex + 2 < vertexPoints.length) {\n      const v1 = vertexPoints[handleIndex + 1];\n      const v2 = vertexPoints[handleIndex + 2];\n      const theta = new g.Line(v1, v2).vector().theta();\n\n      // check only non-orthogonal segments\n      if (theta % 90 !== 0) {\n        const isSingleVertex = data.originalVertices.length === 1;\n        const origVIndex = isSingleVertex ? 0 : handleIndex;\n        const additionalOffset = data.firstHandleShifted && !isSingleVertex ? 1 : 0;\n        let nextVIndex = 1 + indexOffset;\n        vertices.splice(handleIndex + nextVIndex, 0, data.originalVertices[origVIndex - additionalOffset]);\n      }\n    }\n\n    // First Segment\n    var sourceView = relatedView.sourceView;\n    var sourceBBox = relatedView.sourceBBox;\n    var changeSourceAnchor = false;\n    var deleteSourceAnchor = false;\n    if (!vertex) {\n      vertex = relatedView.sourceAnchor.toJSON();\n      vertex[axis] = position[axis];\n      if (sourceBBox.containsPoint(vertex)) {\n        vertex[axis] = position[axis];\n        changeSourceAnchor = true;\n      } else {\n        // we left the area of the source magnet for the first time\n        vertices.unshift(vertex);\n        this.shiftHandleIndexes(1);\n        data.firstHandleShifted = true;\n        deleteSourceAnchor = true;\n      }\n    } else if (index === 0) {\n      if (sourceBBox.containsPoint(vertex)) {\n        vertices.shift();\n        this.shiftHandleIndexes(-1);\n        changeSourceAnchor = true;\n      } else {\n        vertex[axis] = position[axis];\n        deleteSourceAnchor = true;\n      }\n    } else {\n      vertex[axis] = position[axis];\n    }\n    if (anchorFn && sourceView) {\n      if (changeSourceAnchor) {\n        var sourceAnchorPosition = data.sourceAnchor.clone();\n        sourceAnchorPosition[axis] = position[axis];\n        var sourceAnchor = anchorFn.call(relatedView, sourceAnchorPosition, sourceView, relatedView.sourceMagnet || sourceView.el, 'source', relatedView);\n        this.resetAnchor('source', sourceAnchor);\n      }\n      if (deleteSourceAnchor) {\n        this.resetAnchor('source', data.sourceAnchorDef);\n      }\n    }\n\n    // Last segment\n    var targetView = relatedView.targetView;\n    var targetBBox = relatedView.targetBBox;\n    var changeTargetAnchor = false;\n    var deleteTargetAnchor = false;\n    if (!nextVertex) {\n      nextVertex = relatedView.targetAnchor.toJSON();\n      nextVertex[axis] = position[axis];\n      if (targetBBox.containsPoint(nextVertex)) {\n        changeTargetAnchor = true;\n      } else {\n        // we left the area of the target magnet for the first time\n        vertices.push(nextVertex);\n        deleteTargetAnchor = true;\n      }\n    } else if (index === vertices.length - 2) {\n      if (targetBBox.containsPoint(nextVertex)) {\n        vertices.pop();\n        changeTargetAnchor = true;\n      } else {\n        nextVertex[axis] = position[axis];\n        deleteTargetAnchor = true;\n      }\n    } else {\n      nextVertex[axis] = position[axis];\n    }\n    if (anchorFn && targetView) {\n      if (changeTargetAnchor) {\n        var targetAnchorPosition = data.targetAnchor.clone();\n        targetAnchorPosition[axis] = position[axis];\n        var targetAnchor = anchorFn.call(relatedView, targetAnchorPosition, targetView, relatedView.targetMagnet || targetView.el, 'target', relatedView);\n        this.resetAnchor('target', targetAnchor);\n      }\n      if (deleteTargetAnchor) {\n        this.resetAnchor('target', data.targetAnchorDef);\n      }\n    }\n    if (vertices.some(v => !v)) {\n      // This can happen when the link is using a smart routing and the number of\n      // vertices is not the same as the number of route points.\n      throw new Error('Segments: incompatible router in use');\n    }\n    link.vertices(vertices, {\n      ui: true,\n      tool: this.cid\n    });\n    this.updateHandle(handle, vertex, nextVertex, offset);\n    if (!options.stopPropagation) relatedView.notifyPointermove(normalizedEvent, coords.x, coords.y);\n  },\n  onHandleChangeStart: function (handle, evt) {\n    const {\n      options,\n      handles,\n      relatedView: linkView\n    } = this;\n    const {\n      model,\n      paper\n    } = linkView;\n    var index = handle.options.index;\n    if (!Array.isArray(handles)) return;\n    for (var i = 0, n = handles.length; i < n; i++) {\n      if (i !== index) handles[i].hide();\n    }\n    this.focus();\n    this.eventData(evt, {\n      sourceAnchor: linkView.sourceAnchor.clone(),\n      targetAnchor: linkView.targetAnchor.clone(),\n      sourceAnchorDef: util.clone(model.prop(['source', 'anchor'])),\n      targetAnchorDef: util.clone(model.prop(['target', 'anchor'])),\n      originalVertices: util.cloneDeep(model.vertices()),\n      firstHandleShifted: false\n    });\n    model.startBatch('segment-move', {\n      ui: true,\n      tool: this.cid\n    });\n    if (!options.stopPropagation) linkView.notifyPointerdown(...paper.getPointerArgs(evt));\n  },\n  onHandleChangeEnd: function (_handle, evt) {\n    const {\n      options,\n      relatedView: linkView\n    } = this;\n    const {\n      paper,\n      model\n    } = linkView;\n    if (options.redundancyRemoval) {\n      linkView.removeRedundantLinearVertices({\n        ui: true,\n        tool: this.cid\n      });\n    }\n    const normalizedEvent = util.normalizeEvent(evt);\n    const coords = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n    this.render();\n    this.blur();\n    model.stopBatch('segment-move', {\n      ui: true,\n      tool: this.cid\n    });\n    if (!options.stopPropagation) linkView.notifyPointerup(normalizedEvent, coords.x, coords.y);\n    linkView.checkMouseleave(normalizedEvent);\n  },\n  updateHandle: function (handle, vertex, nextVertex, offset) {\n    var vertical = Math.abs(vertex.x - nextVertex.x) < this.precision;\n    var horizontal = Math.abs(vertex.y - nextVertex.y) < this.precision;\n    if (vertical || horizontal) {\n      var segmentLine = new g.Line(vertex, nextVertex);\n      var length = segmentLine.length();\n      if (length < this.options.segmentLengthThreshold) {\n        handle.hide();\n      } else {\n        var position = segmentLine.midpoint();\n        var axis = vertical ? 'x' : 'y';\n        position[axis] += offset || 0;\n        var angle = segmentLine.vector().vectorAngle(new g.Point(1, 0));\n        handle.position(position.x, position.y, angle, this.relatedView);\n        handle.show();\n        handle.options.axis = axis;\n      }\n    } else {\n      handle.hide();\n    }\n  },\n  onRemove: function () {\n    this.resetHandles();\n  }\n}, {\n  SegmentHandle: SegmentHandle // keep as class property\n});", "import * as g from '../g/index.mjs';\nimport V from '../V/index.mjs';\nimport * as util from '../util/index.mjs';\nimport { ToolView } from '../dia/ToolView.mjs';\n\n// End Markers\nconst Arrowhead = ToolView.extend({\n  tagName: 'path',\n  xAxisVector: new g.Point(1, 0),\n  events: {\n    mousedown: 'onPointerDown',\n    touchstart: 'onPointerDown'\n  },\n  documentEvents: {\n    mousemove: 'onPointerMove',\n    touchmove: 'onPointerMove',\n    mouseup: 'onPointerUp',\n    touchend: 'onPointerUp',\n    touchcancel: 'onPointerUp'\n  },\n  options: {\n    scale: null\n  },\n  onRender: function () {\n    this.update();\n  },\n  update: function () {\n    var ratio = this.ratio;\n    var view = this.relatedView;\n    var tangent = view.getTangentAtRatio(ratio);\n    var position, angle;\n    if (tangent) {\n      position = tangent.start;\n      angle = tangent.vector().vectorAngle(this.xAxisVector) || 0;\n    } else {\n      position = view.getPointAtRatio(ratio);\n      angle = 0;\n    }\n    if (!position) return this;\n    var matrix = V.createSVGMatrix().translate(position.x, position.y).rotate(angle);\n    const {\n      scale\n    } = this.options;\n    if (scale) matrix = matrix.scale(scale);\n    this.vel.transform(matrix, {\n      absolute: true\n    });\n    return this;\n  },\n  onPointerDown: function (evt) {\n    if (this.guard(evt)) return;\n    evt.stopPropagation();\n    evt.preventDefault();\n    var relatedView = this.relatedView;\n    relatedView.model.startBatch('arrowhead-move', {\n      ui: true,\n      tool: this.cid\n    });\n    if (relatedView.can('arrowheadMove')) {\n      relatedView.startArrowheadMove(this.arrowheadType);\n      this.delegateDocumentEvents();\n      relatedView.paper.undelegateEvents();\n    }\n    this.focus();\n    this.el.style.pointerEvents = 'none';\n  },\n  onPointerMove: function (evt) {\n    var normalizedEvent = util.normalizeEvent(evt);\n    var coords = this.paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n    this.relatedView.pointermove(normalizedEvent, coords.x, coords.y);\n  },\n  onPointerUp: function (evt) {\n    this.undelegateDocumentEvents();\n    var relatedView = this.relatedView;\n    var paper = relatedView.paper;\n    var normalizedEvent = util.normalizeEvent(evt);\n    var coords = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n    relatedView.pointerup(normalizedEvent, coords.x, coords.y);\n    paper.delegateEvents();\n    this.blur();\n    this.el.style.pointerEvents = '';\n    relatedView.model.stopBatch('arrowhead-move', {\n      ui: true,\n      tool: this.cid\n    });\n  }\n});\nexport const TargetArrowhead = Arrowhead.extend({\n  name: 'target-arrowhead',\n  ratio: 1,\n  arrowheadType: 'target',\n  attributes: {\n    'd': 'M -10 -8 10 0 -10 8 Z',\n    'fill': '#33334F',\n    'stroke': '#FFFFFF',\n    'stroke-width': 2,\n    'cursor': 'move',\n    'class': 'target-arrowhead'\n  }\n});\nexport const SourceArrowhead = Arrowhead.extend({\n  name: 'source-arrowhead',\n  ratio: 0,\n  arrowheadType: 'source',\n  attributes: {\n    'd': 'M 10 -8 -10 0 10 8 Z',\n    'fill': '#33334F',\n    'stroke': '#FFFFFF',\n    'stroke-width': 2,\n    'cursor': 'move',\n    'class': 'source-arrowhead'\n  }\n});", "import * as util from '../util/index.mjs';\nimport { ToolView } from '../dia/ToolView.mjs';\nimport { getViewBBox } from './helpers.mjs';\nexport const Boundary = ToolView.extend({\n  name: 'boundary',\n  tagName: 'rect',\n  options: {\n    padding: 10,\n    useModelGeometry: false\n  },\n  attributes: {\n    'fill': 'none',\n    'stroke': '#33334F',\n    'stroke-width': .5,\n    'stroke-dasharray': '5, 5',\n    'pointer-events': 'none'\n  },\n  onRender: function () {\n    this.update();\n  },\n  update: function () {\n    const {\n      relatedView: view,\n      options,\n      vel\n    } = this;\n    const {\n      useModelGeometry,\n      rotate\n    } = options;\n    const padding = util.normalizeSides(options.padding);\n    let bbox = getViewBBox(view, useModelGeometry).moveAndExpand({\n      x: -padding.left,\n      y: -padding.top,\n      width: padding.left + padding.right,\n      height: padding.top + padding.bottom\n    });\n    var model = view.model;\n    if (model.isElement()) {\n      var angle = model.angle();\n      if (angle) {\n        if (rotate) {\n          var origin = model.getBBox().center();\n          vel.rotate(angle, origin.x, origin.y, {\n            absolute: true\n          });\n        } else {\n          bbox = bbox.bbox(angle);\n        }\n      }\n    }\n    vel.attr(bbox.toJSON());\n    return this;\n  }\n});", "import * as g from '../g/index.mjs';\nimport * as util from '../util/index.mjs';\nimport { ToolView } from '../dia/ToolView.mjs';\nimport { getAnchor, snapAnchor } from './helpers.mjs';\nconst Anchor = ToolView.extend({\n  tagName: 'g',\n  type: null,\n  children: [{\n    tagName: 'circle',\n    selector: 'anchor',\n    attributes: {\n      'cursor': 'pointer'\n    }\n  }, {\n    tagName: 'rect',\n    selector: 'area',\n    attributes: {\n      'pointer-events': 'none',\n      'fill': 'none',\n      'stroke': '#33334F',\n      'stroke-dasharray': '2,4',\n      'rx': 5,\n      'ry': 5\n    }\n  }],\n  events: {\n    mousedown: 'onPointerDown',\n    touchstart: 'onPointerDown',\n    dblclick: 'onPointerDblClick',\n    dbltap: 'onPointerDblClick'\n  },\n  documentEvents: {\n    mousemove: 'onPointerMove',\n    touchmove: 'onPointerMove',\n    mouseup: 'onPointerUp',\n    touchend: 'onPointerUp',\n    touchcancel: 'onPointerUp'\n  },\n  options: {\n    snap: snapAnchor,\n    anchor: getAnchor,\n    scale: null,\n    resetAnchor: true,\n    customAnchorAttributes: {\n      'stroke-width': 4,\n      'stroke': '#33334F',\n      'fill': '#FFFFFF',\n      'r': 5\n    },\n    defaultAnchorAttributes: {\n      'stroke-width': 2,\n      'stroke': '#FFFFFF',\n      'fill': '#33334F',\n      'r': 6\n    },\n    areaPadding: 6,\n    snapRadius: 10,\n    restrictArea: true,\n    redundancyRemoval: true\n  },\n  onRender: function () {\n    this.renderChildren();\n    this.toggleArea(false);\n    this.update();\n  },\n  update: function () {\n    var type = this.type;\n    var relatedView = this.relatedView;\n    var view = relatedView.getEndView(type);\n    if (view) {\n      this.updateAnchor();\n      this.updateArea();\n      this.el.style.display = '';\n    } else {\n      this.el.style.display = 'none';\n    }\n    return this;\n  },\n  updateAnchor: function () {\n    var childNodes = this.childNodes;\n    if (!childNodes) return;\n    var anchorNode = childNodes.anchor;\n    if (!anchorNode) return;\n    var relatedView = this.relatedView;\n    var type = this.type;\n    var position = relatedView.getEndAnchor(type);\n    var options = this.options;\n    var customAnchor = relatedView.model.prop([type, 'anchor']);\n    let transformString = `translate(${position.x},${position.y})`;\n    if (options.scale) {\n      transformString += ` scale(${options.scale})`;\n    }\n    anchorNode.setAttribute('transform', transformString);\n    var anchorAttributes = customAnchor ? options.customAnchorAttributes : options.defaultAnchorAttributes;\n    for (var attrName in anchorAttributes) {\n      anchorNode.setAttribute(attrName, anchorAttributes[attrName]);\n    }\n  },\n  updateArea: function () {\n    var childNodes = this.childNodes;\n    if (!childNodes) return;\n    var areaNode = childNodes.area;\n    if (!areaNode) return;\n    var relatedView = this.relatedView;\n    var type = this.type;\n    var view = relatedView.getEndView(type);\n    var model = view.model;\n    var magnet = relatedView.getEndMagnet(type);\n    var padding = this.options.areaPadding;\n    if (!isFinite(padding)) padding = 0;\n    var bbox, angle, center;\n    if (view.isNodeConnection(magnet)) {\n      bbox = view.getNodeBBox(magnet);\n      angle = 0;\n      center = bbox.center();\n    } else {\n      bbox = view.getNodeUnrotatedBBox(magnet);\n      angle = model.angle();\n      center = bbox.center();\n      if (angle) center.rotate(model.getBBox().center(), -angle);\n      // TODO: get the link's magnet rotation into account\n    }\n    bbox.inflate(padding);\n    areaNode.setAttribute('x', -bbox.width / 2);\n    areaNode.setAttribute('y', -bbox.height / 2);\n    areaNode.setAttribute('width', bbox.width);\n    areaNode.setAttribute('height', bbox.height);\n    areaNode.setAttribute('transform', 'translate(' + center.x + ',' + center.y + ') rotate(' + angle + ')');\n  },\n  toggleArea: function (visible) {\n    var childNodes = this.childNodes;\n    if (!childNodes) return;\n    var areaNode = childNodes.area;\n    if (!areaNode) return;\n    areaNode.style.display = visible ? '' : 'none';\n  },\n  onPointerDown: function (evt) {\n    if (this.guard(evt)) return;\n    evt.stopPropagation();\n    evt.preventDefault();\n    this.paper.undelegateEvents();\n    this.delegateDocumentEvents();\n    this.focus();\n    this.toggleArea(this.options.restrictArea);\n    this.relatedView.model.startBatch('anchor-move', {\n      ui: true,\n      tool: this.cid\n    });\n  },\n  resetAnchor: function (anchor) {\n    var type = this.type;\n    var relatedModel = this.relatedView.model;\n    if (anchor) {\n      relatedModel.prop([type, 'anchor'], anchor, {\n        rewrite: true,\n        ui: true,\n        tool: this.cid\n      });\n    } else {\n      relatedModel.removeProp([type, 'anchor'], {\n        ui: true,\n        tool: this.cid\n      });\n    }\n  },\n  onPointerMove: function (evt) {\n    var relatedView = this.relatedView;\n    var type = this.type;\n    var view = relatedView.getEndView(type);\n    var model = view.model;\n    var magnet = relatedView.getEndMagnet(type);\n    var normalizedEvent = util.normalizeEvent(evt);\n    var coords = this.paper.clientToLocalPoint(normalizedEvent.clientX, normalizedEvent.clientY);\n    var snapFn = this.options.snap;\n    if (typeof snapFn === 'function') {\n      coords = snapFn.call(relatedView, coords, view, magnet, type, relatedView, this);\n      coords = new g.Point(coords);\n    }\n    if (this.options.restrictArea) {\n      if (view.isNodeConnection(magnet)) {\n        // snap coords to the link's connection\n        var pointAtConnection = view.getClosestPoint(coords);\n        if (pointAtConnection) coords = pointAtConnection;\n      } else {\n        // snap coords within node bbox\n        var bbox = view.getNodeUnrotatedBBox(magnet);\n        var angle = model.angle();\n        var origin = model.getBBox().center();\n        var rotatedCoords = coords.clone().rotate(origin, angle);\n        if (!bbox.containsPoint(rotatedCoords)) {\n          coords = bbox.pointNearestToPoint(rotatedCoords).rotate(origin, -angle);\n        }\n      }\n    }\n    var anchor;\n    var anchorFn = this.options.anchor;\n    if (typeof anchorFn === 'function') {\n      anchor = anchorFn.call(relatedView, coords, view, magnet, type, relatedView);\n    }\n    this.resetAnchor(anchor);\n    this.update();\n  },\n  onPointerUp: function (evt) {\n    const normalizedEvent = util.normalizeEvent(evt);\n    this.paper.delegateEvents();\n    this.undelegateDocumentEvents();\n    this.blur();\n    this.toggleArea(false);\n    var linkView = this.relatedView;\n    if (this.options.redundancyRemoval) linkView.removeRedundantLinearVertices({\n      ui: true,\n      tool: this.cid\n    });\n    linkView.checkMouseleave(normalizedEvent);\n    linkView.model.stopBatch('anchor-move', {\n      ui: true,\n      tool: this.cid\n    });\n  },\n  onPointerDblClick: function () {\n    var anchor = this.options.resetAnchor;\n    if (anchor === false) return; // reset anchor disabled\n    if (anchor === true) anchor = null; // remove the current anchor\n    this.resetAnchor(util.cloneDeep(anchor));\n    this.update();\n  }\n});\nexport const SourceAnchor = Anchor.extend({\n  name: 'source-anchor',\n  type: 'source'\n});\nexport const TargetAnchor = Anchor.extend({\n  name: 'target-anchor',\n  type: 'target'\n});", "import { evalCalcAttribute, isCalcAttribute } from '../dia/attributes/calc.mjs';\nimport { ToolView } from '../dia/ToolView.mjs';\nimport { getViewBBox } from './helpers.mjs';\nimport * as util from '../util/index.mjs';\nimport * as g from '../g/index.mjs';\nimport V from '../V/index.mjs';\nexport const Button = ToolView.extend({\n  name: 'button',\n  events: {\n    'mousedown': 'onPointerDown',\n    'touchstart': 'onPointerDown'\n  },\n  options: {\n    distance: 0,\n    offset: 0,\n    scale: null,\n    rotate: false\n  },\n  onRender: function () {\n    this.renderChildren(this.options.markup);\n    this.update();\n  },\n  update: function () {\n    this.position();\n    return this;\n  },\n  position: function () {\n    const {\n      vel\n    } = this;\n    vel.transform(this.getCellMatrix(), {\n      absolute: true\n    });\n  },\n  getCellMatrix() {\n    return this.relatedView.model.isLink() ? this.getLinkMatrix() : this.getElementMatrix();\n  },\n  getElementMatrix() {\n    const {\n      relatedView: view,\n      options\n    } = this;\n    let {\n      x = 0,\n      y = 0,\n      offset = {},\n      useModelGeometry,\n      rotate,\n      scale\n    } = options;\n    let bbox = getViewBBox(view, useModelGeometry);\n    const angle = view.model.angle();\n    if (!rotate) bbox = bbox.bbox(angle);\n    const {\n      x: offsetX = 0,\n      y: offsetY = 0\n    } = offset;\n    if (util.isPercentage(x)) {\n      x = parseFloat(x) / 100 * bbox.width;\n    } else if (isCalcAttribute(x)) {\n      x = Number(evalCalcAttribute(x, bbox));\n    }\n    if (util.isPercentage(y)) {\n      y = parseFloat(y) / 100 * bbox.height;\n    } else if (isCalcAttribute(y)) {\n      y = Number(evalCalcAttribute(y, bbox));\n    }\n    let matrix = V.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n    if (rotate) matrix = matrix.rotate(angle);\n    matrix = matrix.translate(x + offsetX - bbox.width / 2, y + offsetY - bbox.height / 2);\n    if (scale) matrix = matrix.scale(scale);\n    return matrix;\n  },\n  getLinkMatrix() {\n    const {\n      relatedView: view,\n      options\n    } = this;\n    const {\n      offset = 0,\n      distance = 0,\n      rotate,\n      scale\n    } = options;\n    let tangent, position, angle;\n    if (util.isPercentage(distance)) {\n      tangent = view.getTangentAtRatio(parseFloat(distance) / 100);\n    } else {\n      tangent = view.getTangentAtLength(distance);\n    }\n    if (tangent) {\n      position = tangent.start;\n      angle = tangent.vector().vectorAngle(new g.Point(1, 0)) || 0;\n    } else {\n      position = view.getConnection().start;\n      angle = 0;\n    }\n    let matrix = V.createSVGMatrix().translate(position.x, position.y).rotate(angle).translate(0, offset);\n    if (!rotate) matrix = matrix.rotate(-angle);\n    if (scale) matrix = matrix.scale(scale);\n    return matrix;\n  },\n  onPointerDown: function (evt) {\n    if (this.guard(evt)) return;\n    evt.stopPropagation();\n    evt.preventDefault();\n    var actionFn = this.options.action;\n    if (typeof actionFn === 'function') {\n      actionFn.call(this.relatedView, evt, this.relatedView, this);\n    }\n  }\n});\nexport const Remove = Button.extend({\n  children: [{\n    tagName: 'circle',\n    selector: 'button',\n    attributes: {\n      'r': 7,\n      'fill': '#FF1D00',\n      'cursor': 'pointer'\n    }\n  }, {\n    tagName: 'path',\n    selector: 'icon',\n    attributes: {\n      'd': 'M -3 -3 3 3 M -3 3 3 -3',\n      'fill': 'none',\n      'stroke': '#FFFFFF',\n      'stroke-width': 2,\n      'pointer-events': 'none'\n    }\n  }],\n  options: {\n    distance: 60,\n    offset: 0,\n    action: function (evt, view, tool) {\n      view.model.remove({\n        ui: true,\n        tool: tool.cid\n      });\n    }\n  }\n});", "import { Button } from './Button.mjs';\nimport * as util from '../util/index.mjs';\nexport const Connect = Button.extend({\n  name: 'connect',\n  documentEvents: {\n    mousemove: 'drag',\n    touchmove: 'drag',\n    mouseup: 'dragend',\n    touchend: 'dragend',\n    touchcancel: 'dragend'\n  },\n  children: [{\n    tagName: 'circle',\n    selector: 'button',\n    attributes: {\n      'r': 7,\n      'fill': '#333333',\n      'cursor': 'pointer'\n    }\n  }, {\n    tagName: 'path',\n    selector: 'icon',\n    attributes: {\n      'd': 'M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z',\n      'fill': '#FFFFFF',\n      'stroke': 'none',\n      'stroke-width': 2,\n      'pointer-events': 'none'\n    }\n  }],\n  options: {\n    distance: 80,\n    offset: 0,\n    magnet: view => view.el,\n    action: (evt, _view, tool) => tool.dragstart(evt)\n  },\n  getMagnetNode: function () {\n    const {\n      options,\n      relatedView\n    } = this;\n    const {\n      magnet\n    } = options;\n    let magnetNode;\n    switch (typeof magnet) {\n      case 'function':\n        {\n          magnetNode = magnet.call(this, relatedView, this);\n          break;\n        }\n      case 'string':\n        {\n          [magnetNode] = relatedView.findBySelector(magnet);\n          break;\n        }\n      default:\n        {\n          magnetNode = magnet;\n          break;\n        }\n    }\n    if (!magnetNode) magnetNode = relatedView.el;\n    if (magnetNode instanceof SVGElement) return magnetNode;\n    throw new Error('Connect: magnet must be an SVGElement');\n  },\n  dragstart: function (evt) {\n    const {\n      paper,\n      relatedView\n    } = this;\n    const normalizedEvent = util.normalizeEvent(evt);\n    const {\n      x,\n      y\n    } = paper.clientToLocalPoint(normalizedEvent.clientX, normalizedEvent.clientY);\n    relatedView.dragLinkStart(normalizedEvent, this.getMagnetNode(), x, y);\n    paper.undelegateEvents();\n    this.delegateDocumentEvents(null, normalizedEvent.data);\n    this.focus();\n  },\n  drag: function (evt) {\n    const {\n      paper,\n      relatedView\n    } = this;\n    const normalizedEvent = util.normalizeEvent(evt);\n    const {\n      x,\n      y\n    } = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n    relatedView.dragLink(normalizedEvent, x, y);\n  },\n  dragend: function (evt) {\n    const {\n      paper,\n      relatedView\n    } = this;\n    const normalizedEvent = util.normalizeEvent(evt);\n    const {\n      x,\n      y\n    } = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n    relatedView.dragLinkEnd(normalizedEvent, x, y);\n    this.undelegateDocumentEvents();\n    paper.delegateEvents();\n    this.blur();\n    relatedView.checkMouseleave(normalizedEvent);\n  }\n});", "import { Connect } from '../linkTools/Connect.mjs';\nimport V from '../V/index.mjs';\nimport $ from 'jquery';\nimport * as util from '../util/index.mjs';\nimport * as g from '../g/index.mjs';\nexport const HoverConnect = Connect.extend({\n  name: 'hover-connect',\n  defaultMarkup: [{\n    tagName: 'circle',\n    attributes: {\n      'r': 7,\n      'fill': '#333333',\n      'cursor': 'pointer'\n    }\n  }, {\n    tagName: 'path',\n    attributes: {\n      'd': 'M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z',\n      'fill': '#FFFFFF',\n      'stroke': 'none',\n      'stroke-width': 2\n    }\n  }],\n  children() {\n    const {\n      options,\n      defaultMarkup\n    } = this;\n    return [{\n      tagName: 'path',\n      selector: 'track',\n      attributes: {\n        'fill': 'none',\n        'stroke': 'transparent',\n        'stroke-width': options.trackWidth || 15,\n        'cursor': 'pointer'\n      }\n    }, {\n      tagName: 'g',\n      selector: 'button',\n      attributes: {\n        'pointer-events': 'none',\n        'display': 'none'\n      },\n      children: options.markup || defaultMarkup\n    }];\n  },\n  events: Object.assign({\n    mousemove: 'onMousemove',\n    mouseenter: 'onMouseenter',\n    mouseleave: 'onMouseleave'\n  }, Connect.prototype.events),\n  onRender: function () {\n    this.renderChildren();\n    this.update();\n  },\n  trackPath: null,\n  update() {\n    const {\n      childNodes\n    } = this;\n    this.trackPath = this.getTrackPath();\n    Connect.prototype.update.apply(this, arguments);\n    childNodes.track.setAttribute('d', this.trackPath.serialize());\n  },\n  position() {\n    const {\n      el,\n      childNodes\n    } = this;\n    childNodes.button.setAttribute('transform', V.matrixToTransformString(this.getButtonMatrix()));\n    el.setAttribute('transform', V.matrixToTransformString(this.getTrackMatrix()));\n  },\n  getButtonMatrix() {\n    const {\n      options,\n      trackPath\n    } = this;\n    const {\n      offset = 0,\n      distance = 0,\n      rotate,\n      scale\n    } = options;\n    let tangent, position, angle;\n    if (util.isPercentage(distance)) {\n      tangent = trackPath.tangentAtRatio(parseFloat(distance) / 100);\n    } else {\n      tangent = trackPath.tangentAtLength(distance);\n    }\n    if (tangent) {\n      position = tangent.start;\n      angle = tangent.vector().vectorAngle(new g.Point(1, 0)) || 0;\n    } else {\n      position = trackPath.start;\n      angle = 0;\n    }\n    let matrix = V.createSVGMatrix().translate(position.x, position.y).rotate(angle).translate(0, offset);\n    if (!rotate) matrix = matrix.rotate(-angle);\n    if (scale) matrix = matrix.scale(scale);\n    return matrix;\n  },\n  getTrackPath() {\n    return this.relatedView.getConnection();\n  },\n  getTrackMatrix() {\n    return V.createSVGMatrix();\n  },\n  getTrackRatioFromEvent(evt) {\n    const {\n      relatedView,\n      trackPath\n    } = this;\n    const localPoint = relatedView.paper.clientToLocalPoint(evt.clientX, evt.clientY);\n    const trackPoint = V.transformPoint(localPoint, this.getTrackMatrix().inverse());\n    return trackPath.closestPointLength(trackPoint);\n  },\n  canShowButton() {\n    // Has been the paper events undelegated? If so, we can't show the button.\n    // TODO: add a method to the paper to check if the events are delegated.\n    return $._data(this.paper.el, 'events');\n  },\n  showButton() {\n    this.childNodes.button.style.display = 'block';\n  },\n  hideButton() {\n    this.childNodes.button.style.display = '';\n  },\n  onMousemove(evt) {\n    const {\n      trackPath\n    } = this;\n    if (!trackPath) return;\n    const {\n      options\n    } = this;\n    options.distance = this.getTrackRatioFromEvent(evt);\n    this.position();\n  },\n  onMouseenter() {\n    if (!this.canShowButton()) return;\n    this.showButton();\n  },\n  onMouseleave() {\n    this.hideButton();\n  }\n});", "export * from './Control.mjs';\nexport { Button, Remove } from '../linkTools/Button.mjs';\nexport { Connect } from '../linkTools/Connect.mjs';\nexport { Boundary } from '../linkTools/Boundary.mjs';\nexport { HoverConnect } from './HoverConnect.mjs';", "import { ToolView } from '../dia/ToolView.mjs';\nimport * as util from '../util/index.mjs';\nexport const Control = ToolView.extend({\n  tagName: 'g',\n  children: [{\n    tagName: 'circle',\n    selector: 'handle',\n    attributes: {\n      'cursor': 'pointer',\n      'stroke-width': 2,\n      'stroke': '#FFFFFF',\n      'fill': '#33334F',\n      'r': 6\n    }\n  }, {\n    tagName: 'rect',\n    selector: 'extras',\n    attributes: {\n      'pointer-events': 'none',\n      'fill': 'none',\n      'stroke': '#33334F',\n      'stroke-dasharray': '2,4',\n      'rx': 5,\n      'ry': 5\n    }\n  }],\n  events: {\n    mousedown: 'onPointerDown',\n    touchstart: 'onPointerDown',\n    dblclick: 'onPointerDblClick',\n    dbltap: 'onPointerDblClick'\n  },\n  documentEvents: {\n    mousemove: 'onPointerMove',\n    touchmove: 'onPointerMove',\n    mouseup: 'onPointerUp',\n    touchend: 'onPointerUp',\n    touchcancel: 'onPointerUp'\n  },\n  options: {\n    handleAttributes: null,\n    selector: 'root',\n    padding: 6,\n    scale: null\n  },\n  getPosition: function () {\n    // To be overridden\n  },\n  setPosition: function () {\n    // To be overridden\n  },\n  resetPosition: function () {\n    // To be overridden\n  },\n  onRender: function () {\n    this.renderChildren();\n    this.toggleExtras(false);\n    this.update();\n  },\n  update: function () {\n    const {\n      handle,\n      extras\n    } = this.childNodes;\n    if (handle) {\n      this.updateHandle(handle);\n    } else {\n      throw new Error('Control: markup selector `handle` is required');\n    }\n    if (extras) {\n      this.updateExtras(extras);\n    }\n    return this;\n  },\n  updateHandle: function (handleNode) {\n    const {\n      relatedView,\n      options\n    } = this;\n    const {\n      model\n    } = relatedView;\n    const relativePos = this.getPosition(relatedView, this);\n    const absolutePos = model.getAbsolutePointFromRelative(relativePos);\n    const {\n      handleAttributes,\n      scale\n    } = options;\n    let transformString = `translate(${absolutePos.x},${absolutePos.y})`;\n    if (scale) {\n      transformString += ` scale(${scale})`;\n    }\n    handleNode.setAttribute('transform', transformString);\n    if (handleAttributes) {\n      for (let attrName in handleAttributes) {\n        handleNode.setAttribute(attrName, handleAttributes[attrName]);\n      }\n    }\n  },\n  updateExtras: function (extrasNode) {\n    const {\n      relatedView,\n      options\n    } = this;\n    const {\n      selector\n    } = this.options;\n    if (!selector) {\n      this.toggleExtras(false);\n      return;\n    }\n    const [magnet] = relatedView.findBySelector(selector);\n    if (!magnet) throw new Error('Control: invalid selector.');\n    let padding = options.padding;\n    if (!isFinite(padding)) padding = 0;\n    const bbox = relatedView.getNodeUnrotatedBBox(magnet);\n    const model = relatedView.model;\n    const angle = model.angle();\n    const center = bbox.center();\n    if (angle) center.rotate(model.getBBox().center(), -angle);\n    bbox.inflate(padding);\n    extrasNode.setAttribute('x', -bbox.width / 2);\n    extrasNode.setAttribute('y', -bbox.height / 2);\n    extrasNode.setAttribute('width', bbox.width);\n    extrasNode.setAttribute('height', bbox.height);\n    extrasNode.setAttribute('transform', `translate(${center.x},${center.y}) rotate(${angle})`);\n  },\n  toggleExtras: function (visible) {\n    const {\n      extras\n    } = this.childNodes;\n    if (!extras) return;\n    extras.style.display = visible ? '' : 'none';\n  },\n  onPointerDown: function (evt) {\n    const {\n      relatedView,\n      paper\n    } = this;\n    if (this.guard(evt)) return;\n    evt.stopPropagation();\n    evt.preventDefault();\n    paper.undelegateEvents();\n    this.delegateDocumentEvents();\n    this.focus();\n    this.toggleExtras(true);\n    relatedView.model.startBatch('control-move', {\n      ui: true,\n      tool: this.cid\n    });\n  },\n  onPointerMove: function (evt) {\n    const {\n      relatedView,\n      paper\n    } = this;\n    const {\n      model\n    } = relatedView;\n    const {\n      clientX,\n      clientY\n    } = util.normalizeEvent(evt);\n    const coords = paper.clientToLocalPoint(clientX, clientY);\n    const relativeCoords = model.getRelativePointFromAbsolute(coords);\n    this.setPosition(relatedView, relativeCoords, this);\n    this.update();\n  },\n  onPointerUp: function (_evt) {\n    const {\n      relatedView,\n      paper\n    } = this;\n    paper.delegateEvents();\n    this.undelegateDocumentEvents();\n    this.blur();\n    this.toggleExtras(false);\n    relatedView.model.stopBatch('control-move', {\n      ui: true,\n      tool: this.cid\n    });\n  },\n  onPointerDblClick: function () {\n    const {\n      relatedView\n    } = this;\n    this.resetPosition(relatedView, this);\n    this.update();\n  }\n});", "import { HoverConnect as LinkHoverConnect } from '../linkTools/HoverConnect.mjs';\nimport V from '../V/index.mjs';\nimport * as g from '../g/index.mjs';\nimport { getViewBBox } from '../linkTools/helpers.mjs';\nimport { isCalcAttribute, evalCalcAttribute } from '../dia/attributes/calc.mjs';\nexport const HoverConnect = LinkHoverConnect.extend({\n  getTrackPath() {\n    const {\n      relatedView: view,\n      options\n    } = this;\n    let {\n      useModelGeometry,\n      trackPath = 'M 0 0 H calc(w) V calc(h) H 0 Z'\n    } = options;\n    if (typeof trackPath === 'function') {\n      trackPath = trackPath.call(this, view);\n    }\n    if (isCalcAttribute(trackPath)) {\n      const bbox = getViewBBox(view, useModelGeometry);\n      trackPath = evalCalcAttribute(trackPath, bbox);\n    }\n    return new g.Path(V.normalizePathData(trackPath));\n  },\n  getTrackMatrix() {\n    const {\n      relatedView: view,\n      options\n    } = this;\n    let {\n      useModelGeometry,\n      rotate\n    } = options;\n    let bbox = getViewBBox(view, useModelGeometry);\n    const angle = view.model.angle();\n    if (!rotate) bbox = bbox.bbox(angle);\n    let matrix = V.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n    if (rotate) matrix = matrix.rotate(angle);\n    matrix = matrix.translate(-bbox.width / 2, -bbox.height / 2);\n    return matrix;\n  }\n});", "var version = \"3.7.7\";\nexport { version };", "import * as connectors from './connectors/index.mjs';\nimport * as highlighters from './highlighters/index.mjs';\nimport * as connectionPoints from './connectionPoints/index.mjs';\nimport * as connectionStrategies from './connectionStrategies/index.mjs';\nimport * as routers from './routers/index.mjs';\nimport * as anchors from './anchors/index.mjs';\nimport * as linkAnchors from './linkAnchors/index.mjs';\nimport * as dia from './dia/index.mjs';\nimport * as linkTools from './linkTools/index.mjs';\nimport * as elementTools from './elementTools/index.mjs';\nimport * as util from './util/index.mjs';\nimport * as mvc from './mvc/index.mjs';\nimport * as g from './g/index.mjs';\nimport { config } from './config/index.mjs';\nimport V from './V/index.mjs';\nimport * as Port from './layout/ports/port.mjs';\nimport * as PortLabel from './layout/ports/portLabel.mjs';\nexport * from '../dist/version.mjs';\nexport const Vectorizer = V;\nexport const layout = {\n  PortLabel,\n  Port\n};\nexport { env } from './env/index.mjs';\nexport { config, anchors, linkAnchors, connectionPoints, connectionStrategies, connectors, dia, highlighters, mvc, routers, util, linkTools, elementTools, V, g };\nexport const setTheme = function (theme, opt) {\n  opt = opt || {};\n  util.invoke(mvc.views, 'setTheme', theme, opt);\n\n  // Update the default theme on the view prototype.\n  mvc.View.prototype.defaultTheme = theme;\n};"],
  "mappings": "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",
  "names": ["ellipse", "line", "bbox", "property", "min", "max", "cos", "sin", "atan2", "round", "PI", "point", "length", "scale", "max", "min", "left", "top", "right", "bottom", "length", "intersection", "line", "determinant", "sqrt", "round", "pow", "rect", "ellipse", "line", "diff", "result", "point", "center", "abs", "cos", "sin", "min", "max", "round", "pow", "line", "center", "result", "intersection", "rect", "scale", "point", "point", "abs", "rect", "point", "length", "line", "abs", "sqrt", "min", "max", "pow", "left", "top", "right", "bottom", "length", "point", "bbox", "length", "line", "intersection", "curve", "curve", "rect", "line2", "ellipse", "line", "sqrt", "ellipse2", "rect", "length", "cos", "sin", "defaultsDeep", "intersection", "PI", "atan2", "sqrt", "min", "max", "cos", "sin", "V", "line", "ns", "attributes", "parent", "clone", "className", "svg", "bbox", "center", "scale", "length", "rect", "point", "ellipse", "math", "abs", "_13", "_23", "a", "b", "path", "pcom", "i", "result", "length", "props", "othValue", "set", "values", "array", "cacheHas", "key", "collection", "defaultsDeep", "wait", "intersection", "className", "ns", "svg", "$", "attributes", "keys", "length", "last", "value", "property", "max", "bbox", "validUnitExp", "word", "words", "xhr", "callback", "attrs", "top", "right", "bottom", "left", "b", "align", "scale", "i", "d", "el", "clone", "parent", "props", "import_jquery", "point", "$", "stroke", "filter", "fn", "Backbone", "attributes", "defaults", "parent", "clone", "props", "property", "options", "point", "defaultsDeep", "Cell", "fn", "document", "svg", "attributes", "className", "node", "rect", "point", "ports", "center", "ellipse", "bbox", "line", "bottom", "left", "right", "top", "defaultsDeep", "center", "round", "left", "right", "top", "bottom", "Element", "import_backbone", "router", "fn", "attributes", "result", "Element", "parent", "bbox", "center", "left", "right", "top", "bottom", "absolute", "attributes", "Backbone", "Element", "model", "exists", "links", "rect", "bbox", "import_backbone", "import_jquery", "Backbone", "className", "$", "import_backbone", "Backbone", "import_jquery", "toArray", "attributes", "views", "list", "attributes", "$", "bbox", "rect", "scale", "item", "parent", "Flags", "attributes", "max", "parent", "bbox", "bearing", "boundary", "max", "config", "bbox", "point", "getSourceBBox", "getTargetBBox", "getSourceAnchor", "getTargetAnchor", "diff", "snapToGrid", "round", "parent", "min", "anchor", "keys", "key", "config", "point", "line", "anchor", "point", "bbox", "y", "x", "toDirection", "normal", "_13", "_23", "line2", "point", "line", "intersection", "diff", "normal", "CORNER_RADIUS", "PRECISION", "Directions", "last", "curve", "cos", "sin", "import_jquery", "Flags", "attributes", "className", "$", "labelMarkup", "point", "anchor", "line", "scale", "connectionLength", "vToken", "callback", "router", "length", "normal", "bbox", "magnet", "view", "paper", "fn", "Directions", "length", "left", "right", "top", "bottom", "bbox", "length", "fn", "line", "length", "stroke", "align", "bbox", "center", "intersection", "anchor", "bottom", "left", "right", "top", "bbox", "anchor", "topLeft", "bottomRight", "center", "top", "bottom", "left", "right", "import_jquery", "import_backbone", "HighlightingTypes", "$", "defaultsDeep", "svg", "flag", "Backbone", "views", "bbox", "rect", "deltaY", "scale", "evt", "filter", "opacity", "radians", "opacity", "views", "point", "length", "Ellipse", "Path", "Polygon", "Polyline", "Rect", "fn", "result", "Element", "Rect", "Ellipse", "Polygon", "Polyline", "Path", "Circle", "Ellipse", "Image", "Link", "Path", "Polygon", "Polyline", "TextBlock", "Element", "Circle", "Ellipse", "Path", "Polygon", "Polyline", "Image", "TextBlock", "Link", "Link", "Link", "Line", "Element", "Line", "Element", "Arrow", "Element", "Arrow", "Link", "className", "Link", "EndState", "StartState", "State", "Transition", "rect", "State", "StartState", "EndState", "Transition", "absolute", "max", "fn", "bbox", "length", "scale", "scale", "line", "anchor", "length", "scale", "bbox", "bbox", "center", "anchor", "scale", "bbox", "import_jquery", "scale", "$", "HoverConnect", "scale", "bbox", "center", "HoverConnect", "bbox"]
}
